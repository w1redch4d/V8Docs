<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>v8: src/objects/map-updater.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="v8.svg"/></td>
  <td id="projectalign">
   <div id="projectname">v8
   </div>
   <div id="projectbrief">V8 is Googleâ€™s open source high-performance JavaScript and WebAssembly engine, written in C++. It is used in Chrome and in Node.js, among others. It implements ECMAScript and WebAssembly, and runs on Windows, macOS, and Linux systems that use x64, IA-32, or ARM processors. V8 can be embedded into any C++ application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('map-updater_8cc_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">map-updater.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="map-updater_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2017 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="map-updater_8h.html">src/objects/map-updater.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;<a class="code" href="mutex_8h.html">src/base/platform/mutex.h</a>&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="frames_8h.html">src/execution/frames.h</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="execution_2isolate_8h.html">src/execution/isolate.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="handles_8h.html">src/handles/handles.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="parked-scope-inl_8h.html">src/heap/parked-scope-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="field-type_8h.html">src/objects/field-type.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="keys_8h.html">src/objects/keys.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="objects-inl_8h.html">src/objects/objects-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="objects_8h.html">src/objects/objects.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="property-details_8h.html">src/objects/property-details.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="transitions_8h.html">src/objects/transitions.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacev8_1_1internal.html">v8::internal</a> {</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="keyword">inline</span> <span class="keywordtype">bool</span> EqualImmutableValues(<a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> obj1, <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> obj2) {</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>  <span class="keywordflow">if</span> (obj1 == obj2) <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Valid for both kData and kAccessor kinds.</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  <span class="comment">// TODO(ishell): compare AccessorPairs.</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>}</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>V8_WARN_UNUSED_RESULT Handle&lt;FieldType&gt; GeneralizeFieldType(</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    Representation rep1, Handle&lt;FieldType&gt; type1, Representation rep2,</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    Handle&lt;FieldType&gt; type2, Isolate* isolate) {</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">FieldType::NowIs</a>(*type1, type2)) <span class="keywordflow">return</span> type2;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">FieldType::NowIs</a>(*type2, type1)) <span class="keywordflow">return</span> type1;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#a83b2eae94beaffcfdd7b2465521b3c17">FieldType::Any</a>(isolate);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>}</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="keywordtype">void</span> PrintGeneralization(Isolate* isolate, DirectHandle&lt;Map&gt; map, FILE* file,</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>                         <span class="keyword">const</span> <span class="keywordtype">char</span>* reason, InternalIndex modify_index,</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>                         <span class="keywordtype">int</span> split, <span class="keywordtype">int</span> descriptors, <span class="keywordtype">bool</span> descriptor_to_field,</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>                         Representation old_representation,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>                         Representation new_representation,</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>                         <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> old_constness,</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>                         <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> new_constness,</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>                         MaybeDirectHandle&lt;FieldType&gt; old_field_type,</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>                         MaybeDirectHandle&lt;Object&gt; old_value,</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>                         MaybeDirectHandle&lt;FieldType&gt; new_field_type,</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>                         MaybeDirectHandle&lt;Object&gt; new_value) {</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  OFStream os(file);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  os &lt;&lt; <span class="stringliteral">&quot;[generalizing]&quot;</span>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Name&gt;</a> name = map-&gt;instance_descriptors(isolate)-&gt;GetKey(modify_index);</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>  <span class="keywordflow">if</span> (IsString(name)) {</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;String&gt;</a>(name)-&gt;PrintOn(file);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    os &lt;&lt; <span class="stringliteral">&quot;{symbol &quot;</span> &lt;&lt; <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(name.ptr()) &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  }</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  os &lt;&lt; <span class="stringliteral">&quot;:&quot;</span>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  <span class="keywordflow">if</span> (descriptor_to_field) {</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    os &lt;&lt; <span class="stringliteral">&quot;c&quot;</span>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    os &lt;&lt; old_representation.Mnemonic() &lt;&lt; <span class="stringliteral">&quot;{&quot;</span>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="keywordflow">if</span> (old_field_type.is_null()) {</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>      os &lt;&lt; Brief(*(old_value.ToHandleChecked()));</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>      <a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#a1d02185c5efa65acb3cf70f9d74ddf76">FieldType::PrintTo</a>(*old_field_type.ToHandleChecked(), os);</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    }</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    os &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; old_constness &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>  }</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  os &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span> &lt;&lt; new_representation.Mnemonic() &lt;&lt; <span class="stringliteral">&quot;{&quot;</span>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  <span class="keywordflow">if</span> (new_field_type.is_null()) {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    os &lt;&lt; Brief(*(new_value.ToHandleChecked()));</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#a1d02185c5efa65acb3cf70f9d74ddf76">FieldType::PrintTo</a>(*new_field_type.ToHandleChecked(), os);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  }</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  os &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; new_constness &lt;&lt; <span class="stringliteral">&quot;} (&quot;</span>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  <span class="keywordflow">if</span> (strlen(reason) &gt; 0) {</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    os &lt;&lt; reason;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    os &lt;&lt; <span class="stringliteral">&quot;+&quot;</span> &lt;&lt; (descriptors - <a class="code hl_function" href="namespacev8_1_1internal_1_1libvtune.html#a85908a2ac6abdcec9ee9c4f7e51e795f">split</a>) &lt;&lt; <span class="stringliteral">&quot; maps&quot;</span>;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  }</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  os &lt;&lt; <span class="stringliteral">&quot;) [&quot;</span>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <a class="code hl_function" href="classv8_1_1internal_1_1JavaScriptFrame.html#a69de8494527b217bfd2bcde82196cd31">JavaScriptFrame::PrintTop</a>(isolate, file, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  os &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>}</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="foldopen" id="foldopen00090" data-start="{" data-end="}">
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#ae9b27ee9a9387da8cfe568ee414fdfba">   90</a></span><a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#ae9b27ee9a9387da8cfe568ee414fdfba">MapUpdater::MapUpdater</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> old_map)</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    : isolate_(isolate),</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>      old_map_(old_map),</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>      old_descriptors_(old_map-&gt;<a class="code hl_variable" href="namespacev8_1_1internal.html#a82beb9016b7ce7849ce0d3e1db9c9a6d">instance_descriptors</a>(isolate), isolate_),</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>      old_nof_(old_map_-&gt;NumberOfOwnDescriptors()),</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>      new_elements_kind_(old_map_-&gt;elements_kind()),</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>      is_transitionable_fast_elements_kind_(</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>          <a class="code hl_function" href="namespacev8_1_1internal.html#adebc0402796327b823dd66cd2aad4c47">IsTransitionableFastElementsKind</a>(new_elements_kind_)) {</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>  <span class="comment">// We shouldn&#39;t try to update remote objects.</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>      !IsFunctionTemplateInfo(old_map-&gt;FindRootMap(isolate)-&gt;GetConstructor()));</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>}</div>
</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Name&gt;</a> MapUpdater::GetKey(<a class="code hl_class" href="classv8_1_1internal_1_1InternalIndex.html">InternalIndex</a> descriptor)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  <span class="keywordflow">return</span> old_descriptors_-&gt;GetKey(descriptor);</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>}</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>PropertyDetails MapUpdater::GetDetails(InternalIndex descriptor)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptor.is_found());</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  <span class="keywordflow">if</span> (descriptor == modified_descriptor_) {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">PropertyAttributes</a> attributes = new_attributes_;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="comment">// If the original map was sealed or frozen, let&#39;s use the old</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="comment">// attributes so that we follow the same transition path as before.</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="comment">// Note that the user could not have changed the attributes because</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="comment">// both seal and freeze make the properties non-configurable. An exception</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="comment">// is transitioning from [[Writable]] = true to [[Writable]] = false (this</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="comment">// is allowed for frozen and sealed objects). To support it, we use the new</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="comment">// attributes if they have [[Writable]] == false.</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keywordflow">if</span> ((integrity_level_ == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436ae1b3d8db108d2f4b5319b8d1ac5ebaef">SEALED</a> || integrity_level_ == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436ac96c4a6f8b2f89bb1dbaebb75becb0c2">FROZEN</a>) &amp;&amp;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        !(new_attributes_ &amp; <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436ad8ce154ac002d77d3cca81d16765a76f">READ_ONLY</a>)) {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>      attributes = old_descriptors_-&gt;GetDetails(descriptor).attributes();</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">return</span> PropertyDetails(new_kind_, attributes, new_location_, new_constness_,</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                           new_representation_);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="keywordflow">return</span> old_descriptors_-&gt;GetDetails(descriptor);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>}</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> MapUpdater::GetValue(InternalIndex descriptor)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptor.is_found());</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  <span class="keywordflow">if</span> (descriptor == modified_descriptor_) {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295">PropertyLocation::kDescriptor</a>, new_location_);</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  }</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295">PropertyLocation::kDescriptor</a>, GetDetails(descriptor).location());</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  <span class="keywordflow">return</span> old_descriptors_-&gt;GetStrongValue(descriptor);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>}</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span><a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;FieldType&gt;</a> MapUpdater::GetFieldType(InternalIndex descriptor)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptor.is_found());</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  <span class="keywordflow">if</span> (descriptor == modified_descriptor_) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>, new_location_);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordflow">return</span> *new_field_type_;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>, GetDetails(descriptor).location());</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keywordflow">return</span> old_descriptors_-&gt;GetFieldType(descriptor);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>}</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>Handle&lt;FieldType&gt; MapUpdater::GetOrComputeFieldType(</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    InternalIndex descriptor, <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4">PropertyLocation</a> location,</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    Representation representation)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptor.is_found());</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>  <span class="comment">// |location| is just a pre-fetched GetDetails(descriptor).location().</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(location, GetDetails(descriptor).location());</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  <span class="keywordflow">if</span> (location == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(GetFieldType(descriptor), isolate_);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1Object.html#ad8ba91fef577036db0736a6d551ed3e8">Object::OptimalType</a>(GetValue(descriptor), isolate_, representation);</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>  }</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>}</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>Handle&lt;FieldType&gt; MapUpdater::GetOrComputeFieldType(</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    DirectHandle&lt;DescriptorArray&gt; descriptors, InternalIndex descriptor,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4">PropertyLocation</a> location, Representation representation) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <span class="comment">// |location| is just a pre-fetched GetDetails(descriptor).location().</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(descriptors-&gt;GetDetails(descriptor).location(), location);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  <span class="keywordflow">if</span> (location == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(descriptors-&gt;GetFieldType(descriptor), isolate_);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1Object.html#ad8ba91fef577036db0736a6d551ed3e8">Object::OptimalType</a>(descriptors-&gt;GetStrongValue(descriptor),</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>                               isolate_, representation);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>}</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="foldopen" id="foldopen00174" data-start="{" data-end="}">
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#a2e9a04b72d0f858b38ef762eb3b6d07e">  174</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#a2e9a04b72d0f858b38ef762eb3b6d07e">MapUpdater::ReconfigureToDataField</a>(<a class="code hl_class" href="classv8_1_1internal_1_1InternalIndex.html">InternalIndex</a> descriptor,</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                                               <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">PropertyAttributes</a> attributes,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                                               <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> constness,</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>                                               <a class="code hl_class" href="classv8_1_1internal_1_1Representation.html">Representation</a> representation,</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>                                               <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;FieldType&gt;</a> field_type) {</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(kInitialized, state_);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptor.<a class="code hl_function" href="classv8_1_1internal_1_1InternalIndex.html#ad381db083f3f9b72f16908eac7027823">is_found</a>());</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!old_map_-&gt;is_dictionary_map());</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <a class="code hl_class" href="classv8_1_1internal_1_1ParkedSharedMutexGuardIf.html">ParkedSharedMutexGuardIf&lt;base::kExclusive&gt;</a> mutex_guard(</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>      isolate_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a3da2978869f7e0460fbd67ad0a9e4728">main_thread_local_isolate</a>(), isolate_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a18ef19dc9a745b1858ae8db9178431e0">map_updater_access</a>(),</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>      <span class="keyword">true</span>);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  modified_descriptor_ = descriptor;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  new_kind_ = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  new_attributes_ = attributes;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  new_location_ = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PropertyDetails.html">PropertyDetails</a> old_details =</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>      old_descriptors_-&gt;GetDetails(modified_descriptor_);</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <span class="comment">// If property kind is not reconfigured merge the result with</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  <span class="comment">// representation/field type from the old descriptor.</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <span class="keywordflow">if</span> (old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a84ec5d54214083de458bfc43b8c3ac1b">kind</a>() == new_kind_) {</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    new_constness_ = <a class="code hl_function" href="namespacev8_1_1internal.html#a617d346a46eb703e1719792077e5c2a0">GeneralizeConstness</a>(constness, old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">constness</a>());</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Representation.html">Representation</a> old_representation = old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>();</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    new_representation_ = representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a8bdd97567badb1040967d90910c76c54">generalize</a>(old_representation);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;FieldType&gt;</a> old_field_type =</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        GetOrComputeFieldType(old_descriptors_, modified_descriptor_,</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>                              old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a2d8f536f39a3ab2754cdd721de544ae4">location</a>(), new_representation_);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    new_field_type_ =</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        GeneralizeFieldType(old_representation, old_field_type,</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>                            new_representation_, field_type, isolate_);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    <span class="comment">// We don&#39;t know if this is a first property kind reconfiguration</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="comment">// and we don&#39;t know which value was in this property previously</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="comment">// therefore we can&#39;t treat such a property as constant.</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    new_constness_ = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49aca32567d9e5f2d66c9b326c45e800abcf6">PropertyConstness::kMutable</a>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    new_representation_ = representation;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    new_field_type_ = field_type;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  }</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span> </div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#a04acac5a33f9e8cd1e3afc1d993b5f2e">Map::GeneralizeIfCanHaveTransitionableFastElementsKind</a>(</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>      isolate_, old_map_-&gt;instance_type(), &amp;new_representation_,</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>      &amp;new_field_type_);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="keywordflow">if</span> (TryReconfigureToDataFieldInplace() == kEnd) <span class="keywordflow">return</span> result_map_;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="keywordflow">if</span> (FindRootMap() == kEnd) <span class="keywordflow">return</span> result_map_;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="keywordflow">if</span> (FindTargetMap() == kEnd) <span class="keywordflow">return</span> result_map_;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>  <span class="keywordflow">if</span> (ConstructNewMap() == kAtIntegrityLevelSource) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    ConstructNewMapWithIntegrityLevelTransition();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  }</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(kEnd, state_);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  <span class="keywordflow">return</span> result_map_;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>}</div>
</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="foldopen" id="foldopen00233" data-start="{" data-end="}">
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#a484aea5ba3eabca6a01a0542e7c6206b">  233</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#a484aea5ba3eabca6a01a0542e7c6206b">MapUpdater::ReconfigureElementsKind</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> elements_kind) {</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(kInitialized, state_);</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  new_elements_kind_ = elements_kind;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  is_transitionable_fast_elements_kind_ =</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#adebc0402796327b823dd66cd2aad4c47">IsTransitionableFastElementsKind</a>(new_elements_kind_);</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#ad9af4bdcc4d58fa609e0156c89ae483d">Update</a>();</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>}</div>
</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="foldopen" id="foldopen00243" data-start="{" data-end="}">
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#a62370c6e6a97b815ffaf307a4b478905">  243</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#a62370c6e6a97b815ffaf307a4b478905">MapUpdater::ApplyPrototypeTransition</a>(</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSPrototype&gt;</a> prototype) {</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.move_prototype_transitions_first);</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(kInitialized, state_);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(old_map_-&gt;prototype(), *prototype);</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  <span class="comment">// Prototype maps are replaced by deprecation when their prototype changes. No</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <span class="comment">// need to add a transition.</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  <span class="keywordflow">if</span> (old_map_-&gt;is_prototype_map()) {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#a20eefa90d1b4f884523d09a916d29968">Map::CopyForPrototypeTransition</a>(isolate_, old_map_, prototype);</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>  new_prototype_ = <a class="code hl_variable" href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">prototype</a>;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  <span class="comment">// TODO(olivf): The updated map can have more generic field types than the</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>  <span class="comment">// source map. This is ok, since UpdatePrototype also does an instance</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>  <span class="comment">// migration. If we wanted to avoid the migration for most cases, we could</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <span class="comment">// potentially back-propagate generalizations here.</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#ad9af4bdcc4d58fa609e0156c89ae483d">Update</a>();</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>}</div>
</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span><span class="comment">// static</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> MapUpdater::UpdateMapNoLock(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> map) {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  <span class="keywordflow">if</span> (!map-&gt;is_deprecated()) <span class="keywordflow">return</span> <a class="code hl_variable" href="js-date-time-format_8cc.html#a22ede25ca923109929a8dca3c225b2ad">map</a>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="comment">// TODO(ishell): support fast map updating if we enable it.</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.fast_map_update);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MapUpdater.html">MapUpdater</a> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ac32ecba880a377a7f55cbaac76cdb604a9dd99cf48494ee0277563736ce16a91a">mu</a>(isolate, map);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  <span class="comment">// Update map without locking the Isolate::map_updater_access mutex.</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ac32ecba880a377a7f55cbaac76cdb604a9dd99cf48494ee0277563736ce16a91a">mu</a>.UpdateImpl();</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>}</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="foldopen" id="foldopen00274" data-start="{" data-end="}">
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#ad9af4bdcc4d58fa609e0156c89ae483d">  274</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#ad9af4bdcc4d58fa609e0156c89ae483d">MapUpdater::Update</a>() {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  <a class="code hl_class" href="classv8_1_1base_1_1SharedMutexGuard.html">base::SharedMutexGuard&lt;base::kExclusive&gt;</a> mutex_guard(</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>      isolate_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a18ef19dc9a745b1858ae8db9178431e0">map_updater_access</a>());</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>  <span class="keywordflow">return</span> UpdateImpl();</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>}</div>
</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> MapUpdater::UpdateImpl() {</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(kInitialized, state_);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(new_prototype_.is_null() &amp;&amp;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>                     new_elements_kind_ == old_map_-&gt;elements_kind(),</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>                 old_map_-&gt;is_deprecated());</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  <span class="keywordflow">if</span> (FindRootMap() == kEnd) <span class="keywordflow">return</span> result_map_;</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>  <span class="keywordflow">if</span> (FindTargetMap() == kEnd) <span class="keywordflow">return</span> result_map_;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  <span class="keywordflow">if</span> (ConstructNewMap() == kAtIntegrityLevelSource) {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    ConstructNewMapWithIntegrityLevelTransition();</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  }</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(kEnd, state_);</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.fast_map_update &amp;&amp; old_map_-&gt;is_deprecated())) {</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#a64817485831624fe362de42517e75283">TransitionsAccessor::SetMigrationTarget</a>(isolate_, old_map_, *result_map_);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>  }</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>  <span class="keywordflow">return</span> result_map_;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>}</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span><span class="keyword">struct </span>IntegrityLevelTransitionInfo {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  <span class="keyword">explicit</span> IntegrityLevelTransitionInfo(<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> map)</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>      : <a class="code hl_variable" href="map-updater_8cc.html#ab0c7a62c6b2f38fda161c855c4f12997">integrity_level_source_map</a>(map) {}</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno"><a class="line" href="map-updater_8cc.html#a6c94a6eb4baa0d0669fd253d1fe19d91">  303</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="map-updater_8cc.html#a6c94a6eb4baa0d0669fd253d1fe19d91">has_integrity_level_transition</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno"><a class="line" href="map-updater_8cc.html#aa1d8418338b652496b6bf3ca16695471">  304</a></span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">PropertyAttributes</a> <a class="code hl_variable" href="map-updater_8cc.html#aa1d8418338b652496b6bf3ca16695471">integrity_level</a> = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370">NONE</a>;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno"><a class="line" href="map-updater_8cc.html#ab0c7a62c6b2f38fda161c855c4f12997">  305</a></span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> <a class="code hl_variable" href="map-updater_8cc.html#ab0c7a62c6b2f38fda161c855c4f12997">integrity_level_source_map</a>;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno"><a class="line" href="map-updater_8cc.html#a3947ef6737b193024c0f915e800d821c">  306</a></span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Symbol&gt;</a> <a class="code hl_variable" href="map-updater_8cc.html#a3947ef6737b193024c0f915e800d821c">integrity_level_symbol</a>;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>};</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>IntegrityLevelTransitionInfo DetectIntegrityLevelTransitions(</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> map, Isolate* isolate, <a class="code hl_typedef" href="namespacev8_1_1internal.html#a20971f8a9770697fdde08004c19035a3">DisallowGarbageCollection</a>* no_gc,</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6">ConcurrencyMode</a> cmode) {</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  IntegrityLevelTransitionInfo <a class="code hl_variable" href="debug-coverage_8cc.html#aa28b37bd003d1724a468ca0cfa8478d2">info</a>(map);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span> </div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>  <span class="comment">// Figure out the most restrictive integrity level transition (it should</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>  <span class="comment">// be the last one in the transition tree).</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!map-&gt;is_extensible());</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a> = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(map-&gt;GetBackPointer(isolate));</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>  TransitionsAccessor last_transitions(isolate, <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>, <a class="code hl_function" href="namespacev8_1_1internal.html#aec984e37242506ca572e0222f9e307a6">IsConcurrent</a>(cmode));</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  <span class="keywordflow">if</span> (!last_transitions.HasIntegrityLevelTransitionTo(</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>          map, &amp;info.integrity_level_symbol, &amp;info.integrity_level)) {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="comment">// The last transition was not integrity level transition - just bail out.</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="comment">// This can happen in the following cases:</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="comment">// - there are private symbol transitions following the integrity level</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="comment">//   transitions (see crbug.com/v8/8854).</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <span class="comment">// - there is a getter added in addition to an existing setter (or a setter</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="comment">//   in addition to an existing getter).</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="debug-coverage_8cc.html#aa28b37bd003d1724a468ca0cfa8478d2">info</a>;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> source_map = <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  <span class="comment">// Now walk up the back pointer chain and skip all integrity level</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  <span class="comment">// transitions. If we encounter any non-integrity level transition interleaved</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  <span class="comment">// with integrity level transitions, just bail out.</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>  <span class="keywordflow">while</span> (!source_map-&gt;is_extensible()) {</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a> = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(source_map-&gt;GetBackPointer(isolate));</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    TransitionsAccessor transitions(isolate, <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>, <a class="code hl_function" href="namespacev8_1_1internal.html#aec984e37242506ca572e0222f9e307a6">IsConcurrent</a>(cmode));</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <span class="keywordflow">if</span> (!transitions.HasIntegrityLevelTransitionTo(source_map)) {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>      <span class="keywordflow">return</span> <a class="code hl_variable" href="debug-coverage_8cc.html#aa28b37bd003d1724a468ca0cfa8478d2">info</a>;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    source_map = <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  <span class="comment">// Integrity-level transitions never change number of descriptors.</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(map-&gt;NumberOfOwnDescriptors(), source_map-&gt;NumberOfOwnDescriptors());</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>  info.has_integrity_level_transition = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>  info.integrity_level_source_map = source_map;</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="debug-coverage_8cc.html#aa28b37bd003d1724a468ca0cfa8478d2">info</a>;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>}</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen00354" data-start="{" data-end="}">
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#a9bed85b35162390b6cd90f5598f8947e">  354</a></span>std::optional&lt;Tagged&lt;Map&gt;&gt; <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#a9bed85b35162390b6cd90f5598f8947e">MapUpdater::TryUpdateNoLock</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                                                       <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> old_map,</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                                                       <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6">ConcurrencyMode</a> cmode) {</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> no_gc;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>  <span class="comment">// Check the state of the root map.</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> root_map = old_map-&gt;FindRootMap(isolate);</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>  <span class="keywordflow">if</span> (root_map-&gt;is_deprecated()) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;JSFunction&gt;</a> constructor =</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;JSFunction&gt;</a>(root_map-&gt;GetConstructor());</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(constructor-&gt;has_initial_map());</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(constructor-&gt;initial_map()-&gt;is_dictionary_map());</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="keywordflow">if</span> (constructor-&gt;initial_map()-&gt;elements_kind() !=</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        old_map-&gt;elements_kind()) {</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    }</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="keywordflow">return</span> constructor-&gt;initial_map();</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>  }</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span> </div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.move_prototype_transitions_first &amp;&amp;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>      root_map-&gt;prototype() != old_map-&gt;prototype()) {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="keyword">auto</span> maybe_transition = <a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#a20df3aba83cced04f0675bdd7d773d48">TransitionsAccessor::GetPrototypeTransition</a>(</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        isolate, root_map, old_map-&gt;prototype());</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    <span class="keywordflow">if</span> (!maybe_transition) {</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>      <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    root_map = *maybe_transition;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>  }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  <span class="keywordflow">if</span> (!old_map-&gt;EquivalentToForTransition(root_map, cmode)) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span> </div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> from_kind = root_map-&gt;elements_kind();</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> to_kind = old_map-&gt;elements_kind();</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>  IntegrityLevelTransitionInfo <a class="code hl_variable" href="debug-coverage_8cc.html#aa28b37bd003d1724a468ca0cfa8478d2">info</a>(old_map);</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>  <span class="keywordflow">if</span> (root_map-&gt;is_extensible() != old_map-&gt;is_extensible()) {</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!old_map-&gt;is_extensible());</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(root_map-&gt;is_extensible());</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    info = DetectIntegrityLevelTransitions(old_map, isolate, &amp;no_gc, cmode);</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="comment">// Bail out if there were some private symbol transitions mixed up</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="comment">// with the integrity level transitions.</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="keywordflow">if</span> (!info.has_integrity_level_transition) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="comment">// Make sure to replay the original elements kind transitions, before</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="comment">// the integrity level transition sets the elements to dictionary mode.</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(to_kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37">DICTIONARY_ELEMENTS</a> ||</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>           to_kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149ca6f1bdf5c8e2bb9db9d77063c18e3be8a">SLOW_STRING_WRAPPER_ELEMENTS</a> ||</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>           <a class="code hl_function" href="namespacev8_1_1internal.html#acdba172e431975689d6370894506ab7f">IsTypedArrayOrRabGsabTypedArrayElementsKind</a>(to_kind) ||</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>           <a class="code hl_function" href="namespacev8_1_1internal.html#a27202b6f0818cc28c6f2bded2cd0211c">IsAnyHoleyNonextensibleElementsKind</a>(to_kind));</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    to_kind = info.integrity_level_source_map-&gt;elements_kind();</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>  }</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>  <span class="keywordflow">if</span> (from_kind != to_kind) {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="comment">// Try to follow existing elements kind transitions.</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    root_map = root_map-&gt;LookupElementsTransitionMap(isolate, to_kind, cmode);</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="keywordflow">if</span> (root_map.<a class="code hl_function" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a0b3e2aefd7dbaf06dd5dc4641d0d00f5">is_null</a>()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="comment">// From here on, use the map with correct elements kind as root map.</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  }</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  <span class="comment">// Replay the transitions as they were before the integrity level transition.</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = root_map-&gt;TryReplayPropertyTransitions(</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>      isolate, info.integrity_level_source_map, cmode);</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.is_null()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>  <span class="keywordflow">if</span> (info.has_integrity_level_transition) {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="comment">// Now replay the integrity level transition.</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = <a class="code hl_class" href="classv8_1_1internal_1_1TransitionsAccessor.html">TransitionsAccessor</a>(isolate, *<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>, <a class="code hl_function" href="namespacev8_1_1internal.html#aec984e37242506ca572e0222f9e307a6">IsConcurrent</a>(cmode))</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>                 .<a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#abbb20363330eadc596056c40de5e04cc">SearchSpecial</a>(info.integrity_level_symbol);</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>  }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.is_null()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>  <span class="comment">// TODO(olivf, 370536107): For investigating crashes. Should become a CHECK</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>  <span class="comment">// again once resolved.</span></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>  <span class="keywordflow">if</span> (old_map-&gt;elements_kind() != (*result)-&gt;elements_kind()) {</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    isolate-&gt;PushStackTraceAndDie(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(old_map.<a class="code hl_function" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a07c12d3bf0972861e1c5aefabd00971f">address</a>()),</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>                                  <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>((*result).address()),</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>                                  <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(root_map.<a class="code hl_function" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a07c12d3bf0972861e1c5aefabd00971f">address</a>()));</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>  }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(old_map-&gt;instance_type(), (*result)-&gt;instance_type());</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>}</div>
</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">MapUpdater::GeneralizeField</a>(<a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map,</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1InternalIndex.html">InternalIndex</a> modify_index,</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>                                 <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> new_constness,</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Representation.html">Representation</a> new_representation,</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;FieldType&gt;</a> new_field_type) {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">GeneralizeField</a>(isolate_, map, modify_index, new_constness,</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>                  new_representation, new_field_type);</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span> </div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(*old_descriptors_ == old_map_-&gt;instance_descriptors(isolate_) ||</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>         *old_descriptors_ ==</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>             integrity_source_map_-&gt;instance_descriptors(isolate_));</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>}</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span> </div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>MapUpdater::State MapUpdater::Normalize(<span class="keyword">const</span> <span class="keywordtype">char</span>* reason) {</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>  result_map_ =</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>      <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#aae668ae5d352e15e940cdfdbaa6007b1">Map::Normalize</a>(isolate_, old_map_, new_elements_kind_, new_prototype_,</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                     <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aff269dc9be2370cdca244d8f1f97237aac5a8bff008f8e182215fa48828c8cdb5">CLEAR_INOBJECT_PROPERTIES</a>, reason);</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>  state_ = kEnd;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>  <span class="keywordflow">return</span> state_;  <span class="comment">// Done.</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>}</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen00456" data-start="{" data-end="}">
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#a17b96916a316657681c5382aa61bab1a">  456</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#a17b96916a316657681c5382aa61bab1a">MapUpdater::CompleteInobjectSlackTracking</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>                                               <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> initial_map) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>  <span class="comment">// Has to be an initial map.</span></div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(IsUndefined(initial_map-&gt;GetBackPointer(), isolate));</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span> </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> slack = initial_map-&gt;ComputeMinObjectSlack(isolate);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>  <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(slack, 0);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span> </div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  <a class="code hl_class" href="classv8_1_1internal_1_1TransitionsAccessor.html">TransitionsAccessor</a> transitions(isolate, initial_map);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1TransitionsAccessor.html#a8c297451ba23e1c19bd8fe070aba45bb">TransitionsAccessor::TraverseCallback</a> <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>  <span class="keywordflow">if</span> (slack != 0) {</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    <span class="comment">// Resize the initial map and all maps in its transition tree.</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a> = [slack](<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> <a class="code hl_variable" href="js-date-time-format_8cc.html#a22ede25ca923109929a8dca3c225b2ad">map</a>) {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>      <span class="keywordtype">int</span> old_visitor_id = <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#ac7bfaa7f77e1d8cd95dde6d97baf46a7">Map::GetVisitorId</a>(map);</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>      <span class="keywordtype">int</span> new_unused = map-&gt;UnusedPropertyFields() - slack;</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>      map-&gt;set_instance_size(map-&gt;InstanceSizeFromSlack(slack));</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>      map-&gt;set_construction_counter(<a class="code hl_variable" href="classv8_1_1internal_1_1Map.html#a2a2d69d6abc592918fe00f31f4d32a74">Map::kNoSlackTracking</a>);</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_visitor_id, <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#ac7bfaa7f77e1d8cd95dde6d97baf46a7">Map::GetVisitorId</a>(map));</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(new_unused, map-&gt;UnusedPropertyFields());</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    };</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="comment">// Stop slack tracking for this map.</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a> = [&amp;](<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> <a class="code hl_variable" href="js-date-time-format_8cc.html#a22ede25ca923109929a8dca3c225b2ad">map</a>) {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>      map-&gt;set_construction_counter(<a class="code hl_variable" href="classv8_1_1internal_1_1Map.html#a2a2d69d6abc592918fe00f31f4d32a74">Map::kNoSlackTracking</a>);</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_class" href="classv8_1_1internal_1_1TransitionsAccessor.html">TransitionsAccessor</a>(isolate, map).HasSideStepTransitions());</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    };</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>  {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="comment">// The map_updater_access lock is taken here to guarantee atomicity of all</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="comment">// related map changes (instead of guaranteeing only atomicity of each</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="comment">// single map change). This is needed e.g. by InstancesNeedsRewriting,</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    <span class="comment">// which expects certain relations between maps to hold.</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="comment">// Note: Avoid locking the full_transition_array_access lock inside this</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="comment">// call to TraverseTransitionTree to prevent dependencies between the two</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <span class="comment">// locks.</span></div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <a class="code hl_class" href="classv8_1_1base_1_1SharedMutexGuard.html">base::SharedMutexGuard&lt;base::kExclusive&gt;</a> mutex_guard(</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>        isolate-&gt;map_updater_access());</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    transitions.TraverseTransitionTree(<a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>);</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>  }</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>}</div>
</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>MapUpdater::State MapUpdater::TryReconfigureToDataFieldInplace() {</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>  <span class="comment">// Updating deprecated maps in-place doesn&#39;t make sense.</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>  <span class="keywordflow">if</span> (old_map_-&gt;is_deprecated()) <span class="keywordflow">return</span> state_;</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span> </div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>  <span class="keywordflow">if</span> (new_representation_.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a3c8d99598894389c44cbe32d5ce7a3fa">IsNone</a>()) <span class="keywordflow">return</span> state_;  <span class="comment">// Not done yet.</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PropertyDetails.html">PropertyDetails</a> old_details =</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>      old_descriptors_-&gt;GetDetails(modified_descriptor_);</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span> </div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>  <span class="keywordflow">if</span> (old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a21bd1ca61406d144db4b384a71cdcc96">attributes</a>() != new_attributes_ ||</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>      old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a84ec5d54214083de458bfc43b8c3ac1b">kind</a>() != new_kind_ ||</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>      old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a2d8f536f39a3ab2754cdd721de544ae4">location</a>() != new_location_) {</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="comment">// These changes can&#39;t be done in-place.</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <span class="keywordflow">return</span> state_;  <span class="comment">// Not done yet.</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>  }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>  Representation old_representation = old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>();</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>  <span class="keywordflow">if</span> (!old_representation.CanBeInPlaceChangedTo(new_representation_)) {</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="keywordflow">return</span> state_;  <span class="comment">// Not done yet.</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>  }</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span> </div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(new_kind_, old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a84ec5d54214083de458bfc43b8c3ac1b">kind</a>());</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(new_attributes_, old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a21bd1ca61406d144db4b384a71cdcc96">attributes</a>());</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>, old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a2d8f536f39a3ab2754cdd721de544ae4">location</a>());</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_generalization) {</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    PrintGeneralization(</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        isolate_, old_map_, stdout, <span class="stringliteral">&quot;uninitialized field&quot;</span>, modified_descriptor_,</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        old_nof_, old_nof_, <span class="keyword">false</span>, old_representation, new_representation_,</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">constness</a>(), new_constness_,</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(old_descriptors_-&gt;GetFieldType(modified_descriptor_),</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>                      isolate_),</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        {}, new_field_type_, {});</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>  }</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">GeneralizeField</a>(old_map_, modified_descriptor_, new_constness_,</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>                  new_representation_, new_field_type_);</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>  <span class="comment">// Check that the descriptor array was updated.</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(old_descriptors_-&gt;GetDetails(modified_descriptor_)</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>             .representation()</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>             .Equals(new_representation_));</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">FieldType::NowIs</a>(old_descriptors_-&gt;GetFieldType(modified_descriptor_),</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>                          new_field_type_));</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span> </div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>  result_map_ = old_map_;</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>  state_ = kEnd;</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>  <span class="keywordflow">return</span> state_;  <span class="comment">// Done.</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>}</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span><span class="keywordtype">bool</span> MapUpdater::TrySaveIntegrityLevelTransitions() {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>  <span class="comment">// Figure out the most restrictive integrity level transition (it should</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>  <span class="comment">// be the last one in the transition tree).</span></div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>  DirectHandle&lt;Map&gt; <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(old_map_-&gt;GetBackPointer()), isolate_);</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Symbol&gt;</a> <a class="code hl_variable" href="map-updater_8cc.html#a3947ef6737b193024c0f915e800d821c">integrity_level_symbol</a>;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>  TransitionsAccessor last_transitions(isolate_, *<a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>);</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>  <span class="keywordflow">if</span> (!last_transitions.HasIntegrityLevelTransitionTo(</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>          *old_map_, &amp;<a class="code hl_variable" href="map-updater_8cc.html#a3947ef6737b193024c0f915e800d821c">integrity_level_symbol</a>, &amp;integrity_level_)) {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="comment">// The last transition was not integrity level transition - just bail out.</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="comment">// This can happen in the following cases:</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="comment">// - there are private symbol transitions following the integrity level</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="comment">//   transitions (see crbug.com/v8/8854).</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="comment">// - there is a getter added in addition to an existing setter (or a setter</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="comment">//   in addition to an existing getter).</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>  }</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>  integrity_level_symbol_ = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(<a class="code hl_variable" href="map-updater_8cc.html#a3947ef6737b193024c0f915e800d821c">integrity_level_symbol</a>, isolate_);</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>  integrity_source_map_ = <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <span class="comment">// Now walk up the back pointer chain and skip all integrity level</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>  <span class="comment">// transitions. If we encounter any non-integrity level transition interleaved</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>  <span class="comment">// with integrity level transitions, just bail out.</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>  <span class="keywordflow">while</span> (!integrity_source_map_-&gt;is_extensible()) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a> = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(integrity_source_map_-&gt;GetBackPointer()),</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>                             isolate_);</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    TransitionsAccessor transitions(isolate_, *<a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>);</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <span class="keywordflow">if</span> (!transitions.HasIntegrityLevelTransitionTo(*integrity_source_map_)) {</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    }</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    integrity_source_map_ = <a class="code hl_variable" href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a>;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>  }</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>  <span class="comment">// Integrity-level transitions never change number of descriptors.</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(old_map_-&gt;NumberOfOwnDescriptors(),</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>           integrity_source_map_-&gt;NumberOfOwnDescriptors());</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span> </div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>  has_integrity_level_transition_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  old_descriptors_ = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>      integrity_source_map_-&gt;instance_descriptors(isolate_), isolate_);</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>}</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>MapUpdater::State MapUpdater::FindRootMap() {</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(kInitialized, state_);</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  <span class="keywordflow">if</span> (new_prototype_.is_null()) {</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    new_prototype_ = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(old_map_-&gt;prototype(), isolate_);</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>  }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>  <span class="comment">// Check the state of the root map.</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>  root_map_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(old_map_-&gt;FindRootMap(isolate_), isolate_);</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> from_kind = root_map_-&gt;elements_kind();</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">ElementsKind</a> to_kind = new_elements_kind_;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <span class="keywordflow">if</span> (root_map_-&gt;is_deprecated()) {</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    state_ = kEnd;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    result_map_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;JSFunction&gt;</a>(root_map_-&gt;GetConstructor())-&gt;initial_map(), isolate_);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    result_map_ = <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#accc0b91a8529a6818aca8a321489a587">Map::AsElementsKind</a>(isolate_, result_map_, to_kind);</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(result_map_-&gt;is_dictionary_map());</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <span class="keywordflow">return</span> state_;</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  }</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span> </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>  <span class="comment">// In this first check allow the root map to have the wrong prototype, as we</span></div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>  <span class="comment">// will deal with prototype transitions later.</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>  <span class="keywordflow">if</span> (!old_map_-&gt;EquivalentToForTransition(</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>          *root_map_, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">ConcurrencyMode::kSynchronous</a>,</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>          <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.move_prototype_transitions_first</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>              ? <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(root_map_-&gt;prototype(), isolate_)</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>              : DirectHandle&lt;HeapObject&gt;())) {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_NotEquivalent&quot;</span>);</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (old_map_-&gt;is_extensible() != root_map_-&gt;is_extensible()) {</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!old_map_-&gt;is_extensible());</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(root_map_-&gt;is_extensible());</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="comment">// We have an integrity level transition in the tree, let us make a note</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="comment">// of that transition to be able to replay it later.</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    <span class="keywordflow">if</span> (!TrySaveIntegrityLevelTransitions()) {</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>      <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_PrivateSymbolsOnNonExtensible&quot;</span>);</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    }</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span> </div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="comment">// We want to build transitions to the original element kind (before</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="comment">// the seal transitions), so change {to_kind} accordingly.</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(to_kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37">DICTIONARY_ELEMENTS</a> ||</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>           to_kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149ca6f1bdf5c8e2bb9db9d77063c18e3be8a">SLOW_STRING_WRAPPER_ELEMENTS</a> ||</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>           <a class="code hl_function" href="namespacev8_1_1internal.html#acdba172e431975689d6370894506ab7f">IsTypedArrayOrRabGsabTypedArrayElementsKind</a>(to_kind) ||</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>           <a class="code hl_function" href="namespacev8_1_1internal.html#a58d74ec6fc2eed91e8c81de91a4ee115">IsAnyNonextensibleElementsKind</a>(to_kind));</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    to_kind = integrity_source_map_-&gt;elements_kind();</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>  }</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span> </div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>  <span class="comment">// TODO(ishell): Add a test for SLOW_SLOPPY_ARGUMENTS_ELEMENTS.</span></div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>  <span class="keywordflow">if</span> (from_kind != to_kind &amp;&amp; to_kind != <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37">DICTIONARY_ELEMENTS</a> &amp;&amp;</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>      to_kind != <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149ca6f1bdf5c8e2bb9db9d77063c18e3be8a">SLOW_STRING_WRAPPER_ELEMENTS</a> &amp;&amp;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>      to_kind != <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cac053733fa7d92aff0fcce191adc35295">SLOW_SLOPPY_ARGUMENTS_ELEMENTS</a> &amp;&amp;</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>      !(<a class="code hl_function" href="namespacev8_1_1internal.html#adebc0402796327b823dd66cd2aad4c47">IsTransitionableFastElementsKind</a>(from_kind) &amp;&amp;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#a3385b29114f02665568e3b85945e9d10">IsMoreGeneralElementsKindTransition</a>(from_kind, to_kind))) {</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_InvalidElementsTransition&quot;</span>);</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>  }</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span> </div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>  <span class="keywordtype">int</span> root_nof = root_map_-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>  <span class="keywordflow">if</span> (modified_descriptor_.<a class="code hl_function" href="classv8_1_1internal_1_1InternalIndex.html#ad381db083f3f9b72f16908eac7027823">is_found</a>() &amp;&amp;</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>      modified_descriptor_.<a class="code hl_function" href="classv8_1_1internal_1_1InternalIndex.html#a8d405aded63c405c86fd03e1ff104408">as_int</a>() &lt; root_nof) {</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    PropertyDetails old_details =</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        old_descriptors_-&gt;GetDetails(modified_descriptor_);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <span class="keywordflow">if</span> (old_details.kind() != new_kind_ ||</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        old_details.attributes() != new_attributes_) {</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>      <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_RootModification1&quot;</span>);</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    }</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <span class="keywordflow">if</span> (old_details.location() != <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>      <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_RootModification2&quot;</span>);</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    }</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <span class="keywordflow">if</span> (!new_representation_.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a358b22922554e7c1c08eb68e74c8d904">fits_into</a>(old_details.representation())) {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>      <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_RootModification4&quot;</span>);</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    }</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>, old_details.kind());</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>, new_kind_);</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>, new_location_);</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span> </div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <span class="comment">// Modify root map in-place. The GeneralizeField method is a no-op</span></div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <span class="comment">// if the {old_map_} is already general enough to hold the requested</span></div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <span class="comment">// {new_constness_} and {new_field_type_}.</span></div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">GeneralizeField</a>(old_map_, modified_descriptor_, new_constness_,</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>                    old_details.representation(), new_field_type_);</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>  }</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span> </div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>  <span class="comment">// From here on, use the map with correct elements kind and prototype as root</span></div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>  <span class="comment">// map.</span></div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>  <span class="keywordflow">if</span> (root_map_-&gt;prototype() != *new_prototype_) {</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.move_prototype_transitions_first);</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    Handle&lt;Map&gt; new_root_map_ =</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#a175f7137e25fad0dd95d2bbf763db827">Map::TransitionToUpdatePrototype</a>(isolate_, root_map_, new_prototype_);</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span> </div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    root_map_ = new_root_map_;</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span> </div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">if</span> (!old_map_-&gt;EquivalentToForTransition(</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>            *root_map_, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">ConcurrencyMode::kSynchronous</a>, new_prototype_)) {</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>      <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_NotEquivalent&quot;</span>);</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    }</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>  }</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>  root_map_ = <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#accc0b91a8529a6818aca8a321489a587">Map::AsElementsKind</a>(isolate_, root_map_, to_kind);</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(old_map_-&gt;EquivalentToForTransition(</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>      *root_map_, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">ConcurrencyMode::kSynchronous</a>, new_prototype_));</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span> </div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>  state_ = kAtRootMap;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>  <span class="keywordflow">return</span> state_;  <span class="comment">// Not done yet.</span></div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>}</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span> </div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>MapUpdater::State MapUpdater::FindTargetMap() {</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(kAtRootMap, state_);</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>  target_map_ = root_map_;</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span> </div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>  <span class="keywordtype">int</span> root_nof = root_map_-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>  <span class="keywordflow">for</span> (InternalIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : InternalIndex::Range(root_nof, old_nof_)) {</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    PropertyDetails old_details = GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    Handle&lt;Map&gt; tmp_map;</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    MaybeHandle&lt;Map&gt; maybe_tmp_map = <a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#a34d5580f0039113ee34e43ca052b5262">TransitionsAccessor::SearchTransition</a>(</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>        isolate_, target_map_, GetKey(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), old_details.kind(),</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        old_details.attributes());</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    <span class="keywordflow">if</span> (!maybe_tmp_map.ToHandle(&amp;tmp_map)) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    DirectHandle&lt;DescriptorArray&gt; tmp_descriptors(</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        tmp_map-&gt;instance_descriptors(isolate_), isolate_);</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="comment">// Check if target map is incompatible.</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    PropertyDetails tmp_details = tmp_descriptors-&gt;GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_details.kind(), tmp_details.kind());</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_details.attributes(), tmp_details.attributes());</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    <span class="keywordflow">if</span> (old_details.kind() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81ade3eeabe61d50a3f84870ae3ca43f0ec">PropertyKind::kAccessor</a> &amp;&amp;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>        !EqualImmutableValues(GetValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>                              tmp_descriptors-&gt;GetStrongValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>))) {</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>      <span class="comment">// TODO(ishell): mutable accessors are not implemented yet.</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>      <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_Incompatible&quot;</span>);</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    }</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#abc98ef0ed4a2baf08e5c6e3e8146d1fa">IsGeneralizableTo</a>(old_details.location(), tmp_details.location())) {</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    }</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    Representation tmp_representation = tmp_details.representation();</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="keywordflow">if</span> (!old_details.representation().fits_into(tmp_representation)) {</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>      <span class="comment">// Try updating the field in-place to a generalized type.</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>      Representation generalized =</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>          tmp_representation.generalize(old_details.representation());</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>      <span class="keywordflow">if</span> (!tmp_representation.CanBeInPlaceChangedTo(generalized)) {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>      }</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>      tmp_representation = generalized;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    }</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span> </div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <span class="keywordflow">if</span> (tmp_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>      Handle&lt;FieldType&gt; old_field_type =</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>          GetOrComputeFieldType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, old_details.location(), tmp_representation);</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">GeneralizeField</a>(tmp_map, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, old_details.constness(), tmp_representation,</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                      old_field_type);</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>      <span class="comment">// kDescriptor: Check that the value matches.</span></div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>      <span class="keywordflow">if</span> (!EqualImmutableValues(GetValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>                                tmp_descriptors-&gt;GetStrongValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>))) {</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>      }</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    }</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!tmp_map-&gt;is_deprecated());</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    target_map_ = tmp_map;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>  }</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span> </div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>  <span class="comment">// Directly change the map if the target map is more general.</span></div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>  <span class="keywordtype">int</span> target_nof = target_map_-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>  <span class="keywordflow">if</span> (target_nof == old_nof_) {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    <span class="keywordflow">if</span> (modified_descriptor_.<a class="code hl_function" href="classv8_1_1internal_1_1InternalIndex.html#ad381db083f3f9b72f16908eac7027823">is_found</a>()) {</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a> target_descriptors =</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>          target_map_-&gt;instance_descriptors(isolate_);</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>      PropertyDetails details =</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>          target_descriptors-&gt;GetDetails(modified_descriptor_);</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(new_kind_, details.kind());</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(GetDetails(modified_descriptor_).attributes(),</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a21bd1ca61406d144db4b384a71cdcc96">attributes</a>());</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#abc98ef0ed4a2baf08e5c6e3e8146d1fa">IsGeneralizableTo</a>(new_constness_, details.constness()));</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(new_location_, details.location());</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(new_representation_.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a358b22922554e7c1c08eb68e74c8d904">fits_into</a>(details.representation()));</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>      <span class="keywordflow">if</span> (new_location_ == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>, details.location());</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">FieldType::NowIs</a>(</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            *new_field_type_,</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>            target_descriptors-&gt;GetFieldType(modified_descriptor_)));</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a> ||</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>               EqualImmutableValues({}, target_descriptors-&gt;GetStrongValue(</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>                                            modified_descriptor_)));</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>      }</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    }</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    <span class="keywordflow">if</span> (*target_map_ != *old_map_) {</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>      old_map_-&gt;NotifyLeafMapLayoutChange(isolate_);</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    }</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <span class="keywordflow">if</span> (!has_integrity_level_transition_) {</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>      result_map_ = target_map_;</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>      state_ = kEnd;</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>      <span class="keywordflow">return</span> state_;  <span class="comment">// Done.</span></div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>    }</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    <span class="comment">// We try to replay the integrity level transition here.</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    MaybeHandle&lt;Map&gt; maybe_transition = <a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#abbb20363330eadc596056c40de5e04cc">TransitionsAccessor::SearchSpecial</a>(</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>        isolate_, target_map_, *integrity_level_symbol_);</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    <span class="keywordflow">if</span> (maybe_transition.ToHandle(&amp;result_map_)) {</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>      state_ = kEnd;</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>      <span class="keywordflow">return</span> state_;  <span class="comment">// Done.</span></div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>    }</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>  }</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span> </div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>  <span class="comment">// Find the last compatible target map in the transition tree.</span></div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>  <span class="keywordflow">for</span> (InternalIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : InternalIndex::Range(target_nof, old_nof_)) {</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    PropertyDetails old_details = GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    Handle&lt;Map&gt; tmp_map;</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    MaybeHandle&lt;Map&gt; maybe_tmp_map = <a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#a34d5580f0039113ee34e43ca052b5262">TransitionsAccessor::SearchTransition</a>(</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        isolate_, target_map_, GetKey(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), old_details.kind(),</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        old_details.attributes());</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    <span class="keywordflow">if</span> (!maybe_tmp_map.ToHandle(&amp;tmp_map)) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    DirectHandle&lt;DescriptorArray&gt; tmp_descriptors(</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        tmp_map-&gt;instance_descriptors(isolate_), isolate_);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    <span class="comment">// Check that target map is compatible.</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>    PropertyDetails tmp_details = tmp_descriptors-&gt;GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_details.kind(), tmp_details.kind());</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_details.attributes(), tmp_details.attributes());</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    <span class="keywordflow">if</span> (old_details.kind() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81ade3eeabe61d50a3f84870ae3ca43f0ec">PropertyKind::kAccessor</a> &amp;&amp;</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        !EqualImmutableValues(GetValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>                              tmp_descriptors-&gt;GetStrongValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>))) {</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>      <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_Incompatible&quot;</span>);</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    }</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!tmp_map-&gt;is_deprecated());</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    target_map_ = tmp_map;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>  }</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span> </div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>  state_ = kAtTargetMap;</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>  <span class="keywordflow">return</span> state_;  <span class="comment">// Not done yet.</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>}</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span> </div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>Handle&lt;DescriptorArray&gt; MapUpdater::BuildDescriptorArray() {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a9312a9fc987dba9376a530956f94e8fe">InstanceType</a> instance_type = old_map_-&gt;instance_type();</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>  <span class="keywordtype">int</span> target_nof = target_map_-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>  DirectHandle&lt;DescriptorArray&gt; target_descriptors(</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>      target_map_-&gt;instance_descriptors(isolate_), isolate_);</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>  <span class="comment">// Allocate a new descriptor array large enough to hold the required</span></div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>  <span class="comment">// descriptors, with minimally the exact same size as the old descriptor</span></div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>  <span class="comment">// array.</span></div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>  <span class="keywordtype">int</span> new_slack =</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>      std::max&lt;int&gt;(old_nof_, old_descriptors_-&gt;number_of_descriptors()) -</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>      old_nof_;</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>  Handle&lt;DescriptorArray&gt; new_descriptors =</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>      <a class="code hl_function" href="classv8_1_1internal_1_1DescriptorArray.html#a75a0266e4c2259b8eb02dc422089bf71">DescriptorArray::Allocate</a>(isolate_, old_nof_, new_slack);</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(new_descriptors-&gt;number_of_all_descriptors() &gt;</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>             target_descriptors-&gt;number_of_all_descriptors() ||</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>         new_descriptors-&gt;number_of_slack_descriptors() &gt; 0 ||</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>         new_descriptors-&gt;number_of_descriptors() ==</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>             old_descriptors_-&gt;number_of_descriptors());</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(new_descriptors-&gt;number_of_descriptors() == old_nof_);</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span> </div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>  <span class="keywordtype">int</span> root_nof = root_map_-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span> </div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>  <span class="comment">// Given that we passed root modification check in FindRootMap() so</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>  <span class="comment">// the root descriptors are either not modified at all or already more</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>  <span class="comment">// general than we requested. Take |root_nof| entries as is.</span></div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>  <span class="comment">// 0 -&gt; |root_nof|</span></div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>  <span class="keywordtype">int</span> current_offset = 0;</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>  <span class="keywordflow">for</span> (InternalIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : InternalIndex::Range(root_nof)) {</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    PropertyDetails old_details = old_descriptors_-&gt;GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <span class="keywordflow">if</span> (old_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>      current_offset += old_details.field_width_in_words();</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    }</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    <span class="comment">// Ensuring FindRootMap gave us a compatible root map.</span></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    <span class="comment">// TODO(olivf): In some cases it might be nice to be able to generalize the</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="comment">// root map (for instance if the prototype transitions overflowed). For that</span></div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <span class="comment">// we&#39;d need to generalize old_details with the root_details here.</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    PropertyDetails root_details =</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>        root_map_-&gt;instance_descriptors()-&gt;GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>        old_details.representation().generalize(root_details.representation()),</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>        root_details.representation());</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    <span class="keywordflow">if</span> (!root_map_-&gt;IsDetached(isolate_)) {</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(old_details.representation().IsCompatibleForLoad(</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>          root_details.representation()));</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    }</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(old_details.constness(), root_details.constness());</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_details.attributes(), root_details.attributes());</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>    new_descriptors-&gt;Set(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, GetKey(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), old_descriptors_-&gt;GetValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>                         old_details);</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>  }</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>  <span class="comment">// Merge &quot;updated&quot; old_descriptor entries with target_descriptor entries.</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>  <span class="comment">// |root_nof| -&gt; |target_nof|</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>  <span class="keywordflow">for</span> (InternalIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : InternalIndex::Range(root_nof, target_nof)) {</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    DirectHandle&lt;Name&gt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>(GetKey(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), isolate_);</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    PropertyDetails old_details = GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    PropertyDetails target_details = target_descriptors-&gt;GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span> </div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81">PropertyKind</a> next_kind = old_details.kind();</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">PropertyAttributes</a> next_attributes = old_details.attributes();</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(next_kind, target_details.kind());</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(next_attributes, target_details.attributes());</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span> </div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> next_constness = <a class="code hl_function" href="namespacev8_1_1internal.html#a617d346a46eb703e1719792077e5c2a0">GeneralizeConstness</a>(</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>        old_details.constness(), target_details.constness());</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span> </div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    <span class="comment">// Note: failed values equality check does not invalidate per-object</span></div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>    <span class="comment">// property constness.</span></div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4">PropertyLocation</a> next_location =</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>        old_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a> ||</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>                target_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a> ||</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>                !EqualImmutableValues(target_descriptors-&gt;GetStrongValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>                                      GetValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>))</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>            ? <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>            : <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295">PropertyLocation::kDescriptor</a>;</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="comment">// Ensure that mutable values are stored in fields.</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(next_constness == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49aca32567d9e5f2d66c9b326c45e800abcf6">PropertyConstness::kMutable</a>,</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                   next_location == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>);</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span> </div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>    Representation next_representation =</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        old_details.representation().generalize(</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            target_details.representation());</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span> </div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>    <span class="keywordflow">if</span> (next_location == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>      Handle&lt;FieldType&gt; old_field_type =</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>          GetOrComputeFieldType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, old_details.location(), next_representation);</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span> </div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>      Handle&lt;FieldType&gt; target_field_type =</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>          GetOrComputeFieldType(target_descriptors, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>,</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                                target_details.location(), next_representation);</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span> </div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>      Handle&lt;FieldType&gt; next_field_type =</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>          GeneralizeFieldType(old_details.representation(), old_field_type,</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>                              next_representation, target_field_type, isolate_);</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span> </div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>      <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#a04acac5a33f9e8cd1e3afc1d993b5f2e">Map::GeneralizeIfCanHaveTransitionableFastElementsKind</a>(</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>          isolate_, instance_type, &amp;next_representation, &amp;next_field_type);</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span> </div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>      MaybeObjectHandle wrapped_type(<a class="code hl_function" href="classv8_1_1internal_1_1Map.html#ac746c567b7dc6d03f258fa08c61de530">Map::WrapFieldType</a>(next_field_type));</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>      Descriptor d;</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>      <span class="keywordflow">if</span> (next_kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>) {</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        d = <a class="code hl_function" href="classv8_1_1internal_1_1Descriptor.html#a2782160995ef5a9c515d8cee9a6b2d85">Descriptor::DataField</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, current_offset, next_attributes,</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>                                  next_constness, next_representation,</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>                                  wrapped_type);</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>        <span class="comment">// TODO(ishell): mutable accessors are not implemented yet.</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#a538499d2a66bf6e9d3182a57104edec9">UNIMPLEMENTED</a>();</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>      }</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>      current_offset += d.GetDetails().field_width_in_words();</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>      new_descriptors-&gt;Set(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, &amp;d);</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295">PropertyLocation::kDescriptor</a>, next_location);</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49acad1efdc0f2aa096a47586b448aa73f414">PropertyConstness::kConst</a>, next_constness);</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span> </div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>      DirectHandle&lt;Object&gt; <a class="code hl_variable" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>(GetValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), isolate_);</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81ade3eeabe61d50a3f84870ae3ca43f0ec">PropertyKind::kAccessor</a>, next_kind);</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>      Descriptor d = <a class="code hl_function" href="classv8_1_1internal_1_1Descriptor.html#a825c239b05b4814615a852ea28b406ec">Descriptor::AccessorConstant</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, value, next_attributes);</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>      new_descriptors-&gt;Set(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, &amp;d);</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>  }</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span> </div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>  <span class="comment">// Take &quot;updated&quot; old_descriptor entries.</span></div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>  <span class="comment">// |target_nof| -&gt; |old_nof|</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>  <span class="keywordflow">for</span> (InternalIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : InternalIndex::Range(target_nof, old_nof_)) {</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>    PropertyDetails old_details = GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    DirectHandle&lt;Name&gt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>(GetKey(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), isolate_);</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span> </div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81">PropertyKind</a> next_kind = old_details.kind();</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">PropertyAttributes</a> next_attributes = old_details.attributes();</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> next_constness = old_details.constness();</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4">PropertyLocation</a> next_location = old_details.location();</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    Representation next_representation = old_details.representation();</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span> </div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    <span class="keywordflow">if</span> (next_location == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>      Handle&lt;FieldType&gt; next_field_type =</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>          GetOrComputeFieldType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, old_details.location(), next_representation);</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span> </div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>      <span class="comment">// If the |new_elements_kind_| is still transitionable then the old map&#39;s</span></div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>      <span class="comment">// elements kind is also transitionable and therefore the old descriptors</span></div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>      <span class="comment">// array must already have generalized field type.</span></div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>      <a class="code hl_define" href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>          is_transitionable_fast_elements_kind_,</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>          <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#a7418a18a11d96f6d6550c4e8e453790a">Map::IsMostGeneralFieldType</a>(next_representation, *next_field_type));</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span> </div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>      MaybeObjectHandle wrapped_type(<a class="code hl_function" href="classv8_1_1internal_1_1Map.html#ac746c567b7dc6d03f258fa08c61de530">Map::WrapFieldType</a>(next_field_type));</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>      Descriptor d;</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>      <span class="keywordflow">if</span> (next_kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>) {</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>        d = <a class="code hl_function" href="classv8_1_1internal_1_1Descriptor.html#a2782160995ef5a9c515d8cee9a6b2d85">Descriptor::DataField</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, current_offset, next_attributes,</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>                                  next_constness, next_representation,</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                                  wrapped_type);</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>        <span class="comment">// TODO(ishell): mutable accessors are not implemented yet.</span></div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#a538499d2a66bf6e9d3182a57104edec9">UNIMPLEMENTED</a>();</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>      }</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>      current_offset += d.GetDetails().field_width_in_words();</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>      new_descriptors-&gt;Set(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, &amp;d);</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295">PropertyLocation::kDescriptor</a>, next_location);</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49acad1efdc0f2aa096a47586b448aa73f414">PropertyConstness::kConst</a>, next_constness);</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span> </div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>      DirectHandle&lt;Object&gt; <a class="code hl_variable" href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">value</a>(GetValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), isolate_);</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>      Descriptor d;</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>      <span class="keywordflow">if</span> (next_kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>) {</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        d = <a class="code hl_function" href="classv8_1_1internal_1_1Descriptor.html#a99e8701798dba98e56a94b2e66d053c0">Descriptor::DataConstant</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, value, next_attributes);</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81ade3eeabe61d50a3f84870ae3ca43f0ec">PropertyKind::kAccessor</a>, next_kind);</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>        d = <a class="code hl_function" href="classv8_1_1internal_1_1Descriptor.html#a825c239b05b4814615a852ea28b406ec">Descriptor::AccessorConstant</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, value, next_attributes);</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>      }</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>      new_descriptors-&gt;Set(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, &amp;d);</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>    }</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>  }</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span> </div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>  new_descriptors-&gt;Sort();</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>  <span class="keywordflow">return</span> new_descriptors;</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>}</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span> </div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>Handle&lt;Map&gt; MapUpdater::FindSplitMap(</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>    DirectHandle&lt;DescriptorArray&gt; descriptors) {</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>  <span class="keywordtype">int</span> root_nof = root_map_-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> current = *root_map_;</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>  <span class="keywordflow">for</span> (InternalIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : InternalIndex::Range(root_nof, old_nof_)) {</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Name&gt;</a> name = descriptors-&gt;GetKey(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    PropertyDetails details = descriptors-&gt;GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> next =</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        TransitionsAccessor(isolate_, current)</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            .SearchTransition(name, details.kind(), details.attributes());</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    <span class="keywordflow">if</span> (next.is_null()) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a> next_descriptors =</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>        next-&gt;instance_descriptors(isolate_);</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    PropertyDetails next_details = next_descriptors-&gt;GetDetails(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(details.kind(), next_details.kind());</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(details.attributes(), next_details.attributes());</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>    <span class="keywordflow">if</span> (details.constness() != next_details.constness()) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    <span class="keywordflow">if</span> (details.location() != next_details.location()) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    <span class="keywordflow">if</span> (!details.representation().Equals(next_details.representation())) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span> </div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    <span class="keywordflow">if</span> (next_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;FieldType&gt;</a> next_field_type = next_descriptors-&gt;GetFieldType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">FieldType::NowIs</a>(descriptors-&gt;GetFieldType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), next_field_type)) {</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>      }</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>      <span class="keywordflow">if</span> (!EqualImmutableValues(descriptors-&gt;GetStrongValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                                next_descriptors-&gt;GetStrongValue(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>))) {</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>      }</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    }</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    current = next;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>  }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(current, isolate_);</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>}</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span> </div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>MapUpdater::State MapUpdater::ConstructNewMap() {</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>  DirectHandle&lt;EnumCache&gt; old_enum_cache(</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>      old_map_-&gt;instance_descriptors()-&gt;enum_cache(), isolate_);</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>  DirectHandle&lt;DescriptorArray&gt; new_descriptors = BuildDescriptorArray();</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span> </div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>  DirectHandle&lt;Map&gt; split_map = FindSplitMap(new_descriptors);</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>  <span class="keywordtype">int</span> split_nof = split_map-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>  <span class="keywordflow">if</span> (old_nof_ == split_nof) {</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(has_integrity_level_transition_);</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>    state_ = kAtIntegrityLevelSource;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    <span class="keywordflow">return</span> state_;</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>  }</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>  InternalIndex split_index(split_nof);</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>  PropertyDetails split_details = GetDetails(split_index);</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span> </div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>  <span class="comment">// Invalidate a transition target at |key|.</span></div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>  MaybeDirectHandle&lt;Map&gt; maybe_transition =</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>      <a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#a34d5580f0039113ee34e43ca052b5262">TransitionsAccessor::SearchTransition</a>(</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>          isolate_, split_map, GetKey(split_index), split_details.kind(),</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>          split_details.attributes());</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>  <span class="keywordflow">if</span> (!maybe_transition.is_null()) {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>    maybe_transition.ToHandleChecked()-&gt;DeprecateTransitionTree(isolate_);</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>  }</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span> </div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>  <span class="comment">// If |maybe_transition| is not nullptr then the transition array already</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>  <span class="comment">// contains entry for given descriptor. This means that the transition</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>  <span class="comment">// could be inserted regardless of whether transitions array is full or not.</span></div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>  <span class="keywordflow">if</span> (maybe_transition.is_null() &amp;&amp;</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>      !<a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#a1dc4182835dccc64db93443a047531d2">TransitionsAccessor::CanHaveMoreTransitions</a>(isolate_, split_map)) {</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_CantHaveMoreTransitions&quot;</span>);</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>  }</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span> </div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>  old_map_-&gt;NotifyLeafMapLayoutChange(isolate_);</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span> </div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_generalization &amp;&amp; modified_descriptor_.<a class="code hl_function" href="classv8_1_1internal_1_1InternalIndex.html#ad381db083f3f9b72f16908eac7027823">is_found</a>()) {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    PropertyDetails old_details =</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        old_descriptors_-&gt;GetDetails(modified_descriptor_);</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    PropertyDetails new_details =</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        new_descriptors-&gt;GetDetails(modified_descriptor_);</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    MaybeDirectHandle&lt;FieldType&gt; old_field_type;</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>    MaybeDirectHandle&lt;FieldType&gt; new_field_type;</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>    MaybeDirectHandle&lt;Object&gt; old_value;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>    MaybeDirectHandle&lt;Object&gt; new_value;</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    <span class="keywordflow">if</span> (old_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>      old_field_type = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>          old_descriptors_-&gt;GetFieldType(modified_descriptor_), isolate_);</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>      old_value = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>          old_descriptors_-&gt;GetStrongValue(modified_descriptor_), isolate_);</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    }</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>    <span class="keywordflow">if</span> (new_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) {</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>      new_field_type = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>          new_descriptors-&gt;GetFieldType(modified_descriptor_), isolate_);</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>      new_value = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>          new_descriptors-&gt;GetStrongValue(modified_descriptor_), isolate_);</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    }</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span> </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    PrintGeneralization(</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>        isolate_, old_map_, stdout, <span class="stringliteral">&quot;&quot;</span>, modified_descriptor_, split_nof,</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        old_nof_,</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>        old_details.location() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295">PropertyLocation::kDescriptor</a> &amp;&amp;</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>            new_location_ == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>,</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>        old_details.representation(), new_details.representation(),</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>        old_details.constness(), new_details.constness(), old_field_type,</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>        old_value, new_field_type, new_value);</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>  }</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span> </div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>  Handle&lt;Map&gt; new_map =</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>      Map::AddMissingTransitions(isolate_, split_map, new_descriptors);</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span> </div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>  <span class="keywordtype">bool</span> had_any_enum_cache =</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>      split_map-&gt;instance_descriptors(isolate_)</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>              -&gt;enum_cache()</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>              -&gt;keys()</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>              -&gt;length() &gt; 0 ||</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>      old_descriptors_-&gt;enum_cache()-&gt;keys()-&gt;length() &gt; 0;</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span> </div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>  <span class="comment">// Deprecated part of the transition tree is no longer reachable, so replace</span></div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>  <span class="comment">// current instance descriptors in the &quot;survived&quot; part of the tree with</span></div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>  <span class="comment">// the new descriptors to maintain descriptors sharing invariant.</span></div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>  split_map-&gt;ReplaceDescriptors(isolate_, *new_descriptors);</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span> </div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>  <span class="comment">// If the old descriptors had an enum cache (or if {split_map}&#39;s descriptors</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>  <span class="comment">// had one), make sure the new ones do too.</span></div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>  <span class="keywordflow">if</span> (had_any_enum_cache &amp;&amp; new_map-&gt;NumberOfEnumerableProperties() &gt; 0) {</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    <a class="code hl_function" href="classv8_1_1internal_1_1FastKeyAccumulator.html#a1f64b2d6135f5ff3b104c7cac6f5fc42">FastKeyAccumulator::InitializeFastPropertyEnumCache</a>(</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>        isolate_, new_map, new_map-&gt;NumberOfEnumerableProperties());</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>  }</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span> </div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>  <span class="comment">// The old map has to still point to the old enum cache. This is because we</span></div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>  <span class="comment">// might have cached the enum indices, for iterating over objects with the old</span></div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>  <span class="comment">// map -- we don&#39;t want this enum cache to move ownership to the new branch,</span></div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>  <span class="comment">// because then it might get trimmed past the old map&#39;s field count.</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(old_map_-&gt;instance_descriptors()-&gt;enum_cache(), *old_enum_cache);</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span> </div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>  <span class="keywordflow">if</span> (has_integrity_level_transition_) {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>    target_map_ = new_map;</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    state_ = kAtIntegrityLevelSource;</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>    result_map_ = new_map;</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    state_ = kEnd;</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>  }</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>  <span class="keywordflow">return</span> state_;  <span class="comment">// Done.</span></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>}</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span> </div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>MapUpdater::State MapUpdater::ConstructNewMapWithIntegrityLevelTransition() {</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(kAtIntegrityLevelSource, state_);</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span> </div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1TransitionsAccessor.html#a1dc4182835dccc64db93443a047531d2">TransitionsAccessor::CanHaveMoreTransitions</a>(isolate_, target_map_)) {</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    <span class="keywordflow">return</span> Normalize(<span class="stringliteral">&quot;Normalize_CantHaveMoreTransitions&quot;</span>);</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>  }</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span> </div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>  result_map_ = <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#abb937261c0cadd5dbd4e9775b410fb99">Map::CopyForPreventExtensions</a>(</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>      isolate_, target_map_, integrity_level_, integrity_level_symbol_,</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>      <span class="stringliteral">&quot;CopyForPreventExtensions&quot;</span>,</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>      old_map_-&gt;elements_kind() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37">DICTIONARY_ELEMENTS</a>);</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(old_map_-&gt;elements_kind() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37">DICTIONARY_ELEMENTS</a>,</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>                 result_map_-&gt;elements_kind() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37">DICTIONARY_ELEMENTS</a>);</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span> </div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>  state_ = kEnd;</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>  <span class="keywordflow">return</span> state_;</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>}</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span> </div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span> </div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span><span class="keywordtype">void</span> PrintReconfiguration(Isolate* isolate, DirectHandle&lt;Map&gt; map, FILE* file,</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>                          InternalIndex modify_index, <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81">PropertyKind</a> kind,</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                          <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">PropertyAttributes</a> attributes) {</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>  OFStream os(file);</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>  os &lt;&lt; <span class="stringliteral">&quot;[reconfiguring]&quot;</span>;</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Name&gt;</a> name = map-&gt;instance_descriptors(isolate)-&gt;GetKey(modify_index);</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>  <span class="keywordflow">if</span> (IsString(name)) {</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;String&gt;</a>(name)-&gt;PrintOn(file);</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>    os &lt;&lt; <span class="stringliteral">&quot;{symbol &quot;</span> &lt;&lt; <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(name.ptr()) &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>  }</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>  os &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; (kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a> ? <span class="stringliteral">&quot;kData&quot;</span> : <span class="stringliteral">&quot;ACCESSORS&quot;</span>)</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>     &lt;&lt; <span class="stringliteral">&quot;, attrs: &quot;</span>;</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>  os &lt;&lt; attributes &lt;&lt; <span class="stringliteral">&quot; [&quot;</span>;</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>  <a class="code hl_function" href="classv8_1_1internal_1_1JavaScriptFrame.html#a69de8494527b217bfd2bcde82196cd31">JavaScriptFrame::PrintTop</a>(isolate, file, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>  os &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>}</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span> </div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span> </div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen01190" data-start="{" data-end="}">
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#a7bfd89e950ab3ffaf81bb06c31012d68"> 1190</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#a7bfd89e950ab3ffaf81bb06c31012d68">MapUpdater::ReconfigureExistingProperty</a>(</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Map&gt;</a> map, <a class="code hl_class" href="classv8_1_1internal_1_1InternalIndex.html">InternalIndex</a> descriptor,</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81">PropertyKind</a> kind, <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">PropertyAttributes</a> attributes,</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> constness) {</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>  <span class="comment">// Dictionaries have to be reconfigured in-place.</span></div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!map-&gt;is_dictionary_map());</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>, kind);  <span class="comment">// Only kData case is supported so far.</span></div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span> </div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>  <span class="keywordflow">if</span> (!IsMap(map-&gt;GetBackPointer())) {</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <span class="comment">// There is no benefit from reconstructing transition tree for maps without</span></div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    <span class="comment">// back pointers, normalize and try to hit the map cache instead.</span></div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1Map.html#aae668ae5d352e15e940cdfdbaa6007b1">Map::Normalize</a>(isolate, map, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aff269dc9be2370cdca244d8f1f97237aac5a8bff008f8e182215fa48828c8cdb5">CLEAR_INOBJECT_PROPERTIES</a>,</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>                          <span class="stringliteral">&quot;Normalize_AttributesMismatchProtoMap&quot;</span>);</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>  }</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span> </div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_generalization) {</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>    PrintReconfiguration(isolate, map, stdout, descriptor, kind, attributes);</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>  }</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span> </div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="classv8_1_1internal_1_1MapUpdater.html">MapUpdater</a>{<a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>, map}.<a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#a2e9a04b72d0f858b38ef762eb3b6d07e">ReconfigureToDataField</a>(</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>      descriptor, attributes, constness, <a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#ace382f041e3e5c2b98fefd107be9927d">Representation::None</a>(),</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>      <a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#a850ca02db2d0bd0b2279e392a7b7a606">FieldType::None</a>(isolate));</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>}</div>
</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span> </div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span><span class="comment">// static</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span><span class="keywordtype">void</span> MapUpdater::UpdateFieldType(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map,</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1InternalIndex.html">InternalIndex</a> descriptor,</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Name&gt;</a> name,</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>                                 <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> new_constness,</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Representation.html">Representation</a> new_representation,</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;FieldType&gt;</a> new_type) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>  <span class="comment">// We store raw pointers in the queue, so no allocations are allowed.</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> no_gc;</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PropertyDetails.html">PropertyDetails</a> details =</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>      map-&gt;instance_descriptors(isolate)-&gt;GetDetails(descriptor);</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  <span class="keywordflow">if</span> (details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a2d8f536f39a3ab2754cdd721de544ae4">location</a>() != <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">PropertyLocation::kField</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">PropertyKind::kData</a>, details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a84ec5d54214083de458bfc43b8c3ac1b">kind</a>());</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span> </div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>  <span class="keywordflow">if</span> (new_constness != details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">constness</a>() &amp;&amp; map-&gt;is_prototype_map()) {</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    <a class="code hl_function" href="classv8_1_1internal_1_1JSObject.html#a6778b7efad46d382d16a9ead08dbfa66">JSObject::InvalidatePrototypeChains</a>(*map);</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>  }</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>  std::queue&lt;Tagged&lt;Map&gt;&gt; backlog;</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>  backlog.push(*map);</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  std::vector&lt;Tagged&lt;Map&gt;&gt; sidestep_transition;</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span> </div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>  ReadOnlyRoots roots(isolate);</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>  <span class="keywordflow">while</span> (!backlog.empty()) {</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> current = backlog.front();</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    backlog.pop();</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span> </div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    TransitionsAccessor transitions(isolate, current);</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>    transitions.ForEachTransition(</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>        &amp;no_gc, [&amp;](<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> target) { backlog.push(target); },</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>        [&amp;](<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> <a class="code hl_variable" href="js-call-reducer_8cc.html#a160b46cc89e1d0807731be8c2d2257c0">target</a>) {</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.move_prototype_transitions_first) {</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>            backlog.push(target);</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>          }</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>        },</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>        [&amp;](<a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> <a class="code hl_variable" href="js-call-reducer_8cc.html#a160b46cc89e1d0807731be8c2d2257c0">target</a>) {</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>          <span class="keywordflow">if</span> (!target.IsSmi() &amp;&amp; !<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(target)-&gt;is_deprecated()) {</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>            sidestep_transition.push_back(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(target));</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>          }</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>        });</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span> </div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a> descriptors =</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>        current-&gt;instance_descriptors(isolate);</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    details = descriptors-&gt;GetDetails(descriptor);</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span> </div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <span class="comment">// It is allowed to change representation here only from None</span></div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    <span class="comment">// to something or from Smi or HeapObject to Tagged.</span></div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>().<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#aa84e9e08d7aa134ade62588b6353aaeb">Equals</a>(new_representation) ||</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>          details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>().<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#afc2857d68d808055d558efa69b9a7838">CanBeInPlaceChangedTo</a>(new_representation));</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span> </div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>    <span class="comment">// Skip if we already updated the shared descriptor or the target was more</span></div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    <span class="comment">// general in the first place.</span></div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <span class="keywordflow">if</span> (new_constness == details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">constness</a>() &amp;&amp;</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        new_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#aa84e9e08d7aa134ade62588b6353aaeb">Equals</a>(details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>()) &amp;&amp;</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        <a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#a6652f43f8b4e3c217124374a2f4b1172">FieldType::Equals</a>(descriptors-&gt;GetFieldType(descriptor), *new_type)) {</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    }</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span> </div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#a82b24872512218708764e7261b3e2a66">IsClass</a>(*new_type), new_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a0febd6151e727b2840b7444dd5e7c632">IsHeapObject</a>());</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    MaybeObjectHandle wrapped_type(<a class="code hl_function" href="classv8_1_1internal_1_1Map.html#ac746c567b7dc6d03f258fa08c61de530">Map::WrapFieldType</a>(new_type));</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>    Descriptor d = <a class="code hl_function" href="classv8_1_1internal_1_1Descriptor.html#a2782160995ef5a9c515d8cee9a6b2d85">Descriptor::DataField</a>(</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>        name, descriptors-&gt;GetFieldIndex(descriptor), details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a21bd1ca61406d144db4b384a71cdcc96">attributes</a>(),</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>        new_constness, new_representation, wrapped_type);</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(descriptors-&gt;GetKey(descriptor), *d.key_);</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    descriptors-&gt;Replace(descriptor, &amp;d);</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>  }</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span> </div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>  <span class="keywordflow">for</span> (<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> current : sidestep_transition) {</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">Tagged&lt;DescriptorArray&gt;</a> descriptors =</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        current-&gt;instance_descriptors(isolate);</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>    details = descriptors-&gt;GetDetails(descriptor);</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    <span class="comment">// Through side-steps we can reach transition trees which are already more</span></div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    <span class="comment">// generalized. Ensure we don&#39;t re-concretize them.</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> cur_new_constness =</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#a617d346a46eb703e1719792077e5c2a0">GeneralizeConstness</a>(new_constness, details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">constness</a>());</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    Representation cur_new_representation =</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>        new_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a8bdd97567badb1040967d90910c76c54">generalize</a>(details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>());</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    Handle&lt;FieldType&gt; cur_new_type = GeneralizeFieldType(</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>        details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>(),</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(descriptors-&gt;GetFieldType(descriptor), isolate),</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>        cur_new_representation, new_type, isolate);</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(new_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a358b22922554e7c1c08eb68e74c8d904">fits_into</a>(cur_new_representation));</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    <span class="comment">// Skip if we already updated the shared descriptor or the target was more</span></div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <span class="comment">// general in the first place.</span></div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    <span class="keywordflow">if</span> (cur_new_constness != details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">constness</a>() ||</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>        !cur_new_representation.Equals(details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>()) ||</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>        !<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#a6652f43f8b4e3c217124374a2f4b1172">FieldType::Equals</a>(descriptors-&gt;GetFieldType(descriptor),</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>                           *cur_new_type)) {</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">GeneralizeField</a>(isolate, <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(current, isolate), descriptor,</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>                      cur_new_constness, cur_new_representation, cur_new_type);</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    }</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>  }</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>}</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span> </div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span><span class="comment">// TODO(jgruber): Lock the map-updater mutex.</span></div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen01310" data-start="{" data-end="}">
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18"> 1310</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">MapUpdater::GeneralizeField</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> map,</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1InternalIndex.html">InternalIndex</a> modify_index,</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>                                 <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> new_constness,</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Representation.html">Representation</a> new_representation,</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;FieldType&gt;</a> new_field_type) {</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!map-&gt;is_deprecated());</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span> </div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>  <span class="comment">// Check if we actually need to generalize the field type at all.</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;DescriptorArray&gt;</a> old_descriptors(</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>      map-&gt;instance_descriptors(isolate), isolate);</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PropertyDetails.html">PropertyDetails</a> old_details = old_descriptors-&gt;GetDetails(modify_index);</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">PropertyConstness</a> old_constness = old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">constness</a>();</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Representation.html">Representation</a> old_representation = old_details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>();</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;FieldType&gt;</a> old_field_type(old_descriptors-&gt;GetFieldType(modify_index),</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>                                   isolate);</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>  <a class="code hl_define" href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#a82b24872512218708764e7261b3e2a66">IsClass</a>(*old_field_type), old_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a0febd6151e727b2840b7444dd5e7c632">IsHeapObject</a>());</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span> </div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>  <span class="comment">// Return if the current map is general enough to hold requested constness and</span></div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>  <span class="comment">// representation/field type.</span></div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal.html#abc98ef0ed4a2baf08e5c6e3e8146d1fa">IsGeneralizableTo</a>(new_constness, old_constness) &amp;&amp;</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>      old_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#aa84e9e08d7aa134ade62588b6353aaeb">Equals</a>(new_representation) &amp;&amp;</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>      <a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">FieldType::NowIs</a>(*new_field_type, old_field_type)) {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">FieldType::NowIs</a>(</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        *GeneralizeFieldType(old_representation, old_field_type,</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>                             new_representation, new_field_type, isolate),</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>        old_field_type));</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>  }</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span> </div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>  <span class="comment">// Determine the field owner.</span></div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Map&gt;</a> field_owner(map-&gt;FindFieldOwner(isolate, modify_index),</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>                                isolate);</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;DescriptorArray&gt;</a> descriptors(</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>      field_owner-&gt;instance_descriptors(isolate), isolate);</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(*old_field_type, descriptors-&gt;GetFieldType(modify_index));</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span> </div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>  new_field_type =</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>      GeneralizeFieldType(old_representation, old_field_type,</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>                          new_representation, new_field_type, isolate);</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span> </div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>  new_constness = <a class="code hl_function" href="namespacev8_1_1internal.html#a617d346a46eb703e1719792077e5c2a0">GeneralizeConstness</a>(old_constness, new_constness);</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span> </div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PropertyDetails.html">PropertyDetails</a> details = descriptors-&gt;GetDetails(modify_index);</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Name&gt;</a> <a class="code hl_variable" href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">name</a>(descriptors-&gt;GetKey(modify_index), isolate);</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span> </div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>  UpdateFieldType(isolate, field_owner, modify_index, name, new_constness,</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>                  new_representation, new_field_type);</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span> </div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#a82b24872512218708764e7261b3e2a66">IsClass</a>(*new_field_type), new_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#a0febd6151e727b2840b7444dd5e7c632">IsHeapObject</a>());</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span> </div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>  <a class="code hl_class" href="classv8_1_1base_1_1Flags.html">DependentCode::DependencyGroups</a> dep_groups;</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>  <span class="keywordflow">if</span> (new_constness != old_constness) {</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>    dep_groups |= <a class="code hl_enumvalue" href="classv8_1_1internal_1_1DependentCode.html#a6ddeb27b4e6f458ce2257036e3f364aea123390ef7fbc57f85380f025aaa7a580">DependentCode::kFieldConstGroup</a>;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>  }</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1FieldType.html#a6652f43f8b4e3c217124374a2f4b1172">FieldType::Equals</a>(*new_field_type, *old_field_type)) {</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    dep_groups |= <a class="code hl_enumvalue" href="classv8_1_1internal_1_1DependentCode.html#a6ddeb27b4e6f458ce2257036e3f364aead5bb3481b1c5b207b9dd295ea5dbbbf4">DependentCode::kFieldTypeGroup</a>;</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>  }</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>  <span class="keywordflow">if</span> (!new_representation.<a class="code hl_function" href="classv8_1_1internal_1_1Representation.html#aa84e9e08d7aa134ade62588b6353aaeb">Equals</a>(old_representation)) {</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>    dep_groups |= <a class="code hl_enumvalue" href="classv8_1_1internal_1_1DependentCode.html#a6ddeb27b4e6f458ce2257036e3f364aea51be1de08d293f014aafd3fc5feb8833">DependentCode::kFieldRepresentationGroup</a>;</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>  }</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span> </div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>  <a class="code hl_function" href="classv8_1_1internal_1_1DependentCode.html#ac8da05d32a7e9c02c7a11456c8b0afd5">DependentCode::DeoptimizeDependencyGroups</a>(isolate, *field_owner, dep_groups);</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span> </div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_generalization) {</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    PrintGeneralization(</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>        isolate, map, stdout, <span class="stringliteral">&quot;field type generalization&quot;</span>, modify_index,</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>        map-&gt;NumberOfOwnDescriptors(), map-&gt;NumberOfOwnDescriptors(), <span class="keyword">false</span>,</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>        details.<a class="code hl_function" href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">representation</a>(),</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>        descriptors-&gt;GetDetails(modify_index).representation(), old_constness,</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>        new_constness, old_field_type, <a class="code hl_class" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;Object&gt;</a>(),</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>        new_field_type, <a class="code hl_class" href="classv8_1_1internal_1_1MaybeDirectHandle.html">MaybeDirectHandle&lt;Object&gt;</a>());</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>  }</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>}</div>
</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span> </div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>}  <span class="comment">// namespace v8::internal</span></div>
<div class="ttc" id="aclassv8_1_1base_1_1Flags_html"><div class="ttname"><a href="classv8_1_1base_1_1Flags.html">v8::base::Flags</a></div><div class="ttdef"><b>Definition</b> <a href="base_2flags_8h_source.html#l00025">flags.h:25</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1SharedMutexGuard_html"><div class="ttname"><a href="classv8_1_1base_1_1SharedMutexGuard.html">v8::base::SharedMutexGuard</a></div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00568">mutex.h:568</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DependentCode_html_a6ddeb27b4e6f458ce2257036e3f364aea123390ef7fbc57f85380f025aaa7a580"><div class="ttname"><a href="classv8_1_1internal_1_1DependentCode.html#a6ddeb27b4e6f458ce2257036e3f364aea123390ef7fbc57f85380f025aaa7a580">v8::internal::DependentCode::kFieldConstGroup</a></div><div class="ttdeci">@ kFieldConstGroup</div><div class="ttdef"><b>Definition</b> <a href="dependent-code_8h_source.html#l00052">dependent-code.h:52</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DependentCode_html_a6ddeb27b4e6f458ce2257036e3f364aea51be1de08d293f014aafd3fc5feb8833"><div class="ttname"><a href="classv8_1_1internal_1_1DependentCode.html#a6ddeb27b4e6f458ce2257036e3f364aea51be1de08d293f014aafd3fc5feb8833">v8::internal::DependentCode::kFieldRepresentationGroup</a></div><div class="ttdeci">@ kFieldRepresentationGroup</div><div class="ttdef"><b>Definition</b> <a href="dependent-code_8h_source.html#l00053">dependent-code.h:53</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DependentCode_html_a6ddeb27b4e6f458ce2257036e3f364aead5bb3481b1c5b207b9dd295ea5dbbbf4"><div class="ttname"><a href="classv8_1_1internal_1_1DependentCode.html#a6ddeb27b4e6f458ce2257036e3f364aead5bb3481b1c5b207b9dd295ea5dbbbf4">v8::internal::DependentCode::kFieldTypeGroup</a></div><div class="ttdeci">@ kFieldTypeGroup</div><div class="ttdef"><b>Definition</b> <a href="dependent-code_8h_source.html#l00051">dependent-code.h:51</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DependentCode_html_ac8da05d32a7e9c02c7a11456c8b0afd5"><div class="ttname"><a href="classv8_1_1internal_1_1DependentCode.html#ac8da05d32a7e9c02c7a11456c8b0afd5">v8::internal::DependentCode::DeoptimizeDependencyGroups</a></div><div class="ttdeci">static void DeoptimizeDependencyGroups(Isolate *isolate, ObjectT object, DependencyGroups groups)</div><div class="ttdef"><b>Definition</b> <a href="dependent-code-inl_8h_source.html#l00023">dependent-code-inl.h:23</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DescriptorArray_html_a75a0266e4c2259b8eb02dc422089bf71"><div class="ttname"><a href="classv8_1_1internal_1_1DescriptorArray.html#a75a0266e4c2259b8eb02dc422089bf71">v8::internal::DescriptorArray::Allocate</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Handle&lt; DescriptorArray &gt; Allocate(IsolateT *isolate, int nof_descriptors, int slack, AllocationType allocation=AllocationType::kYoung)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Descriptor_html_a2782160995ef5a9c515d8cee9a6b2d85"><div class="ttname"><a href="classv8_1_1internal_1_1Descriptor.html#a2782160995ef5a9c515d8cee9a6b2d85">v8::internal::Descriptor::DataField</a></div><div class="ttdeci">static Descriptor DataField(Isolate *isolate, DirectHandle&lt; Name &gt; key, int field_index, PropertyAttributes attributes, Representation representation)</div><div class="ttdef"><b>Definition</b> <a href="property_8cc_source.html#l00081">property.cc:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Descriptor_html_a825c239b05b4814615a852ea28b406ec"><div class="ttname"><a href="classv8_1_1internal_1_1Descriptor.html#a825c239b05b4814615a852ea28b406ec">v8::internal::Descriptor::AccessorConstant</a></div><div class="ttdeci">static Descriptor AccessorConstant(DirectHandle&lt; Name &gt; key, DirectHandle&lt; Object &gt; foreign, PropertyAttributes attributes)</div><div class="ttdef"><b>Definition</b> <a href="property_8cc_source.html#l00118">property.cc:118</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Descriptor_html_a99e8701798dba98e56a94b2e66d053c0"><div class="ttname"><a href="classv8_1_1internal_1_1Descriptor.html#a99e8701798dba98e56a94b2e66d053c0">v8::internal::Descriptor::DataConstant</a></div><div class="ttdeci">static Descriptor DataConstant(DirectHandle&lt; Name &gt; key, DirectHandle&lt; Object &gt; value, PropertyAttributes attributes)</div><div class="ttdef"><b>Definition</b> <a href="property_8cc_source.html#l00100">property.cc:100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html">v8::internal::DirectHandle</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00643">handles.h:652</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FastKeyAccumulator_html_a1f64b2d6135f5ff3b104c7cac6f5fc42"><div class="ttname"><a href="classv8_1_1internal_1_1FastKeyAccumulator.html#a1f64b2d6135f5ff3b104c7cac6f5fc42">v8::internal::FastKeyAccumulator::InitializeFastPropertyEnumCache</a></div><div class="ttdeci">static Handle&lt; FixedArray &gt; InitializeFastPropertyEnumCache(Isolate *isolate, DirectHandle&lt; Map &gt; map, int enum_length, AllocationType allocation=AllocationType::kOld)</div><div class="ttdef"><b>Definition</b> <a href="keys_8cc_source.html#l00509">keys.cc:509</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_a1d02185c5efa65acb3cf70f9d74ddf76"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#a1d02185c5efa65acb3cf70f9d74ddf76">v8::internal::FieldType::PrintTo</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void PrintTo(Tagged&lt; FieldType &gt; type, std::ostream &amp;os)</div><div class="ttdef"><b>Definition</b> <a href="field-type_8cc_source.html#l00093">field-type.cc:93</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_a6652f43f8b4e3c217124374a2f4b1172"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#a6652f43f8b4e3c217124374a2f4b1172">v8::internal::FieldType::Equals</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE bool Equals(Tagged&lt; FieldType &gt; type, Tagged&lt; FieldType &gt; other)</div><div class="ttdef"><b>Definition</b> <a href="field-type_8cc_source.html#l00078">field-type.cc:78</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_a83b2eae94beaffcfdd7b2465521b3c17"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#a83b2eae94beaffcfdd7b2465521b3c17">v8::internal::FieldType::Any</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Tagged&lt; FieldType &gt; Any()</div><div class="ttdef"><b>Definition</b> <a href="field-type_8cc_source.html#l00022">field-type.cc:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_a850ca02db2d0bd0b2279e392a7b7a606"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#a850ca02db2d0bd0b2279e392a7b7a606">v8::internal::FieldType::None</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Tagged&lt; FieldType &gt; None()</div><div class="ttdef"><b>Definition</b> <a href="field-type_8cc_source.html#l00017">field-type.cc:17</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FieldType_html_ae3e25b47fcc85c189745eb8fd902ed40"><div class="ttname"><a href="classv8_1_1internal_1_1FieldType.html#ae3e25b47fcc85c189745eb8fd902ed40">v8::internal::FieldType::NowIs</a></div><div class="ttdeci">static bool NowIs(Tagged&lt; FieldType &gt; type, Tagged&lt; FieldType &gt; other)</div><div class="ttdef"><b>Definition</b> <a href="field-type_8cc_source.html#l00067">field-type.cc:67</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Handle_html"><div class="ttname"><a href="classv8_1_1internal_1_1Handle.html">v8::internal::Handle</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00145">handles.h:145</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalIndex_html"><div class="ttname"><a href="classv8_1_1internal_1_1InternalIndex.html">v8::internal::InternalIndex</a></div><div class="ttdef"><b>Definition</b> <a href="internal-index_8h_source.html#l00020">internal-index.h:20</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalIndex_html_a8d405aded63c405c86fd03e1ff104408"><div class="ttname"><a href="classv8_1_1internal_1_1InternalIndex.html#a8d405aded63c405c86fd03e1ff104408">v8::internal::InternalIndex::as_int</a></div><div class="ttdeci">constexpr int as_int() const</div><div class="ttdef"><b>Definition</b> <a href="internal-index_8h_source.html#l00042">internal-index.h:42</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalIndex_html_ad381db083f3f9b72f16908eac7027823"><div class="ttname"><a href="classv8_1_1internal_1_1InternalIndex.html#ad381db083f3f9b72f16908eac7027823">v8::internal::InternalIndex::is_found</a></div><div class="ttdeci">bool is_found() const</div><div class="ttdef"><b>Definition</b> <a href="internal-index_8h_source.html#l00034">internal-index.h:34</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00575">isolate.h:575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a18ef19dc9a745b1858ae8db9178431e0"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a18ef19dc9a745b1858ae8db9178431e0">v8::internal::Isolate::map_updater_access</a></div><div class="ttdeci">base::SharedMutex * map_updater_access()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00751">isolate.h:751</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a3da2978869f7e0460fbd67ad0a9e4728"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a3da2978869f7e0460fbd67ad0a9e4728">v8::internal::Isolate::main_thread_local_isolate</a></div><div class="ttdeci">LocalIsolate * main_thread_local_isolate()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l02146">isolate.h:2146</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSObject_html_a6778b7efad46d382d16a9ead08dbfa66"><div class="ttname"><a href="classv8_1_1internal_1_1JSObject.html#a6778b7efad46d382d16a9ead08dbfa66">v8::internal::JSObject::InvalidatePrototypeChains</a></div><div class="ttdeci">static Tagged&lt; Map &gt; InvalidatePrototypeChains(Tagged&lt; Map &gt; map)</div><div class="ttdef"><b>Definition</b> <a href="js-objects_8cc_source.html#l05195">js-objects.cc:5195</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JavaScriptFrame_html_a69de8494527b217bfd2bcde82196cd31"><div class="ttname"><a href="classv8_1_1internal_1_1JavaScriptFrame.html#a69de8494527b217bfd2bcde82196cd31">v8::internal::JavaScriptFrame::PrintTop</a></div><div class="ttdeci">static void PrintTop(Isolate *isolate, FILE *file, bool print_args, bool print_line_number)</div><div class="ttdef"><b>Definition</b> <a href="frames_8cc_source.html#l02615">frames.cc:2615</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html">v8::internal::MapUpdater</a></div><div class="ttdef"><b>Definition</b> <a href="map-updater_8h_source.html#l00051">map-updater.h:51</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_a17b96916a316657681c5382aa61bab1a"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#a17b96916a316657681c5382aa61bab1a">v8::internal::MapUpdater::CompleteInobjectSlackTracking</a></div><div class="ttdeci">static void CompleteInobjectSlackTracking(Isolate *isolate, Tagged&lt; Map &gt; initial_map)</div><div class="ttdef"><b>Definition</b> <a href="#l00456">map-updater.cc:456</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_a2e9a04b72d0f858b38ef762eb3b6d07e"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#a2e9a04b72d0f858b38ef762eb3b6d07e">v8::internal::MapUpdater::ReconfigureToDataField</a></div><div class="ttdeci">Handle&lt; Map &gt; ReconfigureToDataField(InternalIndex descriptor, PropertyAttributes attributes, PropertyConstness constness, Representation representation, Handle&lt; FieldType &gt; field_type)</div><div class="ttdef"><b>Definition</b> <a href="#l00174">map-updater.cc:174</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_a484aea5ba3eabca6a01a0542e7c6206b"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#a484aea5ba3eabca6a01a0542e7c6206b">v8::internal::MapUpdater::ReconfigureElementsKind</a></div><div class="ttdeci">Handle&lt; Map &gt; ReconfigureElementsKind(ElementsKind elements_kind)</div><div class="ttdef"><b>Definition</b> <a href="#l00233">map-updater.cc:233</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_a62370c6e6a97b815ffaf307a4b478905"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#a62370c6e6a97b815ffaf307a4b478905">v8::internal::MapUpdater::ApplyPrototypeTransition</a></div><div class="ttdeci">Handle&lt; Map &gt; ApplyPrototypeTransition(DirectHandle&lt; JSPrototype &gt; prototype)</div><div class="ttdef"><b>Definition</b> <a href="#l00243">map-updater.cc:243</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_a7bfd89e950ab3ffaf81bb06c31012d68"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#a7bfd89e950ab3ffaf81bb06c31012d68">v8::internal::MapUpdater::ReconfigureExistingProperty</a></div><div class="ttdeci">static Handle&lt; Map &gt; ReconfigureExistingProperty(Isolate *isolate, Handle&lt; Map &gt; map, InternalIndex descriptor, PropertyKind kind, PropertyAttributes attributes, PropertyConstness constness)</div><div class="ttdef"><b>Definition</b> <a href="#l01190">map-updater.cc:1190</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_a9bed85b35162390b6cd90f5598f8947e"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#a9bed85b35162390b6cd90f5598f8947e">v8::internal::MapUpdater::TryUpdateNoLock</a></div><div class="ttdeci">static std::optional&lt; Tagged&lt; Map &gt; &gt; TryUpdateNoLock(Isolate *isolate, Tagged&lt; Map &gt; old_map, ConcurrencyMode cmode) V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition</b> <a href="#l00354">map-updater.cc:354</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_aa3b23c24bdb32bef0c5ceb02c72ced18"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#aa3b23c24bdb32bef0c5ceb02c72ced18">v8::internal::MapUpdater::GeneralizeField</a></div><div class="ttdeci">static void GeneralizeField(Isolate *isolate, DirectHandle&lt; Map &gt; map, InternalIndex modify_index, PropertyConstness new_constness, Representation new_representation, Handle&lt; FieldType &gt; new_field_type)</div><div class="ttdef"><b>Definition</b> <a href="#l01310">map-updater.cc:1310</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_ad9af4bdcc4d58fa609e0156c89ae483d"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#ad9af4bdcc4d58fa609e0156c89ae483d">v8::internal::MapUpdater::Update</a></div><div class="ttdeci">Handle&lt; Map &gt; Update()</div><div class="ttdef"><b>Definition</b> <a href="#l00274">map-updater.cc:274</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapUpdater_html_ae9b27ee9a9387da8cfe568ee414fdfba"><div class="ttname"><a href="classv8_1_1internal_1_1MapUpdater.html#ae9b27ee9a9387da8cfe568ee414fdfba">v8::internal::MapUpdater::MapUpdater</a></div><div class="ttdeci">MapUpdater(Isolate *isolate, Handle&lt; Map &gt; old_map)</div><div class="ttdef"><b>Definition</b> <a href="#l00090">map-updater.cc:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_a04acac5a33f9e8cd1e3afc1d993b5f2e"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#a04acac5a33f9e8cd1e3afc1d993b5f2e">v8::internal::Map::GeneralizeIfCanHaveTransitionableFastElementsKind</a></div><div class="ttdeci">static void GeneralizeIfCanHaveTransitionableFastElementsKind(Isolate *isolate, InstanceType instance_type, Representation *representation, Handle&lt; FieldType &gt; *field_type)</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00173">map-inl.h:173</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_a175f7137e25fad0dd95d2bbf763db827"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#a175f7137e25fad0dd95d2bbf763db827">v8::internal::Map::TransitionToUpdatePrototype</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Handle&lt; Map &gt; TransitionToUpdatePrototype(Isolate *isolate, DirectHandle&lt; Map &gt; map, DirectHandle&lt; JSPrototype &gt; prototype)</div><div class="ttdef"><b>Definition</b> <a href="map_8cc_source.html#l02514">map.cc:2514</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_a20eefa90d1b4f884523d09a916d29968"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#a20eefa90d1b4f884523d09a916d29968">v8::internal::Map::CopyForPrototypeTransition</a></div><div class="ttdeci">static Handle&lt; Map &gt; CopyForPrototypeTransition(Isolate *isolate, DirectHandle&lt; Map &gt; map, DirectHandle&lt; JSPrototype &gt; prototype)</div><div class="ttdef"><b>Definition</b> <a href="map_8cc_source.html#l01811">map.cc:1811</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_a2a2d69d6abc592918fe00f31f4d32a74"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#a2a2d69d6abc592918fe00f31f4d32a74">v8::internal::Map::kNoSlackTracking</a></div><div class="ttdeci">static const int kNoSlackTracking</div><div class="ttdef"><b>Definition</b> <a href="map_8h_source.html#l00348">map.h:348</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_a7418a18a11d96f6d6550c4e8e453790a"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#a7418a18a11d96f6d6550c4e8e453790a">v8::internal::Map::IsMostGeneralFieldType</a></div><div class="ttdeci">static bool IsMostGeneralFieldType(Representation representation, Tagged&lt; FieldType &gt; field_type)</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00150">map-inl.h:150</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_aae668ae5d352e15e940cdfdbaa6007b1"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#aae668ae5d352e15e940cdfdbaa6007b1">v8::internal::Map::Normalize</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Handle&lt; Map &gt; Normalize(Isolate *isolate, DirectHandle&lt; Map &gt; map, ElementsKind new_elements_kind, DirectHandle&lt; JSPrototype &gt; new_prototype, PropertyNormalizationMode mode, bool use_cache, const char *reason)</div><div class="ttdef"><b>Definition</b> <a href="map_8cc_source.html#l01293">map.cc:1293</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_abb937261c0cadd5dbd4e9775b410fb99"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#abb937261c0cadd5dbd4e9775b410fb99">v8::internal::Map::CopyForPreventExtensions</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Handle&lt; Map &gt; CopyForPreventExtensions(Isolate *isolate, DirectHandle&lt; Map &gt; map, PropertyAttributes attrs_to_add, DirectHandle&lt; Symbol &gt; transition_marker, const char *reason, bool old_map_is_dictionary_elements_kind=false)</div><div class="ttdef"><b>Definition</b> <a href="map_8cc_source.html#l01863">map.cc:1863</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_ac746c567b7dc6d03f258fa08c61de530"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#ac746c567b7dc6d03f258fa08c61de530">v8::internal::Map::WrapFieldType</a></div><div class="ttdeci">static MaybeObjectHandle WrapFieldType(Handle&lt; FieldType &gt; type)</div><div class="ttdef"><b>Definition</b> <a href="map_8cc_source.html#l00487">map.cc:487</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_ac7bfaa7f77e1d8cd95dde6d97baf46a7"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#ac7bfaa7f77e1d8cd95dde6d97baf46a7">v8::internal::Map::GetVisitorId</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE VisitorId GetVisitorId(Tagged&lt; Map &gt; map)</div><div class="ttdef"><b>Definition</b> <a href="map_8cc_source.html#l00065">map.cc:65</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Map_html_accc0b91a8529a6818aca8a321489a587"><div class="ttname"><a href="classv8_1_1internal_1_1Map.html#accc0b91a8529a6818aca8a321489a587">v8::internal::Map::AsElementsKind</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE Handle&lt; Map &gt; AsElementsKind(Isolate *isolate, DirectHandle&lt; Map &gt; map, ElementsKind kind)</div><div class="ttdef"><b>Definition</b> <a href="map_8cc_source.html#l01174">map.cc:1174</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html">v8::internal::MaybeDirectHandle</a></div><div class="ttdef"><b>Definition</b> <a href="maybe-handles_8h_source.html#l00239">maybe-handles.h:239</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Object_html_ad8ba91fef577036db0736a6d551ed3e8"><div class="ttname"><a href="classv8_1_1internal_1_1Object.html#ad8ba91fef577036db0736a6d551ed3e8">v8::internal::Object::OptimalType</a></div><div class="ttdeci">static Handle&lt; FieldType &gt; OptimalType(Tagged&lt; Object &gt; obj, Isolate *isolate, Representation representation)</div><div class="ttdef"><b>Definition</b> <a href="objects_8cc_source.html#l00224">objects.cc:224</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ParkedSharedMutexGuardIf_html"><div class="ttname"><a href="classv8_1_1internal_1_1ParkedSharedMutexGuardIf.html">v8::internal::ParkedSharedMutexGuardIf</a></div><div class="ttdef"><b>Definition</b> <a href="parked-scope_8h_source.html#l00109">parked-scope.h:109</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PerThreadAssertScopeEmpty_html"><div class="ttname"><a href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">v8::internal::PerThreadAssertScopeEmpty&lt; kAllow, kTypes... &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PropertyDetails_html"><div class="ttname"><a href="classv8_1_1internal_1_1PropertyDetails.html">v8::internal::PropertyDetails</a></div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00267">property-details.h:267</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PropertyDetails_html_a21bd1ca61406d144db4b384a71cdcc96"><div class="ttname"><a href="classv8_1_1internal_1_1PropertyDetails.html#a21bd1ca61406d144db4b384a71cdcc96">v8::internal::PropertyDetails::attributes</a></div><div class="ttdeci">PropertyAttributes attributes() const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00365">property-details.h:365</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PropertyDetails_html_a2d8f536f39a3ab2754cdd721de544ae4"><div class="ttname"><a href="classv8_1_1internal_1_1PropertyDetails.html#a2d8f536f39a3ab2754cdd721de544ae4">v8::internal::PropertyDetails::location</a></div><div class="ttdeci">PropertyLocation location() const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00362">property-details.h:362</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PropertyDetails_html_a4355e88929d3f1f8d7855d80a064d492"><div class="ttname"><a href="classv8_1_1internal_1_1PropertyDetails.html#a4355e88929d3f1f8d7855d80a064d492">v8::internal::PropertyDetails::representation</a></div><div class="ttdeci">Representation representation() const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00378">property-details.h:378</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PropertyDetails_html_a84ec5d54214083de458bfc43b8c3ac1b"><div class="ttname"><a href="classv8_1_1internal_1_1PropertyDetails.html#a84ec5d54214083de458bfc43b8c3ac1b">v8::internal::PropertyDetails::kind</a></div><div class="ttdeci">PropertyKind kind() const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00361">property-details.h:361</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PropertyDetails_html_aa6d8ec62f0979d0aea956c801aabb815"><div class="ttname"><a href="classv8_1_1internal_1_1PropertyDetails.html#aa6d8ec62f0979d0aea956c801aabb815">v8::internal::PropertyDetails::constness</a></div><div class="ttdeci">PropertyConstness constness() const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00363">property-details.h:363</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html">v8::internal::Representation</a></div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00095">property-details.h:95</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html_a0febd6151e727b2840b7444dd5e7c632"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html#a0febd6151e727b2840b7444dd5e7c632">v8::internal::Representation::IsHeapObject</a></div><div class="ttdeci">constexpr bool IsHeapObject() const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00209">property-details.h:209</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html_a358b22922554e7c1c08eb68e74c8d904"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html#a358b22922554e7c1c08eb68e74c8d904">v8::internal::Representation::fits_into</a></div><div class="ttdeci">bool fits_into(const Representation &amp;other) const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00185">property-details.h:185</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html_a3c8d99598894389c44cbe32d5ce7a3fa"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html#a3c8d99598894389c44cbe32d5ce7a3fa">v8::internal::Representation::IsNone</a></div><div class="ttdeci">constexpr bool IsNone() const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00203">property-details.h:203</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html_a8bdd97567badb1040967d90910c76c54"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html#a8bdd97567badb1040967d90910c76c54">v8::internal::Representation::generalize</a></div><div class="ttdeci">Representation generalize(Representation other)</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00189">property-details.h:189</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html_aa84e9e08d7aa134ade62588b6353aaeb"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html#aa84e9e08d7aa134ade62588b6353aaeb">v8::internal::Representation::Equals</a></div><div class="ttdeci">bool Equals(const Representation &amp;other) const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00127">property-details.h:127</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html_ace382f041e3e5c2b98fefd107be9927d"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html#ace382f041e3e5c2b98fefd107be9927d">v8::internal::Representation::None</a></div><div class="ttdeci">static constexpr Representation None()</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00112">property-details.h:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Representation_html_afc2857d68d808055d558efa69b9a7838"><div class="ttname"><a href="classv8_1_1internal_1_1Representation.html#afc2857d68d808055d558efa69b9a7838">v8::internal::Representation::CanBeInPlaceChangedTo</a></div><div class="ttdeci">bool CanBeInPlaceChangedTo(const Representation &amp;other) const</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00157">property-details.h:157</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01HeapObject_01_4_html_a07c12d3bf0972861e1c5aefabd00971f"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a07c12d3bf0972861e1c5aefabd00971f">v8::internal::Tagged&lt; HeapObject &gt;::address</a></div><div class="ttdeci">Address address() const</div><div class="ttdef"><b>Definition</b> <a href="tagged_8h_source.html#l00497">tagged.h:497</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01HeapObject_01_4_html_a0b3e2aefd7dbaf06dd5dc4641d0d00f5"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a0b3e2aefd7dbaf06dd5dc4641d0d00f5">v8::internal::Tagged&lt; HeapObject &gt;::is_null</a></div><div class="ttdeci">V8_INLINE constexpr bool is_null() const</div><div class="ttdef"><b>Definition</b> <a href="tagged_8h_source.html#l00474">tagged.h:474</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition</b> <a href="waiter-queue-node_8h_source.html#l00022">waiter-queue-node.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html">v8::internal::TransitionsAccessor</a></div><div class="ttdef"><b>Definition</b> <a href="transitions_8h_source.html#l00075">transitions.h:75</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html_a1dc4182835dccc64db93443a047531d2"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html#a1dc4182835dccc64db93443a047531d2">v8::internal::TransitionsAccessor::CanHaveMoreTransitions</a></div><div class="ttdeci">static bool CanHaveMoreTransitions(Isolate *isolate, DirectHandle&lt; Map &gt; map)</div><div class="ttdef"><b>Definition</b> <a href="transitions_8cc_source.html#l00318">transitions.cc:318</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html_a20df3aba83cced04f0675bdd7d773d48"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html#a20df3aba83cced04f0675bdd7d773d48">v8::internal::TransitionsAccessor::GetPrototypeTransition</a></div><div class="ttdeci">static std::optional&lt; Tagged&lt; Map &gt; &gt; GetPrototypeTransition(Isolate *isolate, Tagged&lt; Map &gt; map, Tagged&lt; Object &gt; prototype)</div><div class="ttdef"><b>Definition</b> <a href="transitions_8cc_source.html#l00463">transitions.cc:463</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html_a34d5580f0039113ee34e43ca052b5262"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html#a34d5580f0039113ee34e43ca052b5262">v8::internal::TransitionsAccessor::SearchTransition</a></div><div class="ttdeci">Tagged&lt; Map &gt; SearchTransition(Tagged&lt; Name &gt; name, PropertyKind kind, PropertyAttributes attributes)</div><div class="ttdef"><b>Definition</b> <a href="transitions_8cc_source.html#l00231">transitions.cc:231</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html_a64817485831624fe362de42517e75283"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html#a64817485831624fe362de42517e75283">v8::internal::TransitionsAccessor::SetMigrationTarget</a></div><div class="ttdeci">static void SetMigrationTarget(Isolate *isolate, DirectHandle&lt; Map &gt; map, Tagged&lt; Map &gt; migration_target)</div><div class="ttdef"><b>Definition</b> <a href="transitions_8cc_source.html#l00535">transitions.cc:535</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html_a8c297451ba23e1c19bd8fe070aba45bb"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html#a8c297451ba23e1c19bd8fe070aba45bb">v8::internal::TransitionsAccessor::TraverseCallback</a></div><div class="ttdeci">std::function&lt; void(Tagged&lt; Map &gt;)&gt; TraverseCallback</div><div class="ttdef"><b>Definition</b> <a href="transitions_8h_source.html#l00169">transitions.h:169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TransitionsAccessor_html_abbb20363330eadc596056c40de5e04cc"><div class="ttname"><a href="classv8_1_1internal_1_1TransitionsAccessor.html#abbb20363330eadc596056c40de5e04cc">v8::internal::TransitionsAccessor::SearchSpecial</a></div><div class="ttdeci">Tagged&lt; Map &gt; SearchSpecial(Tagged&lt; Symbol &gt; name)</div><div class="ttdef"><b>Definition</b> <a href="transitions_8cc_source.html#l00253">transitions.cc:253</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_aa28b37bd003d1724a468ca0cfa8478d2"><div class="ttname"><a href="debug-coverage_8cc.html#aa28b37bd003d1724a468ca0cfa8478d2">info</a></div><div class="ttdeci">Handle&lt; SharedFunctionInfo &gt; info</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00593">debug-coverage.cc:593</a></div></div>
<div class="ttc" id="aearley-parser_8cc_html_a8a2b2ef92f1e05c391a8584a56d0672f"><div class="ttname"><a href="earley-parser_8cc.html#a8a2b2ef92f1e05c391a8584a56d0672f">previous</a></div><div class="ttdeci">LineAndColumn previous</div><div class="ttdef"><b>Definition</b> <a href="earley-parser_8cc_source.html#l00021">earley-parser.cc:21</a></div></div>
<div class="ttc" id="aexecution_2isolate_8h_html"><div class="ttname"><a href="execution_2isolate_8h.html">isolate.h</a></div></div>
<div class="ttc" id="afield-type_8h_html"><div class="ttname"><a href="field-type_8h.html">field-type.h</a></div></div>
<div class="ttc" id="aframes_8h_html"><div class="ttname"><a href="frames_8h.html">frames.h</a></div></div>
<div class="ttc" id="agraph-builder_8cc_html_a9990dda08de44f6aee0aaf44c50da7d9"><div class="ttname"><a href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a></div><div class="ttdeci">Isolate * isolate</div><div class="ttdef"><b>Definition</b> <a href="graph-builder_8cc_source.html#l00058">graph-builder.cc:58</a></div></div>
<div class="ttc" id="ahandles_8h_html"><div class="ttname"><a href="handles_8h.html">handles.h</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_a160b46cc89e1d0807731be8c2d2257c0"><div class="ttname"><a href="js-call-reducer_8cc.html#a160b46cc89e1d0807731be8c2d2257c0">target</a></div><div class="ttdeci">TNode&lt; Object &gt; target</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01497">js-call-reducer.cc:1497</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_ad83e8682ed733ee0cf359fa4f48441b0"><div class="ttname"><a href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a></div><div class="ttdeci">TNode&lt; Object &gt; callback</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01500">js-call-reducer.cc:1500</a></div></div>
<div class="ttc" id="ajs-date-time-format_8cc_html_a22ede25ca923109929a8dca3c225b2ad"><div class="ttname"><a href="js-date-time-format_8cc.html#a22ede25ca923109929a8dca3c225b2ad">map</a></div><div class="ttdeci">std::map&lt; const std::string, const std::string &gt; map</div><div class="ttdef"><b>Definition</b> <a href="js-date-time-format_8cc_source.html#l00268">js-date-time-format.cc:268</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a41f8c58d2c01bf65b8ee199c3f87fc80"><div class="ttname"><a href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a></div><div class="ttdeci">ZoneVector&lt; RpoNumber &gt; &amp; result</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00021">jump-threading.cc:21</a></div></div>
<div class="ttc" id="akeys_8h_html"><div class="ttname"><a href="keys_8h.html">keys.h</a></div></div>
<div class="ttc" id="alogging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00490">logging.h:490</a></div></div>
<div class="ttc" id="alogging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="alogging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00493">logging.h:493</a></div></div>
<div class="ttc" id="alogging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="alogging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="alogging_8h_html_aca32614b4d2aea7dd9abdeb222bf02f3"><div class="ttname"><a href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00482">logging.h:482</a></div></div>
<div class="ttc" id="alogging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="amap-updater_8cc_html_a3947ef6737b193024c0f915e800d821c"><div class="ttname"><a href="map-updater_8cc.html#a3947ef6737b193024c0f915e800d821c">integrity_level_symbol</a></div><div class="ttdeci">Tagged&lt; Symbol &gt; integrity_level_symbol</div><div class="ttdef"><b>Definition</b> <a href="#l00306">map-updater.cc:306</a></div></div>
<div class="ttc" id="amap-updater_8cc_html_a6c94a6eb4baa0d0669fd253d1fe19d91"><div class="ttname"><a href="map-updater_8cc.html#a6c94a6eb4baa0d0669fd253d1fe19d91">has_integrity_level_transition</a></div><div class="ttdeci">bool has_integrity_level_transition</div><div class="ttdef"><b>Definition</b> <a href="#l00303">map-updater.cc:303</a></div></div>
<div class="ttc" id="amap-updater_8cc_html_aa1d8418338b652496b6bf3ca16695471"><div class="ttname"><a href="map-updater_8cc.html#aa1d8418338b652496b6bf3ca16695471">integrity_level</a></div><div class="ttdeci">PropertyAttributes integrity_level</div><div class="ttdef"><b>Definition</b> <a href="#l00304">map-updater.cc:304</a></div></div>
<div class="ttc" id="amap-updater_8cc_html_ab0c7a62c6b2f38fda161c855c4f12997"><div class="ttname"><a href="map-updater_8cc.html#ab0c7a62c6b2f38fda161c855c4f12997">integrity_level_source_map</a></div><div class="ttdeci">Tagged&lt; Map &gt; integrity_level_source_map</div><div class="ttdef"><b>Definition</b> <a href="#l00305">map-updater.cc:305</a></div></div>
<div class="ttc" id="amap-updater_8h_html"><div class="ttname"><a href="map-updater_8h.html">map-updater.h</a></div></div>
<div class="ttc" id="amutex_8h_html"><div class="ttname"><a href="mutex_8h.html">mutex.h</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1libvtune_html_a85908a2ac6abdcec9ee9c4f7e51e795f"><div class="ttname"><a href="namespacev8_1_1internal_1_1libvtune.html#a85908a2ac6abdcec9ee9c4f7e51e795f">v8::internal::libvtune::split</a></div><div class="ttdeci">void split(const std::string &amp;str, char delimiter, std::vector&lt; std::string &gt; *vparams)</div><div class="ttdef"><b>Definition</b> <a href="vtunedomain-support-extension_8cc_source.html#l00025">vtunedomain-support-extension.cc:25</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00018">api-arguments-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a20971f8a9770697fdde08004c19035a3"><div class="ttname"><a href="namespacev8_1_1internal.html#a20971f8a9770697fdde08004c19035a3">v8::internal::DisallowGarbageCollection</a></div><div class="ttdeci">PerThreadAssertScopeDebugOnly&lt; false, SAFEPOINTS_ASSERT, HEAP_ALLOCATION_ASSERT &gt; DisallowGarbageCollection</div><div class="ttdef"><b>Definition</b> <a href="assert-scope_8h_source.html#l00236">assert-scope.h:236</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a27202b6f0818cc28c6f2bded2cd0211c"><div class="ttname"><a href="namespacev8_1_1internal.html#a27202b6f0818cc28c6f2bded2cd0211c">v8::internal::IsAnyHoleyNonextensibleElementsKind</a></div><div class="ttdeci">bool IsAnyHoleyNonextensibleElementsKind(ElementsKind kind)</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00429">elements-kind.h:429</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3385b29114f02665568e3b85945e9d10"><div class="ttname"><a href="namespacev8_1_1internal.html#a3385b29114f02665568e3b85945e9d10">v8::internal::IsMoreGeneralElementsKindTransition</a></div><div class="ttdeci">bool IsMoreGeneralElementsKindTransition(ElementsKind from_kind, ElementsKind to_kind)</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8cc_source.html#l00182">elements-kind.cc:182</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a352f65439007f2f1b85c997c1ba11436"><div class="ttname"><a href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436">v8::internal::PropertyAttributes</a></div><div class="ttdeci">PropertyAttributes</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00018">property-details.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370"><div class="ttname"><a href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370">v8::internal::NONE</a></div><div class="ttdeci">@ NONE</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00019">property-details.h:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a352f65439007f2f1b85c997c1ba11436ac96c4a6f8b2f89bb1dbaebb75becb0c2"><div class="ttname"><a href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436ac96c4a6f8b2f89bb1dbaebb75becb0c2">v8::internal::FROZEN</a></div><div class="ttdeci">@ FROZEN</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00027">property-details.h:27</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a352f65439007f2f1b85c997c1ba11436ad8ce154ac002d77d3cca81d16765a76f"><div class="ttname"><a href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436ad8ce154ac002d77d3cca81d16765a76f">v8::internal::READ_ONLY</a></div><div class="ttdeci">@ READ_ONLY</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00020">property-details.h:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a352f65439007f2f1b85c997c1ba11436ae1b3d8db108d2f4b5319b8d1ac5ebaef"><div class="ttname"><a href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436ae1b3d8db108d2f4b5319b8d1ac5ebaef">v8::internal::SEALED</a></div><div class="ttdeci">@ SEALED</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00026">property-details.h:26</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a403f10ce1c7dc18ea5f622a1aaa56285"><div class="ttname"><a href="namespacev8_1_1internal.html#a403f10ce1c7dc18ea5f622a1aaa56285">v8::internal::Tagged&lt; DescriptorArray &gt;</a></div><div class="ttdeci">Tagged&lt; DescriptorArray &gt;</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00045">map-inl.h:45</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a420e377bba6b25b38450dd44912cd5f6"><div class="ttname"><a href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6">v8::internal::ConcurrencyMode</a></div><div class="ttdeci">ConcurrencyMode</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02519">globals.h:2519</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b"><div class="ttname"><a href="namespacev8_1_1internal.html#a420e377bba6b25b38450dd44912cd5f6a21ed2c08d58afea3d6b70cec9fbc377b">v8::internal::ConcurrencyMode::kSynchronous</a></div><div class="ttdeci">@ kSynchronous</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4382c244e839ce16a4beafabd1c6bd1d"><div class="ttname"><a href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">v8::internal::Tagged</a></div><div class="ttdeci">Tagged(T object) -&gt; Tagged&lt; T &gt;</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5297fd2c72981b2220e6b9a831570fb3"><div class="ttname"><a href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">v8::internal::Tagged&lt; Object &gt;</a></div><div class="ttdeci">Tagged&lt; Object &gt;</div><div class="ttdef"><b>Definition</b> <a href="allocation-site-inl_8h_source.html#l00029">allocation-site-inl.h:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a538499d2a66bf6e9d3182a57104edec9"><div class="ttname"><a href="namespacev8_1_1internal.html#a538499d2a66bf6e9d3182a57104edec9">v8::internal::UNIMPLEMENTED</a></div><div class="ttdeci">UNIMPLEMENTED()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a58d74ec6fc2eed91e8c81de91a4ee115"><div class="ttname"><a href="namespacev8_1_1internal.html#a58d74ec6fc2eed91e8c81de91a4ee115">v8::internal::IsAnyNonextensibleElementsKind</a></div><div class="ttdeci">bool IsAnyNonextensibleElementsKind(ElementsKind kind)</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00374">elements-kind.h:374</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5feb64a99571462d3380d03aa42c149c"><div class="ttname"><a href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149c">v8::internal::ElementsKind</a></div><div class="ttdeci">ElementsKind</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00105">elements-kind.h:105</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5feb64a99571462d3380d03aa42c149ca6f1bdf5c8e2bb9db9d77063c18e3be8a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149ca6f1bdf5c8e2bb9db9d77063c18e3be8a">v8::internal::SLOW_STRING_WRAPPER_ELEMENTS</a></div><div class="ttdeci">@ SLOW_STRING_WRAPPER_ELEMENTS</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00147">elements-kind.h:147</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5feb64a99571462d3380d03aa42c149cac053733fa7d92aff0fcce191adc35295"><div class="ttname"><a href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cac053733fa7d92aff0fcce191adc35295">v8::internal::SLOW_SLOPPY_ARGUMENTS_ELEMENTS</a></div><div class="ttdeci">@ SLOW_SLOPPY_ARGUMENTS_ELEMENTS</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00142">elements-kind.h:142</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37"><div class="ttname"><a href="namespacev8_1_1internal.html#a5feb64a99571462d3380d03aa42c149cace123a96977080e9fd831f0f40e97a37">v8::internal::DICTIONARY_ELEMENTS</a></div><div class="ttdeci">@ DICTIONARY_ELEMENTS</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00138">elements-kind.h:138</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a60f13a8c00d0433f9336368824ac21a1"><div class="ttname"><a href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">v8::internal::direct_handle</a></div><div class="ttdeci">V8_INLINE DirectHandle&lt; T &gt; direct_handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="handles-inl_8h_source.html#l00141">handles-inl.h:141</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a611f0528d5415d4591ad6e8fe9513ac4"><div class="ttname"><a href="namespacev8_1_1internal.html#a611f0528d5415d4591ad6e8fe9513ac4">v8::internal::name</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in name</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l01983">flags.cc:1983</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a617d346a46eb703e1719792077e5c2a0"><div class="ttname"><a href="namespacev8_1_1internal.html#a617d346a46eb703e1719792077e5c2a0">v8::internal::GeneralizeConstness</a></div><div class="ttdeci">PropertyConstness GeneralizeConstness(PropertyConstness a, PropertyConstness b)</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00525">property-details.h:525</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a67a51b6314a9bc8a8c44c5fe14149e6c"><div class="ttname"><a href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">v8::internal::key</a></div><div class="ttdeci">int32_t key</div><div class="ttdef"><b>Definition</b> <a href="external-reference_8cc_source.html#l01345">external-reference.cc:1345</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a82b24872512218708764e7261b3e2a66"><div class="ttname"><a href="namespacev8_1_1internal.html#a82b24872512218708764e7261b3e2a66">v8::internal::IsClass</a></div><div class="ttdeci">bool IsClass(Tagged&lt; FieldType &gt; obj)</div><div class="ttdef"><b>Definition</b> <a href="field-type_8cc_source.html#l00047">field-type.cc:47</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a82beb9016b7ce7849ce0d3e1db9c9a6d"><div class="ttname"><a href="namespacev8_1_1internal.html#a82beb9016b7ce7849ce0d3e1db9c9a6d">v8::internal::instance_descriptors</a></div><div class="ttdeci">instance_descriptors</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00045">map-inl.h:45</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a9312a9fc987dba9376a530956f94e8fe"><div class="ttname"><a href="namespacev8_1_1internal.html#a9312a9fc987dba9376a530956f94e8fe">v8::internal::InstanceType</a></div><div class="ttdeci">InstanceType</div><div class="ttdef"><b>Definition</b> <a href="instance-type_8h_source.html#l00105">instance-type.h:105</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab9df0bf289155b5ae1d6da682adf1d6f"><div class="ttname"><a href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">v8::internal::handle</a></div><div class="ttdeci">V8_INLINE Handle&lt; T &gt; handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="handles-inl_8h_source.html#l00070">handles-inl.h:70</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abc98ef0ed4a2baf08e5c6e3e8146d1fa"><div class="ttname"><a href="namespacev8_1_1internal.html#abc98ef0ed4a2baf08e5c6e3e8146d1fa">v8::internal::IsGeneralizableTo</a></div><div class="ttdeci">bool IsGeneralizableTo(PropertyLocation a, PropertyLocation b)</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00515">property-details.h:515</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac1a33b5fd9af1653d346746cdb5c1ac0"><div class="ttname"><a href="namespacev8_1_1internal.html#ac1a33b5fd9af1653d346746cdb5c1ac0">v8::internal::value</a></div><div class="ttdeci">return value</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00870">map-inl.h:870</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac328869a355886739965287befcc49ac"><div class="ttname"><a href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49ac">v8::internal::PropertyConstness</a></div><div class="ttdeci">PropertyConstness</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00093">property-details.h:93</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac328869a355886739965287befcc49aca32567d9e5f2d66c9b326c45e800abcf6"><div class="ttname"><a href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49aca32567d9e5f2d66c9b326c45e800abcf6">v8::internal::PropertyConstness::kMutable</a></div><div class="ttdeci">@ kMutable</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac328869a355886739965287befcc49acad1efdc0f2aa096a47586b448aa73f414"><div class="ttname"><a href="namespacev8_1_1internal.html#ac328869a355886739965287befcc49acad1efdc0f2aa096a47586b448aa73f414">v8::internal::PropertyConstness::kConst</a></div><div class="ttdeci">@ kConst</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ac32ecba880a377a7f55cbaac76cdb604a9dd99cf48494ee0277563736ce16a91a"><div class="ttname"><a href="namespacev8_1_1internal.html#ac32ecba880a377a7f55cbaac76cdb604a9dd99cf48494ee0277563736ce16a91a">v8::internal::mu</a></div><div class="ttdeci">@ mu</div><div class="ttdef"><b>Definition</b> <a href="base-constants-riscv_8h_source.html#l00611">base-constants-riscv.h:611</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdba172e431975689d6370894506ab7f"><div class="ttname"><a href="namespacev8_1_1internal.html#acdba172e431975689d6370894506ab7f">v8::internal::IsTypedArrayOrRabGsabTypedArrayElementsKind</a></div><div class="ttdeci">bool IsTypedArrayOrRabGsabTypedArrayElementsKind(ElementsKind kind)</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00303">elements-kind.h:303</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ace7045d9fc96e0d36ce22ba112661a81"><div class="ttname"><a href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81">v8::internal::PropertyKind</a></div><div class="ttdeci">PropertyKind</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00085">property-details.h:85</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3"><div class="ttname"><a href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81a0ac87546e8b36fcb3034694d4d909ea3">v8::internal::PropertyKind::kData</a></div><div class="ttdeci">@ kData</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ace7045d9fc96e0d36ce22ba112661a81ade3eeabe61d50a3f84870ae3ca43f0ec"><div class="ttname"><a href="namespacev8_1_1internal.html#ace7045d9fc96e0d36ce22ba112661a81ade3eeabe61d50a3f84870ae3ca43f0ec">v8::internal::PropertyKind::kAccessor</a></div><div class="ttdeci">@ kAccessor</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adebc0402796327b823dd66cd2aad4c47"><div class="ttname"><a href="namespacev8_1_1internal.html#adebc0402796327b823dd66cd2aad4c47">v8::internal::IsTransitionableFastElementsKind</a></div><div class="ttdeci">bool IsTransitionableFastElementsKind(ElementsKind from_kind)</div><div class="ttdef"><b>Definition</b> <a href="elements-kind_8h_source.html#l00560">elements-kind.h:560</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae9b0a1942f337021ffd0954056894cc4"><div class="ttname"><a href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4">v8::internal::PropertyLocation</a></div><div class="ttdeci">PropertyLocation</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00089">property-details.h:89</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295"><div class="ttname"><a href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a454ab7e845efd9a5fa1826a1e9a69295">v8::internal::PropertyLocation::kDescriptor</a></div><div class="ttdeci">@ kDescriptor</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f"><div class="ttname"><a href="namespacev8_1_1internal.html#ae9b0a1942f337021ffd0954056894cc4a7be01c1ae587bb8938b2097146b0499f">v8::internal::PropertyLocation::kField</a></div><div class="ttdeci">@ kField</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aec984e37242506ca572e0222f9e307a6"><div class="ttname"><a href="namespacev8_1_1internal.html#aec984e37242506ca572e0222f9e307a6">v8::internal::IsConcurrent</a></div><div class="ttdeci">constexpr bool IsConcurrent(ConcurrencyMode mode)</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02524">globals.h:2524</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_af2d9fec01057be7bdab90bb4682717b0"><div class="ttname"><a href="namespacev8_1_1internal.html#af2d9fec01057be7bdab90bb4682717b0">v8::internal::prototype</a></div><div class="ttdeci">kInstanceDescriptorsOffset kTransitionsOrPrototypeInfoOffset prototype</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00062">map-inl.h:62</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff269dc9be2370cdca244d8f1f97237aac5a8bff008f8e182215fa48828c8cdb5"><div class="ttname"><a href="namespacev8_1_1internal.html#aff269dc9be2370cdca244d8f1f97237aac5a8bff008f8e182215fa48828c8cdb5">v8::internal::CLEAR_INOBJECT_PROPERTIES</a></div><div class="ttdeci">@ CLEAR_INOBJECT_PROPERTIES</div><div class="ttdef"><b>Definition</b> <a href="objects_8h_source.html#l00061">objects.h:61</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff82af2c2f7b200915e30bcfedca6f85"><div class="ttname"><a href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">v8::internal::Cast</a></div><div class="ttdeci">Tagged&lt; To &gt; Cast(Tagged&lt; From &gt; value, const v8::SourceLocation &amp;loc=INIT_SOURCE_LOCATION_IN_DEBUG)</div><div class="ttdef"><b>Definition</b> <a href="casting_8h_source.html#l00148">casting.h:148</a></div></div>
<div class="ttc" id="aobjects-inl_8h_html"><div class="ttname"><a href="objects-inl_8h.html">objects-inl.h</a></div></div>
<div class="ttc" id="aobjects_8h_html"><div class="ttname"><a href="objects_8h.html">objects.h</a></div></div>
<div class="ttc" id="aparked-scope-inl_8h_html"><div class="ttname"><a href="parked-scope-inl_8h.html">parked-scope-inl.h</a></div></div>
<div class="ttc" id="aproperty-details_8h_html"><div class="ttname"><a href="property-details_8h.html">property-details.h</a></div></div>
<div class="ttc" id="atransitions_8h_html"><div class="ttname"><a href="transitions_8h.html">transitions.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a7fa5847c07dc92c5227f8a150238560.html">objects</a></li><li class="navelem"><a class="el" href="map-updater_8cc.html">map-updater.cc</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
