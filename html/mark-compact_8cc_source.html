<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>v8: src/heap/mark-compact.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="v8.svg"/></td>
  <td id="projectalign">
   <div id="projectname">v8
   </div>
   <div id="projectbrief">V8 is Googleâ€™s open source high-performance JavaScript and WebAssembly engine, written in C++. It is used in Chrome and in Node.js, among others. It implements ECMAScript and WebAssembly, and runs on Windows, macOS, and Linux systems that use x64, IA-32, or ARM processors. V8 can be embedded into any C++ application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('mark-compact_8cc_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">mark-compact.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="mark-compact_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="mark-compact_8h.html">src/heap/mark-compact.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;unordered_set&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="bits_8h.html">src/base/bits.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="logging_8h.html">src/base/logging.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="mutex_8h.html">src/base/platform/mutex.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="base_2platform_2platform_8h.html">src/base/platform/platform.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="random-number-generator_8h.html">src/base/utils/random-number-generator.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="compilation-cache_8h.html">src/codegen/compilation-cache.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="assert-scope_8h.html">src/common/assert-scope.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="common_2globals_8h.html">src/common/globals.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="deoptimizer_8h.html">src/deoptimizer/deoptimizer.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="execution_8h.html">src/execution/execution.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="frames-inl_8h.html">src/execution/frames-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="isolate-utils-inl_8h.html">src/execution/isolate-utils-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="isolate-utils_8h.html">src/execution/isolate-utils.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="vm-state-inl_8h.html">src/execution/vm-state-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="flags_2flags_8h.html">src/flags/flags.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="global-handles_8h.html">src/handles/global-handles.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="array-buffer-sweeper_8h.html">src/heap/array-buffer-sweeper.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="basic-slot-set_8h.html">src/heap/base/basic-slot-set.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="concurrent-marking_8h.html">src/heap/concurrent-marking.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="ephemeron-remembered-set_8h.html">src/heap/ephemeron-remembered-set.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="evacuation-allocator-inl_8h.html">src/heap/evacuation-allocator-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="evacuation-verifier-inl_8h.html">src/heap/evacuation-verifier-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="gc-tracer-inl_8h.html">src/heap/gc-tracer-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="gc-tracer_8h.html">src/heap/gc-tracer.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="heap-layout-inl_8h.html">src/heap/heap-layout-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="heap-utils-inl_8h.html">src/heap/heap-utils-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="heap-visitor-inl_8h.html">src/heap/heap-visitor-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="heap_8h.html">src/heap/heap.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="incremental-marking-inl_8h.html">src/heap/incremental-marking-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="index-generator_8h.html">src/heap/index-generator.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="large-spaces_8h.html">src/heap/large-spaces.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="live-object-range-inl_8h.html">src/heap/live-object-range-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="mark-compact-inl_8h.html">src/heap/mark-compact-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="mark-sweep-utilities_8h.html">src/heap/mark-sweep-utilities.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="marking-barrier_8h.html">src/heap/marking-barrier.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="marking-inl_8h.html">src/heap/marking-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="marking-state-inl_8h.html">src/heap/marking-state-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="marking-visitor-inl_8h.html">src/heap/marking-visitor-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &quot;<a class="code" href="marking_8h.html">src/heap/marking.h</a>&quot;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#include &quot;<a class="code" href="memory-allocator_8h.html">src/heap/memory-allocator.h</a>&quot;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &quot;<a class="code" href="memory-chunk-layout_8h.html">src/heap/memory-chunk-layout.h</a>&quot;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#include &quot;<a class="code" href="memory-chunk-metadata_8h.html">src/heap/memory-chunk-metadata.h</a>&quot;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &quot;<a class="code" href="memory-measurement-inl_8h.html">src/heap/memory-measurement-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#include &quot;<a class="code" href="memory-measurement_8h.html">src/heap/memory-measurement.h</a>&quot;</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#include &quot;<a class="code" href="mutable-page-metadata_8h.html">src/heap/mutable-page-metadata.h</a>&quot;</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#include &quot;<a class="code" href="new-spaces_8h.html">src/heap/new-spaces.h</a>&quot;</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#include &quot;<a class="code" href="object-stats_8h.html">src/heap/object-stats.h</a>&quot;</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#include &quot;<a class="code" href="page-metadata-inl_8h.html">src/heap/page-metadata-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="preprocessor">#include &quot;<a class="code" href="page-metadata_8h.html">src/heap/page-metadata.h</a>&quot;</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">#include &quot;<a class="code" href="parallel-work-item_8h.html">src/heap/parallel-work-item.h</a>&quot;</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#include &quot;<a class="code" href="pretenuring-handler-inl_8h.html">src/heap/pretenuring-handler-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="preprocessor">#include &quot;<a class="code" href="pretenuring-handler_8h.html">src/heap/pretenuring-handler.h</a>&quot;</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="preprocessor">#include &quot;<a class="code" href="read-only-heap_8h.html">src/heap/read-only-heap.h</a>&quot;</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="preprocessor">#include &quot;<a class="code" href="read-only-spaces_8h.html">src/heap/read-only-spaces.h</a>&quot;</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="preprocessor">#include &quot;<a class="code" href="remembered-set_8h.html">src/heap/remembered-set.h</a>&quot;</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="preprocessor">#include &quot;<a class="code" href="safepoint_8h.html">src/heap/safepoint.h</a>&quot;</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="preprocessor">#include &quot;<a class="code" href="slot-set_8h.html">src/heap/slot-set.h</a>&quot;</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#include &quot;<a class="code" href="spaces-inl_8h.html">src/heap/spaces-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="preprocessor">#include &quot;<a class="code" href="sweeper_8h.html">src/heap/sweeper.h</a>&quot;</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="preprocessor">#include &quot;<a class="code" href="traced-handles-marking-visitor_8h.html">src/heap/traced-handles-marking-visitor.h</a>&quot;</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="preprocessor">#include &quot;<a class="code" href="weak-object-worklists_8h.html">src/heap/weak-object-worklists.h</a>&quot;</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="preprocessor">#include &quot;<a class="code" href="zapping_8h.html">src/heap/zapping.h</a>&quot;</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="preprocessor">#include &quot;<a class="code" href="v8_8h.html">src/init/v8.h</a>&quot;</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="preprocessor">#include &quot;<a class="code" href="tracing-flags_8h.html">src/logging/tracing-flags.h</a>&quot;</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#include &quot;<a class="code" href="embedder-data-array-inl_8h.html">src/objects/embedder-data-array-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="preprocessor">#include &quot;<a class="code" href="foreign_8h.html">src/objects/foreign.h</a>&quot;</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="preprocessor">#include &quot;<a class="code" href="hash-table-inl_8h.html">src/objects/hash-table-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#include &quot;<a class="code" href="heap-object-inl_8h.html">src/objects/heap-object-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="preprocessor">#include &quot;<a class="code" href="heap-object_8h.html">src/objects/heap-object.h</a>&quot;</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="preprocessor">#include &quot;<a class="code" href="instance-type_8h.html">src/objects/instance-type.h</a>&quot;</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="preprocessor">#include &quot;<a class="code" href="js-array-buffer-inl_8h.html">src/objects/js-array-buffer-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="preprocessor">#include &quot;<a class="code" href="js-objects-inl_8h.html">src/objects/js-objects-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="preprocessor">#include &quot;<a class="code" href="maybe-object_8h.html">src/objects/maybe-object.h</a>&quot;</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="preprocessor">#include &quot;<a class="code" href="objects_8h.html">src/objects/objects.h</a>&quot;</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="preprocessor">#include &quot;<a class="code" href="slots-inl_8h.html">src/objects/slots-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="preprocessor">#include &quot;<a class="code" href="smi_8h.html">src/objects/smi.h</a>&quot;</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="preprocessor">#include &quot;<a class="code" href="string-forwarding-table-inl_8h.html">src/objects/string-forwarding-table-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="preprocessor">#include &quot;<a class="code" href="transitions-inl_8h.html">src/objects/transitions-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="preprocessor">#include &quot;<a class="code" href="visitors_8h.html">src/objects/visitors.h</a>&quot;</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="preprocessor">#include &quot;<a class="code" href="indirect-pointer-tag_8h.html">src/sandbox/indirect-pointer-tag.h</a>&quot;</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="preprocessor">#include &quot;<a class="code" href="shared-heap-serializer_8h.html">src/snapshot/shared-heap-serializer.h</a>&quot;</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="preprocessor">#include &quot;<a class="code" href="cancelable-task_8h.html">src/tasks/cancelable-task.h</a>&quot;</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="preprocessor">#include &quot;<a class="code" href="tracing-category-observer_8h.html">src/tracing/tracing-category-observer.h</a>&quot;</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="preprocessor">#include &quot;<a class="code" href="utils-inl_8h.html">src/utils/utils-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="preprocessor">#ifdef V8_ENABLE_WEBASSEMBLY</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-code-pointer-table_8h.html">src/wasm/wasm-code-pointer-table.h</a>&quot;</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacev8.html">v8</a> {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="keyword">namespace </span><a class="code hl_variable" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment">// =============================================================================</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="comment">// Verifiers</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="comment">// =============================================================================</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="keyword">class </span>FullMarkingVerifier : <span class="keyword">public</span> MarkingVerifierBase {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  <span class="keyword">explicit</span> FullMarkingVerifier(Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>)</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      : MarkingVerifierBase(<a class="code hl_namespace" href="namespaceheap.html">heap</a>),</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        marking_state_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;non_atomic_marking_state()) {}</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  <span class="keywordtype">void</span> Run()<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    VerifyRoots();</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    VerifyMarking(heap_-&gt;new_space());</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    VerifyMarking(heap_-&gt;new_lo_space());</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    VerifyMarking(heap_-&gt;old_space());</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    VerifyMarking(heap_-&gt;code_space());</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordflow">if</span> (heap_-&gt;shared_space()) VerifyMarking(heap_-&gt;shared_space());</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    VerifyMarking(heap_-&gt;lo_space());</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    VerifyMarking(heap_-&gt;code_lo_space());</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">if</span> (heap_-&gt;shared_lo_space()) VerifyMarking(heap_-&gt;shared_lo_space());</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    VerifyMarking(heap_-&gt;trusted_space());</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    VerifyMarking(heap_-&gt;trusted_lo_space());</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  }</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> <span class="keyword">protected</span>:</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  <span class="keyword">const</span> MarkingBitmap* bitmap(<span class="keyword">const</span> MutablePageMetadata* chunk)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordflow">return</span> chunk-&gt;marking_bitmap();</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  <span class="keywordtype">bool</span> IsMarked(Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordflow">return</span> marking_state_-&gt;IsMarked(<span class="keywordtype">object</span>);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="keywordtype">void</span> VerifyMap(Tagged&lt;Map&gt; map)<span class="keyword"> override </span>{ VerifyHeapObjectImpl(map); }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keywordtype">void</span> VerifyPointers(ObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, ObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    VerifyPointersImpl(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  }</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <span class="keywordtype">void</span> VerifyPointers(MaybeObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, MaybeObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    VerifyPointersImpl(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  }</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <span class="keywordtype">void</span> VerifyCodePointer(InstructionStreamSlot slot)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    Tagged&lt;Object&gt; maybe_code = slot.load(code_cage_base());</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    Tagged&lt;HeapObject&gt; <a class="code hl_variable" href="code-reference_8cc.html#aeaf31c189d3b2a89ff45fedfceb87d9d">code</a>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="comment">// The slot might contain smi during Code creation, so skip it.</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordflow">if</span> (maybe_code.GetHeapObject(&amp;code)) {</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>      VerifyHeapObjectImpl(code);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    }</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  }</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  <span class="keywordtype">void</span> VerifyRootPointers(FullObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, FullObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    VerifyPointersImpl(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  <span class="keywordtype">void</span> VisitCodeTarget(Tagged&lt;InstructionStream&gt; host,</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>                       RelocInfo* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    Tagged&lt;InstructionStream&gt; target =</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        InstructionStream::FromTargetAddress(rinfo-&gt;target_address());</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    VerifyHeapObjectImpl(target);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>  <span class="keywordtype">void</span> VisitEmbeddedPointer(Tagged&lt;InstructionStream&gt; host,</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                            RelocInfo* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(RelocInfo::IsEmbeddedObjectMode(rinfo-&gt;rmode()));</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    Tagged&lt;HeapObject&gt; target_object = rinfo-&gt;target_object(cage_base());</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    Tagged&lt;Code&gt; code = UncheckedCast&lt;Code&gt;(host-&gt;raw_code(kAcquireLoad));</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keywordflow">if</span> (!code-&gt;IsWeakObject(target_object)) {</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>      VerifyHeapObjectImpl(target_object);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    }</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  V8_INLINE <span class="keywordtype">void</span> VerifyHeapObjectImpl(Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="keywordflow">if</span> (!ShouldVerifyObject(heap_object)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keywordflow">if</span> (heap_-&gt;MustBeInSharedOldSpace(heap_object)) {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>      <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(heap_-&gt;SharedHeapContains(heap_object));</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(HeapLayout::InReadOnlySpace(heap_object) ||</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>          (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.black_allocated_pages &amp;&amp;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>           HeapLayout::InBlackAllocatedPage(heap_object)) ||</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>          marking_state_-&gt;IsMarked(heap_object));</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  }</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  V8_INLINE <span class="keywordtype">bool</span> ShouldVerifyObject(Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> in_shared_heap = HeapLayout::InWritableSharedSpace(heap_object);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <span class="keywordflow">return</span> heap_-&gt;isolate()-&gt;is_shared_space_isolate() ? <a class="code hl_variable" href="flag-definitions_8h.html#a4809e2dc7c4059bfe40ea11cda69d8f7">true</a> : !in_shared_heap;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  }</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  V8_INLINE <span class="keywordtype">void</span> VerifyPointersImpl(TSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, TSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    PtrComprCageBase cage_base =</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#a1f7ce33330ccea2a9fa5ed04a6705fed">GetPtrComprCageBaseFromOnHeapAddress</a>(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>.address());</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <span class="keywordflow">for</span> (TSlot slot = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; slot &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++slot) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>      <span class="keyword">typename</span> TSlot::TObject <span class="keywordtype">object</span> = slot.load(cage_base);</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="preprocessor">#ifdef V8_ENABLE_DIRECT_HANDLE</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>      <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.ptr() == kTaggedNullAddress) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>      Tagged&lt;HeapObject&gt; heap_object;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>      <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.GetHeapObjectIfStrong(&amp;heap_object)) {</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        VerifyHeapObjectImpl(heap_object);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>      }</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  NonAtomicMarkingState* <span class="keyword">const</span> marking_state_;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>};</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment">// ==================================================================</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="comment">// MarkCompactCollector</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="comment">// ==================================================================</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span><span class="keywordtype">int</span> NumberOfAvailableCores() {</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  <span class="keyword">static</span> <span class="keywordtype">int</span> num_cores = <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;NumberOfWorkerThreads() + 1;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  <span class="comment">// This number of cores should be greater than zero and never change.</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(num_cores, 1);</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(num_cores, <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;NumberOfWorkerThreads() + 1);</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  <span class="keywordflow">return</span> num_cores;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>}</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span><span class="keywordtype">int</span> NumberOfParallelCompactionTasks(Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>) {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  <span class="keywordtype">int</span> tasks = <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_compaction ? NumberOfAvailableCores() : 1;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <span class="keywordflow">if</span> (!<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;CanPromoteYoungAndExpandOldGeneration(</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>          <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(tasks * <a class="code hl_variable" href="classv8_1_1internal_1_1MutablePageMetadata.html#a8ca68362b7531b2ab93a045cdcedfdde">PageMetadata::kPageSize</a>))) {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="comment">// Optimize for memory usage near the heap limit.</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    tasks = 1;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>  }</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  <span class="keywordflow">return</span> tasks;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>}</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="comment">// This visitor is used for marking on the main thread. It is cheaper than</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span><span class="comment">// the concurrent marking visitor because it does not snapshot JSObjects.</span></div>
<div class="foldopen" id="foldopen00252" data-start="{" data-end="};">
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MainMarkingVisitor.html">  252</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MainMarkingVisitor.html">MainMarkingVisitor</a> final</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1FullMarkingVisitorBase.html">FullMarkingVisitorBase</a>&lt;MainMarkingVisitor&gt; {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00255" data-start="{" data-end="}">
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MainMarkingVisitor.html#ad945b37c8e372cb371cb6bf74b10fcd4">  255</a></span>  <a class="code hl_function" href="classv8_1_1internal_1_1MainMarkingVisitor.html#ad945b37c8e372cb371cb6bf74b10fcd4">MainMarkingVisitor</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MarkingWorklists_1_1Local.html">MarkingWorklists::Local</a>* local_marking_worklists,</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                     <a class="code hl_class" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html">WeakObjects::Local</a>* local_weak_objects, <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>,</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                     <span class="keywordtype">unsigned</span> mark_compact_epoch,</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                     <a class="code hl_class" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CodeFlushMode&gt;</a> code_flush_mode,</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                     <span class="keywordtype">bool</span> should_keep_ages_unchanged,</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                     uint16_t code_flushing_increase)</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1FullMarkingVisitorBase.html">FullMarkingVisitorBase</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1MainMarkingVisitor.html">MainMarkingVisitor</a>&gt;(</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            local_marking_worklists, local_weak_objects, <a class="code hl_namespace" href="namespaceheap.html">heap</a>,</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            mark_compact_epoch, code_flush_mode, should_keep_ages_unchanged,</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            code_flushing_increase) {}</div>
</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="comment">// Functions required by MarkingVisitorBase.</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  <span class="keywordtype">void</span> RecordSlot(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, TSlot slot,</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> target) {</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaa454d3e055439b880fa812044153ec1">MarkCompactCollector::RecordSlot</a>(<span class="keywordtype">object</span>, slot, target);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  }</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MainMarkingVisitor.html#a2d76bb0a9a987182426dae7babc202fd">  275</a></span>  <span class="keywordtype">void</span> RecordRelocSlot(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo,</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                       <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> target) {</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae4455c0b37942d5616bb57730157eb6a">MarkCompactCollector::RecordRelocSlot</a>(host, rinfo, target);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>  }</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MarkingVisitorBase.html">MarkingVisitorBase</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1MainMarkingVisitor.html">MainMarkingVisitor</a>&gt;;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>};</div>
</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="foldopen" id="foldopen00283" data-start="{" data-end="}">
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#af7e1a054489f11045c46e33fd3c17c97">  283</a></span><a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#af7e1a054489f11045c46e33fd3c17c97">MarkCompactCollector::MarkCompactCollector</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>)</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>),</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>#ifdef DEBUG</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>      state_(IDLE),</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>#endif</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>      uses_shared_heap_(heap_-&gt;isolate()-&gt;has_shared_space()),</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>      is_shared_space_isolate_(heap_-&gt;isolate()-&gt;is_shared_space_isolate()),</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>      marking_state_(heap_-&gt;marking_state()),</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>      non_atomic_marking_state_(heap_-&gt;non_atomic_marking_state()),</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>      sweeper_(heap_-&gt;sweeper()) {</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>}</div>
</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span><a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a62f2fdb072e51e33c943ff1835035d9a">MarkCompactCollector::~MarkCompactCollector</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span> </div>
<div class="foldopen" id="foldopen00297" data-start="{" data-end="}">
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac79654a97e006616402d89dcec98eac7">  297</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac79654a97e006616402d89dcec98eac7">MarkCompactCollector::TearDown</a>() {</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">incremental_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1IncrementalMarking.html#af7648dd98be368a6b882111f2c62441c">IsMajorMarking</a>()) {</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    local_marking_worklists_-&gt;Publish();</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    heap_-&gt;main_thread_local_heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1LocalHeap.html#a931c2069795353f7ef7117bd5b59300c">marking_barrier</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkingBarrier.html#a2d768331ca216e2dc7f88961d5f1f5fc">PublishIfNeeded</a>();</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="comment">// Marking barriers of LocalHeaps will be published in their destructors.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    marking_worklists_.<a class="code hl_function" href="classv8_1_1internal_1_1MarkingWorklists.html#a89010874238d7f05fc609afa7119ef40">Clear</a>();</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7ab138ed5a95ccf06c7fca13f7753757">weak_objects</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects.html#a0557b5c72151038a6d73b9d5aa6804eb">Clear</a>();</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  }</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>}</div>
</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="foldopen" id="foldopen00308" data-start="{" data-end="}">
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">  308</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">MarkCompactCollector::AddEvacuationCandidate</a>(<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* p) {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!p-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunkMetadata.html#ad4856058dd8937baa2afd52c5f36d9b1">Chunk</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a72bc65caf0c47dc3a85f4535359b8ac1">NeverEvacuate</a>());</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!p-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunkMetadata.html#ad4856058dd8937baa2afd52c5f36d9b1">Chunk</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">MemoryChunk::BLACK_ALLOCATED</a>));</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_evacuation_candidates) {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <span class="stringliteral">&quot;Evacuation candidate: Free bytes: %6zu. Free Lists length: %4d.\n&quot;</span>,</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        p-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunkMetadata.html#acd8dfb2e8657abe513a212fea3bf4683">area_size</a>() - p-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunkMetadata.html#a9fc112c5748d8edf2b68bd19ab082519">allocated_bytes</a>(), p-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#afef91880298e04ebdb19a05ee7fd0b58">ComputeFreeListsLength</a>());</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  p-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1PageMetadata.html#a1b6da13a34e2984a618db74bda54dd3a">MarkEvacuationCandidate</a>();</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>  evacuation_candidates_.push_back(p);</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>}</div>
</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="keyword">static</span> <span class="keywordtype">void</span> TraceFragmentation(<a class="code hl_class" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a>* space) {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>  <span class="keywordtype">int</span> number_of_pages = space-&gt;CountTotalPages();</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>  intptr_t reserved = (number_of_pages * space-&gt;AreaSize());</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>  intptr_t free = reserved - space-&gt;SizeOfObjects();</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;[%s]: %d pages, %d (%.1f%%) free\n&quot;</span>, <a class="code hl_function" href="namespacev8_1_1internal.html#a10b1a1807774d2d287797132732f0d9a">ToString</a>(space-&gt;identity()),</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>         number_of_pages, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(free),</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>         <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(free) * 100 / reserved);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>}</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="foldopen" id="foldopen00332" data-start="{" data-end="}">
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7e6a8160a88f451d394d7135403f3ae">  332</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7e6a8160a88f451d394d7135403f3ae">MarkCompactCollector::StartCompaction</a>(<a class="code hl_enumeration" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897">StartCompactionMode</a> mode) {</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!compacting_);</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(evacuation_candidates_.empty());</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>  <span class="comment">// Bailouts for completely disabled compaction.</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact ||</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>      (mode == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">StartCompactionMode::kAtomic</a> &amp;&amp; heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() &amp;&amp;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>       !<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_with_stack) ||</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>      (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_experiment_less_compaction &amp;&amp;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>       !heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>()) ||</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>      heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a10fb79c24c416de942fc05b82680b440">serializer_enabled</a>()) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>  }</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5d71078a2feb52de929d9af219dda38e">old_space</a>());</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>  <span class="comment">// Don&#39;t compact shared space when CSS is enabled, since there may be</span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>  <span class="comment">// DirectHandles on stacks of client isolates.</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.conservative_stack_scanning &amp;&amp; heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a2a1fb2232941770fa521ed659ebe7e52">shared_space</a>()) {</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a2a1fb2232941770fa521ed659ebe7e52">shared_space</a>());</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>  }</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a70a182be5a70ea73eb023a5226174a4e">trusted_space</a>());</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>  <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a939fb55411a48a11cd43f3de55ef5ff3">AllowsCodeCompaction</a>() &amp;&amp;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>      (!heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() || <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_code_space_with_stack)) {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">CollectEvacuationCandidates</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ab28602f29288785c81dc2ccfb7669b86">code_space</a>());</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_fragmentation) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    TraceFragmentation(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ab28602f29288785c81dc2ccfb7669b86">code_space</a>());</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>  }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> </div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>  compacting_ = !evacuation_candidates_.empty();</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>  <span class="keywordflow">return</span> compacting_;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>}</div>
</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span><span class="comment">// Helper function to get the bytecode flushing mode based on the flags. This</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span><span class="comment">// is required because it is not safe to access flags in concurrent marker.</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><a class="code hl_class" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CodeFlushMode&gt;</a> GetCodeFlushMode(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate) {</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <span class="keywordflow">if</span> (isolate-&gt;disable_bytecode_flushing()) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CodeFlushMode&gt;</a>();</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>  }</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>  <a class="code hl_class" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;CodeFlushMode&gt;</a> code_flush_mode;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_bytecode) {</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    code_flush_mode.<a class="code hl_function" href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">Add</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925ba8c3051baaa6427f61402f9f207469b77">CodeFlushMode::kFlushBytecode</a>);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>  }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code) {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    code_flush_mode.<a class="code hl_function" href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">Add</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925ba023a5e1ba319d0465005e0fd207f3f50">CodeFlushMode::kFlushBaselineCode</a>);</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  }</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span> </div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_flush_code) {</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="comment">// This is to check tests accidentally don&#39;t miss out on adding either flush</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="comment">// bytecode or flush code along with stress flush code. stress_flush_code</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="comment">// doesn&#39;t do anything if either one of them isn&#39;t enabled.</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.fuzzing || <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code ||</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>           <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_bytecode);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    code_flush_mode.<a class="code hl_function" href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">Add</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925ba1a66752596dbc2ca40adda96f4275aa5">CodeFlushMode::kStressFlushCode</a>);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>  }</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>  <span class="keywordflow">return</span> code_flush_mode;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>}</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span> </div>
<div class="foldopen" id="foldopen00399" data-start="{" data-end="}">
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a31a1ac4e13f578ddd0947d9ad58af5e1">  399</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a31a1ac4e13f578ddd0947d9ad58af5e1">MarkCompactCollector::StartMarking</a>() {</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  <span class="comment">// The state for background thread is saved here and maintained for the whole</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>  <span class="comment">// GC cycle. Both CppHeap and regular V8 heap will refer to this flag.</span></div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>  use_background_threads_in_cycle_ = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ac434b6b237146b5964c6b76d7a8ad2c6">ShouldUseBackgroundThreads</a>();</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">heap</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ac689c784f01c1729d13aeb4dc389c398">Unmark</a>();</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>  }</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span><span class="preprocessor">#ifdef V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  heap_-&gt;young_external_pointer_space()-&gt;StartCompactingIfNeeded();</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>  heap_-&gt;old_external_pointer_space()-&gt;StartCompactingIfNeeded();</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  heap_-&gt;cpp_heap_pointer_space()-&gt;StartCompactingIfNeeded();</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span><span class="preprocessor">#endif  </span><span class="comment">// V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>  <span class="comment">// CppHeap&#39;s marker must be initialized before the V8 marker to allow</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>  <span class="comment">// exchanging of worklists.</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>  <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#add922c9ad5face7a8949d93c0e783c91">cpp_heap</a>()) {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">heap</a>()-&gt;tracer(), GCTracer::Scope::MC_MARK_EMBEDDER_PROLOGUE);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#add922c9ad5face7a8949d93c0e783c91">cpp_heap</a>())</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        -&gt;<a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#ac7034aca4b644909e7565f0beb372974">InitializeMarking</a>(CppHeap::CollectionType::kMajor);</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>  }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>  std::vector&lt;Address&gt; contexts =</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>      heap_-&gt;memory_measurement()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryMeasurement.html#a061d53ab3d6b57b6a76398a07172fdc0">StartProcessing</a>();</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_per_context_marking_worklist) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    contexts.clear();</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">HandleScope</a> handle_scope(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a> : heap_-&gt;FindAllNativeContexts()) {</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>      contexts.push_back(<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>-&gt;ptr());</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>  }</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>  heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1GCTracer.html#a9f2350f20960172b968c227996c3974d">NotifyMarkingStart</a>();</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>  code_flush_mode_ = GetCodeFlushMode(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>());</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>  marking_worklists_.<a class="code hl_function" href="classv8_1_1internal_1_1MarkingWorklists.html#a03bdf39a61570cea166a4c86c4dc404a">CreateContextWorklists</a>(contexts);</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>  <span class="keyword">auto</span>* cpp_heap = <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;cpp_heap_);</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>  local_marking_worklists_ = std::make_unique&lt;MarkingWorklists::Local&gt;(</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>      &amp;marking_worklists_,</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>      cpp_heap ? cpp_heap-&gt;CreateCppMarkingStateForMutatorThread()</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>               : <a class="code hl_variable" href="classv8_1_1internal_1_1MarkingWorklists_1_1Local.html#a9129871cbe80dbd2ea3c602d9fb016f6">MarkingWorklists::Local::kNoCppMarkingState</a>);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  local_weak_objects_ = std::make_unique&lt;WeakObjects::Local&gt;(<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a7ab138ed5a95ccf06c7fca13f7753757">weak_objects</a>());</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>  marking_visitor_ = std::make_unique&lt;MainMarkingVisitor&gt;(</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>      local_marking_worklists_.get(), local_weak_objects_.get(), heap_, <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab77b1f17c1aaf49a93ba2e394fd11984">epoch</a>(),</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#affd8ddf2770f072ffe30196279ab62e1">code_flush_mode</a>(), heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a4b0a6b7b8b7d6daeff5de689c9008cbf">ShouldCurrentGCKeepAgesUnchanged</a>(),</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>      heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1GCTracer.html#a52bba12f494cafdfa348e34457698eaf">CodeFlushingIncrease</a>());</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>  <span class="comment">// This method evicts SFIs with flushed bytecode from the cache before</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>  <span class="comment">// iterating the compilation cache as part of the root set. SFIs that get</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  <span class="comment">// flushed in this GC cycle will get evicted out of the cache in the next GC</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  <span class="comment">// cycle. The SFI will remain in the cache until then and may remain in the</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>  <span class="comment">// cache even longer in case the SFI is re-compiled.</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>  heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a273ae6a43c89de8e7be45e1e702c08c3">compilation_cache</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1CompilationCache.html#a6c6f1bec5e0eeb46801ff0f051fd381a">MarkCompactPrologue</a>();</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>  <span class="comment">// Marking bits are cleared by the sweeper or unmarker (if sticky mark-bits</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>  <span class="comment">// are enabled).</span></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span><span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    VerifyMarkbitsAreClean();</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>  }</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span><span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>}</div>
</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span> </div>
<div class="foldopen" id="foldopen00459" data-start="{" data-end="}">
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a927eebc2a596cab74de9a052a849d0ea">  459</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a927eebc2a596cab74de9a052a849d0ea">MarkCompactCollector::MaybeEnableBackgroundThreadsInCycle</a>(</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <a class="code hl_enumeration" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fb">CallOrigin</a> origin) {</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.concurrent_marking &amp;&amp; !use_background_threads_in_cycle_) {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    <span class="comment">// With --parallel_pause_for_gc_in_background we force background threads in</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="comment">// the atomic pause.</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> force_background_threads =</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_pause_for_gc_in_background &amp;&amp;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        origin == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">CallOrigin::kAtomicGC</a>;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    use_background_threads_in_cycle_ =</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        force_background_threads || <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">heap</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ac434b6b237146b5964c6b76d7a8ad2c6">ShouldUseBackgroundThreads</a>();</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="keywordflow">if</span> (use_background_threads_in_cycle_) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>      heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">RescheduleJobIfNeeded</a>(</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>          <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>);</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>      <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;cpp_heap_)) {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        cpp_heap-&gt;ReEnableConcurrentMarking();</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>      }</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    }</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>}</div>
</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span> </div>
<div class="foldopen" id="foldopen00481" data-start="{" data-end="}">
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a82db441b928fc8abc959d3d4c7c18906">  481</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a82db441b928fc8abc959d3d4c7c18906">MarkCompactCollector::CollectGarbage</a>() {</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>  <span class="comment">// Make sure that Prepare() has been called. The individual steps below will</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>  <span class="comment">// update the state as they proceed.</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(state_ == PREPARE_GC);</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a927eebc2a596cab74de9a052a849d0ea">MaybeEnableBackgroundThreadsInCycle</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">CallOrigin::kAtomicGC</a>);</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>  MarkLiveObjects();</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>  <span class="comment">// This will walk dead object graphs and so requires that all references are</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>  <span class="comment">// still intact.</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>  RecordObjectStats();</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>  ClearNonLiveReferences();</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a17e6e45984b6757652c6611c22c17cff">VerifyMarking</a>();</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span> </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;cpp_heap_)) {</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    cpp_heap-&gt;FinishMarkingAndProcessWeakness();</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>  }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>  heap_-&gt;memory_measurement()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryMeasurement.html#a2b16af443017f8c53573e169987d6d93">FinishProcessing</a>(native_context_stats_);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>  Sweep();</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>  Evacuate();</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>  Finish();</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>}</div>
</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span> </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span><span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span><span class="keywordtype">void</span> MarkCompactCollector::VerifyMarkbitsAreClean(<a class="code hl_class" href="classv8_1_1internal_1_1PagedSpaceBase.html">PagedSpaceBase</a>* space) {</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* p : *space) {</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(p-&gt;marking_bitmap()-&gt;IsClean());</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(0, p-&gt;live_bytes());</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>  }</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>}</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span> </div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><span class="keywordtype">void</span> MarkCompactCollector::VerifyMarkbitsAreClean(NewSpace* space) {</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>  <span class="keywordflow">if</span> (!space) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    VerifyMarkbitsAreClean(<a class="code hl_function" href="classv8_1_1internal_1_1PagedNewSpace.html#a22fec8cda357e12676115a12ecab7917">PagedNewSpace::From</a>(space)-&gt;paged_space());</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>  }</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>  <span class="keywordflow">for</span> (PageMetadata* p : *space) {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(p-&gt;marking_bitmap()-&gt;IsClean());</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(0, p-&gt;live_bytes());</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>  }</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>}</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span> </div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span><span class="keywordtype">void</span> MarkCompactCollector::VerifyMarkbitsAreClean(LargeObjectSpace* space) {</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>  <span class="keywordflow">if</span> (!space) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>  LargeObjectSpaceObjectIterator it(space);</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>  <span class="keywordflow">for</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> obj = it.Next(); !obj.is_null(); obj = it.Next()) {</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(non_atomic_marking_state_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">IsUnmarked</a>(obj));</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(0, <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">MutablePageMetadata::FromHeapObject</a>(obj)-&gt;live_bytes());</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>  }</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>}</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span> </div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span><span class="keywordtype">void</span> MarkCompactCollector::VerifyMarkbitsAreClean() {</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5d71078a2feb52de929d9af219dda38e">old_space</a>());</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ab28602f29288785c81dc2ccfb7669b86">code_space</a>());</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">new_space</a>());</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a30ff2252b7699b1d5bbdf5a69eb551b9">lo_space</a>());</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a9ccabcd8f0f06c43ed0d24bd66c9c8c8">code_lo_space</a>());</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3260de195711edf447ce37a2e67fe6ec">new_lo_space</a>());</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a70a182be5a70ea73eb023a5226174a4e">trusted_space</a>());</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>  VerifyMarkbitsAreClean(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#aa377c3a995f21d5bbcd1fffdc40758f9">trusted_lo_space</a>());</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>}</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span><span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span> </div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span><span class="keywordtype">void</span> MarkCompactCollector::ComputeEvacuationHeuristics(</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <span class="keywordtype">size_t</span> area_size, <span class="keywordtype">int</span>* target_fragmentation_percent,</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keywordtype">size_t</span>* max_evacuated_bytes) {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  <span class="comment">// For memory reducing and optimize for memory mode we directly define both</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>  <span class="comment">// constants.</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> kTargetFragmentationPercentForReduceMemory = 20;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxEvacuatedBytesForReduceMemory = 12 * <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>;</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> kTargetFragmentationPercentForOptimizeMemory = 20;</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxEvacuatedBytesForOptimizeMemory = 6 * <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>  <span class="comment">// For regular mode (which is latency critical) we define less aggressive</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>  <span class="comment">// defaults to start and switch to a trace-based (using compaction speed)</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>  <span class="comment">// approach as soon as we have enough samples.</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> kTargetFragmentationPercent = 70;</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxEvacuatedBytes = 4 * <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>;</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>  <span class="comment">// Time to take for a single area (=payload of page). Used as soon as there</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>  <span class="comment">// exist enough compaction speed samples.</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>  <span class="keyword">const</span> <span class="keywordtype">float</span> kTargetMsPerArea = .5;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span> </div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>  <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>()) {</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    *target_fragmentation_percent = kTargetFragmentationPercentForReduceMemory;</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    *max_evacuated_bytes = kMaxEvacuatedBytesForReduceMemory;</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ad2128865e219ddb70695e23563141da9">ShouldOptimizeForMemoryUsage</a>()) {</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    *target_fragmentation_percent =</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        kTargetFragmentationPercentForOptimizeMemory;</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    *max_evacuated_bytes = kMaxEvacuatedBytesForOptimizeMemory;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="keyword">const</span> std::optional&lt;double&gt; estimated_compaction_speed =</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1GCTracer.html#ad7d2f16e123b5303b24858b22ddde30f">CompactionSpeedInBytesPerMillisecond</a>();</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <span class="keywordflow">if</span> (estimated_compaction_speed.has_value()) {</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>      <span class="comment">// Estimate the target fragmentation based on traced compaction speed</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>      <span class="comment">// and a goal for a single page.</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> estimated_ms_per_area =</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>          1 + area_size / *estimated_compaction_speed;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>      *target_fragmentation_percent = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>          100 - 100 * kTargetMsPerArea / estimated_ms_per_area);</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>      <span class="keywordflow">if</span> (*target_fragmentation_percent &lt;</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>          kTargetFragmentationPercentForReduceMemory) {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>        *target_fragmentation_percent =</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>            kTargetFragmentationPercentForReduceMemory;</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>      }</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>      *target_fragmentation_percent = kTargetFragmentationPercent;</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    *max_evacuated_bytes = kMaxEvacuatedBytes;</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>  }</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>}</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="foldopen" id="foldopen00597" data-start="{" data-end="}">
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">  597</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">MarkCompactCollector::CollectEvacuationCandidates</a>(<a class="code hl_class" href="classv8_1_1internal_1_1PagedSpace.html">PagedSpace</a>* space) {</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(space-&gt;identity() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a> || space-&gt;identity() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">CODE_SPACE</a> ||</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>         space-&gt;identity() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8">SHARED_SPACE</a> ||</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>         space-&gt;identity() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b">TRUSTED_SPACE</a>);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <span class="keywordtype">int</span> number_of_pages = space-&gt;CountTotalPages();</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>  <span class="keywordtype">size_t</span> area_size = space-&gt;AreaSize();</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span> </div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> in_standard_path =</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>      !(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.manual_evacuation_candidates_selection ||</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction_random || <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction ||</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_on_every_full_gc);</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  <span class="comment">// Those variables will only be initialized if |in_standard_path|, and are not</span></div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>  <span class="comment">// used otherwise.</span></div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>  <span class="keywordtype">size_t</span> max_evacuated_bytes;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>  <span class="keywordtype">int</span> target_fragmentation_percent;</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>  <span class="keywordtype">size_t</span> free_bytes_threshold;</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>  <span class="keywordflow">if</span> (in_standard_path) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <span class="comment">// We use two conditions to decide whether a page qualifies as an evacuation</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="comment">// candidate, or not:</span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="comment">// * Target fragmentation: How fragmented is a page, i.e., how is the ratio</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="comment">//   between live bytes and capacity of this page (= area).</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="comment">// * Evacuation quota: A global quota determining how much bytes should be</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <span class="comment">//   compacted.</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    ComputeEvacuationHeuristics(area_size, &amp;target_fragmentation_percent,</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>                                &amp;max_evacuated_bytes);</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    free_bytes_threshold = target_fragmentation_percent * (area_size / 100);</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>  }</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span> </div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>  <span class="comment">// Pairs of (live_bytes_in_page, page).</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>  <span class="keyword">using </span>LiveBytesPagePair = std::pair&lt;size_t, PageMetadata*&gt;;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>  std::vector&lt;LiveBytesPagePair&gt; pages;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>  pages.reserve(number_of_pages);</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!sweeper_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">sweeping_in_progress</a>());</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* p : *space) {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* chunk = p-&gt;Chunk();</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <span class="keywordflow">if</span> (chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a72bc65caf0c47dc3a85f4535359b8ac1">NeverEvacuate</a>() || !chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#ac6f69e1c360286fb6d0112508969cc39">CanAllocate</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span> </div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="keywordflow">if</span> (chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a59bec6e443b8360a946b8285aee9d887">IsPinned</a>()) {</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>          <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a>));</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>    }</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <span class="comment">// Invariant: Evacuation candidates are just created when marking is</span></div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="comment">// started. This means that sweeping has finished. Furthermore, at the end</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="comment">// of a GC all evacuation candidates are cleared and their slot buffers are</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <span class="comment">// released.</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a31917793e4e1f003c57c07b8dd2422fa">IsEvacuationCandidate</a>());</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <a class="code hl_define" href="logging_8h.html#a7bf1ad59490562f507223cd6ca2cc6fa">CHECK_NULL</a>(p-&gt;slot_set&lt;<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7">OLD_TO_OLD</a>&gt;());</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <a class="code hl_define" href="logging_8h.html#a7bf1ad59490562f507223cd6ca2cc6fa">CHECK_NULL</a>(p-&gt;typed_slot_set&lt;<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7">OLD_TO_OLD</a>&gt;());</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(p-&gt;area_size() == area_size);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <span class="keywordflow">if</span> (in_standard_path) {</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>      <span class="comment">// Only the pages with at more than |free_bytes_threshold| free bytes are</span></div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>      <span class="comment">// considered for evacuation.</span></div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>      <span class="keywordflow">if</span> (area_size - p-&gt;allocated_bytes() &gt;= free_bytes_threshold) {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>        pages.push_back(std::make_pair(p-&gt;allocated_bytes(), p));</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>      }</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>      pages.push_back(std::make_pair(p-&gt;allocated_bytes(), p));</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    }</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>  }</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>  <span class="keywordtype">int</span> candidate_count = 0;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>  <span class="keywordtype">size_t</span> total_live_bytes = 0;</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> reduce_memory = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>();</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.manual_evacuation_candidates_selection) {</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; pages.<a class="code hl_class" href="classsize.html">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>      <a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* p = pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].second;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>      <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* chunk = p-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunkMetadata.html#ad4856058dd8937baa2afd52c5f36d9b1">Chunk</a>();</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>      <span class="keywordflow">if</span> (chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>              <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a>)) {</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>        candidate_count++;</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        total_live_bytes += pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].first;</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a0398fad4cb6436a18dc1599b206c3b87">ClearFlagSlow</a>(</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>            <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a>);</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(p);</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>      }</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    }</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction_random) {</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="keywordtype">double</span> fraction = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">fuzzer_rng</a>()-&gt;<a class="code hl_function" href="classv8_1_1base_1_1RandomNumberGenerator.html#a3cb661fd70f4322d36792f98acd6ca7e">NextDouble</a>();</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="keywordtype">size_t</span> pages_to_mark_count =</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(fraction * (pages.size() + 1));</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <span class="keywordflow">for</span> (uint64_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">fuzzer_rng</a>()-&gt;<a class="code hl_function" href="classv8_1_1base_1_1RandomNumberGenerator.html#a4090ec844e0f1cc4150db68cf69c6c7d">NextSample</a>(</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>             pages.size(), pages_to_mark_count)) {</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>      candidate_count++;</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>      total_live_bytes += pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].first;</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].<a class="code hl_variable" href="js-temporal-objects_8cc.html#a0667ab99c341e3655dd57d35e516c02b">second</a>);</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    }</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction) {</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; pages.<a class="code hl_class" href="classsize.html">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>      <a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* p = pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].second;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>      <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> % 2 == 0) {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        candidate_count++;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>        total_live_bytes += pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].first;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>        <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(p);</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>      }</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    }</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <span class="comment">// The following approach determines the pages that should be evacuated.</span></div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    <span class="comment">// Sort pages from the most free to the least free, then select</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    <span class="comment">// the first n pages for evacuation such that:</span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    <span class="comment">// - the total size of evacuated objects does not exceed the specified</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    <span class="comment">// limit.</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    <span class="comment">// - fragmentation of (n+1)-th page does not exceed the specified limit.</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    std::sort(pages.begin(), pages.end(),</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>              [](<span class="keyword">const</span> LiveBytesPagePair&amp; a, <span class="keyword">const</span> LiveBytesPagePair&amp; b) {</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>                return a.first &lt; b.first;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>              });</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; pages.<a class="code hl_class" href="classsize.html">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>      <span class="keywordtype">size_t</span> live_bytes = pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].first;</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>      <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(area_size, live_bytes);</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_on_every_full_gc ||</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>          ((total_live_bytes + live_bytes) &lt;= max_evacuated_bytes)) {</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>        candidate_count++;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        total_live_bytes += live_bytes;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>      }</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_fragmentation_verbose) {</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>                     <span class="stringliteral">&quot;compaction-selection-page: space=%s free_bytes_page=%zu &quot;</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>                     <span class="stringliteral">&quot;fragmentation_limit_kb=%zu &quot;</span></div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>                     <span class="stringliteral">&quot;fragmentation_limit_percent=%d sum_compaction_kb=%zu &quot;</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>                     <span class="stringliteral">&quot;compaction_limit_kb=%zu\n&quot;</span>,</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>                     <a class="code hl_function" href="namespacev8_1_1internal.html#a10b1a1807774d2d287797132732f0d9a">ToString</a>(space-&gt;identity()), (area_size - live_bytes) / KB,</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>                     free_bytes_threshold / KB, target_fragmentation_percent,</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                     total_live_bytes / KB, max_evacuated_bytes / KB);</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>      }</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    }</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="comment">// How many pages we will allocated for the evacuated objects</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <span class="comment">// in the worst case: ceil(total_live_bytes / area_size)</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    <span class="keywordtype">int</span> estimated_new_pages =</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>((total_live_bytes + area_size - 1) / area_size);</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(estimated_new_pages, candidate_count);</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <span class="keywordtype">int</span> estimated_released_pages = candidate_count - estimated_new_pages;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>    <span class="comment">// Avoid (compact -&gt; expand) cycles.</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    <span class="keywordflow">if</span> ((estimated_released_pages == 0) &amp;&amp; !<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_on_every_full_gc) {</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>      candidate_count = 0;</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    }</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; candidate_count; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">AddEvacuationCandidate</a>(pages[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].<a class="code hl_variable" href="js-temporal-objects_8cc.html#a0667ab99c341e3655dd57d35e516c02b">second</a>);</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    }</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>  }</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span> </div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_fragmentation) {</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(),</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>                 <span class="stringliteral">&quot;compaction-selection: space=%s reduce_memory=%d pages=%d &quot;</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>                 <span class="stringliteral">&quot;total_live_bytes=%zu\n&quot;</span>,</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                 <a class="code hl_function" href="namespacev8_1_1internal.html#a10b1a1807774d2d287797132732f0d9a">ToString</a>(space-&gt;identity()), reduce_memory, candidate_count,</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                 total_live_bytes / KB);</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>  }</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>}</div>
</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="foldopen" id="foldopen00753" data-start="{" data-end="}">
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a88bb504c9d7b76a16ab2f067e907574c">  753</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a88bb504c9d7b76a16ab2f067e907574c">MarkCompactCollector::Prepare</a>() {</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(state_ == IDLE);</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>  state_ = PREPARE_GC;</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span> </div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!sweeper_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">sweeping_in_progress</a>());</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span> </div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">incremental_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1IncrementalMarking.html#a36f76d27a7a670a4b270804cef79cea1">IsMarking</a>(),</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>                 heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">incremental_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1IncrementalMarking.html#af7648dd98be368a6b882111f2c62441c">IsMajorMarking</a>());</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>  <span class="keywordflow">if</span> (!heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">incremental_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1IncrementalMarking.html#a36f76d27a7a670a4b270804cef79cea1">IsMarking</a>()) {</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7e6a8160a88f451d394d7135403f3ae">StartCompaction</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">StartCompactionMode::kAtomic</a>);</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a31a1ac4e13f578ddd0947d9ad58af5e1">StartMarking</a>();</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    <span class="keywordflow">if</span> (heap_-&gt;cpp_heap_) {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>      <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_EMBEDDER_PROLOGUE);</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>      <span class="comment">// StartTracing immediately starts marking which requires V8 worklists to</span></div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>      <span class="comment">// be set up.</span></div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>      <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;cpp_heap_)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#ae67d52cdcb6ee95629fe16a51437588c">StartMarking</a>();</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    }</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>  }</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* new_space = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">new_space</a>()) {</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    new_space-&gt;GarbageCollectionPrologue();</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>  }</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>  <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3498d35123e49efe70dd0921c5dda802">use_new_space</a>()) {</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>        heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#af2a1e9678f976d363e02ed9890509128">allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1HeapAllocator.html#a40796dc20e885e01382808559dbf68b5">new_space_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MainAllocator.html#affcbea59347c2fdd71bfdf184be65197">top</a>(),</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>        heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#af2a1e9678f976d363e02ed9890509128">allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1HeapAllocator.html#a40796dc20e885e01382808559dbf68b5">new_space_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MainAllocator.html#a04f6de162f67fb3e7dc646709baadbbf">original_top_acquire</a>());</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>  }</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>}</div>
</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span> </div>
<div class="foldopen" id="foldopen00783" data-start="{" data-end="}">
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9d6f060a09240e70ae531c260c99650b">  783</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9d6f060a09240e70ae531c260c99650b">MarkCompactCollector::FinishConcurrentMarking</a>() {</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>  <span class="comment">// FinishConcurrentMarking is called for both, concurrent and parallel,</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>  <span class="comment">// marking. It is safe to call this function when tasks are already finished.</span></div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#a884b7ca1bb9c41508d91ca620cdd29a9">garbage_collector</a>(),</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>            <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>);</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_marking || <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.concurrent_marking) {</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#a43f88ef394ce90569543e44ab0381cf8">Join</a>();</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#a3f1743cd46ce9240e4ffbb5098de064b">FlushMemoryChunkData</a>();</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#a8eaf129f2de29cd9b015ed61b31babc5">FlushNativeContexts</a>(&amp;native_context_stats_);</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>  }</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;cpp_heap_)) {</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    cpp_heap-&gt;FinishConcurrentMarkingIfNeeded();</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>  }</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>}</div>
</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span> </div>
<div class="foldopen" id="foldopen00798" data-start="{" data-end="}">
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a17e6e45984b6757652c6611c22c17cff">  798</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a17e6e45984b6757652c6611c22c17cff">MarkCompactCollector::VerifyMarking</a>() {</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(local_marking_worklists_-&gt;IsEmpty());</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">incremental_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1IncrementalMarking.html#a421afcfedbad9dba889295ea646625fa">IsStopped</a>());</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span><span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_VERIFY);</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    FullMarkingVerifier verifier(heap_);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    verifier.Run();</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5d71078a2feb52de929d9af219dda38e">old_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ab28602f29288785c81dc2ccfb7669b86">code_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a2a1fb2232941770fa521ed659ebe7e52">shared_space</a>()) heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a2a1fb2232941770fa521ed659ebe7e52">shared_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a70a182be5a70ea73eb023a5226174a4e">trusted_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms &amp;&amp; heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">paged_new_space</a>())</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>      heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">paged_new_space</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1PagedNewSpace.html#a1701d1cbec842172730b7560cf8266c3">paged_space</a>()-&gt;VerifyLiveBytes();</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>  }</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span><span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>}</div>
</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span> </div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span><span class="keywordtype">void</span> ShrinkPagesToObjectSizes(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_class" href="classv8_1_1internal_1_1OldLargeObjectSpace.html">OldLargeObjectSpace</a>* space) {</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>  <span class="keywordtype">size_t</span> surviving_object_size = 0;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a> cage_base(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate());</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = space-&gt;begin(); it != space-&gt;end();) {</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    <a class="code hl_class" href="classv8_1_1internal_1_1LargePageMetadata.html">LargePageMetadata</a>* current = *(it++);</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span> = current-&gt;GetObject();</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> object_size = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<span class="keywordtype">object</span>-&gt;Size(cage_base));</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>    space-&gt;ShrinkPageToObjectSize(current, <span class="keywordtype">object</span>, object_size);</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    surviving_object_size += object_size;</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>  }</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>  space-&gt;set_objects_size(surviving_object_size);</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>}</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span> </div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span> </div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span><span class="keywordtype">void</span> MarkCompactCollector::Finish() {</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>  {</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>    <a class="code hl_define" href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a>(</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_SWEEP, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>,</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>        sweeper_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Sweeper.html#a374de26e99dae0ad5f32c1cbeab58285">GetTraceIdForFlowEvent</a>(GCTracer::Scope::MC_SWEEP),</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a> | <a class="code hl_define" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span> </div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    <span class="comment">// Delay releasing empty new space pages and dead new large object pages</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    <span class="comment">// until after pointer updating is done because dead old space objects may</span></div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <span class="comment">// have slots pointing to these pages and will need to be updated.</span></div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms,</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>                   empty_new_space_pages_to_be_swept_.empty());</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <span class="keywordflow">if</span> (!empty_new_space_pages_to_be_swept_.empty()) {</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>      GCTracer::Scope sweep_scope(</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>          heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_SWEEP_NEW, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a>);</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>      <span class="keywordflow">for</span> (PageMetadata* p : empty_new_space_pages_to_be_swept_) {</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        <span class="comment">// Sweeping empty pages already relinks them to the freelist.</span></div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        sweeper_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Sweeper.html#aca5b4d1317e28419219a4ef8982efc72">SweepEmptyNewSpacePage</a>(p);</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>      }</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>      empty_new_space_pages_to_be_swept_.clear();</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    }</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span> </div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3260de195711edf447ce37a2e67fe6ec">new_lo_space</a>()) {</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>      <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_SWEEP_NEW_LO);</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>      SweepLargeSpace(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3260de195711edf447ce37a2e67fe6ec">new_lo_space</a>());</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    }</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span> </div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    heap_-&gt;VerifyCountersBeforeConcurrentSweeping(</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>);</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>  }</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* new_space = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">new_space</a>()) {</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_EVACUATE);</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_EVACUATE_REBALANCE);</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>    <span class="comment">// We rebalance first to be able to assume that from- and to-space have the</span></div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    <span class="comment">// same size.</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    <span class="comment">// TODO(365027679): Make growing/shrinking more flexible to avoid ensuring</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>    <span class="comment">// the same capacity.</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>    <span class="keywordflow">if</span> (!new_space-&gt;EnsureCurrentCapacity()) {</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>      heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ac2186ae87a3cd28acde06a9f50d31b2c">FatalProcessOutOfMemory</a>(<span class="stringliteral">&quot;NewSpace::EnsureCurrentCapacity&quot;</span>);</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    }</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <span class="comment">// With Minor MS we have already set the mode at the beginning of sweeping</span></div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    <span class="comment">// the young generation.</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms) {</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(Heap::ResizeNewSpaceMode::kNone, resize_new_space_);</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>      resize_new_space_ = heap_-&gt;ShouldResizeNewSpace();</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    }</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    <span class="keywordflow">switch</span> (resize_new_space_) {</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>      <span class="keywordflow">case</span> ResizeNewSpaceMode::kShrink:</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        heap_-&gt;ReduceNewSpaceSize();</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>      <span class="keywordflow">case</span> ResizeNewSpaceMode::kGrow:</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        heap_-&gt;ExpandNewSpaceSize();</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>      <span class="keywordflow">case</span> ResizeNewSpaceMode::kNone:</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    }</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    resize_new_space_ = ResizeNewSpaceMode::kNone;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>  }</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span> </div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_FINISH);</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span> </div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>  <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">new_space</a>()) {</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#af2a1e9678f976d363e02ed9890509128">allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1HeapAllocator.html#a40796dc20e885e01382808559dbf68b5">new_space_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MainAllocator.html#a97ac067e0a70133b0075187bc0bb28bd">IsLabValid</a>());</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">new_space</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1NewSpace.html#a6666d02587ff04156b91f1e56dbedbd7">GarbageCollectionEpilogue</a>();</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>  }</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>  <span class="keyword">auto</span>* isolate = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>  isolate-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a0567c99c2a3ff016df9e7abb30688075">global_handles</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1GlobalHandles.html#a286951f39aa659e819fdcbcf31cd7d9d">ClearListOfYoungNodes</a>();</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span> </div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>  SweepArrayBufferExtensions();</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>  marking_visitor_.reset();</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>  local_marking_worklists_.reset();</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>  marking_worklists_.<a class="code hl_function" href="classv8_1_1internal_1_1MarkingWorklists.html#ad043c0f34b550badabc3d15a17c52943">ReleaseContextWorklists</a>();</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>  native_context_stats_.<a class="code hl_function" href="classv8_1_1internal_1_1NativeContextStats.html#af295a45eb3605b4771e84ae2aa4a7f48">Clear</a>();</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span> </div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(weak_objects_.current_ephemerons.IsEmpty());</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(weak_objects_.discovered_ephemerons.IsEmpty());</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>  local_weak_objects_-&gt;next_ephemerons_local.Publish();</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>  local_weak_objects_.reset();</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>  weak_objects_.next_ephemerons.<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects.html#a0557b5c72151038a6d73b9d5aa6804eb">Clear</a>();</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span> </div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>  sweeper_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Sweeper.html#a18ffd1567b5bf06adae1fff80f4207d0">StartMajorSweeperTasks</a>();</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span> </div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>  <span class="comment">// Release empty pages now, when the pointer-update phase is done.</span></div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>  heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a8e1fa8425bdd18538f8ff8896ea6940d">memory_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryAllocator.html#a3f65594b1055b6de0fde41bab46d00b0">ReleaseQueuedPages</a>();</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>  <span class="comment">// Shrink pages if possible after processing and filtering slots.</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>  ShrinkPagesToObjectSizes(heap_, heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a30ff2252b7699b1d5bbdf5a69eb551b9">lo_space</a>());</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span> </div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(state_ == SWEEP_SPACES || state_ == RELOCATE_OBJECTS);</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>  state_ = IDLE;</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span> </div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>  <span class="keywordflow">if</span> (have_code_to_deoptimize_) {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>    <span class="comment">// Some code objects were marked for deoptimization during the GC.</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>    <a class="code hl_function" href="classv8_1_1internal_1_1Deoptimizer.html#a7cbb81963c0529cc90612511d408db06">Deoptimizer::DeoptimizeMarkedCode</a>(isolate);</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>    have_code_to_deoptimize_ = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>  }</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>}</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span> </div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span><span class="keywordtype">void</span> MarkCompactCollector::SweepArrayBufferExtensions() {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">new_space</a>(), heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">new_space</a>()-&gt;Size() == 0);</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3260de195711edf447ce37a2e67fe6ec">new_lo_space</a>(), heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3260de195711edf447ce37a2e67fe6ec">new_lo_space</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1LargeObjectSpace.html#a2bffda9f3fd2a5766480a0b4f2c77a82">Size</a>() == 0);</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>  heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5efbf6c659449dbe386992fa259f1734">array_buffer_sweeper</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a5fd86b603aaa53c5799679544e8b479f">RequestSweep</a>(</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>      <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158">ArrayBufferSweeper::SweepingType::kFull</a>,</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>      <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9">ArrayBufferSweeper::TreatAllYoungAsPromoted::kYes</a>);</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>}</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span> </div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span><span class="comment">// This visitor is used to visit the body of special objects held alive by</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span><span class="comment">// other roots.</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span><span class="comment">//</span></div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span><span class="comment">// It is currently used for</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span><span class="comment">// - InstructionStream held alive by the top optimized frame. This code cannot</span></div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span><span class="comment">// be deoptimized and thus have to be kept alive in an isolate way, i.e., it</span></div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span><span class="comment">// should not keep alive other code objects reachable through the weak list but</span></div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span><span class="comment">// they should keep alive its embedded pointers (which would otherwise be</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span><span class="comment">// dropped).</span></div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span><span class="comment">// - Prefix of the string table.</span></div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span><span class="comment">// - If V8_ENABLE_SANDBOX, client Isolates&#39; waiter queue node</span></div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span><span class="comment">// ExternalPointer_t in shared Isolates.</span></div>
<div class="foldopen" id="foldopen00959" data-start="{" data-end="};">
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html">  959</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html">MarkCompactCollector::CustomRootBodyMarkingVisitor</a> final</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>    : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html">ObjectVisitorWithCageBases</a> {</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00962" data-start="{" data-end="}">
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#ae037bbace247314c3f474eab73defb45">  962</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#ae037bbace247314c3f474eab73defb45">CustomRootBodyMarkingVisitor</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector)</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html">ObjectVisitorWithCageBases</a>(collector-&gt;heap_-&gt;isolate()),</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        collector_(collector) {}</div>
</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span> </div>
<div class="foldopen" id="foldopen00966" data-start="{" data-end="}">
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a7b773b2815d0ae8e57e44d3b8a17ff19">  966</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a7b773b2815d0ae8e57e44d3b8a17ff19">VisitPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> p) <span class="keyword">final</span> {</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>    MarkObject(host, p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()));</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>  }</div>
</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span> </div>
<div class="foldopen" id="foldopen00970" data-start="{" data-end="}">
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a2183640daa791b6e179c41a56af82255">  970</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a2183640daa791b6e179c41a56af82255">VisitMapPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host) <span class="keyword">final</span> {</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    MarkObject(host, host-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()));</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>  }</div>
</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span> </div>
<div class="foldopen" id="foldopen00974" data-start="{" data-end="}">
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#adfdf4627a33fb7f125335a4371840ef7">  974</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#adfdf4627a33fb7f125335a4371840ef7">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>                     <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) <span class="keyword">final</span> {</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>      <span class="comment">// The map slot should be handled in VisitMapPointer.</span></div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>      <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(host-&gt;map_slot(), p);</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!HasWeakHeapObjectTag(p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>())));</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>      MarkObject(host, p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()));</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>    }</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>  }</div>
</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span> </div>
<div class="foldopen" id="foldopen00984" data-start="{" data-end="}">
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a42bf6bc8999d191223cab0d468eb7db8">  984</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a42bf6bc8999d191223cab0d468eb7db8">VisitInstructionStreamPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Code&gt;</a> host,</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                                     <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">InstructionStreamSlot</a> slot)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>    MarkObject(host, slot.<a class="code hl_function" href="classv8_1_1internal_1_1FullObjectSlot.html#a4e88c8ba68e8440c83abd6077dad7c0a">load</a>(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a659af9693d9c8a62f14eba44fd06cfe6">code_cage_base</a>()));</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>  }</div>
</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span> </div>
<div class="foldopen" id="foldopen00989" data-start="{" data-end="}">
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a997aee5aabfbef6df6c0d6cda031580c">  989</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a997aee5aabfbef6df6c0d6cda031580c">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                     <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) <span class="keyword">final</span> {</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    <span class="comment">// At the moment, custom roots cannot contain weak pointers.</span></div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>  }</div>
</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span> </div>
<div class="foldopen" id="foldopen00995" data-start="{" data-end="}">
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a52151f4b401932c665a3374cc8f7e2dd">  995</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a52151f4b401932c665a3374cc8f7e2dd">VisitCodeTarget</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>                       <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> target =</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>        <a class="code hl_function" href="classv8_1_1internal_1_1InstructionStream.html#a609ae4cdb6b49935b0fc6a55711a5191">InstructionStream::FromTargetAddress</a>(rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a5105ad25a3cfafd733106928a9d8a4ad">target_address</a>());</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    MarkObject(host, target);</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>  }</div>
</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span> </div>
<div class="foldopen" id="foldopen01002" data-start="{" data-end="}">
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#add5c795d9670b0c59735d7563457d923"> 1002</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#add5c795d9670b0c59735d7563457d923">VisitEmbeddedPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>                            <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    MarkObject(host, rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#ab620178a9b0590638fdc6834b53eb328">target_object</a>(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()));</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>  }</div>
</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span> </div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>  V8_INLINE <span class="keywordtype">void</span> MarkObject(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>) {</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(<span class="keywordtype">object</span>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    <span class="keyword">const</span> <span class="keyword">auto</span> target_worklist =</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(collector_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">heap</a>(), heap_object);</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>    <span class="keywordflow">if</span> (!target_worklist) {</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    }</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    collector_-&gt;MarkObject(host, heap_object, target_worklist.value());</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>  }</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#af7e1a054489f11045c46e33fd3c17c97">MarkCompactCollector</a>* <span class="keyword">const</span> collector_;</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>};</div>
</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span> </div>
<div class="foldopen" id="foldopen01022" data-start="{" data-end="};">
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html"> 1022</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html">MarkCompactCollector::SharedHeapObjectVisitor</a> final</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1HeapVisitor.html">HeapVisitor</a>&lt;MarkCompactCollector::SharedHeapObjectVisitor&gt; {</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01025" data-start="{" data-end="}">
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a0bf824516021b2368b38148540b85096"> 1025</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a0bf824516021b2368b38148540b85096">SharedHeapObjectVisitor</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector)</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1HeapVisitor.html">HeapVisitor</a>(collector-&gt;<a class="code hl_variable" href="classv8_1_1internal_1_1HeapVisitor.html#a4026d6517442ceaf7c3f2f74156fe9ae">heap_</a>-&gt;isolate()), collector_(collector) {}</div>
</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span> </div>
<div class="foldopen" id="foldopen01028" data-start="{" data-end="}">
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a16776b5432f51c6c2b6252bc22420b0a"> 1028</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a16776b5432f51c6c2b6252bc22420b0a">VisitPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> p) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    CheckForSharedObject(host, p, p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()));</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>  }</div>
</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span> </div>
<div class="foldopen" id="foldopen01032" data-start="{" data-end="}">
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#acea62577d515690e9ad7b84bc832ae0e"> 1032</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#acea62577d515690e9ad7b84bc832ae0e">VisitPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> p) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;MaybeObject&gt;</a> <span class="keywordtype">object</span> = p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>());</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object;</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.GetHeapObject(&amp;heap_object))</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>      CheckForSharedObject(host, <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a>(p), heap_object);</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>  }</div>
</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span> </div>
<div class="foldopen" id="foldopen01039" data-start="{" data-end="}">
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a5fec89650b78f0bda9c57a22038c95bb"> 1039</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a5fec89650b78f0bda9c57a22038c95bb">VisitMapPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    CheckForSharedObject(host, host-&gt;map_slot(), host-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()));</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>  }</div>
</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span> </div>
<div class="foldopen" id="foldopen01043" data-start="{" data-end="}">
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a2123ddc921b380733dfb73b59a4757e9"> 1043</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a2123ddc921b380733dfb73b59a4757e9">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>                     <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>      <span class="comment">// The map slot should be handled in VisitMapPointer.</span></div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>      <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(host-&gt;map_slot(), p);</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!HasWeakHeapObjectTag(p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>())));</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>      CheckForSharedObject(host, p, p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()));</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>    }</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>  }</div>
</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span> </div>
<div class="foldopen" id="foldopen01053" data-start="{" data-end="}">
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#ac87920e3725a9ecaea79cefd4881c1f5"> 1053</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#ac87920e3725a9ecaea79cefd4881c1f5">VisitInstructionStreamPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Code&gt;</a> host,</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>                                     <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">InstructionStreamSlot</a> slot)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>  }</div>
</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span> </div>
<div class="foldopen" id="foldopen01058" data-start="{" data-end="}">
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a8012ea60cbce361a19727bef2ca999ec"> 1058</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a8012ea60cbce361a19727bef2ca999ec">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>                     <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>      <span class="comment">// The map slot should be handled in VisitMapPointer.</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>      <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(host-&gt;map_slot(), <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a>(p));</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a16776b5432f51c6c2b6252bc22420b0a">VisitPointer</a>(host, p);</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>    }</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>  }</div>
</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span> </div>
<div class="foldopen" id="foldopen01067" data-start="{" data-end="}">
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a91df02cd39747af4cbe3b876f511e192"> 1067</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a91df02cd39747af4cbe3b876f511e192">VisitCodeTarget</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                       <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>  }</div>
</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span> </div>
<div class="foldopen" id="foldopen01072" data-start="{" data-end="}">
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a3c6ff55ec2916dad128b28633956c487"> 1072</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a3c6ff55ec2916dad128b28633956c487">VisitEmbeddedPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>                            <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>  }</div>
</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span> </div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>  V8_INLINE <span class="keywordtype">void</span> CheckForSharedObject(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> slot,</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                                      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>) {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#ae77bf0d1f0e1b86681fb29101ecd527a">HeapLayout::InAnySharedSpace</a>(host));</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object;</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    <span class="keywordflow">if</span> (!<span class="keywordtype">object</span>.GetHeapObject(&amp;heap_object)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object));</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>    <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* host_chunk = <a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#abb4f5b4779cc364180c3d30f7af06ae5">MemoryChunk::FromHeapObject</a>(host);</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    <a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* host_page_metadata =</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#a69a7af476fe5ae86ab77a9bb0d5e34df">MutablePageMetadata::cast</a>(host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a646a2dccc971ad9f546e0da4a35cfbbb">Metadata</a>());</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a597d0e70459c694743e92d98a9292f92">HeapLayout::InYoungGeneration</a>(host));</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    <span class="comment">// Temporarily record new-to-shared slots in the old-to-shared remembered</span></div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>    <span class="comment">// set so we don&#39;t need to iterate the page again later for updating the</span></div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    <span class="comment">// references.</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#a5f06ef544b7c8a892f57b28a5185fece">RememberedSet&lt;OLD_TO_SHARED&gt;::Insert&lt;AccessMode::NON_ATOMIC&gt;</a>(</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        host_page_metadata, host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot.<a class="code hl_function" href="classv8_1_1internal_1_1SlotBase.html#a761a11659b4338ee734b79e7c6886911">address</a>()));</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(collector_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">heap</a>(), heap_object)) {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>      collector_-&gt;MarkRootObject(Root::kClientHeap, heap_object,</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                                 <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>);</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    }</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>  }</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span> </div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#af7e1a054489f11045c46e33fd3c17c97">MarkCompactCollector</a>* <span class="keyword">const</span> collector_;</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>};</div>
</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span> </div>
<div class="foldopen" id="foldopen01103" data-start="{" data-end="};">
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html"> 1103</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html">InternalizedStringTableCleaner</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1RootVisitor.html">RootVisitor</a> {</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#a75acba88de7b78ce94f33431d41af1c8"> 1105</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#a75acba88de7b78ce94f33431d41af1c8">InternalizedStringTableCleaner</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>) : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {}</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span> </div>
<div class="foldopen" id="foldopen01107" data-start="{" data-end="}">
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#a1361cd9f1f8f2588337cb24d7d376211"> 1107</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#a1361cd9f1f8f2588337cb24d7d376211">VisitRootPointers</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                         <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>  }</div>
</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span> </div>
<div class="foldopen" id="foldopen01112" data-start="{" data-end="}">
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#ad0ec0e4d1601a86840938148cd39c210"> 1112</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#ad0ec0e4d1601a86840938148cd39c210">VisitRootPointers</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>                         <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">OffHeapObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                         <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">OffHeapObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(root, Root::kStringTable);</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <span class="comment">// Visit all HeapObject pointers in [start, end).</span></div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> isolate = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">OffHeapObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> o = p.load(isolate);</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(o)) {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(o);</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a597d0e70459c694743e92d98a9292f92">HeapLayout::InYoungGeneration</a>(heap_object));</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>                heap_, heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ab412dcd5a018b216f78f0d2ea4fe6ecb">marking_state</a>(), heap_object)) {</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>          pointers_removed_++;</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>          p.store(<a class="code hl_function" href="classv8_1_1internal_1_1StringTable.html#abeac36e6a289d88ba75d9e9053852588">StringTable::deleted_element</a>());</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>        }</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>      }</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    }</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>  }</div>
</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span> </div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#acc8652376ea10be09435416bd4a4c6dc"> 1132</a></span>  <span class="keywordtype">int</span> <a class="code hl_function" href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#acc8652376ea10be09435416bd4a4c6dc">PointersRemoved</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> pointers_removed_; }</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span> </div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* heap_;</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>  <span class="keywordtype">int</span> pointers_removed_ = 0;</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>};</div>
</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span> </div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span><span class="keyword">class </span>MarkExternalPointerFromExternalStringTable : <span class="keyword">public</span> RootVisitor {</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>  <span class="keyword">explicit</span> MarkExternalPointerFromExternalStringTable(</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>      ExternalPointerTable* shared_table, ExternalPointerTable::Space* space)</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>      : visitor(shared_table, space) {}</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span> </div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>  <span class="keywordtype">void</span> VisitRootPointers(Root root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                         FullObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, FullObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>    <span class="comment">// Visit all HeapObject pointers in [start, end).</span></div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>    <span class="keywordflow">for</span> (FullObjectSlot p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>      Tagged&lt;Object&gt; o = *p;</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>      <span class="keywordflow">if</span> (IsHeapObject(o)) {</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>        Tagged&lt;HeapObject&gt; heap_object = Cast&lt;HeapObject&gt;(o);</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>        <span class="keywordflow">if</span> (IsExternalString(heap_object)) {</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>          Tagged&lt;ExternalString&gt; <span class="keywordtype">string</span> = Cast&lt;ExternalString&gt;(heap_object);</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>          <span class="keywordtype">string</span>-&gt;VisitExternalPointers(&amp;visitor);</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>          <span class="comment">// The original external string may have been internalized.</span></div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a08148789a9c2a5375c705ca803f54493">IsThinString</a>(o));</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>        }</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>      }</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>    }</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>  }</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span> </div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>  <span class="keyword">class </span>MarkExternalPointerTableVisitor : <span class="keyword">public</span> ObjectVisitor {</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>   <span class="keyword">public</span>:</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    <span class="keyword">explicit</span> MarkExternalPointerTableVisitor(ExternalPointerTable* table,</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>                                             ExternalPointerTable::Space* space)</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>        : table_(table), space_(space) {}</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    <span class="keywordtype">void</span> VisitExternalPointer(Tagged&lt;HeapObject&gt; host,</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                              ExternalPointerSlot slot)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!slot.tag_range().IsEmpty());</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsSharedExternalPointerType(slot.tag_range()));</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>      ExternalPointerHandle <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a> = slot.Relaxed_LoadHandle();</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>      table_-&gt;Mark(space_, handle, slot.address());</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>    }</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>    <span class="keywordtype">void</span> VisitPointers(Tagged&lt;HeapObject&gt; host, ObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>                       ObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>    }</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    <span class="keywordtype">void</span> VisitPointers(Tagged&lt;HeapObject&gt; host, MaybeObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                       MaybeObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>    }</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>    <span class="keywordtype">void</span> VisitInstructionStreamPointer(Tagged&lt;Code&gt; host,</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>                                       InstructionStreamSlot slot)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>    }</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>    <span class="keywordtype">void</span> VisitCodeTarget(Tagged&lt;InstructionStream&gt; host,</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>                         RelocInfo* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    <span class="keywordtype">void</span> VisitEmbeddedPointer(Tagged&lt;InstructionStream&gt; host,</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>                              RelocInfo* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>    }</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span> </div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>   <span class="keyword">private</span>:</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    ExternalPointerTable* table_;</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    ExternalPointerTable::Space* space_;</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>  };</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span> </div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>  MarkExternalPointerTableVisitor visitor;</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>};</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span> </div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span><span class="comment">// Implementation of WeakObjectRetainer for mark compact GCs. All marked objects</span></div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span><span class="comment">// are retained.</span></div>
<div class="foldopen" id="foldopen01209" data-start="{" data-end="};">
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html"> 1209</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html">MarkCompactWeakObjectRetainer</a> : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1WeakObjectRetainer.html">WeakObjectRetainer</a> {</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01211" data-start="{" data-end="}">
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html#a4eef87d0358bbd1997ab4e8398ddbf3d"> 1211</a></span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html#a4eef87d0358bbd1997ab4e8398ddbf3d">MarkCompactWeakObjectRetainer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_class" href="classv8_1_1internal_1_1MarkingState.html">MarkingState</a>* marking_state)</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>      : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>), marking_state_(marking_state) {}</div>
</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span> </div>
<div class="foldopen" id="foldopen01214" data-start="{" data-end="}">
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html#acbd61a1d656855a26bfe759affc50473"> 1214</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html#acbd61a1d656855a26bfe759affc50473">RetainAs</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a7835e19deaaf9158c792811b0259c3d7">MarkingHelper::IsMarkedOrAlwaysLive</a>(heap_, marking_state_,</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>                                            heap_object)) {</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>      <span class="keywordflow">return</span> object;</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsAllocationSite(<span class="keywordtype">object</span>) &amp;&amp;</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>               !<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;AllocationSite&gt;</a>(<span class="keywordtype">object</span>)-&gt;IsZombie()) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>      <span class="comment">// &quot;dead&quot; AllocationSites need to live long enough for a traversal of new</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>      <span class="comment">// space. These sites get a one-time reprieve.</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> nested = object;</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>      <span class="keywordflow">while</span> (IsAllocationSite(nested)) {</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>        <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;AllocationSite&gt;</a> current_site = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;AllocationSite&gt;</a>(nested);</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>        <span class="comment">// MarkZombie will override the nested_site, read it first before</span></div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>        <span class="comment">// marking</span></div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>        nested = current_site-&gt;nested_site();</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>        current_site-&gt;MarkZombie();</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>        marking_state_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkingStateBase.html#a25369a80f635ffb368937574c7a4e6a6">TryMarkAndAccountLiveBytes</a>(current_site);</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>      }</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span> </div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>      <span class="keywordflow">return</span> object;</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1Smi.html#ae2be3083c9562dbe7c4bc39337bbe831">Smi::zero</a>();</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    }</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>  }</div>
</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span> </div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <span class="keyword">const</span> heap_;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MarkingState.html">MarkingState</a>* <span class="keyword">const</span> marking_state_;</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>};</div>
</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span> </div>
<div class="foldopen" id="foldopen01245" data-start="{" data-end="};">
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html"> 1245</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a></div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1HeapVisitor.html">HeapVisitor</a>&lt;RecordMigratedSlotVisitor&gt; {</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01248" data-start="{" data-end="}">
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ab172b2831dbf736806f42554812338ce"> 1248</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ab172b2831dbf736806f42554812338ce">RecordMigratedSlotVisitor</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>)</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1HeapVisitor.html">HeapVisitor</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate()), <a class="code hl_variable" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aced2ae6eec28891d4ba4a495e22443ec">heap_</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {}</div>
</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span> </div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a7a57beed7f1a5d2b2e07f3bb75983f15"> 1251</a></span>  V8_INLINE <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a7a57beed7f1a5d2b2e07f3bb75983f15">UsePrecomputedObjectSize</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span> </div>
<div class="foldopen" id="foldopen01253" data-start="{" data-end="}">
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad"> 1253</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad">VisitPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> p) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!HasWeakHeapObjectTag(p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>())));</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170">RecordMigratedSlot</a>(host, p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()), p.address());</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>  }</div>
</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span> </div>
<div class="foldopen" id="foldopen01258" data-start="{" data-end="}">
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a11e5b09a4d09ac70fce864d7b9b2edae"> 1258</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a11e5b09a4d09ac70fce864d7b9b2edae">VisitMapPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad">VisitPointer</a>(host, host-&gt;map_slot());</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>  }</div>
</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span> </div>
<div class="foldopen" id="foldopen01262" data-start="{" data-end="}">
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a4cb053e8971d48ea61b26368929bc170"> 1262</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a4cb053e8971d48ea61b26368929bc170">VisitPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> p) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1MapWord.html#a2da249cf285df1454abda362ce7a293e">MapWord::IsPacked</a>(p.Relaxed_Load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()).ptr()));</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170">RecordMigratedSlot</a>(host, p.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>()), p.address());</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>  }</div>
</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span> </div>
<div class="foldopen" id="foldopen01267" data-start="{" data-end="}">
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ae62d0c166ca3e300c5e7f7d10b882c22"> 1267</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ae62d0c166ca3e300c5e7f7d10b882c22">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>                            <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>    <span class="keywordflow">while</span> (<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) {</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>      <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad">VisitPointer</a>(host, <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>);</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>      ++<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>;</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    }</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>  }</div>
</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span> </div>
<div class="foldopen" id="foldopen01275" data-start="{" data-end="}">
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a773e7ae3a6eeaf442c507f8f2ff8b3d0"> 1275</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a773e7ae3a6eeaf442c507f8f2ff8b3d0">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>                            <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <span class="keywordflow">while</span> (<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) {</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>      <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad">VisitPointer</a>(host, <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>);</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>      ++<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>;</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>    }</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>  }</div>
</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span> </div>
<div class="foldopen" id="foldopen01283" data-start="{" data-end="}">
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aa3c7e54ea08258cfb01d19c8e42389b3"> 1283</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aa3c7e54ea08258cfb01d19c8e42389b3">VisitInstructionStreamPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Code&gt;</a> host,</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>                                            <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">InstructionStreamSlot</a> slot) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    <span class="comment">// This code is similar to the implementation of VisitPointer() modulo</span></div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    <span class="comment">// new kind of slot.</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!HasWeakHeapObjectTag(slot.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a659af9693d9c8a62f14eba44fd06cfe6">code_cage_base</a>())));</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> code = slot.load(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a659af9693d9c8a62f14eba44fd06cfe6">code_cage_base</a>());</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170">RecordMigratedSlot</a>(host, code, slot.address());</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>  }</div>
</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span> </div>
<div class="foldopen" id="foldopen01292" data-start="{" data-end="}">
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ac418d0aadd8da17d89a71811c863fb1d"> 1292</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ac418d0aadd8da17d89a71811c863fb1d">VisitEphemeron</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>,</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>                             <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> value)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsEphemeronHashTable(host));</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a597d0e70459c694743e92d98a9292f92">HeapLayout::InYoungGeneration</a>(host));</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span> </div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <span class="comment">// Simply record ephemeron keys in OLD_TO_NEW if it points into the young</span></div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    <span class="comment">// generation instead of recording it in ephemeron_remembered_set here for</span></div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    <span class="comment">// migrated objects. OLD_TO_NEW is per page and we can therefore easily</span></div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <span class="comment">// record in OLD_TO_NEW on different pages in parallel without merging. Both</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    <span class="comment">// sets are anyways guaranteed to be empty after a full GC.</span></div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad">VisitPointer</a>(host, <a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>);</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad">VisitPointer</a>(host, value);</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>  }</div>
</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span> </div>
<div class="foldopen" id="foldopen01306" data-start="{" data-end="}">
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a3b152c30ba854d8663280f74861f1566"> 1306</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a3b152c30ba854d8663280f74861f1566">VisitCodeTarget</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>                              <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a4826de2c62c03505c8cef4fdd868a2a4">RelocInfo::IsCodeTargetMode</a>(rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#adbcb85c0a1896ff1e7661746d6143e90">rmode</a>()));</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> target =</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>        <a class="code hl_function" href="classv8_1_1internal_1_1InstructionStream.html#a609ae4cdb6b49935b0fc6a55711a5191">InstructionStream::FromTargetAddress</a>(rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a5105ad25a3cfafd733106928a9d8a4ad">target_address</a>());</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    <span class="comment">// The target is always in old space, we don&#39;t have to record the slot in</span></div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <span class="comment">// the old-to-new remembered set.</span></div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a597d0e70459c694743e92d98a9292f92">HeapLayout::InYoungGeneration</a>(target));</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(target));</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aced2ae6eec28891d4ba4a495e22443ec">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3d8741e9d5e50515a761be0ca0a6f725">mark_compact_collector</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae4455c0b37942d5616bb57730157eb6a">RecordRelocSlot</a>(host, rinfo, target);</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>  }</div>
</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span> </div>
<div class="foldopen" id="foldopen01318" data-start="{" data-end="}">
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a6eeedbde3bbe55f4f0872d7c75e72aa9"> 1318</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a6eeedbde3bbe55f4f0872d7c75e72aa9">VisitEmbeddedPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>                                   <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a9de6eaa529e2d449eb3c4c78fc321d2e">RelocInfo::IsEmbeddedObjectMode</a>(rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#adbcb85c0a1896ff1e7661746d6143e90">rmode</a>()));</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span> = rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#ab620178a9b0590638fdc6834b53eb328">target_object</a>(<a class="code hl_function" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">cage_base</a>());</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>    <a class="code hl_function" href="classv8_1_1internal_1_1WriteBarrier.html#a606e46d0c77a3b252673584c3e359565">WriteBarrier::GenerationalForRelocInfo</a>(host, rinfo, <span class="keywordtype">object</span>);</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>    <a class="code hl_function" href="classv8_1_1internal_1_1WriteBarrier.html#a9bb1fb710da2e3e6a4b9b42e8c003ab9">WriteBarrier::SharedForRelocInfo</a>(host, rinfo, <span class="keywordtype">object</span>);</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aced2ae6eec28891d4ba4a495e22443ec">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a3d8741e9d5e50515a761be0ca0a6f725">mark_compact_collector</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae4455c0b37942d5616bb57730157eb6a">RecordRelocSlot</a>(host, rinfo, <span class="keywordtype">object</span>);</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>  }</div>
</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span> </div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>  <span class="comment">// Entries that are skipped for recording.</span></div>
<div class="foldopen" id="foldopen01328" data-start="{" data-end="}">
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#af42b76fc7d1c794163e0c32123a59d1a"> 1328</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#af42b76fc7d1c794163e0c32123a59d1a">VisitExternalReference</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>                                     <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo) <span class="keyword">final</span> {}</div>
</div>
<div class="foldopen" id="foldopen01330" data-start="{" data-end="}">
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#abb76952d9da9c4ff3d872b627f0b3510"> 1330</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#abb76952d9da9c4ff3d872b627f0b3510">VisitInternalReference</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>                                     <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo) <span class="keyword">final</span> {}</div>
</div>
<div class="foldopen" id="foldopen01332" data-start="{" data-end="}">
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aa1c4aee0c2d81aea906c9fbf6bc2b7f9"> 1332</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aa1c4aee0c2d81aea906c9fbf6bc2b7f9">VisitExternalPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host,</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>                                   <a class="code hl_class" href="classv8_1_1internal_1_1ExternalPointerSlot.html">ExternalPointerSlot</a> slot) <span class="keyword">final</span> {}</div>
</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span> </div>
<div class="foldopen" id="foldopen01335" data-start="{" data-end="}">
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a97c012d3ee7189ec66c5501974ac7bd8"> 1335</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a97c012d3ee7189ec66c5501974ac7bd8">VisitIndirectPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host,</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>                                   <a class="code hl_class" href="classv8_1_1internal_1_1IndirectPointerSlot.html">IndirectPointerSlot</a> slot,</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>                                   <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a3d154fed8222e22068b915454f5db983">IndirectPointerMode</a> mode) <span class="keyword">final</span> {}</div>
</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span> </div>
<div class="foldopen" id="foldopen01339" data-start="{" data-end="}">
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a347d4f88bbfe77ce23a3343cf3c21724"> 1339</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a347d4f88bbfe77ce23a3343cf3c21724">VisitTrustedPointerTableEntry</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host,</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>                                            <a class="code hl_class" href="classv8_1_1internal_1_1IndirectPointerSlot.html">IndirectPointerSlot</a> slot) <span class="keyword">final</span> {}</div>
</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span> </div>
<div class="foldopen" id="foldopen01342" data-start="{" data-end="}">
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ab2a5d6a019dd53fd10dc2bf71572aa1f"> 1342</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ab2a5d6a019dd53fd10dc2bf71572aa1f">VisitProtectedPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;TrustedObject&gt;</a> host,</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>                                    <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ProtectedPointerSlot</a> slot) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170">RecordMigratedSlot</a>(host, slot.load(), slot.address());</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>  }</div>
</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span> </div>
<div class="foldopen" id="foldopen01347" data-start="{" data-end="}">
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aeb45778e96164c12570b0b6288d3409d"> 1347</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aeb45778e96164c12570b0b6288d3409d">VisitProtectedPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;TrustedObject&gt;</a> host,</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>                                    <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">ProtectedMaybeObjectSlot</a> slot) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1MapWord.html#a2da249cf285df1454abda362ce7a293e">MapWord::IsPacked</a>(slot.Relaxed_Load().ptr()));</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170">RecordMigratedSlot</a>(host, slot.load(), slot.address());</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>  }</div>
</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span> </div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span> <span class="keyword">protected</span>:</div>
<div class="foldopen" id="foldopen01354" data-start="{" data-end="}">
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170"> 1354</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170">RecordMigratedSlot</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host,</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;MaybeObject&gt;</a> value, <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> slot) {</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>    <span class="keywordflow">if</span> (value.IsStrongOrWeak()) {</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>      <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* value_chunk = <a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a6c55e8cf2661fa6a347dd1096cc4f62b">MemoryChunk::FromAddress</a>(value.ptr());</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>      <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* host_chunk = <a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#abb4f5b4779cc364180c3d30f7af06ae5">MemoryChunk::FromHeapObject</a>(host);</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a597d0e70459c694743e92d98a9292f92">HeapLayout::InYoungGeneration</a>(value)) {</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>        <a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* host_metadata =</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>            <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#a69a7af476fe5ae86ab77a9bb0d5e34df">MutablePageMetadata::cast</a>(host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a646a2dccc971ad9f546e0da4a35cfbbb">Metadata</a>());</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#aebf4eb09277a5083da24d59c98974894">IsToPage</a>(),</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>                       <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms || value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#af9fbfead34700f0653b0dfe65bf5d473">IsLargePage</a>());</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(host_metadata-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#a9d7e9f4513ced2b857cd305de14df9a2">SweepingDone</a>());</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>        <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#a5f06ef544b7c8a892f57b28a5185fece">RememberedSet&lt;OLD_TO_NEW&gt;::Insert&lt;AccessMode::NON_ATOMIC&gt;</a>(</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>            host_metadata, host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot));</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a31917793e4e1f003c57c07b8dd2422fa">IsEvacuationCandidate</a>()) {</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>        <a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* host_metadata =</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>            <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#a69a7af476fe5ae86ab77a9bb0d5e34df">MutablePageMetadata::cast</a>(host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a646a2dccc971ad9f546e0da4a35cfbbb">Metadata</a>());</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>        <span class="keywordflow">if</span> (value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9adf40869b808cdb4df42933e6402fcf93">MemoryChunk::IS_EXECUTABLE</a>)) {</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>          <span class="comment">// TODO(377724745): currently needed because flags are untrusted.</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>          <a class="code hl_define" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(!<a class="code hl_function" href="namespacev8_1_1internal.html#ae1bbc2f3789eff14d73010adcad41a41">InsideSandbox</a>(value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57fe9bda7525f5de6ebc2b4726d0abb4">address</a>()));</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>          <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#a5f06ef544b7c8a892f57b28a5185fece">RememberedSet&lt;TRUSTED_TO_CODE&gt;::Insert&lt;AccessMode::NON_ATOMIC&gt;</a>(</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>              host_metadata, host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot));</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">MemoryChunk::IS_TRUSTED</a>) &amp;&amp;</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>                   host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">MemoryChunk::IS_TRUSTED</a>)) {</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>          <span class="comment">// When the sandbox is disabled, we use plain tagged pointers to</span></div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>          <span class="comment">// reference trusted objects from untrusted ones. However, for these</span></div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>          <span class="comment">// references we want to use the OLD_TO_OLD remembered set, so here</span></div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>          <span class="comment">// we need to check that both the value chunk and the host chunk are</span></div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>          <span class="comment">// trusted space chunks.</span></div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>          <span class="comment">// TODO(377724745): currently needed because flags are untrusted.</span></div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>          <a class="code hl_define" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(!<a class="code hl_function" href="namespacev8_1_1internal.html#ae1bbc2f3789eff14d73010adcad41a41">InsideSandbox</a>(value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57fe9bda7525f5de6ebc2b4726d0abb4">address</a>()));</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>          <span class="keywordflow">if</span> (value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a16c901edb172a72b13968b5270b0ffce">InWritableSharedSpace</a>()) {</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>            <a class="code hl_class" href="classv8_1_1internal_1_1RememberedSet.html">RememberedSet&lt;TRUSTED_TO_SHARED_TRUSTED&gt;::Insert</a>&lt;</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>                <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ade1fa6c3f4fadb82080eb655686b6ebca670ae114e5d40462ad1f14c003b2fdeb">AccessMode::NON_ATOMIC</a>&gt;(host_metadata,</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>                                        host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot));</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>            <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#a5f06ef544b7c8a892f57b28a5185fece">RememberedSet&lt;TRUSTED_TO_TRUSTED&gt;::Insert&lt;AccessMode::NON_ATOMIC&gt;</a>(</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>                host_metadata, host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot));</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>          }</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>          <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#a5f06ef544b7c8a892f57b28a5185fece">RememberedSet&lt;OLD_TO_OLD&gt;::Insert&lt;AccessMode::NON_ATOMIC&gt;</a>(</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>              host_metadata, host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot));</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>        }</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a16c901edb172a72b13968b5270b0ffce">InWritableSharedSpace</a>() &amp;&amp;</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>                 !<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(host)) {</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>        <a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* host_metadata =</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>            <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#a69a7af476fe5ae86ab77a9bb0d5e34df">MutablePageMetadata::cast</a>(host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a646a2dccc971ad9f546e0da4a35cfbbb">Metadata</a>());</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>        <span class="keywordflow">if</span> (value_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">MemoryChunk::IS_TRUSTED</a>) &amp;&amp;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>            host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">MemoryChunk::IS_TRUSTED</a>)) {</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>          <a class="code hl_class" href="classv8_1_1internal_1_1RememberedSet.html">RememberedSet&lt;TRUSTED_TO_SHARED_TRUSTED&gt;::Insert</a>&lt;</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>              <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ade1fa6c3f4fadb82080eb655686b6ebca670ae114e5d40462ad1f14c003b2fdeb">AccessMode::NON_ATOMIC</a>&gt;(host_metadata, host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot));</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>          <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#a5f06ef544b7c8a892f57b28a5185fece">RememberedSet&lt;OLD_TO_SHARED&gt;::Insert&lt;AccessMode::NON_ATOMIC&gt;</a>(</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>              host_metadata, host_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(slot));</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>        }</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>      }</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>    }</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>  }</div>
</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span> </div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aced2ae6eec28891d4ba4a495e22443ec"> 1412</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <span class="keyword">const</span> <a class="code hl_variable" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aced2ae6eec28891d4ba4a495e22443ec">heap_</a>;</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>};</div>
</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span> </div>
<div class="foldopen" id="foldopen01415" data-start="{" data-end="};">
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MigrationObserver.html"> 1415</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MigrationObserver.html">MigrationObserver</a> {</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MigrationObserver.html#a6908dc5cb778073789390891215ce21d"> 1417</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1MigrationObserver.html#a6908dc5cb778073789390891215ce21d">MigrationObserver</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>) : <a class="code hl_variable" href="classv8_1_1internal_1_1MigrationObserver.html#afd906cd01456da8dca0f62cde32cae64">heap_</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {}</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span> </div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MigrationObserver.html#a33ca4605dda8e7683c7ed3d38729f363"> 1419</a></span>  <span class="keyword">virtual</span> <a class="code hl_function" href="classv8_1_1internal_1_1MigrationObserver.html#a33ca4605dda8e7683c7ed3d38729f363">~MigrationObserver</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MigrationObserver.html#a19443570f17cfff396a9cd963c7ffe99"> 1420</a></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MigrationObserver.html#a19443570f17cfff396a9cd963c7ffe99">Move</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> dest, <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> src,</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>                    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> dst, <span class="keywordtype">int</span> size) = 0;</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span> </div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span> <span class="keyword">protected</span>:</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MigrationObserver.html#afd906cd01456da8dca0f62cde32cae64"> 1424</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_variable" href="classv8_1_1internal_1_1MigrationObserver.html#afd906cd01456da8dca0f62cde32cae64">heap_</a>;</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>};</div>
</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span> </div>
<div class="foldopen" id="foldopen01427" data-start="{" data-end="};">
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ProfilingMigrationObserver.html"> 1427</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1ProfilingMigrationObserver.html">ProfilingMigrationObserver</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1MigrationObserver.html">MigrationObserver</a> {</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ProfilingMigrationObserver.html#a0a790431ab1d0d16b7d0b45393391cb0"> 1429</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1ProfilingMigrationObserver.html#a0a790431ab1d0d16b7d0b45393391cb0">ProfilingMigrationObserver</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>) : <a class="code hl_class" href="classv8_1_1internal_1_1MigrationObserver.html">MigrationObserver</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {}</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span> </div>
<div class="foldopen" id="foldopen01431" data-start="{" data-end="}">
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ProfilingMigrationObserver.html#ad609a7e1385f3f00c58980fd6f01ed5d"> 1431</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1ProfilingMigrationObserver.html#ad609a7e1385f3f00c58980fd6f01ed5d">Move</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> dest, <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> src,</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>                   <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> dst, <span class="keywordtype">int</span> size) <span class="keyword">final</span> {</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>    <span class="comment">// Note this method is called in a concurrent setting. The current object</span></div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>    <span class="comment">// (src and dst) is somewhat safe to access without precautions, but other</span></div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="comment">// objects may be subject to concurrent modification.</span></div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>    <span class="keywordflow">if</span> (dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">CODE_SPACE</a>) {</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>      <a class="code hl_define" href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a>(<a class="code hl_variable" href="classv8_1_1internal_1_1MigrationObserver.html#afd906cd01456da8dca0f62cde32cae64">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), CodeMoveEvent(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;InstructionStream&gt;</a>(src),</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>                                              <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;InstructionStream&gt;</a>(dst)));</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a> || dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b">TRUSTED_SPACE</a>) &amp;&amp;</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>               IsBytecodeArray(dst)) {</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>      <span class="comment">// TODO(saelo): remove `dest == OLD_SPACE` once BytecodeArrays are</span></div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>      <span class="comment">// allocated in trusted space.</span></div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>      <a class="code hl_define" href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a>(<a class="code hl_variable" href="classv8_1_1internal_1_1MigrationObserver.html#afd906cd01456da8dca0f62cde32cae64">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), BytecodeMoveEvent(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;BytecodeArray&gt;</a>(src),</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>                                                  <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;BytecodeArray&gt;</a>(dst)));</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>    }</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1MigrationObserver.html#afd906cd01456da8dca0f62cde32cae64">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a4b0fd946ef07698c78c89b373c38c52b">OnMoveEvent</a>(src, dst, size);</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>  }</div>
</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>};</div>
</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span> </div>
<div class="foldopen" id="foldopen01450" data-start="{" data-end="};">
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1HeapObjectVisitor.html"> 1450</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1HeapObjectVisitor.html">HeapObjectVisitor</a> {</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1HeapObjectVisitor.html#ad67856ea986f2847ff6484c4f6b00e30"> 1452</a></span>  <span class="keyword">virtual</span> <a class="code hl_function" href="classv8_1_1internal_1_1HeapObjectVisitor.html#ad67856ea986f2847ff6484c4f6b00e30">~HeapObjectVisitor</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1HeapObjectVisitor.html#af7de561f80f01389fefacf8ffbb150eb"> 1453</a></span>  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1HeapObjectVisitor.html#af7de561f80f01389fefacf8ffbb150eb">Visit</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">int</span> size) = 0;</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>};</div>
</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span> </div>
<div class="foldopen" id="foldopen01456" data-start="{" data-end="};">
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html"> 1456</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1EvacuateVisitorBase.html">EvacuateVisitorBase</a> : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1HeapObjectVisitor.html">HeapObjectVisitor</a> {</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01458" data-start="{" data-end="}">
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a9e08b20159fa7ad1617e50bb2ca66be2"> 1458</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a9e08b20159fa7ad1617e50bb2ca66be2">AddObserver</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MigrationObserver.html">MigrationObserver</a>* observer) {</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#afd183ddd5f921860066ac73daedb16be">migration_function_</a> = <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a12a3ff0d411a446f60d4398f9e0f1877">RawMigrateObject&lt;MigrationMode::kObserved&gt;</a>;</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#af11ebcfa59df555e097b381c1125beb0">observers_</a>.push_back(observer);</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>  }</div>
</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span> </div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>  <span class="keywordtype">void</span> DisableAbortEvacuationAtAddress(<a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* chunk) {</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>    abort_evacuation_at_address_ = chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunkMetadata.html#a898aedc43e020dfdc0dbf686a863c92d">area_end</a>();</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>  }</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span> </div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>  <span class="keywordtype">void</span> SetUpAbortEvacuationAtAddress(MutablePageMetadata* chunk) {</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction || <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction_random) {</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>      <span class="comment">// Stress aborting of evacuation by aborting ~5% of evacuation candidates</span></div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>      <span class="comment">// when stress testing.</span></div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> kFraction = 0.05;</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span> </div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a54053f4329e3d80206fd801c3d72d0c5">rng_</a>-&gt;NextDouble() &lt; kFraction) {</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> abort_evacuation_percentage = <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a54053f4329e3d80206fd801c3d72d0c5">rng_</a>-&gt;NextDouble();</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        abort_evacuation_at_address_ =</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>            chunk-&gt;area_start() +</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>            abort_evacuation_percentage * chunk-&gt;area_size();</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>      }</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>    }</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span> </div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>    abort_evacuation_at_address_ = chunk-&gt;area_end();</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>  }</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span> </div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span> <span class="keyword">protected</span>:</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4"> 1488</a></span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2">MigrationMode</a> { <a class="code hl_enumvalue" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4">kFast</a>, <a class="code hl_enumvalue" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2ae90c548a51955fbdeb25dbb8441ea8ac">kObserved</a> };</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span> </div>
<div class="foldopen" id="foldopen01490" data-start="{" data-end="}">
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90"> 1490</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a>() {</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span><span class="preprocessor">#if V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a>{<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()};</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a>{};</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span><span class="preprocessor">#endif  </span><span class="comment">// V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>  }</div>
</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span> </div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a391412f99ab82d0e847dfcceb34d3cce"> 1498</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a391412f99ab82d0e847dfcceb34d3cce">MigrateFunction</a> = void (*)(<a class="code hl_class" href="classv8_1_1internal_1_1EvacuateVisitorBase.html">EvacuateVisitorBase</a>* <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>,</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>                                   <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> dst,</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>                                   <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> src, <span class="keywordtype">int</span> <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>,</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>                                   <a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> dest);</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span> </div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>  <span class="keyword">template</span> &lt;MigrationMode mode&gt;</div>
<div class="foldopen" id="foldopen01504" data-start="{" data-end="}">
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a12a3ff0d411a446f60d4398f9e0f1877"> 1504</a></span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a12a3ff0d411a446f60d4398f9e0f1877">RawMigrateObject</a>(<a class="code hl_class" href="classv8_1_1internal_1_1EvacuateVisitorBase.html">EvacuateVisitorBase</a>* base,</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>                               <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> dst, <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> src,</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>                               <span class="keywordtype">int</span> size, <a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> dest) {</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> dst_addr = dst.<a class="code hl_function" href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a07c12d3bf0972861e1c5aefabd00971f">address</a>();</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> src_addr = src.address();</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>    <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a> = <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;cage_base();</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;heap_-&gt;AllowedToBeMigrated(src-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a>), src, dest));</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>    <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(dest, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa385454df67937debeccaa3ec05627542">LO_SPACE</a>);</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>    <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(dest, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa93dfdbc84455c750a99db7dd0cc02aff">CODE_LO_SPACE</a>);</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>    <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(dest, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa14e4604f12b3138f8e00091e7093c023">TRUSTED_LO_SPACE</a>);</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>    <span class="keywordflow">if</span> (dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>) {</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>      <a class="code hl_define" href="spaces_8h.html#a56ff3dec24b9951f79e32d38157610a8">DCHECK_OBJECT_SIZE</a>(size);</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(size, <a class="code hl_variable" href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">kTaggedSize</a>));</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;heap_-&gt;CopyBlock(dst_addr, src_addr, size);</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>      <span class="keywordflow">if</span> (mode != <a class="code hl_enumvalue" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4">MigrationMode::kFast</a>) {</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>        <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;ExecuteMigrationObservers(dest, src, dst, size);</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>      }</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>      <span class="comment">// In case the object&#39;s map gets relocated during GC we load the old map</span></div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>      <span class="comment">// here. This is fine since they store the same content.</span></div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;record_visitor_-&gt;Visit(dst-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a>), dst, size);</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8">SHARED_SPACE</a>) {</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>      <a class="code hl_define" href="spaces_8h.html#a56ff3dec24b9951f79e32d38157610a8">DCHECK_OBJECT_SIZE</a>(size);</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(size, <a class="code hl_variable" href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">kTaggedSize</a>));</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;heap_-&gt;CopyBlock(dst_addr, src_addr, size);</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>      <span class="keywordflow">if</span> (mode != <a class="code hl_enumvalue" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4">MigrationMode::kFast</a>) {</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>        <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;ExecuteMigrationObservers(dest, src, dst, size);</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>      }</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;record_visitor_-&gt;Visit(dst-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a>), dst, size);</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b">TRUSTED_SPACE</a>) {</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>      <a class="code hl_define" href="spaces_8h.html#a56ff3dec24b9951f79e32d38157610a8">DCHECK_OBJECT_SIZE</a>(size);</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(size, <a class="code hl_variable" href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">kTaggedSize</a>));</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;heap_-&gt;CopyBlock(dst_addr, src_addr, size);</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>      <span class="keywordflow">if</span> (mode != <a class="code hl_enumvalue" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4">MigrationMode::kFast</a>) {</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>        <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;ExecuteMigrationObservers(dest, src, dst, size);</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>      }</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>      <span class="comment">// In case the object&#39;s map gets relocated during GC we load the old map</span></div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>      <span class="comment">// here. This is fine since they store the same content.</span></div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;record_visitor_-&gt;Visit(dst-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a>), dst, size);</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">CODE_SPACE</a>) {</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>      <a class="code hl_define" href="spaces_8h.html#a30fdeba02f6d5417e78244ad5fe87702">DCHECK_CODEOBJECT_SIZE</a>(size);</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>      {</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>        <a class="code hl_class" href="classv8_1_1internal_1_1WritableJitAllocation.html">WritableJitAllocation</a> writable_allocation =</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>            <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#abca61cf418b5bae301d7572fdc494d02">ThreadIsolation::RegisterInstructionStreamAllocation</a>(dst_addr,</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>                                                                 size);</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>        <a class="code hl_define" href="logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(size, <a class="code hl_variable" href="classv8_1_1internal_1_1HeapObject.html#a08d8b3cbf29c8d1287956c715df91faa">InstructionStream::kHeaderSize</a>);</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>        writable_allocation.<a class="code hl_function" href="classv8_1_1internal_1_1WritableJitAllocation.html#ae8874306b45c6cb31544e5654210a001">CopyData</a>(0, <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(src_addr),</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>                                     <a class="code hl_variable" href="classv8_1_1internal_1_1HeapObject.html#a08d8b3cbf29c8d1287956c715df91faa">InstructionStream::kHeaderSize</a>);</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>        writable_allocation.<a class="code hl_function" href="classv8_1_1internal_1_1WritableJitAllocation.html#a5214a39ff535864c1f6ae1968547208d">CopyCode</a>(</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>            <a class="code hl_variable" href="classv8_1_1internal_1_1HeapObject.html#a08d8b3cbf29c8d1287956c715df91faa">InstructionStream::kHeaderSize</a>,</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>            <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(src_addr +</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>                                       <a class="code hl_variable" href="classv8_1_1internal_1_1HeapObject.html#a08d8b3cbf29c8d1287956c715df91faa">InstructionStream::kHeaderSize</a>),</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>            size - <a class="code hl_variable" href="classv8_1_1internal_1_1HeapObject.html#a08d8b3cbf29c8d1287956c715df91faa">InstructionStream::kHeaderSize</a>);</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>        <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> istream = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;InstructionStream&gt;</a>(dst);</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>        istream-&gt;Relocate(writable_allocation, dst_addr - src_addr);</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>      }</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>      <span class="keywordflow">if</span> (mode != <a class="code hl_enumvalue" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4">MigrationMode::kFast</a>) {</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>        <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;ExecuteMigrationObservers(dest, src, dst, size);</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>      }</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>      <span class="comment">// In case the object&#39;s map gets relocated during GC we load the old map</span></div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>      <span class="comment">// here. This is fine since they store the same content.</span></div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;record_visitor_-&gt;Visit(dst-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a>), dst, size);</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>      <a class="code hl_define" href="spaces_8h.html#a56ff3dec24b9951f79e32d38157610a8">DCHECK_OBJECT_SIZE</a>(size);</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">NEW_SPACE</a>);</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;heap_-&gt;CopyBlock(dst_addr, src_addr, size);</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>      <span class="keywordflow">if</span> (mode != <a class="code hl_enumvalue" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4">MigrationMode::kFast</a>) {</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>        <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>-&gt;ExecuteMigrationObservers(dest, src, dst, size);</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>      }</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>    }</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span> </div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>    <span class="keywordflow">if</span> (dest == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">CODE_SPACE</a>) {</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>      <a class="code hl_class" href="classv8_1_1internal_1_1WritableJitAllocation.html">WritableJitAllocation</a> jit_allocation =</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>          <a class="code hl_function" href="classv8_1_1internal_1_1WritableJitAllocation.html#a72af50fa547073a14369c06b3667345c">WritableJitAllocation::ForInstructionStream</a>(</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>              <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;InstructionStream&gt;</a>(src));</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>      jit_allocation.<a class="code hl_function" href="classv8_1_1internal_1_1WritableJitAllocation.html#a861973e19b930d615a69946aa439ac45">WriteHeaderSlot</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1MapWord.html">MapWord</a>, <a class="code hl_variable" href="classv8_1_1internal_1_1HeapObject.html#a6250a2489c3d60667b5b3153dff0fed3">HeapObject::kMapOffset</a>&gt;(</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>          <a class="code hl_function" href="classv8_1_1internal_1_1MapWord.html#ae428c02beb0d195fcfb8b44b3c149efa">MapWord::FromForwardingAddress</a>(src, dst));</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>      src-&gt;set_map_word_forwarded(dst, kRelaxedStore);</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    }</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>  }</div>
</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span> </div>
<div class="foldopen" id="foldopen01585" data-start="{" data-end="}">
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa4d49f3e5e4c15d09fa367db1fcf1b6c"> 1585</a></span>  <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa4d49f3e5e4c15d09fa367db1fcf1b6c">EvacuateVisitorBase</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_class" href="classv8_1_1internal_1_1EvacuationAllocator.html">EvacuationAllocator</a>* local_allocator,</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>                      <a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a>* record_visitor)</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>      : <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>),</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb">local_allocator_</a>(local_allocator),</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6a58e9aa2a85e1afbd833fb49c17df54">record_visitor_</a>(record_visitor),</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a129c5df17e8230e4e0aecb5e183c4fd1">shared_string_table_</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.shared_string_table &amp;&amp;</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>                             <a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate()-&gt;has_shared_space()) {</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#afd183ddd5f921860066ac73daedb16be">migration_function_</a> = <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a12a3ff0d411a446f60d4398f9e0f1877">RawMigrateObject&lt;MigrationMode::kFast&gt;</a>;</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a54053f4329e3d80206fd801c3d72d0c5">rng_</a>.emplace(<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">fuzzer_rng</a>()-&gt;<a class="code hl_function" href="classv8_1_1base_1_1RandomNumberGenerator.html#ac44e22b8b6250f2cc8666c880a4871a8">NextInt64</a>());</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>#endif  <span class="comment">// DEBUG</span></div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>  }</div>
</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span> </div>
<div class="foldopen" id="foldopen01598" data-start="{" data-end="}">
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6321f4dbe8353193b8e5bd4ea1d96cf4"> 1598</a></span>  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6321f4dbe8353193b8e5bd4ea1d96cf4">TryEvacuateObject</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> target_space,</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>                                <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">int</span> size,</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>                                <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a>* target_object) {</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>    <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(abort_evacuation_at_address_,</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>              <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">MutablePageMetadata::FromHeapObject</a>(<span class="keywordtype">object</span>)-&gt;area_end());</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>    <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(abort_evacuation_at_address_,</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>              <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">MutablePageMetadata::FromHeapObject</a>(<span class="keywordtype">object</span>)-&gt;area_start());</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span> </div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>    <span class="keywordflow">if</span> (V8_UNLIKELY(<span class="keywordtype">object</span>.address() &gt;= abort_evacuation_at_address_)) {</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    }</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span> </div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> map = <span class="keywordtype">object</span>-&gt;map(<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">cage_base</a>());</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a9609de810273be552e48d8582efe83e6">AllocationAlignment</a> alignment = <a class="code hl_function" href="classv8_1_1internal_1_1HeapObject.html#a83a9550aebfc1ef15e9bf624a51ec4a4">HeapObject::RequiredAlignment</a>(map);</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>    <a class="code hl_class" href="classv8_1_1internal_1_1AllocationResult.html">AllocationResult</a> allocation;</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    <span class="keywordflow">if</span> (target_space == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a> &amp;&amp; <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a22152d774553dd906bca340c583ddbb1">ShouldPromoteIntoSharedHeap</a>(map)) {</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>      allocation = <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb">local_allocator_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1EvacuationAllocator.html#af7bd391747123f679c7a30f8e826d830">Allocate</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8">SHARED_SPACE</a>, size, alignment);</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>      allocation = <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb">local_allocator_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1EvacuationAllocator.html#af7bd391747123f679c7a30f8e826d830">Allocate</a>(target_space, size, alignment);</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>    }</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>    <span class="keywordflow">if</span> (allocation.To(target_object)) {</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>      <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#acd573012c922867059b0f4ac0c6e2df3">MigrateObject</a>(*target_object, <span class="keywordtype">object</span>, size, target_space);</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>    }</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>  }</div>
</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span> </div>
<div class="foldopen" id="foldopen01627" data-start="{" data-end="}">
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a22152d774553dd906bca340c583ddbb1"> 1627</a></span>  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a22152d774553dd906bca340c583ddbb1">ShouldPromoteIntoSharedHeap</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> map) {</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a129c5df17e8230e4e0aecb5e183c4fd1">shared_string_table_</a>) {</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1String.html#ae7e164d91a146cf703e0cde41ab179b9">String::IsInPlaceInternalizableExcludingExternal</a>(</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>          map-&gt;instance_type());</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>    }</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>  }</div>
</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span> </div>
<div class="foldopen" id="foldopen01635" data-start="{" data-end="}">
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a034bacd0b3a920ee6ecbcbaf24fc36ed"> 1635</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a034bacd0b3a920ee6ecbcbaf24fc36ed">ExecuteMigrationObservers</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> dest,</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>                                        <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> src,</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>                                        <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> dst, <span class="keywordtype">int</span> size) {</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1MigrationObserver.html">MigrationObserver</a>* obs : <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#af11ebcfa59df555e097b381c1125beb0">observers_</a>) {</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>      obs-&gt;Move(dest, src, dst, size);</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>    }</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>  }</div>
</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span> </div>
<div class="foldopen" id="foldopen01643" data-start="{" data-end="}">
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#acd573012c922867059b0f4ac0c6e2df3"> 1643</a></span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#acd573012c922867059b0f4ac0c6e2df3">MigrateObject</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> dst, <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> src,</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>                            <span class="keywordtype">int</span> size, <a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> dest) {</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>    <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#afd183ddd5f921860066ac73daedb16be">migration_function_</a>(<span class="keyword">this</span>, dst, src, size, dest);</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>  }</div>
</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span> </div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb"> 1648</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>;</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb"> 1649</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1EvacuationAllocator.html">EvacuationAllocator</a>* <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb">local_allocator_</a>;</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6a58e9aa2a85e1afbd833fb49c17df54"> 1650</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a>* <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6a58e9aa2a85e1afbd833fb49c17df54">record_visitor_</a>;</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#af11ebcfa59df555e097b381c1125beb0"> 1651</a></span>  std::vector&lt;MigrationObserver*&gt; <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#af11ebcfa59df555e097b381c1125beb0">observers_</a>;</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#afd183ddd5f921860066ac73daedb16be"> 1652</a></span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a391412f99ab82d0e847dfcceb34d3cce">MigrateFunction</a> <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#afd183ddd5f921860066ac73daedb16be">migration_function_</a>;</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a129c5df17e8230e4e0aecb5e183c4fd1"> 1653</a></span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a129c5df17e8230e4e0aecb5e183c4fd1">shared_string_table_</a>;</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> abort_evacuation_at_address_{kNullAddress};</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a54053f4329e3d80206fd801c3d72d0c5"> 1657</a></span>  std::optional&lt;base::RandomNumberGenerator&gt; <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a54053f4329e3d80206fd801c3d72d0c5">rng_</a>;</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>};</div>
</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span> </div>
<div class="foldopen" id="foldopen01660" data-start="{" data-end="};">
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html"> 1660</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html">EvacuateNewSpaceVisitor</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1EvacuateVisitorBase.html">EvacuateVisitorBase</a> {</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01662" data-start="{" data-end="}">
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#a6eda57074c3bed95d2e9619004bbd7d7"> 1662</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#a6eda57074c3bed95d2e9619004bbd7d7">EvacuateNewSpaceVisitor</a>(</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_class" href="classv8_1_1internal_1_1EvacuationAllocator.html">EvacuationAllocator</a>* local_allocator,</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>      <a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a>* record_visitor,</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>      <a class="code hl_typedef" href="classv8_1_1internal_1_1PretenuringHandler.html#a4d9bdb2b07edf8f16e49f87bc65088bc">PretenuringHandler::PretenuringFeedbackMap</a>* local_pretenuring_feedback)</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1EvacuateVisitorBase.html">EvacuateVisitorBase</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>, local_allocator, record_visitor),</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>        promoted_size_(0),</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>        semispace_copied_size_(0),</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>        pretenuring_handler_(<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>-&gt;pretenuring_handler()),</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>        local_pretenuring_feedback_(local_pretenuring_feedback),</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>        is_incremental_marking_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;incremental_marking()-&gt;IsMarking()),</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>        shortcut_strings_(!<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>-&gt;IsGCWithStack() ||</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>                          <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.shortcut_strings_with_stack) {</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(is_incremental_marking_,</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>                   <a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;incremental_marking()-&gt;IsMajorMarking());</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>  }</div>
</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span> </div>
<div class="foldopen" id="foldopen01678" data-start="{" data-end="}">
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#ab44fb37b3abd158ebc6dc6a320e272e4"> 1678</a></span>  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#ab44fb37b3abd158ebc6dc6a320e272e4">Visit</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">int</span> size)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <span class="keywordflow">if</span> (TryEvacuateWithoutCopy(<span class="keywordtype">object</span>)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> target_object;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span> </div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>    <a class="code hl_function" href="classv8_1_1internal_1_1PretenuringHandler.html#afe6ffac83eddf7cac23594de7d90da1f">PretenuringHandler::UpdateAllocationSite</a>(<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>, object-&gt;map(), <span class="keywordtype">object</span>, size,</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>                                             local_pretenuring_feedback_);</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span> </div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6321f4dbe8353193b8e5bd4ea1d96cf4">TryEvacuateObject</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>, <span class="keywordtype">object</span>, size, &amp;target_object)) {</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>      <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ac2186ae87a3cd28acde06a9f50d31b2c">FatalProcessOutOfMemory</a>(</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>          <span class="stringliteral">&quot;MarkCompactCollector: young object promotion failed&quot;</span>);</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>    }</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span> </div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>    promoted_size_ += <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>  }</div>
</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span> </div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#a5f6cb02b7a390f271ba17d2a67225665"> 1694</a></span>  intptr_t <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#a5f6cb02b7a390f271ba17d2a67225665">promoted_size</a>() { <span class="keywordflow">return</span> promoted_size_; }</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#af3370875fe71268897de4e0e641f591e"> 1695</a></span>  intptr_t <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#af3370875fe71268897de4e0e641f591e">semispace_copied_size</a>() { <span class="keywordflow">return</span> semispace_copied_size_; }</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span> </div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>  <span class="keyword">inline</span> <span class="keywordtype">bool</span> TryEvacuateWithoutCopy(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>) {</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!is_incremental_marking_);</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span> </div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>    <span class="keywordflow">if</span> (!shortcut_strings_) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span> </div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> map = <span class="keywordtype">object</span>-&gt;map();</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span> </div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    <span class="comment">// Some objects can be evacuated without creating a copy.</span></div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>    <span class="keywordflow">if</span> (map-&gt;visitor_id() == kVisitThinString) {</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> actual = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;ThinString&gt;</a>(<span class="keywordtype">object</span>)-&gt;unchecked_actual();</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a5f0477b3276f6b872199164ffc981999">MarkCompactCollector::IsOnEvacuationCandidate</a>(actual)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>      <span class="keywordtype">object</span>-&gt;set_map_word_forwarded(actual, kRelaxedStore);</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>    }</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>    <span class="comment">// TODO(mlippautz): Handle ConsString.</span></div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span> </div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>  }</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span> </div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>  <span class="keyword">inline</span> <a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> AllocateTargetObject(</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> old_object, <span class="keywordtype">int</span> size,</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a>* target_object) {</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a9609de810273be552e48d8582efe83e6">AllocationAlignment</a> alignment =</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>        <a class="code hl_function" href="classv8_1_1internal_1_1HeapObject.html#a83a9550aebfc1ef15e9bf624a51ec4a4">HeapObject::RequiredAlignment</a>(old_object-&gt;map());</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> space_allocated_in = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">NEW_SPACE</a>;</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>    AllocationResult allocation =</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb">local_allocator_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1EvacuationAllocator.html#af7bd391747123f679c7a30f8e826d830">Allocate</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">NEW_SPACE</a>, size, alignment);</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    <span class="keywordflow">if</span> (allocation.IsFailure()) {</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>      allocation = AllocateInOldSpace(size, alignment);</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>      space_allocated_in = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>;</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>    }</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    <span class="keywordtype">bool</span> ok = allocation.<a class="code hl_function" href="classv8_1_1internal_1_1AllocationResult.html#a31246fcfde98bb83ffbf3829f5a3e835">To</a>(target_object);</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(ok);</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>    <a class="code hl_define" href="macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(ok);</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>    <span class="keywordflow">return</span> space_allocated_in;</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>  }</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span> </div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>  <span class="keyword">inline</span> AllocationResult AllocateInOldSpace(<span class="keywordtype">int</span> size_in_bytes,</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>                                             <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a9609de810273be552e48d8582efe83e6">AllocationAlignment</a> alignment) {</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>    AllocationResult allocation =</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb">local_allocator_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1EvacuationAllocator.html#af7bd391747123f679c7a30f8e826d830">Allocate</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">OLD_SPACE</a>, size_in_bytes, alignment);</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>    <span class="keywordflow">if</span> (allocation.IsFailure()) {</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>      <a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ac2186ae87a3cd28acde06a9f50d31b2c">FatalProcessOutOfMemory</a>(</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>          <span class="stringliteral">&quot;MarkCompactCollector: semi-space copy, fallback in old gen&quot;</span>);</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>    }</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>    <span class="keywordflow">return</span> allocation;</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>  }</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span> </div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>  intptr_t promoted_size_;</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>  intptr_t semispace_copied_size_;</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>  PretenuringHandler* <span class="keyword">const</span> pretenuring_handler_;</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1PretenuringHandler.html#a4d9bdb2b07edf8f16e49f87bc65088bc">PretenuringHandler::PretenuringFeedbackMap</a>* local_pretenuring_feedback_;</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>  <span class="keywordtype">bool</span> is_incremental_marking_;</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> shortcut_strings_;</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>};</div>
</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span> </div>
<div class="foldopen" id="foldopen01754" data-start="{" data-end="};">
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html"> 1754</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html">EvacuateNewToOldSpacePageVisitor</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1HeapObjectVisitor.html">HeapObjectVisitor</a> {</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01756" data-start="{" data-end="}">
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a4d1553ba331c744c54b046ff216bfa76"> 1756</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a4d1553ba331c744c54b046ff216bfa76">EvacuateNewToOldSpacePageVisitor</a>(</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a>* record_visitor,</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>      <a class="code hl_typedef" href="classv8_1_1internal_1_1PretenuringHandler.html#a4d9bdb2b07edf8f16e49f87bc65088bc">PretenuringHandler::PretenuringFeedbackMap</a>* local_pretenuring_feedback)</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>      : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>),</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>        record_visitor_(record_visitor),</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>        moved_bytes_(0),</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>        pretenuring_handler_(heap_-&gt;pretenuring_handler()),</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>        local_pretenuring_feedback_(local_pretenuring_feedback) {}</div>
</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span> </div>
<div class="foldopen" id="foldopen01765" data-start="{" data-end="}">
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#ab08bf909e4b9d6b8aa72af4c17767896"> 1765</a></span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#ab08bf909e4b9d6b8aa72af4c17767896">Move</a>(<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>) {</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;heap()-&gt;new_space()-&gt;PromotePageToOldSpace(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>  }</div>
</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span> </div>
<div class="foldopen" id="foldopen01769" data-start="{" data-end="}">
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#adf2216bbd8150b14345b02a55cf7e355"> 1769</a></span>  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#adf2216bbd8150b14345b02a55cf7e355">Visit</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">int</span> size)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms) {</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>      <a class="code hl_function" href="classv8_1_1internal_1_1PretenuringHandler.html#afe6ffac83eddf7cac23594de7d90da1f">PretenuringHandler::UpdateAllocationSite</a>(</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>          heap_, object-&gt;map(), <span class="keywordtype">object</span>, size, local_pretenuring_feedback_);</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    }</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#af21f0f74e8bed1d00aab0e877e001759">HeapLayout::InCodeSpace</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>    record_visitor_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1HeapVisitor.html#ad4fb9c9a3f49f91865ebc0a8e47d6b40">Visit</a>(object-&gt;map(), <span class="keywordtype">object</span>, size);</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>  }</div>
</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span> </div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a88b766bb4b1fdf92a63add2a730fff03"> 1779</a></span>  intptr_t <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a88b766bb4b1fdf92a63add2a730fff03">moved_bytes</a>() { <span class="keywordflow">return</span> moved_bytes_; }</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a67905c0c95dc72ca1edee835d2b00aa2"> 1780</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a67905c0c95dc72ca1edee835d2b00aa2">account_moved_bytes</a>(intptr_t bytes) { moved_bytes_ += bytes; }</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span> </div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* heap_;</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>  <a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a>* record_visitor_;</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>  intptr_t moved_bytes_;</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PretenuringHandler.html">PretenuringHandler</a>* <span class="keyword">const</span> pretenuring_handler_;</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1PretenuringHandler.html#a4d9bdb2b07edf8f16e49f87bc65088bc">PretenuringHandler::PretenuringFeedbackMap</a>* local_pretenuring_feedback_;</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>};</div>
</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span> </div>
<div class="foldopen" id="foldopen01790" data-start="{" data-end="};">
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html"> 1790</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html">EvacuateOldSpaceVisitor</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1EvacuateVisitorBase.html">EvacuateVisitorBase</a> {</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01792" data-start="{" data-end="}">
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html#ac66c14aebc595f4389334a3799a27404"> 1792</a></span>  <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html#ac66c14aebc595f4389334a3799a27404">EvacuateOldSpaceVisitor</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_class" href="classv8_1_1internal_1_1EvacuationAllocator.html">EvacuationAllocator</a>* local_allocator,</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>                          <a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a>* record_visitor)</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1EvacuateVisitorBase.html">EvacuateVisitorBase</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>, local_allocator, record_visitor) {}</div>
</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span> </div>
<div class="foldopen" id="foldopen01796" data-start="{" data-end="}">
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html#a6bd5bea82ad2b8dabf63b2dc3ab08833"> 1796</a></span>  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html#a6bd5bea82ad2b8dabf63b2dc3ab08833">Visit</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">int</span> size)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> target_object;</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6321f4dbe8353193b8e5bd4ea1d96cf4">TryEvacuateObject</a>(</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>            <a class="code hl_function" href="classv8_1_1internal_1_1PageMetadata.html#ac37b751cd85e3a4b1e272da7ea409039">PageMetadata::FromHeapObject</a>(<span class="keywordtype">object</span>)-&gt;owner_identity(), <span class="keywordtype">object</span>,</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>            size, &amp;target_object)) {</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(object-&gt;map_word(<a class="code hl_variable" href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">heap_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>(), kRelaxedLoad)</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>                 .IsForwardingAddress());</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>    }</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>  }</div>
</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>};</div>
</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span> </div>
<div class="foldopen" id="foldopen01809" data-start="{" data-end="};">
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html"> 1809</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html">EvacuateRecordOnlyVisitor</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1HeapObjectVisitor.html">HeapObjectVisitor</a> {</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen01811" data-start="{" data-end="}">
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#a8e0748a9199cee3b8007aebb2d228604"> 1811</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#a8e0748a9199cee3b8007aebb2d228604">EvacuateRecordOnlyVisitor</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>)</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>      : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>), cage_base_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate()) {}</div>
</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span> </div>
<div class="foldopen" id="foldopen01814" data-start="{" data-end="}">
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#aff475f46419c2e731b1670e8e00d0270"> 1814</a></span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#aff475f46419c2e731b1670e8e00d0270">Visit</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">int</span> size)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>    <a class="code hl_class" href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">RecordMigratedSlotVisitor</a> visitor(heap_);</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> map = <span class="keywordtype">object</span>-&gt;map(cage_base_);</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>    <span class="comment">// Instead of calling object.IterateFast(cage_base(), &amp;visitor) here</span></div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>    <span class="comment">// we can shortcut and use the precomputed size value passed to the visitor.</span></div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(object-&gt;SizeFromMap(map), size);</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>    live_object_size_ += <a class="code hl_define" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(size);</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>    visitor.<a class="code hl_function" href="classv8_1_1internal_1_1HeapVisitor.html#ad4fb9c9a3f49f91865ebc0a8e47d6b40">Visit</a>(map, <span class="keywordtype">object</span>, size);</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>  }</div>
</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span> </div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#a8fb4b99fb5e8ee1714b20cb24f993a44"> 1825</a></span>  <span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#a8fb4b99fb5e8ee1714b20cb24f993a44">live_object_size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> live_object_size_; }</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span> </div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* heap_;</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>  <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a> cage_base_;</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>  <span class="keywordtype">size_t</span> live_object_size_ = 0;</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>};</div>
</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span> </div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen01834" data-start="{" data-end="}">
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba"> 1834</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">MarkCompactCollector::IsUnmarkedHeapObject</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> p) {</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> o = *p;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(o)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(o);</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>      <a class="code hl_namespace" href="namespaceheap.html">heap</a>, <a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;non_atomic_marking_state(), heap_object);</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>}</div>
</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span> </div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen01843" data-start="{" data-end="}">
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a45dbe9fb4c2e4b5ebdf19806b2de88fe"> 1843</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a45dbe9fb4c2e4b5ebdf19806b2de88fe">MarkCompactCollector::IsUnmarkedSharedHeapObject</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* client_heap,</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>                                                      <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> p) {</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> o = *p;</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(o)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(o);</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* shared_space_heap =</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>      client_heap-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#ad0665071d159ceddd6689d7e0abf7d70">shared_space_isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a8f158e28d6a29d8bf8459c45ba5e40c2">heap</a>();</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>      shared_space_heap, shared_space_heap-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ad7f6751c2a6c31794b119034eed13e76">non_atomic_marking_state</a>(),</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>      heap_object);</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>}</div>
</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span> </div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span><span class="keywordtype">void</span> MarkCompactCollector::MarkRoots(<a class="code hl_class" href="classv8_1_1internal_1_1RootVisitor.html">RootVisitor</a>* root_visitor) {</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> isolate = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span> </div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>  <span class="comment">// Mark the heap roots including global variables, stack variables,</span></div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>  <span class="comment">// etc., and all objects reachable from them.</span></div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>  heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a888246e231dc6514e84cbad718195f2e">IterateRoots</a>(</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>      root_visitor,</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>      <a class="code hl_class" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;SkipRoot&gt;</a>{<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562">SkipRoot::kWeak</a>, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155">SkipRoot::kTracedHandles</a>,</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>                              <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">SkipRoot::kConservativeStack</a>,</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>                              <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">SkipRoot::kReadOnlyBuiltins</a>});</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span> </div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>  <span class="comment">// Custom marking for top optimized frame.</span></div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>  CustomRootBodyMarkingVisitor custom_root_body_visitor(<span class="keyword">this</span>);</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>  ProcessTopOptimizedFrame(&amp;custom_root_body_visitor, isolate);</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span> </div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>  <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>    ClientRootVisitor&lt;&gt; client_root_visitor(root_visitor);</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>    ClientObjectVisitor&lt;&gt; client_custom_root_body_visitor(</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>        &amp;custom_root_body_visitor);</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span> </div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>    isolate-&gt;global_safepoint()-&gt;IterateClientIsolates(</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>        [<span class="keyword">this</span>, &amp;client_root_visitor,</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>         &amp;client_custom_root_body_visitor](Isolate* client) {</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>          client-&gt;heap()-&gt;IterateRoots(</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>              &amp;client_root_visitor,</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>              <a class="code hl_class" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;SkipRoot&gt;</a>{<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562">SkipRoot::kWeak</a>,</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>                                      <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">SkipRoot::kConservativeStack</a>,</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>                                      <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">SkipRoot::kReadOnlyBuiltins</a>});</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>          ProcessTopOptimizedFrame(&amp;client_custom_root_body_visitor, client);</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>        });</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>  }</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>}</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span> </div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span><span class="keywordtype">void</span> MarkCompactCollector::MarkRootsFromConservativeStack(</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>    RootVisitor* root_visitor) {</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::CONSERVATIVE_STACK_SCANNING);</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>  heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a7a2c58e09fbea6b68a9a0fbffb98d124">IterateConservativeStackRoots</a>(root_visitor,</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>                                       <a class="code hl_enumvalue" href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d">Heap::IterateRootsMode::kMainIsolate</a>);</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span> </div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>  Isolate* <span class="keyword">const</span> isolate = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>  <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>    ClientRootVisitor&lt;&gt; client_root_visitor(root_visitor);</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>    <span class="comment">// For client isolates, use the stack marker to conservatively scan the</span></div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>    <span class="comment">// stack.</span></div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>    isolate-&gt;global_safepoint()-&gt;IterateClientIsolates(</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>        [v = &amp;client_root_visitor](Isolate* client) {</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>          client-&gt;heap()-&gt;IterateConservativeStackRoots(</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>              v, <a class="code hl_enumvalue" href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0">Heap::IterateRootsMode::kClientIsolate</a>);</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>        });</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>  }</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>}</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span> </div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span><span class="keywordtype">void</span> MarkCompactCollector::MarkObjectsFromClientHeaps() {</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>  Isolate* <span class="keyword">const</span> isolate = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>  <span class="keywordflow">if</span> (!isolate-&gt;is_shared_space_isolate()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span> </div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>  isolate-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a473cf310f12ac1cf2ccdd546a81b9807">global_safepoint</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1GlobalSafepoint.html#a32122b662818cfca794f899a8acac219">IterateClientIsolates</a>(</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>      [collector = <span class="keyword">this</span>](Isolate* client) {</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>        collector-&gt;MarkObjectsFromClientHeap(client);</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>      });</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>}</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span> </div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span><span class="keywordtype">void</span> MarkCompactCollector::MarkObjectsFromClientHeap(Isolate* client) {</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>  <span class="comment">// There is no OLD_TO_SHARED remembered set for the young generation. We</span></div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>  <span class="comment">// therefore need to iterate each object and check whether it points into the</span></div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>  <span class="comment">// shared heap. As an optimization and to avoid a second heap iteration in the</span></div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>  <span class="comment">// &quot;update pointers&quot; phase, all pointers into the shared heap are recorded in</span></div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>  <span class="comment">// the OLD_TO_SHARED remembered set as well.</span></div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>  SharedHeapObjectVisitor visitor(<span class="keyword">this</span>);</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span> </div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>  PtrComprCageBase cage_base(client);</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>  Heap* client_heap = client-&gt;heap();</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span> </div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>  <span class="comment">// Finish sweeping for new space in order to iterate objects in it.</span></div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>  client_heap-&gt;sweeper()-&gt;FinishMinorJobs();</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>  <span class="comment">// Finish sweeping for old generation in order to iterate OLD_TO_SHARED.</span></div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>  client_heap-&gt;sweeper()-&gt;FinishMajorJobs();</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span> </div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* new_space = client_heap-&gt;new_space()) {</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!client_heap-&gt;allocator()-&gt;new_space_allocator()-&gt;IsLabValid());</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="keywordflow">for</span> (PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> : *new_space) {</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>      <span class="keywordflow">for</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> obj : HeapObjectRange(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>)) {</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>        visitor.Visit(obj);</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>      }</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    }</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>  }</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span> </div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>  <span class="keywordflow">if</span> (client_heap-&gt;new_lo_space()) {</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    std::unique_ptr&lt;ObjectIterator&gt; iterator =</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>        client_heap-&gt;new_lo_space()-&gt;GetObjectIterator(client_heap);</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    <span class="keywordflow">for</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> obj = iterator-&gt;Next(); !obj.is_null();</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>         obj = iterator-&gt;Next()) {</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>      visitor.Visit(obj);</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    }</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>  }</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span> </div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>  <span class="comment">// In the old generation we can simply use the OLD_TO_SHARED remembered set to</span></div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>  <span class="comment">// find all incoming pointers into the shared heap.</span></div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>  OldGenerationMemoryChunkIterator chunk_iterator(client_heap);</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span> </div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>  <span class="comment">// Tracking OLD_TO_SHARED requires the write barrier.</span></div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.disable_write_barriers);</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span> </div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>  <span class="keywordflow">for</span> (MutablePageMetadata* chunk = chunk_iterator.next(); chunk;</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>       chunk = chunk_iterator.next()) {</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>    <span class="keyword">const</span> <span class="keyword">auto</span> slot_count = <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">RememberedSet&lt;OLD_TO_SHARED&gt;::Iterate</a>(</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>        chunk,</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>        [collector = <span class="keyword">this</span>, cage_base](<a class="code hl_typedef" href="namespacev8_1_1internal.html#adade5e1dd0ce3dc6f030ff3ea640f424">MaybeObjectSlot</a> slot) {</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>          <a class="code hl_variable" href="namespacev8_1_1internal.html#a0e37222f89b601646c5c64b07fd55cc0">Tagged&lt;MaybeObject&gt;</a> obj = slot.Relaxed_Load(cage_base);</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>          <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object;</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span> </div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>          <span class="keywordflow">if</span> (obj.GetHeapObject(&amp;heap_object) &amp;&amp;</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>              <a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) {</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>            <span class="comment">// If the object points to the black allocated shared page, don&#39;t</span></div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>            <span class="comment">// mark the object, but still keep the slot.</span></div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(collector-&gt;heap(),</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>                                                heap_object)) {</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>              collector-&gt;MarkRootObject(</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>                  Root::kClientHeap, heap_object,</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>                  <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>);</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>            }</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>          }</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>        },</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>        <a class="code hl_enumvalue" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>    <span class="keywordflow">if</span> (slot_count == 0) {</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>      chunk-&gt;ReleaseSlotSet(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">OLD_TO_SHARED</a>);</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>    }</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span> </div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>    <span class="keyword">const</span> <span class="keyword">auto</span> typed_slot_count = <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#a948ca4aacbb909303ffd8d7b78ceb9be">RememberedSet&lt;OLD_TO_SHARED&gt;::IterateTyped</a>(</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>        chunk,</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>        [collector = <span class="keyword">this</span>, client_heap](<a class="code hl_enumeration" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1">SlotType</a> slot_type, <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> slot) {</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>          <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object =</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>              <a class="code hl_function" href="classv8_1_1internal_1_1UpdateTypedSlotHelper.html#a4b52de1f32d1c5e37149e76eb8b3d387">UpdateTypedSlotHelper::GetTargetObject</a>(client_heap, slot_type,</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>                                                     slot);</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) {</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>            <span class="comment">// If the object points to the black allocated shared page, don&#39;t</span></div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>            <span class="comment">// mark the object, but still keep the slot.</span></div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(collector-&gt;heap(),</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>                                                heap_object)) {</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>              collector-&gt;MarkRootObject(</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>                  Root::kClientHeap, heap_object,</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>                  <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>);</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>            }</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>          }</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>        });</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>    <span class="keywordflow">if</span> (typed_slot_count == 0) {</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>      chunk-&gt;ReleaseTypedSlotSet(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">OLD_TO_SHARED</a>);</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    }</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span> </div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>    <span class="keyword">const</span> <span class="keyword">auto</span> protected_slot_count =</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>        <a class="code hl_function" href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">RememberedSet&lt;TRUSTED_TO_SHARED_TRUSTED&gt;::Iterate</a>(</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>            chunk,</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>            [collector = <span class="keyword">this</span>](<a class="code hl_typedef" href="namespacev8_1_1internal.html#adade5e1dd0ce3dc6f030ff3ea640f424">MaybeObjectSlot</a> slot) {</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>              <a class="code hl_typedef" href="namespacev8_1_1internal.html#a4ec7ab128c7d0f56267c22c7ee13d019">ProtectedPointerSlot</a> protected_slot(slot.address());</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>              <a class="code hl_variable" href="namespacev8_1_1internal.html#a0e37222f89b601646c5c64b07fd55cc0">Tagged&lt;MaybeObject&gt;</a> obj = protected_slot.Relaxed_Load();</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>              <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> heap_object;</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span> </div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>              <span class="keywordflow">if</span> (obj.GetHeapObject(&amp;heap_object) &amp;&amp;</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>                  <a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(heap_object)) {</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>                <span class="comment">// If the object points to the black allocated shared page,</span></div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>                <span class="comment">// don&#39;t mark the object, but still keep the slot.</span></div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(collector-&gt;heap(),</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>                                                    heap_object)) {</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>                  collector-&gt;MarkRootObject(</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>                      Root::kClientHeap, heap_object,</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>                      <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>);</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>                }</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>              } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>              }</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>            },</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>            <a class="code hl_enumvalue" href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">SlotSet::FREE_EMPTY_BUCKETS</a>);</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>    <span class="keywordflow">if</span> (protected_slot_count == 0) {</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>      chunk-&gt;ReleaseSlotSet(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31">TRUSTED_TO_SHARED_TRUSTED</a>);</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>    }</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>  }</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span> </div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsSharedExternalPointerType(kExternalStringResourceTag));</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsSharedExternalPointerType(kExternalStringResourceDataTag));</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>  <span class="comment">// All ExternalString resources are stored in the shared external pointer</span></div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>  <span class="comment">// table. Mark entries from client heaps.</span></div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>  ExternalPointerTable&amp; shared_table = client-&gt;shared_external_pointer_table();</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>  ExternalPointerTable::Space* shared_space =</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>      client-&gt;shared_external_pointer_space();</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>  MarkExternalPointerFromExternalStringTable external_string_visitor(</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>      &amp;shared_table, shared_space);</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>  client_heap-&gt;external_string_table_.IterateAll(&amp;external_string_visitor);</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>}</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span> </div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span><span class="keywordtype">bool</span> MarkCompactCollector::MarkTransitiveClosureUntilFixpoint() {</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>  <span class="keywordtype">int</span> iterations = 0;</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>  <span class="keywordtype">int</span> max_iterations = <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.ephemeron_fixpoint_iterations;</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span> </div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>  <span class="keywordtype">bool</span> another_ephemeron_iteration_main_thread;</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span> </div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>    PerformWrapperTracing();</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span> </div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>    <span class="keywordflow">if</span> (iterations &gt;= max_iterations) {</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>      <span class="comment">// Give up fixpoint iteration and switch to linear algorithm.</span></div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>    }</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span> </div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>    <span class="comment">// Move ephemerons from next_ephemerons into current_ephemerons to</span></div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>    <span class="comment">// drain them in this iteration.</span></div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>        <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>    weak_objects_.current_ephemerons.Merge(weak_objects_.next_ephemerons);</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#adad9b09397a5d864fbfc58c3ac91ccda">set_another_ephemeron_iteration</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span> </div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>    {</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>      <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(),</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>               GCTracer::Scope::MC_MARK_WEAK_CLOSURE_EPHEMERON_MARKING);</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>      another_ephemeron_iteration_main_thread = ProcessEphemerons();</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>    }</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span> </div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>    <span class="comment">// Can only check for local emptiness here as parallel marking tasks may</span></div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>    <span class="comment">// still be running. The caller performs the CHECKs for global emptiness.</span></div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalEmpty());</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;discovered_ephemerons_local.IsLocalEmpty());</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span> </div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>    ++iterations;</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>  } <span class="keywordflow">while</span> (another_ephemeron_iteration_main_thread ||</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>           heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#aece67b16f36fe0fcea37a7bd7de858f6">another_ephemeron_iteration</a>() ||</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>           !local_marking_worklists_-&gt;IsEmpty() ||</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>           !<a class="code hl_function" href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">IsCppHeapMarkingFinished</a>(heap_, local_marking_worklists_.get()));</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span> </div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>}</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span> </div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span><span class="keywordtype">bool</span> MarkCompactCollector::ProcessEphemerons() {</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>  Ephemeron ephemeron;</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>  <span class="keywordtype">bool</span> another_ephemeron_iteration = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span> </div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>  <span class="comment">// Drain current_ephemerons and push ephemerons where key and value are still</span></div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>  <span class="comment">// unreachable into next_ephemerons.</span></div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>  <span class="keywordflow">while</span> (<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>    <span class="keywordflow">if</span> (ProcessEphemeron(ephemeron.key, ephemeron.value)) {</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>      another_ephemeron_iteration = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>    }</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>  }</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span> </div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>  <span class="comment">// Drain marking worklist and push discovered ephemerons into</span></div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>  <span class="comment">// discovered_ephemerons.</span></div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>  <span class="keywordtype">size_t</span> objects_processed;</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>  std::tie(std::ignore, objects_processed) =</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#acede4ac283242743a83a4a45ec8de53f">ProcessMarkingWorklist</a>(<a class="code hl_function" href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a>(), SIZE_MAX,</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>                             <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8">MarkingWorklistProcessingMode::kDefault</a>);</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span> </div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>  <span class="comment">// As soon as a single object was processed and potentially marked another</span></div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>  <span class="comment">// object we need another iteration. Otherwise we might miss to apply</span></div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>  <span class="comment">// ephemeron semantics on it.</span></div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>  <span class="keywordflow">if</span> (objects_processed &gt; 0) another_ephemeron_iteration = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span> </div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>  <span class="comment">// Drain discovered_ephemerons (filled in the drain MarkingWorklist-phase</span></div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>  <span class="comment">// before) and push ephemerons where key and value are still unreachable into</span></div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>  <span class="comment">// next_ephemerons.</span></div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>  <span class="keywordflow">while</span> (<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;discovered_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>    <span class="keywordflow">if</span> (ProcessEphemeron(ephemeron.key, ephemeron.value)) {</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>      another_ephemeron_iteration = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>    }</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>  }</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span> </div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>  <span class="comment">// Flush local ephemerons for main task to global pool.</span></div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;ephemeron_hash_tables_local.<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;next_ephemerons_local.<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span> </div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>  <span class="keywordflow">return</span> another_ephemeron_iteration;</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>}</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span> </div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span><span class="keywordtype">void</span> MarkCompactCollector::MarkTransitiveClosureLinear() {</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(),</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>           GCTracer::Scope::MC_MARK_WEAK_CLOSURE_EPHEMERON_LINEAR);</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>  <span class="comment">// This phase doesn&#39;t support parallel marking.</span></div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#a06980681d462120291c2047124cd6a3a">IsStopped</a>());</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>  <span class="comment">// We must use the full pointer comparison here as this map will be queried</span></div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>  <span class="comment">// with objects from different cages (e.g. code- or trusted cage).</span></div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>  std::unordered_multimap&lt;Tagged&lt;HeapObject&gt;, <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a>,</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>                          Object::Hasher, Object::KeyEqualSafe&gt;</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>      key_to_values;</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>  Ephemeron ephemeron;</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span> </div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>  weak_objects_.current_ephemerons.Merge(weak_objects_.next_ephemerons);</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>  <span class="keywordflow">while</span> (<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>    ProcessEphemeron(ephemeron.key, ephemeron.value);</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span> </div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>            heap_, non_atomic_marking_state_, ephemeron.value)) {</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>      key_to_values.insert(std::make_pair(ephemeron.key, ephemeron.value));</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>    }</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>  }</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span> </div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>  ephemeron_marking_.<a class="code hl_variable" href="structv8_1_1internal_1_1EphemeronMarking.html#a32d2dab1c9fc92fc74c2ad3e576012dc">newly_discovered_limit</a> = key_to_values.size();</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>  <span class="keywordtype">bool</span> work_to_do = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span> </div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>  <span class="keywordflow">while</span> (work_to_do) {</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>    PerformWrapperTracing();</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span> </div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a235e4fc226f4d1987e55574f537c628a">ResetNewlyDiscovered</a>();</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>    ephemeron_marking_.<a class="code hl_variable" href="structv8_1_1internal_1_1EphemeronMarking.html#a32d2dab1c9fc92fc74c2ad3e576012dc">newly_discovered_limit</a> = key_to_values.size();</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span> </div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>    {</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>      <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(),</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>               GCTracer::Scope::MC_MARK_WEAK_CLOSURE_EPHEMERON_MARKING);</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>      <span class="comment">// Drain marking worklist and push all discovered objects into</span></div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>      <span class="comment">// newly_discovered.</span></div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#acede4ac283242743a83a4a45ec8de53f">ProcessMarkingWorklist</a>(</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>          <a class="code hl_function" href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a>(), SIZE_MAX,</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>          <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abeaf8d54e6b36884f2c419c2b3c1c2a1d21">MarkingWorklistProcessingMode::kTrackNewlyDiscoveredObjects</a>);</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>    }</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span> </div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    <span class="keywordflow">while</span> (<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;discovered_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>      ProcessEphemeron(ephemeron.key, ephemeron.value);</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span> </div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>              heap_, non_atomic_marking_state_, ephemeron.value)) {</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>        key_to_values.insert(std::make_pair(ephemeron.key, ephemeron.value));</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>      }</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>    }</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span> </div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>    <span class="keywordflow">if</span> (ephemeron_marking_.<a class="code hl_variable" href="structv8_1_1internal_1_1EphemeronMarking.html#a880dff524fb7e7d3b0df5781d3d1077d">newly_discovered_overflowed</a>) {</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>      <span class="comment">// If newly_discovered was overflowed just visit all ephemerons in</span></div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>      <span class="comment">// next_ephemerons.</span></div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;next_ephemerons_local.<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>      weak_objects_.next_ephemerons.Iterate([&amp;](Ephemeron ephemeron) {</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a7835e19deaaf9158c792811b0259c3d7">MarkingHelper::IsMarkedOrAlwaysLive</a>(</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>                heap_, non_atomic_marking_state_, ephemeron.key)) {</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(heap_, ephemeron.value)) {</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>            <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a2d8f6d02b9e8a3e6114c8b1e050aa358">MarkingHelper::TryMarkAndPush</a>(</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>                heap_, local_marking_worklists_.get(),</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>                non_atomic_marking_state_,</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>                <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>, ephemeron.value);</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>          }</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>        }</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>      });</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span> </div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>      <span class="comment">// This is the good case: newly_discovered stores all discovered</span></div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>      <span class="comment">// objects. Now use key_to_values to see if discovered objects keep more</span></div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>      <span class="comment">// objects alive due to ephemeron semantics.</span></div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>      <span class="keywordflow">for</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> <span class="keywordtype">object</span> : ephemeron_marking_.<a class="code hl_variable" href="structv8_1_1internal_1_1EphemeronMarking.html#a9a6ef141d194b072f366a3afc9537f16">newly_discovered</a>) {</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>        <span class="keyword">auto</span> range = key_to_values.equal_range(<span class="keywordtype">object</span>);</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = range.first; it != range.second; ++it) {</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>          <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> value = it-&gt;second;</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>          <span class="keyword">const</span> <span class="keyword">auto</span> target_worklist =</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>              <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(heap_, value);</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>          <span class="keywordflow">if</span> (target_worklist) {</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>            MarkObject(<span class="keywordtype">object</span>, value, target_worklist.value());</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>          }</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>        }</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>      }</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>    }</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span> </div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>    <span class="comment">// Do NOT drain marking worklist here, otherwise the current checks</span></div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>    <span class="comment">// for work_to_do are not sufficient for determining if another iteration</span></div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>    <span class="comment">// is necessary.</span></div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span> </div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>    work_to_do =</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>        !local_marking_worklists_-&gt;IsEmpty() ||</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>        !<a class="code hl_function" href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">IsCppHeapMarkingFinished</a>(heap_, local_marking_worklists_.get());</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>              -&gt;discovered_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>  }</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span> </div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a235e4fc226f4d1987e55574f537c628a">ResetNewlyDiscovered</a>();</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>  ephemeron_marking_.<a class="code hl_variable" href="structv8_1_1internal_1_1EphemeronMarking.html#a9a6ef141d194b072f366a3afc9537f16">newly_discovered</a>.shrink_to_fit();</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span> </div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(local_marking_worklists_-&gt;IsEmpty());</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span> </div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(weak_objects_.current_ephemerons.IsEmpty());</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(weak_objects_.discovered_ephemerons.IsEmpty());</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span> </div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>  <span class="comment">// Flush local ephemerons for main task to global pool.</span></div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;ephemeron_hash_tables_local.<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;next_ephemerons_local.<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>}</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span> </div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span><span class="keywordtype">void</span> MarkCompactCollector::PerformWrapperTracing() {</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>  <span class="keyword">auto</span>* cpp_heap = <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;cpp_heap_);</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>  <span class="keywordflow">if</span> (!cpp_heap) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span> </div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_EMBEDDER_TRACING);</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>  cpp_heap-&gt;AdvanceTracing(<a class="code hl_function" href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a>());</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>}</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span> </div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span> </div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kDeadlineCheckInterval = 128u;</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span> </div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span> </div>
<div class="foldopen" id="foldopen02258" data-start="{" data-end="}">
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#acede4ac283242743a83a4a45ec8de53f"> 2258</a></span>std::pair&lt;size_t, size_t&gt; <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#acede4ac283242743a83a4a45ec8de53f">MarkCompactCollector::ProcessMarkingWorklist</a>(</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>    <a class="code hl_class" href="classv8_1_1base_1_1TimeDelta.html">v8::base::TimeDelta</a> max_duration, <span class="keywordtype">size_t</span> max_bytes_to_process,</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>    <a class="code hl_enumeration" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abe">MarkingWorklistProcessingMode</a> mode) {</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> object;</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>  <span class="keywordtype">size_t</span> bytes_processed = 0;</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>  <span class="keywordtype">size_t</span> objects_processed = 0;</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>  <span class="keywordtype">bool</span> is_per_context_mode = local_marking_worklists_-&gt;IsPerContextMode();</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> isolate = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>  <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = <a class="code hl_function" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">v8::base::TimeTicks::Now</a>();</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a> cage_base(isolate);</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span> </div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>  <span class="keywordflow">if</span> (parallel_marking_ &amp;&amp; <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>()) {</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">RescheduleJobIfNeeded</a>(</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>        <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>, TaskPriority::kUserBlocking);</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>  }</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span> </div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>  <span class="keywordflow">while</span> (local_marking_worklists_-&gt;Pop(&amp;<span class="keywordtype">object</span>) ||</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>         local_marking_worklists_-&gt;PopOnHold(&amp;<span class="keywordtype">object</span>)) {</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>    <span class="comment">// The marking worklist should never contain filler objects.</span></div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!IsFreeSpaceOrFiller(<span class="keywordtype">object</span>, cage_base));</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a91ac1680dc7f626bd8675e14ac660240">HeapLayout::InReadOnlySpace</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_function" href="classv8_1_1internal_1_1HeapUtils.html#a0ca292749d64b1e6459e456cedc515b1">HeapUtils::GetOwnerHeap</a>(<span class="keywordtype">object</span>), heap_);</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a49599076f26bcf5567b86d2dc86cc7b2">Contains</a>(<span class="keywordtype">object</span>));</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!(marking_state_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">IsUnmarked</a>(<span class="keywordtype">object</span>)));</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>    <span class="keywordflow">if</span> (mode == <a class="code hl_enumeration" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abe">MarkCompactCollector::MarkingWorklistProcessingMode</a>::</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>                    <a class="code hl_enumvalue" href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abeaf8d54e6b36884f2c419c2b3c1c2a1d21">kTrackNewlyDiscoveredObjects</a>) {</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#af4b2c802a91043776e4524988dd7ec22">AddNewlyDiscovered</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>    }</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> map = <span class="keywordtype">object</span>-&gt;map(cage_base);</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>    <span class="keywordflow">if</span> (is_per_context_mode) {</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>;</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>      <span class="keywordflow">if</span> (native_context_inferrer_.<a class="code hl_function" href="classv8_1_1internal_1_1NativeContextInferrer.html#a25a195accfb5080cb345588b4d0eae39">Infer</a>(cage_base, map, <span class="keywordtype">object</span>, &amp;<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>)) {</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>        local_marking_worklists_-&gt;SwitchToContext(<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>);</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>      }</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>    }</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>    <span class="keyword">const</span> <span class="keyword">auto</span> visited_size = marking_visitor_-&gt;Visit(map, <span class="keywordtype">object</span>);</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>    <span class="keywordflow">if</span> (visited_size) {</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">MutablePageMetadata::FromHeapObject</a>(<span class="keywordtype">object</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MutablePageMetadata.html#a04ea75362eb0f4229d1f0e20704bf762">IncrementLiveBytesAtomically</a>(</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>          <a class="code hl_define" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(visited_size));</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>    }</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>    <span class="keywordflow">if</span> (is_per_context_mode) {</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>      native_context_stats_.<a class="code hl_function" href="classv8_1_1internal_1_1NativeContextStats.html#a0d455fead2eed365f5ed917844f03744">IncrementSize</a>(local_marking_worklists_-&gt;Context(),</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>                                          map, <span class="keywordtype">object</span>, visited_size);</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>    }</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>    bytes_processed += visited_size;</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>    objects_processed++;</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>    <span class="keyword">static_assert</span>(<a class="code hl_function" href="namespacev8_1_1base_1_1bits.html#a4d06086712ebcd60838caae1a21fcfa3">base::bits::IsPowerOfTwo</a>(kDeadlineCheckInterval),</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>                  <span class="stringliteral">&quot;kDeadlineCheckInterval must be power of 2&quot;</span>);</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>    <span class="comment">// The below check is an optimized version of</span></div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>    <span class="comment">// `(objects_processed % kDeadlineCheckInterval) == 0`</span></div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>    <span class="keywordflow">if</span> ((objects_processed &amp; (kDeadlineCheckInterval -1)) == 0 &amp;&amp;</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>        ((<a class="code hl_function" href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">v8::base::TimeTicks::Now</a>() - <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>) &gt; max_duration)) {</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>    }</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>    <span class="keywordflow">if</span> (bytes_processed &gt;= max_bytes_to_process) {</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>    }</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>  }</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>  <span class="keywordflow">return</span> std::make_pair(bytes_processed, objects_processed);</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>}</div>
</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span> </div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span><span class="keywordtype">bool</span> MarkCompactCollector::ProcessEphemeron(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>,</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>                                            <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> value) {</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>  <span class="comment">// Objects in the shared heap are prohibited from being used as keys in</span></div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>  <span class="comment">// WeakMaps and WeakSets and therefore cannot be ephemeron keys, because that</span></div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>  <span class="comment">// would enable thread local -&gt; shared heap edges.</span></div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">HeapLayout::InWritableSharedSpace</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>));</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>  <span class="comment">// Usually values that should not be marked are not added to the ephemeron</span></div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>  <span class="comment">// worklist. However, minor collection during incremental marking may promote</span></div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>  <span class="comment">// strings from the younger generation into the shared heap. This</span></div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>  <span class="comment">// ShouldMarkObject call catches those cases.</span></div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>  <span class="keyword">const</span> <span class="keyword">auto</span> target_worklist = <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(heap_, value);</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>  <span class="keywordflow">if</span> (!target_worklist) {</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>  }</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a7835e19deaaf9158c792811b0259c3d7">MarkingHelper::IsMarkedOrAlwaysLive</a>(heap_, marking_state_, <a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>)) {</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a2d8f6d02b9e8a3e6114c8b1e050aa358">MarkingHelper::TryMarkAndPush</a>(heap_, local_marking_worklists_.get(),</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>                                      marking_state_, target_worklist.value(),</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>                                      value)) {</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>    }</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (marking_state_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">IsUnmarked</a>(value)) {</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;next_ephemerons_local.Push(Ephemeron{<a class="code hl_variable" href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">key</a>, value});</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>  }</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>}</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span> </div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span><span class="keywordtype">void</span> MarkCompactCollector::VerifyEphemeronMarking() {</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span><span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>    Ephemeron ephemeron;</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span> </div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>        <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>    weak_objects_.current_ephemerons.Merge(weak_objects_.next_ephemerons);</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>    <span class="keywordflow">while</span> (<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.Pop(&amp;ephemeron)) {</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>      <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!ProcessEphemeron(ephemeron.key, ephemeron.value));</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>    }</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>  }</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span><span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>}</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span> </div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span><span class="keywordtype">void</span> MarkCompactCollector::MarkTransitiveClosure() {</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>  <span class="comment">// Incremental marking might leave ephemerons in main task&#39;s local</span></div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>  <span class="comment">// buffer, flush it into global pool.</span></div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>  <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;next_ephemerons_local.<a class="code hl_function" href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">Publish</a>();</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span> </div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>  <span class="keywordflow">if</span> (!MarkTransitiveClosureUntilFixpoint()) {</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>    <span class="comment">// Fixpoint iteration needed too many iterations and was cancelled. Use the</span></div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>    <span class="comment">// guaranteed linear algorithm. But only in the final single-thread marking</span></div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>    <span class="comment">// phase.</span></div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>    <span class="keywordflow">if</span> (!parallel_marking_) MarkTransitiveClosureLinear();</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>  }</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>}</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span> </div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span><span class="keywordtype">void</span> MarkCompactCollector::ProcessTopOptimizedFrame(ObjectVisitor* visitor,</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>                                                    Isolate* isolate) {</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>  <span class="keywordflow">for</span> (StackFrameIterator it(isolate, isolate-&gt;thread_local_top(),</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>                             StackFrameIterator::NoHandles{});</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>       !it.done(); it.Advance()) {</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>    <span class="keywordflow">if</span> (it.frame()-&gt;is_unoptimized_js()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>    <span class="keywordflow">if</span> (it.frame()-&gt;is_optimized_js()) {</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;GcSafeCode&gt;</a> lookup_result = it.frame()-&gt;GcSafeLookupCode();</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>      <span class="keywordflow">if</span> (!lookup_result-&gt;has_instruction_stream()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>      <span class="keywordflow">if</span> (!lookup_result-&gt;CanDeoptAt(isolate,</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>                                     it.frame()-&gt;maybe_unauthenticated_pc())) {</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;InstructionStream&gt;</a> istream = <a class="code hl_function" href="namespacev8_1_1internal.html#a6ec58efb6d7b6b12187c9c9426333e83">UncheckedCast&lt;InstructionStream&gt;</a>(</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>            lookup_result-&gt;raw_instruction_stream());</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>        PtrComprCageBase cage_base(isolate);</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>        <a class="code hl_function" href="classv8_1_1internal_1_1InstructionStream_1_1BodyDescriptor.html#a3dc621f70c59e9b883069ff79ec147c2">InstructionStream::BodyDescriptor::IterateBody</a>(istream-&gt;map(cage_base),</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>                                                       istream, visitor);</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>      }</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>    }</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>  }</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>}</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span> </div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span><span class="keywordtype">void</span> MarkCompactCollector::RecordObjectStats() {</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>  <span class="keywordflow">if</span> (V8_LIKELY(!<a class="code hl_function" href="structv8_1_1internal_1_1TracingFlags.html#a6ae2ff9ff9df795354e7f9bcda063268">TracingFlags::is_gc_stats_enabled</a>())) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>  <span class="comment">// Cannot run during bootstrapping due to incomplete objects.</span></div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>  <span class="keywordflow">if</span> (heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a3dcd398397211e68e3992961c3875c67">bootstrapper</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Bootstrapper.html#a2ed96a283695ebb5718bfa6922f489d1">IsActive</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code hl_define" href="gc-tracer_8h.html#af107f5a2136b9fcf104fc8c23a5bdfaa">TRACE_GC_CATEGORIES</a>, <span class="stringliteral">&quot;V8.GC_OBJECT_DUMP_STATISTICS&quot;</span>);</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>  heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#affa42c4fc2313750c08caf4556f44790">CreateObjectStats</a>();</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>  ObjectStatsCollector collector(heap_, heap_-&gt;live_object_stats_.get(),</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>                                 heap_-&gt;dead_object_stats_.get());</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>  collector.Collect();</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(<a class="code hl_variable" href="structv8_1_1internal_1_1TracingFlags.html#a2b550a4619e10cd8ccffb3bcb49922c1">TracingFlags::gc_stats</a>.load(std::memory_order_relaxed) &amp;</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>                  <a class="code hl_enumvalue" href="classv8_1_1tracing_1_1TracingCategoryObserver.html#aeb955195fe66a5b0497cff536c090589a31fe0ad3ce8b8c278bd0f78770f13b30">v8::tracing::TracingCategoryObserver::ENABLED_BY_TRACING</a>)) {</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>    std::stringstream live, dead;</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>    heap_-&gt;live_object_stats_-&gt;Dump(live);</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>    heap_-&gt;dead_object_stats_-&gt;Dump(dead);</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>    <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a9caa02a30959b26112c2dcc35ed3727e">TRACE_EVENT_INSTANT2</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc_stats&quot;</span>),</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>                         <span class="stringliteral">&quot;V8.GC_Objects_Stats&quot;</span>, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a8b5bca924ef796a311bb5ba5c8d7f57d">TRACE_EVENT_SCOPE_THREAD</a>,</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>                         <span class="stringliteral">&quot;live&quot;</span>, <a class="code hl_define" href="tracing_2trace-event_8h.html#a3e7918f87c057008134f23473b59c341">TRACE_STR_COPY</a>(live.str().c_str()), <span class="stringliteral">&quot;dead&quot;</span>,</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>                         <a class="code hl_define" href="tracing_2trace-event_8h.html#a3e7918f87c057008134f23473b59c341">TRACE_STR_COPY</a>(dead.str().c_str()));</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>  }</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_gc_object_stats) {</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>    heap_-&gt;live_object_stats_-&gt;PrintJSON(<span class="stringliteral">&quot;live&quot;</span>);</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>    heap_-&gt;dead_object_stats_-&gt;PrintJSON(<span class="stringliteral">&quot;dead&quot;</span>);</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>  }</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>  heap_-&gt;live_object_stats_-&gt;CheckpointObjectStats();</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>  heap_-&gt;dead_object_stats_-&gt;ClearObjectStats();</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>}</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span> </div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span> </div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span><span class="keywordtype">bool</span> ShouldRetainMap(Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, MarkingState* marking_state, <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> map,</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>                     <span class="keywordtype">int</span> age) {</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>  <span class="keywordflow">if</span> (age == 0) {</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>    <span class="comment">// The map has aged. Do not retain this map.</span></div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>  }</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> constructor = map-&gt;GetConstructor();</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(constructor) ||</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>      <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>          <a class="code hl_namespace" href="namespaceheap.html">heap</a>, marking_state, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(constructor))) {</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>    <span class="comment">// The constructor is dead, no new objects with this map can</span></div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    <span class="comment">// be created. Do not retain this map.</span></div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>  }</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>}</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span> </div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span> </div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span><span class="keywordtype">void</span> MarkCompactCollector::RetainMaps() {</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>  <span class="comment">// Retaining maps increases the chances of reusing map transitions at some</span></div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>  <span class="comment">// memory cost, hence disable it when trying to reduce memory footprint more</span></div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>  <span class="comment">// aggressively.</span></div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> should_retain_maps =</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>      !heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">ShouldReduceMemory</a>() &amp;&amp; <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.retain_maps_for_n_gc != 0;</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span> </div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>  <span class="keywordflow">for</span> (<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;WeakArrayList&gt;</a> retained_maps : heap_-&gt;FindAllRetainedMaps()) {</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, retained_maps-&gt;length() % 2);</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; retained_maps-&gt;<a class="code hl_class" href="classlength.html">length</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> += 2) {</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a0e37222f89b601646c5c64b07fd55cc0">Tagged&lt;MaybeObject&gt;</a> value = retained_maps-&gt;Get(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> map_heap_object;</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>      <span class="keywordflow">if</span> (!value.GetHeapObjectIfWeak(&amp;map_heap_object)) {</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>      }</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>      <span class="keywordtype">int</span> age = retained_maps-&gt;Get(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> + 1).ToSmi().value();</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>      <span class="keywordtype">int</span> new_age;</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Map&gt;</a> map = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(map_heap_object);</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>      <span class="keywordflow">if</span> (should_retain_maps &amp;&amp; <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>                                    heap_, marking_state_, map)) {</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>        <span class="keywordflow">if</span> (ShouldRetainMap(heap_, marking_state_, map, age)) {</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">MarkingHelper::ShouldMarkObject</a>(heap_, map)) {</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>            <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a2d8f6d02b9e8a3e6114c8b1e050aa358">MarkingHelper::TryMarkAndPush</a>(</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>                heap_, local_marking_worklists_.get(), marking_state_,</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>                <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">MarkingHelper::WorklistTarget::kRegular</a>, map);</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>          }</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>        }</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> prototype = map-&gt;prototype();</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>        <span class="keywordflow">if</span> (age &gt; 0 &amp;&amp; <a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(prototype) &amp;&amp;</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>            <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>                heap_, marking_state_, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(prototype))) {</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>          <span class="comment">// The prototype is not marked, age the map.</span></div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>          new_age = age - 1;</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>          <span class="comment">// The prototype and the constructor are marked, this map keeps only</span></div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>          <span class="comment">// transition tree alive, not JSObjects. Do not age the map.</span></div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>          new_age = age;</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>        }</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>        new_age = <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.retain_maps_for_n_gc;</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>      }</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>      <span class="comment">// Compact the array and update the age.</span></div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>      <span class="keywordflow">if</span> (new_age != age) {</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>        retained_maps-&gt;Set(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> + 1, <a class="code hl_function" href="classv8_1_1internal_1_1Smi.html#a755464f4d2c3a71ffd82cd474bbc50f3">Smi::FromInt</a>(new_age));</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>      }</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>    }</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>  }</div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>}</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span> </div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span><span class="keywordtype">void</span> MarkCompactCollector::MarkLiveObjects() {</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>  <a class="code hl_define" href="gc-tracer_8h.html#ab1b9d31a6993723e2ab2a57d5d18ef5a">TRACE_GC_ARG1</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK,</div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>                <span class="stringliteral">&quot;UseBackgroundThreads&quot;</span>, <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>());</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span> </div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> was_marked_incrementally =</div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>      !heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">incremental_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1IncrementalMarking.html#a421afcfedbad9dba889295ea646625fa">IsStopped</a>();</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>  <span class="keywordflow">if</span> (was_marked_incrementally) {</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>    <span class="keyword">auto</span>* incremental_marking = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">incremental_marking</a>();</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>    <a class="code hl_define" href="gc-tracer_8h.html#a4b6fc205b8b8bbe4275672c2a66c5b94">TRACE_GC_WITH_FLOW</a>(</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>        heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_FINISH_INCREMENTAL,</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>        incremental_marking-&gt;current_trace_id(), <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(incremental_marking-&gt;IsMajorMarking());</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>    incremental_marking-&gt;Stop();</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkingBarrier.html#a0961df883ba76c25aeba52b810d55f54">MarkingBarrier::PublishAll</a>(heap_);</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>  }</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span> </div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(state_ == PREPARE_GC);</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>  state_ = MARK_LIVE_OBJECTS;</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span> </div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>  <span class="keywordflow">if</span> (heap_-&gt;cpp_heap_) {</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>    <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;cpp_heap_)</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>        -&gt;<a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a9171e6283279c509a9e40d2be7d9960e">EnterFinalPause</a>(heap_-&gt;embedder_stack_state_);</div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>  }</div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span> </div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>  <a class="code hl_friend" href="classv8_1_1internal_1_1MarkCompactCollector.html#a0a89e89941e2601a090655513f208c65">RootMarkingVisitor</a> root_visitor(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span> </div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>  {</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_ROOTS);</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>    MarkRoots(&amp;root_visitor);</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>  }</div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span> </div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>  {</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_CLIENT_HEAPS);</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>    MarkObjectsFromClientHeaps();</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>  }</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span> </div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>  {</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_RETAIN_MAPS);</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>    RetainMaps();</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>  }</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span> </div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_marking &amp;&amp; <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>()) {</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_FULL_CLOSURE_PARALLEL);</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>    parallel_marking_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">RescheduleJobIfNeeded</a>(</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>        <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">GarbageCollector::MARK_COMPACTOR</a>, TaskPriority::kUserBlocking);</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>    MarkTransitiveClosure();</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>    {</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>      <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(),</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>               GCTracer::Scope::MC_MARK_FULL_CLOSURE_PARALLEL_JOIN);</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>      <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a9d6f060a09240e70ae531c260c99650b">FinishConcurrentMarking</a>();</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>    }</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>    parallel_marking_ = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_FULL_CLOSURE_SERIAL);</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>    MarkTransitiveClosure();</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>  }</div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span> </div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>  {</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_ROOTS);</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>    MarkRootsFromConservativeStack(&amp;root_visitor);</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>  }</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span> </div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>  {</div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_MARK_FULL_CLOSURE);</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>    <span class="comment">// Complete the transitive closure single-threaded to avoid races with</span></div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>    <span class="comment">// multiple threads when processing weak maps and embedder heaps.</span></div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">concurrent_marking</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1ConcurrentMarking.html#a06980681d462120291c2047124cd6a3a">IsStopped</a>());</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span>* cpp_heap = <a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">CppHeap::From</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#add922c9ad5face7a8949d93c0e783c91">cpp_heap</a>())) {</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>      cpp_heap-&gt;EnterProcessGlobalAtomicPause();</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>    }</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>    MarkTransitiveClosure();</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(local_marking_worklists_-&gt;IsEmpty());</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>        <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()-&gt;current_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">local_weak_objects</a>()</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>              -&gt;discovered_ephemerons_local.IsLocalAndGlobalEmpty());</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">IsCppHeapMarkingFinished</a>(heap_, local_marking_worklists_.get()));</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>    VerifyEphemeronMarking();</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>  }</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span> </div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>  <span class="keywordflow">if</span> (was_marked_incrementally) {</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>    <span class="comment">// Disable the marking barrier after concurrent/parallel marking has</span></div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>    <span class="comment">// finished as it will reset page flags that share the same bitmap as</span></div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>    <span class="comment">// the evacuation candidate bit.</span></div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkingBarrier.html#ad7b8156049672e805f8bfd48a300936c">MarkingBarrier::DeactivateAll</a>(heap_);</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>    heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a67c396ca00a91e3b3c6131d6db14a438">traced_handles</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1TracedHandles.html#a4f33ad5439a15d4844bc3d8ce48e5f48">SetIsMarking</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>  }</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span> </div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>  epoch_++;</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>}</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span> </div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span> </div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span><span class="keyword">class </span>ParallelClearingJob final : <span class="keyword">public</span> v8::JobTask {</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>  <span class="keyword">class </span>ClearingItem {</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>   <span class="keyword">public</span>:</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>    <span class="keyword">virtual</span> ~ClearingItem() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> Run(JobDelegate* delegate) = 0;</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>  };</div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span> </div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>  <span class="keyword">explicit</span> ParallelClearingJob(MarkCompactCollector* collector)</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>      : collector_(collector) {}</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>  ~ParallelClearingJob() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>  ParallelClearingJob(<span class="keyword">const</span> ParallelClearingJob&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>  ParallelClearingJob&amp; operator=(<span class="keyword">const</span> ParallelClearingJob&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span> </div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>  <span class="comment">// v8::JobTask overrides.</span></div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>  <span class="keywordtype">void</span> Run(JobDelegate* delegate)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>    std::unique_ptr&lt;ClearingItem&gt; item;</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>    {</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>      <a class="code hl_typedef" href="namespacev8_1_1base.html#a3279492e34e391eefba807ff6a59576e">base::SpinningMutexGuard</a> guard(&amp;items_mutex_);</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>      item = std::move(items_.back());</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>      items_.pop_back();</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>    }</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>    item-&gt;Run(delegate);</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>  }</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span> </div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>  <span class="keywordtype">size_t</span> GetMaxConcurrency(<span class="keywordtype">size_t</span> worker_count)<span class="keyword"> const override </span>{</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>    <a class="code hl_typedef" href="namespacev8_1_1base.html#a3279492e34e391eefba807ff6a59576e">base::SpinningMutexGuard</a> guard(&amp;items_mutex_);</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_weak_ref_clearing ||</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>        !collector_-&gt;UseBackgroundThreadsInCycle()) {</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>      <span class="keywordflow">return</span> std::min&lt;size_t&gt;(items_.size(), 1);</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>    }</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>    <span class="keywordflow">return</span> items_.size();</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>  }</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span> </div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="namespacev8_1_1bigint.html#a6d4d2ce18897aba0f90b3208eca29a5b">Add</a>(std::unique_ptr&lt;ClearingItem&gt; item) {</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>    items_.push_back(std::move(item));</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>  }</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span> </div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>  MarkCompactCollector* collector_;</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>  <span class="keyword">mutable</span> base::SpinningMutex items_mutex_;</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>  std::vector&lt;std::unique_ptr&lt;ClearingItem&gt;&gt; items_;</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>};</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span> </div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span><span class="keyword">class </span>ClearStringTableJobItem final : <span class="keyword">public</span> ParallelClearingJob::ClearingItem {</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>  <span class="keyword">explicit</span> ClearStringTableJobItem(Isolate* isolate)</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>      : isolate_(isolate),</div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>        trace_id_(reinterpret_cast&lt;uint64_t&gt;(this) ^</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>                  isolate-&gt;<a class="code hl_namespace" href="namespaceheap.html">heap</a>()-&gt;tracer()-&gt;CurrentEpoch(</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>                      GCTracer::Scope::MC_CLEAR_STRING_TABLE)) {}</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span> </div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>  <span class="keywordtype">void</span> Run(JobDelegate* delegate) <span class="keyword">final</span> {</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>    <span class="comment">// In case multi-cage pointer compression mode is enabled ensure that</span></div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>    <span class="comment">// current thread&#39;s cage base values are properly initialized.</span></div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>    PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate_);</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span> </div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>    <span class="keywordflow">if</span> (isolate_-&gt;OwnsStringTables()) {</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>      <a class="code hl_define" href="gc-tracer_8h.html#af9338020b2e2d4a1c8fe541d32e18473">TRACE_GC1_WITH_FLOW</a>(isolate_-&gt;heap()-&gt;tracer(),</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>                          GCTracer::Scope::MC_CLEAR_STRING_TABLE,</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>                          delegate-&gt;IsJoiningThread() ? <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a></div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>                                                      : <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea7c58afb43537a264dcd68e698a7b8e3b">ThreadKind::kBackground</a>,</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>                          trace_id_, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>      <span class="comment">// Prune the string table removing all strings only pointed to by the</span></div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>      <span class="comment">// string table.  Cannot use string_table() here because the string</span></div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>      <span class="comment">// table is marked.</span></div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>      StringTable* string_table = isolate_-&gt;string_table();</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>      InternalizedStringTableCleaner internalized_visitor(isolate_-&gt;heap());</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>      string_table-&gt;DropOldData();</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>      string_table-&gt;IterateElements(&amp;internalized_visitor);</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>      string_table-&gt;NotifyElementsRemoved(</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>          internalized_visitor.PointersRemoved());</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>    }</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>  }</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span> </div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>  uint64_t trace_id()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> trace_id_; }</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span> </div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>  Isolate* <span class="keyword">const</span> isolate_;</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>  <span class="keyword">const</span> uint64_t trace_id_;</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>};</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span> </div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span> </div>
<div class="foldopen" id="foldopen02673" data-start="{" data-end="};">
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html"> 2673</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html">FullStringForwardingTableCleaner</a> final</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>    : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html">StringForwardingTableCleanerBase</a> {</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen02676" data-start="{" data-end="}">
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aedd993cea743624dd174908e63046cf4"> 2676</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aedd993cea743624dd174908e63046cf4">FullStringForwardingTableCleaner</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>)</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html">StringForwardingTableCleanerBase</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>), heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>    <a class="code hl_define" href="macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(heap_);</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>  }</div>
</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span> </div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>  <span class="comment">// Transition all strings in the forwarding table to</span></div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>  <span class="comment">// ThinStrings/ExternalStrings and clear the table afterwards.</span></div>
<div class="foldopen" id="foldopen02683" data-start="{" data-end="}">
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aab81ddafa287b1e2b2cb04427954ce51"> 2683</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aab81ddafa287b1e2b2cb04427954ce51">TransitionStrings</a>() {</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() ||</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>           <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.transition_strings_during_gc_with_stack);</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>    <a class="code hl_class" href="classv8_1_1internal_1_1StringForwardingTable.html">StringForwardingTable</a>* forwarding_table =</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#af9a9ea8c719a49a7e1471f09dab891fc">string_forwarding_table</a>();</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>    forwarding_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTable.html#aba31995a3b5943ddda7b8f06cf4ed63e">IterateElements</a>(</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>        [&amp;](<a class="code hl_class" href="classv8_1_1internal_1_1StringForwardingTable_1_1Record.html">StringForwardingTable::Record</a>* <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>) {</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>          <a class="code hl_function" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aab81ddafa287b1e2b2cb04427954ce51">TransitionStrings</a>(<a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>);</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>        });</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>    forwarding_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTable.html#a21b17e1cef42e96f10fd272a2e42336f">Reset</a>();</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>  }</div>
</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span> </div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>  <span class="comment">// When performing GC with a stack, we conservatively assume that</span></div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>  <span class="comment">// the GC could have been triggered by optimized code. Optimized code</span></div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>  <span class="comment">// assumes that flat strings don&#39;t transition during GCs, so we are not</span></div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>  <span class="comment">// allowed to transition strings to ThinString/ExternalString in that</span></div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>  <span class="comment">// case.</span></div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>  <span class="comment">// Instead we mark forward objects to keep them alive and update entries</span></div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>  <span class="comment">// of evacuated objects later.</span></div>
<div class="foldopen" id="foldopen02702" data-start="{" data-end="}">
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#a8dbc01746330b8c8a17559d38e3e4787"> 2702</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#a8dbc01746330b8c8a17559d38e3e4787">ProcessFullWithStack</a>() {</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() &amp;&amp;</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>           !<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.transition_strings_during_gc_with_stack);</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>    <a class="code hl_class" href="classv8_1_1internal_1_1StringForwardingTable.html">StringForwardingTable</a>* forwarding_table =</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#af9a9ea8c719a49a7e1471f09dab891fc">string_forwarding_table</a>();</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>    forwarding_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTable.html#aba31995a3b5943ddda7b8f06cf4ed63e">IterateElements</a>(</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>        [&amp;](<a class="code hl_class" href="classv8_1_1internal_1_1StringForwardingTable_1_1Record.html">StringForwardingTable::Record</a>* <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>) {</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>          MarkForwardObject(<a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>);</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>        });</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>  }</div>
</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span> </div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>  <span class="keywordtype">void</span> MarkForwardObject(<a class="code hl_class" href="classv8_1_1internal_1_1StringForwardingTable_1_1Record.html">StringForwardingTable::Record</a>* <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>) {</div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> original = <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;OriginalStringObject(<a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>);</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(original)) {</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(original, <a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTable.html#acc353f872ecd8006400bd59337eec972">StringForwardingTable::deleted_element</a>());</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>    }</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;String&gt;</a> original_string = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;String&gt;</a>(original);</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a7835e19deaaf9158c792811b0259c3d7">MarkingHelper::IsMarkedOrAlwaysLive</a>(heap_, <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a9731d090602fef12956a5d281ef83584">marking_state_</a>,</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>                                            original_string)) {</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> forward = <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;ForwardStringObjectOrHash(<a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>);</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(forward) ||</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>          (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ada9b37f4e5abfa1ad3569dcfabea4ff1">MarkingHelper::GetLivenessMode</a>(heap_, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(forward)) ==</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>           <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a4dc8cca289e4f7a300b90ed820cf9f0bac2570b42c277f62e29e44663e362573a">MarkingHelper::LivenessMode::kAlwaysLive</a>)) {</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>      }</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>      <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a9731d090602fef12956a5d281ef83584">marking_state_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkingStateBase.html#a25369a80f635ffb368937574c7a4e6a6">TryMarkAndAccountLiveBytes</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(forward));</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>      <a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a99fa9daf91eb0986f3f902da3e1c677d">DisposeExternalResource</a>(<a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>);</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>      <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;set_original_string(<a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTable.html#acc353f872ecd8006400bd59337eec972">StringForwardingTable::deleted_element</a>());</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>    }</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>  }</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span> </div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aab81ddafa287b1e2b2cb04427954ce51">TransitionStrings</a>(StringForwardingTable::Record* <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>) {</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> original = <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;OriginalStringObject(<a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>);</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(original)) {</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(original, <a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTable.html#acc353f872ecd8006400bd59337eec972">StringForwardingTable::deleted_element</a>());</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>    }</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a7835e19deaaf9158c792811b0259c3d7">MarkingHelper::IsMarkedOrAlwaysLive</a>(heap_, <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a9731d090602fef12956a5d281ef83584">marking_state_</a>,</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>                                            <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(original))) {</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;String&gt;</a> original_string = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;String&gt;</a>(original);</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a08148789a9c2a5375c705ca803f54493">IsThinString</a>(original_string)) {</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>        original_string = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;ThinString&gt;</a>(original_string)-&gt;actual();</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>      }</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>      TryExternalize(original_string, <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>);</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>      TryInternalize(original_string, <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>);</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>      original_string-&gt;set_raw_hash_field(<a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;raw_hash(<a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>));</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>      <a class="code hl_function" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a99fa9daf91eb0986f3f902da3e1c677d">DisposeExternalResource</a>(<a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>);</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>    }</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>  }</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span> </div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>  <span class="keywordtype">void</span> TryExternalize(<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;String&gt;</a> original_string,</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>                      StringForwardingTable::Record* <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>) {</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>    <span class="comment">// If the string is already external, dispose the resource.</span></div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a499b0a3964a81c9abb3e89b9b9ca92f2">IsExternalString</a>(original_string)) {</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>      <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;DisposeUnusedExternalResource(<a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>, original_string);</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>    }</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span> </div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>    <span class="keywordtype">bool</span> is_one_byte;</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>    v8::String::ExternalStringResourceBase* external_resource =</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>        <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;external_resource(&amp;is_one_byte);</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>    <span class="keywordflow">if</span> (external_resource == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span> </div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>    <span class="keywordflow">if</span> (is_one_byte) {</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>      original_string-&gt;MakeExternalDuringGC(</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>          <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>,</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>          <span class="keyword">reinterpret_cast&lt;</span>v8::String::ExternalOneByteStringResource*<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>              external_resource));</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>      original_string-&gt;MakeExternalDuringGC(</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>          <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>, <span class="keyword">reinterpret_cast&lt;</span>v8::String::ExternalStringResource*<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>                        external_resource));</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>    }</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>  }</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span> </div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>  <span class="keywordtype">void</span> TryInternalize(<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;String&gt;</a> original_string,</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>                      StringForwardingTable::Record* <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>) {</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a6e5d77af13c8025809308fb475de5703">IsInternalizedString</a>(original_string)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> forward = <a class="code hl_variable" href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a>-&gt;ForwardStringObjectOrHash(<a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>);</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">IsHeapObject</a>(forward)) {</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>    }</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;String&gt;</a> forward_string = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;String&gt;</a>(forward);</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span> </div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>    <span class="comment">// Mark the forwarded string to keep it alive.</span></div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#ada9b37f4e5abfa1ad3569dcfabea4ff1">MarkingHelper::GetLivenessMode</a>(heap_, forward_string) !=</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>        <a class="code hl_enumvalue" href="structv8_1_1internal_1_1MarkingHelper.html#a4dc8cca289e4f7a300b90ed820cf9f0bac2570b42c277f62e29e44663e362573a">MarkingHelper::LivenessMode::kAlwaysLive</a>) {</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>      <a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a9731d090602fef12956a5d281ef83584">marking_state_</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkingStateBase.html#a25369a80f635ffb368937574c7a4e6a6">TryMarkAndAccountLiveBytes</a>(forward_string);</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>    }</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>    <span class="comment">// Transition the original string to a ThinString and override the</span></div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>    <span class="comment">// forwarding index with the correct hash.</span></div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>    original_string-&gt;MakeThin(<a class="code hl_variable" href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">isolate_</a>, forward_string);</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>    <span class="comment">// Record the slot in the old-to-old remembered set. This is</span></div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>    <span class="comment">// required as the internalized string could be relocated during</span></div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>    <span class="comment">// compaction.</span></div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>    <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot(&amp;<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;ThinString&gt;</a>(original_string)-&gt;actual_);</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>    <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#aaa454d3e055439b880fa812044153ec1">MarkCompactCollector::RecordSlot</a>(original_string, slot, forward_string);</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>  }</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span> </div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>  Heap* <span class="keyword">const</span> heap_;</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>};</div>
</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span> </div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span> </div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span><span class="keyword">class </span>SharedStructTypeRegistryCleaner final : <span class="keyword">public</span> RootVisitor {</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>  <span class="keyword">explicit</span> SharedStructTypeRegistryCleaner(Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>) : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {}</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span> </div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>  <span class="keywordtype">void</span> VisitRootPointers(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>                         FullObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, FullObjectSlot <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>  }</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span> </div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>  <span class="keywordtype">void</span> VisitRootPointers(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>                         <a class="code hl_typedef" href="namespacev8_1_1internal.html#aba26ada764f1b3e31fc51de87da22ec1">OffHeapObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>                         <a class="code hl_typedef" href="namespacev8_1_1internal.html#aba26ada764f1b3e31fc51de87da22ec1">OffHeapObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(root, Root::kSharedStructTypeRegistry);</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>    <span class="comment">// The SharedStructTypeRegistry holds the canonical SharedStructType</span></div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>    <span class="comment">// instance maps weakly. Visit all Map pointers in [start, end), deleting</span></div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>    <span class="comment">// it if unmarked.</span></div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>    <span class="keyword">auto</span>* marking_state = heap_-&gt;marking_state();</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>    Isolate* <span class="keyword">const</span> isolate = heap_-&gt;isolate();</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>    <span class="keywordflow">for</span> (<a class="code hl_typedef" href="namespacev8_1_1internal.html#aba26ada764f1b3e31fc51de87da22ec1">OffHeapObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; p++) {</div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> o = p.load(isolate);</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsString(o));</div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>      <span class="keywordflow">if</span> (IsMap(o)) {</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">Tagged&lt;HeapObject&gt;</a> map = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Map&gt;</a>(o);</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1HeapLayout.html#ae77bf0d1f0e1b86681fb29101ecd527a">HeapLayout::InAnySharedSpace</a>(map));</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a7835e19deaaf9158c792811b0259c3d7">MarkingHelper::IsMarkedOrAlwaysLive</a>(heap_, marking_state, map))</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>        elements_removed_++;</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>        p.store(<a class="code hl_function" href="classv8_1_1internal_1_1SharedStructTypeRegistry.html#af6671bbc051dfa0db1c98d911fd7d443">SharedStructTypeRegistry::deleted_element</a>());</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>      }</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>    }</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>  }</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span> </div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>  <span class="keywordtype">int</span> ElementsRemoved()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> elements_removed_; }</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span> </div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>  Heap* heap_;</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>  <span class="keywordtype">int</span> elements_removed_ = 0;</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>};</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span> </div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span><span class="keyword">class </span>ClearSharedStructTypeRegistryJobItem final</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>    : <span class="keyword">public</span> ParallelClearingJob::ClearingItem {</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>  <span class="keyword">explicit</span> ClearSharedStructTypeRegistryJobItem(Isolate* isolate)</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>      : isolate_(isolate) {</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(isolate-&gt;is_shared_space_isolate());</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>    <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(isolate-&gt;shared_struct_type_registry());</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>  }</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span> </div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>  <span class="keywordtype">void</span> Run(JobDelegate* delegate) <span class="keyword">final</span> {</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>    <span class="comment">// In case multi-cage pointer compression mode is enabled ensure that</span></div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>    <span class="comment">// current thread&#39;s cage base values are properly initialized.</span></div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>    PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate_);</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span> </div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>    <span class="keyword">auto</span>* registry = isolate_-&gt;shared_struct_type_registry();</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>    SharedStructTypeRegistryCleaner cleaner(isolate_-&gt;heap());</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>    registry-&gt;IterateElements(isolate_, &amp;cleaner);</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>    registry-&gt;NotifyElementsRemoved(cleaner.ElementsRemoved());</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>  }</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span> </div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>  Isolate* <span class="keyword">const</span> isolate_;</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>};</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span> </div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span> </div>
<div class="foldopen" id="foldopen02875" data-start="{" data-end="};">
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html"> 2875</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html">MarkCompactCollector::ClearTrivialWeakRefJobItem</a> final</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>    : <span class="keyword">public</span> ParallelClearingJob::ClearingItem {</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen02878" data-start="{" data-end="}">
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a499931b7bd824dc60fb534c147dadad9"> 2878</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a499931b7bd824dc60fb534c147dadad9">ClearTrivialWeakRefJobItem</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector)</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>      : collector_(collector),</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>        trace_id_(reinterpret_cast&lt;uint64_t&gt;(this) ^</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>                  collector-&gt;<a class="code hl_namespace" href="namespaceheap.html">heap</a>()-&gt;tracer()-&gt;CurrentEpoch(</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>                      <a class="code hl_class" href="classv8_1_1internal_1_1GCTracer.html">GCTracer</a>::<a class="code hl_class" href="classv8_1_1internal_1_1Scope.html">Scope</a>::MC_CLEAR_WEAK_REFERENCES_TRIVIAL)) {}</div>
</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span> </div>
<div class="foldopen" id="foldopen02884" data-start="{" data-end="}">
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a69e59718369b2dd601760d202b8d20ae"> 2884</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a69e59718369b2dd601760d202b8d20ae">Run</a>(JobDelegate* delegate) <span class="keyword">final</span> {</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a> = collector_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">heap</a>();</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span> </div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>    <span class="comment">// In case multi-cage pointer compression mode is enabled ensure that</span></div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>    <span class="comment">// current thread&#39;s cage base values are properly initialized.</span></div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>    <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageAccessScope.html">PtrComprCageAccessScope</a> ptr_compr_cage_access_scope(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate());</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span> </div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>    <a class="code hl_define" href="gc-tracer_8h.html#af9338020b2e2d4a1c8fe541d32e18473">TRACE_GC1_WITH_FLOW</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;tracer(),</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>                        GCTracer::Scope::MC_CLEAR_WEAK_REFERENCES_TRIVIAL,</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>                        delegate-&gt;IsJoiningThread() ? <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a></div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>                                                    : <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea7c58afb43537a264dcd68e698a7b8e3b">ThreadKind::kBackground</a>,</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>                        trace_id_, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>    collector_-&gt;ClearTrivialWeakReferences();</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>    collector_-&gt;ClearTrustedWeakReferences();</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>  }</div>
</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span> </div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a4cb7f1b4e37cdd219a4b65a470c296e0"> 2900</a></span>  uint64_t <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a4cb7f1b4e37cdd219a4b65a470c296e0">trace_id</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> trace_id_; }</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span> </div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector_;</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>  <span class="keyword">const</span> uint64_t trace_id_;</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>};</div>
</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span> </div>
<div class="foldopen" id="foldopen02907" data-start="{" data-end="};">
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html"> 2907</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html">MarkCompactCollector::FilterNonTrivialWeakRefJobItem</a> final</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>    : <span class="keyword">public</span> ParallelClearingJob::ClearingItem {</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen02910" data-start="{" data-end="}">
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a99d39e8918d9be0080294ca98247ae99"> 2910</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a99d39e8918d9be0080294ca98247ae99">FilterNonTrivialWeakRefJobItem</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector)</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>      : collector_(collector),</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>        trace_id_(</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>            reinterpret_cast&lt;uint64_t&gt;(this) ^</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>            collector-&gt;<a class="code hl_namespace" href="namespaceheap.html">heap</a>()-&gt;tracer()-&gt;CurrentEpoch(</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>                <a class="code hl_class" href="classv8_1_1internal_1_1GCTracer.html">GCTracer</a>::<a class="code hl_class" href="classv8_1_1internal_1_1Scope.html">Scope</a>::MC_CLEAR_WEAK_REFERENCES_FILTER_NON_TRIVIAL)) {</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>  }</div>
</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span> </div>
<div class="foldopen" id="foldopen02918" data-start="{" data-end="}">
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a12aa5d6e9b216c7f21a2126328dfc8c8"> 2918</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a12aa5d6e9b216c7f21a2126328dfc8c8">Run</a>(JobDelegate* delegate) <span class="keyword">final</span> {</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a> = collector_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">heap</a>();</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span> </div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>    <span class="comment">// In case multi-cage pointer compression mode is enabled ensure that</span></div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>    <span class="comment">// current thread&#39;s cage base values are properly initialized.</span></div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>    <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageAccessScope.html">PtrComprCageAccessScope</a> ptr_compr_cage_access_scope(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate());</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span> </div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>    <a class="code hl_define" href="gc-tracer_8h.html#af9338020b2e2d4a1c8fe541d32e18473">TRACE_GC1_WITH_FLOW</a>(</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>        <a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;tracer(),</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>        GCTracer::Scope::MC_CLEAR_WEAK_REFERENCES_FILTER_NON_TRIVIAL,</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>        delegate-&gt;IsJoiningThread() ? <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">ThreadKind::kMain</a></div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>                                    : <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea7c58afb43537a264dcd68e698a7b8e3b">ThreadKind::kBackground</a>,</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>        trace_id_, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>    collector_-&gt;FilterNonTrivialWeakReferences();</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>  }</div>
</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span> </div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a2553a069825c0f163871407001a81d8a"> 2934</a></span>  uint64_t <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a2553a069825c0f163871407001a81d8a">trace_id</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> trace_id_; }</div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span> </div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector_;</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>  <span class="keyword">const</span> uint64_t trace_id_;</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>};</div>
</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span> </div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span><span class="keywordtype">void</span> MarkCompactCollector::ClearNonLiveReferences() {</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_CLEAR);</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span> </div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* <span class="keyword">const</span> isolate = heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>();</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>  <span class="keywordflow">if</span> (isolate-&gt;OwnsStringTables()) {</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(),</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>             GCTracer::Scope::MC_CLEAR_STRING_FORWARDING_TABLE);</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>    <span class="comment">// Clear string forwarding table. Live strings are transitioned to</span></div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    <span class="comment">// ThinStrings/ExternalStrings in the cleanup process, if this is a GC</span></div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>    <span class="comment">// without stack.</span></div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>    <span class="comment">// Clearing the string forwarding table must happen before clearing the</span></div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>    <span class="comment">// string table, as entries in the forwarding table can keep internalized</span></div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>    <span class="comment">// strings alive.</span></div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>    <a class="code hl_class" href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html">FullStringForwardingTableCleaner</a> forwarding_table_cleaner(heap_);</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>    <span class="keywordflow">if</span> (!heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">IsGCWithStack</a>() ||</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.transition_strings_during_gc_with_stack) {</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>      forwarding_table_cleaner.TransitionStrings();</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>      forwarding_table_cleaner.ProcessFullWithStack();</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>    }</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>  }</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span> </div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>  {</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>    <span class="comment">// Clear Isolate::topmost_script_having_context slot if it&#39;s not alive.</span></div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> maybe_caller_context =</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>        isolate-&gt;topmost_script_having_context();</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>    <span class="keywordflow">if</span> (maybe_caller_context.IsHeapObject() &amp;&amp;</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>        <a class="code hl_function" href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">MarkingHelper::IsUnmarkedAndNotAlwaysLive</a>(</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>            heap_, marking_state_, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;HeapObject&gt;</a>(maybe_caller_context))) {</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>      isolate-&gt;clear_topmost_script_having_context();</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>    }</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>  }</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span> </div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>  std::unique_ptr&lt;JobHandle&gt; clear_string_table_job_handle;</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>  {</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>    <span class="keyword">auto</span> job = std::make_unique&lt;ParallelClearingJob&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>    <span class="keyword">auto</span> job_item = std::make_unique&lt;ClearStringTableJobItem&gt;(isolate);</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>    <span class="keyword">const</span> uint64_t trace_id = job_item-&gt;trace_id();</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>    job-&gt;Add(std::move(job_item));</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>    <a class="code hl_define" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;ClearStringTableJob started&quot;</span>, trace_id,</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>                            <a class="code hl_define" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>    <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate() &amp;&amp;</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>        isolate-&gt;shared_struct_type_registry()) {</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>      <span class="keyword">auto</span> registry_job_item =</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>          std::make_unique&lt;ClearSharedStructTypeRegistryJobItem&gt;(isolate);</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>      job-&gt;Add(std::move(registry_job_item));</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>    }</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>    clear_string_table_job_handle = <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;CreateJob(</div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>        TaskPriority::kUserBlocking, std::move(job));</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>  }</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_weak_ref_clearing &amp;&amp; <a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">UseBackgroundThreadsInCycle</a>()) {</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>    clear_string_table_job_handle-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>  }</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span> </div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>  {</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_CLEAR_EXTERNAL_STRING_TABLE);</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>    ExternalStringTableCleanerVisitor&lt;ExternalStringTableCleaningMode::kAll&gt;</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>        external_visitor(heap_);</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>    heap_-&gt;external_string_table_.IterateAll(&amp;external_visitor);</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>    heap_-&gt;external_string_table_.CleanUpAll();</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>  }</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span> </div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>  {</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_CLEAR_WEAK_GLOBAL_HANDLES);</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>    <span class="comment">// We depend on `IterateWeakRootsForPhantomHandles()` being called before</span></div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>    <span class="comment">// `ProcessOldCodeCandidates()` in order to identify flushed bytecode in the</span></div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>    <span class="comment">// CPU profiler.</span></div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>    isolate-&gt;global_handles()-&gt;IterateWeakRootsForPhantomHandles(</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>        &amp;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">IsUnmarkedHeapObject</a>);</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>    isolate-&gt;traced_handles()-&gt;ResetDeadNodes(&amp;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">IsUnmarkedHeapObject</a>);</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span> </div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>    <span class="keywordflow">if</span> (isolate-&gt;is_shared_space_isolate()) {</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>      isolate-&gt;global_safepoint()-&gt;IterateClientIsolates([](Isolate* client) {</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>        client-&gt;global_handles()-&gt;IterateWeakRootsForPhantomHandles(</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>            &amp;<a class="code hl_function" href="classv8_1_1internal_1_1MarkCompactCollector.html#a45dbe9fb4c2e4b5ebdf19806b2de88fe">IsUnmarkedSharedHeapObject</a>);</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>        <span class="comment">// No need to reset traced handles since they are always strong.</span></div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>      });</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>    }</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>  }</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span> </div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>  {</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_CLEAR_FLUSHABLE_BYTECODE);</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>    <span class="comment">// `ProcessFlushedBaselineCandidates()` must be called after</span></div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>    <span class="comment">// `ProcessOldCodeCandidates()` so that we correctly set the code object on</span></div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>    <span class="comment">// the JSFunction after flushing.</span></div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>    ProcessOldCodeCandidates();</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span><span class="preprocessor">#ifndef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>    <span class="comment">// With leaptiering this is done during sweeping.</span></div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>    ProcessFlushedBaselineCandidates();</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span><span class="preprocessor">#endif  </span><span class="comment">// !V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>  }</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span> </div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span><span class="preprocessor">#ifdef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>  {</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">tracer</a>(), GCTracer::Scope::MC_SWEEP_JS_DISPATCH_TABLE);</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>    JSDispatchTable* jdt = <a class="code hl_function" href="classv8_1_1internal_1_1IsolateGroup.html#a0204089c94ecd427a1607743e7b3fb82">IsolateGroup::current</a>()-&gt;js_dispatch_table();</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;Code&gt;</a> compile_lazy =</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>        heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">isolate</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#ab3a054a790a837106700439518bc0a05">builtins</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Builtins.html#a2260f6f209a0b9af26f64d5cf774018b">code</a>(Builtin::kCompileLazy);</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>    jdt-&gt;Sweep(heap_-&gt;js_dispatch_table_space(), isolate-&gt;counters(),</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>               [&amp;](JSDispatchEntry&amp; entry) {</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>                 Tagged&lt;Code&gt; code = entry.GetCode();</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>                 if (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>                         heap_, marking_state_, code)) {</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>                   <span class="comment">// Baseline flushing: if the Code object is no longer alive,</span></div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>                   <span class="comment">// it must have been flushed and so we replace it with the</span></div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>                   <span class="comment">// CompileLazy builtin. Once we use leaptiering on all</span></div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>                   <span class="comment">// platforms, we can probably simplify the other code related</span></div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>                   <span class="comment">// to baseline flushing.</span></div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span> </div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>                   <span class="comment">// Currently, we can also see optimized code here. This</span></div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>                   <span class="comment">// happens when a FeedbackCell for which no JSFunctions</span></div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>                   <span class="comment">// remain references optimized code. However, in that case we</span></div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>                   <span class="comment">// probably do want to delete the optimized code, so that is</span></div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>                   <span class="comment">// working as intended. It does mean, however, that we cannot</span></div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>                   <span class="comment">// DCHECK here that we only see baseline code.</span></div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>                   DCHECK(code-&gt;kind() == CodeKind::FOR_TESTING ||</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>                          code-&gt;kind() == CodeKind::BASELINE ||</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>                          code-&gt;kind() == CodeKind::MAGLEV ||</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>                          code-&gt;kind() == CodeKind::TURBOFAN_JS);</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>                   entry.SetCodeAndEntrypointPointer(</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>                       compile_lazy.ptr(), compile_lazy-&gt;instruction_start());</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>                 }</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>               });</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>  }</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span> </div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>  <span class="comment">// TODO(olivf, 42204201): If we make the bytecode accessible from the dispatch</span></div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>  <span class="comment">// table this could also be implemented during JSDispatchTable::Sweep.</span></div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>  {</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_CLEAR_FLUSHED_JS_FUNCTIONS);</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>    ClearFlushedJsFunctions();</div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>  }</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span> </div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>  {</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_CLEAR_WEAK_LISTS);</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>    <span class="comment">// Process the weak references.</span></div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>    MarkCompactWeakObjectRetainer mark_compact_object_retainer(heap_,</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>                                                               marking_state_);</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>    heap_-&gt;ProcessAllWeakReferences(&amp;mark_compact_object_retainer);</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>  }</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span> </div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>  {</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_CLEAR_MAPS);</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>    <span class="comment">// ClearFullMapTransitions must be called before weak references are</span></div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>    <span class="comment">// cleared.</span></div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>    ClearFullMapTransitions();</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>    <span class="comment">// Weaken recorded strong DescriptorArray objects. This phase can</span></div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>    <span class="comment">// potentially move everywhere after `ClearFullMapTransitions()`.</span></div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>    WeakenStrongDescriptorArrays();</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>  }</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span> </div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>  <span class="comment">// Start two parallel jobs: one for clearing trivial weak references and one</span></div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>  <span class="comment">// for filtering out non-trivial weak references that will not be cleared.</span></div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>  <span class="comment">// Both jobs read the values of weak references and the corresponding</span></div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>  <span class="comment">// mark bits. They cannot start before the following methods have finished,</span></div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>  <span class="comment">// because these may change the values of weak references and/or mark more</span></div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>  <span class="comment">// objects, thus creating data races:</span></div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>  <span class="comment">//   - ProcessOldCodeCandidates</span></div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>  <span class="comment">//   - ProcessAllWeakReferences</span></div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>  <span class="comment">//   - ClearFullMapTransitions</span></div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>  <span class="comment">//   - WeakenStrongDescriptorArrays</span></div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span>  <span class="comment">// The two jobs could be merged but it&#39;s convenient to keep them separate,</span></div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>  <span class="comment">// as they are joined at different times. The filtering job must be joined</span></div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>  <span class="comment">// before proceeding to the actual clearing of non-trivial weak references,</span></div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>  <span class="comment">// whereas the job for clearing trivial weak references can be joined at the</span></div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>  <span class="comment">// end of this method.</span></div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>  std::unique_ptr&lt;JobHandle&gt; clear_trivial_weakrefs_job_handle;</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>  {</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>    <span class="keyword">auto</span> job = std::make_unique&lt;ParallelClearingJob&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>    <span class="keyword">auto</span> job_item = std::make_unique&lt;ClearTrivialWeakRefJobItem&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>    <span class="keyword">const</span> uint64_t trace_id = job_item-&gt;trace_id();</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>    job-&gt;Add(std::move(job_item));</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>    <a class="code hl_define" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;ClearTrivialWeakRefJob started&quot;</span>, trace_id,</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>                            <a class="code hl_define" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>    clear_trivial_weakrefs_job_handle = <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;CreateJob(</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>        TaskPriority::kUserBlocking, std::move(job));</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>  }</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>  std::unique_ptr&lt;JobHandle&gt; filter_non_trivial_weakrefs_job_handle;</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>  {</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>    <span class="keyword">auto</span> job = std::make_unique&lt;ParallelClearingJob&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>    <span class="keyword">auto</span> job_item = std::make_unique&lt;FilterNonTrivialWeakRefJobItem&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>    <span class="keyword">const</span> uint64_t trace_id = job_item-&gt;trace_id();</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>    job-&gt;Add(std::move(job_item));</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>    <a class="code hl_define" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;FilterNonTrivialWeakRefJob started&quot;</span>, trace_id,</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>                            <a class="code hl_define" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>    filter_non_trivial_weakrefs_job_handle =</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>        <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">V8::GetCurrentPlatform</a>()-&gt;CreateJob(TaskPriority::kUserBlocking,</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>                                            std::move(job));</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>  }</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_weak_ref_clearing &amp;&amp; UseBackgroundThreadsInCycle()) {</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>    clear_trivial_weakrefs_job_handle-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>    filter_non_trivial_weakrefs_job_handle-&gt;NotifyConcurrencyIncrease();</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>  }</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span> </div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span><span class="preprocessor">#ifdef V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>  {</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_EXTERNAL_POINTER_TABLE);</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>    <span class="comment">// External pointer table sweeping needs to happen before evacuating live</span></div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>    <span class="comment">// objects as it may perform table compaction, which requires objects to</span></div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>    <span class="comment">// still be at the same location as during marking.</span></div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>    <span class="comment">//</span></div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>    <span class="comment">// Note we explicitly do NOT run SweepAndCompact on</span></div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>    <span class="comment">// read_only_external_pointer_space since these entries are all immortal by</span></div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>    <span class="comment">// definition.</span></div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>    isolate-&gt;external_pointer_table().EvacuateAndSweepAndCompact(</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>        isolate-&gt;heap()-&gt;old_external_pointer_space(),</div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>        isolate-&gt;heap()-&gt;young_external_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>    isolate-&gt;heap()-&gt;young_external_pointer_space()-&gt;AssertEmpty();</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>    <span class="keywordflow">if</span> (isolate-&gt;owns_shareable_data()) {</div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>      isolate-&gt;shared_external_pointer_table().SweepAndCompact(</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>          isolate-&gt;shared_external_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>    }</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    isolate-&gt;cpp_heap_pointer_table().SweepAndCompact(</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>        isolate-&gt;heap()-&gt;cpp_heap_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>  }</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span><span class="preprocessor">#endif  </span><span class="comment">// V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span> </div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>  {</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_TRUSTED_POINTER_TABLE);</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>    isolate-&gt;trusted_pointer_table().Sweep(heap_-&gt;trusted_pointer_space(),</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>                                           isolate-&gt;counters());</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>    <span class="keywordflow">if</span> (isolate-&gt;owns_shareable_data()) {</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>      isolate-&gt;shared_trusted_pointer_table().Sweep(</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>          isolate-&gt;shared_trusted_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>    }</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>  }</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span> </div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>  {</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_CODE_POINTER_TABLE);</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>    <a class="code hl_function" href="classv8_1_1internal_1_1IsolateGroup.html#a0204089c94ecd427a1607743e7b3fb82">IsolateGroup::current</a>()-&gt;code_pointer_table()-&gt;Sweep(</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>        heap_-&gt;code_pointer_space(), isolate-&gt;counters());</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>  }</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span> </div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span><span class="preprocessor">#ifdef V8_ENABLE_WEBASSEMBLY</span></div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>  {</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>             GCTracer::Scope::MC_SWEEP_WASM_CODE_POINTER_TABLE);</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>    <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a0a36931b3d2bbcdfcbb253b229838952">wasm::GetProcessWideWasmCodePointerTable</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#aee92d168ffa2e3a975289b9e785d10cd">SweepSegments</a>();</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>  }</div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_WEBASSEMBLY</span></div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span> </div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>  {</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>             GCTracer::Scope::MC_CLEAR_WEAK_REFERENCES_JOIN_FILTER_JOB);</div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>    filter_non_trivial_weakrefs_job_handle-&gt;Join();</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>  }</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span> </div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>  {</div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_WEAKNESS_HANDLING);</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>    ClearNonTrivialWeakReferences();</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>    ClearWeakCollections();</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>    ClearJSWeakRefs();</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>  }</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span> </div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>  <a class="code hl_define" href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a>(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a6ae13c1f6a906672819ff2dc5223d3db">isolate</a>(), WeakCodeClearEvent());</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span> </div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>  {</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>    <span class="comment">// This method may be called from within a DisallowDeoptimizations scope.</span></div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>    <span class="comment">// Temporarily allow deopts for marking code for deopt. This is not doing</span></div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>    <span class="comment">// the deopt yet and the actual deopts will be bailed out on later if the</span></div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>    <span class="comment">// current safepoint is not safe for deopts.</span></div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>    <span class="comment">// TODO(357636610): Reconsider whether the DisallowDeoptimization scopes are</span></div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>    <span class="comment">// truly needed.</span></div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>    AllowDeoptimization allow_deoptimization(heap_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1CppHeap.html#a6ae13c1f6a906672819ff2dc5223d3db">isolate</a>());</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>    MarkDependentCodeForDeoptimization();</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>  }</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span> </div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>  {</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_CLEAR_JOIN_JOB);</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>    clear_string_table_job_handle-&gt;Join();</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>    clear_trivial_weakrefs_job_handle-&gt;Join();</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>  }</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span> </div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span>    <span class="comment">// TODO(333906585): Consider adjusting the dchecks that happen on clearing</span></div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>    <span class="comment">// and move this phase into MarkingBarrier::DeactivateAll.</span></div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>    <a class="code hl_namespace" href="namespaceheap.html">heap</a>()-&gt;DeactivateMajorGCInProgressFlag();</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>  }</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span> </div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.transition_arrays.IsEmpty());</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.weak_references_trivial.IsEmpty());</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.weak_references_non_trivial.IsEmpty());</div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.weak_references_non_trivial_unmarked.IsEmpty());</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.weak_objects_in_code.IsEmpty());</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.js_weak_refs.IsEmpty());</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.weak_cells.IsEmpty());</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.code_flushing_candidates.IsEmpty());</div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.flushed_js_functions.IsEmpty());</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span><span class="preprocessor">#ifndef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(weak_objects_.baseline_flushing_candidates.IsEmpty());</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span><span class="preprocessor">#endif  </span><span class="comment">// !V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>}</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span> </div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span><span class="keywordtype">void</span> MarkCompactCollector::MarkDependentCodeForDeoptimization() {</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>  HeapObjectAndCode weak_object_in_code;</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;weak_objects_in_code_local.Pop(</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>      &amp;weak_object_in_code)) {</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>    Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span> = weak_object_in_code.heap_object;</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>    Tagged&lt;Code&gt; code = weak_object_in_code.code;</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>    <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>            heap_, non_atomic_marking_state_, <span class="keywordtype">object</span>) &amp;&amp;</div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>        !code-&gt;embedded_objects_cleared()) {</div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span>      <span class="keywordflow">if</span> (!code-&gt;marked_for_deoptimization()) {</div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span>        code-&gt;SetMarkedForDeoptimization(heap_-&gt;isolate(),</div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>                                         LazyDeoptimizeReason::kWeakObjects);</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>        have_code_to_deoptimize_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>      }</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>      code-&gt;ClearEmbeddedObjects(heap_);</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(code-&gt;embedded_objects_cleared());</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>    }</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>  }</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>}</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span> </div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span><span class="keywordtype">void</span> MarkCompactCollector::ClearPotentialSimpleMapTransition(</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>    Tagged&lt;Map&gt; dead_target) {</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(non_atomic_marking_state_-&gt;IsUnmarked(dead_target));</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>  Tagged&lt;Object&gt; potential_parent = dead_target-&gt;constructor_or_back_pointer();</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>  <span class="keywordflow">if</span> (IsMap(potential_parent)) {</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>    Tagged&lt;Map&gt; parent = Cast&lt;Map&gt;(potential_parent);</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>    <a class="code hl_typedef" href="namespacev8_1_1internal.html#a20971f8a9770697fdde08004c19035a3">DisallowGarbageCollection</a> no_gc_obviously;</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>    <span class="keywordflow">if</span> (MarkingHelper::IsMarkedOrAlwaysLive(heap_, non_atomic_marking_state_,</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>                                            parent) &amp;&amp;</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>        TransitionsAccessor(heap_-&gt;isolate(), parent)</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>            .HasSimpleTransitionTo(dead_target)) {</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>      ClearPotentialSimpleMapTransition(parent, dead_target);</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>    }</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>  }</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>}</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span> </div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span><span class="keywordtype">void</span> MarkCompactCollector::ClearPotentialSimpleMapTransition(</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>    Tagged&lt;Map&gt; map, Tagged&lt;Map&gt; dead_target) {</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!map-&gt;is_prototype_map());</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!dead_target-&gt;is_prototype_map());</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(map-&gt;raw_transitions(), <a class="code hl_function" href="namespacev8_1_1api__internal.html#a6e19dba9644f1405ed8144c4d9e7b98f">MakeWeak</a>(dead_target));</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>  <span class="comment">// Take ownership of the descriptor array.</span></div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>  <span class="keywordtype">int</span> number_of_own_descriptors = map-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>  Tagged&lt;DescriptorArray&gt; descriptors =</div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>      map-&gt;instance_descriptors(heap_-&gt;isolate());</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>  <span class="keywordflow">if</span> (descriptors == dead_target-&gt;instance_descriptors(heap_-&gt;isolate()) &amp;&amp;</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>      number_of_own_descriptors &gt; 0) {</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>    TrimDescriptorArray(map, descriptors);</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptors-&gt;number_of_descriptors() == number_of_own_descriptors);</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>  }</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>}</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span> </div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span><span class="keywordtype">bool</span> MarkCompactCollector::SpecialClearMapSlot(Tagged&lt;HeapObject&gt; host,</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>                                               Tagged&lt;Map&gt; map,</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>                                               HeapObjectSlot slot) {</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>  ClearPotentialSimpleMapTransition(map);</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span> </div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>  <span class="comment">// Special handling for clearing field type entries, identified by their host</span></div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>  <span class="comment">// being a descriptor array.</span></div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>  <span class="comment">// TODO(olivf): This whole special handling of field-type clearing</span></div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>  <span class="comment">// could be replaced by eagerly triggering field type dependencies and</span></div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>  <span class="comment">// generalizing field types, as soon as a field-type map becomes</span></div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>  <span class="comment">// unstable.</span></div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>  <span class="keywordflow">if</span> (IsDescriptorArray(host)) {</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>    <span class="comment">// We want to distinguish two cases:</span></div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>    <span class="comment">// 1. There are no instances of the descriptor owner&#39;s map left.</span></div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>    <span class="comment">// 2. The field type is not up to date because the stored object</span></div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>    <span class="comment">//    migrated away to a different map.</span></div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>    <span class="comment">// In case (1) it makes sense to clear the field type such that we</span></div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>    <span class="comment">// can learn a new one should we ever start creating instances</span></div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>    <span class="comment">// again.</span></div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>    <span class="comment">// In case (2) we must not re-learn a new field type. Doing so could</span></div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>    <span class="comment">// lead us to learning a field type that is not consistent with</span></div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>    <span class="comment">// still existing object&#39;s contents. To conservatively identify case</span></div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>    <span class="comment">// (1) we check the stability of the dead map.</span></div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>    <a class="code hl_typedef" href="namespacev8_1_1internal.html#adade5e1dd0ce3dc6f030ff3ea640f424">MaybeObjectSlot</a> location(slot);</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>    <span class="keywordflow">if</span> (map-&gt;is_stable() &amp;&amp; FieldType::kFieldTypesCanBeClearedOnGC) {</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>      location.store(FieldType::None());</div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>      location.store(FieldType::Any());</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span>    }</div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>  }</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>}</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span> </div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span><span class="keywordtype">void</span> MarkCompactCollector::FlushBytecodeFromSFI(</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>    Tagged&lt;SharedFunctionInfo&gt; shared_info) {</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(shared_info-&gt;HasBytecodeArray());</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span> </div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>  <span class="comment">// Retain objects required for uncompiled data.</span></div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>  Tagged&lt;String&gt; inferred_name = shared_info-&gt;inferred_name();</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>  <span class="keywordtype">int</span> start_position = shared_info-&gt;StartPosition();</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>  <span class="keywordtype">int</span> end_position = shared_info-&gt;EndPosition();</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span> </div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>  shared_info-&gt;DiscardCompiledMetadata(</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>      heap_-&gt;isolate(),</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>      [](Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span>, ObjectSlot slot,</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>         Tagged&lt;HeapObject&gt; target) { RecordSlot(object, slot, target); });</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span> </div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>  <span class="comment">// The size of the bytecode array should always be larger than an</span></div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>  <span class="comment">// UncompiledData object.</span></div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>  <span class="keyword">static_assert</span>(BytecodeArray::SizeFor(0) &gt;=</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>                UncompiledDataWithoutPreparseData::kSize);</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span> </div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>  <span class="comment">// Replace the bytecode with an uncompiled data object.</span></div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>  Tagged&lt;BytecodeArray&gt; bytecode_array =</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>      shared_info-&gt;GetBytecodeArray(heap_-&gt;isolate());</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span> </div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!HeapLayout::InWritableSharedSpace(shared_info));</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>  <span class="comment">// Zap the old entry in the trusted pointer table.</span></div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>  TrustedPointerTable&amp; table = heap_-&gt;isolate()-&gt;trusted_pointer_table();</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>  IndirectPointerSlot self_indirect_pointer_slot =</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>      bytecode_array-&gt;RawIndirectPointerField(</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>          BytecodeArray::kSelfIndirectPointerOffset,</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>          kBytecodeArrayIndirectPointerTag);</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>  table.Zap(self_indirect_pointer_slot.Relaxed_LoadHandle());</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span> </div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>  Tagged&lt;HeapObject&gt; compiled_data = bytecode_array;</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>  <a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a> compiled_data_start = compiled_data.address();</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>  <span class="keywordtype">int</span> compiled_data_size = <a class="code hl_define" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(compiled_data-&gt;Size());</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>  MutablePageMetadata* chunk =</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>      MutablePageMetadata::FromAddress(compiled_data_start);</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span> </div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>  <span class="comment">// Clear any recorded slots for the compiled data as being invalid.</span></div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>  RememberedSet&lt;OLD_TO_NEW&gt;::RemoveRange(</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>      SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>  RememberedSet&lt;OLD_TO_NEW_BACKGROUND&gt;::RemoveRange(</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>      SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>  RememberedSet&lt;OLD_TO_SHARED&gt;::RemoveRange(</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>      SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>  RememberedSet&lt;OLD_TO_OLD&gt;::RemoveRange(</div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>      SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>  RememberedSet&lt;TRUSTED_TO_TRUSTED&gt;::RemoveRange(</div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>      chunk, compiled_data_start, compiled_data_start + compiled_data_size,</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>      SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span> </div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>  <span class="comment">// Swap the map, using set_map_after_allocation to avoid verify heap checks</span></div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>  <span class="comment">// which are not necessary since we are doing this during the GC atomic pause.</span></div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>  compiled_data-&gt;set_map_after_allocation(</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>      heap_-&gt;isolate(),</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>      ReadOnlyRoots(heap_).uncompiled_data_without_preparse_data_map(),</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>      SKIP_WRITE_BARRIER);</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span> </div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>  <span class="comment">// Create a filler object for any left over space in the bytecode array.</span></div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>  <span class="keywordflow">if</span> (!heap_-&gt;IsLargeObject(compiled_data)) {</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> aligned_filler_offset =</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>        <a class="code hl_define" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(UncompiledDataWithoutPreparseData::kSize);</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>    heap_-&gt;CreateFillerObjectAt(compiled_data.address() + aligned_filler_offset,</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>                                compiled_data_size - aligned_filler_offset);</div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>  }</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span> </div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>  <span class="comment">// Initialize the uncompiled data.</span></div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>  Tagged&lt;UncompiledData&gt; uncompiled_data = Cast&lt;UncompiledData&gt;(compiled_data);</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span> </div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>  uncompiled_data-&gt;InitAfterBytecodeFlush(</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>      heap_-&gt;isolate(), inferred_name, start_position, end_position,</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>      [](Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span>, ObjectSlot slot,</div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>         Tagged&lt;HeapObject&gt; target) { RecordSlot(object, slot, target); });</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span> </div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>  <span class="comment">// Mark the uncompiled data as black, and ensure all fields have already been</span></div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>  <span class="comment">// marked.</span></div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(MarkingHelper::IsMarkedOrAlwaysLive(heap_, marking_state_,</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>                                             inferred_name));</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>  <span class="keywordflow">if</span> (MarkingHelper::GetLivenessMode(heap_, uncompiled_data) ==</div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>      MarkingHelper::LivenessMode::kMarkbit) {</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>    marking_state_-&gt;TryMarkAndAccountLiveBytes(uncompiled_data);</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>  }</div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span> </div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>  <span class="comment">// Mark the new entry in the trusted pointer table as alive.</span></div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>  TrustedPointerTable::Space* space = heap_-&gt;trusted_pointer_space();</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>  table.Mark(space, self_indirect_pointer_slot.Relaxed_LoadHandle());</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span> </div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>  shared_info-&gt;set_uncompiled_data(uncompiled_data);</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!shared_info-&gt;is_compiled());</div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>}</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span> </div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span><span class="keywordtype">void</span> MarkCompactCollector::ProcessOldCodeCandidates() {</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_bytecode || <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code ||</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>         weak_objects_.code_flushing_candidates.IsEmpty());</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>  Tagged&lt;SharedFunctionInfo&gt; flushing_candidate;</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>  <span class="keywordtype">int</span> number_of_flushed_sfis = 0;</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;code_flushing_candidates_local.Pop(</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>      &amp;flushing_candidate)) {</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>    <span class="keywordtype">bool</span> is_bytecode_live;</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code &amp;&amp; flushing_candidate-&gt;HasBaselineCode()) {</div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span>      is_bytecode_live = ProcessOldBaselineSFI(flushing_candidate);</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>      is_bytecode_live = ProcessOldBytecodeSFI(flushing_candidate);</div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>    }</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span> </div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>    <span class="keywordflow">if</span> (!is_bytecode_live) number_of_flushed_sfis++;</div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span> </div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>    <span class="comment">// Now record the data slots, which have been updated to an uncompiled</span></div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>    <span class="comment">// data, Baseline code or BytecodeArray which is still alive.</span></div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span><span class="preprocessor">#ifndef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>    <span class="comment">// If the sandbox is enabled, the slot contains an indirect pointer which</span></div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>    <span class="comment">// does not need to be updated during mark-compact (because the pointer in</span></div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>    <span class="comment">// the pointer table will be updated), so no action is needed here.</span></div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>    <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot = flushing_candidate-&gt;RawField(</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>        SharedFunctionInfo::kTrustedFunctionDataOffset);</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#af9f9433b8b4d9738a1201bb9e19389be">IsHeapObject</a>(*slot)) {</div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>      RecordSlot(flushing_candidate, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>    }</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span>  }</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span> </div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_flush_code) {</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(heap_-&gt;isolate(), <span class="stringliteral">&quot;%d flushed SharedFunctionInfo(s)\n&quot;</span>,</div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>                 number_of_flushed_sfis);</div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span>  }</div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span>}</div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span> </div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span><span class="keywordtype">bool</span> MarkCompactCollector::ProcessOldBytecodeSFI(</div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span>    Tagged&lt;SharedFunctionInfo&gt; flushing_candidate) {</div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>  <span class="comment">// During flushing a BytecodeArray is transformed into an UncompiledData</span></div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>  <span class="comment">// in place. Seeing an UncompiledData here implies that another</span></div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span>  <span class="comment">// SharedFunctionInfo had a reference to the same BytecodeArray and</span></div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span>  <span class="comment">// flushed it before processing this candidate. This can happen when using</span></div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span>  <span class="comment">// CloneSharedFunctionInfo().</span></div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span>  Isolate* <span class="keyword">const</span> isolate = heap_-&gt;isolate();</div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span> </div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> bytecode_already_decompiled =</div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>      flushing_candidate-&gt;HasUncompiledData();</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>  <span class="keywordflow">if</span> (!bytecode_already_decompiled) {</div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>    <span class="comment">// Check if the bytecode is still live.</span></div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>    Tagged&lt;BytecodeArray&gt; bytecode =</div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>        flushing_candidate-&gt;GetBytecodeArray(isolate);</div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span>    <span class="keywordflow">if</span> (MarkingHelper::IsMarkedOrAlwaysLive(heap_, non_atomic_marking_state_,</div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>                                            bytecode)) {</div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>    }</div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span>  }</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>  FlushSFI(flushing_candidate, bytecode_already_decompiled);</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span>}</div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span> </div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span><span class="keywordtype">bool</span> MarkCompactCollector::ProcessOldBaselineSFI(</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span>    Tagged&lt;SharedFunctionInfo&gt; flushing_candidate) {</div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>  Tagged&lt;Code&gt; baseline_code = flushing_candidate-&gt;baseline_code(kAcquireLoad);</div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span>  <span class="comment">// Safe to do a relaxed load here since the Code was acquire-loaded.</span></div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span>  Tagged&lt;InstructionStream&gt; baseline_istream =</div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span>      baseline_code-&gt;instruction_stream(baseline_code-&gt;code_cage_base(),</div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>                                        kRelaxedLoad);</div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>  Tagged&lt;HeapObject&gt; baseline_bytecode_or_interpreter_data =</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>      baseline_code-&gt;bytecode_or_interpreter_data();</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span> </div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span>  <span class="comment">// During flushing a BytecodeArray is transformed into an UncompiledData</span></div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span>  <span class="comment">// in place. Seeing an UncompiledData here implies that another</span></div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>  <span class="comment">// SharedFunctionInfo had a reference to the same BytecodeArray and</span></div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>  <span class="comment">// flushed it before processing this candidate. This can happen when using</span></div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>  <span class="comment">// CloneSharedFunctionInfo().</span></div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> bytecode_already_decompiled =</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>      IsUncompiledData(baseline_bytecode_or_interpreter_data, heap_-&gt;isolate());</div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>  <span class="keywordtype">bool</span> is_bytecode_live = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>  <span class="keywordflow">if</span> (!bytecode_already_decompiled) {</div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>    Tagged&lt;BytecodeArray&gt; bytecode =</div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>        flushing_candidate-&gt;GetBytecodeArray(heap_-&gt;isolate());</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>    is_bytecode_live = MarkingHelper::IsMarkedOrAlwaysLive(</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>        heap_, non_atomic_marking_state_, bytecode);</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>  }</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span> </div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>  <span class="keywordflow">if</span> (MarkingHelper::IsMarkedOrAlwaysLive(heap_, non_atomic_marking_state_,</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>                                          baseline_istream)) {</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>    <span class="comment">// Currently baseline code holds bytecode array strongly and it is</span></div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>    <span class="comment">// always ensured that bytecode is live if baseline code is live. Hence</span></div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>    <span class="comment">// baseline code can safely load bytecode array without any additional</span></div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>    <span class="comment">// checks. In future if this changes we need to update these checks to</span></div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>    <span class="comment">// flush code if the bytecode is not live and also update baseline code</span></div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>    <span class="comment">// to bailout if there is no bytecode.</span></div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(is_bytecode_live);</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span> </div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>    <span class="comment">// Regardless of whether the Code is a Code or</span></div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>    <span class="comment">// the InstructionStream itself, if the InstructionStream is live then</span></div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>    <span class="comment">// the Code has to be live and will have been marked via</span></div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span>    <span class="comment">// the owning JSFunction.</span></div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(MarkingHelper::IsMarkedOrAlwaysLive(heap_, non_atomic_marking_state_,</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span>                                               baseline_code));</div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_bytecode_live || bytecode_already_decompiled) {</div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>    <span class="comment">// Reset the function_data field to the BytecodeArray, InterpreterData,</span></div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>    <span class="comment">// or UncompiledData found on the baseline code. We can skip this step</span></div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>    <span class="comment">// if the BytecodeArray is not live and not already decompiled, because</span></div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>    <span class="comment">// FlushBytecodeFromSFI below will set the function_data field.</span></div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>    flushing_candidate-&gt;FlushBaselineCode();</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>  }</div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span> </div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>  <span class="keywordflow">if</span> (!is_bytecode_live) {</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>    FlushSFI(flushing_candidate, bytecode_already_decompiled);</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>  }</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span>  <span class="keywordflow">return</span> is_bytecode_live;</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span>}</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span> </div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span><span class="keywordtype">void</span> MarkCompactCollector::FlushSFI(Tagged&lt;SharedFunctionInfo&gt; sfi,</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>                                    <span class="keywordtype">bool</span> bytecode_already_decompiled) {</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span>  <span class="comment">// If baseline code flushing is disabled we should only flush bytecode</span></div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span>  <span class="comment">// from functions that don&#39;t have baseline data.</span></div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code || !sfi-&gt;HasBaselineCode());</div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span> </div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"> 3542</span>  <span class="keywordflow">if</span> (bytecode_already_decompiled) {</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"> 3543</span>    sfi-&gt;DiscardCompiledMetadata(</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span>        heap_-&gt;isolate(),</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>        [](Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span>, ObjectSlot slot,</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span>           Tagged&lt;HeapObject&gt; target) { RecordSlot(object, slot, target); });</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>    <span class="comment">// If the BytecodeArray is dead, flush it, which will replace the field</span></div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>    <span class="comment">// with an uncompiled data object.</span></div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span>    FlushBytecodeFromSFI(sfi);</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>  }</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>}</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span> </div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span><span class="keywordtype">void</span> MarkCompactCollector::ClearFlushedJsFunctions() {</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_bytecode ||</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>         weak_objects_.flushed_js_functions.IsEmpty());</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span>  Tagged&lt;JSFunction&gt; flushed_js_function;</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;flushed_js_functions_local.Pop(</div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span>      &amp;flushed_js_function)) {</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>    <span class="keyword">auto</span> gc_notify_updated_slot = [](Tagged&lt;HeapObject&gt; object, <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot,</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span>                                     Tagged&lt;Object&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a160b46cc89e1d0807731be8c2d2257c0">target</a>) {</div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span>      RecordSlot(<span class="keywordtype">object</span>, slot, Cast&lt;HeapObject&gt;(target));</div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>    };</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>    flushed_js_function-&gt;ResetIfCodeFlushed(heap_-&gt;isolate(),</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span>                                            gc_notify_updated_slot);</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"> 3566</span>  }</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>}</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span> </div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span><span class="preprocessor">#ifndef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span> </div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span><span class="keywordtype">void</span> MarkCompactCollector::ProcessFlushedBaselineCandidates() {</div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.flush_baseline_code ||</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>         weak_objects_.baseline_flushing_candidates.IsEmpty());</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>  Tagged&lt;JSFunction&gt; flushed_js_function;</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;baseline_flushing_candidates_local.Pop(</div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span>      &amp;flushed_js_function)) {</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span>    <span class="keyword">auto</span> gc_notify_updated_slot = [](Tagged&lt;HeapObject&gt; object, <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot,</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>                                     Tagged&lt;Object&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a160b46cc89e1d0807731be8c2d2257c0">target</a>) {</div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>      RecordSlot(<span class="keywordtype">object</span>, slot, Cast&lt;HeapObject&gt;(target));</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span>    };</div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>    flushed_js_function-&gt;ResetIfCodeFlushed(heap_-&gt;isolate(),</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>                                            gc_notify_updated_slot);</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span> </div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span><span class="preprocessor">#ifndef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>    <span class="comment">// Record the code slot that has been updated either to CompileLazy,</span></div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>    <span class="comment">// InterpreterEntryTrampoline or baseline code.</span></div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>    <span class="comment">// This is only necessary when the sandbox is not enabled. If it is, the</span></div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>    <span class="comment">// Code objects are referenced through a pointer table indirection and so</span></div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>    <span class="comment">// remembered slots are not necessary as the Code object will update its</span></div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>    <span class="comment">// entry in the pointer table when it is relocated.</span></div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>    <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot = flushed_js_function-&gt;RawField(JSFunction::kCodeOffset);</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span>    RecordSlot(flushed_js_function, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>  }</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span>}</div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span> </div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span><span class="preprocessor">#endif  </span><span class="comment">// !V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span> </div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span><span class="keywordtype">void</span> MarkCompactCollector::ClearFullMapTransitions() {</div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>  Tagged&lt;TransitionArray&gt; array;</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>  Isolate* <span class="keyword">const</span> isolate = heap_-&gt;isolate();</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>  ReadOnlyRoots roots(isolate);</div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;transition_arrays_local.Pop(&amp;array)) {</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>    <span class="keywordtype">int</span> num_transitions = array-&gt;number_of_transitions();</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span>    <span class="keywordflow">if</span> (num_transitions &gt; 0) {</div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>        Tagged&lt;Map&gt; <a class="code hl_variable" href="js-date-time-format_8cc.html#a22ede25ca923109929a8dca3c225b2ad">map</a>;</div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>        <span class="comment">// The array might contain &quot;undefined&quot; elements because it&#39;s not yet</span></div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>        <span class="comment">// filled. Allow it.</span></div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>        <span class="keywordflow">if</span> (array-&gt;GetTargetIfExists(0, isolate, &amp;map)) {</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!map.is_null());  <span class="comment">// Weak pointers aren&#39;t cleared yet.</span></div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span>          Tagged&lt;Object&gt; <a class="code hl_variable" href="namespacev8_1_1internal.html#ae3cd5ae1226a4707d6e6834191b97c92">constructor_or_back_pointer</a> =</div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span>              map-&gt;constructor_or_back_pointer();</div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal.html#a511c3dd03bb4fc2b91ed9ef5535e202e">IsSmi</a>(constructor_or_back_pointer)) {</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span>            <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(isolate-&gt;has_active_deserializer());</div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>            <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(constructor_or_back_pointer,</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span>                      Smi::uninitialized_deserialization_value());</div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>          }</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>          Tagged&lt;Map&gt; parent = Cast&lt;Map&gt;(map-&gt;constructor_or_back_pointer());</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span>          <span class="keyword">const</span> <span class="keywordtype">bool</span> parent_is_alive = MarkingHelper::IsMarkedOrAlwaysLive(</div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>              heap_, non_atomic_marking_state_, parent);</div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span>          Tagged&lt;DescriptorArray&gt; descriptors =</div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span>              parent_is_alive ? parent-&gt;instance_descriptors(isolate)</div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>                              : Tagged&lt;DescriptorArray&gt;();</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>          <span class="keywordtype">bool</span> descriptors_owner_died =</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span>              CompactTransitionArray(parent, array, descriptors);</div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>          <span class="keywordflow">if</span> (descriptors_owner_died) {</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>            TrimDescriptorArray(parent, descriptors);</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>          }</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>        }</div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>      }</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>  }</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>}</div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span> </div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span><span class="comment">// Returns false if no maps have died, or if the transition array is</span></div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span><span class="comment">// still being deserialized.</span></div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span><span class="keywordtype">bool</span> MarkCompactCollector::TransitionArrayNeedsCompaction(</div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span>    Tagged&lt;TransitionArray&gt; transitions, <span class="keywordtype">int</span> num_transitions) {</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>  ReadOnlyRoots roots(heap_-&gt;isolate());</div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_transitions; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>    Tagged&lt;MaybeObject&gt; raw_target = transitions-&gt;GetRawTarget(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>    <span class="keywordflow">if</span> (raw_target.IsSmi()) {</div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>      <span class="comment">// This target is still being deserialized,</span></div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(heap_-&gt;isolate()-&gt;has_active_deserializer());</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(raw_target.ToSmi(), Smi::uninitialized_deserialization_value());</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>      <span class="comment">// Targets can only be dead iff this array is fully deserialized.</span></div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; num_transitions; ++j) {</div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(</div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>            !transitions-&gt;GetRawTarget(j).IsSmi(),</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>            !non_atomic_marking_state_-&gt;IsUnmarked(transitions-&gt;GetTarget(j)));</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>      }</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>                   heap_, non_atomic_marking_state_,</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span>                   TransitionsAccessor::GetTargetFromRaw(raw_target))) {</div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>      <span class="comment">// Targets can only be dead iff this array is fully deserialized.</span></div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; num_transitions; ++j) {</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!transitions-&gt;GetRawTarget(j).IsSmi());</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>      }</div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>    }</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>  }</div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>}</div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span> </div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span><span class="keywordtype">bool</span> MarkCompactCollector::CompactTransitionArray(</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>    Tagged&lt;Map&gt; map, Tagged&lt;TransitionArray&gt; transitions,</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>    Tagged&lt;DescriptorArray&gt; descriptors) {</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!map-&gt;is_prototype_map());</div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>  <span class="keywordtype">int</span> num_transitions = transitions-&gt;number_of_transitions();</div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>  <span class="keywordflow">if</span> (!TransitionArrayNeedsCompaction(transitions, num_transitions)) {</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>  }</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>  ReadOnlyRoots roots(heap_-&gt;isolate());</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>  <span class="keywordtype">bool</span> descriptors_owner_died = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>  <span class="keywordtype">int</span> transition_index = 0;</div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>  <span class="comment">// Compact all live transitions to the left.</span></div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_transitions; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>    Tagged&lt;Map&gt; target = transitions-&gt;GetTarget(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(target-&gt;constructor_or_back_pointer(), map);</div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span> </div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>    <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>            heap_, non_atomic_marking_state_, target)) {</div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>      <span class="keywordflow">if</span> (!descriptors.is_null() &amp;&amp;</div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>          target-&gt;instance_descriptors(heap_-&gt;isolate()) == descriptors) {</div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!target-&gt;is_prototype_map());</div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>        descriptors_owner_died = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>      }</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>    }</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span> </div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span>    <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> != transition_index) {</div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>      Tagged&lt;Name&gt; <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a> = transitions-&gt;GetKey(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span>      transitions-&gt;SetKey(transition_index, <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>);</div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span>      <a class="code hl_typedef" href="namespacev8_1_1internal.html#ab170e314e69808aff2982aa41e7d1e59">HeapObjectSlot</a> key_slot = transitions-&gt;GetKeySlot(transition_index);</div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span>      RecordSlot(transitions, key_slot, <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>);</div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>      Tagged&lt;MaybeObject&gt; raw_target = transitions-&gt;GetRawTarget(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>      transitions-&gt;SetRawTarget(transition_index, raw_target);</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>      <a class="code hl_typedef" href="namespacev8_1_1internal.html#ab170e314e69808aff2982aa41e7d1e59">HeapObjectSlot</a> target_slot = transitions-&gt;GetTargetSlot(transition_index);</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>      RecordSlot(transitions, target_slot, raw_target.GetHeapObject());</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>    }</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span>    transition_index++;</div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span>  }</div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span>  <span class="comment">// If there are no transitions to be cleared, return.</span></div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>  <span class="keywordflow">if</span> (transition_index == num_transitions) {</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!descriptors_owner_died);</div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span>  }</div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span>  <span class="comment">// Note that we never eliminate a transition array, though we might right-trim</span></div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>  <span class="comment">// such that number_of_transitions() == 0. If this assumption changes,</span></div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>  <span class="comment">// TransitionArray::Insert() will need to deal with the case that a transition</span></div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>  <span class="comment">// array disappeared during GC.</span></div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>  <span class="keywordtype">int</span> old_capacity_in_entries = transitions-&gt;Capacity();</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>  <span class="keywordflow">if</span> (transition_index &lt; old_capacity_in_entries) {</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span>    <span class="keywordtype">int</span> old_capacity = transitions-&gt;length();</div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>    <span class="keyword">static_assert</span>(TransitionArray::kEntryKeyIndex == 0);</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(TransitionArray::ToKeyIndex(old_capacity_in_entries),</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>              old_capacity);</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>    <span class="keywordtype">int</span> new_capacity = TransitionArray::ToKeyIndex(transition_index);</div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>    heap_-&gt;RightTrimArray(transitions, new_capacity, old_capacity);</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>    transitions-&gt;SetNumberOfTransitions(transition_index);</div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>  }</div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>  <span class="keywordflow">return</span> descriptors_owner_died;</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>}</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span> </div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span><span class="keywordtype">void</span> MarkCompactCollector::RightTrimDescriptorArray(</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>    Tagged&lt;DescriptorArray&gt; array, <span class="keywordtype">int</span> descriptors_to_trim) {</div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>  <span class="keywordtype">int</span> old_nof_all_descriptors = array-&gt;number_of_all_descriptors();</div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>  <span class="keywordtype">int</span> new_nof_all_descriptors = old_nof_all_descriptors - descriptors_to_trim;</div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, descriptors_to_trim);</div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(0, new_nof_all_descriptors);</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>  <a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = array-&gt;GetDescriptorSlot(new_nof_all_descriptors).address();</div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span>  <a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> = array-&gt;GetDescriptorSlot(old_nof_all_descriptors).address();</div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>  MutablePageMetadata* chunk = MutablePageMetadata::FromHeapObject(array);</div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>  RememberedSet&lt;OLD_TO_NEW&gt;::RemoveRange(chunk, <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>,</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>                                         SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>  RememberedSet&lt;OLD_TO_NEW_BACKGROUND&gt;::RemoveRange(</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span>      chunk, <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>, SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>  RememberedSet&lt;OLD_TO_SHARED&gt;::RemoveRange(chunk, <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>,</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span>                                            SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>  RememberedSet&lt;OLD_TO_OLD&gt;::RemoveRange(chunk, <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>,</div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span>                                         SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="common_2globals_8h.html#a69541a836e89979350b2e7634e2d5a0a">V8_COMPRESS_POINTERS_8GB_BOOL</a>) {</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>    <a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a> aligned_start = <a class="code hl_define" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>);</div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>    <a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a> aligned_end = <a class="code hl_define" href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a>(<a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>);</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>    <span class="keywordflow">if</span> (aligned_start &lt; aligned_end) {</div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>      heap_-&gt;CreateFillerObjectAt(</div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span>          aligned_start, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(aligned_end - aligned_start));</div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span>    }</div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>    <span class="keywordflow">if</span> (heap::ShouldZapGarbage()) {</div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span>      <a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a> zap_end = std::min(aligned_start, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>);</div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#a5b59223136254772ef018d90e009318d">MemsetTagged</a>(<a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a>(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>),</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span>                   Tagged&lt;Object&gt;(<span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a><span class="keyword">&gt;</span>(kZapValue)),</div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span>                   (zap_end - <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>) &gt;&gt; kTaggedSizeLog2);</div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span>    }</div>
<div class="line"><a id="l03760" name="l03760"></a><span class="lineno"> 3760</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03761" name="l03761"></a><span class="lineno"> 3761</span>    heap_-&gt;CreateFillerObjectAt(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> - <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>));</div>
<div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span>  }</div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span>  array-&gt;set_number_of_all_descriptors(new_nof_all_descriptors);</div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>}</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span> </div>
<div class="foldopen" id="foldopen03766" data-start="{" data-end="}">
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#a268c6d19f21e9b35d477806a33960d64"> 3766</a></span><span class="keywordtype">void</span> MarkCompactCollector::RecordStrongDescriptorArraysForWeakening(</div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>    <a class="code hl_class" href="classv8_1_1internal_1_1GlobalHandleVector.html">GlobalHandleVector&lt;DescriptorArray&gt;</a> strong_descriptor_arrays) {</div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(heap_-&gt;incremental_marking()-&gt;IsMajorMarking());</div>
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"> 3769</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> guard(&amp;strong_descriptor_arrays_mutex_);</div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span>  strong_descriptor_arrays_.push_back(std::move(strong_descriptor_arrays));</div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span>}</div>
</div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span> </div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span><span class="keywordtype">void</span> MarkCompactCollector::WeakenStrongDescriptorArrays() {</div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Map&gt;</a> descriptor_array_map =</div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span>      <a class="code hl_class" href="classv8_1_1internal_1_1ReadOnlyRoots.html">ReadOnlyRoots</a>(heap_-&gt;isolate()).descriptor_array_map();</div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> vec : strong_descriptor_arrays_) {</div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = vec.begin(); it != vec.end(); ++it) {</div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;DescriptorArray&gt;</a> raw = it.raw();</div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsStrongDescriptorArray(raw));</div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>      raw-&gt;set_map_safe_transition_no_write_barrier(heap_-&gt;isolate(),</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span>                                                    descriptor_array_map);</div>
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"> 3782</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(raw-&gt;raw_gc_state(kRelaxedLoad), 0);</div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span>    }</div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span>  }</div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span>  strong_descriptor_arrays_.clear();</div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>}</div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span> </div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span><span class="keywordtype">void</span> MarkCompactCollector::TrimDescriptorArray(</div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>    Tagged&lt;Map&gt; map, Tagged&lt;DescriptorArray&gt; descriptors) {</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span>  <span class="keywordtype">int</span> number_of_own_descriptors = map-&gt;NumberOfOwnDescriptors();</div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>  <span class="keywordflow">if</span> (number_of_own_descriptors == 0) {</div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptors == ReadOnlyRoots(heap_).empty_descriptor_array());</div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>  }</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>  <span class="keywordtype">int</span> to_trim =</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>      descriptors-&gt;number_of_all_descriptors() - number_of_own_descriptors;</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>  <span class="keywordflow">if</span> (to_trim &gt; 0) {</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>    descriptors-&gt;set_number_of_descriptors(number_of_own_descriptors);</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>    RightTrimDescriptorArray(descriptors, to_trim);</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span> </div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>    TrimEnumCache(map, descriptors);</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>    descriptors-&gt;Sort();</div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span>  }</div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(descriptors-&gt;number_of_descriptors() == number_of_own_descriptors);</div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span>  map-&gt;set_owns_descriptors(<span class="keyword">true</span>);</div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span>}</div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span> </div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span><span class="keywordtype">void</span> MarkCompactCollector::TrimEnumCache(Tagged&lt;Map&gt; map,</div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>                                         Tagged&lt;DescriptorArray&gt; descriptors) {</div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>  <span class="keywordtype">int</span> live_enum = map-&gt;EnumLength();</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>  <span class="keywordflow">if</span> (live_enum == kInvalidEnumCacheSentinel) {</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>    live_enum = map-&gt;NumberOfEnumerableProperties();</div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span>  }</div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>  <span class="keywordflow">if</span> (live_enum == 0) <span class="keywordflow">return</span> descriptors-&gt;ClearEnumCache();</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>  Tagged&lt;EnumCache&gt; enum_cache = descriptors-&gt;enum_cache();</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span> </div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span>  Tagged&lt;FixedArray&gt; keys = enum_cache-&gt;keys();</div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span>  <span class="keywordtype">int</span> keys_length = keys-&gt;length();</div>
<div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span>  <span class="keywordflow">if</span> (live_enum &gt;= keys_length) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span>  heap_-&gt;RightTrimArray(keys, live_enum, keys_length);</div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span> </div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>  Tagged&lt;FixedArray&gt; indices = enum_cache-&gt;indices();</div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span>  <span class="keywordtype">int</span> indices_length = indices-&gt;length();</div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>  <span class="keywordflow">if</span> (live_enum &gt;= indices_length) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>  heap_-&gt;RightTrimArray(indices, live_enum, indices_length);</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>}</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span> </div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span><span class="keywordtype">void</span> MarkCompactCollector::ClearWeakCollections() {</div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_CLEAR_WEAK_COLLECTIONS);</div>
<div class="line"><a id="l03830" name="l03830"></a><span class="lineno"> 3830</span>  Tagged&lt;EphemeronHashTable&gt; table;</div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;ephemeron_hash_tables_local.Pop(&amp;table)) {</div>
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"> 3832</span>    <span class="keywordflow">for</span> (InternalIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : table-&gt;IterateEntries()) {</div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>      Tagged&lt;HeapObject&gt; <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a> = Cast&lt;HeapObject&gt;(table-&gt;KeyAt(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span><span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap) {</div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span>        Tagged&lt;Object&gt; value = table-&gt;ValueAt(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#af9f9433b8b4d9738a1201bb9e19389be">IsHeapObject</a>(value)) {</div>
<div class="line"><a id="l03838" name="l03838"></a><span class="lineno"> 3838</span>          Tagged&lt;HeapObject&gt; heap_object = Cast&lt;HeapObject&gt;(value);</div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span> </div>
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"> 3840</span>          <a class="code hl_define" href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(MarkingHelper::IsMarkedOrAlwaysLive(</div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span>                            heap_, non_atomic_marking_state_, <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>),</div>
<div class="line"><a id="l03842" name="l03842"></a><span class="lineno"> 3842</span>                        MarkingHelper::IsMarkedOrAlwaysLive(</div>
<div class="line"><a id="l03843" name="l03843"></a><span class="lineno"> 3843</span>                            heap_, non_atomic_marking_state_, heap_object));</div>
<div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span>        }</div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span>      }</div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span><span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span>      <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span>              heap_, non_atomic_marking_state_, <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>)) {</div>
<div class="line"><a id="l03849" name="l03849"></a><span class="lineno"> 3849</span>        table-&gt;RemoveEntry(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span>      }</div>
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"> 3851</span>    }</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>  }</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span>  <span class="keyword">auto</span>* table_map = heap_-&gt;ephemeron_remembered_set()-&gt;tables();</div>
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"> 3854</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = table_map-&gt;begin(); it != table_map-&gt;end();) {</div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>    <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>            heap_, non_atomic_marking_state_, it-&gt;first)) {</div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span>      it = table_map-&gt;erase(it);</div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span>      ++it;</div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>    }</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span>  }</div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>}</div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span> </div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TObjectAndSlot, <span class="keyword">typename</span> TMaybeSlot&gt;</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span><span class="keywordtype">void</span> MarkCompactCollector::ClearWeakReferences(</div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span>    WeakObjects::WeakObjectWorklist&lt;TObjectAndSlot&gt;::Local&amp; worklist,</div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span>    Tagged&lt;HeapObjectReference&gt; cleared_weak_ref) {</div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span>  TObjectAndSlot slot;</div>
<div class="line"><a id="l03869" name="l03869"></a><span class="lineno"> 3869</span>  <span class="keywordflow">while</span> (worklist.Pop(&amp;slot)) {</div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span>    Tagged&lt;HeapObject&gt; <a class="code hl_variable" href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a>;</div>
<div class="line"><a id="l03871" name="l03871"></a><span class="lineno"> 3871</span>    <span class="comment">// The slot could have been overwritten, so we have to treat it</span></div>
<div class="line"><a id="l03872" name="l03872"></a><span class="lineno"> 3872</span>    <span class="comment">// as [Protected]MaybeObjectSlot.</span></div>
<div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span>    TMaybeSlot location(slot.slot);</div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span>    <span class="keywordflow">if</span> (location.load().GetHeapObjectIfWeak(&amp;value)) {</div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsWeakCell(value));</div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>      <span class="comment">// Values in RO space have already been filtered, but a non-RO value may</span></div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span>      <span class="comment">// have been overwritten by a RO value since marking.</span></div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>      <span class="keywordflow">if</span> (MarkingHelper::IsMarkedOrAlwaysLive(heap_, non_atomic_marking_state_,</div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span>                                              value)) {</div>
<div class="line"><a id="l03880" name="l03880"></a><span class="lineno"> 3880</span>        <span class="comment">// The value of the weak reference is alive.</span></div>
<div class="line"><a id="l03881" name="l03881"></a><span class="lineno"> 3881</span>        RecordSlot(slot.heap_object, slot.slot, value);</div>
<div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(MainMarkingVisitor::IsTrivialWeakReferenceValue(slot.heap_object,</div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span>                                                               value));</div>
<div class="line"><a id="l03885" name="l03885"></a><span class="lineno"> 3885</span>        <span class="comment">// The value of the weak reference is non-live.</span></div>
<div class="line"><a id="l03886" name="l03886"></a><span class="lineno"> 3886</span>        <span class="comment">// This is a non-atomic store, which is fine as long as we only have a</span></div>
<div class="line"><a id="l03887" name="l03887"></a><span class="lineno"> 3887</span>        <span class="comment">// single clearing job.</span></div>
<div class="line"><a id="l03888" name="l03888"></a><span class="lineno"> 3888</span>        location.store(cleared_weak_ref);</div>
<div class="line"><a id="l03889" name="l03889"></a><span class="lineno"> 3889</span>      }</div>
<div class="line"><a id="l03890" name="l03890"></a><span class="lineno"> 3890</span>    }</div>
<div class="line"><a id="l03891" name="l03891"></a><span class="lineno"> 3891</span>  }</div>
<div class="line"><a id="l03892" name="l03892"></a><span class="lineno"> 3892</span>}</div>
<div class="line"><a id="l03893" name="l03893"></a><span class="lineno"> 3893</span> </div>
<div class="line"><a id="l03894" name="l03894"></a><span class="lineno"> 3894</span><span class="keywordtype">void</span> MarkCompactCollector::ClearTrivialWeakReferences() {</div>
<div class="line"><a id="l03895" name="l03895"></a><span class="lineno"> 3895</span>  Tagged&lt;HeapObjectReference&gt; cleared_weak_ref = <a class="code hl_function" href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">ClearedValue</a>(heap_-&gt;isolate());</div>
<div class="line"><a id="l03896" name="l03896"></a><span class="lineno"> 3896</span>  ClearWeakReferences&lt;HeapObjectAndSlot, MaybeObjectSlot&gt;(</div>
<div class="line"><a id="l03897" name="l03897"></a><span class="lineno"> 3897</span>      local_weak_objects()-&gt;weak_references_trivial_local, cleared_weak_ref);</div>
<div class="line"><a id="l03898" name="l03898"></a><span class="lineno"> 3898</span>}</div>
<div class="line"><a id="l03899" name="l03899"></a><span class="lineno"> 3899</span> </div>
<div class="line"><a id="l03900" name="l03900"></a><span class="lineno"> 3900</span><span class="keywordtype">void</span> MarkCompactCollector::ClearTrustedWeakReferences() {</div>
<div class="line"><a id="l03901" name="l03901"></a><span class="lineno"> 3901</span>  Tagged&lt;HeapObjectReference&gt; cleared_weak_ref = <a class="code hl_function" href="namespacev8_1_1internal.html#aaae66fce459a82ed75641e4543500b4d">ClearedTrustedValue</a>();</div>
<div class="line"><a id="l03902" name="l03902"></a><span class="lineno"> 3902</span>  ClearWeakReferences&lt;TrustedObjectAndSlot, ProtectedMaybeObjectSlot&gt;(</div>
<div class="line"><a id="l03903" name="l03903"></a><span class="lineno"> 3903</span>      local_weak_objects()-&gt;weak_references_trusted_local, cleared_weak_ref);</div>
<div class="line"><a id="l03904" name="l03904"></a><span class="lineno"> 3904</span>}</div>
<div class="line"><a id="l03905" name="l03905"></a><span class="lineno"> 3905</span> </div>
<div class="line"><a id="l03906" name="l03906"></a><span class="lineno"> 3906</span><span class="keywordtype">void</span> MarkCompactCollector::FilterNonTrivialWeakReferences() {</div>
<div class="line"><a id="l03907" name="l03907"></a><span class="lineno"> 3907</span>  <a class="code hl_typedef" href="namespacev8_1_1internal.html#a8e0177885936828a908f569be4618338">HeapObjectAndSlot</a> slot;</div>
<div class="line"><a id="l03908" name="l03908"></a><span class="lineno"> 3908</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;weak_references_non_trivial_local.Pop(&amp;slot)) {</div>
<div class="line"><a id="l03909" name="l03909"></a><span class="lineno"> 3909</span>    Tagged&lt;HeapObject&gt; <a class="code hl_variable" href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a>;</div>
<div class="line"><a id="l03910" name="l03910"></a><span class="lineno"> 3910</span>    <span class="comment">// The slot could have been overwritten, so we have to treat it</span></div>
<div class="line"><a id="l03911" name="l03911"></a><span class="lineno"> 3911</span>    <span class="comment">// as MaybeObjectSlot.</span></div>
<div class="line"><a id="l03912" name="l03912"></a><span class="lineno"> 3912</span>    <a class="code hl_typedef" href="namespacev8_1_1internal.html#adade5e1dd0ce3dc6f030ff3ea640f424">MaybeObjectSlot</a> location(slot.slot);</div>
<div class="line"><a id="l03913" name="l03913"></a><span class="lineno"> 3913</span>    <span class="keywordflow">if</span> ((*location).GetHeapObjectIfWeak(&amp;value)) {</div>
<div class="line"><a id="l03914" name="l03914"></a><span class="lineno"> 3914</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsWeakCell(value));</div>
<div class="line"><a id="l03915" name="l03915"></a><span class="lineno"> 3915</span>      <span class="comment">// Values in RO space have already been filtered, but a non-RO value may</span></div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span>      <span class="comment">// have been overwritten by a RO value since marking.</span></div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span>      <span class="keywordflow">if</span> (MarkingHelper::IsMarkedOrAlwaysLive(heap_, non_atomic_marking_state_,</div>
<div class="line"><a id="l03918" name="l03918"></a><span class="lineno"> 3918</span>                                              value)) {</div>
<div class="line"><a id="l03919" name="l03919"></a><span class="lineno"> 3919</span>        <span class="comment">// The value of the weak reference is alive.</span></div>
<div class="line"><a id="l03920" name="l03920"></a><span class="lineno"> 3920</span>        RecordSlot(slot.heap_object, <a class="code hl_typedef" href="namespacev8_1_1internal.html#ab170e314e69808aff2982aa41e7d1e59">HeapObjectSlot</a>(location), value);</div>
<div class="line"><a id="l03921" name="l03921"></a><span class="lineno"> 3921</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03922" name="l03922"></a><span class="lineno"> 3922</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!MainMarkingVisitor::IsTrivialWeakReferenceValue(</div>
<div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>            slot.heap_object, value));</div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span>        <span class="comment">// The value is non-live, defer the actual clearing.</span></div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>        <span class="comment">// This is non-atomic, which is fine as long as we only have a single</span></div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>        <span class="comment">// filtering job.</span></div>
<div class="line"><a id="l03927" name="l03927"></a><span class="lineno"> 3927</span>        local_weak_objects_-&gt;weak_references_non_trivial_unmarked_local.Push(</div>
<div class="line"><a id="l03928" name="l03928"></a><span class="lineno"> 3928</span>            slot);</div>
<div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>      }</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span>    }</div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span>  }</div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span>}</div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span> </div>
<div class="line"><a id="l03934" name="l03934"></a><span class="lineno"> 3934</span><span class="keywordtype">void</span> MarkCompactCollector::ClearNonTrivialWeakReferences() {</div>
<div class="line"><a id="l03935" name="l03935"></a><span class="lineno"> 3935</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l03936" name="l03936"></a><span class="lineno"> 3936</span>           GCTracer::Scope::MC_CLEAR_WEAK_REFERENCES_NON_TRIVIAL);</div>
<div class="line"><a id="l03937" name="l03937"></a><span class="lineno"> 3937</span>  <a class="code hl_typedef" href="namespacev8_1_1internal.html#a8e0177885936828a908f569be4618338">HeapObjectAndSlot</a> slot;</div>
<div class="line"><a id="l03938" name="l03938"></a><span class="lineno"> 3938</span>  Tagged&lt;HeapObjectReference&gt; cleared_weak_ref = <a class="code hl_function" href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">ClearedValue</a>(heap_-&gt;isolate());</div>
<div class="line"><a id="l03939" name="l03939"></a><span class="lineno"> 3939</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;weak_references_non_trivial_unmarked_local.Pop(</div>
<div class="line"><a id="l03940" name="l03940"></a><span class="lineno"> 3940</span>      &amp;slot)) {</div>
<div class="line"><a id="l03941" name="l03941"></a><span class="lineno"> 3941</span>    <span class="comment">// The slot may not have been overwritten since it was filtered, so we can</span></div>
<div class="line"><a id="l03942" name="l03942"></a><span class="lineno"> 3942</span>    <span class="comment">// directly read its value.</span></div>
<div class="line"><a id="l03943" name="l03943"></a><span class="lineno"> 3943</span>    Tagged&lt;HeapObject&gt; value = (*slot.slot).GetHeapObjectAssumeWeak();</div>
<div class="line"><a id="l03944" name="l03944"></a><span class="lineno"> 3944</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsWeakCell(value));</div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!HeapLayout::InReadOnlySpace(value));</div>
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"> 3946</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.black_allocated_pages,</div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>                   !HeapLayout::InBlackAllocatedPage(value));</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!non_atomic_marking_state_-&gt;IsMarked(value));</div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!MainMarkingVisitor::IsTrivialWeakReferenceValue(slot.heap_object,</div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>                                                            value));</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span>    <span class="keywordflow">if</span> (!SpecialClearMapSlot(slot.heap_object, Cast&lt;Map&gt;(value), slot.slot)) {</div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span>      slot.slot.store(cleared_weak_ref);</div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>    }</div>
<div class="line"><a id="l03954" name="l03954"></a><span class="lineno"> 3954</span>  }</div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"> 3955</span>}</div>
<div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span> </div>
<div class="line"><a id="l03957" name="l03957"></a><span class="lineno"> 3957</span><span class="keywordtype">void</span> MarkCompactCollector::ClearJSWeakRefs() {</div>
<div class="line"><a id="l03958" name="l03958"></a><span class="lineno"> 3958</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_CLEAR_JS_WEAK_REFERENCES);</div>
<div class="line"><a id="l03959" name="l03959"></a><span class="lineno"> 3959</span>  Tagged&lt;JSWeakRef&gt; weak_ref;</div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span>  Isolate* <span class="keyword">const</span> isolate = heap_-&gt;isolate();</div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;js_weak_refs_local.Pop(&amp;weak_ref)) {</div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"> 3962</span>    Tagged&lt;HeapObject&gt; target = Cast&lt;HeapObject&gt;(weak_ref-&gt;target());</div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"> 3963</span>    <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03964" name="l03964"></a><span class="lineno"> 3964</span>            heap_, non_atomic_marking_state_, target)) {</div>
<div class="line"><a id="l03965" name="l03965"></a><span class="lineno"> 3965</span>      weak_ref-&gt;set_target(ReadOnlyRoots(isolate).undefined_value());</div>
<div class="line"><a id="l03966" name="l03966"></a><span class="lineno"> 3966</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>      <span class="comment">// The value of the JSWeakRef is alive.</span></div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span>      <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot = weak_ref-&gt;RawField(JSWeakRef::kTargetOffset);</div>
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"> 3969</span>      RecordSlot(weak_ref, slot, target);</div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>    }</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>  }</div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span>  Tagged&lt;WeakCell&gt; weak_cell;</div>
<div class="line"><a id="l03973" name="l03973"></a><span class="lineno"> 3973</span>  <span class="keywordflow">while</span> (local_weak_objects()-&gt;weak_cells_local.Pop(&amp;weak_cell)) {</div>
<div class="line"><a id="l03974" name="l03974"></a><span class="lineno"> 3974</span>    <span class="keyword">auto</span> gc_notify_updated_slot = [](Tagged&lt;HeapObject&gt; object, <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot,</div>
<div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>                                     Tagged&lt;Object&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a160b46cc89e1d0807731be8c2d2257c0">target</a>) {</div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#af9f9433b8b4d9738a1201bb9e19389be">IsHeapObject</a>(target)) {</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span>        RecordSlot(<span class="keywordtype">object</span>, slot, Cast&lt;HeapObject&gt;(target));</div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span>      }</div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>    };</div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>    Tagged&lt;HeapObject&gt; target = Cast&lt;HeapObject&gt;(weak_cell-&gt;target());</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>    <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l03982" name="l03982"></a><span class="lineno"> 3982</span>            heap_, non_atomic_marking_state_, target)) {</div>
<div class="line"><a id="l03983" name="l03983"></a><span class="lineno"> 3983</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(Object::CanBeHeldWeakly(target));</div>
<div class="line"><a id="l03984" name="l03984"></a><span class="lineno"> 3984</span>      <span class="comment">// The value of the WeakCell is dead.</span></div>
<div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>      Tagged&lt;JSFinalizationRegistry&gt; finalization_registry =</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span>          Cast&lt;JSFinalizationRegistry&gt;(weak_cell-&gt;finalization_registry());</div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>      <span class="keywordflow">if</span> (!finalization_registry-&gt;scheduled_for_cleanup()) {</div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>        heap_-&gt;EnqueueDirtyJSFinalizationRegistry(finalization_registry,</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span>                                                  gc_notify_updated_slot);</div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>      }</div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span>      <span class="comment">// We&#39;re modifying the pointers in WeakCell and JSFinalizationRegistry</span></div>
<div class="line"><a id="l03992" name="l03992"></a><span class="lineno"> 3992</span>      <span class="comment">// during GC; thus we need to record the slots it writes. The normal write</span></div>
<div class="line"><a id="l03993" name="l03993"></a><span class="lineno"> 3993</span>      <span class="comment">// barrier is not enough, since it&#39;s disabled before GC.</span></div>
<div class="line"><a id="l03994" name="l03994"></a><span class="lineno"> 3994</span>      weak_cell-&gt;Nullify(isolate, gc_notify_updated_slot);</div>
<div class="line"><a id="l03995" name="l03995"></a><span class="lineno"> 3995</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(finalization_registry-&gt;NeedsCleanup());</div>
<div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(finalization_registry-&gt;scheduled_for_cleanup());</div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span>      <span class="comment">// The value of the WeakCell is alive.</span></div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span>      <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot = weak_cell-&gt;RawField(WeakCell::kTargetOffset);</div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>      RecordSlot(weak_cell, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span>    }</div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span> </div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span>    Tagged&lt;HeapObject&gt; unregister_token = weak_cell-&gt;unregister_token();</div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>    <span class="keywordflow">if</span> (MarkingHelper::IsUnmarkedAndNotAlwaysLive(</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span>            heap_, non_atomic_marking_state_, unregister_token)) {</div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(Object::CanBeHeldWeakly(unregister_token));</div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>      <span class="comment">// The unregister token is dead. Remove any corresponding entries in the</span></div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span>      <span class="comment">// key map. Multiple WeakCell with the same token will have all their</span></div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span>      <span class="comment">// unregister_token field set to undefined when processing the first</span></div>
<div class="line"><a id="l04010" name="l04010"></a><span class="lineno"> 4010</span>      <span class="comment">// WeakCell. Like above, we&#39;re modifying pointers during GC, so record the</span></div>
<div class="line"><a id="l04011" name="l04011"></a><span class="lineno"> 4011</span>      <span class="comment">// slots.</span></div>
<div class="line"><a id="l04012" name="l04012"></a><span class="lineno"> 4012</span>      Tagged&lt;JSFinalizationRegistry&gt; finalization_registry =</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span>          Cast&lt;JSFinalizationRegistry&gt;(weak_cell-&gt;finalization_registry());</div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>      finalization_registry-&gt;RemoveUnregisterToken(</div>
<div class="line"><a id="l04015" name="l04015"></a><span class="lineno"> 4015</span>          unregister_token, isolate,</div>
<div class="line"><a id="l04016" name="l04016"></a><span class="lineno"> 4016</span>          JSFinalizationRegistry::kKeepMatchedCellsInRegistry,</div>
<div class="line"><a id="l04017" name="l04017"></a><span class="lineno"> 4017</span>          gc_notify_updated_slot);</div>
<div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span>      <span class="comment">// The unregister_token is alive.</span></div>
<div class="line"><a id="l04020" name="l04020"></a><span class="lineno"> 4020</span>      <a class="code hl_typedef" href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">ObjectSlot</a> slot = weak_cell-&gt;RawField(WeakCell::kUnregisterTokenOffset);</div>
<div class="line"><a id="l04021" name="l04021"></a><span class="lineno"> 4021</span>      RecordSlot(weak_cell, slot, Cast&lt;HeapObject&gt;(*slot));</div>
<div class="line"><a id="l04022" name="l04022"></a><span class="lineno"> 4022</span>    }</div>
<div class="line"><a id="l04023" name="l04023"></a><span class="lineno"> 4023</span>  }</div>
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"> 4024</span>  heap_-&gt;PostFinalizationRegistryCleanupTaskIfNeeded();</div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span>}</div>
<div class="line"><a id="l04026" name="l04026"></a><span class="lineno"> 4026</span> </div>
<div class="line"><a id="l04027" name="l04027"></a><span class="lineno"> 4027</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen04028" data-start="{" data-end="}">
<div class="line"><a id="l04028" name="l04028"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#ac97a73ff845731485fa3556291425f39"> 4028</a></span><span class="keywordtype">bool</span> MarkCompactCollector::ShouldRecordRelocSlot(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l04029" name="l04029"></a><span class="lineno"> 4029</span>                                                 <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo,</div>
<div class="line"><a id="l04030" name="l04030"></a><span class="lineno"> 4030</span>                                                 <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> target) {</div>
<div class="line"><a id="l04031" name="l04031"></a><span class="lineno"> 4031</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* source_chunk = MemoryChunk::FromHeapObject(host);</div>
<div class="line"><a id="l04032" name="l04032"></a><span class="lineno"> 4032</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* target_chunk = MemoryChunk::FromHeapObject(target);</div>
<div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>  <span class="keywordflow">return</span> target_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a31917793e4e1f003c57c07b8dd2422fa">IsEvacuationCandidate</a>() &amp;&amp;</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span>         !source_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#aab1d9e4d7cb3d99eba977b301cd1cd89">ShouldSkipEvacuationSlotRecording</a>();</div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>}</div>
</div>
<div class="line"><a id="l04036" name="l04036"></a><span class="lineno"> 4036</span> </div>
<div class="line"><a id="l04037" name="l04037"></a><span class="lineno"> 4037</span><span class="comment">// static</span></div>
<div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span><a class="code hl_struct" href="structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo.html">MarkCompactCollector::RecordRelocSlotInfo</a></div>
<div class="foldopen" id="foldopen04039" data-start="{" data-end="}">
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#adb22d7642cc47c49db3b6f5041b129b9"> 4039</a></span>MarkCompactCollector::ProcessRelocInfo(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>                                       <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo,</div>
<div class="line"><a id="l04041" name="l04041"></a><span class="lineno"> 4041</span>                                       <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> target) {</div>
<div class="line"><a id="l04042" name="l04042"></a><span class="lineno"> 4042</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo.html">RecordRelocSlotInfo</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>  <span class="keyword">const</span> <a class="code hl_enumeration" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">RelocInfo::Mode</a> rmode = rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#adbcb85c0a1896ff1e7661746d6143e90">rmode</a>();</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span>  Address addr;</div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1">SlotType</a> slot_type;</div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span> </div>
<div class="line"><a id="l04047" name="l04047"></a><span class="lineno"> 4047</span>  <span class="keywordflow">if</span> (rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a74178a98b5efdd971a4f647281b6296e">IsInConstantPool</a>()) {</div>
<div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>    addr = rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#abecc351ac3cac56e2f2c19081b2fc2e1">constant_pool_entry_address</a>();</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span> </div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>    <span class="keywordflow">if</span> (RelocInfo::IsCodeTargetMode(rmode)) {</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>      slot_type = SlotType::kConstPoolCodeEntry;</div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RelocInfo::IsCompressedEmbeddedObject(rmode)) {</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span>      slot_type = SlotType::kConstPoolEmbeddedObjectCompressed;</div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(RelocInfo::IsFullEmbeddedObject(rmode));</div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>      slot_type = SlotType::kConstPoolEmbeddedObjectFull;</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>    }</div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>    addr = rinfo-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#ae4e4b6b325ffcbba5c03de7c640c8f99">pc</a>();</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span> </div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span>    <span class="keywordflow">if</span> (RelocInfo::IsCodeTargetMode(rmode)) {</div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span>      slot_type = SlotType::kCodeEntry;</div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RelocInfo::IsFullEmbeddedObject(rmode)) {</div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span>      slot_type = SlotType::kEmbeddedObjectFull;</div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(RelocInfo::IsCompressedEmbeddedObject(rmode));</div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>      slot_type = SlotType::kEmbeddedObjectCompressed;</div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>    }</div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span>  }</div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span> </div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* <span class="keyword">const</span> source_chunk = MemoryChunk::FromHeapObject(host);</div>
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"> 4072</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* <span class="keyword">const</span> source_page_metadata =</div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>      MutablePageMetadata::cast(source_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a646a2dccc971ad9f546e0da4a35cfbbb">Metadata</a>());</div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span>  <span class="keyword">const</span> uintptr_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> = source_chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">Offset</a>(addr);</div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>, <span class="keyword">static_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(TypedSlotSet::kMaxOffset));</div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.page_metadata = source_page_metadata;</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.slot_type = slot_type;</div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.offset = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>);</div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span> </div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span>}</div>
</div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span> </div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen04084" data-start="{" data-end="}">
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1MarkCompactCollector.html#ae4455c0b37942d5616bb57730157eb6a"> 4084</a></span><span class="keywordtype">void</span> MarkCompactCollector::RecordRelocSlot(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>                                           <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo,</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span>                                           <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> target) {</div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span>  <span class="keywordflow">if</span> (!ShouldRecordRelocSlot(host, rinfo, target)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo.html">RecordRelocSlotInfo</a> info = ProcessRelocInfo(host, rinfo, target);</div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span> </div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span>  <span class="comment">// Access to TypeSlots need to be protected, since LocalHeaps might</span></div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>  <span class="comment">// publish code in the background thread.</span></div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>  std::optional&lt;base::SpinningMutexGuard&gt; opt_guard;</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.concurrent_sparkplug) {</div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span>    opt_guard.emplace(info.page_metadata-&gt;mutex());</div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span>  }</div>
<div class="line"><a id="l04096" name="l04096"></a><span class="lineno"> 4096</span>  <a class="code hl_class" href="classv8_1_1internal_1_1RememberedSet.html">RememberedSet&lt;OLD_TO_OLD&gt;::InsertTyped</a>(info.page_metadata, info.slot_type,</div>
<div class="line"><a id="l04097" name="l04097"></a><span class="lineno"> 4097</span>                                         info.offset);</div>
<div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span>}</div>
</div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span> </div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span> </div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span><span class="comment">// Missing specialization MakeSlotValue&lt;FullObjectSlot, WEAK&gt;() will turn</span></div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span><span class="comment">// attempt to store a weak reference to strong-only slot to a compilation error.</span></div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot, HeapObjectReferenceType reference_type&gt;</div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span><span class="keyword">typename</span> TSlot::TObject MakeSlotValue(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object);</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span> </div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span><a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> MakeSlotValue&lt;ObjectSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object) {</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>}</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span> </div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"> 4114</span>Tagged&lt;MaybeObject&gt;</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>MakeSlotValue&lt;MaybeObjectSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span>}</div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span> </div>
<div class="line"><a id="l04120" name="l04120"></a><span class="lineno"> 4120</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04121" name="l04121"></a><span class="lineno"> 4121</span>Tagged&lt;MaybeObject&gt;</div>
<div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span>MakeSlotValue&lt;MaybeObjectSlot, HeapObjectReferenceType::WEAK&gt;(</div>
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"> 4123</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04124" name="l04124"></a><span class="lineno"> 4124</span>  <span class="keywordflow">return</span> MakeWeak(heap_object);</div>
<div class="line"><a id="l04125" name="l04125"></a><span class="lineno"> 4125</span>}</div>
<div class="line"><a id="l04126" name="l04126"></a><span class="lineno"> 4126</span> </div>
<div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>Tagged&lt;Object&gt;</div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>MakeSlotValue&lt;WriteProtectedSlot&lt;ObjectSlot&gt;, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span>}</div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span> </div>
<div class="line"><a id="l04134" name="l04134"></a><span class="lineno"> 4134</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l04135" name="l04135"></a><span class="lineno"> 4135</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span>Tagged&lt;Object&gt; MakeSlotValue&lt;WriteProtectedSlot&lt;ProtectedPointerSlot&gt;,</div>
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"> 4137</span>                             HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04139" name="l04139"></a><span class="lineno"> 4139</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04140" name="l04140"></a><span class="lineno"> 4140</span>}</div>
<div class="line"><a id="l04141" name="l04141"></a><span class="lineno"> 4141</span> </div>
<div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>Tagged&lt;MaybeObject&gt;</div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>MakeSlotValue&lt;ProtectedMaybeObjectSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span>}</div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span> </div>
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"> 4149</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span>Tagged&lt;MaybeObject&gt;</div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span>MakeSlotValue&lt;ProtectedMaybeObjectSlot, HeapObjectReferenceType::WEAK&gt;(</div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1api__internal.html#a6e19dba9644f1405ed8144c4d9e7b98f">MakeWeak</a>(heap_object);</div>
<div class="line"><a id="l04154" name="l04154"></a><span class="lineno"> 4154</span>}</div>
<div class="line"><a id="l04155" name="l04155"></a><span class="lineno"> 4155</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04156" name="l04156"></a><span class="lineno"> 4156</span> </div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"> 4158</span>Tagged&lt;Object&gt;</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>MakeSlotValue&lt;OffHeapObjectSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>}</div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span> </div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span><span class="preprocessor">#ifdef V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04166" name="l04166"></a><span class="lineno"> 4166</span>Tagged&lt;Object&gt; MakeSlotValue&lt;FullObjectSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04167" name="l04167"></a><span class="lineno"> 4167</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>}</div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span> </div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span>Tagged&lt;MaybeObject&gt;</div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>MakeSlotValue&lt;FullMaybeObjectSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>}</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span> </div>
<div class="line"><a id="l04178" name="l04178"></a><span class="lineno"> 4178</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04179" name="l04179"></a><span class="lineno"> 4179</span>Tagged&lt;MaybeObject&gt;</div>
<div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span>MakeSlotValue&lt;FullMaybeObjectSlot, HeapObjectReferenceType::WEAK&gt;(</div>
<div class="line"><a id="l04181" name="l04181"></a><span class="lineno"> 4181</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04182" name="l04182"></a><span class="lineno"> 4182</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1api__internal.html#a6e19dba9644f1405ed8144c4d9e7b98f">MakeWeak</a>(heap_object);</div>
<div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>}</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span> </div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span><span class="preprocessor">#ifdef V8_EXTERNAL_CODE_SPACE</span></div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04187" name="l04187"></a><span class="lineno"> 4187</span>Tagged&lt;Object&gt;</div>
<div class="line"><a id="l04188" name="l04188"></a><span class="lineno"> 4188</span>MakeSlotValue&lt;InstructionStreamSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>}</div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span><span class="preprocessor">#endif  </span><span class="comment">// V8_EXTERNAL_CODE_SPACE</span></div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span> </div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l04196" name="l04196"></a><span class="lineno"> 4196</span>Tagged&lt;Object&gt;</div>
<div class="line"><a id="l04197" name="l04197"></a><span class="lineno"> 4197</span>MakeSlotValue&lt;ProtectedPointerSlot, HeapObjectReferenceType::STRONG&gt;(</div>
<div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>    Tagged&lt;HeapObject&gt; heap_object) {</div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span>  <span class="keywordflow">return</span> heap_object;</div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>}</div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span> </div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span><span class="comment">// The following specialization</span></div>
<div class="line"><a id="l04204" name="l04204"></a><span class="lineno"> 4204</span><span class="comment">//   MakeSlotValue&lt;FullMaybeObjectSlot, HeapObjectReferenceType::WEAK&gt;()</span></div>
<div class="line"><a id="l04205" name="l04205"></a><span class="lineno"> 4205</span><span class="comment">// is not used.</span></div>
<div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span><span class="preprocessor">#endif  </span><span class="comment">// V8_COMPRESS_POINTERS</span></div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span> </div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span><span class="keyword">template</span> &lt;HeapObjectReferenceType reference_type, <span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateSlot(PtrComprCageBase cage_base, TSlot slot,</div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>                              Tagged&lt;HeapObject&gt; heap_obj) {</div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span>  <span class="keyword">static_assert</span>(</div>
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"> 4212</span>      std::is_same_v&lt;TSlot, FullObjectSlot&gt; ||</div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>          std::is_same_v&lt;TSlot, ObjectSlot&gt; ||</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>          std::is_same_v&lt;TSlot, FullMaybeObjectSlot&gt; ||</div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>          std::is_same_v&lt;TSlot, MaybeObjectSlot&gt; ||</div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span>          std::is_same_v&lt;TSlot, OffHeapObjectSlot&gt; ||</div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>          std::is_same_v&lt;TSlot, InstructionStreamSlot&gt; ||</div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span>          std::is_same_v&lt;TSlot, ProtectedPointerSlot&gt; ||</div>
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"> 4219</span>          std::is_same_v&lt;TSlot, ProtectedMaybeObjectSlot&gt; ||</div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>          std::is_same_v&lt;TSlot, WriteProtectedSlot&lt;ObjectSlot&gt;&gt; ||</div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>          std::is_same_v&lt;TSlot, WriteProtectedSlot&lt;ProtectedPointerSlot&gt;&gt;,</div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>      <span class="stringliteral">&quot;Only [Full|OffHeap]ObjectSlot, [Full]MaybeObjectSlot, &quot;</span></div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span>      <span class="stringliteral">&quot;InstructionStreamSlot, Protected[Pointer|MaybeObject]Slot, &quot;</span></div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>      <span class="stringliteral">&quot;or WriteProtectedSlot are expected here&quot;</span>);</div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span>  MapWord map_word = heap_obj-&gt;map_word(cage_base, kRelaxedLoad);</div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span>  <span class="keywordflow">if</span> (!map_word.IsForwardingAddress()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>((!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms &amp;&amp; !Heap::InFromPage(heap_obj)),</div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span>                 MarkCompactCollector::IsOnEvacuationCandidate(heap_obj) ||</div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>                     MemoryChunk::FromHeapObject(heap_obj)-&gt;IsFlagSet(</div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>                         MemoryChunk::COMPACTION_WAS_ABORTED));</div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span>  <span class="keyword">typename</span> TSlot::TObject target = MakeSlotValue&lt;TSlot, reference_type&gt;(</div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span>      map_word.ToForwardingAddress(heap_obj));</div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>  <span class="comment">// Needs to be atomic for map space compaction: This slot could be a map</span></div>
<div class="line"><a id="l04234" name="l04234"></a><span class="lineno"> 4234</span>  <span class="comment">// word which we update while loading the map word for updating the slot</span></div>
<div class="line"><a id="l04235" name="l04235"></a><span class="lineno"> 4235</span>  <span class="comment">// on another page.</span></div>
<div class="line"><a id="l04236" name="l04236"></a><span class="lineno"> 4236</span>  slot.Relaxed_Store(target);</div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits, !Heap::InFromPage(target));</div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!MarkCompactCollector::IsOnEvacuationCandidate(target));</div>
<div class="line"><a id="l04239" name="l04239"></a><span class="lineno"> 4239</span>}</div>
<div class="line"><a id="l04240" name="l04240"></a><span class="lineno"> 4240</span> </div>
<div class="line"><a id="l04241" name="l04241"></a><span class="lineno"> 4241</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l04242" name="l04242"></a><span class="lineno"> 4242</span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateSlot(PtrComprCageBase cage_base, TSlot slot) {</div>
<div class="line"><a id="l04243" name="l04243"></a><span class="lineno"> 4243</span>  <span class="keyword">typename</span> TSlot::TObject obj = slot.Relaxed_Load(cage_base);</div>
<div class="line"><a id="l04244" name="l04244"></a><span class="lineno"> 4244</span>  Tagged&lt;HeapObject&gt; heap_obj;</div>
<div class="line"><a id="l04245" name="l04245"></a><span class="lineno"> 4245</span>  <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (TSlot::kCanBeWeak) {</div>
<div class="line"><a id="l04246" name="l04246"></a><span class="lineno"> 4246</span>    <span class="keywordflow">if</span> (obj.GetHeapObjectIfWeak(&amp;heap_obj)) {</div>
<div class="line"><a id="l04247" name="l04247"></a><span class="lineno"> 4247</span>      <span class="keywordflow">return</span> UpdateSlot&lt;HeapObjectReferenceType::WEAK&gt;(cage_base, slot,</div>
<div class="line"><a id="l04248" name="l04248"></a><span class="lineno"> 4248</span>                                                       heap_obj);</div>
<div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>    }</div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span>  }</div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"> 4251</span>  <span class="keywordflow">if</span> (obj.GetHeapObjectIfStrong(&amp;heap_obj)) {</div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"> 4252</span>    UpdateSlot&lt;HeapObjectReferenceType::STRONG&gt;(cage_base, slot, heap_obj);</div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"> 4253</span>  }</div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span>}</div>
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"> 4255</span> </div>
<div class="line"><a id="l04256" name="l04256"></a><span class="lineno"> 4256</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l04257" name="l04257"></a><span class="lineno"> 4257</span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code hl_enumeration" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759">SlotCallbackResult</a> UpdateOldToSharedSlot(</div>
<div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span>    PtrComprCageBase cage_base, TSlot slot) {</div>
<div class="line"><a id="l04259" name="l04259"></a><span class="lineno"> 4259</span>  <span class="keyword">typename</span> TSlot::TObject obj = slot.Relaxed_Load(cage_base);</div>
<div class="line"><a id="l04260" name="l04260"></a><span class="lineno"> 4260</span>  Tagged&lt;HeapObject&gt; heap_obj;</div>
<div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span> </div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span>  <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (TSlot::kCanBeWeak) {</div>
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"> 4263</span>    <span class="keywordflow">if</span> (obj.GetHeapObjectIfWeak(&amp;heap_obj)) {</div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>      UpdateSlot&lt;HeapObjectReferenceType::WEAK&gt;(cage_base, slot, heap_obj);</div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span>      <span class="keywordflow">return</span> HeapLayout::InWritableSharedSpace(heap_obj) ? <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a></div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>                                                         : <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span>    }</div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span>  }</div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span> </div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span>  <span class="keywordflow">if</span> (obj.GetHeapObjectIfStrong(&amp;heap_obj)) {</div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span>    UpdateSlot&lt;HeapObjectReferenceType::STRONG&gt;(cage_base, slot, heap_obj);</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span>    <span class="keywordflow">return</span> HeapLayout::InWritableSharedSpace(heap_obj) ? <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a></div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span>                                                       : <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span>  }</div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span> </div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>}</div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span> </div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l04280" name="l04280"></a><span class="lineno"> 4280</span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateStrongSlot(PtrComprCageBase cage_base, TSlot slot) {</div>
<div class="line"><a id="l04281" name="l04281"></a><span class="lineno"> 4281</span>  <span class="keyword">typename</span> TSlot::TObject obj = slot.Relaxed_Load(cage_base);</div>
<div class="line"><a id="l04282" name="l04282"></a><span class="lineno"> 4282</span><span class="preprocessor">#ifdef V8_ENABLE_DIRECT_HANDLE</span></div>
<div class="line"><a id="l04283" name="l04283"></a><span class="lineno"> 4283</span>  <span class="keywordflow">if</span> (obj.ptr() == kTaggedNullAddress) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04284" name="l04284"></a><span class="lineno"> 4284</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04285" name="l04285"></a><span class="lineno"> 4285</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_define" href="common_2globals_8h.html#ad1424123c0c7ea60e89475a70021d7ca">HAS_WEAK_HEAP_OBJECT_TAG</a>(obj.ptr()));</div>
<div class="line"><a id="l04286" name="l04286"></a><span class="lineno"> 4286</span>  Tagged&lt;HeapObject&gt; heap_obj;</div>
<div class="line"><a id="l04287" name="l04287"></a><span class="lineno"> 4287</span>  <span class="keywordflow">if</span> (obj.GetHeapObject(&amp;heap_obj)) {</div>
<div class="line"><a id="l04288" name="l04288"></a><span class="lineno"> 4288</span>    UpdateSlot&lt;HeapObjectReferenceType::STRONG&gt;(cage_base, slot, heap_obj);</div>
<div class="line"><a id="l04289" name="l04289"></a><span class="lineno"> 4289</span>  }</div>
<div class="line"><a id="l04290" name="l04290"></a><span class="lineno"> 4290</span>}</div>
<div class="line"><a id="l04291" name="l04291"></a><span class="lineno"> 4291</span> </div>
<div class="line"><a id="l04292" name="l04292"></a><span class="lineno"> 4292</span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code hl_enumeration" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759">SlotCallbackResult</a> UpdateStrongOldToSharedSlot(</div>
<div class="line"><a id="l04293" name="l04293"></a><span class="lineno"> 4293</span>    PtrComprCageBase cage_base, FullMaybeObjectSlot slot) {</div>
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"> 4294</span>  Tagged&lt;MaybeObject&gt; obj = slot.Relaxed_Load(cage_base);</div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span><span class="preprocessor">#ifdef V8_ENABLE_DIRECT_HANDLE</span></div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span>  <span class="keywordflow">if</span> (obj.ptr() == kTaggedNullAddress) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_define" href="common_2globals_8h.html#ad1424123c0c7ea60e89475a70021d7ca">HAS_WEAK_HEAP_OBJECT_TAG</a>(obj.ptr()));</div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span>  Tagged&lt;HeapObject&gt; heap_obj;</div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span>  <span class="keywordflow">if</span> (obj.GetHeapObject(&amp;heap_obj)) {</div>
<div class="line"><a id="l04301" name="l04301"></a><span class="lineno"> 4301</span>    UpdateSlot&lt;HeapObjectReferenceType::STRONG&gt;(cage_base, slot, heap_obj);</div>
<div class="line"><a id="l04302" name="l04302"></a><span class="lineno"> 4302</span>    <span class="keywordflow">return</span> HeapLayout::InWritableSharedSpace(heap_obj) ? <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a></div>
<div class="line"><a id="l04303" name="l04303"></a><span class="lineno"> 4303</span>                                                       : <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l04304" name="l04304"></a><span class="lineno"> 4304</span>  }</div>
<div class="line"><a id="l04305" name="l04305"></a><span class="lineno"> 4305</span> </div>
<div class="line"><a id="l04306" name="l04306"></a><span class="lineno"> 4306</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">REMOVE_SLOT</a>;</div>
<div class="line"><a id="l04307" name="l04307"></a><span class="lineno"> 4307</span>}</div>
<div class="line"><a id="l04308" name="l04308"></a><span class="lineno"> 4308</span> </div>
<div class="line"><a id="l04309" name="l04309"></a><span class="lineno"> 4309</span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateStrongCodeSlot(Tagged&lt;HeapObject&gt; host,</div>
<div class="line"><a id="l04310" name="l04310"></a><span class="lineno"> 4310</span>                                        PtrComprCageBase cage_base,</div>
<div class="line"><a id="l04311" name="l04311"></a><span class="lineno"> 4311</span>                                        PtrComprCageBase code_cage_base,</div>
<div class="line"><a id="l04312" name="l04312"></a><span class="lineno"> 4312</span>                                        InstructionStreamSlot slot) {</div>
<div class="line"><a id="l04313" name="l04313"></a><span class="lineno"> 4313</span>  Tagged&lt;Object&gt; obj = slot.Relaxed_Load(code_cage_base);</div>
<div class="line"><a id="l04314" name="l04314"></a><span class="lineno"> 4314</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_define" href="common_2globals_8h.html#ad1424123c0c7ea60e89475a70021d7ca">HAS_WEAK_HEAP_OBJECT_TAG</a>(obj.ptr()));</div>
<div class="line"><a id="l04315" name="l04315"></a><span class="lineno"> 4315</span>  Tagged&lt;HeapObject&gt; heap_obj;</div>
<div class="line"><a id="l04316" name="l04316"></a><span class="lineno"> 4316</span>  <span class="keywordflow">if</span> (obj.GetHeapObject(&amp;heap_obj)) {</div>
<div class="line"><a id="l04317" name="l04317"></a><span class="lineno"> 4317</span>    UpdateSlot&lt;HeapObjectReferenceType::STRONG&gt;(cage_base, slot, heap_obj);</div>
<div class="line"><a id="l04318" name="l04318"></a><span class="lineno"> 4318</span> </div>
<div class="line"><a id="l04319" name="l04319"></a><span class="lineno"> 4319</span>    Tagged&lt;Code&gt; code = Cast&lt;Code&gt;(HeapObject::FromAddress(</div>
<div class="line"><a id="l04320" name="l04320"></a><span class="lineno"> 4320</span>        slot.address() - Code::kInstructionStreamOffset));</div>
<div class="line"><a id="l04321" name="l04321"></a><span class="lineno"> 4321</span>    Tagged&lt;InstructionStream&gt; instruction_stream =</div>
<div class="line"><a id="l04322" name="l04322"></a><span class="lineno"> 4322</span>        code-&gt;instruction_stream(code_cage_base);</div>
<div class="line"><a id="l04323" name="l04323"></a><span class="lineno"> 4323</span>    code-&gt;UpdateInstructionStart(GetIsolateForSandbox(host),</div>
<div class="line"><a id="l04324" name="l04324"></a><span class="lineno"> 4324</span>                                 instruction_stream);</div>
<div class="line"><a id="l04325" name="l04325"></a><span class="lineno"> 4325</span>  }</div>
<div class="line"><a id="l04326" name="l04326"></a><span class="lineno"> 4326</span>}</div>
<div class="line"><a id="l04327" name="l04327"></a><span class="lineno"> 4327</span> </div>
<div class="line"><a id="l04328" name="l04328"></a><span class="lineno"> 4328</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l04329" name="l04329"></a><span class="lineno"> 4329</span> </div>
<div class="line"><a id="l04330" name="l04330"></a><span class="lineno"> 4330</span><span class="comment">// Visitor for updating root pointers and to-space pointers.</span></div>
<div class="line"><a id="l04331" name="l04331"></a><span class="lineno"> 4331</span><span class="comment">// It does not expect to encounter pointers to dead objects.</span></div>
<div class="foldopen" id="foldopen04332" data-start="{" data-end="};">
<div class="line"><a id="l04332" name="l04332"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html"> 4332</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html">PointersUpdatingVisitor</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html">ObjectVisitorWithCageBases</a>,</div>
<div class="line"><a id="l04333" name="l04333"></a><span class="lineno"> 4333</span>                                      <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1RootVisitor.html">RootVisitor</a> {</div>
<div class="line"><a id="l04334" name="l04334"></a><span class="lineno"> 4334</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen04335" data-start="{" data-end="}">
<div class="line"><a id="l04335" name="l04335"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a84e6800ee618f900fbe6bad487fbbd28"> 4335</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a84e6800ee618f900fbe6bad487fbbd28">PointersUpdatingVisitor</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>)</div>
<div class="line"><a id="l04336" name="l04336"></a><span class="lineno"> 4336</span>      : <a class="code hl_class" href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html">ObjectVisitorWithCageBases</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {}</div>
</div>
<div class="line"><a id="l04337" name="l04337"></a><span class="lineno"> 4337</span> </div>
<div class="foldopen" id="foldopen04338" data-start="{" data-end="}">
<div class="line"><a id="l04338" name="l04338"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a4a0346342ff39c8666b3d04972702df2"> 4338</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a4a0346342ff39c8666b3d04972702df2">VisitPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> p)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04339" name="l04339"></a><span class="lineno"> 4339</span>    UpdateStrongSlotInternal(cage_base(), p);</div>
<div class="line"><a id="l04340" name="l04340"></a><span class="lineno"> 4340</span>  }</div>
</div>
<div class="line"><a id="l04341" name="l04341"></a><span class="lineno"> 4341</span> </div>
<div class="foldopen" id="foldopen04342" data-start="{" data-end="}">
<div class="line"><a id="l04342" name="l04342"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#ad63aa0973a0317be3d6deb33a976a44f"> 4342</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#ad63aa0973a0317be3d6deb33a976a44f">VisitPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> p)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"> 4343</span>    UpdateSlotInternal(cage_base(), p);</div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span>  }</div>
</div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span> </div>
<div class="foldopen" id="foldopen04346" data-start="{" data-end="}">
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#acacecfbf17f7c6cf823b7992872cbd4f"> 4346</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#acacecfbf17f7c6cf823b7992872cbd4f">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span>                     <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span>      UpdateStrongSlotInternal(cage_base(), p);</div>
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"> 4350</span>    }</div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>  }</div>
</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span> </div>
<div class="foldopen" id="foldopen04353" data-start="{" data-end="}">
<div class="line"><a id="l04353" name="l04353"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a9b8eb27114011280596923afdc49d3de"> 4353</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a9b8eb27114011280596923afdc49d3de">VisitPointers</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> host, <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l04354" name="l04354"></a><span class="lineno"> 4354</span>                     <a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>) <span class="keyword">final</span> {</div>
<div class="line"><a id="l04355" name="l04355"></a><span class="lineno"> 4355</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">MaybeObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l04356" name="l04356"></a><span class="lineno"> 4356</span>      UpdateSlotInternal(cage_base(), p);</div>
<div class="line"><a id="l04357" name="l04357"></a><span class="lineno"> 4357</span>    }</div>
<div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>  }</div>
</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span> </div>
<div class="foldopen" id="foldopen04360" data-start="{" data-end="}">
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#ac90286a87b77730cf8d8ee0cb155e149"> 4360</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#ac90286a87b77730cf8d8ee0cb155e149">VisitInstructionStreamPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Code&gt;</a> host,</div>
<div class="line"><a id="l04361" name="l04361"></a><span class="lineno"> 4361</span>                                     <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">InstructionStreamSlot</a> slot)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span>    UpdateStrongCodeSlot(host, cage_base(), code_cage_base(), slot);</div>
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"> 4363</span>  }</div>
</div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span> </div>
<div class="foldopen" id="foldopen04365" data-start="{" data-end="}">
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a12e0f73c507983e1b17ed0a714edf887"> 4365</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a12e0f73c507983e1b17ed0a714edf887">VisitRootPointer</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>                        <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> p)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!MapWord::IsPacked(p.<a class="code hl_function" href="classv8_1_1internal_1_1FullObjectSlot.html#a503f3174807124ef8c65227ffb37250d">Relaxed_Load</a>().<a class="code hl_function" href="classv8_1_1internal_1_1TaggedImpl.html#a04c1b715ba67f397a5a6607d054d9c4c">ptr</a>()));</div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>    UpdateRootSlotInternal(cage_base(), p);</div>
<div class="line"><a id="l04369" name="l04369"></a><span class="lineno"> 4369</span>  }</div>
</div>
<div class="line"><a id="l04370" name="l04370"></a><span class="lineno"> 4370</span> </div>
<div class="foldopen" id="foldopen04371" data-start="{" data-end="}">
<div class="line"><a id="l04371" name="l04371"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a77cafef335dc1d5702c51cde718f0780"> 4371</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a77cafef335dc1d5702c51cde718f0780">VisitRootPointers</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>                         <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span>      UpdateRootSlotInternal(cage_base(), p);</div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span>    }</div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span>  }</div>
</div>
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"> 4377</span> </div>
<div class="foldopen" id="foldopen04378" data-start="{" data-end="}">
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#aba289854862505f857a7fc8b7de4d779"> 4378</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#aba289854862505f857a7fc8b7de4d779">VisitRootPointers</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">Root</a> root, <span class="keyword">const</span> <span class="keywordtype">char</span>* description,</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span>                         <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">OffHeapObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>,</div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span>                         <a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">OffHeapObjectSlot</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"> 4381</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">OffHeapObjectSlot</a> p = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>; p &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++p) {</div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span>      UpdateRootSlotInternal(cage_base(), p);</div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span>    }</div>
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"> 4384</span>  }</div>
</div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span> </div>
<div class="foldopen" id="foldopen04386" data-start="{" data-end="}">
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a74df3d0eadfa92c64660d0832ae55d2f"> 4386</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a74df3d0eadfa92c64660d0832ae55d2f">VisitCodeTarget</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span>                       <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span>    <span class="comment">// This visitor nevers visits code objects.</span></div>
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"> 4389</span>    <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span>  }</div>
</div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span> </div>
<div class="foldopen" id="foldopen04392" data-start="{" data-end="}">
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a5792ea7f59db9f6e5dc51a579a458abf"> 4392</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a5792ea7f59db9f6e5dc51a579a458abf">VisitEmbeddedPointer</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;InstructionStream&gt;</a> host,</div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>                            <a class="code hl_class" href="classv8_1_1internal_1_1RelocInfo.html">RelocInfo</a>* rinfo)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span>    <span class="comment">// This visitor nevers visits code objects.</span></div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span>    <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span>  }</div>
</div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span> </div>
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"> 4398</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l04399" name="l04399"></a><span class="lineno"> 4399</span>  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateRootSlotInternal(<a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a> cage_base,</div>
<div class="line"><a id="l04400" name="l04400"></a><span class="lineno"> 4400</span>                                            <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> slot) {</div>
<div class="line"><a id="l04401" name="l04401"></a><span class="lineno"> 4401</span>    UpdateStrongSlot(cage_base, slot);</div>
<div class="line"><a id="l04402" name="l04402"></a><span class="lineno"> 4402</span>  }</div>
<div class="line"><a id="l04403" name="l04403"></a><span class="lineno"> 4403</span> </div>
<div class="line"><a id="l04404" name="l04404"></a><span class="lineno"> 4404</span>  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateRootSlotInternal(PtrComprCageBase cage_base,</div>
<div class="line"><a id="l04405" name="l04405"></a><span class="lineno"> 4405</span>                                            OffHeapObjectSlot slot) {</div>
<div class="line"><a id="l04406" name="l04406"></a><span class="lineno"> 4406</span>    UpdateStrongSlot(cage_base, slot);</div>
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"> 4407</span>  }</div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span> </div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateStrongMaybeObjectSlotInternal(</div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>      PtrComprCageBase cage_base, MaybeObjectSlot slot) {</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span>    UpdateStrongSlot(cage_base, slot);</div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span>  }</div>
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"> 4413</span> </div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateStrongSlotInternal(PtrComprCageBase cage_base,</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span>                                              ObjectSlot slot) {</div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>    UpdateStrongSlot(cage_base, slot);</div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>  }</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span> </div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span>  <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> UpdateSlotInternal(PtrComprCageBase cage_base,</div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span>                                        MaybeObjectSlot slot) {</div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span>    UpdateSlot(cage_base, slot);</div>
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"> 4422</span>  }</div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span>};</div>
</div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span> </div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span><span class="keyword">static</span> Tagged&lt;String&gt; UpdateReferenceInExternalStringTableEntry(</div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>    Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, FullObjectSlot p) {</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span>  Tagged&lt;HeapObject&gt; old_string = Cast&lt;HeapObject&gt;(*p);</div>
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"> 4428</span>  MapWord map_word = old_string-&gt;map_word(kRelaxedLoad);</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span> </div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>  <span class="keywordflow">if</span> (map_word.IsForwardingAddress()) {</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>    Tagged&lt;String&gt; new_string =</div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span>        Cast&lt;String&gt;(map_word.ToForwardingAddress(old_string));</div>
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"> 4433</span> </div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a499b0a3964a81c9abb3e89b9b9ca92f2">IsExternalString</a>(new_string)) {</div>
<div class="line"><a id="l04435" name="l04435"></a><span class="lineno"> 4435</span>      MutablePageMetadata::MoveExternalBackingStoreBytes(</div>
<div class="line"><a id="l04436" name="l04436"></a><span class="lineno"> 4436</span>          ExternalBackingStoreType::kExternalString,</div>
<div class="line"><a id="l04437" name="l04437"></a><span class="lineno"> 4437</span>          PageMetadata::FromAddress((*p).ptr()),</div>
<div class="line"><a id="l04438" name="l04438"></a><span class="lineno"> 4438</span>          PageMetadata::FromHeapObject(new_string),</div>
<div class="line"><a id="l04439" name="l04439"></a><span class="lineno"> 4439</span>          Cast&lt;ExternalString&gt;(new_string)-&gt;ExternalPayloadSize());</div>
<div class="line"><a id="l04440" name="l04440"></a><span class="lineno"> 4440</span>    }</div>
<div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span>    <span class="keywordflow">return</span> new_string;</div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span>  }</div>
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"> 4443</span> </div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span>  <span class="keywordflow">return</span> Cast&lt;String&gt;(*p);</div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>}</div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span> </div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span><span class="keywordtype">void</span> MarkCompactCollector::EvacuatePrologue() {</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>  <span class="comment">// New space.</span></div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>  <span class="keywordflow">if</span> (NewSpace* new_space = heap_-&gt;new_space()) {</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(new_space_evacuation_pages_.empty());</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>    std::copy_if(new_space-&gt;begin(), new_space-&gt;end(),</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span>                 std::back_inserter(new_space_evacuation_pages_),</div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>                 [](PageMetadata* p) { return p-&gt;live_bytes() &gt; 0; });</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms) {</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>      SemiSpaceNewSpace::From(new_space)-&gt;EvacuatePrologue();</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>    }</div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span>  }</div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span> </div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>  <span class="comment">// Large new space.</span></div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>  <span class="keywordflow">if</span> (NewLargeObjectSpace* new_lo_space = heap_-&gt;new_lo_space()) {</div>
<div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span>    new_lo_space-&gt;Flip();</div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span>    new_lo_space-&gt;ResetPendingObject();</div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span>  }</div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span> </div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>  <span class="comment">// Old space.</span></div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(old_space_evacuation_pages_.empty());</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>  old_space_evacuation_pages_ = std::move(evacuation_candidates_);</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>  evacuation_candidates_.clear();</div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(evacuation_candidates_.empty());</div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>}</div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span> </div>
<div class="line"><a id="l04472" name="l04472"></a><span class="lineno"> 4472</span><span class="keywordtype">void</span> MarkCompactCollector::EvacuateEpilogue() {</div>
<div class="line"><a id="l04473" name="l04473"></a><span class="lineno"> 4473</span>  aborted_evacuation_candidates_due_to_oom_.clear();</div>
<div class="line"><a id="l04474" name="l04474"></a><span class="lineno"> 4474</span>  aborted_evacuation_candidates_due_to_flags_.clear();</div>
<div class="line"><a id="l04475" name="l04475"></a><span class="lineno"> 4475</span> </div>
<div class="line"><a id="l04476" name="l04476"></a><span class="lineno"> 4476</span>  <span class="comment">// New space.</span></div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>  <span class="keywordflow">if</span> (heap_-&gt;new_space()) {</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, heap_-&gt;new_space()-&gt;Size());</div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span>  }</div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"> 4480</span> </div>
<div class="line"><a id="l04481" name="l04481"></a><span class="lineno"> 4481</span>  <span class="comment">// Old generation. Deallocate evacuated candidate pages.</span></div>
<div class="line"><a id="l04482" name="l04482"></a><span class="lineno"> 4482</span>  ReleaseEvacuationCandidates();</div>
<div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span> </div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span>  VerifyRememberedSetsAfterEvacuation(heap_, GarbageCollector::MARK_COMPACTOR);</div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>}</div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span> </div>
<div class="foldopen" id="foldopen04489" data-start="{" data-end="};">
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html"> 4489</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1Evacuator.html">Evacuator</a> final : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1Malloced.html">Malloced</a> {</div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen04491" data-start="{" data-end="};">
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383ef"> 4491</a></span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383ef">EvacuationMode</a> {</div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efa2fd8847afdb04aa160bc337c6e64f70e"> 4492</a></span>    <a class="code hl_enumvalue" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efa2fd8847afdb04aa160bc337c6e64f70e">kObjectsNewToOld</a>,</div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efa315982c5c79641380ac25c95ecbcd594"> 4493</a></span>    <a class="code hl_enumvalue" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efa315982c5c79641380ac25c95ecbcd594">kPageNewToOld</a>,</div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efacbcde51e3034957abd95f58cc8cd3a02"> 4494</a></span>    <a class="code hl_enumvalue" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efacbcde51e3034957abd95f58cc8cd3a02">kObjectsOldToOld</a>,</div>
<div class="line"><a id="l04495" name="l04495"></a><span class="lineno"> 4495</span>  };</div>
</div>
<div class="line"><a id="l04496" name="l04496"></a><span class="lineno"> 4496</span> </div>
<div class="foldopen" id="foldopen04497" data-start="{" data-end="}">
<div class="line"><a id="l04497" name="l04497"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#ad92e1848f1a58ebcb4958852b3a9bfbd"> 4497</a></span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_function" href="classv8_1_1internal_1_1Evacuator.html#ad92e1848f1a58ebcb4958852b3a9bfbd">EvacuationModeName</a>(<a class="code hl_enumeration" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383ef">EvacuationMode</a> mode) {</div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span>    <span class="keywordflow">switch</span> (mode) {</div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span>      <span class="keywordflow">case</span> kObjectsNewToOld:</div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;objects-new-to-old&quot;</span>;</div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>      <span class="keywordflow">case</span> kPageNewToOld:</div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;page-new-to-old&quot;</span>;</div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>      <span class="keywordflow">case</span> kObjectsOldToOld:</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;objects-old-to-old&quot;</span>;</div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>    }</div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span>  }</div>
</div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span> </div>
<div class="foldopen" id="foldopen04508" data-start="{" data-end="}">
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#a6ac2dddaa2b1b1ddb1a576575595016c"> 4508</a></span>  <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code hl_enumeration" href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383ef">EvacuationMode</a> <a class="code hl_function" href="classv8_1_1internal_1_1Evacuator.html#a6ac2dddaa2b1b1ddb1a576575595016c">ComputeEvacuationMode</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* chunk) {</div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span>    <span class="comment">// Note: The order of checks is important in this function.</span></div>
<div class="line"><a id="l04510" name="l04510"></a><span class="lineno"> 4510</span>    <span class="keywordflow">if</span> (chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(MemoryChunk::PAGE_NEW_OLD_PROMOTION))</div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span>      <span class="keywordflow">return</span> kPageNewToOld;</div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span>    <span class="keywordflow">if</span> (chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a9c3f0b021e3e63a2da11fa4bb4ab1cff">InYoungGeneration</a>()) <span class="keywordflow">return</span> kObjectsNewToOld;</div>
<div class="line"><a id="l04513" name="l04513"></a><span class="lineno"> 4513</span>    <span class="keywordflow">return</span> kObjectsOldToOld;</div>
<div class="line"><a id="l04514" name="l04514"></a><span class="lineno"> 4514</span>  }</div>
</div>
<div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span> </div>
<div class="foldopen" id="foldopen04516" data-start="{" data-end="}">
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#a55485870c03a2aa636ec73c893c3cb85"> 4516</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1Evacuator.html#a55485870c03a2aa636ec73c893c3cb85">Evacuator</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>)</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>      : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>),</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span>        local_pretenuring_feedback_(</div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span>            <a class="code hl_class" href="classv8_1_1internal_1_1PretenuringHandler.html">PretenuringHandler</a>::kInitialFeedbackCapacity),</div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span>        local_allocator_(heap_,</div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span>                         <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a5ae38dc7ddb420b6d0f8cd6b3ede93c0">CompactionSpaceKind</a>::<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a5ae38dc7ddb420b6d0f8cd6b3ede93c0ad1c03161d710554d14dab31167da863d">kCompactionSpaceForMarkCompact</a>),</div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span>        record_visitor_(heap_),</div>
<div class="line"><a id="l04523" name="l04523"></a><span class="lineno"> 4523</span>        new_space_visitor_(heap_, &amp;local_allocator_, &amp;record_visitor_,</div>
<div class="line"><a id="l04524" name="l04524"></a><span class="lineno"> 4524</span>                           &amp;local_pretenuring_feedback_),</div>
<div class="line"><a id="l04525" name="l04525"></a><span class="lineno"> 4525</span>        new_to_old_page_visitor_(heap_, &amp;record_visitor_,</div>
<div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>                                 &amp;local_pretenuring_feedback_),</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span> </div>
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"> 4528</span>        old_space_visitor_(heap_, &amp;local_allocator_, &amp;record_visitor_),</div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span>        duration_(0.0),</div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span>        bytes_compacted_(0) {}</div>
</div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span> </div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span>  <span class="keywordtype">void</span> EvacuatePage(<a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* chunk);</div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span> </div>
<div class="foldopen" id="foldopen04534" data-start="{" data-end="}">
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#aff74cdcc3d9b14d81a3a023f13e403f1"> 4534</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1Evacuator.html#aff74cdcc3d9b14d81a3a023f13e403f1">AddObserver</a>(<a class="code hl_class" href="classv8_1_1internal_1_1MigrationObserver.html">MigrationObserver</a>* observer) {</div>
<div class="line"><a id="l04535" name="l04535"></a><span class="lineno"> 4535</span>    new_space_visitor_.AddObserver(observer);</div>
<div class="line"><a id="l04536" name="l04536"></a><span class="lineno"> 4536</span>    old_space_visitor_.AddObserver(observer);</div>
<div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>  }</div>
</div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span> </div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>  <span class="comment">// Merge back locally cached info sequentially. Note that this method needs</span></div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span>  <span class="comment">// to be called from the main thread.</span></div>
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"> 4541</span>  <span class="keywordtype">void</span> Finalize();</div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span> </div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span>  <span class="comment">// |saved_live_bytes| returns the live bytes of the page that was processed.</span></div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>  <span class="keywordtype">bool</span> RawEvacuatePage(<a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* chunk);</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span> </div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>  <span class="keyword">inline</span> <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>() { <span class="keywordflow">return</span> heap_; }</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span> </div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>  <span class="keywordtype">void</span> ReportCompactionProgress(<span class="keywordtype">double</span> duration, intptr_t bytes_compacted) {</div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span>    duration_ += duration;</div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>    bytes_compacted_ += bytes_compacted;</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>  }</div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span> </div>
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"> 4554</span>  Heap* heap_;</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span> </div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>  PretenuringHandler::PretenuringFeedbackMap local_pretenuring_feedback_;</div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span> </div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>  <span class="comment">// Locally cached collector data.</span></div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span>  EvacuationAllocator local_allocator_;</div>
<div class="line"><a id="l04560" name="l04560"></a><span class="lineno"> 4560</span> </div>
<div class="line"><a id="l04561" name="l04561"></a><span class="lineno"> 4561</span>  RecordMigratedSlotVisitor record_visitor_;</div>
<div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span> </div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>  <span class="comment">// Visitors for the corresponding spaces.</span></div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>  EvacuateNewSpaceVisitor new_space_visitor_;</div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span>  EvacuateNewToOldSpacePageVisitor new_to_old_page_visitor_;</div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span>  EvacuateOldSpaceVisitor old_space_visitor_;</div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span> </div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span>  <span class="comment">// Book keeping info.</span></div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span>  <span class="keywordtype">double</span> duration_;</div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>  intptr_t bytes_compacted_;</div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>};</div>
</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span> </div>
<div class="foldopen" id="foldopen04573" data-start="{" data-end="}">
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#ad509768172b792b199449fb4f3c26b32"> 4573</a></span><span class="keywordtype">void</span> Evacuator::EvacuatePage(<a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>) {</div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>), <span class="stringliteral">&quot;Evacuator::EvacuatePage&quot;</span>);</div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;SweepingDone());</div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>  intptr_t saved_live_bytes = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;live_bytes();</div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span>  <span class="keywordtype">double</span> evacuation_time = 0.0;</div>
<div class="line"><a id="l04578" name="l04578"></a><span class="lineno"> 4578</span>  <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04579" name="l04579"></a><span class="lineno"> 4579</span>  {</div>
<div class="line"><a id="l04580" name="l04580"></a><span class="lineno"> 4580</span>    <a class="code hl_class" href="classv8_1_1internal_1_1TimedScope.html">TimedScope</a> timed_scope(&amp;evacuation_time);</div>
<div class="line"><a id="l04581" name="l04581"></a><span class="lineno"> 4581</span>    success = RawEvacuatePage(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>  }</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span>  ReportCompactionProgress(evacuation_time, saved_live_bytes);</div>
<div class="line"><a id="l04584" name="l04584"></a><span class="lineno"> 4584</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_evacuation) {</div>
<div class="line"><a id="l04585" name="l04585"></a><span class="lineno"> 4585</span>    <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* chunk = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk();</div>
<div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(heap_-&gt;isolate(),</div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>                 <span class="stringliteral">&quot;evacuation[%p]: page=%p new_space=%d &quot;</span></div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>                 <span class="stringliteral">&quot;page_evacuation=%d executable=%d can_promote=%d &quot;</span></div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span>                 <span class="stringliteral">&quot;live_bytes=%&quot;</span> <a class="code hl_define" href="macros_8h.html#a5647046a5349ec401aa3ae0c65a1b755">V8PRIdPTR</a> <span class="stringliteral">&quot; time=%f success=%d\n&quot;</span>,</div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span>                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>), <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>),</div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span>                 chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#afaf7fe0fa08ae9f3b0c0d2e16b41b0a8">InNewSpace</a>(),</div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>                 chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(MemoryChunk::PAGE_NEW_OLD_PROMOTION),</div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span>                 chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">IsFlagSet</a>(MemoryChunk::IS_EXECUTABLE),</div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>                 heap_-&gt;new_space()-&gt;IsPromotionCandidate(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>),</div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>                 saved_live_bytes, evacuation_time, success);</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>  }</div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>}</div>
</div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span> </div>
<div class="foldopen" id="foldopen04599" data-start="{" data-end="}">
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1Evacuator.html#ac796527afb0f320c5fcdbabb255f741b"> 4599</a></span><span class="keywordtype">void</span> Evacuator::Finalize() {</div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>  local_allocator_.Finalize();</div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span>  heap_-&gt;tracer()-&gt;AddCompactionEvent(duration_, bytes_compacted_);</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>  heap_-&gt;IncrementPromotedObjectsSize(new_space_visitor_.promoted_size() +</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>                                      new_to_old_page_visitor_.moved_bytes());</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>  heap_-&gt;IncrementNewSpaceSurvivingObjectSize(</div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>      new_space_visitor_.semispace_copied_size());</div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>  heap_-&gt;IncrementYoungSurvivorsCounter(</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span>      new_space_visitor_.promoted_size() +</div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span>      new_space_visitor_.semispace_copied_size() +</div>
<div class="line"><a id="l04609" name="l04609"></a><span class="lineno"> 4609</span>      new_to_old_page_visitor_.moved_bytes());</div>
<div class="line"><a id="l04610" name="l04610"></a><span class="lineno"> 4610</span>  heap_-&gt;pretenuring_handler()-&gt;MergeAllocationSitePretenuringFeedback(</div>
<div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>      local_pretenuring_feedback_);</div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>}</div>
</div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span> </div>
<div class="foldopen" id="foldopen04614" data-start="{" data-end="};">
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1LiveObjectVisitor.html"> 4614</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1LiveObjectVisitor.html">LiveObjectVisitor</a> final : <a class="code hl_class" href="classv8_1_1internal_1_1AllStatic.html">AllStatic</a> {</div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>  <span class="comment">// Visits marked objects using `bool Visitor::Visit(HeapObject object, size_t</span></div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>  <span class="comment">// size)` as long as the return value is true.</span></div>
<div class="line"><a id="l04618" name="l04618"></a><span class="lineno"> 4618</span>  <span class="comment">//</span></div>
<div class="line"><a id="l04619" name="l04619"></a><span class="lineno"> 4619</span>  <span class="comment">// Returns whether all objects were successfully visited. Upon returning</span></div>
<div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span>  <span class="comment">// false, also sets `failed_object` to the object for which the visitor</span></div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span>  <span class="comment">// returned false.</span></div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Visitor&gt;</div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> VisitMarkedObjects(<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, Visitor* visitor,</div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span>                                 <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a>* failed_object);</div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span> </div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>  <span class="comment">// Visits marked objects using `bool Visitor::Visit(HeapObject object, size_t</span></div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>  <span class="comment">// size)` as long as the return value is true. Assumes that the return value</span></div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span>  <span class="comment">// is always true (success).</span></div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Visitor&gt;</div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> VisitMarkedObjectsNoFail(<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, Visitor* visitor);</div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span>};</div>
</div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span> </div>
<div class="line"><a id="l04633" name="l04633"></a><span class="lineno"> 4633</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> Visitor&gt;</div>
<div class="foldopen" id="foldopen04634" data-start="{" data-end="}">
<div class="line"><a id="l04634" name="l04634"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1LiveObjectVisitor.html#af33fd16cb03289321bf3dfc2544081f5"> 4634</a></span><span class="keywordtype">bool</span> LiveObjectVisitor::VisitMarkedObjects(<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, Visitor* visitor,</div>
<div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>                                           <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a>* failed_object) {</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>),</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span>               <span class="stringliteral">&quot;LiveObjectVisitor::VisitMarkedObjects&quot;</span>);</div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> [<span class="keywordtype">object</span>, size] : <a class="code hl_class" href="classv8_1_1internal_1_1LiveObjectRange.html">LiveObjectRange</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>)) {</div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>    <span class="keywordflow">if</span> (!visitor-&gt;Visit(<span class="keywordtype">object</span>, size)) {</div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span>      *failed_object = object;</div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"> 4642</span>    }</div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>  }</div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span>}</div>
</div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span> </div>
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"> 4647</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> Visitor&gt;</div>
<div class="foldopen" id="foldopen04648" data-start="{" data-end="}">
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1LiveObjectVisitor.html#a30652cf8fa7b9291465658208a3ab588"> 4648</a></span><span class="keywordtype">void</span> LiveObjectVisitor::VisitMarkedObjectsNoFail(<a class="code hl_class" href="classv8_1_1internal_1_1PageMetadata.html">PageMetadata</a>* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>,</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span>                                                 Visitor* visitor) {</div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>),</div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span>               <span class="stringliteral">&quot;LiveObjectVisitor::VisitMarkedObjectsNoFail&quot;</span>);</div>
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"> 4652</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> [<span class="keywordtype">object</span>, size] : <a class="code hl_class" href="classv8_1_1internal_1_1LiveObjectRange.html">LiveObjectRange</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>)) {</div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> success = visitor-&gt;Visit(<span class="keywordtype">object</span>, size);</div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span>    <a class="code hl_define" href="macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(success);</div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(success);</div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span>  }</div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span>}</div>
</div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span> </div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span><span class="keywordtype">bool</span> Evacuator::RawEvacuatePage(<a class="code hl_class" href="classv8_1_1internal_1_1MutablePageMetadata.html">MutablePageMetadata</a>* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>) {</div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MemoryChunk.html">MemoryChunk</a>* chunk = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk();</div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span>  <span class="keyword">const</span> EvacuationMode evacuation_mode = ComputeEvacuationMode(chunk);</div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a58927f99d797f77024561f336303380c">TRACE_EVENT2</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>),</div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span>               <span class="stringliteral">&quot;FullEvacuator::RawEvacuatePage&quot;</span>, <span class="stringliteral">&quot;evacuation_mode&quot;</span>,</div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span>               EvacuationModeName(evacuation_mode), <span class="stringliteral">&quot;live_bytes&quot;</span>,</div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>               <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;live_bytes());</div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span>  <span class="keywordflow">switch</span> (evacuation_mode) {</div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span>    <span class="keywordflow">case</span> kObjectsNewToOld:</div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span>      new_space_visitor_.DisableAbortEvacuationAtAddress(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span>      LiveObjectVisitor::VisitMarkedObjectsNoFail(PageMetadata::cast(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>),</div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>                                                  &amp;new_space_visitor_);</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>      <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;ClearLiveness();</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>    <span class="keywordflow">case</span> kPageNewToOld:</div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span>      <span class="keywordflow">if</span> (chunk-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1MemoryChunk.html#af9fbfead34700f0653b0dfe65bf5d473">IsLargePage</a>()) {</div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span>        <span class="keyword">auto</span> <span class="keywordtype">object</span> = LargePageMetadata::cast(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>)-&gt;GetObject();</div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span>        <span class="keywordtype">bool</span> success = new_to_old_page_visitor_.Visit(<span class="keywordtype">object</span>, object-&gt;Size());</div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span>        <a class="code hl_define" href="macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(success);</div>
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"> 4680</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(success);</div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>        LiveObjectVisitor::VisitMarkedObjectsNoFail(PageMetadata::cast(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>),</div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span>                                                    &amp;new_to_old_page_visitor_);</div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span>      }</div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span>      new_to_old_page_visitor_.account_moved_bytes(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;live_bytes());</div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span>    <span class="keywordflow">case</span> kObjectsOldToOld: {</div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>      old_space_visitor_.SetUpAbortEvacuationAtAddress(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span>      Tagged&lt;HeapObject&gt; failed_object;</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span>      <span class="keywordflow">if</span> (LiveObjectVisitor::VisitMarkedObjects(</div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>              PageMetadata::cast(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>), &amp;old_space_visitor_, &amp;failed_object)) {</div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span>        <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;ClearLiveness();</div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>        <span class="comment">// Aborted compaction page. Actual processing happens on the main</span></div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span>        <span class="comment">// thread for simplicity reasons.</span></div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span>        heap_-&gt;mark_compact_collector()</div>
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"> 4699</span>            -&gt;ReportAbortedEvacuationCandidateDueToOOM(</div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span>                failed_object.address(), <span class="keyword">static_cast&lt;</span>PageMetadata*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>));</div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span>      }</div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span>    }</div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>  }</div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span> </div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>}</div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span> </div>
<div class="foldopen" id="foldopen04710" data-start="{" data-end="};">
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PageEvacuationJob.html"> 4710</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1PageEvacuationJob.html">PageEvacuationJob</a> : <span class="keyword">public</span> v8::JobTask {</div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen04712" data-start="{" data-end="}">
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PageEvacuationJob.html#a0a413e268f03e4640ecb8d4eb35732bc"> 4712</a></span>  <a class="code hl_function" href="classv8_1_1internal_1_1PageEvacuationJob.html#a0a413e268f03e4640ecb8d4eb35732bc">PageEvacuationJob</a>(</div>
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"> 4713</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector,</div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>      std::vector&lt;std::unique_ptr&lt;Evacuator&gt;&gt;* evacuators,</div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>      std::vector&lt;std::pair&lt;ParallelWorkItem, MutablePageMetadata*&gt;&gt;</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span>          evacuation_items)</div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span>      : collector_(collector),</div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span>        evacuators_(evacuators),</div>
<div class="line"><a id="l04719" name="l04719"></a><span class="lineno"> 4719</span>        evacuation_items_(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(evacuation_items)),</div>
<div class="line"><a id="l04720" name="l04720"></a><span class="lineno"> 4720</span>        remaining_evacuation_items_(evacuation_items_.size()),</div>
<div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span>        generator_(evacuation_items_.size()),</div>
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"> 4722</span>        tracer_(isolate-&gt;<a class="code hl_namespace" href="namespaceheap.html">heap</a>()-&gt;tracer()),</div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span>        trace_id_(reinterpret_cast&lt;uint64_t&gt;(this) ^</div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span>                  tracer_-&gt;CurrentEpoch(<a class="code hl_class" href="classv8_1_1internal_1_1GCTracer.html">GCTracer</a>::<a class="code hl_class" href="classv8_1_1internal_1_1Scope.html">Scope</a>::MC_EVACUATE)) {}</div>
</div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span> </div>
<div class="foldopen" id="foldopen04726" data-start="{" data-end="}">
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PageEvacuationJob.html#ab708e50f29b82e26827fe0da974196e7"> 4726</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PageEvacuationJob.html#ab708e50f29b82e26827fe0da974196e7">Run</a>(JobDelegate* delegate)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span>    <span class="comment">// In case multi-cage pointer compression mode is enabled ensure that</span></div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>    <span class="comment">// current thread&#39;s cage base values are properly initialized.</span></div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>    <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageAccessScope.html">PtrComprCageAccessScope</a> ptr_compr_cage_access_scope(</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span>        collector_-&gt;heap()-&gt;isolate());</div>
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"> 4731</span> </div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Evacuator.html">Evacuator</a>* evacuator = (*evacuators_)[delegate-&gt;GetTaskId()].get();</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span>    <span class="keywordflow">if</span> (delegate-&gt;IsJoiningThread()) {</div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>      <a class="code hl_define" href="gc-tracer_8h.html#a4b6fc205b8b8bbe4275672c2a66c5b94">TRACE_GC_WITH_FLOW</a>(tracer_, GCTracer::Scope::MC_EVACUATE_COPY_PARALLEL,</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span>                         trace_id_, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"> 4736</span>      ProcessItems(delegate, evacuator);</div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span>      <a class="code hl_define" href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a>(</div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>          tracer_, GCTracer::Scope::MC_BACKGROUND_EVACUATE_COPY,</div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span>          ThreadKind::kBackground, trace_id_, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>      ProcessItems(delegate, evacuator);</div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>    }</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span>  }</div>
</div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span> </div>
<div class="foldopen" id="foldopen04745" data-start="{" data-end="}">
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PageEvacuationJob.html#a80267f74c0711aa95b67ee3013612073"> 4745</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PageEvacuationJob.html#a80267f74c0711aa95b67ee3013612073">ProcessItems</a>(JobDelegate* delegate, <a class="code hl_class" href="classv8_1_1internal_1_1Evacuator.html">Evacuator</a>* evacuator) {</div>
<div class="line"><a id="l04746" name="l04746"></a><span class="lineno"> 4746</span>    <span class="keywordflow">while</span> (remaining_evacuation_items_.load(std::memory_order_relaxed) &gt; 0) {</div>
<div class="line"><a id="l04747" name="l04747"></a><span class="lineno"> 4747</span>      std::optional&lt;size_t&gt; <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = generator_.GetNext();</div>
<div class="line"><a id="l04748" name="l04748"></a><span class="lineno"> 4748</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = *<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; evacuation_items_.<a class="code hl_class" href="classsize.html">size</a>(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span>        <span class="keyword">auto</span>&amp; work_item = evacuation_items_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>        <span class="keywordflow">if</span> (!work_item.first.TryAcquire()) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span>        evacuator-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Evacuator.html#ad509768172b792b199449fb4f3c26b32">EvacuatePage</a>(work_item.second);</div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>        <span class="keywordflow">if</span> (remaining_evacuation_items_.fetch_sub(</div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>                1, std::memory_order_relaxed) &lt;= 1) {</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>        }</div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>      }</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>    }</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span>  }</div>
</div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span> </div>
<div class="foldopen" id="foldopen04761" data-start="{" data-end="}">
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PageEvacuationJob.html#a5a339abfedcef84952b058b058769ecc"> 4761</a></span>  <span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1PageEvacuationJob.html#a5a339abfedcef84952b058b058769ecc">GetMaxConcurrency</a>(<span class="keywordtype">size_t</span> worker_count)<span class="keyword"> const override </span>{</div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> kItemsPerWorker = std::max(1, MB / PageMetadata::kPageSize);</div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>    <span class="comment">// Ceiling division to ensure enough workers for all</span></div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>    <span class="comment">// |remaining_evacuation_items_|</span></div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span>    <span class="keywordtype">size_t</span> wanted_num_workers =</div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>        (remaining_evacuation_items_.load(std::memory_order_relaxed) +</div>
<div class="line"><a id="l04767" name="l04767"></a><span class="lineno"> 4767</span>         kItemsPerWorker - 1) /</div>
<div class="line"><a id="l04768" name="l04768"></a><span class="lineno"> 4768</span>        kItemsPerWorker;</div>
<div class="line"><a id="l04769" name="l04769"></a><span class="lineno"> 4769</span>    wanted_num_workers =</div>
<div class="line"><a id="l04770" name="l04770"></a><span class="lineno"> 4770</span>        std::min&lt;size_t&gt;(wanted_num_workers, evacuators_-&gt;size());</div>
<div class="line"><a id="l04771" name="l04771"></a><span class="lineno"> 4771</span>    <span class="keywordflow">if</span> (!collector_-&gt;UseBackgroundThreadsInCycle()) {</div>
<div class="line"><a id="l04772" name="l04772"></a><span class="lineno"> 4772</span>      <span class="keywordflow">return</span> std::min&lt;size_t&gt;(wanted_num_workers, 1);</div>
<div class="line"><a id="l04773" name="l04773"></a><span class="lineno"> 4773</span>    }</div>
<div class="line"><a id="l04774" name="l04774"></a><span class="lineno"> 4774</span>    <span class="keywordflow">return</span> wanted_num_workers;</div>
<div class="line"><a id="l04775" name="l04775"></a><span class="lineno"> 4775</span>  }</div>
</div>
<div class="line"><a id="l04776" name="l04776"></a><span class="lineno"> 4776</span> </div>
<div class="line"><a id="l04777" name="l04777"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PageEvacuationJob.html#ac21b3f891aa6c7d3af83aea5b6046194"> 4777</a></span>  uint64_t <a class="code hl_function" href="classv8_1_1internal_1_1PageEvacuationJob.html#ac21b3f891aa6c7d3af83aea5b6046194">trace_id</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> trace_id_; }</div>
<div class="line"><a id="l04778" name="l04778"></a><span class="lineno"> 4778</span> </div>
<div class="line"><a id="l04779" name="l04779"></a><span class="lineno"> 4779</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l04780" name="l04780"></a><span class="lineno"> 4780</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector_;</div>
<div class="line"><a id="l04781" name="l04781"></a><span class="lineno"> 4781</span>  std::vector&lt;std::unique_ptr&lt;Evacuator&gt;&gt;* evacuators_;</div>
<div class="line"><a id="l04782" name="l04782"></a><span class="lineno"> 4782</span>  std::vector&lt;std::pair&lt;ParallelWorkItem, MutablePageMetadata*&gt;&gt;</div>
<div class="line"><a id="l04783" name="l04783"></a><span class="lineno"> 4783</span>      evacuation_items_;</div>
<div class="line"><a id="l04784" name="l04784"></a><span class="lineno"> 4784</span>  std::atomic&lt;size_t&gt; remaining_evacuation_items_{0};</div>
<div class="line"><a id="l04785" name="l04785"></a><span class="lineno"> 4785</span>  IndexGenerator generator_;</div>
<div class="line"><a id="l04786" name="l04786"></a><span class="lineno"> 4786</span> </div>
<div class="line"><a id="l04787" name="l04787"></a><span class="lineno"> 4787</span>  GCTracer* tracer_;</div>
<div class="line"><a id="l04788" name="l04788"></a><span class="lineno"> 4788</span>  <span class="keyword">const</span> uint64_t trace_id_;</div>
<div class="line"><a id="l04789" name="l04789"></a><span class="lineno"> 4789</span>};</div>
</div>
<div class="line"><a id="l04790" name="l04790"></a><span class="lineno"> 4790</span> </div>
<div class="line"><a id="l04791" name="l04791"></a><span class="lineno"> 4791</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l04792" name="l04792"></a><span class="lineno"> 4792</span><span class="keywordtype">size_t</span> CreateAndExecuteEvacuationTasks(</div>
<div class="line"><a id="l04793" name="l04793"></a><span class="lineno"> 4793</span>    Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, MarkCompactCollector* collector,</div>
<div class="line"><a id="l04794" name="l04794"></a><span class="lineno"> 4794</span>    std::vector&lt;std::pair&lt;ParallelWorkItem, MutablePageMetadata*&gt;&gt;</div>
<div class="line"><a id="l04795" name="l04795"></a><span class="lineno"> 4795</span>        evacuation_items) {</div>
<div class="line"><a id="l04796" name="l04796"></a><span class="lineno"> 4796</span>  std::optional&lt;ProfilingMigrationObserver&gt; profiling_observer;</div>
<div class="line"><a id="l04797" name="l04797"></a><span class="lineno"> 4797</span>  <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate()-&gt;log_object_relocation()) {</div>
<div class="line"><a id="l04798" name="l04798"></a><span class="lineno"> 4798</span>    profiling_observer.emplace(<a class="code hl_namespace" href="namespaceheap.html">heap</a>);</div>
<div class="line"><a id="l04799" name="l04799"></a><span class="lineno"> 4799</span>  }</div>
<div class="line"><a id="l04800" name="l04800"></a><span class="lineno"> 4800</span>  std::vector&lt;std::unique_ptr&lt;v8::internal::Evacuator&gt;&gt; evacuators;</div>
<div class="line"><a id="l04801" name="l04801"></a><span class="lineno"> 4801</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> wanted_num_tasks = NumberOfParallelCompactionTasks(<a class="code hl_namespace" href="namespaceheap.html">heap</a>);</div>
<div class="line"><a id="l04802" name="l04802"></a><span class="lineno"> 4802</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; wanted_num_tasks; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l04803" name="l04803"></a><span class="lineno"> 4803</span>    <span class="keyword">auto</span> evacuator = std::make_unique&lt;Evacuator&gt;(<a class="code hl_namespace" href="namespaceheap.html">heap</a>);</div>
<div class="line"><a id="l04804" name="l04804"></a><span class="lineno"> 4804</span>    <span class="keywordflow">if</span> (profiling_observer) {</div>
<div class="line"><a id="l04805" name="l04805"></a><span class="lineno"> 4805</span>      evacuator-&gt;AddObserver(&amp;profiling_observer.value());</div>
<div class="line"><a id="l04806" name="l04806"></a><span class="lineno"> 4806</span>    }</div>
<div class="line"><a id="l04807" name="l04807"></a><span class="lineno"> 4807</span>    evacuators.push_back(std::move(evacuator));</div>
<div class="line"><a id="l04808" name="l04808"></a><span class="lineno"> 4808</span>  }</div>
<div class="line"><a id="l04809" name="l04809"></a><span class="lineno"> 4809</span>  <span class="keyword">auto</span> page_evacuation_job = std::make_unique&lt;PageEvacuationJob&gt;(</div>
<div class="line"><a id="l04810" name="l04810"></a><span class="lineno"> 4810</span>      <a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate(), collector, &amp;evacuators, std::move(evacuation_items));</div>
<div class="line"><a id="l04811" name="l04811"></a><span class="lineno"> 4811</span>  <a class="code hl_define" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;PageEvacuationJob started&quot;</span>,</div>
<div class="line"><a id="l04812" name="l04812"></a><span class="lineno"> 4812</span>                          page_evacuation_job-&gt;trace_id(),</div>
<div class="line"><a id="l04813" name="l04813"></a><span class="lineno"> 4813</span>                          <a class="code hl_define" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a id="l04814" name="l04814"></a><span class="lineno"> 4814</span>  V8::GetCurrentPlatform()</div>
<div class="line"><a id="l04815" name="l04815"></a><span class="lineno"> 4815</span>      -&gt;CreateJob(v8::TaskPriority::kUserBlocking,</div>
<div class="line"><a id="l04816" name="l04816"></a><span class="lineno"> 4816</span>                  std::move(page_evacuation_job))</div>
<div class="line"><a id="l04817" name="l04817"></a><span class="lineno"> 4817</span>      -&gt;Join();</div>
<div class="line"><a id="l04818" name="l04818"></a><span class="lineno"> 4818</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; evacuator : evacuators) {</div>
<div class="line"><a id="l04819" name="l04819"></a><span class="lineno"> 4819</span>    evacuator-&gt;Finalize();</div>
<div class="line"><a id="l04820" name="l04820"></a><span class="lineno"> 4820</span>  }</div>
<div class="line"><a id="l04821" name="l04821"></a><span class="lineno"> 4821</span>  <span class="keywordflow">return</span> wanted_num_tasks;</div>
<div class="line"><a id="l04822" name="l04822"></a><span class="lineno"> 4822</span>}</div>
<div class="line"><a id="l04823" name="l04823"></a><span class="lineno"> 4823</span> </div>
<div class="line"><a id="l04824" name="l04824"></a><span class="lineno"> 4824</span><span class="keyword">enum class</span> MemoryReductionMode { <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a6762e3845e3e870981025a55d605f1dea94a9c1aa93ea09cd7898dddd588022e6">kNone</a>, kShouldReduceMemory };</div>
<div class="line"><a id="l04825" name="l04825"></a><span class="lineno"> 4825</span> </div>
<div class="line"><a id="l04826" name="l04826"></a><span class="lineno"> 4826</span><span class="comment">// NewSpacePages with more live bytes than this threshold qualify for fast</span></div>
<div class="line"><a id="l04827" name="l04827"></a><span class="lineno"> 4827</span><span class="comment">// evacuation.</span></div>
<div class="line"><a id="l04828" name="l04828"></a><span class="lineno"> 4828</span>intptr_t NewSpacePageEvacuationThreshold() {</div>
<div class="line"><a id="l04829" name="l04829"></a><span class="lineno"> 4829</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.page_promotion_threshold *</div>
<div class="line"><a id="l04830" name="l04830"></a><span class="lineno"> 4830</span>         MemoryChunkLayout::AllocatableMemoryInDataPage() / 100;</div>
<div class="line"><a id="l04831" name="l04831"></a><span class="lineno"> 4831</span>}</div>
<div class="line"><a id="l04832" name="l04832"></a><span class="lineno"> 4832</span> </div>
<div class="line"><a id="l04833" name="l04833"></a><span class="lineno"> 4833</span><span class="keywordtype">bool</span> ShouldMovePage(PageMetadata* p, intptr_t live_bytes,</div>
<div class="line"><a id="l04834" name="l04834"></a><span class="lineno"> 4834</span>                    MemoryReductionMode memory_reduction_mode) {</div>
<div class="line"><a id="l04835" name="l04835"></a><span class="lineno"> 4835</span>  Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a> = p-&gt;heap();</div>
<div class="line"><a id="l04836" name="l04836"></a><span class="lineno"> 4836</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!p-&gt;Chunk()-&gt;NeverEvacuate());</div>
<div class="line"><a id="l04837" name="l04837"></a><span class="lineno"> 4837</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> should_move_page =</div>
<div class="line"><a id="l04838" name="l04838"></a><span class="lineno"> 4838</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.page_promotion &amp;&amp;</div>
<div class="line"><a id="l04839" name="l04839"></a><span class="lineno"> 4839</span>      (memory_reduction_mode == MemoryReductionMode::kNone) &amp;&amp;</div>
<div class="line"><a id="l04840" name="l04840"></a><span class="lineno"> 4840</span>      (live_bytes &gt; NewSpacePageEvacuationThreshold()) &amp;&amp;</div>
<div class="line"><a id="l04841" name="l04841"></a><span class="lineno"> 4841</span>      <a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;CanExpandOldGeneration(live_bytes);</div>
<div class="line"><a id="l04842" name="l04842"></a><span class="lineno"> 4842</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_page_promotions) {</div>
<div class="line"><a id="l04843" name="l04843"></a><span class="lineno"> 4843</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate(),</div>
<div class="line"><a id="l04844" name="l04844"></a><span class="lineno"> 4844</span>                 <span class="stringliteral">&quot;[Page Promotion] %p: collector=mc, should move: %d&quot;</span></div>
<div class="line"><a id="l04845" name="l04845"></a><span class="lineno"> 4845</span>                 <span class="stringliteral">&quot;, live bytes = %zu, promotion threshold = %zu&quot;</span></div>
<div class="line"><a id="l04846" name="l04846"></a><span class="lineno"> 4846</span>                 <span class="stringliteral">&quot;, allocated labs size = %zu\n&quot;</span>,</div>
<div class="line"><a id="l04847" name="l04847"></a><span class="lineno"> 4847</span>                 p, should_move_page, live_bytes,</div>
<div class="line"><a id="l04848" name="l04848"></a><span class="lineno"> 4848</span>                 NewSpacePageEvacuationThreshold(), p-&gt;AllocatedLabSize());</div>
<div class="line"><a id="l04849" name="l04849"></a><span class="lineno"> 4849</span>  }</div>
<div class="line"><a id="l04850" name="l04850"></a><span class="lineno"> 4850</span>  <span class="keywordflow">return</span> should_move_page;</div>
<div class="line"><a id="l04851" name="l04851"></a><span class="lineno"> 4851</span>}</div>
<div class="line"><a id="l04852" name="l04852"></a><span class="lineno"> 4852</span> </div>
<div class="line"><a id="l04853" name="l04853"></a><span class="lineno"> 4853</span><span class="keywordtype">void</span> TraceEvacuation(Isolate* isolate, <span class="keywordtype">size_t</span> pages_count,</div>
<div class="line"><a id="l04854" name="l04854"></a><span class="lineno"> 4854</span>                     <span class="keywordtype">size_t</span> wanted_num_tasks, <span class="keywordtype">size_t</span> live_bytes,</div>
<div class="line"><a id="l04855" name="l04855"></a><span class="lineno"> 4855</span>                     <span class="keywordtype">size_t</span> aborted_pages) {</div>
<div class="line"><a id="l04856" name="l04856"></a><span class="lineno"> 4856</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_evacuation);</div>
<div class="line"><a id="l04857" name="l04857"></a><span class="lineno"> 4857</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(isolate,</div>
<div class="line"><a id="l04858" name="l04858"></a><span class="lineno"> 4858</span>               <span class="stringliteral">&quot;%8.0f ms: evacuation-summary: parallel=%s pages=%zu &quot;</span></div>
<div class="line"><a id="l04859" name="l04859"></a><span class="lineno"> 4859</span>               <span class="stringliteral">&quot;wanted_tasks=%zu cores=%d live_bytes=%&quot;</span> <a class="code hl_define" href="macros_8h.html#a5647046a5349ec401aa3ae0c65a1b755">V8PRIdPTR</a></div>
<div class="line"><a id="l04860" name="l04860"></a><span class="lineno"> 4860</span>               <span class="stringliteral">&quot; compaction_speed=%.f aborted=%zu\n&quot;</span>,</div>
<div class="line"><a id="l04861" name="l04861"></a><span class="lineno"> 4861</span>               isolate-&gt;time_millis_since_init(),</div>
<div class="line"><a id="l04862" name="l04862"></a><span class="lineno"> 4862</span>               <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_compaction ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>, pages_count,</div>
<div class="line"><a id="l04863" name="l04863"></a><span class="lineno"> 4863</span>               wanted_num_tasks,</div>
<div class="line"><a id="l04864" name="l04864"></a><span class="lineno"> 4864</span>               V8::GetCurrentPlatform()-&gt;NumberOfWorkerThreads() + 1,</div>
<div class="line"><a id="l04865" name="l04865"></a><span class="lineno"> 4865</span>               live_bytes,</div>
<div class="line"><a id="l04866" name="l04866"></a><span class="lineno"> 4866</span>               isolate-&gt;<a class="code hl_function" href="structv8_1_1internal_1_1FlagValues.html#ae882666c801b38f319fe2684c27c0d93">heap</a>()</div>
<div class="line"><a id="l04867" name="l04867"></a><span class="lineno"> 4867</span>                   -&gt;tracer()</div>
<div class="line"><a id="l04868" name="l04868"></a><span class="lineno"> 4868</span>                   -&gt;CompactionSpeedInBytesPerMillisecond()</div>
<div class="line"><a id="l04869" name="l04869"></a><span class="lineno"> 4869</span>                   .value_or(0),</div>
<div class="line"><a id="l04870" name="l04870"></a><span class="lineno"> 4870</span>               aborted_pages);</div>
<div class="line"><a id="l04871" name="l04871"></a><span class="lineno"> 4871</span>}</div>
<div class="line"><a id="l04872" name="l04872"></a><span class="lineno"> 4872</span> </div>
<div class="line"><a id="l04873" name="l04873"></a><span class="lineno"> 4873</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l04874" name="l04874"></a><span class="lineno"> 4874</span> </div>
<div class="line"><a id="l04875" name="l04875"></a><span class="lineno"> 4875</span><span class="keywordtype">void</span> MarkCompactCollector::EvacuatePagesInParallel() {</div>
<div class="line"><a id="l04876" name="l04876"></a><span class="lineno"> 4876</span>  std::vector&lt;std::pair&lt;ParallelWorkItem, MutablePageMetadata*&gt;&gt;</div>
<div class="line"><a id="l04877" name="l04877"></a><span class="lineno"> 4877</span>      evacuation_items;</div>
<div class="line"><a id="l04878" name="l04878"></a><span class="lineno"> 4878</span>  intptr_t live_bytes = 0;</div>
<div class="line"><a id="l04879" name="l04879"></a><span class="lineno"> 4879</span> </div>
<div class="line"><a id="l04880" name="l04880"></a><span class="lineno"> 4880</span>  <span class="comment">// Evacuation of new space pages cannot be aborted, so it needs to run</span></div>
<div class="line"><a id="l04881" name="l04881"></a><span class="lineno"> 4881</span>  <span class="comment">// before old space evacuation.</span></div>
<div class="line"><a id="l04882" name="l04882"></a><span class="lineno"> 4882</span>  <span class="keywordtype">bool</span> force_page_promotion =</div>
<div class="line"><a id="l04883" name="l04883"></a><span class="lineno"> 4883</span>      heap_-&gt;IsGCWithStack() &amp;&amp; !<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_with_stack;</div>
<div class="line"><a id="l04884" name="l04884"></a><span class="lineno"> 4884</span>  <span class="keywordflow">for</span> (PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> : new_space_evacuation_pages_) {</div>
<div class="line"><a id="l04885" name="l04885"></a><span class="lineno"> 4885</span>    intptr_t live_bytes_on_page = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;live_bytes();</div>
<div class="line"><a id="l04886" name="l04886"></a><span class="lineno"> 4886</span>    <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, live_bytes_on_page);</div>
<div class="line"><a id="l04887" name="l04887"></a><span class="lineno"> 4887</span>    live_bytes += live_bytes_on_page;</div>
<div class="line"><a id="l04888" name="l04888"></a><span class="lineno"> 4888</span>    MemoryReductionMode memory_reduction_mode =</div>
<div class="line"><a id="l04889" name="l04889"></a><span class="lineno"> 4889</span>        heap_-&gt;ShouldReduceMemory() ? MemoryReductionMode::kShouldReduceMemory</div>
<div class="line"><a id="l04890" name="l04890"></a><span class="lineno"> 4890</span>                                    : MemoryReductionMode::kNone;</div>
<div class="line"><a id="l04891" name="l04891"></a><span class="lineno"> 4891</span>    <span class="keywordflow">if</span> (ShouldMovePage(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, live_bytes_on_page, memory_reduction_mode) ||</div>
<div class="line"><a id="l04892" name="l04892"></a><span class="lineno"> 4892</span>        force_page_promotion) {</div>
<div class="line"><a id="l04893" name="l04893"></a><span class="lineno"> 4893</span>      EvacuateNewToOldSpacePageVisitor::Move(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04894" name="l04894"></a><span class="lineno"> 4894</span>      <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk()-&gt;SetFlagNonExecutable(MemoryChunk::PAGE_NEW_OLD_PROMOTION);</div>
<div class="line"><a id="l04895" name="l04895"></a><span class="lineno"> 4895</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(heap_-&gt;old_space(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;owner());</div>
<div class="line"><a id="l04896" name="l04896"></a><span class="lineno"> 4896</span>      <span class="comment">// The move added page-&gt;allocated_bytes to the old space, but we are</span></div>
<div class="line"><a id="l04897" name="l04897"></a><span class="lineno"> 4897</span>      <span class="comment">// going to sweep the page and add page-&gt;live_byte_count.</span></div>
<div class="line"><a id="l04898" name="l04898"></a><span class="lineno"> 4898</span>      heap_-&gt;old_space()-&gt;DecreaseAllocatedBytes(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;allocated_bytes(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04899" name="l04899"></a><span class="lineno"> 4899</span>    }</div>
<div class="line"><a id="l04900" name="l04900"></a><span class="lineno"> 4900</span>    evacuation_items.emplace_back(ParallelWorkItem{}, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04901" name="l04901"></a><span class="lineno"> 4901</span>  }</div>
<div class="line"><a id="l04902" name="l04902"></a><span class="lineno"> 4902</span> </div>
<div class="line"><a id="l04903" name="l04903"></a><span class="lineno"> 4903</span>  <span class="keywordflow">if</span> (heap_-&gt;IsGCWithStack()) {</div>
<div class="line"><a id="l04904" name="l04904"></a><span class="lineno"> 4904</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_with_stack) {</div>
<div class="line"><a id="l04905" name="l04905"></a><span class="lineno"> 4905</span>      <span class="keywordflow">for</span> (PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> : old_space_evacuation_pages_) {</div>
<div class="line"><a id="l04906" name="l04906"></a><span class="lineno"> 4906</span>        ReportAbortedEvacuationCandidateDueToFlags(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04907" name="l04907"></a><span class="lineno"> 4907</span>      }</div>
<div class="line"><a id="l04908" name="l04908"></a><span class="lineno"> 4908</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.compact_code_space_with_stack ||</div>
<div class="line"><a id="l04909" name="l04909"></a><span class="lineno"> 4909</span>               heap_-&gt;isolate()-&gt;InFastCCall()) {</div>
<div class="line"><a id="l04910" name="l04910"></a><span class="lineno"> 4910</span>      <span class="comment">// For fast C calls we cannot patch the return address in the native stack</span></div>
<div class="line"><a id="l04911" name="l04911"></a><span class="lineno"> 4911</span>      <span class="comment">// frame if we would relocate InstructionStream objects.</span></div>
<div class="line"><a id="l04912" name="l04912"></a><span class="lineno"> 4912</span>      <span class="keywordflow">for</span> (PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> : old_space_evacuation_pages_) {</div>
<div class="line"><a id="l04913" name="l04913"></a><span class="lineno"> 4913</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;owner_identity() != CODE_SPACE) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04914" name="l04914"></a><span class="lineno"> 4914</span>        ReportAbortedEvacuationCandidateDueToFlags(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04915" name="l04915"></a><span class="lineno"> 4915</span>      }</div>
<div class="line"><a id="l04916" name="l04916"></a><span class="lineno"> 4916</span>    }</div>
<div class="line"><a id="l04917" name="l04917"></a><span class="lineno"> 4917</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04918" name="l04918"></a><span class="lineno"> 4918</span>    <span class="comment">// There should always be a stack when we are in a fast c call.</span></div>
<div class="line"><a id="l04919" name="l04919"></a><span class="lineno"> 4919</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!heap_-&gt;isolate()-&gt;InFastCCall());</div>
<div class="line"><a id="l04920" name="l04920"></a><span class="lineno"> 4920</span>  }</div>
<div class="line"><a id="l04921" name="l04921"></a><span class="lineno"> 4921</span> </div>
<div class="line"><a id="l04922" name="l04922"></a><span class="lineno"> 4922</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction || <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.stress_compaction_random) {</div>
<div class="line"><a id="l04923" name="l04923"></a><span class="lineno"> 4923</span>    <span class="comment">// Stress aborting of evacuation by aborting ~10% of evacuation candidates</span></div>
<div class="line"><a id="l04924" name="l04924"></a><span class="lineno"> 4924</span>    <span class="comment">// when stress testing.</span></div>
<div class="line"><a id="l04925" name="l04925"></a><span class="lineno"> 4925</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> kFraction = 0.05;</div>
<div class="line"><a id="l04926" name="l04926"></a><span class="lineno"> 4926</span> </div>
<div class="line"><a id="l04927" name="l04927"></a><span class="lineno"> 4927</span>    <span class="keywordflow">for</span> (PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> : old_space_evacuation_pages_) {</div>
<div class="line"><a id="l04928" name="l04928"></a><span class="lineno"> 4928</span>      MemoryChunk* chunk = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk();</div>
<div class="line"><a id="l04929" name="l04929"></a><span class="lineno"> 4929</span>      <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(MemoryChunk::COMPACTION_WAS_ABORTED)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04930" name="l04930"></a><span class="lineno"> 4930</span> </div>
<div class="line"><a id="l04931" name="l04931"></a><span class="lineno"> 4931</span>      <span class="keywordflow">if</span> (heap_-&gt;isolate()-&gt;fuzzer_rng()-&gt;NextDouble() &lt; kFraction) {</div>
<div class="line"><a id="l04932" name="l04932"></a><span class="lineno"> 4932</span>        ReportAbortedEvacuationCandidateDueToFlags(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04933" name="l04933"></a><span class="lineno"> 4933</span>      }</div>
<div class="line"><a id="l04934" name="l04934"></a><span class="lineno"> 4934</span>    }</div>
<div class="line"><a id="l04935" name="l04935"></a><span class="lineno"> 4935</span>  }</div>
<div class="line"><a id="l04936" name="l04936"></a><span class="lineno"> 4936</span> </div>
<div class="line"><a id="l04937" name="l04937"></a><span class="lineno"> 4937</span>  <span class="keywordflow">for</span> (PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> : old_space_evacuation_pages_) {</div>
<div class="line"><a id="l04938" name="l04938"></a><span class="lineno"> 4938</span>    MemoryChunk* chunk = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk();</div>
<div class="line"><a id="l04939" name="l04939"></a><span class="lineno"> 4939</span>    <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(MemoryChunk::COMPACTION_WAS_ABORTED)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l04940" name="l04940"></a><span class="lineno"> 4940</span> </div>
<div class="line"><a id="l04941" name="l04941"></a><span class="lineno"> 4941</span>    live_bytes += <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;live_bytes();</div>
<div class="line"><a id="l04942" name="l04942"></a><span class="lineno"> 4942</span>    evacuation_items.emplace_back(ParallelWorkItem{}, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l04943" name="l04943"></a><span class="lineno"> 4943</span>  }</div>
<div class="line"><a id="l04944" name="l04944"></a><span class="lineno"> 4944</span> </div>
<div class="line"><a id="l04945" name="l04945"></a><span class="lineno"> 4945</span>  <span class="comment">// Promote young generation large objects.</span></div>
<div class="line"><a id="l04946" name="l04946"></a><span class="lineno"> 4946</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span>* new_lo_space = heap_-&gt;new_lo_space()) {</div>
<div class="line"><a id="l04947" name="l04947"></a><span class="lineno"> 4947</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = new_lo_space-&gt;begin(); it != new_lo_space-&gt;end();) {</div>
<div class="line"><a id="l04948" name="l04948"></a><span class="lineno"> 4948</span>      LargePageMetadata* current = *(it++);</div>
<div class="line"><a id="l04949" name="l04949"></a><span class="lineno"> 4949</span>      Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span> = current-&gt;GetObject();</div>
<div class="line"><a id="l04950" name="l04950"></a><span class="lineno"> 4950</span>      <span class="comment">// The black-allocated flag was already cleared in SweepLargeSpace().</span></div>
<div class="line"><a id="l04951" name="l04951"></a><span class="lineno"> 4951</span>      <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.black_allocated_pages,</div>
<div class="line"><a id="l04952" name="l04952"></a><span class="lineno"> 4952</span>                     !HeapLayout::InBlackAllocatedPage(<span class="keywordtype">object</span>));</div>
<div class="line"><a id="l04953" name="l04953"></a><span class="lineno"> 4953</span>      <span class="keywordflow">if</span> (marking_state_-&gt;IsMarked(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a id="l04954" name="l04954"></a><span class="lineno"> 4954</span>        heap_-&gt;lo_space()-&gt;PromoteNewLargeObject(current);</div>
<div class="line"><a id="l04955" name="l04955"></a><span class="lineno"> 4955</span>        current-&gt;Chunk()-&gt;SetFlagNonExecutable(</div>
<div class="line"><a id="l04956" name="l04956"></a><span class="lineno"> 4956</span>            MemoryChunk::PAGE_NEW_OLD_PROMOTION);</div>
<div class="line"><a id="l04957" name="l04957"></a><span class="lineno"> 4957</span>        promoted_large_pages_.push_back(current);</div>
<div class="line"><a id="l04958" name="l04958"></a><span class="lineno"> 4958</span>        evacuation_items.emplace_back(ParallelWorkItem{}, <a class="code hl_variable" href="earley-parser_8cc.html#a69620d3d0bf3441e9802e4853271cad4">current</a>);</div>
<div class="line"><a id="l04959" name="l04959"></a><span class="lineno"> 4959</span>      }</div>
<div class="line"><a id="l04960" name="l04960"></a><span class="lineno"> 4960</span>    }</div>
<div class="line"><a id="l04961" name="l04961"></a><span class="lineno"> 4961</span>    new_lo_space-&gt;set_objects_size(0);</div>
<div class="line"><a id="l04962" name="l04962"></a><span class="lineno"> 4962</span>  }</div>
<div class="line"><a id="l04963" name="l04963"></a><span class="lineno"> 4963</span> </div>
<div class="line"><a id="l04964" name="l04964"></a><span class="lineno"> 4964</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> pages_count = evacuation_items.size();</div>
<div class="line"><a id="l04965" name="l04965"></a><span class="lineno"> 4965</span>  <span class="keywordtype">size_t</span> wanted_num_tasks = 0;</div>
<div class="line"><a id="l04966" name="l04966"></a><span class="lineno"> 4966</span>  <span class="keywordflow">if</span> (!evacuation_items.empty()) {</div>
<div class="line"><a id="l04967" name="l04967"></a><span class="lineno"> 4967</span>    <a class="code hl_define" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>),</div>
<div class="line"><a id="l04968" name="l04968"></a><span class="lineno"> 4968</span>                 <span class="stringliteral">&quot;MarkCompactCollector::EvacuatePagesInParallel&quot;</span>, <span class="stringliteral">&quot;pages&quot;</span>,</div>
<div class="line"><a id="l04969" name="l04969"></a><span class="lineno"> 4969</span>                 evacuation_items.size());</div>
<div class="line"><a id="l04970" name="l04970"></a><span class="lineno"> 4970</span> </div>
<div class="line"><a id="l04971" name="l04971"></a><span class="lineno"> 4971</span>    wanted_num_tasks = CreateAndExecuteEvacuationTasks(</div>
<div class="line"><a id="l04972" name="l04972"></a><span class="lineno"> 4972</span>        heap_, <span class="keyword">this</span>, std::move(evacuation_items));</div>
<div class="line"><a id="l04973" name="l04973"></a><span class="lineno"> 4973</span>  }</div>
<div class="line"><a id="l04974" name="l04974"></a><span class="lineno"> 4974</span> </div>
<div class="line"><a id="l04975" name="l04975"></a><span class="lineno"> 4975</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> aborted_pages = PostProcessAbortedEvacuationCandidates();</div>
<div class="line"><a id="l04976" name="l04976"></a><span class="lineno"> 4976</span> </div>
<div class="line"><a id="l04977" name="l04977"></a><span class="lineno"> 4977</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_evacuation) {</div>
<div class="line"><a id="l04978" name="l04978"></a><span class="lineno"> 4978</span>    TraceEvacuation(heap_-&gt;isolate(), pages_count, wanted_num_tasks, live_bytes,</div>
<div class="line"><a id="l04979" name="l04979"></a><span class="lineno"> 4979</span>                    aborted_pages);</div>
<div class="line"><a id="l04980" name="l04980"></a><span class="lineno"> 4980</span>  }</div>
<div class="line"><a id="l04981" name="l04981"></a><span class="lineno"> 4981</span>}</div>
<div class="line"><a id="l04982" name="l04982"></a><span class="lineno"> 4982</span> </div>
<div class="foldopen" id="foldopen04983" data-start="{" data-end="};">
<div class="line"><a id="l04983" name="l04983"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuationWeakObjectRetainer.html"> 4983</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1EvacuationWeakObjectRetainer.html">EvacuationWeakObjectRetainer</a> : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1WeakObjectRetainer.html">WeakObjectRetainer</a> {</div>
<div class="line"><a id="l04984" name="l04984"></a><span class="lineno"> 4984</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen04985" data-start="{" data-end="}">
<div class="line"><a id="l04985" name="l04985"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EvacuationWeakObjectRetainer.html#a9cb66ab7c2be36d8d10bc27be14b4594"> 4985</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1EvacuationWeakObjectRetainer.html#a9cb66ab7c2be36d8d10bc27be14b4594">RetainAs</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> <span class="keywordtype">object</span>)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l04986" name="l04986"></a><span class="lineno"> 4986</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.IsHeapObject()) {</div>
<div class="line"><a id="l04987" name="l04987"></a><span class="lineno"> 4987</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> heap_object = Cast&lt;HeapObject&gt;(<span class="keywordtype">object</span>);</div>
<div class="line"><a id="l04988" name="l04988"></a><span class="lineno"> 4988</span>      <a class="code hl_class" href="classv8_1_1internal_1_1MapWord.html">MapWord</a> map_word = heap_object-&gt;map_word(kRelaxedLoad);</div>
<div class="line"><a id="l04989" name="l04989"></a><span class="lineno"> 4989</span>      <span class="keywordflow">if</span> (map_word.<a class="code hl_function" href="classv8_1_1internal_1_1MapWord.html#a9dca2a41d176b2abbd067e956796a439">IsForwardingAddress</a>()) {</div>
<div class="line"><a id="l04990" name="l04990"></a><span class="lineno"> 4990</span>        <span class="keywordflow">return</span> map_word.<a class="code hl_function" href="classv8_1_1internal_1_1MapWord.html#af98460db3cf5e0731cdd50d22b7e4c27">ToForwardingAddress</a>(heap_object);</div>
<div class="line"><a id="l04991" name="l04991"></a><span class="lineno"> 4991</span>      }</div>
<div class="line"><a id="l04992" name="l04992"></a><span class="lineno"> 4992</span>    }</div>
<div class="line"><a id="l04993" name="l04993"></a><span class="lineno"> 4993</span>    <span class="keywordflow">return</span> object;</div>
<div class="line"><a id="l04994" name="l04994"></a><span class="lineno"> 4994</span>  }</div>
</div>
<div class="line"><a id="l04995" name="l04995"></a><span class="lineno"> 4995</span>};</div>
</div>
<div class="line"><a id="l04996" name="l04996"></a><span class="lineno"> 4996</span> </div>
<div class="line"><a id="l04997" name="l04997"></a><span class="lineno"> 4997</span><span class="keywordtype">void</span> MarkCompactCollector::Evacuate() {</div>
<div class="line"><a id="l04998" name="l04998"></a><span class="lineno"> 4998</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_EVACUATE);</div>
<div class="line"><a id="l04999" name="l04999"></a><span class="lineno"> 4999</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> guard(heap_-&gt;relocation_mutex());</div>
<div class="line"><a id="l05000" name="l05000"></a><span class="lineno"> 5000</span> </div>
<div class="line"><a id="l05001" name="l05001"></a><span class="lineno"> 5001</span>  {</div>
<div class="line"><a id="l05002" name="l05002"></a><span class="lineno"> 5002</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_EVACUATE_PROLOGUE);</div>
<div class="line"><a id="l05003" name="l05003"></a><span class="lineno"> 5003</span>    EvacuatePrologue();</div>
<div class="line"><a id="l05004" name="l05004"></a><span class="lineno"> 5004</span>  }</div>
<div class="line"><a id="l05005" name="l05005"></a><span class="lineno"> 5005</span> </div>
<div class="line"><a id="l05006" name="l05006"></a><span class="lineno"> 5006</span>  {</div>
<div class="line"><a id="l05007" name="l05007"></a><span class="lineno"> 5007</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_EVACUATE_COPY);</div>
<div class="line"><a id="l05008" name="l05008"></a><span class="lineno"> 5008</span>    EvacuatePagesInParallel();</div>
<div class="line"><a id="l05009" name="l05009"></a><span class="lineno"> 5009</span>  }</div>
<div class="line"><a id="l05010" name="l05010"></a><span class="lineno"> 5010</span> </div>
<div class="line"><a id="l05011" name="l05011"></a><span class="lineno"> 5011</span>  UpdatePointersAfterEvacuation();</div>
<div class="line"><a id="l05012" name="l05012"></a><span class="lineno"> 5012</span> </div>
<div class="line"><a id="l05013" name="l05013"></a><span class="lineno"> 5013</span>  {</div>
<div class="line"><a id="l05014" name="l05014"></a><span class="lineno"> 5014</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_EVACUATE_CLEAN_UP);</div>
<div class="line"><a id="l05015" name="l05015"></a><span class="lineno"> 5015</span> </div>
<div class="line"><a id="l05016" name="l05016"></a><span class="lineno"> 5016</span>    <span class="keywordflow">for</span> (PageMetadata* p : new_space_evacuation_pages_) {</div>
<div class="line"><a id="l05017" name="l05017"></a><span class="lineno"> 5017</span>      MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a id="l05018" name="l05018"></a><span class="lineno"> 5018</span>      <a class="code hl_enumeration" href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">AllocationSpace</a> owner_identity = p-&gt;owner_identity();</div>
<div class="line"><a id="l05019" name="l05019"></a><span class="lineno"> 5019</span>      <a class="code hl_define" href="macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(owner_identity);</div>
<div class="line"><a id="l05020" name="l05020"></a><span class="lineno"> 5020</span>      <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(MemoryChunk::PAGE_NEW_OLD_PROMOTION)) {</div>
<div class="line"><a id="l05021" name="l05021"></a><span class="lineno"> 5021</span>        chunk-&gt;ClearFlagNonExecutable(MemoryChunk::PAGE_NEW_OLD_PROMOTION);</div>
<div class="line"><a id="l05022" name="l05022"></a><span class="lineno"> 5022</span>        <span class="comment">// The in-sandbox page flags may be corrupted, so we currently need</span></div>
<div class="line"><a id="l05023" name="l05023"></a><span class="lineno"> 5023</span>        <span class="comment">// this check here to make sure that this doesn&#39;t lead to further</span></div>
<div class="line"><a id="l05024" name="l05024"></a><span class="lineno"> 5024</span>        <span class="comment">// confusion about the state of MemoryChunkMetadata objects.</span></div>
<div class="line"><a id="l05025" name="l05025"></a><span class="lineno"> 5025</span>        <span class="comment">// TODO(377724745): if we move (some of) the flags into the trusted</span></div>
<div class="line"><a id="l05026" name="l05026"></a><span class="lineno"> 5026</span>        <span class="comment">// MemoryChunkMetadata object, then this wouldn&#39;t be necessary.</span></div>
<div class="line"><a id="l05027" name="l05027"></a><span class="lineno"> 5027</span>        <a class="code hl_define" href="check_8h.html#a6e67d209c0a0c9c55b7b563275f63bdd">SBXCHECK_EQ</a>(OLD_SPACE, owner_identity);</div>
<div class="line"><a id="l05028" name="l05028"></a><span class="lineno"> 5028</span>        sweeper_-&gt;AddPage(OLD_SPACE, p);</div>
<div class="line"><a id="l05029" name="l05029"></a><span class="lineno"> 5029</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms) {</div>
<div class="line"><a id="l05030" name="l05030"></a><span class="lineno"> 5030</span>        <span class="comment">// Sweep non-promoted pages to add them back to the free list.</span></div>
<div class="line"><a id="l05031" name="l05031"></a><span class="lineno"> 5031</span>        <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(NEW_SPACE, owner_identity);</div>
<div class="line"><a id="l05032" name="l05032"></a><span class="lineno"> 5032</span>        <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, p-&gt;live_bytes());</div>
<div class="line"><a id="l05033" name="l05033"></a><span class="lineno"> 5033</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a id="l05034" name="l05034"></a><span class="lineno"> 5034</span>        PagedNewSpace* space = heap_-&gt;paged_new_space();</div>
<div class="line"><a id="l05035" name="l05035"></a><span class="lineno"> 5035</span>        <span class="keywordflow">if</span> (space-&gt;ShouldReleaseEmptyPage()) {</div>
<div class="line"><a id="l05036" name="l05036"></a><span class="lineno"> 5036</span>          space-&gt;ReleasePage(p);</div>
<div class="line"><a id="l05037" name="l05037"></a><span class="lineno"> 5037</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05038" name="l05038"></a><span class="lineno"> 5038</span>          sweeper_-&gt;SweepEmptyNewSpacePage(p);</div>
<div class="line"><a id="l05039" name="l05039"></a><span class="lineno"> 5039</span>        }</div>
<div class="line"><a id="l05040" name="l05040"></a><span class="lineno"> 5040</span>      }</div>
<div class="line"><a id="l05041" name="l05041"></a><span class="lineno"> 5041</span>    }</div>
<div class="line"><a id="l05042" name="l05042"></a><span class="lineno"> 5042</span>    new_space_evacuation_pages_.clear();</div>
<div class="line"><a id="l05043" name="l05043"></a><span class="lineno"> 5043</span> </div>
<div class="line"><a id="l05044" name="l05044"></a><span class="lineno"> 5044</span>    <span class="keywordflow">for</span> (LargePageMetadata* p : promoted_large_pages_) {</div>
<div class="line"><a id="l05045" name="l05045"></a><span class="lineno"> 5045</span>      MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a id="l05046" name="l05046"></a><span class="lineno"> 5046</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(chunk-&gt;IsFlagSet(MemoryChunk::PAGE_NEW_OLD_PROMOTION));</div>
<div class="line"><a id="l05047" name="l05047"></a><span class="lineno"> 5047</span>      chunk-&gt;ClearFlagNonExecutable(MemoryChunk::PAGE_NEW_OLD_PROMOTION);</div>
<div class="line"><a id="l05048" name="l05048"></a><span class="lineno"> 5048</span>      Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span> = p-&gt;GetObject();</div>
<div class="line"><a id="l05049" name="l05049"></a><span class="lineno"> 5049</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a id="l05050" name="l05050"></a><span class="lineno"> 5050</span>        MarkBit::From(<span class="keywordtype">object</span>).Clear();</div>
<div class="line"><a id="l05051" name="l05051"></a><span class="lineno"> 5051</span>        p-&gt;SetLiveBytes(0);</div>
<div class="line"><a id="l05052" name="l05052"></a><span class="lineno"> 5052</span>      }</div>
<div class="line"><a id="l05053" name="l05053"></a><span class="lineno"> 5053</span>      p-&gt;marking_progress_tracker().ResetIfEnabled();</div>
<div class="line"><a id="l05054" name="l05054"></a><span class="lineno"> 5054</span>    }</div>
<div class="line"><a id="l05055" name="l05055"></a><span class="lineno"> 5055</span>    promoted_large_pages_.clear();</div>
<div class="line"><a id="l05056" name="l05056"></a><span class="lineno"> 5056</span> </div>
<div class="line"><a id="l05057" name="l05057"></a><span class="lineno"> 5057</span>    <span class="keywordflow">for</span> (PageMetadata* p : old_space_evacuation_pages_) {</div>
<div class="line"><a id="l05058" name="l05058"></a><span class="lineno"> 5058</span>      MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a id="l05059" name="l05059"></a><span class="lineno"> 5059</span>      <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(MemoryChunk::COMPACTION_WAS_ABORTED)) {</div>
<div class="line"><a id="l05060" name="l05060"></a><span class="lineno"> 5060</span>        sweeper_-&gt;AddPage(p-&gt;owner_identity(), p);</div>
<div class="line"><a id="l05061" name="l05061"></a><span class="lineno"> 5061</span>        chunk-&gt;ClearFlagSlow(MemoryChunk::COMPACTION_WAS_ABORTED);</div>
<div class="line"><a id="l05062" name="l05062"></a><span class="lineno"> 5062</span>      }</div>
<div class="line"><a id="l05063" name="l05063"></a><span class="lineno"> 5063</span>    }</div>
<div class="line"><a id="l05064" name="l05064"></a><span class="lineno"> 5064</span>  }</div>
<div class="line"><a id="l05065" name="l05065"></a><span class="lineno"> 5065</span> </div>
<div class="line"><a id="l05066" name="l05066"></a><span class="lineno"> 5066</span>  {</div>
<div class="line"><a id="l05067" name="l05067"></a><span class="lineno"> 5067</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_EVACUATE_EPILOGUE);</div>
<div class="line"><a id="l05068" name="l05068"></a><span class="lineno"> 5068</span>    EvacuateEpilogue();</div>
<div class="line"><a id="l05069" name="l05069"></a><span class="lineno"> 5069</span>  }</div>
<div class="line"><a id="l05070" name="l05070"></a><span class="lineno"> 5070</span> </div>
<div class="line"><a id="l05071" name="l05071"></a><span class="lineno"> 5071</span><span class="preprocessor">#ifdef VERIFY_HEAP</span></div>
<div class="line"><a id="l05072" name="l05072"></a><span class="lineno"> 5072</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.verify_heap &amp;&amp; !sweeper_-&gt;sweeping_in_progress()) {</div>
<div class="line"><a id="l05073" name="l05073"></a><span class="lineno"> 5073</span>    EvacuationVerifier verifier(heap_);</div>
<div class="line"><a id="l05074" name="l05074"></a><span class="lineno"> 5074</span>    verifier.Run();</div>
<div class="line"><a id="l05075" name="l05075"></a><span class="lineno"> 5075</span>  }</div>
<div class="line"><a id="l05076" name="l05076"></a><span class="lineno"> 5076</span><span class="preprocessor">#endif  </span><span class="comment">// VERIFY_HEAP</span></div>
<div class="line"><a id="l05077" name="l05077"></a><span class="lineno"> 5077</span>}</div>
<div class="line"><a id="l05078" name="l05078"></a><span class="lineno"> 5078</span> </div>
<div class="foldopen" id="foldopen05079" data-start="{" data-end="};">
<div class="line"><a id="l05079" name="l05079"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1UpdatingItem.html"> 5079</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1UpdatingItem.html">UpdatingItem</a> : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1ParallelWorkItem.html">ParallelWorkItem</a> {</div>
<div class="line"><a id="l05080" name="l05080"></a><span class="lineno"> 5080</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l05081" name="l05081"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1UpdatingItem.html#a0542af6439271628a9a9b043f0084896"> 5081</a></span>  <span class="keyword">virtual</span> <a class="code hl_function" href="classv8_1_1internal_1_1UpdatingItem.html#a0542af6439271628a9a9b043f0084896">~UpdatingItem</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l05082" name="l05082"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1UpdatingItem.html#ad5b054dd403a93d6b2397ba52d42c136"> 5082</a></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1UpdatingItem.html#ad5b054dd403a93d6b2397ba52d42c136">Process</a>() = 0;</div>
<div class="line"><a id="l05083" name="l05083"></a><span class="lineno"> 5083</span>};</div>
</div>
<div class="line"><a id="l05084" name="l05084"></a><span class="lineno"> 5084</span> </div>
<div class="foldopen" id="foldopen05085" data-start="{" data-end="};">
<div class="line"><a id="l05085" name="l05085"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingJob.html"> 5085</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1PointersUpdatingJob.html">PointersUpdatingJob</a> : <span class="keyword">public</span> v8::JobTask {</div>
<div class="line"><a id="l05086" name="l05086"></a><span class="lineno"> 5086</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen05087" data-start="{" data-end="}">
<div class="line"><a id="l05087" name="l05087"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingJob.html#abc434d31c3e5bdc7043ee40028fdef26"> 5087</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingJob.html#abc434d31c3e5bdc7043ee40028fdef26">PointersUpdatingJob</a>(</div>
<div class="line"><a id="l05088" name="l05088"></a><span class="lineno"> 5088</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector,</div>
<div class="line"><a id="l05089" name="l05089"></a><span class="lineno"> 5089</span>      std::vector&lt;std::unique_ptr&lt;UpdatingItem&gt;&gt; updating_items)</div>
<div class="line"><a id="l05090" name="l05090"></a><span class="lineno"> 5090</span>      : collector_(collector),</div>
<div class="line"><a id="l05091" name="l05091"></a><span class="lineno"> 5091</span>        updating_items_(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(updating_items)),</div>
<div class="line"><a id="l05092" name="l05092"></a><span class="lineno"> 5092</span>        remaining_updating_items_(updating_items_.size()),</div>
<div class="line"><a id="l05093" name="l05093"></a><span class="lineno"> 5093</span>        generator_(updating_items_.size()),</div>
<div class="line"><a id="l05094" name="l05094"></a><span class="lineno"> 5094</span>        tracer_(isolate-&gt;<a class="code hl_namespace" href="namespaceheap.html">heap</a>()-&gt;tracer()),</div>
<div class="line"><a id="l05095" name="l05095"></a><span class="lineno"> 5095</span>        trace_id_(reinterpret_cast&lt;uint64_t&gt;(this) ^</div>
<div class="line"><a id="l05096" name="l05096"></a><span class="lineno"> 5096</span>                  tracer_-&gt;CurrentEpoch(<a class="code hl_class" href="classv8_1_1internal_1_1GCTracer.html">GCTracer</a>::<a class="code hl_class" href="classv8_1_1internal_1_1Scope.html">Scope</a>::MC_EVACUATE)) {}</div>
</div>
<div class="line"><a id="l05097" name="l05097"></a><span class="lineno"> 5097</span> </div>
<div class="foldopen" id="foldopen05098" data-start="{" data-end="}">
<div class="line"><a id="l05098" name="l05098"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingJob.html#a4bfd19244863f76434a26a28bd0224dd"> 5098</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingJob.html#a4bfd19244863f76434a26a28bd0224dd">Run</a>(JobDelegate* delegate)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l05099" name="l05099"></a><span class="lineno"> 5099</span>    <span class="comment">// In case multi-cage pointer compression mode is enabled ensure that</span></div>
<div class="line"><a id="l05100" name="l05100"></a><span class="lineno"> 5100</span>    <span class="comment">// current thread&#39;s cage base values are properly initialized.</span></div>
<div class="line"><a id="l05101" name="l05101"></a><span class="lineno"> 5101</span>    <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageAccessScope.html">PtrComprCageAccessScope</a> ptr_compr_cage_access_scope(</div>
<div class="line"><a id="l05102" name="l05102"></a><span class="lineno"> 5102</span>        collector_-&gt;heap()-&gt;isolate());</div>
<div class="line"><a id="l05103" name="l05103"></a><span class="lineno"> 5103</span> </div>
<div class="line"><a id="l05104" name="l05104"></a><span class="lineno"> 5104</span>    <span class="keywordflow">if</span> (delegate-&gt;IsJoiningThread()) {</div>
<div class="line"><a id="l05105" name="l05105"></a><span class="lineno"> 5105</span>      <a class="code hl_define" href="gc-tracer_8h.html#a4b6fc205b8b8bbe4275672c2a66c5b94">TRACE_GC_WITH_FLOW</a>(tracer_,</div>
<div class="line"><a id="l05106" name="l05106"></a><span class="lineno"> 5106</span>                         GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_PARALLEL,</div>
<div class="line"><a id="l05107" name="l05107"></a><span class="lineno"> 5107</span>                         trace_id_, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l05108" name="l05108"></a><span class="lineno"> 5108</span>      UpdatePointers(delegate);</div>
<div class="line"><a id="l05109" name="l05109"></a><span class="lineno"> 5109</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05110" name="l05110"></a><span class="lineno"> 5110</span>      <a class="code hl_define" href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a>(</div>
<div class="line"><a id="l05111" name="l05111"></a><span class="lineno"> 5111</span>          tracer_, GCTracer::Scope::MC_BACKGROUND_EVACUATE_UPDATE_POINTERS,</div>
<div class="line"><a id="l05112" name="l05112"></a><span class="lineno"> 5112</span>          ThreadKind::kBackground, trace_id_, <a class="code hl_define" href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a>);</div>
<div class="line"><a id="l05113" name="l05113"></a><span class="lineno"> 5113</span>      UpdatePointers(delegate);</div>
<div class="line"><a id="l05114" name="l05114"></a><span class="lineno"> 5114</span>    }</div>
<div class="line"><a id="l05115" name="l05115"></a><span class="lineno"> 5115</span>  }</div>
</div>
<div class="line"><a id="l05116" name="l05116"></a><span class="lineno"> 5116</span> </div>
<div class="foldopen" id="foldopen05117" data-start="{" data-end="}">
<div class="line"><a id="l05117" name="l05117"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingJob.html#a8758fac2f08ea645f7ada1c6881dd8cc"> 5117</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingJob.html#a8758fac2f08ea645f7ada1c6881dd8cc">UpdatePointers</a>(JobDelegate* delegate) {</div>
<div class="line"><a id="l05118" name="l05118"></a><span class="lineno"> 5118</span>    <span class="keywordflow">while</span> (remaining_updating_items_.load(std::memory_order_relaxed) &gt; 0) {</div>
<div class="line"><a id="l05119" name="l05119"></a><span class="lineno"> 5119</span>      std::optional&lt;size_t&gt; <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = generator_.GetNext();</div>
<div class="line"><a id="l05120" name="l05120"></a><span class="lineno"> 5120</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05121" name="l05121"></a><span class="lineno"> 5121</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = *<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; updating_items_.<a class="code hl_class" href="classsize.html">size</a>(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l05122" name="l05122"></a><span class="lineno"> 5122</span>        <span class="keyword">auto</span>&amp; work_item = updating_items_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l05123" name="l05123"></a><span class="lineno"> 5123</span>        <span class="keywordflow">if</span> (!work_item-&gt;TryAcquire()) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l05124" name="l05124"></a><span class="lineno"> 5124</span>        work_item-&gt;Process();</div>
<div class="line"><a id="l05125" name="l05125"></a><span class="lineno"> 5125</span>        <span class="keywordflow">if</span> (remaining_updating_items_.fetch_sub(1, std::memory_order_relaxed) &lt;=</div>
<div class="line"><a id="l05126" name="l05126"></a><span class="lineno"> 5126</span>            1) {</div>
<div class="line"><a id="l05127" name="l05127"></a><span class="lineno"> 5127</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05128" name="l05128"></a><span class="lineno"> 5128</span>        }</div>
<div class="line"><a id="l05129" name="l05129"></a><span class="lineno"> 5129</span>      }</div>
<div class="line"><a id="l05130" name="l05130"></a><span class="lineno"> 5130</span>    }</div>
<div class="line"><a id="l05131" name="l05131"></a><span class="lineno"> 5131</span>  }</div>
</div>
<div class="line"><a id="l05132" name="l05132"></a><span class="lineno"> 5132</span> </div>
<div class="foldopen" id="foldopen05133" data-start="{" data-end="}">
<div class="line"><a id="l05133" name="l05133"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingJob.html#a1e85c703f3a66ede1250d045df8717a3"> 5133</a></span>  <span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingJob.html#a1e85c703f3a66ede1250d045df8717a3">GetMaxConcurrency</a>(<span class="keywordtype">size_t</span> worker_count)<span class="keyword"> const override </span>{</div>
<div class="line"><a id="l05134" name="l05134"></a><span class="lineno"> 5134</span>    <span class="keywordtype">size_t</span> items = remaining_updating_items_.load(std::memory_order_relaxed);</div>
<div class="line"><a id="l05135" name="l05135"></a><span class="lineno"> 5135</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.parallel_pointer_update ||</div>
<div class="line"><a id="l05136" name="l05136"></a><span class="lineno"> 5136</span>        !collector_-&gt;UseBackgroundThreadsInCycle()) {</div>
<div class="line"><a id="l05137" name="l05137"></a><span class="lineno"> 5137</span>      <span class="keywordflow">return</span> std::min&lt;size_t&gt;(items, 1);</div>
<div class="line"><a id="l05138" name="l05138"></a><span class="lineno"> 5138</span>    }</div>
<div class="line"><a id="l05139" name="l05139"></a><span class="lineno"> 5139</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxPointerUpdateTasks = 8;</div>
<div class="line"><a id="l05140" name="l05140"></a><span class="lineno"> 5140</span>    <span class="keywordtype">size_t</span> max_concurrency = std::min&lt;size_t&gt;(kMaxPointerUpdateTasks, items);</div>
<div class="line"><a id="l05141" name="l05141"></a><span class="lineno"> 5141</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(items &gt; 0, max_concurrency &gt; 0);</div>
<div class="line"><a id="l05142" name="l05142"></a><span class="lineno"> 5142</span>    <span class="keywordflow">return</span> max_concurrency;</div>
<div class="line"><a id="l05143" name="l05143"></a><span class="lineno"> 5143</span>  }</div>
</div>
<div class="line"><a id="l05144" name="l05144"></a><span class="lineno"> 5144</span> </div>
<div class="line"><a id="l05145" name="l05145"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1PointersUpdatingJob.html#acaff2a4c6b079a1726d1afe9b8b56e88"> 5145</a></span>  uint64_t <a class="code hl_function" href="classv8_1_1internal_1_1PointersUpdatingJob.html#acaff2a4c6b079a1726d1afe9b8b56e88">trace_id</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> trace_id_; }</div>
<div class="line"><a id="l05146" name="l05146"></a><span class="lineno"> 5146</span> </div>
<div class="line"><a id="l05147" name="l05147"></a><span class="lineno"> 5147</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l05148" name="l05148"></a><span class="lineno"> 5148</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector_;</div>
<div class="line"><a id="l05149" name="l05149"></a><span class="lineno"> 5149</span>  std::vector&lt;std::unique_ptr&lt;UpdatingItem&gt;&gt; updating_items_;</div>
<div class="line"><a id="l05150" name="l05150"></a><span class="lineno"> 5150</span>  std::atomic&lt;size_t&gt; remaining_updating_items_{0};</div>
<div class="line"><a id="l05151" name="l05151"></a><span class="lineno"> 5151</span>  IndexGenerator generator_;</div>
<div class="line"><a id="l05152" name="l05152"></a><span class="lineno"> 5152</span> </div>
<div class="line"><a id="l05153" name="l05153"></a><span class="lineno"> 5153</span>  GCTracer* tracer_;</div>
<div class="line"><a id="l05154" name="l05154"></a><span class="lineno"> 5154</span>  <span class="keyword">const</span> uint64_t trace_id_;</div>
<div class="line"><a id="l05155" name="l05155"></a><span class="lineno"> 5155</span>};</div>
</div>
<div class="line"><a id="l05156" name="l05156"></a><span class="lineno"> 5156</span> </div>
<div class="line"><a id="l05157" name="l05157"></a><span class="lineno"> 5157</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l05158" name="l05158"></a><span class="lineno"> 5158</span> </div>
<div class="line"><a id="l05159" name="l05159"></a><span class="lineno"> 5159</span><span class="keyword">class </span>RememberedSetUpdatingItem : <span class="keyword">public</span> UpdatingItem {</div>
<div class="line"><a id="l05160" name="l05160"></a><span class="lineno"> 5160</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l05161" name="l05161"></a><span class="lineno"> 5161</span>  <span class="keyword">explicit</span> RememberedSetUpdatingItem(Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, MutablePageMetadata* chunk)</div>
<div class="line"><a id="l05162" name="l05162"></a><span class="lineno"> 5162</span>      : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>),</div>
<div class="line"><a id="l05163" name="l05163"></a><span class="lineno"> 5163</span>        marking_state_(heap_-&gt;non_atomic_marking_state()),</div>
<div class="line"><a id="l05164" name="l05164"></a><span class="lineno"> 5164</span>        chunk_(chunk),</div>
<div class="line"><a id="l05165" name="l05165"></a><span class="lineno"> 5165</span>        record_old_to_shared_slots_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>-&gt;isolate()-&gt;has_shared_space() &amp;&amp;</div>
<div class="line"><a id="l05166" name="l05166"></a><span class="lineno"> 5166</span>                                    !chunk-&gt;Chunk()-&gt;InWritableSharedSpace()) {}</div>
<div class="line"><a id="l05167" name="l05167"></a><span class="lineno"> 5167</span>  ~RememberedSetUpdatingItem() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l05168" name="l05168"></a><span class="lineno"> 5168</span> </div>
<div class="line"><a id="l05169" name="l05169"></a><span class="lineno"> 5169</span>  <span class="keywordtype">void</span> Process()<span class="keyword"> override </span>{</div>
<div class="line"><a id="l05170" name="l05170"></a><span class="lineno"> 5170</span>    <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>),</div>
<div class="line"><a id="l05171" name="l05171"></a><span class="lineno"> 5171</span>                 <span class="stringliteral">&quot;RememberedSetUpdatingItem::Process&quot;</span>);</div>
<div class="line"><a id="l05172" name="l05172"></a><span class="lineno"> 5172</span>    UpdateUntypedPointers();</div>
<div class="line"><a id="l05173" name="l05173"></a><span class="lineno"> 5173</span>    UpdateTypedPointers();</div>
<div class="line"><a id="l05174" name="l05174"></a><span class="lineno"> 5174</span>  }</div>
<div class="line"><a id="l05175" name="l05175"></a><span class="lineno"> 5175</span> </div>
<div class="line"><a id="l05176" name="l05176"></a><span class="lineno"> 5176</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l05177" name="l05177"></a><span class="lineno"> 5177</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l05178" name="l05178"></a><span class="lineno"> 5178</span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> CheckSlotForOldToSharedUntyped(PtrComprCageBase cage_base,</div>
<div class="line"><a id="l05179" name="l05179"></a><span class="lineno"> 5179</span>                                             MutablePageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>,</div>
<div class="line"><a id="l05180" name="l05180"></a><span class="lineno"> 5180</span>                                             TSlot slot) {</div>
<div class="line"><a id="l05181" name="l05181"></a><span class="lineno"> 5181</span>    Tagged&lt;HeapObject&gt; heap_object;</div>
<div class="line"><a id="l05182" name="l05182"></a><span class="lineno"> 5182</span> </div>
<div class="line"><a id="l05183" name="l05183"></a><span class="lineno"> 5183</span>    <span class="keywordflow">if</span> (!slot.load(cage_base).GetHeapObject(&amp;heap_object)) {</div>
<div class="line"><a id="l05184" name="l05184"></a><span class="lineno"> 5184</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05185" name="l05185"></a><span class="lineno"> 5185</span>    }</div>
<div class="line"><a id="l05186" name="l05186"></a><span class="lineno"> 5186</span> </div>
<div class="line"><a id="l05187" name="l05187"></a><span class="lineno"> 5187</span>    <span class="keywordflow">if</span> (HeapLayout::InWritableSharedSpace(heap_object)) {</div>
<div class="line"><a id="l05188" name="l05188"></a><span class="lineno"> 5188</span>      RememberedSet&lt;OLD_TO_SHARED&gt;::Insert&lt;AccessMode::NON_ATOMIC&gt;(</div>
<div class="line"><a id="l05189" name="l05189"></a><span class="lineno"> 5189</span>          <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Offset(slot.address()));</div>
<div class="line"><a id="l05190" name="l05190"></a><span class="lineno"> 5190</span>    }</div>
<div class="line"><a id="l05191" name="l05191"></a><span class="lineno"> 5191</span>  }</div>
<div class="line"><a id="l05192" name="l05192"></a><span class="lineno"> 5192</span> </div>
<div class="line"><a id="l05193" name="l05193"></a><span class="lineno"> 5193</span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> CheckSlotForOldToSharedTyped(</div>
<div class="line"><a id="l05194" name="l05194"></a><span class="lineno"> 5194</span>      MutablePageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, SlotType slot_type, Address addr,</div>
<div class="line"><a id="l05195" name="l05195"></a><span class="lineno"> 5195</span>      WritableJitAllocation&amp; jit_allocation) {</div>
<div class="line"><a id="l05196" name="l05196"></a><span class="lineno"> 5196</span>    Tagged&lt;HeapObject&gt; heap_object =</div>
<div class="line"><a id="l05197" name="l05197"></a><span class="lineno"> 5197</span>        UpdateTypedSlotHelper::GetTargetObject(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;heap(), slot_type, addr);</div>
<div class="line"><a id="l05198" name="l05198"></a><span class="lineno"> 5198</span> </div>
<div class="line"><a id="l05199" name="l05199"></a><span class="lineno"> 5199</span><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a id="l05200" name="l05200"></a><span class="lineno"> 5200</span>    UpdateTypedSlotHelper::UpdateTypedSlot(</div>
<div class="line"><a id="l05201" name="l05201"></a><span class="lineno"> 5201</span>        jit_allocation, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;heap(), slot_type, addr,</div>
<div class="line"><a id="l05202" name="l05202"></a><span class="lineno"> 5202</span>        [heap_object](FullMaybeObjectSlot slot) {</div>
<div class="line"><a id="l05203" name="l05203"></a><span class="lineno"> 5203</span>          DCHECK_EQ((*slot).GetHeapObjectAssumeStrong(), heap_object);</div>
<div class="line"><a id="l05204" name="l05204"></a><span class="lineno"> 5204</span>          return KEEP_SLOT;</div>
<div class="line"><a id="l05205" name="l05205"></a><span class="lineno"> 5205</span>        });</div>
<div class="line"><a id="l05206" name="l05206"></a><span class="lineno"> 5206</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l05207" name="l05207"></a><span class="lineno"> 5207</span> </div>
<div class="line"><a id="l05208" name="l05208"></a><span class="lineno"> 5208</span>    <span class="keywordflow">if</span> (HeapLayout::InWritableSharedSpace(heap_object)) {</div>
<div class="line"><a id="l05209" name="l05209"></a><span class="lineno"> 5209</span>      <span class="keyword">const</span> uintptr_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Offset(addr);</div>
<div class="line"><a id="l05210" name="l05210"></a><span class="lineno"> 5210</span>      <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>, <span class="keyword">static_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(TypedSlotSet::kMaxOffset));</div>
<div class="line"><a id="l05211" name="l05211"></a><span class="lineno"> 5211</span>      RememberedSet&lt;OLD_TO_SHARED&gt;::InsertTyped(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, slot_type,</div>
<div class="line"><a id="l05212" name="l05212"></a><span class="lineno"> 5212</span>                                                <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>));</div>
<div class="line"><a id="l05213" name="l05213"></a><span class="lineno"> 5213</span>    }</div>
<div class="line"><a id="l05214" name="l05214"></a><span class="lineno"> 5214</span>  }</div>
<div class="line"><a id="l05215" name="l05215"></a><span class="lineno"> 5215</span> </div>
<div class="line"><a id="l05216" name="l05216"></a><span class="lineno"> 5216</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> TSlot&gt;</div>
<div class="line"><a id="l05217" name="l05217"></a><span class="lineno"> 5217</span>  <span class="keyword">inline</span> <span class="keywordtype">void</span> CheckAndUpdateOldToNewSlot(TSlot slot,</div>
<div class="line"><a id="l05218" name="l05218"></a><span class="lineno"> 5218</span>                                         <span class="keyword">const</span> PtrComprCageBase cage_base) {</div>
<div class="line"><a id="l05219" name="l05219"></a><span class="lineno"> 5219</span>    <span class="keyword">static_assert</span>(</div>
<div class="line"><a id="l05220" name="l05220"></a><span class="lineno"> 5220</span>        std::is_same_v&lt;TSlot, FullMaybeObjectSlot&gt; ||</div>
<div class="line"><a id="l05221" name="l05221"></a><span class="lineno"> 5221</span>            std::is_same_v&lt;TSlot, MaybeObjectSlot&gt;,</div>
<div class="line"><a id="l05222" name="l05222"></a><span class="lineno"> 5222</span>        <span class="stringliteral">&quot;Only FullMaybeObjectSlot and MaybeObjectSlot are expected here&quot;</span>);</div>
<div class="line"><a id="l05223" name="l05223"></a><span class="lineno"> 5223</span>    Tagged&lt;HeapObject&gt; heap_object;</div>
<div class="line"><a id="l05224" name="l05224"></a><span class="lineno"> 5224</span>    <span class="keywordflow">if</span> (!(*slot).GetHeapObject(&amp;heap_object)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05225" name="l05225"></a><span class="lineno"> 5225</span>    <span class="keywordflow">if</span> (!HeapLayout::InYoungGeneration(heap_object)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05226" name="l05226"></a><span class="lineno"> 5226</span> </div>
<div class="line"><a id="l05227" name="l05227"></a><span class="lineno"> 5227</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a id="l05228" name="l05228"></a><span class="lineno"> 5228</span>      <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms &amp;&amp; !Heap::IsLargeObject(heap_object),</div>
<div class="line"><a id="l05229" name="l05229"></a><span class="lineno"> 5229</span>                     Heap::InToPage(heap_object));</div>
<div class="line"><a id="l05230" name="l05230"></a><span class="lineno"> 5230</span>      <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms || Heap::IsLargeObject(heap_object),</div>
<div class="line"><a id="l05231" name="l05231"></a><span class="lineno"> 5231</span>                     Heap::InFromPage(heap_object));</div>
<div class="line"><a id="l05232" name="l05232"></a><span class="lineno"> 5232</span>    }</div>
<div class="line"><a id="l05233" name="l05233"></a><span class="lineno"> 5233</span> </div>
<div class="line"><a id="l05234" name="l05234"></a><span class="lineno"> 5234</span>    <span class="comment">// OLD_TO_NEW slots are recorded in dead memory, so they might point to</span></div>
<div class="line"><a id="l05235" name="l05235"></a><span class="lineno"> 5235</span>    <span class="comment">// dead objects.</span></div>
<div class="line"><a id="l05236" name="l05236"></a><span class="lineno"> 5236</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!heap_object-&gt;map_word(kRelaxedLoad).IsForwardingAddress(),</div>
<div class="line"><a id="l05237" name="l05237"></a><span class="lineno"> 5237</span>                   !marking_state_-&gt;IsMarked(heap_object));</div>
<div class="line"><a id="l05238" name="l05238"></a><span class="lineno"> 5238</span>    UpdateSlot(cage_base, slot);</div>
<div class="line"><a id="l05239" name="l05239"></a><span class="lineno"> 5239</span>  }</div>
<div class="line"><a id="l05240" name="l05240"></a><span class="lineno"> 5240</span> </div>
<div class="line"><a id="l05241" name="l05241"></a><span class="lineno"> 5241</span>  <span class="keywordtype">void</span> UpdateUntypedPointers() {</div>
<div class="line"><a id="l05242" name="l05242"></a><span class="lineno"> 5242</span>    UpdateUntypedOldToNewPointers&lt;OLD_TO_NEW&gt;();</div>
<div class="line"><a id="l05243" name="l05243"></a><span class="lineno"> 5243</span>    UpdateUntypedOldToNewPointers&lt;OLD_TO_NEW_BACKGROUND&gt;();</div>
<div class="line"><a id="l05244" name="l05244"></a><span class="lineno"> 5244</span>    UpdateUntypedOldToOldPointers();</div>
<div class="line"><a id="l05245" name="l05245"></a><span class="lineno"> 5245</span>    UpdateUntypedTrustedToCodePointers();</div>
<div class="line"><a id="l05246" name="l05246"></a><span class="lineno"> 5246</span>    UpdateUntypedTrustedToTrustedPointers();</div>
<div class="line"><a id="l05247" name="l05247"></a><span class="lineno"> 5247</span>  }</div>
<div class="line"><a id="l05248" name="l05248"></a><span class="lineno"> 5248</span> </div>
<div class="line"><a id="l05249" name="l05249"></a><span class="lineno"> 5249</span>  <span class="keyword">template</span> &lt;RememberedSetType old_to_new_type&gt;</div>
<div class="line"><a id="l05250" name="l05250"></a><span class="lineno"> 5250</span>  <span class="keywordtype">void</span> UpdateUntypedOldToNewPointers() {</div>
<div class="line"><a id="l05251" name="l05251"></a><span class="lineno"> 5251</span>    <span class="keywordflow">if</span> (!chunk_-&gt;slot_set&lt;old_to_new_type, AccessMode::NON_ATOMIC&gt;()) {</div>
<div class="line"><a id="l05252" name="l05252"></a><span class="lineno"> 5252</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05253" name="l05253"></a><span class="lineno"> 5253</span>    }</div>
<div class="line"><a id="l05254" name="l05254"></a><span class="lineno"> 5254</span> </div>
<div class="line"><a id="l05255" name="l05255"></a><span class="lineno"> 5255</span>    <span class="keyword">const</span> PtrComprCageBase cage_base = heap_-&gt;isolate();</div>
<div class="line"><a id="l05256" name="l05256"></a><span class="lineno"> 5256</span>    <span class="comment">// Marking bits are cleared already when the page is already swept. This</span></div>
<div class="line"><a id="l05257" name="l05257"></a><span class="lineno"> 5257</span>    <span class="comment">// is fine since in that case the sweeper has already removed dead invalid</span></div>
<div class="line"><a id="l05258" name="l05258"></a><span class="lineno"> 5258</span>    <span class="comment">// objects as well.</span></div>
<div class="line"><a id="l05259" name="l05259"></a><span class="lineno"> 5259</span>    RememberedSet&lt;old_to_new_type&gt;::Iterate(</div>
<div class="line"><a id="l05260" name="l05260"></a><span class="lineno"> 5260</span>        chunk_,</div>
<div class="line"><a id="l05261" name="l05261"></a><span class="lineno"> 5261</span>        [<span class="keyword">this</span>, cage_base](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05262" name="l05262"></a><span class="lineno"> 5262</span>          CheckAndUpdateOldToNewSlot(slot, cage_base);</div>
<div class="line"><a id="l05263" name="l05263"></a><span class="lineno"> 5263</span>          <span class="comment">// A new space string might have been promoted into the shared heap</span></div>
<div class="line"><a id="l05264" name="l05264"></a><span class="lineno"> 5264</span>          <span class="comment">// during GC.</span></div>
<div class="line"><a id="l05265" name="l05265"></a><span class="lineno"> 5265</span>          <span class="keywordflow">if</span> (record_old_to_shared_slots_) {</div>
<div class="line"><a id="l05266" name="l05266"></a><span class="lineno"> 5266</span>            CheckSlotForOldToSharedUntyped(cage_base, chunk_, slot);</div>
<div class="line"><a id="l05267" name="l05267"></a><span class="lineno"> 5267</span>          }</div>
<div class="line"><a id="l05268" name="l05268"></a><span class="lineno"> 5268</span>          <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05269" name="l05269"></a><span class="lineno"> 5269</span>          <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05270" name="l05270"></a><span class="lineno"> 5270</span>          <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05271" name="l05271"></a><span class="lineno"> 5271</span>        },</div>
<div class="line"><a id="l05272" name="l05272"></a><span class="lineno"> 5272</span>        SlotSet::KEEP_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05273" name="l05273"></a><span class="lineno"> 5273</span> </div>
<div class="line"><a id="l05274" name="l05274"></a><span class="lineno"> 5274</span>    <span class="comment">// Full GCs will empty new space, so [old_to_new_type] is empty.</span></div>
<div class="line"><a id="l05275" name="l05275"></a><span class="lineno"> 5275</span>    chunk_-&gt;ReleaseSlotSet(old_to_new_type);</div>
<div class="line"><a id="l05276" name="l05276"></a><span class="lineno"> 5276</span>  }</div>
<div class="line"><a id="l05277" name="l05277"></a><span class="lineno"> 5277</span> </div>
<div class="line"><a id="l05278" name="l05278"></a><span class="lineno"> 5278</span>  <span class="keywordtype">void</span> UpdateUntypedOldToOldPointers() {</div>
<div class="line"><a id="l05279" name="l05279"></a><span class="lineno"> 5279</span>    <span class="keywordflow">if</span> (!chunk_-&gt;slot_set&lt;OLD_TO_OLD, AccessMode::NON_ATOMIC&gt;()) {</div>
<div class="line"><a id="l05280" name="l05280"></a><span class="lineno"> 5280</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05281" name="l05281"></a><span class="lineno"> 5281</span>    }</div>
<div class="line"><a id="l05282" name="l05282"></a><span class="lineno"> 5282</span> </div>
<div class="line"><a id="l05283" name="l05283"></a><span class="lineno"> 5283</span>    <span class="keyword">const</span> PtrComprCageBase cage_base = heap_-&gt;isolate();</div>
<div class="line"><a id="l05284" name="l05284"></a><span class="lineno"> 5284</span>    <span class="keywordflow">if</span> (chunk_-&gt;Chunk()-&gt;executable()) {</div>
<div class="line"><a id="l05285" name="l05285"></a><span class="lineno"> 5285</span>      <span class="comment">// When updating pointer in an InstructionStream (in particular, the</span></div>
<div class="line"><a id="l05286" name="l05286"></a><span class="lineno"> 5286</span>      <span class="comment">// pointer to relocation info), we need to use WriteProtectedSlots that</span></div>
<div class="line"><a id="l05287" name="l05287"></a><span class="lineno"> 5287</span>      <span class="comment">// ensure that the code page is unlocked.</span></div>
<div class="line"><a id="l05288" name="l05288"></a><span class="lineno"> 5288</span>      WritableJitPage jit_page(chunk_-&gt;area_start(), chunk_-&gt;area_size());</div>
<div class="line"><a id="l05289" name="l05289"></a><span class="lineno"> 5289</span>      RememberedSet&lt;OLD_TO_OLD&gt;::Iterate(</div>
<div class="line"><a id="l05290" name="l05290"></a><span class="lineno"> 5290</span>          chunk_,</div>
<div class="line"><a id="l05291" name="l05291"></a><span class="lineno"> 5291</span>          [&amp;](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05292" name="l05292"></a><span class="lineno"> 5292</span>            WritableJitAllocation jit_allocation =</div>
<div class="line"><a id="l05293" name="l05293"></a><span class="lineno"> 5293</span>                jit_page.LookupAllocationContaining(slot.address());</div>
<div class="line"><a id="l05294" name="l05294"></a><span class="lineno"> 5294</span>            UpdateSlot(cage_base, WriteProtectedSlot&lt;ObjectSlot&gt;(</div>
<div class="line"><a id="l05295" name="l05295"></a><span class="lineno"> 5295</span>                                      jit_allocation, slot.address()));</div>
<div class="line"><a id="l05296" name="l05296"></a><span class="lineno"> 5296</span>            <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05297" name="l05297"></a><span class="lineno"> 5297</span>            <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05298" name="l05298"></a><span class="lineno"> 5298</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05299" name="l05299"></a><span class="lineno"> 5299</span>          },</div>
<div class="line"><a id="l05300" name="l05300"></a><span class="lineno"> 5300</span>          SlotSet::KEEP_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05301" name="l05301"></a><span class="lineno"> 5301</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05302" name="l05302"></a><span class="lineno"> 5302</span>      RememberedSet&lt;OLD_TO_OLD&gt;::Iterate(</div>
<div class="line"><a id="l05303" name="l05303"></a><span class="lineno"> 5303</span>          chunk_,</div>
<div class="line"><a id="l05304" name="l05304"></a><span class="lineno"> 5304</span>          [&amp;](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05305" name="l05305"></a><span class="lineno"> 5305</span>            UpdateSlot(cage_base, slot);</div>
<div class="line"><a id="l05306" name="l05306"></a><span class="lineno"> 5306</span>            <span class="comment">// A string might have been promoted into the shared heap during</span></div>
<div class="line"><a id="l05307" name="l05307"></a><span class="lineno"> 5307</span>            <span class="comment">// GC.</span></div>
<div class="line"><a id="l05308" name="l05308"></a><span class="lineno"> 5308</span>            <span class="keywordflow">if</span> (record_old_to_shared_slots_) {</div>
<div class="line"><a id="l05309" name="l05309"></a><span class="lineno"> 5309</span>              CheckSlotForOldToSharedUntyped(cage_base, chunk_, slot);</div>
<div class="line"><a id="l05310" name="l05310"></a><span class="lineno"> 5310</span>            }</div>
<div class="line"><a id="l05311" name="l05311"></a><span class="lineno"> 5311</span>            <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05312" name="l05312"></a><span class="lineno"> 5312</span>            <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05313" name="l05313"></a><span class="lineno"> 5313</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05314" name="l05314"></a><span class="lineno"> 5314</span>          },</div>
<div class="line"><a id="l05315" name="l05315"></a><span class="lineno"> 5315</span>          SlotSet::KEEP_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05316" name="l05316"></a><span class="lineno"> 5316</span>    }</div>
<div class="line"><a id="l05317" name="l05317"></a><span class="lineno"> 5317</span> </div>
<div class="line"><a id="l05318" name="l05318"></a><span class="lineno"> 5318</span>    chunk_-&gt;ReleaseSlotSet(OLD_TO_OLD);</div>
<div class="line"><a id="l05319" name="l05319"></a><span class="lineno"> 5319</span>  }</div>
<div class="line"><a id="l05320" name="l05320"></a><span class="lineno"> 5320</span> </div>
<div class="line"><a id="l05321" name="l05321"></a><span class="lineno"> 5321</span>  <span class="keywordtype">void</span> UpdateUntypedTrustedToCodePointers() {</div>
<div class="line"><a id="l05322" name="l05322"></a><span class="lineno"> 5322</span>    <span class="keywordflow">if</span> (!chunk_-&gt;slot_set&lt;TRUSTED_TO_CODE, AccessMode::NON_ATOMIC&gt;()) {</div>
<div class="line"><a id="l05323" name="l05323"></a><span class="lineno"> 5323</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05324" name="l05324"></a><span class="lineno"> 5324</span>    }</div>
<div class="line"><a id="l05325" name="l05325"></a><span class="lineno"> 5325</span> </div>
<div class="line"><a id="l05326" name="l05326"></a><span class="lineno"> 5326</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l05327" name="l05327"></a><span class="lineno"> 5327</span>    <span class="comment">// When the sandbox is enabled, we must not process the TRUSTED_TO_CODE</span></div>
<div class="line"><a id="l05328" name="l05328"></a><span class="lineno"> 5328</span>    <span class="comment">// remembered set on any chunk that is located inside the sandbox (in which</span></div>
<div class="line"><a id="l05329" name="l05329"></a><span class="lineno"> 5329</span>    <span class="comment">// case the set should be unused). This is because an attacker could either</span></div>
<div class="line"><a id="l05330" name="l05330"></a><span class="lineno"> 5330</span>    <span class="comment">// directly modify the TRUSTED_TO_CODE set on such a chunk, or trick the GC</span></div>
<div class="line"><a id="l05331" name="l05331"></a><span class="lineno"> 5331</span>    <span class="comment">// into populating it with invalid pointers, both of which may lead to</span></div>
<div class="line"><a id="l05332" name="l05332"></a><span class="lineno"> 5332</span>    <span class="comment">// memory corruption inside the (trusted) code space here.</span></div>
<div class="line"><a id="l05333" name="l05333"></a><span class="lineno"> 5333</span>    <a class="code hl_define" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(!<a class="code hl_function" href="namespacev8_1_1internal.html#ae1bbc2f3789eff14d73010adcad41a41">InsideSandbox</a>(chunk_-&gt;ChunkAddress()));</div>
<div class="line"><a id="l05334" name="l05334"></a><span class="lineno"> 5334</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l05335" name="l05335"></a><span class="lineno"> 5335</span> </div>
<div class="line"><a id="l05336" name="l05336"></a><span class="lineno"> 5336</span>    <span class="keyword">const</span> PtrComprCageBase cage_base = heap_-&gt;isolate();</div>
<div class="line"><a id="l05337" name="l05337"></a><span class="lineno"> 5337</span><span class="preprocessor">#ifdef V8_EXTERNAL_CODE_SPACE</span></div>
<div class="line"><a id="l05338" name="l05338"></a><span class="lineno"> 5338</span>    <span class="keyword">const</span> PtrComprCageBase code_cage_base(heap_-&gt;isolate()-&gt;code_cage_base());</div>
<div class="line"><a id="l05339" name="l05339"></a><span class="lineno"> 5339</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l05340" name="l05340"></a><span class="lineno"> 5340</span>    <span class="keyword">const</span> PtrComprCageBase code_cage_base = cage_base;</div>
<div class="line"><a id="l05341" name="l05341"></a><span class="lineno"> 5341</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l05342" name="l05342"></a><span class="lineno"> 5342</span>    RememberedSet&lt;TRUSTED_TO_CODE&gt;::Iterate(</div>
<div class="line"><a id="l05343" name="l05343"></a><span class="lineno"> 5343</span>        chunk_,</div>
<div class="line"><a id="l05344" name="l05344"></a><span class="lineno"> 5344</span>        [=](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05345" name="l05345"></a><span class="lineno"> 5345</span>          Tagged&lt;HeapObject&gt; host = HeapObject::FromAddress(</div>
<div class="line"><a id="l05346" name="l05346"></a><span class="lineno"> 5346</span>              slot.address() - Code::kInstructionStreamOffset);</div>
<div class="line"><a id="l05347" name="l05347"></a><span class="lineno"> 5347</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsCode(host, cage_base));</div>
<div class="line"><a id="l05348" name="l05348"></a><span class="lineno"> 5348</span>          UpdateStrongCodeSlot(host, cage_base, code_cage_base,</div>
<div class="line"><a id="l05349" name="l05349"></a><span class="lineno"> 5349</span>                               <a class="code hl_typedef" href="namespacev8_1_1internal.html#a5ded0ca969c512d8bdfe748d88b54849">InstructionStreamSlot</a>(slot.address()));</div>
<div class="line"><a id="l05350" name="l05350"></a><span class="lineno"> 5350</span>          <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05351" name="l05351"></a><span class="lineno"> 5351</span>          <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05352" name="l05352"></a><span class="lineno"> 5352</span>          <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05353" name="l05353"></a><span class="lineno"> 5353</span>        },</div>
<div class="line"><a id="l05354" name="l05354"></a><span class="lineno"> 5354</span>        SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05355" name="l05355"></a><span class="lineno"> 5355</span> </div>
<div class="line"><a id="l05356" name="l05356"></a><span class="lineno"> 5356</span>    chunk_-&gt;ReleaseSlotSet(TRUSTED_TO_CODE);</div>
<div class="line"><a id="l05357" name="l05357"></a><span class="lineno"> 5357</span>  }</div>
<div class="line"><a id="l05358" name="l05358"></a><span class="lineno"> 5358</span> </div>
<div class="line"><a id="l05359" name="l05359"></a><span class="lineno"> 5359</span>  <span class="keywordtype">void</span> UpdateUntypedTrustedToTrustedPointers() {</div>
<div class="line"><a id="l05360" name="l05360"></a><span class="lineno"> 5360</span>    <span class="keywordflow">if</span> (!chunk_-&gt;slot_set&lt;TRUSTED_TO_TRUSTED, AccessMode::NON_ATOMIC&gt;()) {</div>
<div class="line"><a id="l05361" name="l05361"></a><span class="lineno"> 5361</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05362" name="l05362"></a><span class="lineno"> 5362</span>    }</div>
<div class="line"><a id="l05363" name="l05363"></a><span class="lineno"> 5363</span> </div>
<div class="line"><a id="l05364" name="l05364"></a><span class="lineno"> 5364</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l05365" name="l05365"></a><span class="lineno"> 5365</span>    <span class="comment">// When the sandbox is enabled, we must not process the TRUSTED_TO_TRUSTED</span></div>
<div class="line"><a id="l05366" name="l05366"></a><span class="lineno"> 5366</span>    <span class="comment">// remembered set on any chunk that is located inside the sandbox (in which</span></div>
<div class="line"><a id="l05367" name="l05367"></a><span class="lineno"> 5367</span>    <span class="comment">// case the set should be unused). This is because an attacker could either</span></div>
<div class="line"><a id="l05368" name="l05368"></a><span class="lineno"> 5368</span>    <span class="comment">// directly modify the TRUSTED_TO_TRUSTED set on such a chunk, or trick the</span></div>
<div class="line"><a id="l05369" name="l05369"></a><span class="lineno"> 5369</span>    <span class="comment">// GC into populating it with invalid pointers, both of which may lead to</span></div>
<div class="line"><a id="l05370" name="l05370"></a><span class="lineno"> 5370</span>    <span class="comment">// memory corruption inside the trusted space here.</span></div>
<div class="line"><a id="l05371" name="l05371"></a><span class="lineno"> 5371</span>    <a class="code hl_define" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(!<a class="code hl_function" href="namespacev8_1_1internal.html#ae1bbc2f3789eff14d73010adcad41a41">InsideSandbox</a>(chunk_-&gt;ChunkAddress()));</div>
<div class="line"><a id="l05372" name="l05372"></a><span class="lineno"> 5372</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l05373" name="l05373"></a><span class="lineno"> 5373</span> </div>
<div class="line"><a id="l05374" name="l05374"></a><span class="lineno"> 5374</span>    <span class="comment">// TODO(saelo) we can probably drop all the cage_bases here once we no</span></div>
<div class="line"><a id="l05375" name="l05375"></a><span class="lineno"> 5375</span>    <span class="comment">// longer need to pass them into our slot implementations.</span></div>
<div class="line"><a id="l05376" name="l05376"></a><span class="lineno"> 5376</span>    <span class="keyword">const</span> PtrComprCageBase unused_cage_base(kNullAddress);</div>
<div class="line"><a id="l05377" name="l05377"></a><span class="lineno"> 5377</span> </div>
<div class="line"><a id="l05378" name="l05378"></a><span class="lineno"> 5378</span>    <span class="keywordflow">if</span> (chunk_-&gt;Chunk()-&gt;executable()) {</div>
<div class="line"><a id="l05379" name="l05379"></a><span class="lineno"> 5379</span>      <span class="comment">// When updating the InstructionStream -&gt; Code pointer, we need to use</span></div>
<div class="line"><a id="l05380" name="l05380"></a><span class="lineno"> 5380</span>      <span class="comment">// WriteProtectedSlots that ensure that the code page is unlocked.</span></div>
<div class="line"><a id="l05381" name="l05381"></a><span class="lineno"> 5381</span>      WritableJitPage jit_page(chunk_-&gt;area_start(), chunk_-&gt;area_size());</div>
<div class="line"><a id="l05382" name="l05382"></a><span class="lineno"> 5382</span> </div>
<div class="line"><a id="l05383" name="l05383"></a><span class="lineno"> 5383</span>      RememberedSet&lt;TRUSTED_TO_TRUSTED&gt;::Iterate(</div>
<div class="line"><a id="l05384" name="l05384"></a><span class="lineno"> 5384</span>          chunk_,</div>
<div class="line"><a id="l05385" name="l05385"></a><span class="lineno"> 5385</span>          [&amp;](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05386" name="l05386"></a><span class="lineno"> 5386</span>            WritableJitAllocation jit_allocation =</div>
<div class="line"><a id="l05387" name="l05387"></a><span class="lineno"> 5387</span>                jit_page.LookupAllocationContaining(slot.address());</div>
<div class="line"><a id="l05388" name="l05388"></a><span class="lineno"> 5388</span>            UpdateStrongSlot(unused_cage_base,</div>
<div class="line"><a id="l05389" name="l05389"></a><span class="lineno"> 5389</span>                             WriteProtectedSlot&lt;ProtectedPointerSlot&gt;(</div>
<div class="line"><a id="l05390" name="l05390"></a><span class="lineno"> 5390</span>                                 jit_allocation, slot.address()));</div>
<div class="line"><a id="l05391" name="l05391"></a><span class="lineno"> 5391</span>            <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05392" name="l05392"></a><span class="lineno"> 5392</span>            <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05393" name="l05393"></a><span class="lineno"> 5393</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05394" name="l05394"></a><span class="lineno"> 5394</span>          },</div>
<div class="line"><a id="l05395" name="l05395"></a><span class="lineno"> 5395</span>          SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05396" name="l05396"></a><span class="lineno"> 5396</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05397" name="l05397"></a><span class="lineno"> 5397</span>      RememberedSet&lt;TRUSTED_TO_TRUSTED&gt;::Iterate(</div>
<div class="line"><a id="l05398" name="l05398"></a><span class="lineno"> 5398</span>          chunk_,</div>
<div class="line"><a id="l05399" name="l05399"></a><span class="lineno"> 5399</span>          [&amp;](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05400" name="l05400"></a><span class="lineno"> 5400</span>            UpdateSlot(unused_cage_base,</div>
<div class="line"><a id="l05401" name="l05401"></a><span class="lineno"> 5401</span>                       <a class="code hl_typedef" href="namespacev8_1_1internal.html#a0c4c2447a5acd27dc8a491552ed75cdf">ProtectedMaybeObjectSlot</a>(slot.address()));</div>
<div class="line"><a id="l05402" name="l05402"></a><span class="lineno"> 5402</span>            <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05403" name="l05403"></a><span class="lineno"> 5403</span>            <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05404" name="l05404"></a><span class="lineno"> 5404</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05405" name="l05405"></a><span class="lineno"> 5405</span>          },</div>
<div class="line"><a id="l05406" name="l05406"></a><span class="lineno"> 5406</span>          SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05407" name="l05407"></a><span class="lineno"> 5407</span>    }</div>
<div class="line"><a id="l05408" name="l05408"></a><span class="lineno"> 5408</span> </div>
<div class="line"><a id="l05409" name="l05409"></a><span class="lineno"> 5409</span>    chunk_-&gt;ReleaseSlotSet(TRUSTED_TO_TRUSTED);</div>
<div class="line"><a id="l05410" name="l05410"></a><span class="lineno"> 5410</span>  }</div>
<div class="line"><a id="l05411" name="l05411"></a><span class="lineno"> 5411</span> </div>
<div class="line"><a id="l05412" name="l05412"></a><span class="lineno"> 5412</span>  <span class="keywordtype">void</span> UpdateTypedPointers() {</div>
<div class="line"><a id="l05413" name="l05413"></a><span class="lineno"> 5413</span>    <span class="keywordflow">if</span> (!chunk_-&gt;Chunk()-&gt;executable()) {</div>
<div class="line"><a id="l05414" name="l05414"></a><span class="lineno"> 5414</span>      <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>((chunk_-&gt;typed_slot_set&lt;OLD_TO_NEW&gt;()));</div>
<div class="line"><a id="l05415" name="l05415"></a><span class="lineno"> 5415</span>      <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>((chunk_-&gt;typed_slot_set&lt;OLD_TO_OLD&gt;()));</div>
<div class="line"><a id="l05416" name="l05416"></a><span class="lineno"> 5416</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05417" name="l05417"></a><span class="lineno"> 5417</span>    }</div>
<div class="line"><a id="l05418" name="l05418"></a><span class="lineno"> 5418</span> </div>
<div class="line"><a id="l05419" name="l05419"></a><span class="lineno"> 5419</span>    WritableJitPage jit_page = ThreadIsolation::LookupWritableJitPage(</div>
<div class="line"><a id="l05420" name="l05420"></a><span class="lineno"> 5420</span>        chunk_-&gt;area_start(), chunk_-&gt;area_size());</div>
<div class="line"><a id="l05421" name="l05421"></a><span class="lineno"> 5421</span>    UpdateTypedOldToNewPointers(jit_page);</div>
<div class="line"><a id="l05422" name="l05422"></a><span class="lineno"> 5422</span>    UpdateTypedOldToOldPointers(jit_page);</div>
<div class="line"><a id="l05423" name="l05423"></a><span class="lineno"> 5423</span>  }</div>
<div class="line"><a id="l05424" name="l05424"></a><span class="lineno"> 5424</span> </div>
<div class="line"><a id="l05425" name="l05425"></a><span class="lineno"> 5425</span>  <span class="keywordtype">void</span> UpdateTypedOldToNewPointers(WritableJitPage&amp; jit_page) {</div>
<div class="line"><a id="l05426" name="l05426"></a><span class="lineno"> 5426</span>    <span class="keywordflow">if</span> (chunk_-&gt;typed_slot_set&lt;OLD_TO_NEW, AccessMode::NON_ATOMIC&gt;() == <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l05427" name="l05427"></a><span class="lineno"> 5427</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05428" name="l05428"></a><span class="lineno"> 5428</span>    <span class="keyword">const</span> PtrComprCageBase cage_base = heap_-&gt;isolate();</div>
<div class="line"><a id="l05429" name="l05429"></a><span class="lineno"> 5429</span>    <span class="keyword">const</span> <span class="keyword">auto</span> check_and_update_old_to_new_slot_fn =</div>
<div class="line"><a id="l05430" name="l05430"></a><span class="lineno"> 5430</span>        [<span class="keyword">this</span>, cage_base](FullMaybeObjectSlot slot) {</div>
<div class="line"><a id="l05431" name="l05431"></a><span class="lineno"> 5431</span>          CheckAndUpdateOldToNewSlot(slot, cage_base);</div>
<div class="line"><a id="l05432" name="l05432"></a><span class="lineno"> 5432</span>          <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05433" name="l05433"></a><span class="lineno"> 5433</span>        };</div>
<div class="line"><a id="l05434" name="l05434"></a><span class="lineno"> 5434</span> </div>
<div class="line"><a id="l05435" name="l05435"></a><span class="lineno"> 5435</span>    RememberedSet&lt;OLD_TO_NEW&gt;::IterateTyped(</div>
<div class="line"><a id="l05436" name="l05436"></a><span class="lineno"> 5436</span>        chunk_, [<span class="keyword">this</span>, &amp;check_and_update_old_to_new_slot_fn, &amp;jit_page](</div>
<div class="line"><a id="l05437" name="l05437"></a><span class="lineno"> 5437</span>                    SlotType slot_type, Address slot) {</div>
<div class="line"><a id="l05438" name="l05438"></a><span class="lineno"> 5438</span>          WritableJitAllocation jit_allocation =</div>
<div class="line"><a id="l05439" name="l05439"></a><span class="lineno"> 5439</span>              jit_page.LookupAllocationContaining(slot);</div>
<div class="line"><a id="l05440" name="l05440"></a><span class="lineno"> 5440</span>          UpdateTypedSlotHelper::UpdateTypedSlot(</div>
<div class="line"><a id="l05441" name="l05441"></a><span class="lineno"> 5441</span>              jit_allocation, heap_, slot_type, slot,</div>
<div class="line"><a id="l05442" name="l05442"></a><span class="lineno"> 5442</span>              check_and_update_old_to_new_slot_fn);</div>
<div class="line"><a id="l05443" name="l05443"></a><span class="lineno"> 5443</span>          <span class="comment">// A new space string might have been promoted into the shared heap</span></div>
<div class="line"><a id="l05444" name="l05444"></a><span class="lineno"> 5444</span>          <span class="comment">// during GC.</span></div>
<div class="line"><a id="l05445" name="l05445"></a><span class="lineno"> 5445</span>          <span class="keywordflow">if</span> (record_old_to_shared_slots_) {</div>
<div class="line"><a id="l05446" name="l05446"></a><span class="lineno"> 5446</span>            CheckSlotForOldToSharedTyped(chunk_, slot_type, slot,</div>
<div class="line"><a id="l05447" name="l05447"></a><span class="lineno"> 5447</span>                                         jit_allocation);</div>
<div class="line"><a id="l05448" name="l05448"></a><span class="lineno"> 5448</span>          }</div>
<div class="line"><a id="l05449" name="l05449"></a><span class="lineno"> 5449</span>          <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05450" name="l05450"></a><span class="lineno"> 5450</span>          <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05451" name="l05451"></a><span class="lineno"> 5451</span>          <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05452" name="l05452"></a><span class="lineno"> 5452</span>        });</div>
<div class="line"><a id="l05453" name="l05453"></a><span class="lineno"> 5453</span>    <span class="comment">// Full GCs will empty new space, so OLD_TO_NEW is empty.</span></div>
<div class="line"><a id="l05454" name="l05454"></a><span class="lineno"> 5454</span>    chunk_-&gt;ReleaseTypedSlotSet(OLD_TO_NEW);</div>
<div class="line"><a id="l05455" name="l05455"></a><span class="lineno"> 5455</span>    <span class="comment">// OLD_TO_NEW_BACKGROUND typed slots set should always be empty.</span></div>
<div class="line"><a id="l05456" name="l05456"></a><span class="lineno"> 5456</span>    <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(chunk_-&gt;typed_slot_set&lt;OLD_TO_NEW_BACKGROUND&gt;());</div>
<div class="line"><a id="l05457" name="l05457"></a><span class="lineno"> 5457</span>  }</div>
<div class="line"><a id="l05458" name="l05458"></a><span class="lineno"> 5458</span> </div>
<div class="line"><a id="l05459" name="l05459"></a><span class="lineno"> 5459</span>  <span class="keywordtype">void</span> UpdateTypedOldToOldPointers(WritableJitPage&amp; jit_page) {</div>
<div class="line"><a id="l05460" name="l05460"></a><span class="lineno"> 5460</span>    <span class="keywordflow">if</span> (chunk_-&gt;typed_slot_set&lt;OLD_TO_OLD, AccessMode::NON_ATOMIC&gt;() == <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l05461" name="l05461"></a><span class="lineno"> 5461</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05462" name="l05462"></a><span class="lineno"> 5462</span>    PtrComprCageBase cage_base = heap_-&gt;isolate();</div>
<div class="line"><a id="l05463" name="l05463"></a><span class="lineno"> 5463</span>    RememberedSet&lt;OLD_TO_OLD&gt;::IterateTyped(</div>
<div class="line"><a id="l05464" name="l05464"></a><span class="lineno"> 5464</span>        chunk_, [<span class="keyword">this</span>, cage_base, &amp;jit_page](SlotType slot_type, Address slot) {</div>
<div class="line"><a id="l05465" name="l05465"></a><span class="lineno"> 5465</span>          <span class="comment">// Using UpdateStrongSlot is OK here, because there are no weak</span></div>
<div class="line"><a id="l05466" name="l05466"></a><span class="lineno"> 5466</span>          <span class="comment">// typed slots.</span></div>
<div class="line"><a id="l05467" name="l05467"></a><span class="lineno"> 5467</span>          WritableJitAllocation jit_allocation =</div>
<div class="line"><a id="l05468" name="l05468"></a><span class="lineno"> 5468</span>              jit_page.LookupAllocationContaining(slot);</div>
<div class="line"><a id="l05469" name="l05469"></a><span class="lineno"> 5469</span>          <a class="code hl_enumeration" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759">SlotCallbackResult</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = UpdateTypedSlotHelper::UpdateTypedSlot(</div>
<div class="line"><a id="l05470" name="l05470"></a><span class="lineno"> 5470</span>              jit_allocation, heap_, slot_type, slot,</div>
<div class="line"><a id="l05471" name="l05471"></a><span class="lineno"> 5471</span>              [cage_base](FullMaybeObjectSlot slot) {</div>
<div class="line"><a id="l05472" name="l05472"></a><span class="lineno"> 5472</span>                UpdateStrongSlot(cage_base, slot);</div>
<div class="line"><a id="l05473" name="l05473"></a><span class="lineno"> 5473</span>                <span class="comment">// Always keep slot since all slots are dropped at once after</span></div>
<div class="line"><a id="l05474" name="l05474"></a><span class="lineno"> 5474</span>                <span class="comment">// iteration.</span></div>
<div class="line"><a id="l05475" name="l05475"></a><span class="lineno"> 5475</span>                <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">KEEP_SLOT</a>;</div>
<div class="line"><a id="l05476" name="l05476"></a><span class="lineno"> 5476</span>              });</div>
<div class="line"><a id="l05477" name="l05477"></a><span class="lineno"> 5477</span>          <span class="comment">// A string might have been promoted into the shared heap during GC.</span></div>
<div class="line"><a id="l05478" name="l05478"></a><span class="lineno"> 5478</span>          <span class="keywordflow">if</span> (record_old_to_shared_slots_) {</div>
<div class="line"><a id="l05479" name="l05479"></a><span class="lineno"> 5479</span>            CheckSlotForOldToSharedTyped(chunk_, slot_type, slot,</div>
<div class="line"><a id="l05480" name="l05480"></a><span class="lineno"> 5480</span>                                         jit_allocation);</div>
<div class="line"><a id="l05481" name="l05481"></a><span class="lineno"> 5481</span>          }</div>
<div class="line"><a id="l05482" name="l05482"></a><span class="lineno"> 5482</span>          <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l05483" name="l05483"></a><span class="lineno"> 5483</span>        });</div>
<div class="line"><a id="l05484" name="l05484"></a><span class="lineno"> 5484</span>    chunk_-&gt;ReleaseTypedSlotSet(OLD_TO_OLD);</div>
<div class="line"><a id="l05485" name="l05485"></a><span class="lineno"> 5485</span>  }</div>
<div class="line"><a id="l05486" name="l05486"></a><span class="lineno"> 5486</span> </div>
<div class="line"><a id="l05487" name="l05487"></a><span class="lineno"> 5487</span>  Heap* heap_;</div>
<div class="line"><a id="l05488" name="l05488"></a><span class="lineno"> 5488</span>  NonAtomicMarkingState* marking_state_;</div>
<div class="line"><a id="l05489" name="l05489"></a><span class="lineno"> 5489</span>  MutablePageMetadata* chunk_;</div>
<div class="line"><a id="l05490" name="l05490"></a><span class="lineno"> 5490</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> record_old_to_shared_slots_;</div>
<div class="line"><a id="l05491" name="l05491"></a><span class="lineno"> 5491</span>};</div>
<div class="line"><a id="l05492" name="l05492"></a><span class="lineno"> 5492</span> </div>
<div class="line"><a id="l05493" name="l05493"></a><span class="lineno"> 5493</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l05494" name="l05494"></a><span class="lineno"> 5494</span> </div>
<div class="line"><a id="l05495" name="l05495"></a><span class="lineno"> 5495</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l05496" name="l05496"></a><span class="lineno"> 5496</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> IterateableSpace&gt;</div>
<div class="line"><a id="l05497" name="l05497"></a><span class="lineno"> 5497</span><span class="keywordtype">void</span> CollectRememberedSetUpdatingItems(</div>
<div class="line"><a id="l05498" name="l05498"></a><span class="lineno"> 5498</span>    std::vector&lt;std::unique_ptr&lt;UpdatingItem&gt;&gt;* items,</div>
<div class="line"><a id="l05499" name="l05499"></a><span class="lineno"> 5499</span>    IterateableSpace* space) {</div>
<div class="line"><a id="l05500" name="l05500"></a><span class="lineno"> 5500</span>  <span class="keywordflow">for</span> (MutablePageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> : *space) {</div>
<div class="line"><a id="l05501" name="l05501"></a><span class="lineno"> 5501</span>    <span class="comment">// No need to update pointers on evacuation candidates. Evacuated pages will</span></div>
<div class="line"><a id="l05502" name="l05502"></a><span class="lineno"> 5502</span>    <span class="comment">// be released after this phase.</span></div>
<div class="line"><a id="l05503" name="l05503"></a><span class="lineno"> 5503</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk()-&gt;IsEvacuationCandidate()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05504" name="l05504"></a><span class="lineno"> 5504</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;ContainsAnySlots()) {</div>
<div class="line"><a id="l05505" name="l05505"></a><span class="lineno"> 5505</span>      items-&gt;emplace_back(</div>
<div class="line"><a id="l05506" name="l05506"></a><span class="lineno"> 5506</span>          std::make_unique&lt;RememberedSetUpdatingItem&gt;(space-&gt;heap(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>));</div>
<div class="line"><a id="l05507" name="l05507"></a><span class="lineno"> 5507</span>    }</div>
<div class="line"><a id="l05508" name="l05508"></a><span class="lineno"> 5508</span>  }</div>
<div class="line"><a id="l05509" name="l05509"></a><span class="lineno"> 5509</span>}</div>
<div class="line"><a id="l05510" name="l05510"></a><span class="lineno"> 5510</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l05511" name="l05511"></a><span class="lineno"> 5511</span> </div>
<div class="foldopen" id="foldopen05512" data-start="{" data-end="};">
<div class="line"><a id="l05512" name="l05512"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html"> 5512</a></span><span class="keyword">class </span><a class="code hl_class" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html">EphemeronTableUpdatingItem</a> : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1UpdatingItem.html">UpdatingItem</a> {</div>
<div class="line"><a id="l05513" name="l05513"></a><span class="lineno"> 5513</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l05514" name="l05514"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ae44eea2b28d64a5c3d98ad6160cd658e"> 5514</a></span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ae44eea2b28d64a5c3d98ad6160cd658e">EvacuationState</a> { <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a88f9df58053cd276e2e63b1d0445420ca520ecade39431601ba732cd4f6de66fa">kRegular</a>, kAborted };</div>
<div class="line"><a id="l05515" name="l05515"></a><span class="lineno"> 5515</span> </div>
<div class="line"><a id="l05516" name="l05516"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#a7e6d6b29e5e1b29d8f9d55450683e545"> 5516</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#a7e6d6b29e5e1b29d8f9d55450683e545">EphemeronTableUpdatingItem</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <a class="code hl_namespace" href="namespaceheap.html">heap</a>) : heap_(<a class="code hl_namespace" href="namespaceheap.html">heap</a>) {}</div>
<div class="line"><a id="l05517" name="l05517"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ac54e0464bf7d4c9057d9a4480f6a6697"> 5517</a></span>  <a class="code hl_function" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ac54e0464bf7d4c9057d9a4480f6a6697">~EphemeronTableUpdatingItem</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l05518" name="l05518"></a><span class="lineno"> 5518</span> </div>
<div class="foldopen" id="foldopen05519" data-start="{" data-end="}">
<div class="line"><a id="l05519" name="l05519"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ac949b97b5c3389e75e56760c50a48f20"> 5519</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ac949b97b5c3389e75e56760c50a48f20">Process</a>()<span class="keyword"> override </span>{</div>
<div class="line"><a id="l05520" name="l05520"></a><span class="lineno"> 5520</span>    <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.gc&quot;</span>),</div>
<div class="line"><a id="l05521" name="l05521"></a><span class="lineno"> 5521</span>                 <span class="stringliteral">&quot;EphemeronTableUpdatingItem::Process&quot;</span>);</div>
<div class="line"><a id="l05522" name="l05522"></a><span class="lineno"> 5522</span>    <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a> cage_base(heap_-&gt;isolate());</div>
<div class="line"><a id="l05523" name="l05523"></a><span class="lineno"> 5523</span> </div>
<div class="line"><a id="l05524" name="l05524"></a><span class="lineno"> 5524</span>    <span class="keyword">auto</span>* table_map = heap_-&gt;ephemeron_remembered_set()-&gt;tables();</div>
<div class="line"><a id="l05525" name="l05525"></a><span class="lineno"> 5525</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = table_map-&gt;begin(); it != table_map-&gt;end(); it++) {</div>
<div class="line"><a id="l05526" name="l05526"></a><span class="lineno"> 5526</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;EphemeronHashTable&gt;</a> table = it-&gt;first;</div>
<div class="line"><a id="l05527" name="l05527"></a><span class="lineno"> 5527</span>      <span class="keyword">auto</span>&amp; indices = it-&gt;second;</div>
<div class="line"><a id="l05528" name="l05528"></a><span class="lineno"> 5528</span>      <span class="keywordflow">if</span> (Cast&lt;HeapObject&gt;(table)</div>
<div class="line"><a id="l05529" name="l05529"></a><span class="lineno"> 5529</span>              -&gt;map_word(kRelaxedLoad)</div>
<div class="line"><a id="l05530" name="l05530"></a><span class="lineno"> 5530</span>              .IsForwardingAddress()) {</div>
<div class="line"><a id="l05531" name="l05531"></a><span class="lineno"> 5531</span>        <span class="comment">// The object has moved, so ignore slots in dead memory here.</span></div>
<div class="line"><a id="l05532" name="l05532"></a><span class="lineno"> 5532</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05533" name="l05533"></a><span class="lineno"> 5533</span>      }</div>
<div class="line"><a id="l05534" name="l05534"></a><span class="lineno"> 5534</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsMap(table-&gt;map(), cage_base));</div>
<div class="line"><a id="l05535" name="l05535"></a><span class="lineno"> 5535</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsEphemeronHashTable(table, cage_base));</div>
<div class="line"><a id="l05536" name="l05536"></a><span class="lineno"> 5536</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iti = indices.begin(); iti != indices.end(); ++iti) {</div>
<div class="line"><a id="l05537" name="l05537"></a><span class="lineno"> 5537</span>        <span class="comment">// EphemeronHashTable keys must be heap objects.</span></div>
<div class="line"><a id="l05538" name="l05538"></a><span class="lineno"> 5538</span>        <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">ObjectSlot</a> key_slot(table-&gt;RawFieldOfElementAt(</div>
<div class="line"><a id="l05539" name="l05539"></a><span class="lineno"> 5539</span>            EphemeronHashTable::EntryToIndex(<a class="code hl_class" href="classv8_1_1internal_1_1InternalIndex.html">InternalIndex</a>(*iti))));</div>
<div class="line"><a id="l05540" name="l05540"></a><span class="lineno"> 5540</span>        <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> key_object = key_slot.<a class="code hl_function" href="classv8_1_1internal_1_1FullObjectSlot.html#a503f3174807124ef8c65227ffb37250d">Relaxed_Load</a>();</div>
<div class="line"><a id="l05541" name="l05541"></a><span class="lineno"> 5541</span>        <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;HeapObject&gt;</a> <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>;</div>
<div class="line"><a id="l05542" name="l05542"></a><span class="lineno"> 5542</span>        <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(key_object.<a class="code hl_function" href="classv8_1_1internal_1_1TaggedImpl.html#a941f4af4ddba9f09e9ff1ca6e4382c36">GetHeapObject</a>(&amp;<a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>));</div>
<div class="line"><a id="l05543" name="l05543"></a><span class="lineno"> 5543</span>        <a class="code hl_class" href="classv8_1_1internal_1_1MapWord.html">MapWord</a> map_word = <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>-&gt;map_word(cage_base, kRelaxedLoad);</div>
<div class="line"><a id="l05544" name="l05544"></a><span class="lineno"> 5544</span>        <span class="keywordflow">if</span> (map_word.<a class="code hl_function" href="classv8_1_1internal_1_1MapWord.html#a9dca2a41d176b2abbd067e956796a439">IsForwardingAddress</a>()) {</div>
<div class="line"><a id="l05545" name="l05545"></a><span class="lineno"> 5545</span>          <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a> = map_word.<a class="code hl_function" href="classv8_1_1internal_1_1MapWord.html#af98460db3cf5e0731cdd50d22b7e4c27">ToForwardingAddress</a>(<a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>);</div>
<div class="line"><a id="l05546" name="l05546"></a><span class="lineno"> 5546</span>          key_slot.<a class="code hl_function" href="classv8_1_1internal_1_1FullObjectSlot.html#a4d62bfa24617f62ac7fbb71110f6b3e9">Relaxed_Store</a>(<a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>);</div>
<div class="line"><a id="l05547" name="l05547"></a><span class="lineno"> 5547</span>        }</div>
<div class="line"><a id="l05548" name="l05548"></a><span class="lineno"> 5548</span>      }</div>
<div class="line"><a id="l05549" name="l05549"></a><span class="lineno"> 5549</span>    }</div>
<div class="line"><a id="l05550" name="l05550"></a><span class="lineno"> 5550</span>    table_map-&gt;clear();</div>
<div class="line"><a id="l05551" name="l05551"></a><span class="lineno"> 5551</span>  }</div>
</div>
<div class="line"><a id="l05552" name="l05552"></a><span class="lineno"> 5552</span> </div>
<div class="line"><a id="l05553" name="l05553"></a><span class="lineno"> 5553</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l05554" name="l05554"></a><span class="lineno"> 5554</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Heap.html">Heap</a>* <span class="keyword">const</span> heap_;</div>
<div class="line"><a id="l05555" name="l05555"></a><span class="lineno"> 5555</span>};</div>
</div>
<div class="line"><a id="l05556" name="l05556"></a><span class="lineno"> 5556</span> </div>
<div class="line"><a id="l05557" name="l05557"></a><span class="lineno"> 5557</span><span class="keywordtype">void</span> MarkCompactCollector::UpdatePointersAfterEvacuation() {</div>
<div class="line"><a id="l05558" name="l05558"></a><span class="lineno"> 5558</span>  <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(), GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS);</div>
<div class="line"><a id="l05559" name="l05559"></a><span class="lineno"> 5559</span> </div>
<div class="line"><a id="l05560" name="l05560"></a><span class="lineno"> 5560</span>  {</div>
<div class="line"><a id="l05561" name="l05561"></a><span class="lineno"> 5561</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l05562" name="l05562"></a><span class="lineno"> 5562</span>             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_TO_NEW_ROOTS);</div>
<div class="line"><a id="l05563" name="l05563"></a><span class="lineno"> 5563</span>    <span class="comment">// The external string table is updated at the end.</span></div>
<div class="line"><a id="l05564" name="l05564"></a><span class="lineno"> 5564</span>    PointersUpdatingVisitor updating_visitor(heap_);</div>
<div class="line"><a id="l05565" name="l05565"></a><span class="lineno"> 5565</span>    heap_-&gt;IterateRootsIncludingClients(</div>
<div class="line"><a id="l05566" name="l05566"></a><span class="lineno"> 5566</span>        &amp;updating_visitor,</div>
<div class="line"><a id="l05567" name="l05567"></a><span class="lineno"> 5567</span>        <a class="code hl_class" href="classv8_1_1base_1_1EnumSet.html">base::EnumSet&lt;SkipRoot&gt;</a>{SkipRoot::kExternalStringTable,</div>
<div class="line"><a id="l05568" name="l05568"></a><span class="lineno"> 5568</span>                                SkipRoot::kConservativeStack,</div>
<div class="line"><a id="l05569" name="l05569"></a><span class="lineno"> 5569</span>                                SkipRoot::kReadOnlyBuiltins});</div>
<div class="line"><a id="l05570" name="l05570"></a><span class="lineno"> 5570</span>  }</div>
<div class="line"><a id="l05571" name="l05571"></a><span class="lineno"> 5571</span> </div>
<div class="line"><a id="l05572" name="l05572"></a><span class="lineno"> 5572</span>  {</div>
<div class="line"><a id="l05573" name="l05573"></a><span class="lineno"> 5573</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l05574" name="l05574"></a><span class="lineno"> 5574</span>             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_CLIENT_HEAPS);</div>
<div class="line"><a id="l05575" name="l05575"></a><span class="lineno"> 5575</span>    UpdatePointersInClientHeaps();</div>
<div class="line"><a id="l05576" name="l05576"></a><span class="lineno"> 5576</span>  }</div>
<div class="line"><a id="l05577" name="l05577"></a><span class="lineno"> 5577</span> </div>
<div class="line"><a id="l05578" name="l05578"></a><span class="lineno"> 5578</span>  {</div>
<div class="line"><a id="l05579" name="l05579"></a><span class="lineno"> 5579</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l05580" name="l05580"></a><span class="lineno"> 5580</span>             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_SLOTS_MAIN);</div>
<div class="line"><a id="l05581" name="l05581"></a><span class="lineno"> 5581</span>    std::vector&lt;std::unique_ptr&lt;UpdatingItem&gt;&gt; updating_items;</div>
<div class="line"><a id="l05582" name="l05582"></a><span class="lineno"> 5582</span> </div>
<div class="line"><a id="l05583" name="l05583"></a><span class="lineno"> 5583</span>    CollectRememberedSetUpdatingItems(&amp;updating_items, heap_-&gt;old_space());</div>
<div class="line"><a id="l05584" name="l05584"></a><span class="lineno"> 5584</span>    CollectRememberedSetUpdatingItems(&amp;updating_items, heap_-&gt;code_space());</div>
<div class="line"><a id="l05585" name="l05585"></a><span class="lineno"> 5585</span>    <span class="keywordflow">if</span> (heap_-&gt;shared_space()) {</div>
<div class="line"><a id="l05586" name="l05586"></a><span class="lineno"> 5586</span>      CollectRememberedSetUpdatingItems(&amp;updating_items, heap_-&gt;shared_space());</div>
<div class="line"><a id="l05587" name="l05587"></a><span class="lineno"> 5587</span>    }</div>
<div class="line"><a id="l05588" name="l05588"></a><span class="lineno"> 5588</span>    CollectRememberedSetUpdatingItems(&amp;updating_items, heap_-&gt;lo_space());</div>
<div class="line"><a id="l05589" name="l05589"></a><span class="lineno"> 5589</span>    CollectRememberedSetUpdatingItems(&amp;updating_items, heap_-&gt;code_lo_space());</div>
<div class="line"><a id="l05590" name="l05590"></a><span class="lineno"> 5590</span>    <span class="keywordflow">if</span> (heap_-&gt;shared_lo_space()) {</div>
<div class="line"><a id="l05591" name="l05591"></a><span class="lineno"> 5591</span>      CollectRememberedSetUpdatingItems(&amp;updating_items,</div>
<div class="line"><a id="l05592" name="l05592"></a><span class="lineno"> 5592</span>                                        heap_-&gt;shared_lo_space());</div>
<div class="line"><a id="l05593" name="l05593"></a><span class="lineno"> 5593</span>    }</div>
<div class="line"><a id="l05594" name="l05594"></a><span class="lineno"> 5594</span>    CollectRememberedSetUpdatingItems(&amp;updating_items, heap_-&gt;trusted_space());</div>
<div class="line"><a id="l05595" name="l05595"></a><span class="lineno"> 5595</span>    CollectRememberedSetUpdatingItems(&amp;updating_items,</div>
<div class="line"><a id="l05596" name="l05596"></a><span class="lineno"> 5596</span>                                      heap_-&gt;trusted_lo_space());</div>
<div class="line"><a id="l05597" name="l05597"></a><span class="lineno"> 5597</span>    <span class="keywordflow">if</span> (heap_-&gt;shared_trusted_space()) {</div>
<div class="line"><a id="l05598" name="l05598"></a><span class="lineno"> 5598</span>      CollectRememberedSetUpdatingItems(&amp;updating_items,</div>
<div class="line"><a id="l05599" name="l05599"></a><span class="lineno"> 5599</span>                                        heap_-&gt;shared_trusted_space());</div>
<div class="line"><a id="l05600" name="l05600"></a><span class="lineno"> 5600</span>    }</div>
<div class="line"><a id="l05601" name="l05601"></a><span class="lineno"> 5601</span>    <span class="keywordflow">if</span> (heap_-&gt;shared_trusted_lo_space()) {</div>
<div class="line"><a id="l05602" name="l05602"></a><span class="lineno"> 5602</span>      CollectRememberedSetUpdatingItems(&amp;updating_items,</div>
<div class="line"><a id="l05603" name="l05603"></a><span class="lineno"> 5603</span>                                        heap_-&gt;shared_trusted_lo_space());</div>
<div class="line"><a id="l05604" name="l05604"></a><span class="lineno"> 5604</span>    }</div>
<div class="line"><a id="l05605" name="l05605"></a><span class="lineno"> 5605</span> </div>
<div class="line"><a id="l05606" name="l05606"></a><span class="lineno"> 5606</span>    <span class="comment">// Iterating to space may require a valid body descriptor for e.g.</span></div>
<div class="line"><a id="l05607" name="l05607"></a><span class="lineno"> 5607</span>    <span class="comment">// WasmStruct which races with updating a slot in Map. Since to space is</span></div>
<div class="line"><a id="l05608" name="l05608"></a><span class="lineno"> 5608</span>    <span class="comment">// empty after a full GC, such races can&#39;t happen.</span></div>
<div class="line"><a id="l05609" name="l05609"></a><span class="lineno"> 5609</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(heap_-&gt;new_space(), heap_-&gt;new_space()-&gt;Size() == 0);</div>
<div class="line"><a id="l05610" name="l05610"></a><span class="lineno"> 5610</span> </div>
<div class="line"><a id="l05611" name="l05611"></a><span class="lineno"> 5611</span>    updating_items.push_back(</div>
<div class="line"><a id="l05612" name="l05612"></a><span class="lineno"> 5612</span>        std::make_unique&lt;EphemeronTableUpdatingItem&gt;(heap_));</div>
<div class="line"><a id="l05613" name="l05613"></a><span class="lineno"> 5613</span> </div>
<div class="line"><a id="l05614" name="l05614"></a><span class="lineno"> 5614</span>    <span class="keyword">auto</span> pointers_updating_job = std::make_unique&lt;PointersUpdatingJob&gt;(</div>
<div class="line"><a id="l05615" name="l05615"></a><span class="lineno"> 5615</span>        heap_-&gt;isolate(), <span class="keyword">this</span>, std::move(updating_items));</div>
<div class="line"><a id="l05616" name="l05616"></a><span class="lineno"> 5616</span>    <a class="code hl_define" href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a>(<span class="stringliteral">&quot;PointersUpdatingJob started&quot;</span>,</div>
<div class="line"><a id="l05617" name="l05617"></a><span class="lineno"> 5617</span>                            pointers_updating_job-&gt;trace_id(),</div>
<div class="line"><a id="l05618" name="l05618"></a><span class="lineno"> 5618</span>                            <a class="code hl_define" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a id="l05619" name="l05619"></a><span class="lineno"> 5619</span>    V8::GetCurrentPlatform()</div>
<div class="line"><a id="l05620" name="l05620"></a><span class="lineno"> 5620</span>        -&gt;CreateJob(v8::TaskPriority::kUserBlocking,</div>
<div class="line"><a id="l05621" name="l05621"></a><span class="lineno"> 5621</span>                    std::move(pointers_updating_job))</div>
<div class="line"><a id="l05622" name="l05622"></a><span class="lineno"> 5622</span>        -&gt;Join();</div>
<div class="line"><a id="l05623" name="l05623"></a><span class="lineno"> 5623</span>  }</div>
<div class="line"><a id="l05624" name="l05624"></a><span class="lineno"> 5624</span> </div>
<div class="line"><a id="l05625" name="l05625"></a><span class="lineno"> 5625</span>  {</div>
<div class="line"><a id="l05626" name="l05626"></a><span class="lineno"> 5626</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l05627" name="l05627"></a><span class="lineno"> 5627</span>             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_WEAK);</div>
<div class="line"><a id="l05628" name="l05628"></a><span class="lineno"> 5628</span>    <span class="comment">// Update pointers from external string table.</span></div>
<div class="line"><a id="l05629" name="l05629"></a><span class="lineno"> 5629</span>    heap_-&gt;UpdateReferencesInExternalStringTable(</div>
<div class="line"><a id="l05630" name="l05630"></a><span class="lineno"> 5630</span>        &amp;UpdateReferenceInExternalStringTableEntry);</div>
<div class="line"><a id="l05631" name="l05631"></a><span class="lineno"> 5631</span> </div>
<div class="line"><a id="l05632" name="l05632"></a><span class="lineno"> 5632</span>    <span class="comment">// Update pointers in string forwarding table.</span></div>
<div class="line"><a id="l05633" name="l05633"></a><span class="lineno"> 5633</span>    <span class="comment">// When GC was performed without a stack, the table was cleared and this</span></div>
<div class="line"><a id="l05634" name="l05634"></a><span class="lineno"> 5634</span>    <span class="comment">// does nothing. In the case this was a GC with stack, we need to update</span></div>
<div class="line"><a id="l05635" name="l05635"></a><span class="lineno"> 5635</span>    <span class="comment">// the entries for evacuated objects.</span></div>
<div class="line"><a id="l05636" name="l05636"></a><span class="lineno"> 5636</span>    <span class="comment">// All entries are objects in shared space (unless</span></div>
<div class="line"><a id="l05637" name="l05637"></a><span class="lineno"> 5637</span>    <span class="comment">// --always-use-forwarding-table), so we only need to update pointers during</span></div>
<div class="line"><a id="l05638" name="l05638"></a><span class="lineno"> 5638</span>    <span class="comment">// a shared GC.</span></div>
<div class="line"><a id="l05639" name="l05639"></a><span class="lineno"> 5639</span>    <span class="keywordflow">if</span> (heap_-&gt;isolate()-&gt;OwnsStringTables() ||</div>
<div class="line"><a id="l05640" name="l05640"></a><span class="lineno"> 5640</span>        V8_UNLIKELY(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.always_use_string_forwarding_table)) {</div>
<div class="line"><a id="l05641" name="l05641"></a><span class="lineno"> 5641</span>      heap_-&gt;isolate()-&gt;string_forwarding_table()-&gt;UpdateAfterFullEvacuation();</div>
<div class="line"><a id="l05642" name="l05642"></a><span class="lineno"> 5642</span>    }</div>
<div class="line"><a id="l05643" name="l05643"></a><span class="lineno"> 5643</span> </div>
<div class="line"><a id="l05644" name="l05644"></a><span class="lineno"> 5644</span>    EvacuationWeakObjectRetainer evacuation_object_retainer;</div>
<div class="line"><a id="l05645" name="l05645"></a><span class="lineno"> 5645</span>    heap_-&gt;ProcessWeakListRoots(&amp;evacuation_object_retainer);</div>
<div class="line"><a id="l05646" name="l05646"></a><span class="lineno"> 5646</span>  }</div>
<div class="line"><a id="l05647" name="l05647"></a><span class="lineno"> 5647</span> </div>
<div class="line"><a id="l05648" name="l05648"></a><span class="lineno"> 5648</span>  {</div>
<div class="line"><a id="l05649" name="l05649"></a><span class="lineno"> 5649</span>    <a class="code hl_define" href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a>(heap_-&gt;tracer(),</div>
<div class="line"><a id="l05650" name="l05650"></a><span class="lineno"> 5650</span>             GCTracer::Scope::MC_EVACUATE_UPDATE_POINTERS_POINTER_TABLES);</div>
<div class="line"><a id="l05651" name="l05651"></a><span class="lineno"> 5651</span>    UpdatePointersInPointerTables();</div>
<div class="line"><a id="l05652" name="l05652"></a><span class="lineno"> 5652</span>  }</div>
<div class="line"><a id="l05653" name="l05653"></a><span class="lineno"> 5653</span> </div>
<div class="line"><a id="l05654" name="l05654"></a><span class="lineno"> 5654</span>  <span class="comment">// Flush the inner_pointer_to_code_cache which may now have stale contents.</span></div>
<div class="line"><a id="l05655" name="l05655"></a><span class="lineno"> 5655</span>  heap_-&gt;isolate()-&gt;inner_pointer_to_code_cache()-&gt;Flush();</div>
<div class="line"><a id="l05656" name="l05656"></a><span class="lineno"> 5656</span>}</div>
<div class="line"><a id="l05657" name="l05657"></a><span class="lineno"> 5657</span> </div>
<div class="line"><a id="l05658" name="l05658"></a><span class="lineno"> 5658</span><span class="keywordtype">void</span> MarkCompactCollector::UpdatePointersInClientHeaps() {</div>
<div class="line"><a id="l05659" name="l05659"></a><span class="lineno"> 5659</span>  Isolate* <span class="keyword">const</span> isolate = heap_-&gt;isolate();</div>
<div class="line"><a id="l05660" name="l05660"></a><span class="lineno"> 5660</span>  <span class="keywordflow">if</span> (!isolate-&gt;is_shared_space_isolate()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l05661" name="l05661"></a><span class="lineno"> 5661</span> </div>
<div class="line"><a id="l05662" name="l05662"></a><span class="lineno"> 5662</span>  isolate-&gt;global_safepoint()-&gt;IterateClientIsolates(</div>
<div class="line"><a id="l05663" name="l05663"></a><span class="lineno"> 5663</span>      [<span class="keyword">this</span>](Isolate* client) { UpdatePointersInClientHeap(client); });</div>
<div class="line"><a id="l05664" name="l05664"></a><span class="lineno"> 5664</span>}</div>
<div class="line"><a id="l05665" name="l05665"></a><span class="lineno"> 5665</span> </div>
<div class="line"><a id="l05666" name="l05666"></a><span class="lineno"> 5666</span><span class="keywordtype">void</span> MarkCompactCollector::UpdatePointersInClientHeap(Isolate* client) {</div>
<div class="line"><a id="l05667" name="l05667"></a><span class="lineno"> 5667</span>  PtrComprCageBase cage_base(client);</div>
<div class="line"><a id="l05668" name="l05668"></a><span class="lineno"> 5668</span>  MemoryChunkIterator chunk_iterator(client-&gt;heap());</div>
<div class="line"><a id="l05669" name="l05669"></a><span class="lineno"> 5669</span> </div>
<div class="line"><a id="l05670" name="l05670"></a><span class="lineno"> 5670</span>  <span class="keywordflow">while</span> (chunk_iterator.HasNext()) {</div>
<div class="line"><a id="l05671" name="l05671"></a><span class="lineno"> 5671</span>    MutablePageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> = chunk_iterator.Next();</div>
<div class="line"><a id="l05672" name="l05672"></a><span class="lineno"> 5672</span>    MemoryChunk* chunk = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk();</div>
<div class="line"><a id="l05673" name="l05673"></a><span class="lineno"> 5673</span> </div>
<div class="line"><a id="l05674" name="l05674"></a><span class="lineno"> 5674</span>    <span class="keyword">const</span> <span class="keyword">auto</span> slot_count = RememberedSet&lt;OLD_TO_SHARED&gt;::Iterate(</div>
<div class="line"><a id="l05675" name="l05675"></a><span class="lineno"> 5675</span>        <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>,</div>
<div class="line"><a id="l05676" name="l05676"></a><span class="lineno"> 5676</span>        [cage_base](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05677" name="l05677"></a><span class="lineno"> 5677</span>          <span class="keywordflow">return</span> UpdateOldToSharedSlot(cage_base, slot);</div>
<div class="line"><a id="l05678" name="l05678"></a><span class="lineno"> 5678</span>        },</div>
<div class="line"><a id="l05679" name="l05679"></a><span class="lineno"> 5679</span>        SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05680" name="l05680"></a><span class="lineno"> 5680</span> </div>
<div class="line"><a id="l05681" name="l05681"></a><span class="lineno"> 5681</span>    <span class="keywordflow">if</span> (slot_count == 0 || chunk-&gt;InYoungGeneration()) {</div>
<div class="line"><a id="l05682" name="l05682"></a><span class="lineno"> 5682</span>      <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;ReleaseSlotSet(OLD_TO_SHARED);</div>
<div class="line"><a id="l05683" name="l05683"></a><span class="lineno"> 5683</span>    }</div>
<div class="line"><a id="l05684" name="l05684"></a><span class="lineno"> 5684</span> </div>
<div class="line"><a id="l05685" name="l05685"></a><span class="lineno"> 5685</span>    <span class="keyword">const</span> PtrComprCageBase unused_cage_base(kNullAddress);</div>
<div class="line"><a id="l05686" name="l05686"></a><span class="lineno"> 5686</span> </div>
<div class="line"><a id="l05687" name="l05687"></a><span class="lineno"> 5687</span>    <span class="keyword">const</span> <span class="keyword">auto</span> protected_slot_count =</div>
<div class="line"><a id="l05688" name="l05688"></a><span class="lineno"> 5688</span>        RememberedSet&lt;TRUSTED_TO_SHARED_TRUSTED&gt;::Iterate(</div>
<div class="line"><a id="l05689" name="l05689"></a><span class="lineno"> 5689</span>            <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>,</div>
<div class="line"><a id="l05690" name="l05690"></a><span class="lineno"> 5690</span>            [unused_cage_base](MaybeObjectSlot slot) {</div>
<div class="line"><a id="l05691" name="l05691"></a><span class="lineno"> 5691</span>              <a class="code hl_typedef" href="namespacev8_1_1internal.html#a4ec7ab128c7d0f56267c22c7ee13d019">ProtectedPointerSlot</a> protected_slot(slot.address());</div>
<div class="line"><a id="l05692" name="l05692"></a><span class="lineno"> 5692</span>              <span class="keywordflow">return</span> UpdateOldToSharedSlot(unused_cage_base, protected_slot);</div>
<div class="line"><a id="l05693" name="l05693"></a><span class="lineno"> 5693</span>            },</div>
<div class="line"><a id="l05694" name="l05694"></a><span class="lineno"> 5694</span>            SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05695" name="l05695"></a><span class="lineno"> 5695</span>    <span class="keywordflow">if</span> (protected_slot_count == 0) {</div>
<div class="line"><a id="l05696" name="l05696"></a><span class="lineno"> 5696</span>      <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;ReleaseSlotSet(TRUSTED_TO_SHARED_TRUSTED);</div>
<div class="line"><a id="l05697" name="l05697"></a><span class="lineno"> 5697</span>    }</div>
<div class="line"><a id="l05698" name="l05698"></a><span class="lineno"> 5698</span> </div>
<div class="line"><a id="l05699" name="l05699"></a><span class="lineno"> 5699</span>    <span class="keywordflow">if</span> (!chunk-&gt;executable()) {</div>
<div class="line"><a id="l05700" name="l05700"></a><span class="lineno"> 5700</span>      <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;typed_slot_set&lt;OLD_TO_SHARED&gt;());</div>
<div class="line"><a id="l05701" name="l05701"></a><span class="lineno"> 5701</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05702" name="l05702"></a><span class="lineno"> 5702</span>    }</div>
<div class="line"><a id="l05703" name="l05703"></a><span class="lineno"> 5703</span> </div>
<div class="line"><a id="l05704" name="l05704"></a><span class="lineno"> 5704</span>    WritableJitPage jit_page = ThreadIsolation::LookupWritableJitPage(</div>
<div class="line"><a id="l05705" name="l05705"></a><span class="lineno"> 5705</span>        <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_size());</div>
<div class="line"><a id="l05706" name="l05706"></a><span class="lineno"> 5706</span>    <span class="keyword">const</span> <span class="keyword">auto</span> typed_slot_count = RememberedSet&lt;OLD_TO_SHARED&gt;::IterateTyped(</div>
<div class="line"><a id="l05707" name="l05707"></a><span class="lineno"> 5707</span>        <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, [<span class="keyword">this</span>, &amp;jit_page](SlotType slot_type, Address slot) {</div>
<div class="line"><a id="l05708" name="l05708"></a><span class="lineno"> 5708</span>          <span class="comment">// Using UpdateStrongSlot is OK here, because there are no weak</span></div>
<div class="line"><a id="l05709" name="l05709"></a><span class="lineno"> 5709</span>          <span class="comment">// typed slots.</span></div>
<div class="line"><a id="l05710" name="l05710"></a><span class="lineno"> 5710</span>          PtrComprCageBase cage_base = heap_-&gt;isolate();</div>
<div class="line"><a id="l05711" name="l05711"></a><span class="lineno"> 5711</span>          WritableJitAllocation jit_allocation =</div>
<div class="line"><a id="l05712" name="l05712"></a><span class="lineno"> 5712</span>              jit_page.LookupAllocationContaining(slot);</div>
<div class="line"><a id="l05713" name="l05713"></a><span class="lineno"> 5713</span>          <span class="keywordflow">return</span> UpdateTypedSlotHelper::UpdateTypedSlot(</div>
<div class="line"><a id="l05714" name="l05714"></a><span class="lineno"> 5714</span>              jit_allocation, heap_, slot_type, slot,</div>
<div class="line"><a id="l05715" name="l05715"></a><span class="lineno"> 5715</span>              [cage_base](FullMaybeObjectSlot slot) {</div>
<div class="line"><a id="l05716" name="l05716"></a><span class="lineno"> 5716</span>                <span class="keywordflow">return</span> UpdateStrongOldToSharedSlot(cage_base, slot);</div>
<div class="line"><a id="l05717" name="l05717"></a><span class="lineno"> 5717</span>              });</div>
<div class="line"><a id="l05718" name="l05718"></a><span class="lineno"> 5718</span>        });</div>
<div class="line"><a id="l05719" name="l05719"></a><span class="lineno"> 5719</span>    <span class="keywordflow">if</span> (typed_slot_count == 0 || chunk-&gt;InYoungGeneration())</div>
<div class="line"><a id="l05720" name="l05720"></a><span class="lineno"> 5720</span>      <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;ReleaseTypedSlotSet(OLD_TO_SHARED);</div>
<div class="line"><a id="l05721" name="l05721"></a><span class="lineno"> 5721</span>  }</div>
<div class="line"><a id="l05722" name="l05722"></a><span class="lineno"> 5722</span>}</div>
<div class="line"><a id="l05723" name="l05723"></a><span class="lineno"> 5723</span> </div>
<div class="line"><a id="l05724" name="l05724"></a><span class="lineno"> 5724</span><span class="keywordtype">void</span> MarkCompactCollector::UpdatePointersInPointerTables() {</div>
<div class="line"><a id="l05725" name="l05725"></a><span class="lineno"> 5725</span><span class="preprocessor">#if defined(V8_ENABLE_SANDBOX) || defined(V8_ENABLE_LEAPTIERING)</span></div>
<div class="line"><a id="l05726" name="l05726"></a><span class="lineno"> 5726</span>  <span class="comment">// Process an entry of a pointer table, returning either the relocated object</span></div>
<div class="line"><a id="l05727" name="l05727"></a><span class="lineno"> 5727</span>  <span class="comment">// or a null pointer if the object wasn&#39;t relocated.</span></div>
<div class="line"><a id="l05728" name="l05728"></a><span class="lineno"> 5728</span>  <span class="keyword">auto</span> process_entry = [&amp;](<a class="code hl_typedef" href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">Address</a> content) -&gt; Tagged&lt;ExposedTrustedObject&gt; {</div>
<div class="line"><a id="l05729" name="l05729"></a><span class="lineno"> 5729</span>    Tagged&lt;HeapObject&gt; heap_obj = Cast&lt;HeapObject&gt;(Tagged&lt;Object&gt;(content));</div>
<div class="line"><a id="l05730" name="l05730"></a><span class="lineno"> 5730</span>    MapWord map_word = heap_obj-&gt;map_word(kRelaxedLoad);</div>
<div class="line"><a id="l05731" name="l05731"></a><span class="lineno"> 5731</span>    <span class="keywordflow">if</span> (!map_word.IsForwardingAddress()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l05732" name="l05732"></a><span class="lineno"> 5732</span>    Tagged&lt;HeapObject&gt; relocated_object =</div>
<div class="line"><a id="l05733" name="l05733"></a><span class="lineno"> 5733</span>        map_word.ToForwardingAddress(heap_obj);</div>
<div class="line"><a id="l05734" name="l05734"></a><span class="lineno"> 5734</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsExposedTrustedObject(relocated_object));</div>
<div class="line"><a id="l05735" name="l05735"></a><span class="lineno"> 5735</span>    <span class="keywordflow">return</span> Cast&lt;ExposedTrustedObject&gt;(relocated_object);</div>
<div class="line"><a id="l05736" name="l05736"></a><span class="lineno"> 5736</span>  };</div>
<div class="line"><a id="l05737" name="l05737"></a><span class="lineno"> 5737</span><span class="preprocessor">#endif  </span><span class="comment">// defined(V8_ENABLE_SANDBOX) || defined(V8_ENABLE_LEAPTIERING)</span></div>
<div class="line"><a id="l05738" name="l05738"></a><span class="lineno"> 5738</span> </div>
<div class="line"><a id="l05739" name="l05739"></a><span class="lineno"> 5739</span><span class="preprocessor">#ifdef V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l05740" name="l05740"></a><span class="lineno"> 5740</span>  TrustedPointerTable* <span class="keyword">const</span> tpt = &amp;heap_-&gt;isolate()-&gt;trusted_pointer_table();</div>
<div class="line"><a id="l05741" name="l05741"></a><span class="lineno"> 5741</span>  tpt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a id="l05742" name="l05742"></a><span class="lineno"> 5742</span>      heap_-&gt;trusted_pointer_space(),</div>
<div class="line"><a id="l05743" name="l05743"></a><span class="lineno"> 5743</span>      [&amp;](TrustedPointerHandle handle, Address content) {</div>
<div class="line"><a id="l05744" name="l05744"></a><span class="lineno"> 5744</span>        Tagged&lt;ExposedTrustedObject&gt; relocated_object = process_entry(content);</div>
<div class="line"><a id="l05745" name="l05745"></a><span class="lineno"> 5745</span>        if (!relocated_object.is_null()) {</div>
<div class="line"><a id="l05746" name="l05746"></a><span class="lineno"> 5746</span>          DCHECK_EQ(handle, relocated_object-&gt;self_indirect_pointer_handle());</div>
<div class="line"><a id="l05747" name="l05747"></a><span class="lineno"> 5747</span>          auto instance_type = relocated_object-&gt;map()-&gt;instance_type();</div>
<div class="line"><a id="l05748" name="l05748"></a><span class="lineno"> 5748</span>          auto tag = IndirectPointerTagFromInstanceType(instance_type);</div>
<div class="line"><a id="l05749" name="l05749"></a><span class="lineno"> 5749</span>          tpt-&gt;Set(handle, relocated_object.ptr(), tag);</div>
<div class="line"><a id="l05750" name="l05750"></a><span class="lineno"> 5750</span>        }</div>
<div class="line"><a id="l05751" name="l05751"></a><span class="lineno"> 5751</span>      });</div>
<div class="line"><a id="l05752" name="l05752"></a><span class="lineno"> 5752</span> </div>
<div class="line"><a id="l05753" name="l05753"></a><span class="lineno"> 5753</span>  TrustedPointerTable* <span class="keyword">const</span> stpt =</div>
<div class="line"><a id="l05754" name="l05754"></a><span class="lineno"> 5754</span>      &amp;heap_-&gt;isolate()-&gt;shared_trusted_pointer_table();</div>
<div class="line"><a id="l05755" name="l05755"></a><span class="lineno"> 5755</span>  stpt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a id="l05756" name="l05756"></a><span class="lineno"> 5756</span>      heap_-&gt;isolate()-&gt;shared_trusted_pointer_space(),</div>
<div class="line"><a id="l05757" name="l05757"></a><span class="lineno"> 5757</span>      [&amp;](TrustedPointerHandle handle, Address content) {</div>
<div class="line"><a id="l05758" name="l05758"></a><span class="lineno"> 5758</span>        Tagged&lt;ExposedTrustedObject&gt; relocated_object = process_entry(content);</div>
<div class="line"><a id="l05759" name="l05759"></a><span class="lineno"> 5759</span>        if (!relocated_object.is_null()) {</div>
<div class="line"><a id="l05760" name="l05760"></a><span class="lineno"> 5760</span>          DCHECK_EQ(handle, relocated_object-&gt;self_indirect_pointer_handle());</div>
<div class="line"><a id="l05761" name="l05761"></a><span class="lineno"> 5761</span>          auto instance_type = relocated_object-&gt;map()-&gt;instance_type();</div>
<div class="line"><a id="l05762" name="l05762"></a><span class="lineno"> 5762</span>          auto tag = IndirectPointerTagFromInstanceType(instance_type);</div>
<div class="line"><a id="l05763" name="l05763"></a><span class="lineno"> 5763</span>          DCHECK(IsSharedTrustedPointerType(tag));</div>
<div class="line"><a id="l05764" name="l05764"></a><span class="lineno"> 5764</span>          stpt-&gt;Set(handle, relocated_object.ptr(), tag);</div>
<div class="line"><a id="l05765" name="l05765"></a><span class="lineno"> 5765</span>        }</div>
<div class="line"><a id="l05766" name="l05766"></a><span class="lineno"> 5766</span>      });</div>
<div class="line"><a id="l05767" name="l05767"></a><span class="lineno"> 5767</span> </div>
<div class="line"><a id="l05768" name="l05768"></a><span class="lineno"> 5768</span>  CodePointerTable* <span class="keyword">const</span> cpt = IsolateGroup::current()-&gt;code_pointer_table();</div>
<div class="line"><a id="l05769" name="l05769"></a><span class="lineno"> 5769</span>  cpt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a id="l05770" name="l05770"></a><span class="lineno"> 5770</span>      heap_-&gt;code_pointer_space(),</div>
<div class="line"><a id="l05771" name="l05771"></a><span class="lineno"> 5771</span>      [&amp;](CodePointerHandle handle, Address content) {</div>
<div class="line"><a id="l05772" name="l05772"></a><span class="lineno"> 5772</span>        Tagged&lt;ExposedTrustedObject&gt; relocated_object = process_entry(content);</div>
<div class="line"><a id="l05773" name="l05773"></a><span class="lineno"> 5773</span>        if (!relocated_object.is_null()) {</div>
<div class="line"><a id="l05774" name="l05774"></a><span class="lineno"> 5774</span>          DCHECK_EQ(handle, relocated_object-&gt;self_indirect_pointer_handle());</div>
<div class="line"><a id="l05775" name="l05775"></a><span class="lineno"> 5775</span>          cpt-&gt;SetCodeObject(handle, relocated_object.address());</div>
<div class="line"><a id="l05776" name="l05776"></a><span class="lineno"> 5776</span>        }</div>
<div class="line"><a id="l05777" name="l05777"></a><span class="lineno"> 5777</span>      });</div>
<div class="line"><a id="l05778" name="l05778"></a><span class="lineno"> 5778</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l05779" name="l05779"></a><span class="lineno"> 5779</span> </div>
<div class="line"><a id="l05780" name="l05780"></a><span class="lineno"> 5780</span><span class="preprocessor">#ifdef V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l05781" name="l05781"></a><span class="lineno"> 5781</span>  JSDispatchTable* <span class="keyword">const</span> jdt = IsolateGroup::current()-&gt;js_dispatch_table();</div>
<div class="line"><a id="l05782" name="l05782"></a><span class="lineno"> 5782</span>  <span class="keyword">const</span> EmbeddedData&amp; embedded_data = EmbeddedData::FromBlob(heap_-&gt;isolate());</div>
<div class="line"><a id="l05783" name="l05783"></a><span class="lineno"> 5783</span>  jdt-&gt;IterateActiveEntriesIn(</div>
<div class="line"><a id="l05784" name="l05784"></a><span class="lineno"> 5784</span>      heap_-&gt;js_dispatch_table_space(), [&amp;](JSDispatchHandle handle) {</div>
<div class="line"><a id="l05785" name="l05785"></a><span class="lineno"> 5785</span>        Address code_address = jdt-&gt;GetCodeAddress(handle);</div>
<div class="line"><a id="l05786" name="l05786"></a><span class="lineno"> 5786</span>        Address entrypoint_address = jdt-&gt;GetEntrypoint(handle);</div>
<div class="line"><a id="l05787" name="l05787"></a><span class="lineno"> 5787</span>        Tagged&lt;TrustedObject&gt; relocated_code = process_entry(code_address);</div>
<div class="line"><a id="l05788" name="l05788"></a><span class="lineno"> 5788</span>        bool code_object_was_relocated = !relocated_code.is_null();</div>
<div class="line"><a id="l05789" name="l05789"></a><span class="lineno"> 5789</span>        Tagged&lt;Code&gt; code = Cast&lt;Code&gt;(code_object_was_relocated</div>
<div class="line"><a id="l05790" name="l05790"></a><span class="lineno"> 5790</span>                                           ? relocated_code</div>
<div class="line"><a id="l05791" name="l05791"></a><span class="lineno"> 5791</span>                                           : Tagged&lt;Object&gt;(code_address));</div>
<div class="line"><a id="l05792" name="l05792"></a><span class="lineno"> 5792</span>        bool instruction_stream_was_relocated =</div>
<div class="line"><a id="l05793" name="l05793"></a><span class="lineno"> 5793</span>            code-&gt;instruction_start() != entrypoint_address;</div>
<div class="line"><a id="l05794" name="l05794"></a><span class="lineno"> 5794</span>        if (code_object_was_relocated || instruction_stream_was_relocated) {</div>
<div class="line"><a id="l05795" name="l05795"></a><span class="lineno"> 5795</span>          Address old_entrypoint = jdt-&gt;GetEntrypoint(handle);</div>
<div class="line"><a id="l05796" name="l05796"></a><span class="lineno"> 5796</span>          <span class="comment">// Ensure tiering trampolines are not overwritten here.</span></div>
<div class="line"><a id="l05797" name="l05797"></a><span class="lineno"> 5797</span>          Address new_entrypoint = ([&amp;]() {</div>
<div class="line"><a id="l05798" name="l05798"></a><span class="lineno"> 5798</span>#define CASE(name, ...)                                                       \</div>
<div class="line"><a id="l05799" name="l05799"></a><span class="lineno"> 5799</span>  if (old_entrypoint == embedded_data.InstructionStartOf(Builtin::k##name)) { \</div>
<div class="line"><a id="l05800" name="l05800"></a><span class="lineno"> 5800</span>    return old_entrypoint;                                                    \</div>
<div class="line"><a id="l05801" name="l05801"></a><span class="lineno"> 5801</span>  }</div>
<div class="line"><a id="l05802" name="l05802"></a><span class="lineno"> 5802</span>            BUILTIN_LIST_BASE_TIERING(CASE)</div>
<div class="line"><a id="l05803" name="l05803"></a><span class="lineno"> 5803</span>#undef CASE</div>
<div class="line"><a id="l05804" name="l05804"></a><span class="lineno"> 5804</span>            return code-&gt;instruction_start();</div>
<div class="line"><a id="l05805" name="l05805"></a><span class="lineno"> 5805</span>          })();</div>
<div class="line"><a id="l05806" name="l05806"></a><span class="lineno"> 5806</span>          jdt-&gt;SetCodeAndEntrypointNoWriteBarrier(handle, code, new_entrypoint);</div>
<div class="line"><a id="l05807" name="l05807"></a><span class="lineno"> 5807</span>          CHECK_IMPLIES(jdt-&gt;IsTieringRequested(handle),</div>
<div class="line"><a id="l05808" name="l05808"></a><span class="lineno"> 5808</span>                        old_entrypoint == new_entrypoint);</div>
<div class="line"><a id="l05809" name="l05809"></a><span class="lineno"> 5809</span>        }</div>
<div class="line"><a id="l05810" name="l05810"></a><span class="lineno"> 5810</span>      });</div>
<div class="line"><a id="l05811" name="l05811"></a><span class="lineno"> 5811</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_LEAPTIERING</span></div>
<div class="line"><a id="l05812" name="l05812"></a><span class="lineno"> 5812</span>}</div>
<div class="line"><a id="l05813" name="l05813"></a><span class="lineno"> 5813</span> </div>
<div class="line"><a id="l05814" name="l05814"></a><span class="lineno"> 5814</span><span class="keywordtype">void</span> MarkCompactCollector::ReportAbortedEvacuationCandidateDueToOOM(</div>
<div class="line"><a id="l05815" name="l05815"></a><span class="lineno"> 5815</span>    Address failed_start, PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>) {</div>
<div class="line"><a id="l05816" name="l05816"></a><span class="lineno"> 5816</span>  base::SpinningMutexGuard guard(&amp;mutex_);</div>
<div class="line"><a id="l05817" name="l05817"></a><span class="lineno"> 5817</span>  aborted_evacuation_candidates_due_to_oom_.push_back(</div>
<div class="line"><a id="l05818" name="l05818"></a><span class="lineno"> 5818</span>      std::make_pair(failed_start, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>));</div>
<div class="line"><a id="l05819" name="l05819"></a><span class="lineno"> 5819</span>}</div>
<div class="line"><a id="l05820" name="l05820"></a><span class="lineno"> 5820</span> </div>
<div class="line"><a id="l05821" name="l05821"></a><span class="lineno"> 5821</span><span class="keywordtype">void</span> MarkCompactCollector::ReportAbortedEvacuationCandidateDueToFlags(</div>
<div class="line"><a id="l05822" name="l05822"></a><span class="lineno"> 5822</span>    Address failed_start, PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>) {</div>
<div class="line"><a id="l05823" name="l05823"></a><span class="lineno"> 5823</span>  MemoryChunk* chunk = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk();</div>
<div class="line"><a id="l05824" name="l05824"></a><span class="lineno"> 5824</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!chunk-&gt;IsFlagSet(MemoryChunk::COMPACTION_WAS_ABORTED));</div>
<div class="line"><a id="l05825" name="l05825"></a><span class="lineno"> 5825</span>  chunk-&gt;SetFlagSlow(MemoryChunk::COMPACTION_WAS_ABORTED);</div>
<div class="line"><a id="l05826" name="l05826"></a><span class="lineno"> 5826</span>  base::SpinningMutexGuard guard(&amp;mutex_);</div>
<div class="line"><a id="l05827" name="l05827"></a><span class="lineno"> 5827</span>  aborted_evacuation_candidates_due_to_flags_.push_back(</div>
<div class="line"><a id="l05828" name="l05828"></a><span class="lineno"> 5828</span>      std::make_pair(failed_start, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>));</div>
<div class="line"><a id="l05829" name="l05829"></a><span class="lineno"> 5829</span>}</div>
<div class="line"><a id="l05830" name="l05830"></a><span class="lineno"> 5830</span> </div>
<div class="line"><a id="l05831" name="l05831"></a><span class="lineno"> 5831</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l05832" name="l05832"></a><span class="lineno"> 5832</span> </div>
<div class="line"><a id="l05833" name="l05833"></a><span class="lineno"> 5833</span><span class="keywordtype">void</span> ReRecordPage(Heap* <a class="code hl_namespace" href="namespaceheap.html">heap</a>, Address failed_start, PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>) {</div>
<div class="line"><a id="l05834" name="l05834"></a><span class="lineno"> 5834</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk()-&gt;IsFlagSet(MemoryChunk::COMPACTION_WAS_ABORTED));</div>
<div class="line"><a id="l05835" name="l05835"></a><span class="lineno"> 5835</span> </div>
<div class="line"><a id="l05836" name="l05836"></a><span class="lineno"> 5836</span>  <span class="comment">// Aborted compaction page. We have to record slots here, since we</span></div>
<div class="line"><a id="l05837" name="l05837"></a><span class="lineno"> 5837</span>  <span class="comment">// might not have recorded them in first place.</span></div>
<div class="line"><a id="l05838" name="l05838"></a><span class="lineno"> 5838</span> </div>
<div class="line"><a id="l05839" name="l05839"></a><span class="lineno"> 5839</span>  <span class="comment">// Remove mark bits in evacuated area.</span></div>
<div class="line"><a id="l05840" name="l05840"></a><span class="lineno"> 5840</span>  <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;marking_bitmap()-&gt;ClearRange&lt;AccessMode::NON_ATOMIC&gt;(</div>
<div class="line"><a id="l05841" name="l05841"></a><span class="lineno"> 5841</span>      MarkingBitmap::AddressToIndex(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start()),</div>
<div class="line"><a id="l05842" name="l05842"></a><span class="lineno"> 5842</span>      MarkingBitmap::LimitAddressToIndex(failed_start));</div>
<div class="line"><a id="l05843" name="l05843"></a><span class="lineno"> 5843</span> </div>
<div class="line"><a id="l05844" name="l05844"></a><span class="lineno"> 5844</span>  <span class="comment">// Remove outdated slots.</span></div>
<div class="line"><a id="l05845" name="l05845"></a><span class="lineno"> 5845</span>  RememberedSet&lt;OLD_TO_NEW&gt;::RemoveRange(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(), failed_start,</div>
<div class="line"><a id="l05846" name="l05846"></a><span class="lineno"> 5846</span>                                         SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05847" name="l05847"></a><span class="lineno"> 5847</span>  RememberedSet&lt;OLD_TO_NEW&gt;::RemoveRangeTyped(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(),</div>
<div class="line"><a id="l05848" name="l05848"></a><span class="lineno"> 5848</span>                                              failed_start);</div>
<div class="line"><a id="l05849" name="l05849"></a><span class="lineno"> 5849</span> </div>
<div class="line"><a id="l05850" name="l05850"></a><span class="lineno"> 5850</span>  RememberedSet&lt;OLD_TO_NEW_BACKGROUND&gt;::RemoveRange(</div>
<div class="line"><a id="l05851" name="l05851"></a><span class="lineno"> 5851</span>      <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(), failed_start, SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05852" name="l05852"></a><span class="lineno"> 5852</span>  <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;typed_slot_set&lt;OLD_TO_NEW_BACKGROUND&gt;());</div>
<div class="line"><a id="l05853" name="l05853"></a><span class="lineno"> 5853</span> </div>
<div class="line"><a id="l05854" name="l05854"></a><span class="lineno"> 5854</span>  RememberedSet&lt;OLD_TO_SHARED&gt;::RemoveRange(</div>
<div class="line"><a id="l05855" name="l05855"></a><span class="lineno"> 5855</span>      <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(), failed_start, SlotSet::FREE_EMPTY_BUCKETS);</div>
<div class="line"><a id="l05856" name="l05856"></a><span class="lineno"> 5856</span>  RememberedSet&lt;OLD_TO_SHARED&gt;::RemoveRangeTyped(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;area_start(),</div>
<div class="line"><a id="l05857" name="l05857"></a><span class="lineno"> 5857</span>                                                 failed_start);</div>
<div class="line"><a id="l05858" name="l05858"></a><span class="lineno"> 5858</span> </div>
<div class="line"><a id="l05859" name="l05859"></a><span class="lineno"> 5859</span>  <span class="comment">// Re-record slots and recompute live bytes.</span></div>
<div class="line"><a id="l05860" name="l05860"></a><span class="lineno"> 5860</span>  EvacuateRecordOnlyVisitor visitor(<a class="code hl_namespace" href="namespaceheap.html">heap</a>);</div>
<div class="line"><a id="l05861" name="l05861"></a><span class="lineno"> 5861</span>  LiveObjectVisitor::VisitMarkedObjectsNoFail(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>, &amp;visitor);</div>
<div class="line"><a id="l05862" name="l05862"></a><span class="lineno"> 5862</span>  <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;SetLiveBytes(visitor.live_object_size());</div>
<div class="line"><a id="l05863" name="l05863"></a><span class="lineno"> 5863</span>  <span class="comment">// Array buffers will be processed during pointer updating.</span></div>
<div class="line"><a id="l05864" name="l05864"></a><span class="lineno"> 5864</span>}</div>
<div class="line"><a id="l05865" name="l05865"></a><span class="lineno"> 5865</span> </div>
<div class="line"><a id="l05866" name="l05866"></a><span class="lineno"> 5866</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l05867" name="l05867"></a><span class="lineno"> 5867</span> </div>
<div class="line"><a id="l05868" name="l05868"></a><span class="lineno"> 5868</span><span class="keywordtype">size_t</span> MarkCompactCollector::PostProcessAbortedEvacuationCandidates() {</div>
<div class="line"><a id="l05869" name="l05869"></a><span class="lineno"> 5869</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> start_and_page : aborted_evacuation_candidates_due_to_oom_) {</div>
<div class="line"><a id="l05870" name="l05870"></a><span class="lineno"> 5870</span>    PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a> = start_and_page.second;</div>
<div class="line"><a id="l05871" name="l05871"></a><span class="lineno"> 5871</span>    MemoryChunk* chunk = <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk();</div>
<div class="line"><a id="l05872" name="l05872"></a><span class="lineno"> 5872</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!chunk-&gt;IsFlagSet(MemoryChunk::COMPACTION_WAS_ABORTED));</div>
<div class="line"><a id="l05873" name="l05873"></a><span class="lineno"> 5873</span>    chunk-&gt;SetFlagSlow(MemoryChunk::COMPACTION_WAS_ABORTED);</div>
<div class="line"><a id="l05874" name="l05874"></a><span class="lineno"> 5874</span>  }</div>
<div class="line"><a id="l05875" name="l05875"></a><span class="lineno"> 5875</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> start_and_page : aborted_evacuation_candidates_due_to_oom_) {</div>
<div class="line"><a id="l05876" name="l05876"></a><span class="lineno"> 5876</span>    ReRecordPage(heap_, start_and_page.first, start_and_page.second);</div>
<div class="line"><a id="l05877" name="l05877"></a><span class="lineno"> 5877</span>  }</div>
<div class="line"><a id="l05878" name="l05878"></a><span class="lineno"> 5878</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> start_and_page : aborted_evacuation_candidates_due_to_flags_) {</div>
<div class="line"><a id="l05879" name="l05879"></a><span class="lineno"> 5879</span>    ReRecordPage(heap_, start_and_page.first, start_and_page.second);</div>
<div class="line"><a id="l05880" name="l05880"></a><span class="lineno"> 5880</span>  }</div>
<div class="line"><a id="l05881" name="l05881"></a><span class="lineno"> 5881</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> aborted_pages =</div>
<div class="line"><a id="l05882" name="l05882"></a><span class="lineno"> 5882</span>      aborted_evacuation_candidates_due_to_oom_.size() +</div>
<div class="line"><a id="l05883" name="l05883"></a><span class="lineno"> 5883</span>      aborted_evacuation_candidates_due_to_flags_.size();</div>
<div class="line"><a id="l05884" name="l05884"></a><span class="lineno"> 5884</span>  <span class="keywordtype">size_t</span> aborted_pages_verified = 0;</div>
<div class="line"><a id="l05885" name="l05885"></a><span class="lineno"> 5885</span>  <span class="keywordflow">for</span> (PageMetadata* p : old_space_evacuation_pages_) {</div>
<div class="line"><a id="l05886" name="l05886"></a><span class="lineno"> 5886</span>    MemoryChunk* chunk = p-&gt;Chunk();</div>
<div class="line"><a id="l05887" name="l05887"></a><span class="lineno"> 5887</span>    <span class="keywordflow">if</span> (chunk-&gt;IsFlagSet(MemoryChunk::COMPACTION_WAS_ABORTED)) {</div>
<div class="line"><a id="l05888" name="l05888"></a><span class="lineno"> 5888</span>      <span class="comment">// Only clear EVACUATION_CANDIDATE flag after all slots were re-recorded</span></div>
<div class="line"><a id="l05889" name="l05889"></a><span class="lineno"> 5889</span>      <span class="comment">// on all aborted pages. Necessary since repopulating</span></div>
<div class="line"><a id="l05890" name="l05890"></a><span class="lineno"> 5890</span>      <span class="comment">// OLD_TO_OLD still requires the EVACUATION_CANDIDATE flag. After clearing</span></div>
<div class="line"><a id="l05891" name="l05891"></a><span class="lineno"> 5891</span>      <span class="comment">// the evacuation candidate flag the page is again in a regular state.</span></div>
<div class="line"><a id="l05892" name="l05892"></a><span class="lineno"> 5892</span>      p-&gt;ClearEvacuationCandidate();</div>
<div class="line"><a id="l05893" name="l05893"></a><span class="lineno"> 5893</span>      aborted_pages_verified++;</div>
<div class="line"><a id="l05894" name="l05894"></a><span class="lineno"> 5894</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05895" name="l05895"></a><span class="lineno"> 5895</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(chunk-&gt;IsEvacuationCandidate());</div>
<div class="line"><a id="l05896" name="l05896"></a><span class="lineno"> 5896</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a id="l05897" name="l05897"></a><span class="lineno"> 5897</span>    }</div>
<div class="line"><a id="l05898" name="l05898"></a><span class="lineno"> 5898</span>  }</div>
<div class="line"><a id="l05899" name="l05899"></a><span class="lineno"> 5899</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(aborted_pages_verified, aborted_pages);</div>
<div class="line"><a id="l05900" name="l05900"></a><span class="lineno"> 5900</span>  <a class="code hl_define" href="macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a>(aborted_pages_verified);</div>
<div class="line"><a id="l05901" name="l05901"></a><span class="lineno"> 5901</span>  <span class="keywordflow">return</span> aborted_pages;</div>
<div class="line"><a id="l05902" name="l05902"></a><span class="lineno"> 5902</span>}</div>
<div class="line"><a id="l05903" name="l05903"></a><span class="lineno"> 5903</span> </div>
<div class="line"><a id="l05904" name="l05904"></a><span class="lineno"> 5904</span><span class="keywordtype">void</span> MarkCompactCollector::ReleaseEvacuationCandidates() {</div>
<div class="line"><a id="l05905" name="l05905"></a><span class="lineno"> 5905</span>  <span class="keywordflow">for</span> (PageMetadata* p : old_space_evacuation_pages_) {</div>
<div class="line"><a id="l05906" name="l05906"></a><span class="lineno"> 5906</span>    <span class="keywordflow">if</span> (!p-&gt;Chunk()-&gt;IsEvacuationCandidate()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05907" name="l05907"></a><span class="lineno"> 5907</span>    PagedSpace* space = <span class="keyword">static_cast&lt;</span>PagedSpace*<span class="keyword">&gt;</span>(p-&gt;owner());</div>
<div class="line"><a id="l05908" name="l05908"></a><span class="lineno"> 5908</span>    p-&gt;SetLiveBytes(0);</div>
<div class="line"><a id="l05909" name="l05909"></a><span class="lineno"> 5909</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a id="l05910" name="l05910"></a><span class="lineno"> 5910</span>    space-&gt;ReleasePage(p);</div>
<div class="line"><a id="l05911" name="l05911"></a><span class="lineno"> 5911</span>  }</div>
<div class="line"><a id="l05912" name="l05912"></a><span class="lineno"> 5912</span>  old_space_evacuation_pages_.clear();</div>
<div class="line"><a id="l05913" name="l05913"></a><span class="lineno"> 5913</span>  compacting_ = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05914" name="l05914"></a><span class="lineno"> 5914</span>}</div>
<div class="line"><a id="l05915" name="l05915"></a><span class="lineno"> 5915</span> </div>
<div class="line"><a id="l05916" name="l05916"></a><span class="lineno"> 5916</span><span class="keywordtype">void</span> MarkCompactCollector::StartSweepNewSpace() {</div>
<div class="line"><a id="l05917" name="l05917"></a><span class="lineno"> 5917</span>  PagedSpaceForNewSpace* paged_space = heap_-&gt;paged_new_space()-&gt;paged_space();</div>
<div class="line"><a id="l05918" name="l05918"></a><span class="lineno"> 5918</span>  paged_space-&gt;ClearAllocatorState();</div>
<div class="line"><a id="l05919" name="l05919"></a><span class="lineno"> 5919</span> </div>
<div class="line"><a id="l05920" name="l05920"></a><span class="lineno"> 5920</span>  <span class="keywordtype">int</span> will_be_swept = 0;</div>
<div class="line"><a id="l05921" name="l05921"></a><span class="lineno"> 5921</span> </div>
<div class="line"><a id="l05922" name="l05922"></a><span class="lineno"> 5922</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(Heap::ResizeNewSpaceMode::kNone, resize_new_space_);</div>
<div class="line"><a id="l05923" name="l05923"></a><span class="lineno"> 5923</span>  resize_new_space_ = heap_-&gt;ShouldResizeNewSpace();</div>
<div class="line"><a id="l05924" name="l05924"></a><span class="lineno"> 5924</span>  <span class="keywordflow">if</span> (resize_new_space_ == Heap::ResizeNewSpaceMode::kShrink) {</div>
<div class="line"><a id="l05925" name="l05925"></a><span class="lineno"> 5925</span>    paged_space-&gt;StartShrinking();</div>
<div class="line"><a id="l05926" name="l05926"></a><span class="lineno"> 5926</span>  }</div>
<div class="line"><a id="l05927" name="l05927"></a><span class="lineno"> 5927</span> </div>
<div class="line"><a id="l05928" name="l05928"></a><span class="lineno"> 5928</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(empty_new_space_pages_to_be_swept_.empty());</div>
<div class="line"><a id="l05929" name="l05929"></a><span class="lineno"> 5929</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = paged_space-&gt;begin(); it != paged_space-&gt;end();) {</div>
<div class="line"><a id="l05930" name="l05930"></a><span class="lineno"> 5930</span>    PageMetadata* p = *(it++);</div>
<div class="line"><a id="l05931" name="l05931"></a><span class="lineno"> 5931</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a id="l05932" name="l05932"></a><span class="lineno"> 5932</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!p-&gt;Chunk()-&gt;IsFlagSet(MemoryChunk::BLACK_ALLOCATED));</div>
<div class="line"><a id="l05933" name="l05933"></a><span class="lineno"> 5933</span> </div>
<div class="line"><a id="l05934" name="l05934"></a><span class="lineno"> 5934</span>    <span class="keywordflow">if</span> (p-&gt;live_bytes() &gt; 0) {</div>
<div class="line"><a id="l05935" name="l05935"></a><span class="lineno"> 5935</span>      <span class="comment">// Non-empty pages will be evacuated/promoted.</span></div>
<div class="line"><a id="l05936" name="l05936"></a><span class="lineno"> 5936</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05937" name="l05937"></a><span class="lineno"> 5937</span>    }</div>
<div class="line"><a id="l05938" name="l05938"></a><span class="lineno"> 5938</span> </div>
<div class="line"><a id="l05939" name="l05939"></a><span class="lineno"> 5939</span>    <span class="keywordflow">if</span> (paged_space-&gt;ShouldReleaseEmptyPage()) {</div>
<div class="line"><a id="l05940" name="l05940"></a><span class="lineno"> 5940</span>      paged_space-&gt;ReleasePage(p);</div>
<div class="line"><a id="l05941" name="l05941"></a><span class="lineno"> 5941</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l05942" name="l05942"></a><span class="lineno"> 5942</span>      empty_new_space_pages_to_be_swept_.push_back(p);</div>
<div class="line"><a id="l05943" name="l05943"></a><span class="lineno"> 5943</span>    }</div>
<div class="line"><a id="l05944" name="l05944"></a><span class="lineno"> 5944</span>    will_be_swept++;</div>
<div class="line"><a id="l05945" name="l05945"></a><span class="lineno"> 5945</span>  }</div>
<div class="line"><a id="l05946" name="l05946"></a><span class="lineno"> 5946</span> </div>
<div class="line"><a id="l05947" name="l05947"></a><span class="lineno"> 5947</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_verbose) {</div>
<div class="line"><a id="l05948" name="l05948"></a><span class="lineno"> 5948</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(heap_-&gt;isolate(),</div>
<div class="line"><a id="l05949" name="l05949"></a><span class="lineno"> 5949</span>                 <span class="stringliteral">&quot;sweeping: space=%s initialized_for_sweeping=%d&quot;</span>,</div>
<div class="line"><a id="l05950" name="l05950"></a><span class="lineno"> 5950</span>                 <a class="code hl_function" href="data-view-ops_8h.html#a04ef3e8b3cbc9ea1605b3067d2a55474">ToString</a>(paged_space-&gt;identity()), will_be_swept);</div>
<div class="line"><a id="l05951" name="l05951"></a><span class="lineno"> 5951</span>  }</div>
<div class="line"><a id="l05952" name="l05952"></a><span class="lineno"> 5952</span>}</div>
<div class="line"><a id="l05953" name="l05953"></a><span class="lineno"> 5953</span> </div>
<div class="line"><a id="l05954" name="l05954"></a><span class="lineno"> 5954</span><span class="keywordtype">void</span> MarkCompactCollector::ResetAndRelinkBlackAllocatedPage(</div>
<div class="line"><a id="l05955" name="l05955"></a><span class="lineno"> 5955</span>    PagedSpace* space, PageMetadata* <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>) {</div>
<div class="line"><a id="l05956" name="l05956"></a><span class="lineno"> 5956</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk()-&gt;IsFlagSet(MemoryChunk::BLACK_ALLOCATED));</div>
<div class="line"><a id="l05957" name="l05957"></a><span class="lineno"> 5957</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;live_bytes(), 0);</div>
<div class="line"><a id="l05958" name="l05958"></a><span class="lineno"> 5958</span>  <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;allocated_bytes(), 0);</div>
<div class="line"><a id="l05959" name="l05959"></a><span class="lineno"> 5959</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;marking_bitmap()-&gt;IsClean());</div>
<div class="line"><a id="l05960" name="l05960"></a><span class="lineno"> 5960</span>  std::optional&lt;RwxMemoryWriteScope&gt; scope;</div>
<div class="line"><a id="l05961" name="l05961"></a><span class="lineno"> 5961</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk()-&gt;InCodeSpace()) {</div>
<div class="line"><a id="l05962" name="l05962"></a><span class="lineno"> 5962</span>    scope.emplace(<span class="stringliteral">&quot;For writing flags.&quot;</span>);</div>
<div class="line"><a id="l05963" name="l05963"></a><span class="lineno"> 5963</span>  }</div>
<div class="line"><a id="l05964" name="l05964"></a><span class="lineno"> 5964</span>  <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;Chunk()-&gt;ClearFlagUnlocked(MemoryChunk::BLACK_ALLOCATED);</div>
<div class="line"><a id="l05965" name="l05965"></a><span class="lineno"> 5965</span>  space-&gt;IncreaseAllocatedBytes(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>-&gt;allocated_bytes(), <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l05966" name="l05966"></a><span class="lineno"> 5966</span>  space-&gt;RelinkFreeListCategories(<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a>);</div>
<div class="line"><a id="l05967" name="l05967"></a><span class="lineno"> 5967</span>}</div>
<div class="line"><a id="l05968" name="l05968"></a><span class="lineno"> 5968</span> </div>
<div class="line"><a id="l05969" name="l05969"></a><span class="lineno"> 5969</span><span class="keywordtype">void</span> MarkCompactCollector::StartSweepSpace(PagedSpace* space) {</div>
<div class="line"><a id="l05970" name="l05970"></a><span class="lineno"> 5970</span>  <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(NEW_SPACE, space-&gt;identity());</div>
<div class="line"><a id="l05971" name="l05971"></a><span class="lineno"> 5971</span>  space-&gt;ClearAllocatorState();</div>
<div class="line"><a id="l05972" name="l05972"></a><span class="lineno"> 5972</span> </div>
<div class="line"><a id="l05973" name="l05973"></a><span class="lineno"> 5973</span>  <span class="keywordtype">int</span> will_be_swept = 0;</div>
<div class="line"><a id="l05974" name="l05974"></a><span class="lineno"> 5974</span>  <span class="keywordtype">bool</span> unused_page_present = <span class="keyword">false</span>;</div>
<div class="line"><a id="l05975" name="l05975"></a><span class="lineno"> 5975</span> </div>
<div class="line"><a id="l05976" name="l05976"></a><span class="lineno"> 5976</span>  Sweeper* sweeper = heap_-&gt;sweeper();</div>
<div class="line"><a id="l05977" name="l05977"></a><span class="lineno"> 5977</span> </div>
<div class="line"><a id="l05978" name="l05978"></a><span class="lineno"> 5978</span>  <span class="comment">// Loop needs to support deletion if live bytes == 0 for a page.</span></div>
<div class="line"><a id="l05979" name="l05979"></a><span class="lineno"> 5979</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = space-&gt;begin(); it != space-&gt;end();) {</div>
<div class="line"><a id="l05980" name="l05980"></a><span class="lineno"> 5980</span>    PageMetadata* p = *(it++);</div>
<div class="line"><a id="l05981" name="l05981"></a><span class="lineno"> 5981</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(p-&gt;SweepingDone());</div>
<div class="line"><a id="l05982" name="l05982"></a><span class="lineno"> 5982</span> </div>
<div class="line"><a id="l05983" name="l05983"></a><span class="lineno"> 5983</span>    <span class="keywordflow">if</span> (p-&gt;Chunk()-&gt;IsEvacuationCandidate()) {</div>
<div class="line"><a id="l05984" name="l05984"></a><span class="lineno"> 5984</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!p-&gt;Chunk()-&gt;IsFlagSet(MemoryChunk::BLACK_ALLOCATED));</div>
<div class="line"><a id="l05985" name="l05985"></a><span class="lineno"> 5985</span>      <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(NEW_SPACE, space-&gt;identity());</div>
<div class="line"><a id="l05986" name="l05986"></a><span class="lineno"> 5986</span>      <span class="comment">// Will be processed in Evacuate.</span></div>
<div class="line"><a id="l05987" name="l05987"></a><span class="lineno"> 5987</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05988" name="l05988"></a><span class="lineno"> 5988</span>    }</div>
<div class="line"><a id="l05989" name="l05989"></a><span class="lineno"> 5989</span> </div>
<div class="line"><a id="l05990" name="l05990"></a><span class="lineno"> 5990</span>    <span class="comment">// If the page is black, just reset the flag and don&#39;t add the page to the</span></div>
<div class="line"><a id="l05991" name="l05991"></a><span class="lineno"> 5991</span>    <span class="comment">// sweeper.</span></div>
<div class="line"><a id="l05992" name="l05992"></a><span class="lineno"> 5992</span>    <span class="keywordflow">if</span> (p-&gt;Chunk()-&gt;IsFlagSet(MemoryChunk::BLACK_ALLOCATED)) {</div>
<div class="line"><a id="l05993" name="l05993"></a><span class="lineno"> 5993</span>      ResetAndRelinkBlackAllocatedPage(space, p);</div>
<div class="line"><a id="l05994" name="l05994"></a><span class="lineno"> 5994</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l05995" name="l05995"></a><span class="lineno"> 5995</span>    }</div>
<div class="line"><a id="l05996" name="l05996"></a><span class="lineno"> 5996</span> </div>
<div class="line"><a id="l05997" name="l05997"></a><span class="lineno"> 5997</span>    <span class="comment">// One unused page is kept, all further are released before sweeping them.</span></div>
<div class="line"><a id="l05998" name="l05998"></a><span class="lineno"> 5998</span>    <span class="keywordflow">if</span> (p-&gt;live_bytes() == 0) {</div>
<div class="line"><a id="l05999" name="l05999"></a><span class="lineno"> 5999</span>      <span class="keywordflow">if</span> (unused_page_present) {</div>
<div class="line"><a id="l06000" name="l06000"></a><span class="lineno"> 6000</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_verbose) {</div>
<div class="line"><a id="l06001" name="l06001"></a><span class="lineno"> 6001</span>          <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(heap_-&gt;isolate(), <span class="stringliteral">&quot;sweeping: released page: %p&quot;</span>,</div>
<div class="line"><a id="l06002" name="l06002"></a><span class="lineno"> 6002</span>                       <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(p));</div>
<div class="line"><a id="l06003" name="l06003"></a><span class="lineno"> 6003</span>        }</div>
<div class="line"><a id="l06004" name="l06004"></a><span class="lineno"> 6004</span>        space-&gt;ReleasePage(p);</div>
<div class="line"><a id="l06005" name="l06005"></a><span class="lineno"> 6005</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06006" name="l06006"></a><span class="lineno"> 6006</span>      }</div>
<div class="line"><a id="l06007" name="l06007"></a><span class="lineno"> 6007</span>      unused_page_present = <span class="keyword">true</span>;</div>
<div class="line"><a id="l06008" name="l06008"></a><span class="lineno"> 6008</span>    }</div>
<div class="line"><a id="l06009" name="l06009"></a><span class="lineno"> 6009</span> </div>
<div class="line"><a id="l06010" name="l06010"></a><span class="lineno"> 6010</span>    sweeper-&gt;AddPage(space-&gt;identity(), p);</div>
<div class="line"><a id="l06011" name="l06011"></a><span class="lineno"> 6011</span>    will_be_swept++;</div>
<div class="line"><a id="l06012" name="l06012"></a><span class="lineno"> 6012</span>  }</div>
<div class="line"><a id="l06013" name="l06013"></a><span class="lineno"> 6013</span> </div>
<div class="line"><a id="l06014" name="l06014"></a><span class="lineno"> 6014</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits &amp;&amp; space-&gt;identity() == OLD_SPACE) {</div>
<div class="line"><a id="l06015" name="l06015"></a><span class="lineno"> 6015</span>    <span class="keyword">static_cast&lt;</span>StickySpace*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="flag-definitions_8h.html#ae50fea4f4c58d91d722bb7e290b4776b">space</a>)-&gt;set_old_objects_size(space-&gt;Size());</div>
<div class="line"><a id="l06016" name="l06016"></a><span class="lineno"> 6016</span>  }</div>
<div class="line"><a id="l06017" name="l06017"></a><span class="lineno"> 6017</span> </div>
<div class="line"><a id="l06018" name="l06018"></a><span class="lineno"> 6018</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.gc_verbose) {</div>
<div class="line"><a id="l06019" name="l06019"></a><span class="lineno"> 6019</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">PrintIsolate</a>(heap_-&gt;isolate(),</div>
<div class="line"><a id="l06020" name="l06020"></a><span class="lineno"> 6020</span>                 <span class="stringliteral">&quot;sweeping: space=%s initialized_for_sweeping=%d&quot;</span>,</div>
<div class="line"><a id="l06021" name="l06021"></a><span class="lineno"> 6021</span>                 <a class="code hl_function" href="data-view-ops_8h.html#a04ef3e8b3cbc9ea1605b3067d2a55474">ToString</a>(space-&gt;identity()), will_be_swept);</div>
<div class="line"><a id="l06022" name="l06022"></a><span class="lineno"> 6022</span>  }</div>
<div class="line"><a id="l06023" name="l06023"></a><span class="lineno"> 6023</span>}</div>
<div class="line"><a id="l06024" name="l06024"></a><span class="lineno"> 6024</span> </div>
<div class="line"><a id="l06025" name="l06025"></a><span class="lineno"> 6025</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l06026" name="l06026"></a><span class="lineno"> 6026</span><span class="keywordtype">bool</span> ShouldPostponeFreeingEmptyPages(LargeObjectSpace* space) {</div>
<div class="line"><a id="l06027" name="l06027"></a><span class="lineno"> 6027</span>  <span class="comment">// Delay releasing dead old large object pages until after pointer updating is</span></div>
<div class="line"><a id="l06028" name="l06028"></a><span class="lineno"> 6028</span>  <span class="comment">// done because dead old space objects may have old-to-new slots (which</span></div>
<div class="line"><a id="l06029" name="l06029"></a><span class="lineno"> 6029</span>  <span class="comment">// were possibly later overriden with old-to-old references) that are</span></div>
<div class="line"><a id="l06030" name="l06030"></a><span class="lineno"> 6030</span>  <span class="comment">// pointing to these pages and will need to be updated.</span></div>
<div class="line"><a id="l06031" name="l06031"></a><span class="lineno"> 6031</span>  <span class="keywordflow">if</span> (space-&gt;identity() == LO_SPACE) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06032" name="l06032"></a><span class="lineno"> 6032</span>  <span class="comment">// Old-to-new slots may also point to shared spaces. Delay releasing so that</span></div>
<div class="line"><a id="l06033" name="l06033"></a><span class="lineno"> 6033</span>  <span class="comment">// updating slots in dead old objects can access the dead shared objects.</span></div>
<div class="line"><a id="l06034" name="l06034"></a><span class="lineno"> 6034</span>  <span class="keywordflow">if</span> (space-&gt;identity() == SHARED_LO_SPACE) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l06035" name="l06035"></a><span class="lineno"> 6035</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l06036" name="l06036"></a><span class="lineno"> 6036</span>}</div>
<div class="line"><a id="l06037" name="l06037"></a><span class="lineno"> 6037</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l06038" name="l06038"></a><span class="lineno"> 6038</span> </div>
<div class="line"><a id="l06039" name="l06039"></a><span class="lineno"> 6039</span><span class="keywordtype">void</span> MarkCompactCollector::SweepLargeSpace(LargeObjectSpace* space) {</div>
<div class="line"><a id="l06040" name="l06040"></a><span class="lineno"> 6040</span>  PtrComprCageBase cage_base(heap_-&gt;isolate());</div>
<div class="line"><a id="l06041" name="l06041"></a><span class="lineno"> 6041</span>  <span class="keywordtype">size_t</span> surviving_object_size = 0;</div>
<div class="line"><a id="l06042" name="l06042"></a><span class="lineno"> 6042</span>  <span class="keyword">const</span> MemoryAllocator::FreeMode free_mode =</div>
<div class="line"><a id="l06043" name="l06043"></a><span class="lineno"> 6043</span>      ShouldPostponeFreeingEmptyPages(space)</div>
<div class="line"><a id="l06044" name="l06044"></a><span class="lineno"> 6044</span>          ? MemoryAllocator::FreeMode::kPostpone</div>
<div class="line"><a id="l06045" name="l06045"></a><span class="lineno"> 6045</span>          : MemoryAllocator::FreeMode::kImmediately;</div>
<div class="line"><a id="l06046" name="l06046"></a><span class="lineno"> 6046</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = space-&gt;begin(); it != space-&gt;end();) {</div>
<div class="line"><a id="l06047" name="l06047"></a><span class="lineno"> 6047</span>    LargePageMetadata* current = *(it++);</div>
<div class="line"><a id="l06048" name="l06048"></a><span class="lineno"> 6048</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!current-&gt;Chunk()-&gt;IsFlagSet(MemoryChunk::BLACK_ALLOCATED));</div>
<div class="line"><a id="l06049" name="l06049"></a><span class="lineno"> 6049</span>    Tagged&lt;HeapObject&gt; <span class="keywordtype">object</span> = current-&gt;GetObject();</div>
<div class="line"><a id="l06050" name="l06050"></a><span class="lineno"> 6050</span>    <span class="keywordflow">if</span> (!marking_state_-&gt;IsMarked(<span class="keywordtype">object</span>)) {</div>
<div class="line"><a id="l06051" name="l06051"></a><span class="lineno"> 6051</span>      <span class="comment">// Object is dead and page can be released.</span></div>
<div class="line"><a id="l06052" name="l06052"></a><span class="lineno"> 6052</span>      space-&gt;RemovePage(current);</div>
<div class="line"><a id="l06053" name="l06053"></a><span class="lineno"> 6053</span>      heap_-&gt;memory_allocator()-&gt;Free(free_mode, current);</div>
<div class="line"><a id="l06054" name="l06054"></a><span class="lineno"> 6054</span> </div>
<div class="line"><a id="l06055" name="l06055"></a><span class="lineno"> 6055</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l06056" name="l06056"></a><span class="lineno"> 6056</span>    }</div>
<div class="line"><a id="l06057" name="l06057"></a><span class="lineno"> 6057</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.sticky_mark_bits) {</div>
<div class="line"><a id="l06058" name="l06058"></a><span class="lineno"> 6058</span>      MarkBit::From(<span class="keywordtype">object</span>).Clear();</div>
<div class="line"><a id="l06059" name="l06059"></a><span class="lineno"> 6059</span>      current-&gt;SetLiveBytes(0);</div>
<div class="line"><a id="l06060" name="l06060"></a><span class="lineno"> 6060</span>    }</div>
<div class="line"><a id="l06061" name="l06061"></a><span class="lineno"> 6061</span>    current-&gt;marking_progress_tracker().ResetIfEnabled();</div>
<div class="line"><a id="l06062" name="l06062"></a><span class="lineno"> 6062</span>    surviving_object_size += <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<span class="keywordtype">object</span>-&gt;Size(cage_base));</div>
<div class="line"><a id="l06063" name="l06063"></a><span class="lineno"> 6063</span>  }</div>
<div class="line"><a id="l06064" name="l06064"></a><span class="lineno"> 6064</span>  space-&gt;set_objects_size(surviving_object_size);</div>
<div class="line"><a id="l06065" name="l06065"></a><span class="lineno"> 6065</span>}</div>
<div class="line"><a id="l06066" name="l06066"></a><span class="lineno"> 6066</span> </div>
<div class="line"><a id="l06067" name="l06067"></a><span class="lineno"> 6067</span><span class="keywordtype">void</span> MarkCompactCollector::Sweep() {</div>
<div class="line"><a id="l06068" name="l06068"></a><span class="lineno"> 6068</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!sweeper_-&gt;sweeping_in_progress());</div>
<div class="line"><a id="l06069" name="l06069"></a><span class="lineno"> 6069</span>  sweeper_-&gt;InitializeMajorSweeping();</div>
<div class="line"><a id="l06070" name="l06070"></a><span class="lineno"> 6070</span> </div>
<div class="line"><a id="l06071" name="l06071"></a><span class="lineno"> 6071</span>  <a class="code hl_define" href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a>(</div>
<div class="line"><a id="l06072" name="l06072"></a><span class="lineno"> 6072</span>      heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP, ThreadKind::kMain,</div>
<div class="line"><a id="l06073" name="l06073"></a><span class="lineno"> 6073</span>      sweeper_-&gt;GetTraceIdForFlowEvent(GCTracer::Scope::MC_SWEEP),</div>
<div class="line"><a id="l06074" name="l06074"></a><span class="lineno"> 6074</span>      <a class="code hl_define" href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a>);</div>
<div class="line"><a id="l06075" name="l06075"></a><span class="lineno"> 6075</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l06076" name="l06076"></a><span class="lineno"> 6076</span>  state_ = SWEEP_SPACES;</div>
<div class="line"><a id="l06077" name="l06077"></a><span class="lineno"> 6077</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l06078" name="l06078"></a><span class="lineno"> 6078</span> </div>
<div class="line"><a id="l06079" name="l06079"></a><span class="lineno"> 6079</span>  {</div>
<div class="line"><a id="l06080" name="l06080"></a><span class="lineno"> 6080</span>    GCTracer::Scope sweep_scope(heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_LO,</div>
<div class="line"><a id="l06081" name="l06081"></a><span class="lineno"> 6081</span>                                ThreadKind::kMain);</div>
<div class="line"><a id="l06082" name="l06082"></a><span class="lineno"> 6082</span>    SweepLargeSpace(heap_-&gt;lo_space());</div>
<div class="line"><a id="l06083" name="l06083"></a><span class="lineno"> 6083</span>  }</div>
<div class="line"><a id="l06084" name="l06084"></a><span class="lineno"> 6084</span>  {</div>
<div class="line"><a id="l06085" name="l06085"></a><span class="lineno"> 6085</span>    GCTracer::Scope sweep_scope(</div>
<div class="line"><a id="l06086" name="l06086"></a><span class="lineno"> 6086</span>        heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_CODE_LO, ThreadKind::kMain);</div>
<div class="line"><a id="l06087" name="l06087"></a><span class="lineno"> 6087</span>    SweepLargeSpace(heap_-&gt;code_lo_space());</div>
<div class="line"><a id="l06088" name="l06088"></a><span class="lineno"> 6088</span>  }</div>
<div class="line"><a id="l06089" name="l06089"></a><span class="lineno"> 6089</span>  <span class="keywordflow">if</span> (heap_-&gt;shared_space()) {</div>
<div class="line"><a id="l06090" name="l06090"></a><span class="lineno"> 6090</span>    GCTracer::Scope sweep_scope(heap_-&gt;tracer(),</div>
<div class="line"><a id="l06091" name="l06091"></a><span class="lineno"> 6091</span>                                GCTracer::Scope::MC_SWEEP_SHARED_LO,</div>
<div class="line"><a id="l06092" name="l06092"></a><span class="lineno"> 6092</span>                                ThreadKind::kMain);</div>
<div class="line"><a id="l06093" name="l06093"></a><span class="lineno"> 6093</span>    SweepLargeSpace(heap_-&gt;shared_lo_space());</div>
<div class="line"><a id="l06094" name="l06094"></a><span class="lineno"> 6094</span>  }</div>
<div class="line"><a id="l06095" name="l06095"></a><span class="lineno"> 6095</span>  {</div>
<div class="line"><a id="l06096" name="l06096"></a><span class="lineno"> 6096</span>    GCTracer::Scope sweep_scope(heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_OLD,</div>
<div class="line"><a id="l06097" name="l06097"></a><span class="lineno"> 6097</span>                                ThreadKind::kMain);</div>
<div class="line"><a id="l06098" name="l06098"></a><span class="lineno"> 6098</span>    StartSweepSpace(heap_-&gt;old_space());</div>
<div class="line"><a id="l06099" name="l06099"></a><span class="lineno"> 6099</span>  }</div>
<div class="line"><a id="l06100" name="l06100"></a><span class="lineno"> 6100</span>  {</div>
<div class="line"><a id="l06101" name="l06101"></a><span class="lineno"> 6101</span>    GCTracer::Scope sweep_scope(heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_CODE,</div>
<div class="line"><a id="l06102" name="l06102"></a><span class="lineno"> 6102</span>                                ThreadKind::kMain);</div>
<div class="line"><a id="l06103" name="l06103"></a><span class="lineno"> 6103</span>    StartSweepSpace(heap_-&gt;code_space());</div>
<div class="line"><a id="l06104" name="l06104"></a><span class="lineno"> 6104</span>  }</div>
<div class="line"><a id="l06105" name="l06105"></a><span class="lineno"> 6105</span>  <span class="keywordflow">if</span> (heap_-&gt;shared_space()) {</div>
<div class="line"><a id="l06106" name="l06106"></a><span class="lineno"> 6106</span>    GCTracer::Scope sweep_scope(</div>
<div class="line"><a id="l06107" name="l06107"></a><span class="lineno"> 6107</span>        heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_SHARED, ThreadKind::kMain);</div>
<div class="line"><a id="l06108" name="l06108"></a><span class="lineno"> 6108</span>    StartSweepSpace(heap_-&gt;shared_space());</div>
<div class="line"><a id="l06109" name="l06109"></a><span class="lineno"> 6109</span>  }</div>
<div class="line"><a id="l06110" name="l06110"></a><span class="lineno"> 6110</span>  {</div>
<div class="line"><a id="l06111" name="l06111"></a><span class="lineno"> 6111</span>    GCTracer::Scope sweep_scope(</div>
<div class="line"><a id="l06112" name="l06112"></a><span class="lineno"> 6112</span>        heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_TRUSTED, ThreadKind::kMain);</div>
<div class="line"><a id="l06113" name="l06113"></a><span class="lineno"> 6113</span>    StartSweepSpace(heap_-&gt;trusted_space());</div>
<div class="line"><a id="l06114" name="l06114"></a><span class="lineno"> 6114</span>  }</div>
<div class="line"><a id="l06115" name="l06115"></a><span class="lineno"> 6115</span>  <span class="keywordflow">if</span> (heap_-&gt;shared_trusted_space()) {</div>
<div class="line"><a id="l06116" name="l06116"></a><span class="lineno"> 6116</span>    GCTracer::Scope sweep_scope(</div>
<div class="line"><a id="l06117" name="l06117"></a><span class="lineno"> 6117</span>        heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_SHARED, ThreadKind::kMain);</div>
<div class="line"><a id="l06118" name="l06118"></a><span class="lineno"> 6118</span>    StartSweepSpace(heap_-&gt;shared_trusted_space());</div>
<div class="line"><a id="l06119" name="l06119"></a><span class="lineno"> 6119</span>  }</div>
<div class="line"><a id="l06120" name="l06120"></a><span class="lineno"> 6120</span>  {</div>
<div class="line"><a id="l06121" name="l06121"></a><span class="lineno"> 6121</span>    GCTracer::Scope sweep_scope(heap_-&gt;tracer(),</div>
<div class="line"><a id="l06122" name="l06122"></a><span class="lineno"> 6122</span>                                GCTracer::Scope::MC_SWEEP_TRUSTED_LO,</div>
<div class="line"><a id="l06123" name="l06123"></a><span class="lineno"> 6123</span>                                ThreadKind::kMain);</div>
<div class="line"><a id="l06124" name="l06124"></a><span class="lineno"> 6124</span>    SweepLargeSpace(heap_-&gt;trusted_lo_space());</div>
<div class="line"><a id="l06125" name="l06125"></a><span class="lineno"> 6125</span>  }</div>
<div class="line"><a id="l06126" name="l06126"></a><span class="lineno"> 6126</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.minor_ms &amp;&amp; heap_-&gt;new_space()) {</div>
<div class="line"><a id="l06127" name="l06127"></a><span class="lineno"> 6127</span>    GCTracer::Scope sweep_scope(heap_-&gt;tracer(), GCTracer::Scope::MC_SWEEP_NEW,</div>
<div class="line"><a id="l06128" name="l06128"></a><span class="lineno"> 6128</span>                                ThreadKind::kMain);</div>
<div class="line"><a id="l06129" name="l06129"></a><span class="lineno"> 6129</span>    StartSweepNewSpace();</div>
<div class="line"><a id="l06130" name="l06130"></a><span class="lineno"> 6130</span>  }</div>
<div class="line"><a id="l06131" name="l06131"></a><span class="lineno"> 6131</span> </div>
<div class="line"><a id="l06132" name="l06132"></a><span class="lineno"> 6132</span>  sweeper_-&gt;StartMajorSweeping();</div>
<div class="line"><a id="l06133" name="l06133"></a><span class="lineno"> 6133</span>}</div>
<div class="line"><a id="l06134" name="l06134"></a><span class="lineno"> 6134</span> </div>
<div class="foldopen" id="foldopen06135" data-start="{" data-end="}">
<div class="line"><a id="l06135" name="l06135"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RootMarkingVisitor.html#aee4686c927c25465f510888d48eb75d0"> 6135</a></span>RootMarkingVisitor::RootMarkingVisitor(<a class="code hl_class" href="classv8_1_1internal_1_1MarkCompactCollector.html">MarkCompactCollector</a>* collector)</div>
<div class="line"><a id="l06136" name="l06136"></a><span class="lineno"> 6136</span>    : collector_(collector) {}</div>
</div>
<div class="line"><a id="l06137" name="l06137"></a><span class="lineno"> 6137</span> </div>
<div class="line"><a id="l06138" name="l06138"></a><span class="lineno"> 6138</span><a class="code hl_function" href="classv8_1_1internal_1_1RootMarkingVisitor.html#ad0215961c5c1ccc45f2c66a782e4b446">RootMarkingVisitor::~RootMarkingVisitor</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l06139" name="l06139"></a><span class="lineno"> 6139</span> </div>
<div class="foldopen" id="foldopen06140" data-start="{" data-end="}">
<div class="line"><a id="l06140" name="l06140"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1RootMarkingVisitor.html#aaae2d46819c8e1405a73bc1de3c2984f"> 6140</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1RootMarkingVisitor.html#aaae2d46819c8e1405a73bc1de3c2984f">RootMarkingVisitor::VisitRunningCode</a>(</div>
<div class="line"><a id="l06141" name="l06141"></a><span class="lineno"> 6141</span>    <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> code_slot, <a class="code hl_class" href="classv8_1_1internal_1_1FullObjectSlot.html">FullObjectSlot</a> istream_or_smi_zero_slot) {</div>
<div class="line"><a id="l06142" name="l06142"></a><span class="lineno"> 6142</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> istream_or_smi_zero = *istream_or_smi_zero_slot;</div>
<div class="line"><a id="l06143" name="l06143"></a><span class="lineno"> 6143</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(istream_or_smi_zero == <a class="code hl_function" href="classv8_1_1internal_1_1Smi.html#ae2be3083c9562dbe7c4bc39337bbe831">Smi::zero</a>() ||</div>
<div class="line"><a id="l06144" name="l06144"></a><span class="lineno"> 6144</span>         IsInstructionStream(istream_or_smi_zero));</div>
<div class="line"><a id="l06145" name="l06145"></a><span class="lineno"> 6145</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Code&gt;</a> code = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Code&gt;</a>(*code_slot);</div>
<div class="line"><a id="l06146" name="l06146"></a><span class="lineno"> 6146</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(code-&gt;raw_instruction_stream(<a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageBase.html">PtrComprCageBase</a>{</div>
<div class="line"><a id="l06147" name="l06147"></a><span class="lineno"> 6147</span>                collector_-&gt;heap()-&gt;isolate()-&gt;code_cage_base()}),</div>
<div class="line"><a id="l06148" name="l06148"></a><span class="lineno"> 6148</span>            istream_or_smi_zero);</div>
<div class="line"><a id="l06149" name="l06149"></a><span class="lineno"> 6149</span> </div>
<div class="line"><a id="l06150" name="l06150"></a><span class="lineno"> 6150</span>  <span class="comment">// We must not remove deoptimization literals which may be needed in</span></div>
<div class="line"><a id="l06151" name="l06151"></a><span class="lineno"> 6151</span>  <span class="comment">// order to successfully deoptimize.</span></div>
<div class="line"><a id="l06152" name="l06152"></a><span class="lineno"> 6152</span>  code-&gt;IterateDeoptimizationLiterals(<span class="keyword">this</span>);</div>
<div class="line"><a id="l06153" name="l06153"></a><span class="lineno"> 6153</span> </div>
<div class="line"><a id="l06154" name="l06154"></a><span class="lineno"> 6154</span>  <span class="keywordflow">if</span> (istream_or_smi_zero != <a class="code hl_function" href="classv8_1_1internal_1_1Smi.html#ae2be3083c9562dbe7c4bc39337bbe831">Smi::zero</a>()) {</div>
<div class="line"><a id="l06155" name="l06155"></a><span class="lineno"> 6155</span>    <a class="code hl_function" href="classv8_1_1internal_1_1RootMarkingVisitor.html#a9b21678c05713ed9f8773414b2967561">VisitRootPointer</a>(Root::kStackRoots, <span class="keyword">nullptr</span>, istream_or_smi_zero_slot);</div>
<div class="line"><a id="l06156" name="l06156"></a><span class="lineno"> 6156</span>  }</div>
<div class="line"><a id="l06157" name="l06157"></a><span class="lineno"> 6157</span> </div>
<div class="line"><a id="l06158" name="l06158"></a><span class="lineno"> 6158</span>  <a class="code hl_function" href="classv8_1_1internal_1_1RootMarkingVisitor.html#a9b21678c05713ed9f8773414b2967561">VisitRootPointer</a>(Root::kStackRoots, <span class="keyword">nullptr</span>, code_slot);</div>
<div class="line"><a id="l06159" name="l06159"></a><span class="lineno"> 6159</span>}</div>
</div>
<div class="line"><a id="l06160" name="l06160"></a><span class="lineno"> 6160</span> </div>
<div class="line"><a id="l06161" name="l06161"></a><span class="lineno"> 6161</span>}  <span class="comment">// namespace internal</span></div>
<div class="line"><a id="l06162" name="l06162"></a><span class="lineno"> 6162</span>}  <span class="comment">// namespace v8</span></div>
<div class="ttc" id="aarray-buffer-sweeper_8h_html"><div class="ttname"><a href="array-buffer-sweeper_8h.html">array-buffer-sweeper.h</a></div></div>
<div class="ttc" id="aassert-scope_8h_html"><div class="ttname"><a href="assert-scope_8h.html">assert-scope.h</a></div></div>
<div class="ttc" id="abase_2platform_2platform_8h_html"><div class="ttname"><a href="base_2platform_2platform_8h.html">platform.h</a></div></div>
<div class="ttc" id="abasic-slot-set_8h_html"><div class="ttname"><a href="basic-slot-set_8h.html">basic-slot-set.h</a></div></div>
<div class="ttc" id="abits_8h_html"><div class="ttname"><a href="bits_8h.html">bits.h</a></div></div>
<div class="ttc" id="acancelable-task_8h_html"><div class="ttname"><a href="cancelable-task_8h.html">cancelable-task.h</a></div></div>
<div class="ttc" id="acheck_8h_html_a6e67d209c0a0c9c55b7b563275f63bdd"><div class="ttname"><a href="check_8h.html#a6e67d209c0a0c9c55b7b563275f63bdd">SBXCHECK_EQ</a></div><div class="ttdeci">#define SBXCHECK_EQ(lhs, rhs)</div><div class="ttdef"><b>Definition</b> <a href="check_8h_source.html#l00061">check.h:61</a></div></div>
<div class="ttc" id="acheck_8h_html_aee78f6fbdf206be23e949191f9408e4b"><div class="ttname"><a href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a></div><div class="ttdeci">#define SBXCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="check_8h_source.html#l00060">check.h:60</a></div></div>
<div class="ttc" id="aclassheap_1_1base_1_1BasicSlotSet_html_a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4"><div class="ttname"><a href="classheap_1_1base_1_1BasicSlotSet.html#a29cbe55a0c506ffa5e38391facbe7b99a43a6065835f1c9c12356790a590c40d4">heap::base::BasicSlotSet&lt; kTaggedSize &gt;::FREE_EMPTY_BUCKETS</a></div><div class="ttdeci">@ FREE_EMPTY_BUCKETS</div><div class="ttdef"><b>Definition</b> <a href="basic-slot-set_8h_source.html#l00043">basic-slot-set.h:43</a></div></div>
<div class="ttc" id="aclasslength_html"><div class="ttname"><a href="classlength.html">length</a></div></div>
<div class="ttc" id="aclasssize_html"><div class="ttname"><a href="classsize.html">size</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html">v8::base::EnumSet</a></div><div class="ttdef"><b>Definition</b> <a href="enum-set_8h_source.html#l00020">enum-set.h:20</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1EnumSet_html_a284a9564cbcce06b154271c335244102"><div class="ttname"><a href="classv8_1_1base_1_1EnumSet.html#a284a9564cbcce06b154271c335244102">v8::base::EnumSet::Add</a></div><div class="ttdeci">constexpr void Add(E element)</div><div class="ttdef"><b>Definition</b> <a href="enum-set_8h_source.html#l00050">enum-set.h:50</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1LockGuard_html"><div class="ttname"><a href="classv8_1_1base_1_1LockGuard.html">v8::base::LockGuard</a></div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00534">mutex.h:534</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1RandomNumberGenerator_html_a3cb661fd70f4322d36792f98acd6ca7e"><div class="ttname"><a href="classv8_1_1base_1_1RandomNumberGenerator.html#a3cb661fd70f4322d36792f98acd6ca7e">v8::base::RandomNumberGenerator::NextDouble</a></div><div class="ttdeci">double NextDouble() V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition</b> <a href="random-number-generator_8cc_source.html#l00114">random-number-generator.cc:114</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1RandomNumberGenerator_html_a4090ec844e0f1cc4150db68cf69c6c7d"><div class="ttname"><a href="classv8_1_1base_1_1RandomNumberGenerator.html#a4090ec844e0f1cc4150db68cf69c6c7d">v8::base::RandomNumberGenerator::NextSample</a></div><div class="ttdeci">std::vector&lt; uint64_t &gt; NextSample(uint64_t max, size_t n) V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition</b> <a href="random-number-generator_8cc_source.html#l00144">random-number-generator.cc:144</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1RandomNumberGenerator_html_ac44e22b8b6250f2cc8666c880a4871a8"><div class="ttname"><a href="classv8_1_1base_1_1RandomNumberGenerator.html#ac44e22b8b6250f2cc8666c880a4871a8">v8::base::RandomNumberGenerator::NextInt64</a></div><div class="ttdeci">int64_t NextInt64() V8_WARN_UNUSED_RESULT</div><div class="ttdef"><b>Definition</b> <a href="random-number-generator_8cc_source.html#l00120">random-number-generator.cc:120</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html">v8::base::TimeDelta</a></div><div class="ttdef"><b>Definition</b> <a href="time_8h_source.html#l00067">time.h:67</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeDelta_html_a1330af8b50fc0206f46945ea8d6922cf"><div class="ttname"><a href="classv8_1_1base_1_1TimeDelta.html#a1330af8b50fc0206f46945ea8d6922cf">v8::base::TimeDelta::Max</a></div><div class="ttdeci">static constexpr TimeDelta Max()</div><div class="ttdef"><b>Definition</b> <a href="time_8h_source.html#l00233">time.h:233</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1TimeTicks_html_ab0886bf0e84f1e1fcdc101021c2c0775"><div class="ttname"><a href="classv8_1_1base_1_1TimeTicks.html#ab0886bf0e84f1e1fcdc101021c2c0775">v8::base::TimeTicks::Now</a></div><div class="ttdeci">static TimeTicks Now()</div><div class="ttdef"><b>Definition</b> <a href="time_8cc_source.html#l00735">time.cc:735</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1AllStatic_html"><div class="ttname"><a href="classv8_1_1internal_1_1AllStatic.html">v8::internal::AllStatic</a></div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00356">globals.h:356</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1AllocationResult_html"><div class="ttname"><a href="classv8_1_1internal_1_1AllocationResult.html">v8::internal::AllocationResult</a></div><div class="ttdef"><b>Definition</b> <a href="allocation-result_8h_source.html#l00026">allocation-result.h:26</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1AllocationResult_html_a31246fcfde98bb83ffbf3829f5a3e835"><div class="ttname"><a href="classv8_1_1internal_1_1AllocationResult.html#a31246fcfde98bb83ffbf3829f5a3e835">v8::internal::AllocationResult::To</a></div><div class="ttdeci">bool To(Tagged&lt; T &gt; *obj) const</div><div class="ttdef"><b>Definition</b> <a href="allocation-result_8h_source.html#l00041">allocation-result.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ArrayBufferSweeper_html_a5fd86b603aaa53c5799679544e8b479f"><div class="ttname"><a href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a5fd86b603aaa53c5799679544e8b479f">v8::internal::ArrayBufferSweeper::RequestSweep</a></div><div class="ttdeci">void RequestSweep(SweepingType sweeping_type, TreatAllYoungAsPromoted treat_all_young_as_promoted)</div><div class="ttdef"><b>Definition</b> <a href="array-buffer-sweeper_8cc_source.html#l00278">array-buffer-sweeper.cc:278</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ArrayBufferSweeper_html_a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158"><div class="ttname"><a href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a64a03d5f0aa3d4fb500b899ed3ff3342aa60924e124da4d51bd4dc74c8f85b158">v8::internal::ArrayBufferSweeper::SweepingType::kFull</a></div><div class="ttdeci">@ kFull</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ArrayBufferSweeper_html_a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9"><div class="ttname"><a href="classv8_1_1internal_1_1ArrayBufferSweeper.html#a77240e54ef35b7c87630abc2b6b2b82ea1ea590aa4a64767508460736ac0edaa9">v8::internal::ArrayBufferSweeper::TreatAllYoungAsPromoted::kYes</a></div><div class="ttdeci">@ kYes</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Bootstrapper_html_a2ed96a283695ebb5718bfa6922f489d1"><div class="ttname"><a href="classv8_1_1internal_1_1Bootstrapper.html#a2ed96a283695ebb5718bfa6922f489d1">v8::internal::Bootstrapper::IsActive</a></div><div class="ttdeci">bool IsActive() const</div><div class="ttdef"><b>Definition</b> <a href="bootstrapper_8h_source.html#l00088">bootstrapper.h:88</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Builtins_html_a2260f6f209a0b9af26f64d5cf774018b"><div class="ttname"><a href="classv8_1_1internal_1_1Builtins.html#a2260f6f209a0b9af26f64d5cf774018b">v8::internal::Builtins::code</a></div><div class="ttdeci">V8_EXPORT_PRIVATE Tagged&lt; Code &gt; code(Builtin builtin)</div><div class="ttdef"><b>Definition</b> <a href="builtins_8cc_source.html#l00149">builtins.cc:149</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CompilationCache_html_a6c6f1bec5e0eeb46801ff0f051fd381a"><div class="ttname"><a href="classv8_1_1internal_1_1CompilationCache.html#a6c6f1bec5e0eeb46801ff0f051fd381a">v8::internal::CompilationCache::MarkCompactPrologue</a></div><div class="ttdeci">void MarkCompactPrologue()</div><div class="ttdef"><b>Definition</b> <a href="compilation-cache_8cc_source.html#l00370">compilation-cache.cc:370</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a06980681d462120291c2047124cd6a3a"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a06980681d462120291c2047124cd6a3a">v8::internal::ConcurrentMarking::IsStopped</a></div><div class="ttdeci">bool IsStopped()</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8cc_source.html#l00730">concurrent-marking.cc:730</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a3f1743cd46ce9240e4ffbb5098de064b"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a3f1743cd46ce9240e4ffbb5098de064b">v8::internal::ConcurrentMarking::FlushMemoryChunkData</a></div><div class="ttdeci">void FlushMemoryChunkData()</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8cc_source.html#l00755">concurrent-marking.cc:755</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a43f88ef394ce90569543e44ab0381cf8"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a43f88ef394ce90569543e44ab0381cf8">v8::internal::ConcurrentMarking::Join</a></div><div class="ttdeci">void Join()</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8cc_source.html#l00703">concurrent-marking.cc:703</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a884b7ca1bb9c41508d91ca620cdd29a9"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a884b7ca1bb9c41508d91ca620cdd29a9">v8::internal::ConcurrentMarking::garbage_collector</a></div><div class="ttdeci">GarbageCollector garbage_collector() const</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8h_source.html#l00094">concurrent-marking.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_a8eaf129f2de29cd9b015ed61b31babc5"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#a8eaf129f2de29cd9b015ed61b31babc5">v8::internal::ConcurrentMarking::FlushNativeContexts</a></div><div class="ttdeci">void FlushNativeContexts(NativeContextStats *main_stats)</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8cc_source.html#l00747">concurrent-marking.cc:747</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_aaf8d90cff77b3890a4de513377521ce4"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#aaf8d90cff77b3890a4de513377521ce4">v8::internal::ConcurrentMarking::RescheduleJobIfNeeded</a></div><div class="ttdeci">void RescheduleJobIfNeeded(GarbageCollector garbage_collector, TaskPriority priority=TaskPriority::kUserVisible)</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8cc_source.html#l00650">concurrent-marking.cc:650</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_adad9b09397a5d864fbfc58c3ac91ccda"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#adad9b09397a5d864fbfc58c3ac91ccda">v8::internal::ConcurrentMarking::set_another_ephemeron_iteration</a></div><div class="ttdeci">void set_another_ephemeron_iteration(bool another_ephemeron_iteration)</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8h_source.html#l00087">concurrent-marking.h:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ConcurrentMarking_html_aece67b16f36fe0fcea37a7bd7de858f6"><div class="ttname"><a href="classv8_1_1internal_1_1ConcurrentMarking.html#aece67b16f36fe0fcea37a7bd7de858f6">v8::internal::ConcurrentMarking::another_ephemeron_iteration</a></div><div class="ttdeci">bool another_ephemeron_iteration()</div><div class="ttdef"><b>Definition</b> <a href="concurrent-marking_8h_source.html#l00090">concurrent-marking.h:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_a6ae13c1f6a906672819ff2dc5223d3db"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#a6ae13c1f6a906672819ff2dc5223d3db">v8::internal::CppHeap::isolate</a></div><div class="ttdeci">Isolate * isolate() const</div><div class="ttdef"><b>Definition</b> <a href="cpp-heap_8h_source.html#l00171">cpp-heap.h:171</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_a836deff2ab06497da7a43de791b48445"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#a836deff2ab06497da7a43de791b48445">v8::internal::CppHeap::From</a></div><div class="ttdeci">static CppHeap * From(v8::CppHeap *heap)</div><div class="ttdef"><b>Definition</b> <a href="cpp-heap_8h_source.html#l00111">cpp-heap.h:111</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_a9171e6283279c509a9e40d2be7d9960e"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#a9171e6283279c509a9e40d2be7d9960e">v8::internal::CppHeap::EnterFinalPause</a></div><div class="ttdeci">void EnterFinalPause(cppgc::EmbedderStackState stack_state)</div><div class="ttdef"><b>Definition</b> <a href="cpp-heap_8cc_source.html#l00835">cpp-heap.cc:835</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_ac7034aca4b644909e7565f0beb372974"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#ac7034aca4b644909e7565f0beb372974">v8::internal::CppHeap::InitializeMarking</a></div><div class="ttdeci">void InitializeMarking(CollectionType, GarbageCollectionFlags=GarbageCollectionFlagValues::kNoFlags)</div><div class="ttdef"><b>Definition</b> <a href="cpp-heap_8cc_source.html#l00704">cpp-heap.cc:704</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CppHeap_html_ae67d52cdcb6ee95629fe16a51437588c"><div class="ttname"><a href="classv8_1_1internal_1_1CppHeap.html#ae67d52cdcb6ee95629fe16a51437588c">v8::internal::CppHeap::StartMarking</a></div><div class="ttdeci">void StartMarking()</div><div class="ttdef"><b>Definition</b> <a href="cpp-heap_8cc_source.html#l00781">cpp-heap.cc:781</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Deoptimizer_html_a7cbb81963c0529cc90612511d408db06"><div class="ttname"><a href="classv8_1_1internal_1_1Deoptimizer.html#a7cbb81963c0529cc90612511d408db06">v8::internal::Deoptimizer::DeoptimizeMarkedCode</a></div><div class="ttdeci">static void DeoptimizeMarkedCode(Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="deoptimizer_8cc_source.html#l00397">deoptimizer.cc:397</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EphemeronTableUpdatingItem_html"><div class="ttname"><a href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html">v8::internal::EphemeronTableUpdatingItem</a></div><div class="ttdef"><b>Definition</b> <a href="#l05512">mark-compact.cc:5512</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EphemeronTableUpdatingItem_html_a7e6d6b29e5e1b29d8f9d55450683e545"><div class="ttname"><a href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#a7e6d6b29e5e1b29d8f9d55450683e545">v8::internal::EphemeronTableUpdatingItem::EphemeronTableUpdatingItem</a></div><div class="ttdeci">EphemeronTableUpdatingItem(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l05516">mark-compact.cc:5516</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EphemeronTableUpdatingItem_html_ac54e0464bf7d4c9057d9a4480f6a6697"><div class="ttname"><a href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ac54e0464bf7d4c9057d9a4480f6a6697">v8::internal::EphemeronTableUpdatingItem::~EphemeronTableUpdatingItem</a></div><div class="ttdeci">~EphemeronTableUpdatingItem() override=default</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EphemeronTableUpdatingItem_html_ac949b97b5c3389e75e56760c50a48f20"><div class="ttname"><a href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ac949b97b5c3389e75e56760c50a48f20">v8::internal::EphemeronTableUpdatingItem::Process</a></div><div class="ttdeci">void Process() override</div><div class="ttdef"><b>Definition</b> <a href="#l05519">mark-compact.cc:5519</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EphemeronTableUpdatingItem_html_ae44eea2b28d64a5c3d98ad6160cd658e"><div class="ttname"><a href="classv8_1_1internal_1_1EphemeronTableUpdatingItem.html#ae44eea2b28d64a5c3d98ad6160cd658e">v8::internal::EphemeronTableUpdatingItem::EvacuationState</a></div><div class="ttdeci">EvacuationState</div><div class="ttdef"><b>Definition</b> <a href="#l05514">mark-compact.cc:5514</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewSpaceVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html">v8::internal::EvacuateNewSpaceVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l01660">mark-compact.cc:1660</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewSpaceVisitor_html_a5f6cb02b7a390f271ba17d2a67225665"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#a5f6cb02b7a390f271ba17d2a67225665">v8::internal::EvacuateNewSpaceVisitor::promoted_size</a></div><div class="ttdeci">intptr_t promoted_size()</div><div class="ttdef"><b>Definition</b> <a href="#l01694">mark-compact.cc:1694</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewSpaceVisitor_html_a6eda57074c3bed95d2e9619004bbd7d7"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#a6eda57074c3bed95d2e9619004bbd7d7">v8::internal::EvacuateNewSpaceVisitor::EvacuateNewSpaceVisitor</a></div><div class="ttdeci">EvacuateNewSpaceVisitor(Heap *heap, EvacuationAllocator *local_allocator, RecordMigratedSlotVisitor *record_visitor, PretenuringHandler::PretenuringFeedbackMap *local_pretenuring_feedback)</div><div class="ttdef"><b>Definition</b> <a href="#l01662">mark-compact.cc:1662</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewSpaceVisitor_html_ab44fb37b3abd158ebc6dc6a320e272e4"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#ab44fb37b3abd158ebc6dc6a320e272e4">v8::internal::EvacuateNewSpaceVisitor::Visit</a></div><div class="ttdeci">bool Visit(Tagged&lt; HeapObject &gt; object, int size) override</div><div class="ttdef"><b>Definition</b> <a href="#l01678">mark-compact.cc:1678</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewSpaceVisitor_html_af3370875fe71268897de4e0e641f591e"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewSpaceVisitor.html#af3370875fe71268897de4e0e641f591e">v8::internal::EvacuateNewSpaceVisitor::semispace_copied_size</a></div><div class="ttdeci">intptr_t semispace_copied_size()</div><div class="ttdef"><b>Definition</b> <a href="#l01695">mark-compact.cc:1695</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html">v8::internal::EvacuateNewToOldSpacePageVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l01754">mark-compact.cc:1754</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_html_a4d1553ba331c744c54b046ff216bfa76"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a4d1553ba331c744c54b046ff216bfa76">v8::internal::EvacuateNewToOldSpacePageVisitor::EvacuateNewToOldSpacePageVisitor</a></div><div class="ttdeci">EvacuateNewToOldSpacePageVisitor(Heap *heap, RecordMigratedSlotVisitor *record_visitor, PretenuringHandler::PretenuringFeedbackMap *local_pretenuring_feedback)</div><div class="ttdef"><b>Definition</b> <a href="#l01756">mark-compact.cc:1756</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_html_a67905c0c95dc72ca1edee835d2b00aa2"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a67905c0c95dc72ca1edee835d2b00aa2">v8::internal::EvacuateNewToOldSpacePageVisitor::account_moved_bytes</a></div><div class="ttdeci">void account_moved_bytes(intptr_t bytes)</div><div class="ttdef"><b>Definition</b> <a href="#l01780">mark-compact.cc:1780</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_html_a88b766bb4b1fdf92a63add2a730fff03"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#a88b766bb4b1fdf92a63add2a730fff03">v8::internal::EvacuateNewToOldSpacePageVisitor::moved_bytes</a></div><div class="ttdeci">intptr_t moved_bytes()</div><div class="ttdef"><b>Definition</b> <a href="#l01779">mark-compact.cc:1779</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_html_ab08bf909e4b9d6b8aa72af4c17767896"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#ab08bf909e4b9d6b8aa72af4c17767896">v8::internal::EvacuateNewToOldSpacePageVisitor::Move</a></div><div class="ttdeci">static void Move(PageMetadata *page)</div><div class="ttdef"><b>Definition</b> <a href="#l01765">mark-compact.cc:1765</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor_html_adf2216bbd8150b14345b02a55cf7e355"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateNewToOldSpacePageVisitor.html#adf2216bbd8150b14345b02a55cf7e355">v8::internal::EvacuateNewToOldSpacePageVisitor::Visit</a></div><div class="ttdeci">bool Visit(Tagged&lt; HeapObject &gt; object, int size) override</div><div class="ttdef"><b>Definition</b> <a href="#l01769">mark-compact.cc:1769</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateOldSpaceVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html">v8::internal::EvacuateOldSpaceVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l01790">mark-compact.cc:1790</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateOldSpaceVisitor_html_a6bd5bea82ad2b8dabf63b2dc3ab08833"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html#a6bd5bea82ad2b8dabf63b2dc3ab08833">v8::internal::EvacuateOldSpaceVisitor::Visit</a></div><div class="ttdeci">bool Visit(Tagged&lt; HeapObject &gt; object, int size) override</div><div class="ttdef"><b>Definition</b> <a href="#l01796">mark-compact.cc:1796</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateOldSpaceVisitor_html_ac66c14aebc595f4389334a3799a27404"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateOldSpaceVisitor.html#ac66c14aebc595f4389334a3799a27404">v8::internal::EvacuateOldSpaceVisitor::EvacuateOldSpaceVisitor</a></div><div class="ttdeci">EvacuateOldSpaceVisitor(Heap *heap, EvacuationAllocator *local_allocator, RecordMigratedSlotVisitor *record_visitor)</div><div class="ttdef"><b>Definition</b> <a href="#l01792">mark-compact.cc:1792</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateRecordOnlyVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html">v8::internal::EvacuateRecordOnlyVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l01809">mark-compact.cc:1809</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateRecordOnlyVisitor_html_a8e0748a9199cee3b8007aebb2d228604"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#a8e0748a9199cee3b8007aebb2d228604">v8::internal::EvacuateRecordOnlyVisitor::EvacuateRecordOnlyVisitor</a></div><div class="ttdeci">EvacuateRecordOnlyVisitor(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l01811">mark-compact.cc:1811</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateRecordOnlyVisitor_html_a8fb4b99fb5e8ee1714b20cb24f993a44"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#a8fb4b99fb5e8ee1714b20cb24f993a44">v8::internal::EvacuateRecordOnlyVisitor::live_object_size</a></div><div class="ttdeci">size_t live_object_size() const</div><div class="ttdef"><b>Definition</b> <a href="#l01825">mark-compact.cc:1825</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateRecordOnlyVisitor_html_aff475f46419c2e731b1670e8e00d0270"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateRecordOnlyVisitor.html#aff475f46419c2e731b1670e8e00d0270">v8::internal::EvacuateRecordOnlyVisitor::Visit</a></div><div class="ttdeci">bool Visit(Tagged&lt; HeapObject &gt; object, int size) override</div><div class="ttdef"><b>Definition</b> <a href="#l01814">mark-compact.cc:1814</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html">v8::internal::EvacuateVisitorBase</a></div><div class="ttdef"><b>Definition</b> <a href="#l01456">mark-compact.cc:1456</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a034bacd0b3a920ee6ecbcbaf24fc36ed"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a034bacd0b3a920ee6ecbcbaf24fc36ed">v8::internal::EvacuateVisitorBase::ExecuteMigrationObservers</a></div><div class="ttdeci">void ExecuteMigrationObservers(AllocationSpace dest, Tagged&lt; HeapObject &gt; src, Tagged&lt; HeapObject &gt; dst, int size)</div><div class="ttdef"><b>Definition</b> <a href="#l01635">mark-compact.cc:1635</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a0c3cbd23e8f28a0038f6d93b38bbdbbb"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a0c3cbd23e8f28a0038f6d93b38bbdbbb">v8::internal::EvacuateVisitorBase::heap_</a></div><div class="ttdeci">Heap * heap_</div><div class="ttdef"><b>Definition</b> <a href="#l01648">mark-compact.cc:1648</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a129c5df17e8230e4e0aecb5e183c4fd1"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a129c5df17e8230e4e0aecb5e183c4fd1">v8::internal::EvacuateVisitorBase::shared_string_table_</a></div><div class="ttdeci">const bool shared_string_table_</div><div class="ttdef"><b>Definition</b> <a href="#l01653">mark-compact.cc:1653</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a12a3ff0d411a446f60d4398f9e0f1877"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a12a3ff0d411a446f60d4398f9e0f1877">v8::internal::EvacuateVisitorBase::RawMigrateObject</a></div><div class="ttdeci">static void RawMigrateObject(EvacuateVisitorBase *base, Tagged&lt; HeapObject &gt; dst, Tagged&lt; HeapObject &gt; src, int size, AllocationSpace dest)</div><div class="ttdef"><b>Definition</b> <a href="#l01504">mark-compact.cc:1504</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a22152d774553dd906bca340c583ddbb1"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a22152d774553dd906bca340c583ddbb1">v8::internal::EvacuateVisitorBase::ShouldPromoteIntoSharedHeap</a></div><div class="ttdeci">bool ShouldPromoteIntoSharedHeap(Tagged&lt; Map &gt; map)</div><div class="ttdef"><b>Definition</b> <a href="#l01627">mark-compact.cc:1627</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a391412f99ab82d0e847dfcceb34d3cce"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a391412f99ab82d0e847dfcceb34d3cce">v8::internal::EvacuateVisitorBase::MigrateFunction</a></div><div class="ttdeci">void(*)(EvacuateVisitorBase *base, Tagged&lt; HeapObject &gt; dst, Tagged&lt; HeapObject &gt; src, int size, AllocationSpace dest) MigrateFunction</div><div class="ttdef"><b>Definition</b> <a href="#l01498">mark-compact.cc:1498</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a54053f4329e3d80206fd801c3d72d0c5"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a54053f4329e3d80206fd801c3d72d0c5">v8::internal::EvacuateVisitorBase::rng_</a></div><div class="ttdeci">std::optional&lt; base::RandomNumberGenerator &gt; rng_</div><div class="ttdef"><b>Definition</b> <a href="#l01657">mark-compact.cc:1657</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a6321f4dbe8353193b8e5bd4ea1d96cf4"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6321f4dbe8353193b8e5bd4ea1d96cf4">v8::internal::EvacuateVisitorBase::TryEvacuateObject</a></div><div class="ttdeci">bool TryEvacuateObject(AllocationSpace target_space, Tagged&lt; HeapObject &gt; object, int size, Tagged&lt; HeapObject &gt; *target_object)</div><div class="ttdef"><b>Definition</b> <a href="#l01598">mark-compact.cc:1598</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a66fbd0566143fccc89168a2e82a15e90"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a66fbd0566143fccc89168a2e82a15e90">v8::internal::EvacuateVisitorBase::cage_base</a></div><div class="ttdeci">PtrComprCageBase cage_base()</div><div class="ttdef"><b>Definition</b> <a href="#l01490">mark-compact.cc:1490</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a6a58e9aa2a85e1afbd833fb49c17df54"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a6a58e9aa2a85e1afbd833fb49c17df54">v8::internal::EvacuateVisitorBase::record_visitor_</a></div><div class="ttdeci">RecordMigratedSlotVisitor * record_visitor_</div><div class="ttdef"><b>Definition</b> <a href="#l01650">mark-compact.cc:1650</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_a9e08b20159fa7ad1617e50bb2ca66be2"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#a9e08b20159fa7ad1617e50bb2ca66be2">v8::internal::EvacuateVisitorBase::AddObserver</a></div><div class="ttdeci">void AddObserver(MigrationObserver *observer)</div><div class="ttdef"><b>Definition</b> <a href="#l01458">mark-compact.cc:1458</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_aa4d49f3e5e4c15d09fa367db1fcf1b6c"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa4d49f3e5e4c15d09fa367db1fcf1b6c">v8::internal::EvacuateVisitorBase::EvacuateVisitorBase</a></div><div class="ttdeci">EvacuateVisitorBase(Heap *heap, EvacuationAllocator *local_allocator, RecordMigratedSlotVisitor *record_visitor)</div><div class="ttdef"><b>Definition</b> <a href="#l01585">mark-compact.cc:1585</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_aa85c28a875b76dca3dfeb5698d5aafeb"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#aa85c28a875b76dca3dfeb5698d5aafeb">v8::internal::EvacuateVisitorBase::local_allocator_</a></div><div class="ttdeci">EvacuationAllocator * local_allocator_</div><div class="ttdef"><b>Definition</b> <a href="#l01649">mark-compact.cc:1649</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_acd573012c922867059b0f4ac0c6e2df3"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#acd573012c922867059b0f4ac0c6e2df3">v8::internal::EvacuateVisitorBase::MigrateObject</a></div><div class="ttdeci">void MigrateObject(Tagged&lt; HeapObject &gt; dst, Tagged&lt; HeapObject &gt; src, int size, AllocationSpace dest)</div><div class="ttdef"><b>Definition</b> <a href="#l01643">mark-compact.cc:1643</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_ae9ded849599f0cf5c83e5cd69d290cb2"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2">v8::internal::EvacuateVisitorBase::MigrationMode</a></div><div class="ttdeci">MigrationMode</div><div class="ttdef"><b>Definition</b> <a href="#l01488">mark-compact.cc:1488</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2a83b8471afdd467a199dc0ed307c2eae4">v8::internal::EvacuateVisitorBase::kFast</a></div><div class="ttdeci">@ kFast</div><div class="ttdef"><b>Definition</b> <a href="#l01488">mark-compact.cc:1488</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_ae9ded849599f0cf5c83e5cd69d290cb2ae90c548a51955fbdeb25dbb8441ea8ac"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#ae9ded849599f0cf5c83e5cd69d290cb2ae90c548a51955fbdeb25dbb8441ea8ac">v8::internal::EvacuateVisitorBase::kObserved</a></div><div class="ttdeci">@ kObserved</div><div class="ttdef"><b>Definition</b> <a href="#l01488">mark-compact.cc:1488</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_af11ebcfa59df555e097b381c1125beb0"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#af11ebcfa59df555e097b381c1125beb0">v8::internal::EvacuateVisitorBase::observers_</a></div><div class="ttdeci">std::vector&lt; MigrationObserver * &gt; observers_</div><div class="ttdef"><b>Definition</b> <a href="#l01651">mark-compact.cc:1651</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuateVisitorBase_html_afd183ddd5f921860066ac73daedb16be"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuateVisitorBase.html#afd183ddd5f921860066ac73daedb16be">v8::internal::EvacuateVisitorBase::migration_function_</a></div><div class="ttdeci">MigrateFunction migration_function_</div><div class="ttdef"><b>Definition</b> <a href="#l01652">mark-compact.cc:1652</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuationAllocator_html"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuationAllocator.html">v8::internal::EvacuationAllocator</a></div><div class="ttdef"><b>Definition</b> <a href="evacuation-allocator_8h_source.html#l00021">evacuation-allocator.h:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuationAllocator_html_af7bd391747123f679c7a30f8e826d830"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuationAllocator.html#af7bd391747123f679c7a30f8e826d830">v8::internal::EvacuationAllocator::Allocate</a></div><div class="ttdeci">AllocationResult Allocate(AllocationSpace space, int object_size, AllocationAlignment alignment)</div><div class="ttdef"><b>Definition</b> <a href="evacuation-allocator-inl_8h_source.html#l00015">evacuation-allocator-inl.h:15</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuationWeakObjectRetainer_html"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuationWeakObjectRetainer.html">v8::internal::EvacuationWeakObjectRetainer</a></div><div class="ttdef"><b>Definition</b> <a href="#l04983">mark-compact.cc:4983</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EvacuationWeakObjectRetainer_html_a9cb66ab7c2be36d8d10bc27be14b4594"><div class="ttname"><a href="classv8_1_1internal_1_1EvacuationWeakObjectRetainer.html#a9cb66ab7c2be36d8d10bc27be14b4594">v8::internal::EvacuationWeakObjectRetainer::RetainAs</a></div><div class="ttdeci">Tagged&lt; Object &gt; RetainAs(Tagged&lt; Object &gt; object) override</div><div class="ttdef"><b>Definition</b> <a href="#l04985">mark-compact.cc:4985</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html">v8::internal::Evacuator</a></div><div class="ttdef"><b>Definition</b> <a href="#l04489">mark-compact.cc:4489</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_a314fa42d39b9fa20e11342a5337383ef"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383ef">v8::internal::Evacuator::EvacuationMode</a></div><div class="ttdeci">EvacuationMode</div><div class="ttdef"><b>Definition</b> <a href="#l04491">mark-compact.cc:4491</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_a314fa42d39b9fa20e11342a5337383efa2fd8847afdb04aa160bc337c6e64f70e"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efa2fd8847afdb04aa160bc337c6e64f70e">v8::internal::Evacuator::kObjectsNewToOld</a></div><div class="ttdeci">@ kObjectsNewToOld</div><div class="ttdef"><b>Definition</b> <a href="#l04492">mark-compact.cc:4492</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_a314fa42d39b9fa20e11342a5337383efa315982c5c79641380ac25c95ecbcd594"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efa315982c5c79641380ac25c95ecbcd594">v8::internal::Evacuator::kPageNewToOld</a></div><div class="ttdeci">@ kPageNewToOld</div><div class="ttdef"><b>Definition</b> <a href="#l04493">mark-compact.cc:4493</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_a314fa42d39b9fa20e11342a5337383efacbcde51e3034957abd95f58cc8cd3a02"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#a314fa42d39b9fa20e11342a5337383efacbcde51e3034957abd95f58cc8cd3a02">v8::internal::Evacuator::kObjectsOldToOld</a></div><div class="ttdeci">@ kObjectsOldToOld</div><div class="ttdef"><b>Definition</b> <a href="#l04494">mark-compact.cc:4494</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_a55485870c03a2aa636ec73c893c3cb85"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#a55485870c03a2aa636ec73c893c3cb85">v8::internal::Evacuator::Evacuator</a></div><div class="ttdeci">Evacuator(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l04516">mark-compact.cc:4516</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_a6ac2dddaa2b1b1ddb1a576575595016c"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#a6ac2dddaa2b1b1ddb1a576575595016c">v8::internal::Evacuator::ComputeEvacuationMode</a></div><div class="ttdeci">static EvacuationMode ComputeEvacuationMode(MemoryChunk *chunk)</div><div class="ttdef"><b>Definition</b> <a href="#l04508">mark-compact.cc:4508</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_ad509768172b792b199449fb4f3c26b32"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#ad509768172b792b199449fb4f3c26b32">v8::internal::Evacuator::EvacuatePage</a></div><div class="ttdeci">void EvacuatePage(MutablePageMetadata *chunk)</div><div class="ttdef"><b>Definition</b> <a href="#l04573">mark-compact.cc:4573</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_ad92e1848f1a58ebcb4958852b3a9bfbd"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#ad92e1848f1a58ebcb4958852b3a9bfbd">v8::internal::Evacuator::EvacuationModeName</a></div><div class="ttdeci">static const char * EvacuationModeName(EvacuationMode mode)</div><div class="ttdef"><b>Definition</b> <a href="#l04497">mark-compact.cc:4497</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Evacuator_html_aff74cdcc3d9b14d81a3a023f13e403f1"><div class="ttname"><a href="classv8_1_1internal_1_1Evacuator.html#aff74cdcc3d9b14d81a3a023f13e403f1">v8::internal::Evacuator::AddObserver</a></div><div class="ttdeci">void AddObserver(MigrationObserver *observer)</div><div class="ttdef"><b>Definition</b> <a href="#l04534">mark-compact.cc:4534</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ExternalPointerSlot_html"><div class="ttname"><a href="classv8_1_1internal_1_1ExternalPointerSlot.html">v8::internal::ExternalPointerSlot</a></div><div class="ttdef"><b>Definition</b> <a href="slots_8h_source.html#l00320">slots.h:322</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullMarkingVisitorBase_html"><div class="ttname"><a href="classv8_1_1internal_1_1FullMarkingVisitorBase.html">v8::internal::FullMarkingVisitorBase</a></div><div class="ttdef"><b>Definition</b> <a href="marking-visitor_8h_source.html#l00251">marking-visitor.h:251</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullMaybeObjectSlot_html"><div class="ttname"><a href="classv8_1_1internal_1_1FullMaybeObjectSlot.html">v8::internal::FullMaybeObjectSlot</a></div><div class="ttdef"><b>Definition</b> <a href="slots_8h_source.html#l00153">slots.h:154</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullObjectSlot_html"><div class="ttname"><a href="classv8_1_1internal_1_1FullObjectSlot.html">v8::internal::FullObjectSlot</a></div><div class="ttdef"><b>Definition</b> <a href="slots_8h_source.html#l00099">slots.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullObjectSlot_html_a4d62bfa24617f62ac7fbb71110f6b3e9"><div class="ttname"><a href="classv8_1_1internal_1_1FullObjectSlot.html#a4d62bfa24617f62ac7fbb71110f6b3e9">v8::internal::FullObjectSlot::Relaxed_Store</a></div><div class="ttdeci">void Relaxed_Store(Tagged&lt; Object &gt; value) const</div><div class="ttdef"><b>Definition</b> <a href="slots-inl_8h_source.html#l00099">slots-inl.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullObjectSlot_html_a4e88c8ba68e8440c83abd6077dad7c0a"><div class="ttname"><a href="classv8_1_1internal_1_1FullObjectSlot.html#a4e88c8ba68e8440c83abd6077dad7c0a">v8::internal::FullObjectSlot::load</a></div><div class="ttdeci">Tagged&lt; Object &gt; load() const</div><div class="ttdef"><b>Definition</b> <a href="slots-inl_8h_source.html#l00047">slots-inl.h:47</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullObjectSlot_html_a503f3174807124ef8c65227ffb37250d"><div class="ttname"><a href="classv8_1_1internal_1_1FullObjectSlot.html#a503f3174807124ef8c65227ffb37250d">v8::internal::FullObjectSlot::Relaxed_Load</a></div><div class="ttdeci">Tagged&lt; Object &gt; Relaxed_Load() const</div><div class="ttdef"><b>Definition</b> <a href="slots-inl_8h_source.html#l00081">slots-inl.h:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullStringForwardingTableCleaner_html"><div class="ttname"><a href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html">v8::internal::FullStringForwardingTableCleaner</a></div><div class="ttdef"><b>Definition</b> <a href="#l02673">mark-compact.cc:2674</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullStringForwardingTableCleaner_html_a8dbc01746330b8c8a17559d38e3e4787"><div class="ttname"><a href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#a8dbc01746330b8c8a17559d38e3e4787">v8::internal::FullStringForwardingTableCleaner::ProcessFullWithStack</a></div><div class="ttdeci">void ProcessFullWithStack()</div><div class="ttdef"><b>Definition</b> <a href="#l02702">mark-compact.cc:2702</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullStringForwardingTableCleaner_html_aab81ddafa287b1e2b2cb04427954ce51"><div class="ttname"><a href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aab81ddafa287b1e2b2cb04427954ce51">v8::internal::FullStringForwardingTableCleaner::TransitionStrings</a></div><div class="ttdeci">void TransitionStrings()</div><div class="ttdef"><b>Definition</b> <a href="#l02683">mark-compact.cc:2683</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FullStringForwardingTableCleaner_html_aedd993cea743624dd174908e63046cf4"><div class="ttname"><a href="classv8_1_1internal_1_1FullStringForwardingTableCleaner.html#aedd993cea743624dd174908e63046cf4">v8::internal::FullStringForwardingTableCleaner::FullStringForwardingTableCleaner</a></div><div class="ttdeci">FullStringForwardingTableCleaner(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l02676">mark-compact.cc:2676</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GCTracer_html"><div class="ttname"><a href="classv8_1_1internal_1_1GCTracer.html">v8::internal::GCTracer</a></div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00107">gc-tracer.h:107</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GCTracer_html_a52bba12f494cafdfa348e34457698eaf"><div class="ttname"><a href="classv8_1_1internal_1_1GCTracer.html#a52bba12f494cafdfa348e34457698eaf">v8::internal::GCTracer::CodeFlushingIncrease</a></div><div class="ttdeci">uint16_t CodeFlushingIncrease() const</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8cc_source.html#l00714">gc-tracer.cc:714</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GCTracer_html_a9f2350f20960172b968c227996c3974d"><div class="ttname"><a href="classv8_1_1internal_1_1GCTracer.html#a9f2350f20960172b968c227996c3974d">v8::internal::GCTracer::NotifyMarkingStart</a></div><div class="ttdeci">void NotifyMarkingStart()</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8cc_source.html#l00678">gc-tracer.cc:678</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GCTracer_html_ad7d2f16e123b5303b24858b22ddde30f"><div class="ttname"><a href="classv8_1_1internal_1_1GCTracer.html#ad7d2f16e123b5303b24858b22ddde30f">v8::internal::GCTracer::CompactionSpeedInBytesPerMillisecond</a></div><div class="ttdeci">std::optional&lt; double &gt; CompactionSpeedInBytesPerMillisecond() const</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8cc_source.html#l01292">gc-tracer.cc:1292</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalHandleVector_html"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalHandleVector.html">v8::internal::GlobalHandleVector</a></div><div class="ttdef"><b>Definition</b> <a href="pretenuring-handler_8h_source.html#l00018">pretenuring-handler.h:18</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalHandles_html_a286951f39aa659e819fdcbcf31cd7d9d"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalHandles.html#a286951f39aa659e819fdcbcf31cd7d9d">v8::internal::GlobalHandles::ClearListOfYoungNodes</a></div><div class="ttdeci">void ClearListOfYoungNodes()</div><div class="ttdef"><b>Definition</b> <a href="global-handles_8cc_source.html#l00821">global-handles.cc:821</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalSafepoint_html_a32122b662818cfca794f899a8acac219"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalSafepoint.html#a32122b662818cfca794f899a8acac219">v8::internal::GlobalSafepoint::IterateClientIsolates</a></div><div class="ttdeci">void IterateClientIsolates(Callback callback)</div><div class="ttdef"><b>Definition</b> <a href="safepoint_8h_source.html#l00176">safepoint.h:176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HandleScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1HandleScope.html">v8::internal::HandleScope</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00258">handles.h:258</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapAllocator_html_a40796dc20e885e01382808559dbf68b5"><div class="ttname"><a href="classv8_1_1internal_1_1HeapAllocator.html#a40796dc20e885e01382808559dbf68b5">v8::internal::HeapAllocator::new_space_allocator</a></div><div class="ttdeci">MainAllocator * new_space_allocator()</div><div class="ttdef"><b>Definition</b> <a href="heap-allocator_8h_source.html#l00119">heap-allocator.h:119</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_a597d0e70459c694743e92d98a9292f92"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#a597d0e70459c694743e92d98a9292f92">v8::internal::HeapLayout::InYoungGeneration</a></div><div class="ttdeci">static V8_INLINE bool InYoungGeneration(Tagged&lt; Object &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-layout-inl_8h_source.html#l00041">heap-layout-inl.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_a7125239f9673b20fca00902b11d24726"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#a7125239f9673b20fca00902b11d24726">v8::internal::HeapLayout::InWritableSharedSpace</a></div><div class="ttdeci">static V8_INLINE bool InWritableSharedSpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-layout-inl_8h_source.html#l00065">heap-layout-inl.h:65</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_a91ac1680dc7f626bd8675e14ac660240"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#a91ac1680dc7f626bd8675e14ac660240">v8::internal::HeapLayout::InReadOnlySpace</a></div><div class="ttdeci">static V8_INLINE bool InReadOnlySpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-layout-inl_8h_source.html#l00018">heap-layout-inl.h:18</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_ae77bf0d1f0e1b86681fb29101ecd527a"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#ae77bf0d1f0e1b86681fb29101ecd527a">v8::internal::HeapLayout::InAnySharedSpace</a></div><div class="ttdeci">static V8_INLINE bool InAnySharedSpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-layout-inl_8h_source.html#l00070">heap-layout-inl.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapLayout_html_af21f0f74e8bed1d00aab0e877e001759"><div class="ttname"><a href="classv8_1_1internal_1_1HeapLayout.html#af21f0f74e8bed1d00aab0e877e001759">v8::internal::HeapLayout::InCodeSpace</a></div><div class="ttdeci">static V8_INLINE bool InCodeSpace(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-layout-inl_8h_source.html#l00078">heap-layout-inl.h:78</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapObjectVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1HeapObjectVisitor.html">v8::internal::HeapObjectVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l01450">mark-compact.cc:1450</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapObjectVisitor_html_ad67856ea986f2847ff6484c4f6b00e30"><div class="ttname"><a href="classv8_1_1internal_1_1HeapObjectVisitor.html#ad67856ea986f2847ff6484c4f6b00e30">v8::internal::HeapObjectVisitor::~HeapObjectVisitor</a></div><div class="ttdeci">virtual ~HeapObjectVisitor()=default</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapObjectVisitor_html_af7de561f80f01389fefacf8ffbb150eb"><div class="ttname"><a href="classv8_1_1internal_1_1HeapObjectVisitor.html#af7de561f80f01389fefacf8ffbb150eb">v8::internal::HeapObjectVisitor::Visit</a></div><div class="ttdeci">virtual bool Visit(Tagged&lt; HeapObject &gt; object, int size)=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapObject_html_a08d8b3cbf29c8d1287956c715df91faa"><div class="ttname"><a href="classv8_1_1internal_1_1HeapObject.html#a08d8b3cbf29c8d1287956c715df91faa">v8::internal::HeapObject::kHeaderSize</a></div><div class="ttdeci">static constexpr int kHeaderSize</div><div class="ttdef"><b>Definition</b> <a href="heap-object_8h_source.html#l00475">heap-object.h:475</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapObject_html_a6250a2489c3d60667b5b3153dff0fed3"><div class="ttname"><a href="classv8_1_1internal_1_1HeapObject.html#a6250a2489c3d60667b5b3153dff0fed3">v8::internal::HeapObject::kMapOffset</a></div><div class="ttdeci">static constexpr int kMapOffset</div><div class="ttdef"><b>Definition</b> <a href="heap-object_8h_source.html#l00474">heap-object.h:474</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapObject_html_a83a9550aebfc1ef15e9bf624a51ec4a4"><div class="ttname"><a href="classv8_1_1internal_1_1HeapObject.html#a83a9550aebfc1ef15e9bf624a51ec4a4">v8::internal::HeapObject::RequiredAlignment</a></div><div class="ttdeci">static AllocationAlignment RequiredAlignment(Tagged&lt; Map &gt; map)</div><div class="ttdef"><b>Definition</b> <a href="objects-inl_8h_source.html#l01618">objects-inl.h:1618</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapUtils_html_a0ca292749d64b1e6459e456cedc515b1"><div class="ttname"><a href="classv8_1_1internal_1_1HeapUtils.html#a0ca292749d64b1e6459e456cedc515b1">v8::internal::HeapUtils::GetOwnerHeap</a></div><div class="ttdeci">static V8_INLINE Heap * GetOwnerHeap(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-utils-inl_8h_source.html#l00014">heap-utils-inl.h:14</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1HeapVisitor.html">v8::internal::HeapVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="heap-visitor_8h_source.html#l00193">heap-visitor.h:193</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapVisitor_html_a4026d6517442ceaf7c3f2f74156fe9ae"><div class="ttname"><a href="classv8_1_1internal_1_1HeapVisitor.html#a4026d6517442ceaf7c3f2f74156fe9ae">v8::internal::HeapVisitor&lt; MarkCompactCollector::SharedHeapObjectVisitor &gt;::heap_</a></div><div class="ttdeci">const Heap * heap_</div><div class="ttdef"><b>Definition</b> <a href="heap-visitor_8h_source.html#l00294">heap-visitor.h:294</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HeapVisitor_html_ad4fb9c9a3f49f91865ebc0a8e47d6b40"><div class="ttname"><a href="classv8_1_1internal_1_1HeapVisitor.html#ad4fb9c9a3f49f91865ebc0a8e47d6b40">v8::internal::HeapVisitor::Visit</a></div><div class="ttdeci">V8_INLINE size_t Visit(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-visitor-inl_8h_source.html#l00095">heap-visitor-inl.h:95</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html">v8::internal::Heap</a></div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00192">heap.h:192</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a1d103d64b4ee81f0c943ff1810a43e52"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a1d103d64b4ee81f0c943ff1810a43e52">v8::internal::Heap::new_space</a></div><div class="ttdeci">NewSpace * new_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00719">heap.h:719</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a2a1fb2232941770fa521ed659ebe7e52"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a2a1fb2232941770fa521ed659ebe7e52">v8::internal::Heap::shared_space</a></div><div class="ttdeci">SharedSpace * shared_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00725">heap.h:725</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a30ff2252b7699b1d5bbdf5a69eb551b9"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a30ff2252b7699b1d5bbdf5a69eb551b9">v8::internal::Heap::lo_space</a></div><div class="ttdeci">OldLargeObjectSpace * lo_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00726">heap.h:726</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a3260de195711edf447ce37a2e67fe6ec"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a3260de195711edf447ce37a2e67fe6ec">v8::internal::Heap::new_lo_space</a></div><div class="ttdeci">NewLargeObjectSpace * new_lo_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00729">heap.h:729</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a3498d35123e49efe70dd0921c5dda802"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a3498d35123e49efe70dd0921c5dda802">v8::internal::Heap::use_new_space</a></div><div class="ttdeci">bool use_new_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01630">heap.h:1630</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a3d8741e9d5e50515a761be0ca0a6f725"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a3d8741e9d5e50515a761be0ca0a6f725">v8::internal::Heap::mark_compact_collector</a></div><div class="ttdeci">MarkCompactCollector * mark_compact_collector()</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00804">heap.h:804</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a49599076f26bcf5567b86d2dc86cc7b2"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a49599076f26bcf5567b86d2dc86cc7b2">v8::internal::Heap::Contains</a></div><div class="ttdeci">V8_EXPORT_PRIVATE bool Contains(Tagged&lt; HeapObject &gt; value) const</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l04296">heap.cc:4296</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a4b0a6b7b8b7d6daeff5de689c9008cbf"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a4b0a6b7b8b7d6daeff5de689c9008cbf">v8::internal::Heap::ShouldCurrentGCKeepAgesUnchanged</a></div><div class="ttdeci">bool ShouldCurrentGCKeepAgesUnchanged() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01350">heap.h:1350</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a4b0fd946ef07698c78c89b373c38c52b"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a4b0fd946ef07698c78c89b373c38c52b">v8::internal::Heap::OnMoveEvent</a></div><div class="ttdeci">void OnMoveEvent(Tagged&lt; HeapObject &gt; source, Tagged&lt; HeapObject &gt; target, int size_in_bytes)</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l03354">heap.cc:3354</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a5487524df177531b93290adb00d1ea76"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a5487524df177531b93290adb00d1ea76">v8::internal::Heap::incremental_marking</a></div><div class="ttdeci">IncrementalMarking * incremental_marking() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01045">heap.h:1045</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a5d71078a2feb52de929d9af219dda38e"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a5d71078a2feb52de929d9af219dda38e">v8::internal::Heap::old_space</a></div><div class="ttdeci">OldSpace * old_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00722">heap.h:722</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a5efbf6c659449dbe386992fa259f1734"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a5efbf6c659449dbe386992fa259f1734">v8::internal::Heap::array_buffer_sweeper</a></div><div class="ttdeci">ArrayBufferSweeper * array_buffer_sweeper()</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00814">heap.h:814</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a60173f589e673f370d9a115e3cb25a31"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a60173f589e673f370d9a115e3cb25a31">v8::internal::Heap::concurrent_marking</a></div><div class="ttdeci">ConcurrentMarking * concurrent_marking() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01053">heap.h:1053</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a70a182be5a70ea73eb023a5226174a4e"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a70a182be5a70ea73eb023a5226174a4e">v8::internal::Heap::trusted_space</a></div><div class="ttdeci">TrustedSpace * trusted_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00731">heap.h:731</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a5db4f3ca1a470a6da7e6cdfcaa4ef69d">v8::internal::Heap::IterateRootsMode::kMainIsolate</a></div><div class="ttdeci">@ kMainIsolate</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a77f39fcecd7558c4210bda0df86b1599a8b40e6ec432d43adb30d551e51018de0">v8::internal::Heap::IterateRootsMode::kClientIsolate</a></div><div class="ttdeci">@ kClientIsolate</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a7a2c58e09fbea6b68a9a0fbffb98d124"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a7a2c58e09fbea6b68a9a0fbffb98d124">v8::internal::Heap::IterateConservativeStackRoots</a></div><div class="ttdeci">void IterateConservativeStackRoots(RootVisitor *v, IterateRootsMode roots_mode=IterateRootsMode::kMainIsolate)</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l04818">heap.cc:4818</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a888246e231dc6514e84cbad718195f2e"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a888246e231dc6514e84cbad718195f2e">v8::internal::Heap::IterateRoots</a></div><div class="ttdeci">void IterateRoots(RootVisitor *v, base::EnumSet&lt; SkipRoot &gt; options, IterateRootsMode roots_mode=IterateRootsMode::kMainIsolate)</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l04639">heap.cc:4639</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a8e1fa8425bdd18538f8ff8896ea6940d"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a8e1fa8425bdd18538f8ff8896ea6940d">v8::internal::Heap::memory_allocator</a></div><div class="ttdeci">MemoryAllocator * memory_allocator()</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00794">heap.h:794</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a9ccabcd8f0f06c43ed0d24bd66c9c8c8"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a9ccabcd8f0f06c43ed0d24bd66c9c8c8">v8::internal::Heap::code_lo_space</a></div><div class="ttdeci">CodeLargeObjectSpace * code_lo_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00727">heap.h:727</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_aa377c3a995f21d5bbcd1fffdc40758f9"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#aa377c3a995f21d5bbcd1fffdc40758f9">v8::internal::Heap::trusted_lo_space</a></div><div class="ttdeci">TrustedLargeObjectSpace * trusted_lo_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00735">heap.h:735</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ab28602f29288785c81dc2ccfb7669b86"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ab28602f29288785c81dc2ccfb7669b86">v8::internal::Heap::code_space</a></div><div class="ttdeci">CodeSpace * code_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00724">heap.h:724</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ab412dcd5a018b216f78f0d2ea4fe6ecb"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ab412dcd5a018b216f78f0d2ea4fe6ecb">v8::internal::Heap::marking_state</a></div><div class="ttdeci">MarkingState * marking_state()</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01608">heap.h:1608</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ac2186ae87a3cd28acde06a9f50d31b2c"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ac2186ae87a3cd28acde06a9f50d31b2c">v8::internal::Heap::FatalProcessOutOfMemory</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void FatalProcessOutOfMemory(const char *location)</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l06354">heap.cc:6354</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ac434b6b237146b5964c6b76d7a8ad2c6"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ac434b6b237146b5964c6b76d7a8ad2c6">v8::internal::Heap::ShouldUseBackgroundThreads</a></div><div class="ttdeci">bool ShouldUseBackgroundThreads() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l00460">heap.cc:460</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ac689c784f01c1729d13aeb4dc389c398"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ac689c784f01c1729d13aeb4dc389c398">v8::internal::Heap::Unmark</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void Unmark()</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l03597">heap.cc:3597</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_acdb258ef166633d7ea0912d882109e30"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#acdb258ef166633d7ea0912d882109e30">v8::internal::Heap::paged_new_space</a></div><div class="ttdeci">PagedNewSpace * paged_new_space() const</div><div class="ttdef"><b>Definition</b> <a href="heap-inl_8h_source.html#l00425">heap-inl.h:425</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad2128865e219ddb70695e23563141da9"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad2128865e219ddb70695e23563141da9">v8::internal::Heap::ShouldOptimizeForMemoryUsage</a></div><div class="ttdeci">V8_EXPORT_PRIVATE bool ShouldOptimizeForMemoryUsage()</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l03769">heap.cc:3769</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ad7f6751c2a6c31794b119034eed13e76"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ad7f6751c2a6c31794b119034eed13e76">v8::internal::Heap::non_atomic_marking_state</a></div><div class="ttdeci">NonAtomicMarkingState * non_atomic_marking_state()</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01610">heap.h:1610</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_add922c9ad5face7a8949d93c0e783c91"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#add922c9ad5face7a8949d93c0e783c91">v8::internal::Heap::cpp_heap</a></div><div class="ttdeci">v8::CppHeap * cpp_heap() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01098">heap.h:1098</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ae12ef5f250417c33f81f5f599feffe17"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ae12ef5f250417c33f81f5f599feffe17">v8::internal::Heap::tracer</a></div><div class="ttdeci">GCTracer * tracer()</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l00792">heap.h:792</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ae4625769d6915289a7acd2c41144b9c3"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ae4625769d6915289a7acd2c41144b9c3">v8::internal::Heap::IsGCWithStack</a></div><div class="ttdeci">bool IsGCWithStack() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l00540">heap.cc:540</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_ae5160ad63bc51ff7b36e8f247be48f63"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#ae5160ad63bc51ff7b36e8f247be48f63">v8::internal::Heap::isolate</a></div><div class="ttdeci">Isolate * isolate() const</div><div class="ttdef"><b>Definition</b> <a href="heap-inl_8h_source.html#l00059">heap-inl.h:59</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_af2a1e9678f976d363e02ed9890509128"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#af2a1e9678f976d363e02ed9890509128">v8::internal::Heap::allocator</a></div><div class="ttdeci">HeapAllocator * allocator()</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01627">heap.h:1627</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_afd52b490b8d03599fbf5510d6f54b117"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#afd52b490b8d03599fbf5510d6f54b117">v8::internal::Heap::ShouldReduceMemory</a></div><div class="ttdeci">bool ShouldReduceMemory() const</div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l01604">heap.h:1604</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_affa42c4fc2313750c08caf4556f44790"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#affa42c4fc2313750c08caf4556f44790">v8::internal::Heap::CreateObjectStats</a></div><div class="ttdeci">void CreateObjectStats()</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l07047">heap.cc:7047</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IncrementalMarking_html_a36f76d27a7a670a4b270804cef79cea1"><div class="ttname"><a href="classv8_1_1internal_1_1IncrementalMarking.html#a36f76d27a7a670a4b270804cef79cea1">v8::internal::IncrementalMarking::IsMarking</a></div><div class="ttdeci">bool IsMarking() const</div><div class="ttdef"><b>Definition</b> <a href="incremental-marking_8h_source.html#l00087">incremental-marking.h:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IncrementalMarking_html_a421afcfedbad9dba889295ea646625fa"><div class="ttname"><a href="classv8_1_1internal_1_1IncrementalMarking.html#a421afcfedbad9dba889295ea646625fa">v8::internal::IncrementalMarking::IsStopped</a></div><div class="ttdeci">bool IsStopped() const</div><div class="ttdef"><b>Definition</b> <a href="incremental-marking_8h_source.html#l00086">incremental-marking.h:86</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IncrementalMarking_html_af7648dd98be368a6b882111f2c62441c"><div class="ttname"><a href="classv8_1_1internal_1_1IncrementalMarking.html#af7648dd98be368a6b882111f2c62441c">v8::internal::IncrementalMarking::IsMajorMarking</a></div><div class="ttdeci">bool IsMajorMarking() const</div><div class="ttdef"><b>Definition</b> <a href="incremental-marking_8h_source.html#l00082">incremental-marking.h:82</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IndirectPointerSlot_html"><div class="ttname"><a href="classv8_1_1internal_1_1IndirectPointerSlot.html">v8::internal::IndirectPointerSlot</a></div><div class="ttdef"><b>Definition</b> <a href="slots_8h_source.html#l00474">slots.h:476</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InstructionStream_1_1BodyDescriptor_html_a3dc621f70c59e9b883069ff79ec147c2"><div class="ttname"><a href="classv8_1_1internal_1_1InstructionStream_1_1BodyDescriptor.html#a3dc621f70c59e9b883069ff79ec147c2">v8::internal::InstructionStream::BodyDescriptor::IterateBody</a></div><div class="ttdeci">static void IterateBody(Tagged&lt; Map &gt; map, Tagged&lt; HeapObject &gt; obj, ObjectVisitor *v)</div><div class="ttdef"><b>Definition</b> <a href="objects-body-descriptors-inl_8h_source.html#l01274">objects-body-descriptors-inl.h:1274</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InstructionStream_html_a609ae4cdb6b49935b0fc6a55711a5191"><div class="ttname"><a href="classv8_1_1internal_1_1InstructionStream.html#a609ae4cdb6b49935b0fc6a55711a5191">v8::internal::InstructionStream::FromTargetAddress</a></div><div class="ttdeci">static Tagged&lt; InstructionStream &gt; FromTargetAddress(Address address)</div><div class="ttdef"><b>Definition</b> <a href="instruction-stream-inl_8h_source.html#l00232">instruction-stream-inl.h:232</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalIndex_html"><div class="ttname"><a href="classv8_1_1internal_1_1InternalIndex.html">v8::internal::InternalIndex</a></div><div class="ttdef"><b>Definition</b> <a href="internal-index_8h_source.html#l00020">internal-index.h:20</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalizedStringTableCleaner_html"><div class="ttname"><a href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html">v8::internal::InternalizedStringTableCleaner</a></div><div class="ttdef"><b>Definition</b> <a href="#l01103">mark-compact.cc:1103</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalizedStringTableCleaner_html_a1361cd9f1f8f2588337cb24d7d376211"><div class="ttname"><a href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#a1361cd9f1f8f2588337cb24d7d376211">v8::internal::InternalizedStringTableCleaner::VisitRootPointers</a></div><div class="ttdeci">void VisitRootPointers(Root root, const char *description, FullObjectSlot start, FullObjectSlot end) override</div><div class="ttdef"><b>Definition</b> <a href="#l01107">mark-compact.cc:1107</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalizedStringTableCleaner_html_a75acba88de7b78ce94f33431d41af1c8"><div class="ttname"><a href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#a75acba88de7b78ce94f33431d41af1c8">v8::internal::InternalizedStringTableCleaner::InternalizedStringTableCleaner</a></div><div class="ttdeci">InternalizedStringTableCleaner(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l01105">mark-compact.cc:1105</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalizedStringTableCleaner_html_acc8652376ea10be09435416bd4a4c6dc"><div class="ttname"><a href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#acc8652376ea10be09435416bd4a4c6dc">v8::internal::InternalizedStringTableCleaner::PointersRemoved</a></div><div class="ttdeci">int PointersRemoved() const</div><div class="ttdef"><b>Definition</b> <a href="#l01132">mark-compact.cc:1132</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InternalizedStringTableCleaner_html_ad0ec0e4d1601a86840938148cd39c210"><div class="ttname"><a href="classv8_1_1internal_1_1InternalizedStringTableCleaner.html#ad0ec0e4d1601a86840938148cd39c210">v8::internal::InternalizedStringTableCleaner::VisitRootPointers</a></div><div class="ttdeci">void VisitRootPointers(Root root, const char *description, OffHeapObjectSlot start, OffHeapObjectSlot end) override</div><div class="ttdef"><b>Definition</b> <a href="#l01112">mark-compact.cc:1112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1IsolateGroup_html_a0204089c94ecd427a1607743e7b3fb82"><div class="ttname"><a href="classv8_1_1internal_1_1IsolateGroup.html#a0204089c94ecd427a1607743e7b3fb82">v8::internal::IsolateGroup::current</a></div><div class="ttdeci">static IsolateGroup * current()</div><div class="ttdef"><b>Definition</b> <a href="isolate-group_8h_source.html#l00130">isolate-group.h:130</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00575">isolate.h:575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a0567c99c2a3ff016df9e7abb30688075"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a0567c99c2a3ff016df9e7abb30688075">v8::internal::Isolate::global_handles</a></div><div class="ttdeci">GlobalHandles * global_handles() const</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01405">isolate.h:1405</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a10fb79c24c416de942fc05b82680b440"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a10fb79c24c416de942fc05b82680b440">v8::internal::Isolate::serializer_enabled</a></div><div class="ttdeci">bool serializer_enabled() const</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01539">isolate.h:1539</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a273ae6a43c89de8e7be45e1e702c08c3"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a273ae6a43c89de8e7be45e1e702c08c3">v8::internal::Isolate::compilation_cache</a></div><div class="ttdeci">CompilationCache * compilation_cache()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01180">isolate.h:1180</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a3dcd398397211e68e3992961c3875c67"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a3dcd398397211e68e3992961c3875c67">v8::internal::Isolate::bootstrapper</a></div><div class="ttdeci">Bootstrapper * bootstrapper()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01167">isolate.h:1167</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a473cf310f12ac1cf2ccdd546a81b9807"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a473cf310f12ac1cf2ccdd546a81b9807">v8::internal::Isolate::global_safepoint</a></div><div class="ttdeci">GlobalSafepoint * global_safepoint() const</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l02254">isolate.h:2254</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a67c396ca00a91e3b3c6131d6db14a438"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a67c396ca00a91e3b3c6131d6db14a438">v8::internal::Isolate::traced_handles</a></div><div class="ttdeci">TracedHandles * traced_handles()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01407">isolate.h:1407</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a8f158e28d6a29d8bf8459c45ba5e40c2"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a8f158e28d6a29d8bf8459c45ba5e40c2">v8::internal::Isolate::heap</a></div><div class="ttdeci">Heap * heap()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01188">isolate.h:1188</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a939fb55411a48a11cd43f3de55ef5ff3"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a939fb55411a48a11cd43f3de55ef5ff3">v8::internal::Isolate::AllowsCodeCompaction</a></div><div class="ttdeci">bool AllowsCodeCompaction() const</div><div class="ttdef"><b>Definition</b> <a href="isolate_8cc_source.html#l06110">isolate.cc:6110</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ab3a054a790a837106700439518bc0a05"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ab3a054a790a837106700439518bc0a05">v8::internal::Isolate::builtins</a></div><div class="ttdeci">Builtins * builtins()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01432">isolate.h:1432</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ad0665071d159ceddd6689d7e0abf7d70"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ad0665071d159ceddd6689d7e0abf7d70">v8::internal::Isolate::shared_space_isolate</a></div><div class="ttdeci">Isolate * shared_space_isolate() const</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l02244">isolate.h:2244</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_af9a9ea8c719a49a7e1471f09dab891fc"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#af9a9ea8c719a49a7e1471f09dab891fc">v8::internal::Isolate::string_forwarding_table</a></div><div class="ttdeci">StringForwardingTable * string_forwarding_table() const</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00776">isolate.h:776</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_af9cf39c5ddba566eeed46a1f5064a561"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#af9cf39c5ddba566eeed46a1f5064a561">v8::internal::Isolate::fuzzer_rng</a></div><div class="ttdeci">base::RandomNumberGenerator * fuzzer_rng()</div><div class="ttdef"><b>Definition</b> <a href="isolate_8cc_source.html#l06280">isolate.cc:6280</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LargeObjectSpace_html_a2bffda9f3fd2a5766480a0b4f2c77a82"><div class="ttname"><a href="classv8_1_1internal_1_1LargeObjectSpace.html#a2bffda9f3fd2a5766480a0b4f2c77a82">v8::internal::LargeObjectSpace::Size</a></div><div class="ttdeci">size_t Size() const override</div><div class="ttdef"><b>Definition</b> <a href="large-spaces_8h_source.html#l00046">large-spaces.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LargePageMetadata_html"><div class="ttname"><a href="classv8_1_1internal_1_1LargePageMetadata.html">v8::internal::LargePageMetadata</a></div><div class="ttdef"><b>Definition</b> <a href="large-page-metadata_8h_source.html#l00013">large-page-metadata.h:13</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LiveObjectRange_html"><div class="ttname"><a href="classv8_1_1internal_1_1LiveObjectRange.html">v8::internal::LiveObjectRange</a></div><div class="ttdef"><b>Definition</b> <a href="live-object-range_8h_source.html#l00017">live-object-range.h:17</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LiveObjectVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1LiveObjectVisitor.html">v8::internal::LiveObjectVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l04614">mark-compact.cc:4614</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LocalHeap_html_a931c2069795353f7ef7117bd5b59300c"><div class="ttname"><a href="classv8_1_1internal_1_1LocalHeap.html#a931c2069795353f7ef7117bd5b59300c">v8::internal::LocalHeap::marking_barrier</a></div><div class="ttdeci">MarkingBarrier * marking_barrier()</div><div class="ttdef"><b>Definition</b> <a href="local-heap_8h_source.html#l00127">local-heap.h:127</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainAllocator_html_a04f6de162f67fb3e7dc646709baadbbf"><div class="ttname"><a href="classv8_1_1internal_1_1MainAllocator.html#a04f6de162f67fb3e7dc646709baadbbf">v8::internal::MainAllocator::original_top_acquire</a></div><div class="ttdeci">Address original_top_acquire() const</div><div class="ttdef"><b>Definition</b> <a href="main-allocator_8h_source.html#l00182">main-allocator.h:182</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainAllocator_html_a97ac067e0a70133b0075187bc0bb28bd"><div class="ttname"><a href="classv8_1_1internal_1_1MainAllocator.html#a97ac067e0a70133b0075187bc0bb28bd">v8::internal::MainAllocator::IsLabValid</a></div><div class="ttdeci">V8_INLINE bool IsLabValid() const</div><div class="ttdef"><b>Definition</b> <a href="main-allocator_8h_source.html#l00252">main-allocator.h:252</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainAllocator_html_affcbea59347c2fdd71bfdf184be65197"><div class="ttname"><a href="classv8_1_1internal_1_1MainAllocator.html#affcbea59347c2fdd71bfdf184be65197">v8::internal::MainAllocator::top</a></div><div class="ttdeci">Address top() const</div><div class="ttdef"><b>Definition</b> <a href="main-allocator_8h_source.html#l00169">main-allocator.h:169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainMarkingVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1MainMarkingVisitor.html">v8::internal::MainMarkingVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l00252">mark-compact.cc:253</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MainMarkingVisitor_html_ad945b37c8e372cb371cb6bf74b10fcd4"><div class="ttname"><a href="classv8_1_1internal_1_1MainMarkingVisitor.html#ad945b37c8e372cb371cb6bf74b10fcd4">v8::internal::MainMarkingVisitor::MainMarkingVisitor</a></div><div class="ttdeci">MainMarkingVisitor(MarkingWorklists::Local *local_marking_worklists, WeakObjects::Local *local_weak_objects, Heap *heap, unsigned mark_compact_epoch, base::EnumSet&lt; CodeFlushMode &gt; code_flush_mode, bool should_keep_ages_unchanged, uint16_t code_flushing_increase)</div><div class="ttdef"><b>Definition</b> <a href="#l00255">mark-compact.cc:255</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Malloced_html"><div class="ttname"><a href="classv8_1_1internal_1_1Malloced.html">v8::internal::Malloced</a></div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00032">allocation.h:32</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapWord_html"><div class="ttname"><a href="classv8_1_1internal_1_1MapWord.html">v8::internal::MapWord</a></div><div class="ttdef"><b>Definition</b> <a href="objects_8h_source.html#l00782">objects.h:782</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapWord_html_a2da249cf285df1454abda362ce7a293e"><div class="ttname"><a href="classv8_1_1internal_1_1MapWord.html#a2da249cf285df1454abda362ce7a293e">v8::internal::MapWord::IsPacked</a></div><div class="ttdeci">static constexpr bool IsPacked(Address)</div><div class="ttdef"><b>Definition</b> <a href="objects_8h_source.html#l00836">objects.h:836</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapWord_html_a9dca2a41d176b2abbd067e956796a439"><div class="ttname"><a href="classv8_1_1internal_1_1MapWord.html#a9dca2a41d176b2abbd067e956796a439">v8::internal::MapWord::IsForwardingAddress</a></div><div class="ttdeci">bool IsForwardingAddress() const</div><div class="ttdef"><b>Definition</b> <a href="objects-inl_8h_source.html#l01202">objects-inl.h:1202</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapWord_html_ae428c02beb0d195fcfb8b44b3c149efa"><div class="ttname"><a href="classv8_1_1internal_1_1MapWord.html#ae428c02beb0d195fcfb8b44b3c149efa">v8::internal::MapWord::FromForwardingAddress</a></div><div class="ttdeci">static MapWord FromForwardingAddress(Tagged&lt; HeapObject &gt; map_word_host, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="objects-inl_8h_source.html#l01213">objects-inl.h:1213</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MapWord_html_af98460db3cf5e0731cdd50d22b7e4c27"><div class="ttname"><a href="classv8_1_1internal_1_1MapWord.html#af98460db3cf5e0731cdd50d22b7e4c27">v8::internal::MapWord::ToForwardingAddress</a></div><div class="ttdeci">Tagged&lt; HeapObject &gt; ToForwardingAddress(Tagged&lt; HeapObject &gt; map_word_host)</div><div class="ttdef"><b>Definition</b> <a href="objects-inl_8h_source.html#l01229">objects-inl.h:1229</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html">v8::internal::MarkCompactCollector::ClearTrivialWeakRefJobItem</a></div><div class="ttdef"><b>Definition</b> <a href="#l02875">mark-compact.cc:2876</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem_html_a499931b7bd824dc60fb534c147dadad9"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a499931b7bd824dc60fb534c147dadad9">v8::internal::MarkCompactCollector::ClearTrivialWeakRefJobItem::ClearTrivialWeakRefJobItem</a></div><div class="ttdeci">ClearTrivialWeakRefJobItem(MarkCompactCollector *collector)</div><div class="ttdef"><b>Definition</b> <a href="#l02878">mark-compact.cc:2878</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem_html_a4cb7f1b4e37cdd219a4b65a470c296e0"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a4cb7f1b4e37cdd219a4b65a470c296e0">v8::internal::MarkCompactCollector::ClearTrivialWeakRefJobItem::trace_id</a></div><div class="ttdeci">uint64_t trace_id() const</div><div class="ttdef"><b>Definition</b> <a href="#l02900">mark-compact.cc:2900</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem_html_a69e59718369b2dd601760d202b8d20ae"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1ClearTrivialWeakRefJobItem.html#a69e59718369b2dd601760d202b8d20ae">v8::internal::MarkCompactCollector::ClearTrivialWeakRefJobItem::Run</a></div><div class="ttdeci">void Run(JobDelegate *delegate) final</div><div class="ttdef"><b>Definition</b> <a href="#l02884">mark-compact.cc:2884</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l00959">mark-compact.cc:960</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_a2183640daa791b6e179c41a56af82255"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a2183640daa791b6e179c41a56af82255">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::VisitMapPointer</a></div><div class="ttdeci">void VisitMapPointer(Tagged&lt; HeapObject &gt; host) final</div><div class="ttdef"><b>Definition</b> <a href="#l00970">mark-compact.cc:970</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_a42bf6bc8999d191223cab0d468eb7db8"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a42bf6bc8999d191223cab0d468eb7db8">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::VisitInstructionStreamPointer</a></div><div class="ttdeci">void VisitInstructionStreamPointer(Tagged&lt; Code &gt; host, InstructionStreamSlot slot) override</div><div class="ttdef"><b>Definition</b> <a href="#l00984">mark-compact.cc:984</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_a52151f4b401932c665a3374cc8f7e2dd"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a52151f4b401932c665a3374cc8f7e2dd">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::VisitCodeTarget</a></div><div class="ttdeci">void VisitCodeTarget(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l00995">mark-compact.cc:995</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_a7b773b2815d0ae8e57e44d3b8a17ff19"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a7b773b2815d0ae8e57e44d3b8a17ff19">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::VisitPointer</a></div><div class="ttdeci">void VisitPointer(Tagged&lt; HeapObject &gt; host, ObjectSlot p) final</div><div class="ttdef"><b>Definition</b> <a href="#l00966">mark-compact.cc:966</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_a997aee5aabfbef6df6c0d6cda031580c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#a997aee5aabfbef6df6c0d6cda031580c">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, MaybeObjectSlot start, MaybeObjectSlot end) final</div><div class="ttdef"><b>Definition</b> <a href="#l00989">mark-compact.cc:989</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_add5c795d9670b0c59735d7563457d923"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#add5c795d9670b0c59735d7563457d923">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::VisitEmbeddedPointer</a></div><div class="ttdeci">void VisitEmbeddedPointer(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l01002">mark-compact.cc:1002</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_adfdf4627a33fb7f125335a4371840ef7"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#adfdf4627a33fb7f125335a4371840ef7">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, ObjectSlot start, ObjectSlot end) final</div><div class="ttdef"><b>Definition</b> <a href="#l00974">mark-compact.cc:974</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor_html_ae037bbace247314c3f474eab73defb45"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1CustomRootBodyMarkingVisitor.html#ae037bbace247314c3f474eab73defb45">v8::internal::MarkCompactCollector::CustomRootBodyMarkingVisitor::CustomRootBodyMarkingVisitor</a></div><div class="ttdeci">CustomRootBodyMarkingVisitor(MarkCompactCollector *collector)</div><div class="ttdef"><b>Definition</b> <a href="#l00962">mark-compact.cc:962</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html">v8::internal::MarkCompactCollector::FilterNonTrivialWeakRefJobItem</a></div><div class="ttdef"><b>Definition</b> <a href="#l02907">mark-compact.cc:2908</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem_html_a12aa5d6e9b216c7f21a2126328dfc8c8"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a12aa5d6e9b216c7f21a2126328dfc8c8">v8::internal::MarkCompactCollector::FilterNonTrivialWeakRefJobItem::Run</a></div><div class="ttdeci">void Run(JobDelegate *delegate) final</div><div class="ttdef"><b>Definition</b> <a href="#l02918">mark-compact.cc:2918</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem_html_a2553a069825c0f163871407001a81d8a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a2553a069825c0f163871407001a81d8a">v8::internal::MarkCompactCollector::FilterNonTrivialWeakRefJobItem::trace_id</a></div><div class="ttdeci">uint64_t trace_id() const</div><div class="ttdef"><b>Definition</b> <a href="#l02934">mark-compact.cc:2934</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem_html_a99d39e8918d9be0080294ca98247ae99"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1FilterNonTrivialWeakRefJobItem.html#a99d39e8918d9be0080294ca98247ae99">v8::internal::MarkCompactCollector::FilterNonTrivialWeakRefJobItem::FilterNonTrivialWeakRefJobItem</a></div><div class="ttdeci">FilterNonTrivialWeakRefJobItem(MarkCompactCollector *collector)</div><div class="ttdef"><b>Definition</b> <a href="#l02910">mark-compact.cc:2910</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l01022">mark-compact.cc:1023</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_a0bf824516021b2368b38148540b85096"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a0bf824516021b2368b38148540b85096">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::SharedHeapObjectVisitor</a></div><div class="ttdeci">SharedHeapObjectVisitor(MarkCompactCollector *collector)</div><div class="ttdef"><b>Definition</b> <a href="#l01025">mark-compact.cc:1025</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_a16776b5432f51c6c2b6252bc22420b0a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a16776b5432f51c6c2b6252bc22420b0a">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitPointer</a></div><div class="ttdeci">void VisitPointer(Tagged&lt; HeapObject &gt; host, ObjectSlot p) final</div><div class="ttdef"><b>Definition</b> <a href="#l01028">mark-compact.cc:1028</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_a2123ddc921b380733dfb73b59a4757e9"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a2123ddc921b380733dfb73b59a4757e9">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, ObjectSlot start, ObjectSlot end) final</div><div class="ttdef"><b>Definition</b> <a href="#l01043">mark-compact.cc:1043</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_a3c6ff55ec2916dad128b28633956c487"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a3c6ff55ec2916dad128b28633956c487">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitEmbeddedPointer</a></div><div class="ttdeci">void VisitEmbeddedPointer(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l01072">mark-compact.cc:1072</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_a5fec89650b78f0bda9c57a22038c95bb"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a5fec89650b78f0bda9c57a22038c95bb">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitMapPointer</a></div><div class="ttdeci">void VisitMapPointer(Tagged&lt; HeapObject &gt; host) final</div><div class="ttdef"><b>Definition</b> <a href="#l01039">mark-compact.cc:1039</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_a8012ea60cbce361a19727bef2ca999ec"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a8012ea60cbce361a19727bef2ca999ec">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, MaybeObjectSlot start, MaybeObjectSlot end) final</div><div class="ttdef"><b>Definition</b> <a href="#l01058">mark-compact.cc:1058</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_a91df02cd39747af4cbe3b876f511e192"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#a91df02cd39747af4cbe3b876f511e192">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitCodeTarget</a></div><div class="ttdeci">void VisitCodeTarget(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l01067">mark-compact.cc:1067</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_ac87920e3725a9ecaea79cefd4881c1f5"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#ac87920e3725a9ecaea79cefd4881c1f5">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitInstructionStreamPointer</a></div><div class="ttdeci">void VisitInstructionStreamPointer(Tagged&lt; Code &gt; host, InstructionStreamSlot slot) override</div><div class="ttdef"><b>Definition</b> <a href="#l01053">mark-compact.cc:1053</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor_html_acea62577d515690e9ad7b84bc832ae0e"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector_1_1SharedHeapObjectVisitor.html#acea62577d515690e9ad7b84bc832ae0e">v8::internal::MarkCompactCollector::SharedHeapObjectVisitor::VisitPointer</a></div><div class="ttdeci">void VisitPointer(Tagged&lt; HeapObject &gt; host, MaybeObjectSlot p) final</div><div class="ttdef"><b>Definition</b> <a href="#l01032">mark-compact.cc:1032</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html">v8::internal::MarkCompactCollector</a></div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00057">mark-compact.h:57</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a0a89e89941e2601a090655513f208c65"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a0a89e89941e2601a090655513f208c65">v8::internal::MarkCompactCollector::RootMarkingVisitor</a></div><div class="ttdeci">friend class RootMarkingVisitor</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00470">mark-compact.h:470</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a17e6e45984b6757652c6611c22c17cff"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a17e6e45984b6757652c6611c22c17cff">v8::internal::MarkCompactCollector::VerifyMarking</a></div><div class="ttdeci">void VerifyMarking()</div><div class="ttdef"><b>Definition</b> <a href="#l00798">mark-compact.cc:798</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a235e4fc226f4d1987e55574f537c628a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a235e4fc226f4d1987e55574f537c628a">v8::internal::MarkCompactCollector::ResetNewlyDiscovered</a></div><div class="ttdeci">void ResetNewlyDiscovered()</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00183">mark-compact.h:183</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a31a1ac4e13f578ddd0947d9ad58af5e1"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a31a1ac4e13f578ddd0947d9ad58af5e1">v8::internal::MarkCompactCollector::StartMarking</a></div><div class="ttdeci">void StartMarking()</div><div class="ttdef"><b>Definition</b> <a href="#l00399">mark-compact.cc:399</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a325b77c4c0ed550f8eb2c317f8d5ebd3"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a325b77c4c0ed550f8eb2c317f8d5ebd3">v8::internal::MarkCompactCollector::AddEvacuationCandidate</a></div><div class="ttdeci">void AddEvacuationCandidate(PageMetadata *p)</div><div class="ttdef"><b>Definition</b> <a href="#l00308">mark-compact.cc:308</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a3cf7f62c683dbc4b89a6f71b7d60cc37"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a3cf7f62c683dbc4b89a6f71b7d60cc37">v8::internal::MarkCompactCollector::CollectEvacuationCandidates</a></div><div class="ttdeci">void CollectEvacuationCandidates(PagedSpace *space)</div><div class="ttdef"><b>Definition</b> <a href="#l00597">mark-compact.cc:597</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a45dbe9fb4c2e4b5ebdf19806b2de88fe"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a45dbe9fb4c2e4b5ebdf19806b2de88fe">v8::internal::MarkCompactCollector::IsUnmarkedSharedHeapObject</a></div><div class="ttdeci">static bool IsUnmarkedSharedHeapObject(Heap *heap, FullObjectSlot p)</div><div class="ttdef"><b>Definition</b> <a href="#l01843">mark-compact.cc:1843</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a5f0477b3276f6b872199164ffc981999"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a5f0477b3276f6b872199164ffc981999">v8::internal::MarkCompactCollector::IsOnEvacuationCandidate</a></div><div class="ttdeci">static bool IsOnEvacuationCandidate(Tagged&lt; MaybeObject &gt; obj)</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00108">mark-compact.h:108</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a62f2fdb072e51e33c943ff1835035d9a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a62f2fdb072e51e33c943ff1835035d9a">v8::internal::MarkCompactCollector::~MarkCompactCollector</a></div><div class="ttdeci">~MarkCompactCollector()</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a7ab138ed5a95ccf06c7fca13f7753757"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a7ab138ed5a95ccf06c7fca13f7753757">v8::internal::MarkCompactCollector::weak_objects</a></div><div class="ttdeci">WeakObjects * weak_objects()</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00169">mark-compact.h:169</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a82db441b928fc8abc959d3d4c7c18906"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a82db441b928fc8abc959d3d4c7c18906">v8::internal::MarkCompactCollector::CollectGarbage</a></div><div class="ttdeci">void CollectGarbage()</div><div class="ttdef"><b>Definition</b> <a href="#l00481">mark-compact.cc:481</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a85c44c012f24399a6d96a1191d92e4fb"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fb">v8::internal::MarkCompactCollector::CallOrigin</a></div><div class="ttdeci">CallOrigin</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00072">mark-compact.h:72</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a85c44c012f24399a6d96a1191d92e4fba9475de0921b6e2867bf258b7d16d50f7">v8::internal::MarkCompactCollector::CallOrigin::kAtomicGC</a></div><div class="ttdeci">@ kAtomicGC</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a88bb504c9d7b76a16ab2f067e907574c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a88bb504c9d7b76a16ab2f067e907574c">v8::internal::MarkCompactCollector::Prepare</a></div><div class="ttdeci">void Prepare()</div><div class="ttdef"><b>Definition</b> <a href="#l00753">mark-compact.cc:753</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a927eebc2a596cab74de9a052a849d0ea"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a927eebc2a596cab74de9a052a849d0ea">v8::internal::MarkCompactCollector::MaybeEnableBackgroundThreadsInCycle</a></div><div class="ttdeci">void MaybeEnableBackgroundThreadsInCycle(CallOrigin origin)</div><div class="ttdef"><b>Definition</b> <a href="#l00459">mark-compact.cc:459</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a98a812692db6554e705e263abeca81b7"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a98a812692db6554e705e263abeca81b7">v8::internal::MarkCompactCollector::local_weak_objects</a></div><div class="ttdeci">WeakObjects::Local * local_weak_objects()</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00170">mark-compact.h:170</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_a9d6f060a09240e70ae531c260c99650b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#a9d6f060a09240e70ae531c260c99650b">v8::internal::MarkCompactCollector::FinishConcurrentMarking</a></div><div class="ttdeci">void FinishConcurrentMarking()</div><div class="ttdef"><b>Definition</b> <a href="#l00783">mark-compact.cc:783</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aa709baf43b9629ff0df85d2700caa88b"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aa709baf43b9629ff0df85d2700caa88b">v8::internal::MarkCompactCollector::UseBackgroundThreadsInCycle</a></div><div class="ttdeci">bool UseBackgroundThreadsInCycle() const</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00188">mark-compact.h:188</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aaa454d3e055439b880fa812044153ec1"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aaa454d3e055439b880fa812044153ec1">v8::internal::MarkCompactCollector::RecordSlot</a></div><div class="ttdeci">static V8_INLINE void RecordSlot(Tagged&lt; HeapObject &gt; object, THeapObjectSlot slot, Tagged&lt; HeapObject &gt; target)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab77b1f17c1aaf49a93ba2e394fd11984"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab77b1f17c1aaf49a93ba2e394fd11984">v8::internal::MarkCompactCollector::epoch</a></div><div class="ttdeci">unsigned epoch() const</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00157">mark-compact.h:157</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab7aa03799336160dde3614472c712abe"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abe">v8::internal::MarkCompactCollector::MarkingWorklistProcessingMode</a></div><div class="ttdeci">MarkingWorklistProcessingMode</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00067">mark-compact.h:67</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abea6867faeaa475fda467e48267db2bb8a8">v8::internal::MarkCompactCollector::MarkingWorklistProcessingMode::kDefault</a></div><div class="ttdeci">@ kDefault</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab7aa03799336160dde3614472c712abeaf8d54e6b36884f2c419c2b3c1c2a1d21"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7aa03799336160dde3614472c712abeaf8d54e6b36884f2c419c2b3c1c2a1d21">v8::internal::MarkCompactCollector::MarkingWorklistProcessingMode::kTrackNewlyDiscoveredObjects</a></div><div class="ttdeci">@ kTrackNewlyDiscoveredObjects</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ab7e6a8160a88f451d394d7135403f3ae"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ab7e6a8160a88f451d394d7135403f3ae">v8::internal::MarkCompactCollector::StartCompaction</a></div><div class="ttdeci">bool StartCompaction(StartCompactionMode mode)</div><div class="ttdef"><b>Definition</b> <a href="#l00332">mark-compact.cc:332</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac134d900ab0dbca461ef7cb20318c4ba"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac134d900ab0dbca461ef7cb20318c4ba">v8::internal::MarkCompactCollector::IsUnmarkedHeapObject</a></div><div class="ttdeci">static bool IsUnmarkedHeapObject(Heap *heap, FullObjectSlot p)</div><div class="ttdef"><b>Definition</b> <a href="#l01834">mark-compact.cc:1834</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ac79654a97e006616402d89dcec98eac7"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ac79654a97e006616402d89dcec98eac7">v8::internal::MarkCompactCollector::TearDown</a></div><div class="ttdeci">void TearDown()</div><div class="ttdef"><b>Definition</b> <a href="#l00297">mark-compact.cc:297</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_acede4ac283242743a83a4a45ec8de53f"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#acede4ac283242743a83a4a45ec8de53f">v8::internal::MarkCompactCollector::ProcessMarkingWorklist</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; ProcessMarkingWorklist(v8::base::TimeDelta max_duration, size_t max_bytes_to_process, MarkingWorklistProcessingMode mode)</div><div class="ttdef"><b>Definition</b> <a href="#l02258">mark-compact.cc:2258</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ae4455c0b37942d5616bb57730157eb6a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ae4455c0b37942d5616bb57730157eb6a">v8::internal::MarkCompactCollector::RecordRelocSlot</a></div><div class="ttdeci">static void RecordRelocSlot(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo, Tagged&lt; HeapObject &gt; target)</div><div class="ttdef"><b>Definition</b> <a href="#l04084">mark-compact.cc:4084</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_ae8e2dfc15e6f037acb454d2ac684742a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#ae8e2dfc15e6f037acb454d2ac684742a">v8::internal::MarkCompactCollector::heap</a></div><div class="ttdeci">Heap * heap()</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00194">mark-compact.h:194</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aeffa934d2a7a740c62b6b7521f0c3897"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897">v8::internal::MarkCompactCollector::StartCompactionMode</a></div><div class="ttdeci">StartCompactionMode</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00062">mark-compact.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#aeffa934d2a7a740c62b6b7521f0c3897a726d9cf5163c50b3cf8e05800e3cef71">v8::internal::MarkCompactCollector::StartCompactionMode::kAtomic</a></div><div class="ttdeci">@ kAtomic</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_af4b2c802a91043776e4524988dd7ec22"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#af4b2c802a91043776e4524988dd7ec22">v8::internal::MarkCompactCollector::AddNewlyDiscovered</a></div><div class="ttdeci">void AddNewlyDiscovered(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00172">mark-compact.h:172</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_af7e1a054489f11045c46e33fd3c17c97"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#af7e1a054489f11045c46e33fd3c17c97">v8::internal::MarkCompactCollector::MarkCompactCollector</a></div><div class="ttdeci">MarkCompactCollector(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l00283">mark-compact.cc:283</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactCollector_html_affd8ddf2770f072ffe30196279ab62e1"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactCollector.html#affd8ddf2770f072ffe30196279ab62e1">v8::internal::MarkCompactCollector::code_flush_mode</a></div><div class="ttdeci">base::EnumSet&lt; CodeFlushMode &gt; code_flush_mode() const</div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00159">mark-compact.h:159</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactWeakObjectRetainer_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html">v8::internal::MarkCompactWeakObjectRetainer</a></div><div class="ttdef"><b>Definition</b> <a href="#l01209">mark-compact.cc:1209</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactWeakObjectRetainer_html_a4eef87d0358bbd1997ab4e8398ddbf3d"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html#a4eef87d0358bbd1997ab4e8398ddbf3d">v8::internal::MarkCompactWeakObjectRetainer::MarkCompactWeakObjectRetainer</a></div><div class="ttdeci">MarkCompactWeakObjectRetainer(Heap *heap, MarkingState *marking_state)</div><div class="ttdef"><b>Definition</b> <a href="#l01211">mark-compact.cc:1211</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkCompactWeakObjectRetainer_html_acbd61a1d656855a26bfe759affc50473"><div class="ttname"><a href="classv8_1_1internal_1_1MarkCompactWeakObjectRetainer.html#acbd61a1d656855a26bfe759affc50473">v8::internal::MarkCompactWeakObjectRetainer::RetainAs</a></div><div class="ttdeci">Tagged&lt; Object &gt; RetainAs(Tagged&lt; Object &gt; object) override</div><div class="ttdef"><b>Definition</b> <a href="#l01214">mark-compact.cc:1214</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingBarrier_html_a0961df883ba76c25aeba52b810d55f54"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingBarrier.html#a0961df883ba76c25aeba52b810d55f54">v8::internal::MarkingBarrier::PublishAll</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void PublishAll(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="marking-barrier_8cc_source.html#l00421">marking-barrier.cc:421</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingBarrier_html_a2d768331ca216e2dc7f88961d5f1f5fc"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingBarrier.html#a2d768331ca216e2dc7f88961d5f1f5fc">v8::internal::MarkingBarrier::PublishIfNeeded</a></div><div class="ttdeci">void PublishIfNeeded()</div><div class="ttdef"><b>Definition</b> <a href="marking-barrier_8cc_source.html#l00446">marking-barrier.cc:446</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingBarrier_html_ad7b8156049672e805f8bfd48a300936c"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingBarrier.html#ad7b8156049672e805f8bfd48a300936c">v8::internal::MarkingBarrier::DeactivateAll</a></div><div class="ttdeci">static void DeactivateAll(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="marking-barrier_8cc_source.html#l00370">marking-barrier.cc:370</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingStateBase_html_a25369a80f635ffb368937574c7a4e6a6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingStateBase.html#a25369a80f635ffb368937574c7a4e6a6">v8::internal::MarkingStateBase::TryMarkAndAccountLiveBytes</a></div><div class="ttdeci">V8_INLINE bool TryMarkAndAccountLiveBytes(Tagged&lt; HeapObject &gt; obj)</div><div class="ttdef"><b>Definition</b> <a href="marking-state-inl_8h_source.html#l00034">marking-state-inl.h:34</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingStateBase_html_aaf1662a3d84f030521524b6bc605785e"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingStateBase.html#aaf1662a3d84f030521524b6bc605785e">v8::internal::MarkingStateBase::IsUnmarked</a></div><div class="ttdeci">V8_INLINE bool IsUnmarked(const Tagged&lt; HeapObject &gt; obj) const</div><div class="ttdef"><b>Definition</b> <a href="marking-state-inl_8h_source.html#l00022">marking-state-inl.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingState_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingState.html">v8::internal::MarkingState</a></div><div class="ttdef"><b>Definition</b> <a href="marking-state_8h_source.html#l00055">marking-state.h:56</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingVisitorBase_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingVisitorBase.html">v8::internal::MarkingVisitorBase</a></div><div class="ttdef"><b>Definition</b> <a href="marking-visitor_8h_source.html#l00047">marking-visitor.h:47</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_1_1Local_html"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists_1_1Local.html">v8::internal::MarkingWorklists::Local</a></div><div class="ttdef"><b>Definition</b> <a href="marking-worklist_8h_source.html#l00139">marking-worklist.h:139</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_1_1Local_html_a9129871cbe80dbd2ea3c602d9fb016f6"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists_1_1Local.html#a9129871cbe80dbd2ea3c602d9fb016f6">v8::internal::MarkingWorklists::Local::kNoCppMarkingState</a></div><div class="ttdeci">static constexpr std::nullptr_t kNoCppMarkingState</div><div class="ttdef"><b>Definition</b> <a href="marking-worklist_8h_source.html#l00143">marking-worklist.h:143</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_html_a03bdf39a61570cea166a4c86c4dc404a"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists.html#a03bdf39a61570cea166a4c86c4dc404a">v8::internal::MarkingWorklists::CreateContextWorklists</a></div><div class="ttdeci">void CreateContextWorklists(const std::vector&lt; Address &gt; &amp;contexts)</div><div class="ttdef"><b>Definition</b> <a href="marking-worklist_8cc_source.html#l00039">marking-worklist.cc:39</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_html_a89010874238d7f05fc609afa7119ef40"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists.html#a89010874238d7f05fc609afa7119ef40">v8::internal::MarkingWorklists::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition</b> <a href="marking-worklist_8cc_source.html#l00024">marking-worklist.cc:24</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MarkingWorklists_html_ad043c0f34b550badabc3d15a17c52943"><div class="ttname"><a href="classv8_1_1internal_1_1MarkingWorklists.html#ad043c0f34b550badabc3d15a17c52943">v8::internal::MarkingWorklists::ReleaseContextWorklists</a></div><div class="ttdeci">void ReleaseContextWorklists()</div><div class="ttdef"><b>Definition</b> <a href="marking-worklist_8cc_source.html#l00051">marking-worklist.cc:51</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryAllocator_html_a3f65594b1055b6de0fde41bab46d00b0"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryAllocator.html#a3f65594b1055b6de0fde41bab46d00b0">v8::internal::MemoryAllocator::ReleaseQueuedPages</a></div><div class="ttdeci">void ReleaseQueuedPages()</div><div class="ttdef"><b>Definition</b> <a href="memory-allocator_8cc_source.html#l00635">memory-allocator.cc:635</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunkMetadata_html_a898aedc43e020dfdc0dbf686a863c92d"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunkMetadata.html#a898aedc43e020dfdc0dbf686a863c92d">v8::internal::MemoryChunkMetadata::area_end</a></div><div class="ttdeci">Address area_end() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk-metadata_8h_source.html#l00062">memory-chunk-metadata.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunkMetadata_html_a9fc112c5748d8edf2b68bd19ab082519"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunkMetadata.html#a9fc112c5748d8edf2b68bd19ab082519">v8::internal::MemoryChunkMetadata::allocated_bytes</a></div><div class="ttdeci">size_t allocated_bytes() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk-metadata_8h_source.html#l00101">memory-chunk-metadata.h:101</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunkMetadata_html_acd8dfb2e8657abe513a212fea3bf4683"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunkMetadata.html#acd8dfb2e8657abe513a212fea3bf4683">v8::internal::MemoryChunkMetadata::area_size</a></div><div class="ttdeci">size_t area_size() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk-metadata_8h_source.html#l00065">memory-chunk-metadata.h:65</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunkMetadata_html_ad4856058dd8937baa2afd52c5f36d9b1"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunkMetadata.html#ad4856058dd8937baa2afd52c5f36d9b1">v8::internal::MemoryChunkMetadata::Chunk</a></div><div class="ttdeci">MemoryChunk * Chunk()</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk-metadata_8h_source.html#l00123">memory-chunk-metadata.h:123</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html">v8::internal::MemoryChunk</a></div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00040">memory-chunk.h:40</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a0398fad4cb6436a18dc1599b206c3b87"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a0398fad4cb6436a18dc1599b206c3b87">v8::internal::MemoryChunk::ClearFlagSlow</a></div><div class="ttdeci">void ClearFlagSlow(Flag flag)</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8cc_source.html#l00188">memory-chunk.cc:188</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a16c901edb172a72b13968b5270b0ffce"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a16c901edb172a72b13968b5270b0ffce">v8::internal::MemoryChunk::InWritableSharedSpace</a></div><div class="ttdeci">V8_INLINE bool InWritableSharedSpace() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00190">memory-chunk.h:190</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a31917793e4e1f003c57c07b8dd2422fa"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a31917793e4e1f003c57c07b8dd2422fa">v8::internal::MemoryChunk::IsEvacuationCandidate</a></div><div class="ttdeci">bool IsEvacuationCandidate() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00277">memory-chunk.h:277</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a2cced78334b717b2021a1a0f8148ad48">v8::internal::MemoryChunk::BLACK_ALLOCATED</a></div><div class="ttdeci">@ BLACK_ALLOCATED</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00081">memory-chunk.h:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a8a4e62697e6258d1ac19282da3fcd9e9">v8::internal::MemoryChunk::IS_TRUSTED</a></div><div class="ttdeci">@ IS_TRUSTED</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00129">memory-chunk.h:129</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9a9b9c83db34c98c75a25e8f82f7bc8cef">v8::internal::MemoryChunk::FORCE_EVACUATION_CANDIDATE_FOR_TESTING</a></div><div class="ttdeci">@ FORCE_EVACUATION_CANDIDATE_FOR_TESTING</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00099">memory-chunk.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a3aacf1e5a45f3a0e3728850e6698cdf9adf40869b808cdb4df42933e6402fcf93"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a3aacf1e5a45f3a0e3728850e6698cdf9adf40869b808cdb4df42933e6402fcf93">v8::internal::MemoryChunk::IS_EXECUTABLE</a></div><div class="ttdeci">@ IS_EXECUTABLE</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00124">memory-chunk.h:124</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a57f68506864b5c7940c2f848e3808838"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a57f68506864b5c7940c2f848e3808838">v8::internal::MemoryChunk::IsFlagSet</a></div><div class="ttdeci">V8_INLINE bool IsFlagSet(Flag flag) const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00184">memory-chunk.h:184</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a57fe9bda7525f5de6ebc2b4726d0abb4"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a57fe9bda7525f5de6ebc2b4726d0abb4">v8::internal::MemoryChunk::address</a></div><div class="ttdeci">V8_INLINE Address address() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00162">memory-chunk.h:162</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a59bec6e443b8360a946b8285aee9d887"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a59bec6e443b8360a946b8285aee9d887">v8::internal::MemoryChunk::IsPinned</a></div><div class="ttdeci">bool IsPinned() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00305">memory-chunk.h:305</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a646a2dccc971ad9f546e0da4a35cfbbb"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a646a2dccc971ad9f546e0da4a35cfbbb">v8::internal::MemoryChunk::Metadata</a></div><div class="ttdeci">V8_INLINE MemoryChunkMetadata * Metadata()</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk-inl_8h_source.html#l00015">memory-chunk-inl.h:15</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a6c55e8cf2661fa6a347dd1096cc4f62b"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a6c55e8cf2661fa6a347dd1096cc4f62b">v8::internal::MemoryChunk::FromAddress</a></div><div class="ttdeci">static V8_INLINE MemoryChunk * FromAddress(Address addr)</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00171">memory-chunk.h:171</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a72bc65caf0c47dc3a85f4535359b8ac1"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a72bc65caf0c47dc3a85f4535359b8ac1">v8::internal::MemoryChunk::NeverEvacuate</a></div><div class="ttdeci">bool NeverEvacuate() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00270">memory-chunk.h:270</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a750d5345adc9f2dea8b5afdb885f3191"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a750d5345adc9f2dea8b5afdb885f3191">v8::internal::MemoryChunk::Offset</a></div><div class="ttdeci">size_t Offset(Address addr) const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00349">memory-chunk.h:349</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_a9c3f0b021e3e63a2da11fa4bb4ab1cff"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#a9c3f0b021e3e63a2da11fa4bb4ab1cff">v8::internal::MemoryChunk::InYoungGeneration</a></div><div class="ttdeci">V8_INLINE bool InYoungGeneration() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00194">memory-chunk.h:194</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_aab1d9e4d7cb3d99eba977b301cd1cd89"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#aab1d9e4d7cb3d99eba977b301cd1cd89">v8::internal::MemoryChunk::ShouldSkipEvacuationSlotRecording</a></div><div class="ttdeci">bool ShouldSkipEvacuationSlotRecording() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00282">memory-chunk.h:282</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_abb4f5b4779cc364180c3d30f7af06ae5"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#abb4f5b4779cc364180c3d30f7af06ae5">v8::internal::MemoryChunk::FromHeapObject</a></div><div class="ttdeci">static V8_INLINE MemoryChunk * FromHeapObject(Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00176">memory-chunk.h:176</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_ac6f69e1c360286fb6d0112508969cc39"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#ac6f69e1c360286fb6d0112508969cc39">v8::internal::MemoryChunk::CanAllocate</a></div><div class="ttdeci">bool CanAllocate() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00273">memory-chunk.h:273</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_aebf4eb09277a5083da24d59c98974894"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#aebf4eb09277a5083da24d59c98974894">v8::internal::MemoryChunk::IsToPage</a></div><div class="ttdeci">bool IsToPage() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00296">memory-chunk.h:296</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_af9fbfead34700f0653b0dfe65bf5d473"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#af9fbfead34700f0653b0dfe65bf5d473">v8::internal::MemoryChunk::IsLargePage</a></div><div class="ttdeci">bool IsLargePage() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00300">memory-chunk.h:300</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryChunk_html_afaf7fe0fa08ae9f3b0c0d2e16b41b0a8"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryChunk.html#afaf7fe0fa08ae9f3b0c0d2e16b41b0a8">v8::internal::MemoryChunk::InNewSpace</a></div><div class="ttdeci">bool InNewSpace() const</div><div class="ttdef"><b>Definition</b> <a href="memory-chunk_8h_source.html#l00301">memory-chunk.h:301</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryMeasurement_html_a061d53ab3d6b57b6a76398a07172fdc0"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryMeasurement.html#a061d53ab3d6b57b6a76398a07172fdc0">v8::internal::MemoryMeasurement::StartProcessing</a></div><div class="ttdeci">std::vector&lt; Address &gt; StartProcessing()</div><div class="ttdef"><b>Definition</b> <a href="memory-measurement_8cc_source.html#l00217">memory-measurement.cc:217</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryMeasurement_html_a2b16af443017f8c53573e169987d6d93"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryMeasurement.html#a2b16af443017f8c53573e169987d6d93">v8::internal::MemoryMeasurement::FinishProcessing</a></div><div class="ttdeci">void FinishProcessing(const NativeContextStats &amp;stats)</div><div class="ttdef"><b>Definition</b> <a href="memory-measurement_8cc_source.html#l00234">memory-measurement.cc:234</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MigrationObserver_html"><div class="ttname"><a href="classv8_1_1internal_1_1MigrationObserver.html">v8::internal::MigrationObserver</a></div><div class="ttdef"><b>Definition</b> <a href="#l01415">mark-compact.cc:1415</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MigrationObserver_html_a19443570f17cfff396a9cd963c7ffe99"><div class="ttname"><a href="classv8_1_1internal_1_1MigrationObserver.html#a19443570f17cfff396a9cd963c7ffe99">v8::internal::MigrationObserver::Move</a></div><div class="ttdeci">virtual void Move(AllocationSpace dest, Tagged&lt; HeapObject &gt; src, Tagged&lt; HeapObject &gt; dst, int size)=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MigrationObserver_html_a33ca4605dda8e7683c7ed3d38729f363"><div class="ttname"><a href="classv8_1_1internal_1_1MigrationObserver.html#a33ca4605dda8e7683c7ed3d38729f363">v8::internal::MigrationObserver::~MigrationObserver</a></div><div class="ttdeci">virtual ~MigrationObserver()=default</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MigrationObserver_html_a6908dc5cb778073789390891215ce21d"><div class="ttname"><a href="classv8_1_1internal_1_1MigrationObserver.html#a6908dc5cb778073789390891215ce21d">v8::internal::MigrationObserver::MigrationObserver</a></div><div class="ttdeci">MigrationObserver(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l01417">mark-compact.cc:1417</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MigrationObserver_html_afd906cd01456da8dca0f62cde32cae64"><div class="ttname"><a href="classv8_1_1internal_1_1MigrationObserver.html#afd906cd01456da8dca0f62cde32cae64">v8::internal::MigrationObserver::heap_</a></div><div class="ttdeci">Heap * heap_</div><div class="ttdef"><b>Definition</b> <a href="#l01424">mark-compact.cc:1424</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html">v8::internal::MutablePageMetadata</a></div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00046">mutable-page-metadata.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a04ea75362eb0f4229d1f0e20704bf762"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a04ea75362eb0f4229d1f0e20704bf762">v8::internal::MutablePageMetadata::IncrementLiveBytesAtomically</a></div><div class="ttdeci">void IncrementLiveBytesAtomically(intptr_t diff)</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00266">mutable-page-metadata.h:266</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a69a7af476fe5ae86ab77a9bb0d5e34df"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a69a7af476fe5ae86ab77a9bb0d5e34df">v8::internal::MutablePageMetadata::cast</a></div><div class="ttdeci">static MutablePageMetadata * cast(MemoryChunkMetadata *metadata)</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00079">mutable-page-metadata.h:79</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a8ca68362b7531b2ab93a045cdcedfdde"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a8ca68362b7531b2ab93a045cdcedfdde">v8::internal::MutablePageMetadata::kPageSize</a></div><div class="ttdeci">static const int kPageSize</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00062">mutable-page-metadata.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a9d7e9f4513ced2b857cd305de14df9a2"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a9d7e9f4513ced2b857cd305de14df9a2">v8::internal::MutablePageMetadata::SweepingDone</a></div><div class="ttdeci">bool SweepingDone() const</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00115">mutable-page-metadata.h:115</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_afd76b7261895b2043b1715d180858d29"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#afd76b7261895b2043b1715d180858d29">v8::internal::MutablePageMetadata::FromHeapObject</a></div><div class="ttdeci">static V8_INLINE MutablePageMetadata * FromHeapObject(Tagged&lt; HeapObject &gt; o)</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata-inl_8h_source.html#l00021">mutable-page-metadata-inl.h:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_afef91880298e04ebdb19a05ee7fd0b58"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#afef91880298e04ebdb19a05ee7fd0b58">v8::internal::MutablePageMetadata::ComputeFreeListsLength</a></div><div class="ttdeci">int ComputeFreeListsLength()</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8cc_source.html#l00194">mutable-page-metadata.cc:194</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NativeContextInferrer_html_a25a195accfb5080cb345588b4d0eae39"><div class="ttname"><a href="classv8_1_1internal_1_1NativeContextInferrer.html#a25a195accfb5080cb345588b4d0eae39">v8::internal::NativeContextInferrer::Infer</a></div><div class="ttdeci">V8_INLINE bool Infer(PtrComprCageBase cage_base, Tagged&lt; Map &gt; map, Tagged&lt; HeapObject &gt; object, Address *native_context)</div><div class="ttdef"><b>Definition</b> <a href="memory-measurement-inl_8h_source.html#l00019">memory-measurement-inl.h:19</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NativeContextStats_html_a0d455fead2eed365f5ed917844f03744"><div class="ttname"><a href="classv8_1_1internal_1_1NativeContextStats.html#a0d455fead2eed365f5ed917844f03744">v8::internal::NativeContextStats::IncrementSize</a></div><div class="ttdeci">V8_INLINE void IncrementSize(Address context, Tagged&lt; Map &gt; map, Tagged&lt; HeapObject &gt; object, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="memory-measurement-inl_8h_source.html#l00036">memory-measurement-inl.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NativeContextStats_html_af295a45eb3605b4771e84ae2aa4a7f48"><div class="ttname"><a href="classv8_1_1internal_1_1NativeContextStats.html#af295a45eb3605b4771e84ae2aa4a7f48">v8::internal::NativeContextStats::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition</b> <a href="memory-measurement_8cc_source.html#l00375">memory-measurement.cc:375</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NewSpace_html_a6666d02587ff04156b91f1e56dbedbd7"><div class="ttname"><a href="classv8_1_1internal_1_1NewSpace.html#a6666d02587ff04156b91f1e56dbedbd7">v8::internal::NewSpace::GarbageCollectionEpilogue</a></div><div class="ttdeci">virtual void GarbageCollectionEpilogue()=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ObjectVisitorWithCageBases_html"><div class="ttname"><a href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html">v8::internal::ObjectVisitorWithCageBases</a></div><div class="ttdef"><b>Definition</b> <a href="visitors_8h_source.html#l00216">visitors.h:216</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ObjectVisitorWithCageBases_html_a659af9693d9c8a62f14eba44fd06cfe6"><div class="ttname"><a href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a659af9693d9c8a62f14eba44fd06cfe6">v8::internal::ObjectVisitorWithCageBases::code_cage_base</a></div><div class="ttdeci">PtrComprCageBase code_cage_base() const</div><div class="ttdef"><b>Definition</b> <a href="visitors_8h_source.html#l00235">visitors.h:235</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ObjectVisitorWithCageBases_html_a79ee9c5d1dd4d742f9fa3b1c9186b9a7"><div class="ttname"><a href="classv8_1_1internal_1_1ObjectVisitorWithCageBases.html#a79ee9c5d1dd4d742f9fa3b1c9186b9a7">v8::internal::ObjectVisitorWithCageBases::cage_base</a></div><div class="ttdeci">PtrComprCageBase cage_base() const</div><div class="ttdef"><b>Definition</b> <a href="visitors_8h_source.html#l00225">visitors.h:225</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1OffHeapFullObjectSlot_html"><div class="ttname"><a href="classv8_1_1internal_1_1OffHeapFullObjectSlot.html">v8::internal::OffHeapFullObjectSlot</a></div><div class="ttdef"><b>Definition</b> <a href="slots_8h_source.html#l00303">slots.h:303</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1OldLargeObjectSpace_html"><div class="ttname"><a href="classv8_1_1internal_1_1OldLargeObjectSpace.html">v8::internal::OldLargeObjectSpace</a></div><div class="ttdef"><b>Definition</b> <a href="large-spaces_8h_source.html#l00144">large-spaces.h:144</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageEvacuationJob_html"><div class="ttname"><a href="classv8_1_1internal_1_1PageEvacuationJob.html">v8::internal::PageEvacuationJob</a></div><div class="ttdef"><b>Definition</b> <a href="#l04710">mark-compact.cc:4710</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageEvacuationJob_html_a0a413e268f03e4640ecb8d4eb35732bc"><div class="ttname"><a href="classv8_1_1internal_1_1PageEvacuationJob.html#a0a413e268f03e4640ecb8d4eb35732bc">v8::internal::PageEvacuationJob::PageEvacuationJob</a></div><div class="ttdeci">PageEvacuationJob(Isolate *isolate, MarkCompactCollector *collector, std::vector&lt; std::unique_ptr&lt; Evacuator &gt; &gt; *evacuators, std::vector&lt; std::pair&lt; ParallelWorkItem, MutablePageMetadata * &gt; &gt; evacuation_items)</div><div class="ttdef"><b>Definition</b> <a href="#l04712">mark-compact.cc:4712</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageEvacuationJob_html_a5a339abfedcef84952b058b058769ecc"><div class="ttname"><a href="classv8_1_1internal_1_1PageEvacuationJob.html#a5a339abfedcef84952b058b058769ecc">v8::internal::PageEvacuationJob::GetMaxConcurrency</a></div><div class="ttdeci">size_t GetMaxConcurrency(size_t worker_count) const override</div><div class="ttdef"><b>Definition</b> <a href="#l04761">mark-compact.cc:4761</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageEvacuationJob_html_a80267f74c0711aa95b67ee3013612073"><div class="ttname"><a href="classv8_1_1internal_1_1PageEvacuationJob.html#a80267f74c0711aa95b67ee3013612073">v8::internal::PageEvacuationJob::ProcessItems</a></div><div class="ttdeci">void ProcessItems(JobDelegate *delegate, Evacuator *evacuator)</div><div class="ttdef"><b>Definition</b> <a href="#l04745">mark-compact.cc:4745</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageEvacuationJob_html_ab708e50f29b82e26827fe0da974196e7"><div class="ttname"><a href="classv8_1_1internal_1_1PageEvacuationJob.html#ab708e50f29b82e26827fe0da974196e7">v8::internal::PageEvacuationJob::Run</a></div><div class="ttdeci">void Run(JobDelegate *delegate) override</div><div class="ttdef"><b>Definition</b> <a href="#l04726">mark-compact.cc:4726</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageEvacuationJob_html_ac21b3f891aa6c7d3af83aea5b6046194"><div class="ttname"><a href="classv8_1_1internal_1_1PageEvacuationJob.html#ac21b3f891aa6c7d3af83aea5b6046194">v8::internal::PageEvacuationJob::trace_id</a></div><div class="ttdeci">uint64_t trace_id() const</div><div class="ttdef"><b>Definition</b> <a href="#l04777">mark-compact.cc:4777</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageMetadata_html"><div class="ttname"><a href="classv8_1_1internal_1_1PageMetadata.html">v8::internal::PageMetadata</a></div><div class="ttdef"><b>Definition</b> <a href="page-metadata_8h_source.html#l00024">page-metadata.h:24</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageMetadata_html_a1b6da13a34e2984a618db74bda54dd3a"><div class="ttname"><a href="classv8_1_1internal_1_1PageMetadata.html#a1b6da13a34e2984a618db74bda54dd3a">v8::internal::PageMetadata::MarkEvacuationCandidate</a></div><div class="ttdeci">void MarkEvacuationCandidate()</div><div class="ttdef"><b>Definition</b> <a href="page-metadata-inl_8h_source.html#l00040">page-metadata-inl.h:40</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PageMetadata_html_ac37b751cd85e3a4b1e272da7ea409039"><div class="ttname"><a href="classv8_1_1internal_1_1PageMetadata.html#ac37b751cd85e3a4b1e272da7ea409039">v8::internal::PageMetadata::FromHeapObject</a></div><div class="ttdeci">static V8_INLINE PageMetadata * FromHeapObject(Tagged&lt; HeapObject &gt; o)</div><div class="ttdef"><b>Definition</b> <a href="page-metadata-inl_8h_source.html#l00023">page-metadata-inl.h:23</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedNewSpace_html_a1701d1cbec842172730b7560cf8266c3"><div class="ttname"><a href="classv8_1_1internal_1_1PagedNewSpace.html#a1701d1cbec842172730b7560cf8266c3">v8::internal::PagedNewSpace::paged_space</a></div><div class="ttdeci">PagedSpaceForNewSpace * paged_space()</div><div class="ttdef"><b>Definition</b> <a href="new-spaces_8h_source.html#l00755">new-spaces.h:755</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedNewSpace_html_a22fec8cda357e12676115a12ecab7917"><div class="ttname"><a href="classv8_1_1internal_1_1PagedNewSpace.html#a22fec8cda357e12676115a12ecab7917">v8::internal::PagedNewSpace::From</a></div><div class="ttdeci">static PagedNewSpace * From(NewSpace *space)</div><div class="ttdef"><b>Definition</b> <a href="new-spaces_8h_source.html#l00643">new-spaces.h:643</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedSpaceBase_html"><div class="ttname"><a href="classv8_1_1internal_1_1PagedSpaceBase.html">v8::internal::PagedSpaceBase</a></div><div class="ttdef"><b>Definition</b> <a href="paged-spaces_8h_source.html#l00111">paged-spaces.h:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PagedSpace_html"><div class="ttname"><a href="classv8_1_1internal_1_1PagedSpace.html">v8::internal::PagedSpace</a></div><div class="ttdef"><b>Definition</b> <a href="paged-spaces_8h_source.html#l00367">paged-spaces.h:367</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ParallelWorkItem_html"><div class="ttname"><a href="classv8_1_1internal_1_1ParallelWorkItem.html">v8::internal::ParallelWorkItem</a></div><div class="ttdef"><b>Definition</b> <a href="parallel-work-item_8h_source.html#l00013">parallel-work-item.h:13</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingJob_html"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingJob.html">v8::internal::PointersUpdatingJob</a></div><div class="ttdef"><b>Definition</b> <a href="#l05085">mark-compact.cc:5085</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingJob_html_a1e85c703f3a66ede1250d045df8717a3"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingJob.html#a1e85c703f3a66ede1250d045df8717a3">v8::internal::PointersUpdatingJob::GetMaxConcurrency</a></div><div class="ttdeci">size_t GetMaxConcurrency(size_t worker_count) const override</div><div class="ttdef"><b>Definition</b> <a href="#l05133">mark-compact.cc:5133</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingJob_html_a4bfd19244863f76434a26a28bd0224dd"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingJob.html#a4bfd19244863f76434a26a28bd0224dd">v8::internal::PointersUpdatingJob::Run</a></div><div class="ttdeci">void Run(JobDelegate *delegate) override</div><div class="ttdef"><b>Definition</b> <a href="#l05098">mark-compact.cc:5098</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingJob_html_a8758fac2f08ea645f7ada1c6881dd8cc"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingJob.html#a8758fac2f08ea645f7ada1c6881dd8cc">v8::internal::PointersUpdatingJob::UpdatePointers</a></div><div class="ttdeci">void UpdatePointers(JobDelegate *delegate)</div><div class="ttdef"><b>Definition</b> <a href="#l05117">mark-compact.cc:5117</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingJob_html_abc434d31c3e5bdc7043ee40028fdef26"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingJob.html#abc434d31c3e5bdc7043ee40028fdef26">v8::internal::PointersUpdatingJob::PointersUpdatingJob</a></div><div class="ttdeci">PointersUpdatingJob(Isolate *isolate, MarkCompactCollector *collector, std::vector&lt; std::unique_ptr&lt; UpdatingItem &gt; &gt; updating_items)</div><div class="ttdef"><b>Definition</b> <a href="#l05087">mark-compact.cc:5087</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingJob_html_acaff2a4c6b079a1726d1afe9b8b56e88"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingJob.html#acaff2a4c6b079a1726d1afe9b8b56e88">v8::internal::PointersUpdatingJob::trace_id</a></div><div class="ttdeci">uint64_t trace_id() const</div><div class="ttdef"><b>Definition</b> <a href="#l05145">mark-compact.cc:5145</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html">v8::internal::PointersUpdatingVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l04332">mark-compact.cc:4333</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_a12e0f73c507983e1b17ed0a714edf887"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a12e0f73c507983e1b17ed0a714edf887">v8::internal::PointersUpdatingVisitor::VisitRootPointer</a></div><div class="ttdeci">void VisitRootPointer(Root root, const char *description, FullObjectSlot p) override</div><div class="ttdef"><b>Definition</b> <a href="#l04365">mark-compact.cc:4365</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_a4a0346342ff39c8666b3d04972702df2"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a4a0346342ff39c8666b3d04972702df2">v8::internal::PointersUpdatingVisitor::VisitPointer</a></div><div class="ttdeci">void VisitPointer(Tagged&lt; HeapObject &gt; host, ObjectSlot p) override</div><div class="ttdef"><b>Definition</b> <a href="#l04338">mark-compact.cc:4338</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_a5792ea7f59db9f6e5dc51a579a458abf"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a5792ea7f59db9f6e5dc51a579a458abf">v8::internal::PointersUpdatingVisitor::VisitEmbeddedPointer</a></div><div class="ttdeci">void VisitEmbeddedPointer(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l04392">mark-compact.cc:4392</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_a74df3d0eadfa92c64660d0832ae55d2f"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a74df3d0eadfa92c64660d0832ae55d2f">v8::internal::PointersUpdatingVisitor::VisitCodeTarget</a></div><div class="ttdeci">void VisitCodeTarget(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l04386">mark-compact.cc:4386</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_a77cafef335dc1d5702c51cde718f0780"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a77cafef335dc1d5702c51cde718f0780">v8::internal::PointersUpdatingVisitor::VisitRootPointers</a></div><div class="ttdeci">void VisitRootPointers(Root root, const char *description, FullObjectSlot start, FullObjectSlot end) override</div><div class="ttdef"><b>Definition</b> <a href="#l04371">mark-compact.cc:4371</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_a84e6800ee618f900fbe6bad487fbbd28"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a84e6800ee618f900fbe6bad487fbbd28">v8::internal::PointersUpdatingVisitor::PointersUpdatingVisitor</a></div><div class="ttdeci">PointersUpdatingVisitor(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l04335">mark-compact.cc:4335</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_a9b8eb27114011280596923afdc49d3de"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#a9b8eb27114011280596923afdc49d3de">v8::internal::PointersUpdatingVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, MaybeObjectSlot start, MaybeObjectSlot end) final</div><div class="ttdef"><b>Definition</b> <a href="#l04353">mark-compact.cc:4353</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_aba289854862505f857a7fc8b7de4d779"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#aba289854862505f857a7fc8b7de4d779">v8::internal::PointersUpdatingVisitor::VisitRootPointers</a></div><div class="ttdeci">void VisitRootPointers(Root root, const char *description, OffHeapObjectSlot start, OffHeapObjectSlot end) override</div><div class="ttdef"><b>Definition</b> <a href="#l04378">mark-compact.cc:4378</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_ac90286a87b77730cf8d8ee0cb155e149"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#ac90286a87b77730cf8d8ee0cb155e149">v8::internal::PointersUpdatingVisitor::VisitInstructionStreamPointer</a></div><div class="ttdeci">void VisitInstructionStreamPointer(Tagged&lt; Code &gt; host, InstructionStreamSlot slot) override</div><div class="ttdef"><b>Definition</b> <a href="#l04360">mark-compact.cc:4360</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_acacecfbf17f7c6cf823b7992872cbd4f"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#acacecfbf17f7c6cf823b7992872cbd4f">v8::internal::PointersUpdatingVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, ObjectSlot start, ObjectSlot end) override</div><div class="ttdef"><b>Definition</b> <a href="#l04346">mark-compact.cc:4346</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PointersUpdatingVisitor_html_ad63aa0973a0317be3d6deb33a976a44f"><div class="ttname"><a href="classv8_1_1internal_1_1PointersUpdatingVisitor.html#ad63aa0973a0317be3d6deb33a976a44f">v8::internal::PointersUpdatingVisitor::VisitPointer</a></div><div class="ttdeci">void VisitPointer(Tagged&lt; HeapObject &gt; host, MaybeObjectSlot p) override</div><div class="ttdef"><b>Definition</b> <a href="#l04342">mark-compact.cc:4342</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PretenuringHandler_html"><div class="ttname"><a href="classv8_1_1internal_1_1PretenuringHandler.html">v8::internal::PretenuringHandler</a></div><div class="ttdef"><b>Definition</b> <a href="pretenuring-handler_8h_source.html#l00021">pretenuring-handler.h:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PretenuringHandler_html_a4d9bdb2b07edf8f16e49f87bc65088bc"><div class="ttname"><a href="classv8_1_1internal_1_1PretenuringHandler.html#a4d9bdb2b07edf8f16e49f87bc65088bc">v8::internal::PretenuringHandler::PretenuringFeedbackMap</a></div><div class="ttdeci">std::unordered_map&lt; Tagged&lt; AllocationSite &gt;, size_t, Object::Hasher &gt; PretenuringFeedbackMap</div><div class="ttdef"><b>Definition</b> <a href="pretenuring-handler_8h_source.html#l00025">pretenuring-handler.h:25</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PretenuringHandler_html_afe6ffac83eddf7cac23594de7d90da1f"><div class="ttname"><a href="classv8_1_1internal_1_1PretenuringHandler.html#afe6ffac83eddf7cac23594de7d90da1f">v8::internal::PretenuringHandler::UpdateAllocationSite</a></div><div class="ttdeci">static void UpdateAllocationSite(Heap *heap, Tagged&lt; Map &gt; map, Tagged&lt; HeapObject &gt; object, int object_size, PretenuringFeedbackMap *pretenuring_feedback)</div><div class="ttdef"><b>Definition</b> <a href="pretenuring-handler-inl_8h_source.html#l00020">pretenuring-handler-inl.h:20</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ProfilingMigrationObserver_html"><div class="ttname"><a href="classv8_1_1internal_1_1ProfilingMigrationObserver.html">v8::internal::ProfilingMigrationObserver</a></div><div class="ttdef"><b>Definition</b> <a href="#l01427">mark-compact.cc:1427</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ProfilingMigrationObserver_html_a0a790431ab1d0d16b7d0b45393391cb0"><div class="ttname"><a href="classv8_1_1internal_1_1ProfilingMigrationObserver.html#a0a790431ab1d0d16b7d0b45393391cb0">v8::internal::ProfilingMigrationObserver::ProfilingMigrationObserver</a></div><div class="ttdeci">ProfilingMigrationObserver(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l01429">mark-compact.cc:1429</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ProfilingMigrationObserver_html_ad609a7e1385f3f00c58980fd6f01ed5d"><div class="ttname"><a href="classv8_1_1internal_1_1ProfilingMigrationObserver.html#ad609a7e1385f3f00c58980fd6f01ed5d">v8::internal::ProfilingMigrationObserver::Move</a></div><div class="ttdeci">void Move(AllocationSpace dest, Tagged&lt; HeapObject &gt; src, Tagged&lt; HeapObject &gt; dst, int size) final</div><div class="ttdef"><b>Definition</b> <a href="#l01431">mark-compact.cc:1431</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PtrComprCageAccessScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1PtrComprCageAccessScope.html">v8::internal::PtrComprCageAccessScope</a></div><div class="ttdef"><b>Definition</b> <a href="ptr-compr_8h_source.html#l00217">ptr-compr.h:217</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PtrComprCageBase_html"><div class="ttname"><a href="classv8_1_1internal_1_1PtrComprCageBase.html">v8::internal::PtrComprCageBase</a></div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02752">globals.h:2752</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ReadOnlyRoots_html"><div class="ttname"><a href="classv8_1_1internal_1_1ReadOnlyRoots.html">v8::internal::ReadOnlyRoots</a></div><div class="ttdef"><b>Definition</b> <a href="roots_8h_source.html#l00699">roots.h:699</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html">v8::internal::RecordMigratedSlotVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="#l01245">mark-compact.cc:1246</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a11e5b09a4d09ac70fce864d7b9b2edae"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a11e5b09a4d09ac70fce864d7b9b2edae">v8::internal::RecordMigratedSlotVisitor::VisitMapPointer</a></div><div class="ttdeci">void VisitMapPointer(Tagged&lt; HeapObject &gt; host) final</div><div class="ttdef"><b>Definition</b> <a href="#l01258">mark-compact.cc:1258</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a347d4f88bbfe77ce23a3343cf3c21724"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a347d4f88bbfe77ce23a3343cf3c21724">v8::internal::RecordMigratedSlotVisitor::VisitTrustedPointerTableEntry</a></div><div class="ttdeci">void VisitTrustedPointerTableEntry(Tagged&lt; HeapObject &gt; host, IndirectPointerSlot slot) final</div><div class="ttdef"><b>Definition</b> <a href="#l01339">mark-compact.cc:1339</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a3b152c30ba854d8663280f74861f1566"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a3b152c30ba854d8663280f74861f1566">v8::internal::RecordMigratedSlotVisitor::VisitCodeTarget</a></div><div class="ttdeci">void VisitCodeTarget(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l01306">mark-compact.cc:1306</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a41338293b22c884327d45cab7a3025ad"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a41338293b22c884327d45cab7a3025ad">v8::internal::RecordMigratedSlotVisitor::VisitPointer</a></div><div class="ttdeci">void VisitPointer(Tagged&lt; HeapObject &gt; host, ObjectSlot p) final</div><div class="ttdef"><b>Definition</b> <a href="#l01253">mark-compact.cc:1253</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a4cb053e8971d48ea61b26368929bc170"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a4cb053e8971d48ea61b26368929bc170">v8::internal::RecordMigratedSlotVisitor::VisitPointer</a></div><div class="ttdeci">void VisitPointer(Tagged&lt; HeapObject &gt; host, MaybeObjectSlot p) final</div><div class="ttdef"><b>Definition</b> <a href="#l01262">mark-compact.cc:1262</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a6eeedbde3bbe55f4f0872d7c75e72aa9"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a6eeedbde3bbe55f4f0872d7c75e72aa9">v8::internal::RecordMigratedSlotVisitor::VisitEmbeddedPointer</a></div><div class="ttdeci">void VisitEmbeddedPointer(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) override</div><div class="ttdef"><b>Definition</b> <a href="#l01318">mark-compact.cc:1318</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a773e7ae3a6eeaf442c507f8f2ff8b3d0"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a773e7ae3a6eeaf442c507f8f2ff8b3d0">v8::internal::RecordMigratedSlotVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, MaybeObjectSlot start, MaybeObjectSlot end) final</div><div class="ttdef"><b>Definition</b> <a href="#l01275">mark-compact.cc:1275</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a7a57beed7f1a5d2b2e07f3bb75983f15"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a7a57beed7f1a5d2b2e07f3bb75983f15">v8::internal::RecordMigratedSlotVisitor::UsePrecomputedObjectSize</a></div><div class="ttdeci">static V8_INLINE constexpr bool UsePrecomputedObjectSize()</div><div class="ttdef"><b>Definition</b> <a href="#l01251">mark-compact.cc:1251</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a97c012d3ee7189ec66c5501974ac7bd8"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a97c012d3ee7189ec66c5501974ac7bd8">v8::internal::RecordMigratedSlotVisitor::VisitIndirectPointer</a></div><div class="ttdeci">void VisitIndirectPointer(Tagged&lt; HeapObject &gt; host, IndirectPointerSlot slot, IndirectPointerMode mode) final</div><div class="ttdef"><b>Definition</b> <a href="#l01335">mark-compact.cc:1335</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_a9ff63be9d4837000a4eab3ac21697170"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#a9ff63be9d4837000a4eab3ac21697170">v8::internal::RecordMigratedSlotVisitor::RecordMigratedSlot</a></div><div class="ttdeci">void RecordMigratedSlot(Tagged&lt; HeapObject &gt; host, Tagged&lt; MaybeObject &gt; value, Address slot)</div><div class="ttdef"><b>Definition</b> <a href="#l01354">mark-compact.cc:1354</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_aa1c4aee0c2d81aea906c9fbf6bc2b7f9"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aa1c4aee0c2d81aea906c9fbf6bc2b7f9">v8::internal::RecordMigratedSlotVisitor::VisitExternalPointer</a></div><div class="ttdeci">void VisitExternalPointer(Tagged&lt; HeapObject &gt; host, ExternalPointerSlot slot) final</div><div class="ttdef"><b>Definition</b> <a href="#l01332">mark-compact.cc:1332</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_aa3c7e54ea08258cfb01d19c8e42389b3"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aa3c7e54ea08258cfb01d19c8e42389b3">v8::internal::RecordMigratedSlotVisitor::VisitInstructionStreamPointer</a></div><div class="ttdeci">void VisitInstructionStreamPointer(Tagged&lt; Code &gt; host, InstructionStreamSlot slot) final</div><div class="ttdef"><b>Definition</b> <a href="#l01283">mark-compact.cc:1283</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_ab172b2831dbf736806f42554812338ce"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ab172b2831dbf736806f42554812338ce">v8::internal::RecordMigratedSlotVisitor::RecordMigratedSlotVisitor</a></div><div class="ttdeci">RecordMigratedSlotVisitor(Heap *heap)</div><div class="ttdef"><b>Definition</b> <a href="#l01248">mark-compact.cc:1248</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_ab2a5d6a019dd53fd10dc2bf71572aa1f"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ab2a5d6a019dd53fd10dc2bf71572aa1f">v8::internal::RecordMigratedSlotVisitor::VisitProtectedPointer</a></div><div class="ttdeci">void VisitProtectedPointer(Tagged&lt; TrustedObject &gt; host, ProtectedPointerSlot slot) final</div><div class="ttdef"><b>Definition</b> <a href="#l01342">mark-compact.cc:1342</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_abb76952d9da9c4ff3d872b627f0b3510"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#abb76952d9da9c4ff3d872b627f0b3510">v8::internal::RecordMigratedSlotVisitor::VisitInternalReference</a></div><div class="ttdeci">void VisitInternalReference(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) final</div><div class="ttdef"><b>Definition</b> <a href="#l01330">mark-compact.cc:1330</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_ac418d0aadd8da17d89a71811c863fb1d"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ac418d0aadd8da17d89a71811c863fb1d">v8::internal::RecordMigratedSlotVisitor::VisitEphemeron</a></div><div class="ttdeci">void VisitEphemeron(Tagged&lt; HeapObject &gt; host, int index, ObjectSlot key, ObjectSlot value) override</div><div class="ttdef"><b>Definition</b> <a href="#l01292">mark-compact.cc:1292</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_aced2ae6eec28891d4ba4a495e22443ec"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aced2ae6eec28891d4ba4a495e22443ec">v8::internal::RecordMigratedSlotVisitor::heap_</a></div><div class="ttdeci">Heap *const heap_</div><div class="ttdef"><b>Definition</b> <a href="#l01412">mark-compact.cc:1412</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_ae62d0c166ca3e300c5e7f7d10b882c22"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#ae62d0c166ca3e300c5e7f7d10b882c22">v8::internal::RecordMigratedSlotVisitor::VisitPointers</a></div><div class="ttdeci">void VisitPointers(Tagged&lt; HeapObject &gt; host, ObjectSlot start, ObjectSlot end) final</div><div class="ttdef"><b>Definition</b> <a href="#l01267">mark-compact.cc:1267</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_aeb45778e96164c12570b0b6288d3409d"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#aeb45778e96164c12570b0b6288d3409d">v8::internal::RecordMigratedSlotVisitor::VisitProtectedPointer</a></div><div class="ttdeci">void VisitProtectedPointer(Tagged&lt; TrustedObject &gt; host, ProtectedMaybeObjectSlot slot) final</div><div class="ttdef"><b>Definition</b> <a href="#l01347">mark-compact.cc:1347</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RecordMigratedSlotVisitor_html_af42b76fc7d1c794163e0c32123a59d1a"><div class="ttname"><a href="classv8_1_1internal_1_1RecordMigratedSlotVisitor.html#af42b76fc7d1c794163e0c32123a59d1a">v8::internal::RecordMigratedSlotVisitor::VisitExternalReference</a></div><div class="ttdeci">void VisitExternalReference(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo) final</div><div class="ttdef"><b>Definition</b> <a href="#l01328">mark-compact.cc:1328</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html">v8::internal::RelocInfo</a></div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00094">reloc-info.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a4826de2c62c03505c8cef4fdd868a2a4"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a4826de2c62c03505c8cef4fdd868a2a4">v8::internal::RelocInfo::IsCodeTargetMode</a></div><div class="ttdeci">static constexpr bool IsCodeTargetMode(Mode mode)</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00197">reloc-info.h:197</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a5105ad25a3cfafd733106928a9d8a4ad"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a5105ad25a3cfafd733106928a9d8a4ad">v8::internal::RelocInfo::target_address</a></div><div class="ttdeci">V8_INLINE Address target_address()</div><div class="ttdef"><b>Definition</b> <a href="assembler-arm-inl_8h_source.html#l00068">assembler-arm-inl.h:68</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a74178a98b5efdd971a4f647281b6296e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a74178a98b5efdd971a4f647281b6296e">v8::internal::RelocInfo::IsInConstantPool</a></div><div class="ttdeci">bool IsInConstantPool()</div><div class="ttdef"><b>Definition</b> <a href="assembler-riscv_8cc_source.html#l00200">assembler-riscv.cc:200</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a9de6eaa529e2d449eb3c4c78fc321d2e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a9de6eaa529e2d449eb3c4c78fc321d2e">v8::internal::RelocInfo::IsEmbeddedObjectMode</a></div><div class="ttdeci">static constexpr bool IsEmbeddedObjectMode(Mode mode)</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00209">reloc-info.h:209</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ab620178a9b0590638fdc6834b53eb328"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ab620178a9b0590638fdc6834b53eb328">v8::internal::RelocInfo::target_object</a></div><div class="ttdeci">V8_INLINE Tagged&lt; HeapObject &gt; target_object(PtrComprCageBase cage_base)</div><div class="ttdef"><b>Definition</b> <a href="assembler-arm-inl_8h_source.html#l00094">assembler-arm-inl.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_abecc351ac3cac56e2f2c19081b2fc2e1"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#abecc351ac3cac56e2f2c19081b2fc2e1">v8::internal::RelocInfo::constant_pool_entry_address</a></div><div class="ttdeci">V8_INLINE Address constant_pool_entry_address()</div><div class="ttdef"><b>Definition</b> <a href="assembler-arm-inl_8h_source.html#l00087">assembler-arm-inl.h:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">v8::internal::RelocInfo::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00106">reloc-info.h:106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_adbcb85c0a1896ff1e7661746d6143e90"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#adbcb85c0a1896ff1e7661746d6143e90">v8::internal::RelocInfo::rmode</a></div><div class="ttdeci">Mode rmode() const</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00276">reloc-info.h:276</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ae4e4b6b325ffcbba5c03de7c640c8f99"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ae4e4b6b325ffcbba5c03de7c640c8f99">v8::internal::RelocInfo::pc</a></div><div class="ttdeci">Address pc() const</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00275">reloc-info.h:275</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html">v8::internal::RememberedSet</a></div><div class="ttdef"><b>Definition</b> <a href="remembered-set_8h_source.html#l00092">remembered-set.h:92</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html_a5f06ef544b7c8a892f57b28a5185fece"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html#a5f06ef544b7c8a892f57b28a5185fece">v8::internal::RememberedSet::Insert</a></div><div class="ttdeci">static void Insert(MutablePageMetadata *page, size_t slot_offset)</div><div class="ttdef"><b>Definition</b> <a href="remembered-set_8h_source.html#l00097">remembered-set.h:97</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html_a948ca4aacbb909303ffd8d7b78ceb9be"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html#a948ca4aacbb909303ffd8d7b78ceb9be">v8::internal::RememberedSet::IterateTyped</a></div><div class="ttdeci">static int IterateTyped(MutablePageMetadata *chunk, Callback callback)</div><div class="ttdef"><b>Definition</b> <a href="remembered-set_8h_source.html#l00280">remembered-set.h:280</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RememberedSet_html_af1f20aa96b6a02882a1fe0ce5e8b1da3"><div class="ttname"><a href="classv8_1_1internal_1_1RememberedSet.html#af1f20aa96b6a02882a1fe0ce5e8b1da3">v8::internal::RememberedSet::Iterate</a></div><div class="ttdeci">static int Iterate(MutablePageMetadata *chunk, Callback callback, SlotSet::EmptyBucketMode mode)</div><div class="ttdef"><b>Definition</b> <a href="remembered-set_8h_source.html#l00198">remembered-set.h:198</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RootMarkingVisitor_html_a9b21678c05713ed9f8773414b2967561"><div class="ttname"><a href="classv8_1_1internal_1_1RootMarkingVisitor.html#a9b21678c05713ed9f8773414b2967561">v8::internal::RootMarkingVisitor::VisitRootPointer</a></div><div class="ttdeci">V8_INLINE void VisitRootPointer(Root root, const char *description, FullObjectSlot p) final</div><div class="ttdef"><b>Definition</b> <a href="mark-compact-inl_8h_source.html#l00090">mark-compact-inl.h:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RootMarkingVisitor_html_aaae2d46819c8e1405a73bc1de3c2984f"><div class="ttname"><a href="classv8_1_1internal_1_1RootMarkingVisitor.html#aaae2d46819c8e1405a73bc1de3c2984f">v8::internal::RootMarkingVisitor::VisitRunningCode</a></div><div class="ttdeci">void VisitRunningCode(FullObjectSlot code_slot, FullObjectSlot istream_or_smi_zero_slot) final</div><div class="ttdef"><b>Definition</b> <a href="#l06140">mark-compact.cc:6140</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RootMarkingVisitor_html_ad0215961c5c1ccc45f2c66a782e4b446"><div class="ttname"><a href="classv8_1_1internal_1_1RootMarkingVisitor.html#ad0215961c5c1ccc45f2c66a782e4b446">v8::internal::RootMarkingVisitor::~RootMarkingVisitor</a></div><div class="ttdeci">~RootMarkingVisitor()</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RootVisitor_html"><div class="ttname"><a href="classv8_1_1internal_1_1RootVisitor.html">v8::internal::RootVisitor</a></div><div class="ttdef"><b>Definition</b> <a href="visitors_8h_source.html#l00065">visitors.h:65</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Scope_html"><div class="ttname"><a href="classv8_1_1internal_1_1Scope.html">v8::internal::Scope</a></div><div class="ttdef"><b>Definition</b> <a href="scopes_8h_source.html#l00090">scopes.h:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SharedStructTypeRegistry_html_af6671bbc051dfa0db1c98d911fd7d443"><div class="ttname"><a href="classv8_1_1internal_1_1SharedStructTypeRegistry.html#af6671bbc051dfa0db1c98d911fd7d443">v8::internal::SharedStructTypeRegistry::deleted_element</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; deleted_element()</div><div class="ttdef"><b>Definition</b> <a href="js-struct_8h_source.html#l00081">js-struct.h:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SlotBase_html_a761a11659b4338ee734b79e7c6886911"><div class="ttname"><a href="classv8_1_1internal_1_1SlotBase.html#a761a11659b4338ee734b79e7c6886911">v8::internal::SlotBase::address</a></div><div class="ttdeci">Address address() const</div><div class="ttdef"><b>Definition</b> <a href="slots_8h_source.html#l00079">slots.h:79</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Smi_html_a755464f4d2c3a71ffd82cd474bbc50f3"><div class="ttname"><a href="classv8_1_1internal_1_1Smi.html#a755464f4d2c3a71ffd82cd474bbc50f3">v8::internal::Smi::FromInt</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; FromInt(int value)</div><div class="ttdef"><b>Definition</b> <a href="smi_8h_source.html#l00038">smi.h:38</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Smi_html_ae2be3083c9562dbe7c4bc39337bbe831"><div class="ttname"><a href="classv8_1_1internal_1_1Smi.html#ae2be3083c9562dbe7c4bc39337bbe831">v8::internal::Smi::zero</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; zero()</div><div class="ttdef"><b>Definition</b> <a href="smi_8h_source.html#l00099">smi.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTableCleanerBase_html"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html">v8::internal::StringForwardingTableCleanerBase</a></div><div class="ttdef"><b>Definition</b> <a href="mark-sweep-utilities_8h_source.html#l00087">mark-sweep-utilities.h:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTableCleanerBase_html_a7f3cf250716949b10e1154c3551d0ea4"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a7f3cf250716949b10e1154c3551d0ea4">v8::internal::StringForwardingTableCleanerBase::isolate_</a></div><div class="ttdeci">Isolate *const isolate_</div><div class="ttdef"><b>Definition</b> <a href="mark-sweep-utilities_8h_source.html#l00098">mark-sweep-utilities.h:98</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTableCleanerBase_html_a9731d090602fef12956a5d281ef83584"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a9731d090602fef12956a5d281ef83584">v8::internal::StringForwardingTableCleanerBase::marking_state_</a></div><div class="ttdeci">NonAtomicMarkingState *const marking_state_</div><div class="ttdef"><b>Definition</b> <a href="mark-sweep-utilities_8h_source.html#l00099">mark-sweep-utilities.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTableCleanerBase_html_a99fa9daf91eb0986f3f902da3e1c677d"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTableCleanerBase.html#a99fa9daf91eb0986f3f902da3e1c677d">v8::internal::StringForwardingTableCleanerBase::DisposeExternalResource</a></div><div class="ttdeci">void DisposeExternalResource(StringForwardingTable::Record *record)</div><div class="ttdef"><b>Definition</b> <a href="mark-sweep-utilities_8cc_source.html#l00131">mark-sweep-utilities.cc:131</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTable_1_1Record_html"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTable_1_1Record.html">v8::internal::StringForwardingTable::Record</a></div><div class="ttdef"><b>Definition</b> <a href="string-forwarding-table-inl_8h_source.html#l00022">string-forwarding-table-inl.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTable_html"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTable.html">v8::internal::StringForwardingTable</a></div><div class="ttdef"><b>Definition</b> <a href="string-forwarding-table_8h_source.html#l00026">string-forwarding-table.h:26</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTable_html_a21b17e1cef42e96f10fd272a2e42336f"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTable.html#a21b17e1cef42e96f10fd272a2e42336f">v8::internal::StringForwardingTable::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition</b> <a href="string-forwarding-table_8cc_source.html#l00340">string-forwarding-table.cc:340</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTable_html_aba31995a3b5943ddda7b8f06cf4ed63e"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTable.html#aba31995a3b5943ddda7b8f06cf4ed63e">v8::internal::StringForwardingTable::IterateElements</a></div><div class="ttdeci">V8_INLINE void IterateElements(Func &amp;&amp;callback)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringForwardingTable_html_acc353f872ecd8006400bd59337eec972"><div class="ttname"><a href="classv8_1_1internal_1_1StringForwardingTable.html#acc353f872ecd8006400bd59337eec972">v8::internal::StringForwardingTable::deleted_element</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; deleted_element()</div><div class="ttdef"><b>Definition</b> <a href="string-forwarding-table_8h_source.html#l00036">string-forwarding-table.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringTable_html_abeac36e6a289d88ba75d9e9053852588"><div class="ttname"><a href="classv8_1_1internal_1_1StringTable.html#abeac36e6a289d88ba75d9e9053852588">v8::internal::StringTable::deleted_element</a></div><div class="ttdeci">static constexpr Tagged&lt; Smi &gt; deleted_element()</div><div class="ttdef"><b>Definition</b> <a href="string-table_8h_source.html#l00051">string-table.h:51</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1String_html_ae7e164d91a146cf703e0cde41ab179b9"><div class="ttname"><a href="classv8_1_1internal_1_1String.html#ae7e164d91a146cf703e0cde41ab179b9">v8::internal::String::IsInPlaceInternalizableExcludingExternal</a></div><div class="ttdeci">static bool IsInPlaceInternalizableExcludingExternal(InstanceType instance_type)</div><div class="ttdef"><b>Definition</b> <a href="string-inl_8h_source.html#l01653">string-inl.h:1653</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a01bad92ed163322fda20e965bec9e19e"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a01bad92ed163322fda20e965bec9e19e">v8::internal::Sweeper::sweeping_in_progress</a></div><div class="ttdeci">bool sweeping_in_progress() const</div><div class="ttdef"><b>Definition</b> <a href="sweeper_8h_source.html#l00114">sweeper.h:114</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a18ffd1567b5bf06adae1fff80f4207d0"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a18ffd1567b5bf06adae1fff80f4207d0">v8::internal::Sweeper::StartMajorSweeperTasks</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void StartMajorSweeperTasks()</div><div class="ttdef"><b>Definition</b> <a href="sweeper_8cc_source.html#l00734">sweeper.cc:734</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_a374de26e99dae0ad5f32c1cbeab58285"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#a374de26e99dae0ad5f32c1cbeab58285">v8::internal::Sweeper::GetTraceIdForFlowEvent</a></div><div class="ttdeci">uint64_t GetTraceIdForFlowEvent(GCTracer::Scope::ScopeId scope_id) const</div><div class="ttdef"><b>Definition</b> <a href="sweeper_8cc_source.html#l01538">sweeper.cc:1538</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Sweeper_html_aca5b4d1317e28419219a4ef8982efc72"><div class="ttname"><a href="classv8_1_1internal_1_1Sweeper.html#aca5b4d1317e28419219a4ef8982efc72">v8::internal::Sweeper::SweepEmptyNewSpacePage</a></div><div class="ttdeci">void SweepEmptyNewSpacePage(PageMetadata *page)</div><div class="ttdef"><b>Definition</b> <a href="sweeper_8cc_source.html#l01473">sweeper.cc:1473</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_a04c1b715ba67f397a5a6607d054d9c4c"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#a04c1b715ba67f397a5a6607d054d9c4c">v8::internal::TaggedImpl::ptr</a></div><div class="ttdeci">V8_INLINE constexpr StorageType ptr() const</div><div class="ttdef"><b>Definition</b> <a href="tagged-impl_8h_source.html#l00114">tagged-impl.h:114</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_a941f4af4ddba9f09e9ff1ca6e4382c36"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#a941f4af4ddba9f09e9ff1ca6e4382c36">v8::internal::TaggedImpl::GetHeapObject</a></div><div class="ttdeci">bool GetHeapObject(Tagged&lt; HeapObject &gt; *result) const</div><div class="ttdef"><b>Definition</b> <a href="tagged-impl-inl_8h_source.html#l00046">tagged-impl-inl.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_3_01HeapObject_01_4_html_a07c12d3bf0972861e1c5aefabd00971f"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged_3_01HeapObject_01_4.html#a07c12d3bf0972861e1c5aefabd00971f">v8::internal::Tagged&lt; HeapObject &gt;::address</a></div><div class="ttdeci">Address address() const</div><div class="ttdef"><b>Definition</b> <a href="tagged_8h_source.html#l00497">tagged.h:497</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition</b> <a href="waiter-queue-node_8h_source.html#l00022">waiter-queue-node.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_abca61cf418b5bae301d7572fdc494d02"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#abca61cf418b5bae301d7572fdc494d02">v8::internal::ThreadIsolation::RegisterInstructionStreamAllocation</a></div><div class="ttdeci">static WritableJitAllocation RegisterInstructionStreamAllocation(Address addr, size_t size, bool enforce_write_api=false)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00482">code-memory-access.cc:482</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TimedScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1TimedScope.html">v8::internal::TimedScope</a></div><div class="ttdef"><b>Definition</b> <a href="utils-inl_8h_source.html#l00018">utils-inl.h:18</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TracedHandles_html_a4f33ad5439a15d4844bc3d8ce48e5f48"><div class="ttname"><a href="classv8_1_1internal_1_1TracedHandles.html#a4f33ad5439a15d4844bc3d8ce48e5f48">v8::internal::TracedHandles::SetIsMarking</a></div><div class="ttdeci">void SetIsMarking(bool)</div><div class="ttdef"><b>Definition</b> <a href="traced-handles_8cc_source.html#l00244">traced-handles.cc:244</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1UpdateTypedSlotHelper_html_a4b52de1f32d1c5e37149e76eb8b3d387"><div class="ttname"><a href="classv8_1_1internal_1_1UpdateTypedSlotHelper.html#a4b52de1f32d1c5e37149e76eb8b3d387">v8::internal::UpdateTypedSlotHelper::GetTargetObject</a></div><div class="ttdeci">static Tagged&lt; HeapObject &gt; GetTargetObject(Heap *heap, SlotType slot_type, Address addr)</div><div class="ttdef"><b>Definition</b> <a href="remembered-set-inl_8h_source.html#l00067">remembered-set-inl.h:67</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1UpdatingItem_html"><div class="ttname"><a href="classv8_1_1internal_1_1UpdatingItem.html">v8::internal::UpdatingItem</a></div><div class="ttdef"><b>Definition</b> <a href="#l05079">mark-compact.cc:5079</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1UpdatingItem_html_a0542af6439271628a9a9b043f0084896"><div class="ttname"><a href="classv8_1_1internal_1_1UpdatingItem.html#a0542af6439271628a9a9b043f0084896">v8::internal::UpdatingItem::~UpdatingItem</a></div><div class="ttdeci">virtual ~UpdatingItem()=default</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1UpdatingItem_html_ad5b054dd403a93d6b2397ba52d42c136"><div class="ttname"><a href="classv8_1_1internal_1_1UpdatingItem.html#ad5b054dd403a93d6b2397ba52d42c136">v8::internal::UpdatingItem::Process</a></div><div class="ttdeci">virtual void Process()=0</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1V8_html_a5eb1d47c492fa1e85e7d7c31dd5cf2bb"><div class="ttname"><a href="classv8_1_1internal_1_1V8.html#a5eb1d47c492fa1e85e7d7c31dd5cf2bb">v8::internal::V8::GetCurrentPlatform</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE v8::Platform * GetCurrentPlatform()</div><div class="ttdef"><b>Definition</b> <a href="v8_8cc_source.html#l00290">v8.cc:290</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WeakObjectRetainer_html"><div class="ttname"><a href="classv8_1_1internal_1_1WeakObjectRetainer.html">v8::internal::WeakObjectRetainer</a></div><div class="ttdef"><b>Definition</b> <a href="heap_8h_source.html#l02629">heap.h:2629</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WeakObjects_1_1Local_html"><div class="ttname"><a href="classv8_1_1internal_1_1WeakObjects_1_1Local.html">v8::internal::WeakObjects::Local</a></div><div class="ttdef"><b>Definition</b> <a href="weak-object-worklists_8h_source.html#l00098">weak-object-worklists.h:98</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WeakObjects_1_1Local_html_ad05233ba4265300887d0800ff7d7f3f9"><div class="ttname"><a href="classv8_1_1internal_1_1WeakObjects_1_1Local.html#ad05233ba4265300887d0800ff7d7f3f9">v8::internal::WeakObjects::Local::Publish</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void Publish()</div><div class="ttdef"><b>Definition</b> <a href="weak-object-worklists_8cc_source.html#l00030">weak-object-worklists.cc:30</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WeakObjects_html_a0557b5c72151038a6d73b9d5aa6804eb"><div class="ttname"><a href="classv8_1_1internal_1_1WeakObjects.html#a0557b5c72151038a6d73b9d5aa6804eb">v8::internal::WeakObjects::Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdef"><b>Definition</b> <a href="weak-object-worklists_8cc_source.html#l00042">weak-object-worklists.cc:42</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableJitAllocation_html"><div class="ttname"><a href="classv8_1_1internal_1_1WritableJitAllocation.html">v8::internal::WritableJitAllocation</a></div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8h_source.html#l00392">code-memory-access.h:392</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableJitAllocation_html_a5214a39ff535864c1f6ae1968547208d"><div class="ttname"><a href="classv8_1_1internal_1_1WritableJitAllocation.html#a5214a39ff535864c1f6ae1968547208d">v8::internal::WritableJitAllocation::CopyCode</a></div><div class="ttdeci">V8_INLINE void CopyCode(size_t dst_offset, const uint8_t *src, size_t num_bytes)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access-inl_8h_source.html#l00243">code-memory-access-inl.h:243</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableJitAllocation_html_a72af50fa547073a14369c06b3667345c"><div class="ttname"><a href="classv8_1_1internal_1_1WritableJitAllocation.html#a72af50fa547073a14369c06b3667345c">v8::internal::WritableJitAllocation::ForInstructionStream</a></div><div class="ttdeci">static WritableJitAllocation ForInstructionStream(Tagged&lt; InstructionStream &gt; istream)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00659">code-memory-access.cc:659</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableJitAllocation_html_a861973e19b930d615a69946aa439ac45"><div class="ttname"><a href="classv8_1_1internal_1_1WritableJitAllocation.html#a861973e19b930d615a69946aa439ac45">v8::internal::WritableJitAllocation::WriteHeaderSlot</a></div><div class="ttdeci">V8_INLINE void WriteHeaderSlot(T value)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableJitAllocation_html_ae8874306b45c6cb31544e5654210a001"><div class="ttname"><a href="classv8_1_1internal_1_1WritableJitAllocation.html#ae8874306b45c6cb31544e5654210a001">v8::internal::WritableJitAllocation::CopyData</a></div><div class="ttdeci">V8_INLINE void CopyData(size_t dst_offset, const uint8_t *src, size_t num_bytes)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access-inl_8h_source.html#l00250">code-memory-access-inl.h:250</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WriteBarrier_html_a606e46d0c77a3b252673584c3e359565"><div class="ttname"><a href="classv8_1_1internal_1_1WriteBarrier.html#a606e46d0c77a3b252673584c3e359565">v8::internal::WriteBarrier::GenerationalForRelocInfo</a></div><div class="ttdeci">static void GenerationalForRelocInfo(Tagged&lt; InstructionStream &gt; host, RelocInfo *rinfo, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="heap-write-barrier-inl_8h_source.html#l00228">heap-write-barrier-inl.h:228</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WriteBarrier_html_a9bb1fb710da2e3e6a4b9b42e8c003ab9"><div class="ttname"><a href="classv8_1_1internal_1_1WriteBarrier.html#a9bb1fb710da2e3e6a4b9b42e8c003ab9">v8::internal::WriteBarrier::SharedForRelocInfo</a></div><div class="ttdeci">static void SharedForRelocInfo(Tagged&lt; InstructionStream &gt; host, RelocInfo *, Tagged&lt; HeapObject &gt; value)</div><div class="ttdef"><b>Definition</b> <a href="heap-write-barrier-inl_8h_source.html#l00283">heap-write-barrier-inl.h:283</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_aee92d168ffa2e3a975289b9e785d10cd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#aee92d168ffa2e3a975289b9e785d10cd">v8::internal::wasm::WasmCodePointerTable::SweepSegments</a></div><div class="ttdeci">void SweepSegments(size_t threshold=2 *kEntriesPerSegment)</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-pointer-table_8cc_source.html#l00057">wasm-code-pointer-table.cc:57</a></div></div>
<div class="ttc" id="aclassv8_1_1tracing_1_1TracingCategoryObserver_html_aeb955195fe66a5b0497cff536c090589a31fe0ad3ce8b8c278bd0f78770f13b30"><div class="ttname"><a href="classv8_1_1tracing_1_1TracingCategoryObserver.html#aeb955195fe66a5b0497cff536c090589a31fe0ad3ce8b8c278bd0f78770f13b30">v8::tracing::TracingCategoryObserver::ENABLED_BY_TRACING</a></div><div class="ttdeci">@ ENABLED_BY_TRACING</div><div class="ttdef"><b>Definition</b> <a href="tracing-category-observer_8h_source.html#l00023">tracing-category-observer.h:23</a></div></div>
<div class="ttc" id="acode-events_8h_html_ad6ec92ea4475dc9e407f0963df52df64"><div class="ttname"><a href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a></div><div class="ttdeci">#define PROFILE(the_isolate, Call)</div><div class="ttdef"><b>Definition</b> <a href="code-events_8h_source.html#l00059">code-events.h:59</a></div></div>
<div class="ttc" id="acode-reference_8cc_html_aeaf31c189d3b2a89ff45fedfceb87d9d"><div class="ttname"><a href="code-reference_8cc.html#aeaf31c189d3b2a89ff45fedfceb87d9d">code</a></div><div class="ttdeci">Handle&lt; Code &gt; code</div><div class="ttdef"><b>Definition</b> <a href="code-reference_8cc_source.html#l00022">code-reference.cc:22</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html"><div class="ttname"><a href="common_2globals_8h.html">globals.h</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a69541a836e89979350b2e7634e2d5a0a"><div class="ttname"><a href="common_2globals_8h.html#a69541a836e89979350b2e7634e2d5a0a">V8_COMPRESS_POINTERS_8GB_BOOL</a></div><div class="ttdeci">#define V8_COMPRESS_POINTERS_8GB_BOOL</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00599">globals.h:599</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a76f936b13cc7401de647c23963eda5c1"><div class="ttname"><a href="common_2globals_8h.html#a76f936b13cc7401de647c23963eda5c1">ALIGN_TO_ALLOCATION_ALIGNMENT</a></div><div class="ttdeci">#define ALIGN_TO_ALLOCATION_ALIGNMENT(value)</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01779">globals.h:1779</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_ad1424123c0c7ea60e89475a70021d7ca"><div class="ttname"><a href="common_2globals_8h.html#ad1424123c0c7ea60e89475a70021d7ca">HAS_WEAK_HEAP_OBJECT_TAG</a></div><div class="ttdeci">#define HAS_WEAK_HEAP_OBJECT_TAG(value)</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01761">globals.h:1761</a></div></div>
<div class="ttc" id="acompilation-cache_8h_html"><div class="ttname"><a href="compilation-cache_8h.html">compilation-cache.h</a></div></div>
<div class="ttc" id="aconcurrent-marking_8h_html"><div class="ttname"><a href="concurrent-marking_8h.html">concurrent-marking.h</a></div></div>
<div class="ttc" id="acppgc_2sweeper_8cc_html_a876e0ae5632dcb3138e6e718ac01ae8a"><div class="ttname"><a href="cppgc_2sweeper_8cc.html#a876e0ae5632dcb3138e6e718ac01ae8a">page</a></div><div class="ttdeci">BasePage * page</div><div class="ttdef"><b>Definition</b> <a href="cppgc_2sweeper_8cc_source.html#l00218">sweeper.cc:218</a></div></div>
<div class="ttc" id="adata-view-ops_8h_html_a04ef3e8b3cbc9ea1605b3067d2a55474"><div class="ttname"><a href="data-view-ops_8h.html#a04ef3e8b3cbc9ea1605b3067d2a55474">ToString</a></div><div class="ttdeci">constexpr const char * ToString(DataViewOp op)</div><div class="ttdef"><b>Definition</b> <a href="data-view-ops_8h_source.html#l00032">data-view-ops.h:32</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_a37722a150250e2a5a98e5e0d11e53449"><div class="ttname"><a href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a></div><div class="ttdeci">int start</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00595">debug-coverage.cc:595</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_abce9f5dc9c83f2639b72024fdee5d388"><div class="ttname"><a href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a></div><div class="ttdeci">int end</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00596">debug-coverage.cc:596</a></div></div>
<div class="ttc" id="adeoptimizer_8h_html"><div class="ttname"><a href="deoptimizer_8h.html">deoptimizer.h</a></div></div>
<div class="ttc" id="aearley-parser_8cc_html_a69620d3d0bf3441e9802e4853271cad4"><div class="ttname"><a href="earley-parser_8cc.html#a69620d3d0bf3441e9802e4853271cad4">current</a></div><div class="ttdeci">LineAndColumn current</div><div class="ttdef"><b>Definition</b> <a href="earley-parser_8cc_source.html#l00022">earley-parser.cc:22</a></div></div>
<div class="ttc" id="aembedder-data-array-inl_8h_html"><div class="ttname"><a href="embedder-data-array-inl_8h.html">embedder-data-array-inl.h</a></div></div>
<div class="ttc" id="aephemeron-remembered-set_8h_html"><div class="ttname"><a href="ephemeron-remembered-set_8h.html">ephemeron-remembered-set.h</a></div></div>
<div class="ttc" id="aevacuation-allocator-inl_8h_html"><div class="ttname"><a href="evacuation-allocator-inl_8h.html">evacuation-allocator-inl.h</a></div></div>
<div class="ttc" id="aevacuation-verifier-inl_8h_html"><div class="ttname"><a href="evacuation-verifier-inl_8h.html">evacuation-verifier-inl.h</a></div></div>
<div class="ttc" id="aexecution_8h_html"><div class="ttname"><a href="execution_8h.html">execution.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a4809e2dc7c4059bfe40ea11cda69d8f7"><div class="ttname"><a href="flag-definitions_8h.html#a4809e2dc7c4059bfe40ea11cda69d8f7">true</a></div><div class="ttdeci">Disallow flags or implications overriding each other abort_on_contradictory_flags true</div><div class="ttdef"><b>Definition</b> <a href="flag-definitions_8h_source.html#l00361">flag-definitions.h:361</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_ae50fea4f4c58d91d722bb7e290b4776b"><div class="ttname"><a href="flag-definitions_8h.html#ae50fea4f4c58d91d722bb7e290b4776b">space</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed Starts incremental marking with kUserVisible priority threshold for starting incremental marking immediately in percent of available space</div><div class="ttdef"><b>Definition</b> <a href="flag-definitions_8h_source.html#l02031">flag-definitions.h:2029</a></div></div>
<div class="ttc" id="aflags_2flags_8h_html"><div class="ttname"><a href="flags_2flags_8h.html">flags.h</a></div></div>
<div class="ttc" id="aforeign_8h_html"><div class="ttname"><a href="foreign_8h.html">foreign.h</a></div></div>
<div class="ttc" id="aframes-inl_8h_html"><div class="ttname"><a href="frames-inl_8h.html">frames-inl.h</a></div></div>
<div class="ttc" id="agc-tracer-inl_8h_html"><div class="ttname"><a href="gc-tracer-inl_8h.html">gc-tracer-inl.h</a></div></div>
<div class="ttc" id="agc-tracer_8h_html"><div class="ttname"><a href="gc-tracer_8h.html">gc-tracer.h</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a17375713518e1833362b491ef9c163cc"><div class="ttname"><a href="gc-tracer_8h.html#a17375713518e1833362b491ef9c163cc">TRACE_GC_NOTE_WITH_FLOW</a></div><div class="ttdeci">#define TRACE_GC_NOTE_WITH_FLOW(note, bind_id, flow_flags)</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00098">gc-tracer.h:98</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a44d6debe5f608aa9654172245625ef38"><div class="ttname"><a href="gc-tracer_8h.html#a44d6debe5f608aa9654172245625ef38">TRACE_GC_EPOCH_WITH_FLOW</a></div><div class="ttdeci">#define TRACE_GC_EPOCH_WITH_FLOW(tracer, scope_id, thread_kind, bind_id, flow_flags)</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00084">gc-tracer.h:84</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a4b6fc205b8b8bbe4275672c2a66c5b94"><div class="ttname"><a href="gc-tracer_8h.html#a4b6fc205b8b8bbe4275672c2a66c5b94">TRACE_GC_WITH_FLOW</a></div><div class="ttdeci">#define TRACE_GC_WITH_FLOW(tracer, scope_id, bind_id, flow_flags)</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00052">gc-tracer.h:52</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_a5565074f0fda27fbaa5cace7ea4a4108"><div class="ttname"><a href="gc-tracer_8h.html#a5565074f0fda27fbaa5cace7ea4a4108">TRACE_GC</a></div><div class="ttdeci">#define TRACE_GC(tracer, scope_id)</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00035">gc-tracer.h:35</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_ab1b9d31a6993723e2ab2a57d5d18ef5a"><div class="ttname"><a href="gc-tracer_8h.html#ab1b9d31a6993723e2ab2a57d5d18ef5a">TRACE_GC_ARG1</a></div><div class="ttdeci">#define TRACE_GC_ARG1(tracer, scope_id, arg0_name, arg0_value)</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00043">gc-tracer.h:43</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_af107f5a2136b9fcf104fc8c23a5bdfaa"><div class="ttname"><a href="gc-tracer_8h.html#af107f5a2136b9fcf104fc8c23a5bdfaa">TRACE_GC_CATEGORIES</a></div><div class="ttdeci">#define TRACE_GC_CATEGORIES</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00029">gc-tracer.h:29</a></div></div>
<div class="ttc" id="agc-tracer_8h_html_af9338020b2e2d4a1c8fe541d32e18473"><div class="ttname"><a href="gc-tracer_8h.html#af9338020b2e2d4a1c8fe541d32e18473">TRACE_GC1_WITH_FLOW</a></div><div class="ttdeci">#define TRACE_GC1_WITH_FLOW(tracer, scope_id, thread_kind, bind_id, flow_flags)</div><div class="ttdef"><b>Definition</b> <a href="gc-tracer_8h_source.html#l00068">gc-tracer.h:68</a></div></div>
<div class="ttc" id="aglobal-handles_8h_html"><div class="ttname"><a href="global-handles_8h.html">global-handles.h</a></div></div>
<div class="ttc" id="ahash-table-inl_8h_html"><div class="ttname"><a href="hash-table-inl_8h.html">hash-table-inl.h</a></div></div>
<div class="ttc" id="aheap-layout-inl_8h_html"><div class="ttname"><a href="heap-layout-inl_8h.html">heap-layout-inl.h</a></div></div>
<div class="ttc" id="aheap-object-inl_8h_html"><div class="ttname"><a href="heap-object-inl_8h.html">heap-object-inl.h</a></div></div>
<div class="ttc" id="aheap-object_8h_html"><div class="ttname"><a href="heap-object_8h.html">heap-object.h</a></div></div>
<div class="ttc" id="aheap-utils-inl_8h_html"><div class="ttname"><a href="heap-utils-inl_8h.html">heap-utils-inl.h</a></div></div>
<div class="ttc" id="aheap-visitor-inl_8h_html"><div class="ttname"><a href="heap-visitor-inl_8h.html">heap-visitor-inl.h</a></div></div>
<div class="ttc" id="aheap_8h_html"><div class="ttname"><a href="heap_8h.html">heap.h</a></div></div>
<div class="ttc" id="aincremental-marking-inl_8h_html"><div class="ttname"><a href="incremental-marking-inl_8h.html">incremental-marking-inl.h</a></div></div>
<div class="ttc" id="aindex-generator_8h_html"><div class="ttname"><a href="index-generator_8h.html">index-generator.h</a></div></div>
<div class="ttc" id="aindirect-pointer-tag_8h_html"><div class="ttname"><a href="indirect-pointer-tag_8h.html">indirect-pointer-tag.h</a></div></div>
<div class="ttc" id="ainstance-type_8h_html"><div class="ttname"><a href="instance-type_8h.html">instance-type.h</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a115c48491bb37004f5ac67eb46ac2c23"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a></div><div class="ttdeci">turboshaft::OpIndex base</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00070">instruction-selector-ia32.cc:70</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a97bd6c077f3c7769f575b82988b9b668"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a></div><div class="ttdeci">int32_t offset</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00072">instruction-selector-ia32.cc:72</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_ae55190dbead0a94298bdfa37911694e3"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a></div><div class="ttdeci">turboshaft::OptionalOpIndex index</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00071">instruction-selector-ia32.cc:71</a></div></div>
<div class="ttc" id="aisolate-utils-inl_8h_html"><div class="ttname"><a href="isolate-utils-inl_8h.html">isolate-utils-inl.h</a></div></div>
<div class="ttc" id="aisolate-utils_8h_html"><div class="ttname"><a href="isolate-utils_8h.html">isolate-utils.h</a></div></div>
<div class="ttc" id="ajs-array-buffer-inl_8h_html"><div class="ttname"><a href="js-array-buffer-inl_8h.html">js-array-buffer-inl.h</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_a0835767fe473cead88c1afdf3175bce8"><div class="ttname"><a href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a></div><div class="ttdeci">TNode&lt; Context &gt; context</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01496">js-call-reducer.cc:1496</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_a160b46cc89e1d0807731be8c2d2257c0"><div class="ttname"><a href="js-call-reducer_8cc.html#a160b46cc89e1d0807731be8c2d2257c0">target</a></div><div class="ttdeci">TNode&lt; Object &gt; target</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01497">js-call-reducer.cc:1497</a></div></div>
<div class="ttc" id="ajs-date-time-format_8cc_html_a22ede25ca923109929a8dca3c225b2ad"><div class="ttname"><a href="js-date-time-format_8cc.html#a22ede25ca923109929a8dca3c225b2ad">map</a></div><div class="ttdeci">std::map&lt; const std::string, const std::string &gt; map</div><div class="ttdef"><b>Definition</b> <a href="js-date-time-format_8cc_source.html#l00268">js-date-time-format.cc:268</a></div></div>
<div class="ttc" id="ajs-objects-inl_8h_html"><div class="ttname"><a href="js-objects-inl_8h.html">js-objects-inl.h</a></div></div>
<div class="ttc" id="ajs-temporal-objects_8cc_html_a0667ab99c341e3655dd57d35e516c02b"><div class="ttname"><a href="js-temporal-objects_8cc.html#a0667ab99c341e3655dd57d35e516c02b">second</a></div><div class="ttdeci">double second</div><div class="ttdef"><b>Definition</b> <a href="js-temporal-objects_8cc_source.html#l00063">js-temporal-objects.cc:63</a></div></div>
<div class="ttc" id="ajs-temporal-objects_8cc_html_aeafbb073d4154826b9a3e64490d9d59c"><div class="ttname"><a href="js-temporal-objects_8cc.html#aeafbb073d4154826b9a3e64490d9d59c">record</a></div><div class="ttdeci">DurationRecord record</div><div class="ttdef"><b>Definition</b> <a href="js-temporal-objects_8cc_source.html#l00107">js-temporal-objects.cc:107</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a41f8c58d2c01bf65b8ee199c3f87fc80"><div class="ttname"><a href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a></div><div class="ttdeci">ZoneVector&lt; RpoNumber &gt; &amp; result</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00021">jump-threading.cc:21</a></div></div>
<div class="ttc" id="alarge-spaces_8h_html"><div class="ttname"><a href="large-spaces_8h.html">large-spaces.h</a></div></div>
<div class="ttc" id="alive-object-range-inl_8h_html"><div class="ttname"><a href="live-object-range-inl_8h.html">live-object-range-inl.h</a></div></div>
<div class="ttc" id="alogging_8h_html"><div class="ttname"><a href="logging_8h.html">logging.h</a></div></div>
<div class="ttc" id="alogging_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00067">logging.h:67</a></div></div>
<div class="ttc" id="alogging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00490">logging.h:490</a></div></div>
<div class="ttc" id="alogging_8h_html_a2209830df6b59d1ec1fdf66b9352924f"><div class="ttname"><a href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a></div><div class="ttdeci">#define DCHECK_NULL(val)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00491">logging.h:491</a></div></div>
<div class="ttc" id="alogging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="alogging_8h_html_a7b9f9517fedacc2a1a56c2bbb9d03688"><div class="ttname"><a href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a></div><div class="ttdeci">#define DCHECK_NOT_NULL(val)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00492">logging.h:492</a></div></div>
<div class="ttc" id="alogging_8h_html_a7bf1ad59490562f507223cd6ca2cc6fa"><div class="ttname"><a href="logging_8h.html#a7bf1ad59490562f507223cd6ca2cc6fa">CHECK_NULL</a></div><div class="ttdeci">#define CHECK_NULL(val)</div></div>
<div class="ttc" id="alogging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00493">logging.h:493</a></div></div>
<div class="ttc" id="alogging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="alogging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="alogging_8h_html_aca32614b4d2aea7dd9abdeb222bf02f3"><div class="ttname"><a href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00482">logging.h:482</a></div></div>
<div class="ttc" id="alogging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="alogging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="alogging_8h_html_afd957f297df7e9ee36c46185e961485f"><div class="ttname"><a href="logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a></div><div class="ttdeci">#define DCHECK_GT(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00487">logging.h:487</a></div></div>
<div class="ttc" id="amacros_8h_html_a280b0798f270f4b3f361c9ab64832956"><div class="ttname"><a href="macros_8h.html#a280b0798f270f4b3f361c9ab64832956">USE</a></div><div class="ttdeci">#define USE(...)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00281">macros.h:281</a></div></div>
<div class="ttc" id="amacros_8h_html_a5647046a5349ec401aa3ae0c65a1b755"><div class="ttname"><a href="macros_8h.html#a5647046a5349ec401aa3ae0c65a1b755">V8PRIdPTR</a></div><div class="ttdeci">#define V8PRIdPTR</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00320">macros.h:320</a></div></div>
<div class="ttc" id="amacros_8h_html_ab7a19c1f785f31f2b190afc19875368a"><div class="ttname"><a href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a></div><div class="ttdeci">constexpr bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00391">macros.h:391</a></div></div>
<div class="ttc" id="amark-compact-inl_8h_html"><div class="ttname"><a href="mark-compact-inl_8h.html">mark-compact-inl.h</a></div></div>
<div class="ttc" id="amark-compact_8h_html"><div class="ttname"><a href="mark-compact_8h.html">mark-compact.h</a></div></div>
<div class="ttc" id="amark-sweep-utilities_8h_html"><div class="ttname"><a href="mark-sweep-utilities_8h.html">mark-sweep-utilities.h</a></div></div>
<div class="ttc" id="amarking-barrier_8h_html"><div class="ttname"><a href="marking-barrier_8h.html">marking-barrier.h</a></div></div>
<div class="ttc" id="amarking-inl_8h_html"><div class="ttname"><a href="marking-inl_8h.html">marking-inl.h</a></div></div>
<div class="ttc" id="amarking-state-inl_8h_html"><div class="ttname"><a href="marking-state-inl_8h.html">marking-state-inl.h</a></div></div>
<div class="ttc" id="amarking-visitor-inl_8h_html"><div class="ttname"><a href="marking-visitor-inl_8h.html">marking-visitor-inl.h</a></div></div>
<div class="ttc" id="amarking_8h_html"><div class="ttname"><a href="marking_8h.html">marking.h</a></div></div>
<div class="ttc" id="amaybe-object_8h_html"><div class="ttname"><a href="maybe-object_8h.html">maybe-object.h</a></div></div>
<div class="ttc" id="amemory-allocator_8h_html"><div class="ttname"><a href="memory-allocator_8h.html">memory-allocator.h</a></div></div>
<div class="ttc" id="amemory-chunk-layout_8h_html"><div class="ttname"><a href="memory-chunk-layout_8h.html">memory-chunk-layout.h</a></div></div>
<div class="ttc" id="amemory-chunk-metadata_8h_html"><div class="ttname"><a href="memory-chunk-metadata_8h.html">memory-chunk-metadata.h</a></div></div>
<div class="ttc" id="amemory-measurement-inl_8h_html"><div class="ttname"><a href="memory-measurement-inl_8h.html">memory-measurement-inl.h</a></div></div>
<div class="ttc" id="amemory-measurement_8h_html"><div class="ttname"><a href="memory-measurement_8h.html">memory-measurement.h</a></div></div>
<div class="ttc" id="amutable-page-metadata_8h_html"><div class="ttname"><a href="mutable-page-metadata_8h.html">mutable-page-metadata.h</a></div></div>
<div class="ttc" id="amutex_8h_html"><div class="ttname"><a href="mutex_8h.html">mutex.h</a></div></div>
<div class="ttc" id="anamespaceheap_1_1base_html_af211f1740517ece6877e81f91b8c6759"><div class="ttname"><a href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759">heap::base::SlotCallbackResult</a></div><div class="ttdeci">SlotCallbackResult</div><div class="ttdef"><b>Definition</b> <a href="basic-slot-set_8h_source.html#l00022">basic-slot-set.h:22</a></div></div>
<div class="ttc" id="anamespaceheap_1_1base_html_af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a"><div class="ttname"><a href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759a303c38b199c14e5ea05df94648ef453a">heap::base::REMOVE_SLOT</a></div><div class="ttdeci">@ REMOVE_SLOT</div><div class="ttdef"><b>Definition</b> <a href="basic-slot-set_8h_source.html#l00022">basic-slot-set.h:22</a></div></div>
<div class="ttc" id="anamespaceheap_1_1base_html_af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40"><div class="ttname"><a href="namespaceheap_1_1base.html#af211f1740517ece6877e81f91b8c6759ae8ea1f4f1c937202ac0aa2fe5bf33b40">heap::base::KEEP_SLOT</a></div><div class="ttdeci">@ KEEP_SLOT</div><div class="ttdef"><b>Definition</b> <a href="basic-slot-set_8h_source.html#l00022">basic-slot-set.h:22</a></div></div>
<div class="ttc" id="anamespaceheap_html"><div class="ttname"><a href="namespaceheap.html">heap</a></div><div class="ttdef"><b>Definition</b> <a href="base_2platform_2platform_8h_source.html#l00073">platform.h:73</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition</b> <a href="hashing_8h_source.html#l00364">hashing.h:364</a></div></div>
<div class="ttc" id="anamespacev8_1_1api__internal_html_a6e19dba9644f1405ed8144c4d9e7b98f"><div class="ttname"><a href="namespacev8_1_1api__internal.html#a6e19dba9644f1405ed8144c4d9e7b98f">v8::api_internal::MakeWeak</a></div><div class="ttdeci">void MakeWeak(i::Address *location, void *parameter, WeakCallbackInfo&lt; void &gt;::Callback weak_callback, WeakCallbackType type)</div><div class="ttdef"><b>Definition</b> <a href="api_8cc_source.html#l00836">api.cc:836</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1bits_html_a4d06086712ebcd60838caae1a21fcfa3"><div class="ttname"><a href="namespacev8_1_1base_1_1bits.html#a4d06086712ebcd60838caae1a21fcfa3">v8::base::bits::IsPowerOfTwo</a></div><div class="ttdeci">constexpr bool IsPowerOfTwo(T value)</div><div class="ttdef"><b>Definition</b> <a href="bits_8h_source.html#l00187">bits.h:187</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a3279492e34e391eefba807ff6a59576e"><div class="ttname"><a href="namespacev8_1_1base.html#a3279492e34e391eefba807ff6a59576e">v8::base::SpinningMutexGuard</a></div><div class="ttdeci">LockGuard&lt; SpinningMutex &gt; SpinningMutexGuard</div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00562">mutex.h:562</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ab5fa5880b3e672f78b7e772eebdae914"><div class="ttname"><a href="namespacev8_1_1base.html#ab5fa5880b3e672f78b7e772eebdae914">v8::base::Address</a></div><div class="ttdeci">uintptr_t Address</div><div class="ttdef"><b>Definition</b> <a href="base_2memory_8h_source.html#l00013">memory.h:13</a></div></div>
<div class="ttc" id="anamespacev8_1_1bigint_html_a6d4d2ce18897aba0f90b3208eca29a5b"><div class="ttname"><a href="namespacev8_1_1bigint.html#a6d4d2ce18897aba0f90b3208eca29a5b">v8::bigint::Add</a></div><div class="ttdeci">void Add(RWDigits Z, Digits X, Digits Y)</div><div class="ttdef"><b>Definition</b> <a href="vector-arithmetic_8cc_source.html#l00041">vector-arithmetic.cc:41</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1InstanceTypeChecker_html_a08148789a9c2a5375c705ca803f54493"><div class="ttname"><a href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a08148789a9c2a5375c705ca803f54493">v8::internal::InstanceTypeChecker::IsThinString</a></div><div class="ttdeci">V8_INLINE constexpr bool IsThinString(InstanceType instance_type)</div><div class="ttdef"><b>Definition</b> <a href="instance-type-inl_8h_source.html#l00383">instance-type-inl.h:383</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1InstanceTypeChecker_html_a499b0a3964a81c9abb3e89b9b9ca92f2"><div class="ttname"><a href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a499b0a3964a81c9abb3e89b9b9ca92f2">v8::internal::InstanceTypeChecker::IsExternalString</a></div><div class="ttdeci">V8_INLINE constexpr bool IsExternalString(InstanceType instance_type)</div><div class="ttdef"><b>Definition</b> <a href="instance-type-inl_8h_source.html#l00328">instance-type-inl.h:328</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1InstanceTypeChecker_html_a6e5d77af13c8025809308fb475de5703"><div class="ttname"><a href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#a6e5d77af13c8025809308fb475de5703">v8::internal::InstanceTypeChecker::IsInternalizedString</a></div><div class="ttdeci">V8_INLINE constexpr bool IsInternalizedString(InstanceType instance_type)</div><div class="ttdef"><b>Definition</b> <a href="instance-type-inl_8h_source.html#l00299">instance-type-inl.h:299</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1InstanceTypeChecker_html_af9f9433b8b4d9738a1201bb9e19389be"><div class="ttname"><a href="namespacev8_1_1internal_1_1InstanceTypeChecker.html#af9f9433b8b4d9738a1201bb9e19389be">v8::internal::InstanceTypeChecker::IsHeapObject</a></div><div class="ttdeci">V8_INLINE constexpr bool IsHeapObject(InstanceType instance_type)</div><div class="ttdef"><b>Definition</b> <a href="instance-type-inl_8h_source.html#l00295">instance-type-inl.h:295</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a0a36931b3d2bbcdfcbb253b229838952"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a0a36931b3d2bbcdfcbb253b229838952">v8::internal::wasm::GetProcessWideWasmCodePointerTable</a></div><div class="ttdeci">V8_EXPORT_PRIVATE WasmCodePointerTable * GetProcessWideWasmCodePointerTable()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00018">api-arguments-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a08e1140ec7d96bfd4d6b21a808ccd654"><div class="ttname"><a href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">v8::internal::MB</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed Starts incremental marking with kUserVisible priority threshold for starting incremental marking immediately in percent of available minor GC task trigger in percent of the current heap limit use a separate phase for stack scanning in scavenge max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage * MB</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l02095">flags.cc:2095</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0c4c2447a5acd27dc8a491552ed75cdf"><div class="ttname"><a href="namespacev8_1_1internal.html#a0c4c2447a5acd27dc8a491552ed75cdf">v8::internal::ProtectedMaybeObjectSlot</a></div><div class="ttdeci">SlotTraits::TProtectedMaybeObjectSlot ProtectedMaybeObjectSlot</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01263">globals.h:1263</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0cfab207d565dcf62ebf50f3987e05de"><div class="ttname"><a href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">v8::internal::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition</b> <a href="heap-snapshot-generator_8cc_source.html#l01584">heap-snapshot-generator.cc:1584</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0e37222f89b601646c5c64b07fd55cc0"><div class="ttname"><a href="namespacev8_1_1internal.html#a0e37222f89b601646c5c64b07fd55cc0">v8::internal::Tagged&lt; MaybeObject &gt;</a></div><div class="ttdeci">Tagged&lt; MaybeObject &gt;</div><div class="ttdef"><b>Definition</b> <a href="data-handler-inl_8h_source.html#l00027">data-handler-inl.h:27</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a10b1a1807774d2d287797132732f0d9a"><div class="ttname"><a href="namespacev8_1_1internal.html#a10b1a1807774d2d287797132732f0d9a">v8::internal::ToString</a></div><div class="ttdeci">constexpr const char * ToString(DeoptimizeKind kind)</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00871">globals.h:871</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a12d50d7bb2c9d8a916ff0785e6eff241"><div class="ttname"><a href="namespacev8_1_1internal.html#a12d50d7bb2c9d8a916ff0785e6eff241">v8::internal::kTaggedSize</a></div><div class="ttdeci">constexpr int kTaggedSize</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00534">globals.h:534</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a1f7ce33330ccea2a9fa5ed04a6705fed"><div class="ttname"><a href="namespacev8_1_1internal.html#a1f7ce33330ccea2a9fa5ed04a6705fed">v8::internal::GetPtrComprCageBaseFromOnHeapAddress</a></div><div class="ttdeci">V8_INLINE constexpr PtrComprCageBase GetPtrComprCageBaseFromOnHeapAddress(Address address)</div><div class="ttdef"><b>Definition</b> <a href="ptr-compr-inl_8h_source.html#l00329">ptr-compr-inl.h:329</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a20971f8a9770697fdde08004c19035a3"><div class="ttname"><a href="namespacev8_1_1internal.html#a20971f8a9770697fdde08004c19035a3">v8::internal::DisallowGarbageCollection</a></div><div class="ttdeci">PerThreadAssertScopeDebugOnly&lt; false, SAFEPOINTS_ASSERT, HEAP_ALLOCATION_ASSERT &gt; DisallowGarbageCollection</div><div class="ttdef"><b>Definition</b> <a href="assert-scope_8h_source.html#l00236">assert-scope.h:236</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a2b7e4fb72ad9eb1ccadac01ef972ea05"><div class="ttname"><a href="namespacev8_1_1internal.html#a2b7e4fb72ad9eb1ccadac01ef972ea05">v8::internal::ObjectSlot</a></div><div class="ttdeci">SlotTraits::TObjectSlot ObjectSlot</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01232">globals.h:1232</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3430752cde9f29d73e97ceed1bce0856"><div class="ttname"><a href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="utils_2utils_8cc_source.html#l00039">utils.cc:39</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07"><div class="ttname"><a href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea04ed0d17680a76a1a906aed4ff47cd07">v8::internal::ThreadKind::kMain</a></div><div class="ttdeci">@ kMain</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a34c412e70714b6b814e60c4b6883e0eea7c58afb43537a264dcd68e698a7b8e3b"><div class="ttname"><a href="namespacev8_1_1internal.html#a34c412e70714b6b814e60c4b6883e0eea7c58afb43537a264dcd68e698a7b8e3b">v8::internal::ThreadKind::kBackground</a></div><div class="ttdeci">@ kBackground</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3d154fed8222e22068b915454f5db983"><div class="ttname"><a href="namespacev8_1_1internal.html#a3d154fed8222e22068b915454f5db983">v8::internal::IndirectPointerMode</a></div><div class="ttdeci">IndirectPointerMode</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00802">globals.h:802</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4382c244e839ce16a4beafabd1c6bd1d"><div class="ttname"><a href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">v8::internal::Tagged</a></div><div class="ttdeci">Tagged(T object) -&gt; Tagged&lt; T &gt;</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4ec7ab128c7d0f56267c22c7ee13d019"><div class="ttname"><a href="namespacev8_1_1internal.html#a4ec7ab128c7d0f56267c22c7ee13d019">v8::internal::ProtectedPointerSlot</a></div><div class="ttdeci">SlotTraits::TProtectedPointerSlot ProtectedPointerSlot</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01261">globals.h:1261</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition</b> <a href="wasm-objects-inl_8h_source.html#l00457">wasm-objects-inl.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a511c3dd03bb4fc2b91ed9ef5535e202e"><div class="ttname"><a href="namespacev8_1_1internal.html#a511c3dd03bb4fc2b91ed9ef5535e202e">v8::internal::IsSmi</a></div><div class="ttdeci">V8_INLINE constexpr bool IsSmi(TaggedImpl&lt; kRefType, StorageType &gt; obj)</div><div class="ttdef"><b>Definition</b> <a href="objects_8h_source.html#l00655">objects.h:655</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5297fd2c72981b2220e6b9a831570fb3"><div class="ttname"><a href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">v8::internal::Tagged&lt; Object &gt;</a></div><div class="ttdeci">Tagged&lt; Object &gt;</div><div class="ttdef"><b>Definition</b> <a href="allocation-site-inl_8h_source.html#l00029">allocation-site-inl.h:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a57f5ecf71b9a2757b0555b2be4c640b8"><div class="ttname"><a href="namespacev8_1_1internal.html#a57f5ecf71b9a2757b0555b2be4c640b8">v8::internal::Tagged&lt; HeapObject &gt;</a></div><div class="ttdeci">kInterpreterTrampolineOffset Tagged&lt; HeapObject &gt;</div><div class="ttdef"><b>Definition</b> <a href="shared-function-info-inl_8h_source.html#l00116">shared-function-info-inl.h:116</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5ae38dc7ddb420b6d0f8cd6b3ede93c0"><div class="ttname"><a href="namespacev8_1_1internal.html#a5ae38dc7ddb420b6d0f8cd6b3ede93c0">v8::internal::CompactionSpaceKind</a></div><div class="ttdeci">CompactionSpaceKind</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01571">globals.h:1571</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5ae38dc7ddb420b6d0f8cd6b3ede93c0ad1c03161d710554d14dab31167da863d"><div class="ttname"><a href="namespacev8_1_1internal.html#a5ae38dc7ddb420b6d0f8cd6b3ede93c0ad1c03161d710554d14dab31167da863d">v8::internal::CompactionSpaceKind::kCompactionSpaceForMarkCompact</a></div><div class="ttdeci">@ kCompactionSpaceForMarkCompact</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5b59223136254772ef018d90e009318d"><div class="ttname"><a href="namespacev8_1_1internal.html#a5b59223136254772ef018d90e009318d">v8::internal::MemsetTagged</a></div><div class="ttdeci">void MemsetTagged(Tagged_t *start, Tagged&lt; MaybeObject &gt; value, size_t counter)</div><div class="ttdef"><b>Definition</b> <a href="slots-inl_8h_source.html#l00466">slots-inl.h:466</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5ded0ca969c512d8bdfe748d88b54849"><div class="ttname"><a href="namespacev8_1_1internal.html#a5ded0ca969c512d8bdfe748d88b54849">v8::internal::InstructionStreamSlot</a></div><div class="ttdeci">SlotTraits::TInstructionStreamSlot InstructionStreamSlot</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01254">globals.h:1254</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6762e3845e3e870981025a55d605f1dea94a9c1aa93ea09cd7898dddd588022e6"><div class="ttname"><a href="namespacev8_1_1internal.html#a6762e3845e3e870981025a55d605f1dea94a9c1aa93ea09cd7898dddd588022e6">v8::internal::kNone</a></div><div class="ttdeci">@ kNone</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01811">globals.h:1811</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a67a51b6314a9bc8a8c44c5fe14149e6c"><div class="ttname"><a href="namespacev8_1_1internal.html#a67a51b6314a9bc8a8c44c5fe14149e6c">v8::internal::key</a></div><div class="ttdeci">int32_t key</div><div class="ttdef"><b>Definition</b> <a href="external-reference_8cc_source.html#l01345">external-reference.cc:1345</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6ec58efb6d7b6b12187c9c9426333e83"><div class="ttname"><a href="namespacev8_1_1internal.html#a6ec58efb6d7b6b12187c9c9426333e83">v8::internal::UncheckedCast</a></div><div class="ttdeci">Handle&lt; To &gt; UncheckedCast(Handle&lt; From &gt; value)</div><div class="ttdef"><b>Definition</b> <a href="handles-inl_8h_source.html#l00053">handles-inl.h:53</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a782acb70e9eabcd3faaccfb6a3bde48e"><div class="ttname"><a href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">v8::internal::Address</a></div><div class="ttdeci">Address</div><div class="ttdef"><b>Definition</b> <a href="api-callbacks-inl_8h_source.html#l00034">api-callbacks-inl.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a88f9df58053cd276e2e63b1d0445420ca520ecade39431601ba732cd4f6de66fa"><div class="ttname"><a href="namespacev8_1_1internal.html#a88f9df58053cd276e2e63b1d0445420ca520ecade39431601ba732cd4f6de66fa">v8::internal::PageSize::kRegular</a></div><div class="ttdeci">@ kRegular</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a8e0177885936828a908f569be4618338"><div class="ttname"><a href="namespacev8_1_1internal.html#a8e0177885936828a908f569be4618338">v8::internal::HeapObjectAndSlot</a></div><div class="ttdeci">detail::HeapObjectAndSlotPOD&lt; HeapObjectSlot &gt; HeapObjectAndSlot</div><div class="ttdef"><b>Definition</b> <a href="weak-object-worklists_8h_source.html#l00033">weak-object-worklists.h:33</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a9609de810273be552e48d8582efe83e6"><div class="ttname"><a href="namespacev8_1_1internal.html#a9609de810273be552e48d8582efe83e6">v8::internal::AllocationAlignment</a></div><div class="ttdeci">AllocationAlignment</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01531">globals.h:1531</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a9702f1cf0153510561af900313494b5e"><div class="ttname"><a href="namespacev8_1_1internal.html#a9702f1cf0153510561af900313494b5e">v8::internal::IsCppHeapMarkingFinished</a></div><div class="ttdeci">bool IsCppHeapMarkingFinished(Heap *heap, MarkingWorklists::Local *local_marking_worklists)</div><div class="ttdef"><b>Definition</b> <a href="mark-sweep-utilities_8cc_source.html#l00140">mark-sweep-utilities.cc:140</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fef"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fef">v8::internal::AllocationSpace</a></div><div class="ttdeci">AllocationSpace</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01293">globals.h:1293</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa057ecb490c9eb2f2dc1677326b8a5621">v8::internal::NEW_SPACE</a></div><div class="ttdeci">@ NEW_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01295">globals.h:1295</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa14e4604f12b3138f8e00091e7093c023"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa14e4604f12b3138f8e00091e7093c023">v8::internal::TRUSTED_LO_SPACE</a></div><div class="ttdeci">@ TRUSTED_LO_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01309">globals.h:1309</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa385454df67937debeccaa3ec05627542"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa385454df67937debeccaa3ec05627542">v8::internal::LO_SPACE</a></div><div class="ttdeci">@ LO_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01305">globals.h:1305</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa7b3b52e8b8e6e29f82884e41bfe0f500">v8::internal::CODE_SPACE</a></div><div class="ttdeci">@ CODE_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01298">globals.h:1298</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa800a76ff776aa278523aa6176cf222a8">v8::internal::SHARED_SPACE</a></div><div class="ttdeci">@ SHARED_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01299">globals.h:1299</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa8515da266a18e6c9f673363f2a37570b">v8::internal::TRUSTED_SPACE</a></div><div class="ttdeci">@ TRUSTED_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01300">globals.h:1300</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefa93dfdbc84455c750a99db7dd0cc02aff"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefa93dfdbc84455c750a99db7dd0cc02aff">v8::internal::CODE_LO_SPACE</a></div><div class="ttdeci">@ CODE_LO_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01306">globals.h:1306</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99"><div class="ttname"><a href="namespacev8_1_1internal.html#aa131d4fd9972fd8dfbec01a9243d9fefacc7351aa01c6173555932b162b850e99">v8::internal::OLD_SPACE</a></div><div class="ttdeci">@ OLD_SPACE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01297">globals.h:1297</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa2b1520107e1a7067d5db8226721c882"><div class="ttname"><a href="namespacev8_1_1internal.html#aa2b1520107e1a7067d5db8226721c882">v8::internal::ClearedValue</a></div><div class="ttdeci">Tagged&lt; ClearedWeakValue &gt; ClearedValue(PtrComprCageBase cage_base)</div><div class="ttdef"><b>Definition</b> <a href="maybe-object-inl_8h_source.html#l00018">maybe-object-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8084566d0c455780c660ab2c7159062"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8084566d0c455780c660ab2c7159062">v8::internal::IsHeapObject</a></div><div class="ttdeci">V8_INLINE constexpr bool IsHeapObject(TaggedImpl&lt; kRefType, StorageType &gt; obj)</div><div class="ttdef"><b>Definition</b> <a href="objects_8h_source.html#l00659">objects.h:659</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885a995dffcce98bdfc9e48bd47a0cdaf2d5">v8::internal::SkipRoot::kReadOnlyBuiltins</a></div><div class="ttdeci">@ kReadOnlyBuiltins</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885ae627e43b3da0dfc9dc84c70a96c3e983">v8::internal::SkipRoot::kConservativeStack</a></div><div class="ttdeci">@ kConservativeStack</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af08c9166c4ec6240391d3b750460a155">v8::internal::SkipRoot::kTracedHandles</a></div><div class="ttdeci">@ kTracedHandles</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562"><div class="ttname"><a href="namespacev8_1_1internal.html#aa8afa43b305d6f03c5288971ce078885af46adad9d0cb04df164724e715cf5562">v8::internal::SkipRoot::kWeak</a></div><div class="ttdeci">@ kWeak</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9a47c3d58feefc8747cef370681925ba023a5e1ba319d0465005e0fd207f3f50"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925ba023a5e1ba319d0465005e0fd207f3f50">v8::internal::CodeFlushMode::kFlushBaselineCode</a></div><div class="ttdeci">@ kFlushBaselineCode</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9a47c3d58feefc8747cef370681925ba1a66752596dbc2ca40adda96f4275aa5"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925ba1a66752596dbc2ca40adda96f4275aa5">v8::internal::CodeFlushMode::kStressFlushCode</a></div><div class="ttdeci">@ kStressFlushCode</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9a47c3d58feefc8747cef370681925ba8c3051baaa6427f61402f9f207469b77"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9a47c3d58feefc8747cef370681925ba8c3051baaa6427f61402f9f207469b77">v8::internal::CodeFlushMode::kFlushBytecode</a></div><div class="ttdeci">@ kFlushBytecode</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aaae66fce459a82ed75641e4543500b4d"><div class="ttname"><a href="namespacev8_1_1internal.html#aaae66fce459a82ed75641e4543500b4d">v8::internal::ClearedTrustedValue</a></div><div class="ttdeci">Tagged&lt; ClearedWeakValue &gt; ClearedTrustedValue()</div><div class="ttdef"><b>Definition</b> <a href="maybe-object-inl_8h_source.html#l00034">maybe-object-inl.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab170e314e69808aff2982aa41e7d1e59"><div class="ttname"><a href="namespacev8_1_1internal.html#ab170e314e69808aff2982aa41e7d1e59">v8::internal::HeapObjectSlot</a></div><div class="ttdeci">SlotTraits::THeapObjectSlot HeapObjectSlot</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01242">globals.h:1242</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab9df0bf289155b5ae1d6da682adf1d6f"><div class="ttname"><a href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">v8::internal::handle</a></div><div class="ttdeci">V8_INLINE Handle&lt; T &gt; handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="handles-inl_8h_source.html#l00070">handles-inl.h:70</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aba26ada764f1b3e31fc51de87da22ec1"><div class="ttname"><a href="namespacev8_1_1internal.html#aba26ada764f1b3e31fc51de87da22ec1">v8::internal::OffHeapObjectSlot</a></div><div class="ttdeci">SlotTraits::TOffHeapObjectSlot OffHeapObjectSlot</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01247">globals.h:1247</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31"><div class="ttname"><a href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aa4dc0d88d3eaa2b7b5ea263b3a347fb31">v8::internal::TRUSTED_TO_SHARED_TRUSTED</a></div><div class="ttdeci">@ TRUSTED_TO_SHARED_TRUSTED</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00037">mutable-page-metadata.h:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7"><div class="ttname"><a href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1928264840767da0eddb6396bfe4da7">v8::internal::OLD_TO_OLD</a></div><div class="ttdeci">@ OLD_TO_OLD</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00033">mutable-page-metadata.h:33</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b"><div class="ttname"><a href="namespacev8_1_1internal.html#acd168cc3f4f819be9715e41edbf3586aaf1c57d9550e4932af048f00ebf9b317b">v8::internal::OLD_TO_SHARED</a></div><div class="ttdeci">@ OLD_TO_SHARED</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00034">mutable-page-metadata.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acee9c59587b497961ec8549083c66fe1"><div class="ttname"><a href="namespacev8_1_1internal.html#acee9c59587b497961ec8549083c66fe1">v8::internal::SlotType</a></div><div class="ttdeci">SlotType</div><div class="ttdef"><b>Definition</b> <a href="slot-set_8h_source.html#l00232">slot-set.h:232</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5"><div class="ttname"><a href="namespacev8_1_1internal.html#ad504e70236bfcc0478d67053d1ed9ac0a0e4ebf97d76f3fcc0a4f23078b1339f5">v8::internal::GarbageCollector::MARK_COMPACTOR</a></div><div class="ttdeci">@ MARK_COMPACTOR</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ada9f491dce0173d9e92b0dfaeaf8b64c"><div class="ttname"><a href="namespacev8_1_1internal.html#ada9f491dce0173d9e92b0dfaeaf8b64c">v8::internal::PrintIsolate</a></div><div class="ttdeci">void PrintIsolate(void *isolate, const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="utils_2utils_8cc_source.html#l00061">utils.cc:61</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_adade5e1dd0ce3dc6f030ff3ea640f424"><div class="ttname"><a href="namespacev8_1_1internal.html#adade5e1dd0ce3dc6f030ff3ea640f424">v8::internal::MaybeObjectSlot</a></div><div class="ttdeci">SlotTraits::TMaybeObjectSlot MaybeObjectSlot</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01237">globals.h:1237</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ade1fa6c3f4fadb82080eb655686b6ebca670ae114e5d40462ad1f14c003b2fdeb"><div class="ttname"><a href="namespacev8_1_1internal.html#ade1fa6c3f4fadb82080eb655686b6ebca670ae114e5d40462ad1f14c003b2fdeb">v8::internal::AccessMode::NON_ATOMIC</a></div><div class="ttdeci">@ NON_ATOMIC</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae1439207c9f98c41dbdea3eca3572d54"><div class="ttname"><a href="namespacev8_1_1internal.html#ae1439207c9f98c41dbdea3eca3572d54">v8::internal::Root</a></div><div class="ttdeci">Root</div><div class="ttdef"><b>Definition</b> <a href="visitors_8h_source.html#l00056">visitors.h:56</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae1bbc2f3789eff14d73010adcad41a41"><div class="ttname"><a href="namespacev8_1_1internal.html#ae1bbc2f3789eff14d73010adcad41a41">v8::internal::InsideSandbox</a></div><div class="ttdeci">V8_INLINE bool InsideSandbox(uintptr_t address)</div><div class="ttdef"><b>Definition</b> <a href="sandbox_8h_source.html#l00325">sandbox.h:325</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae3cd5ae1226a4707d6e6834191b97c92"><div class="ttname"><a href="namespacev8_1_1internal.html#ae3cd5ae1226a4707d6e6834191b97c92">v8::internal::constructor_or_back_pointer</a></div><div class="ttdeci">constructor_or_back_pointer</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00847">map-inl.h:847</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff82af2c2f7b200915e30bcfedca6f85"><div class="ttname"><a href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">v8::internal::Cast</a></div><div class="ttdeci">Tagged&lt; To &gt; Cast(Tagged&lt; From &gt; value, const v8::SourceLocation &amp;loc=INIT_SOURCE_LOCATION_IN_DEBUG)</div><div class="ttdef"><b>Definition</b> <a href="casting_8h_source.html#l00148">casting.h:148</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00017">api-arguments-inl.h:17</a></div></div>
<div class="ttc" id="anew-spaces_8h_html"><div class="ttname"><a href="new-spaces_8h.html">new-spaces.h</a></div></div>
<div class="ttc" id="aobject-stats_8h_html"><div class="ttname"><a href="object-stats_8h.html">object-stats.h</a></div></div>
<div class="ttc" id="aobjects_8h_html"><div class="ttname"><a href="objects_8h.html">objects.h</a></div></div>
<div class="ttc" id="apage-metadata-inl_8h_html"><div class="ttname"><a href="page-metadata-inl_8h.html">page-metadata-inl.h</a></div></div>
<div class="ttc" id="apage-metadata_8h_html"><div class="ttname"><a href="page-metadata_8h.html">page-metadata.h</a></div></div>
<div class="ttc" id="aparallel-work-item_8h_html"><div class="ttname"><a href="parallel-work-item_8h.html">parallel-work-item.h</a></div></div>
<div class="ttc" id="apretenuring-handler-inl_8h_html"><div class="ttname"><a href="pretenuring-handler-inl_8h.html">pretenuring-handler-inl.h</a></div></div>
<div class="ttc" id="apretenuring-handler_8h_html"><div class="ttname"><a href="pretenuring-handler_8h.html">pretenuring-handler.h</a></div></div>
<div class="ttc" id="arandom-number-generator_8h_html"><div class="ttname"><a href="random-number-generator_8h.html">random-number-generator.h</a></div></div>
<div class="ttc" id="aread-only-heap_8h_html"><div class="ttname"><a href="read-only-heap_8h.html">read-only-heap.h</a></div></div>
<div class="ttc" id="aread-only-spaces_8h_html"><div class="ttname"><a href="read-only-spaces_8h.html">read-only-spaces.h</a></div></div>
<div class="ttc" id="aremembered-set_8h_html"><div class="ttname"><a href="remembered-set_8h.html">remembered-set.h</a></div></div>
<div class="ttc" id="asafepoint_8h_html"><div class="ttname"><a href="safepoint_8h.html">safepoint.h</a></div></div>
<div class="ttc" id="asetup-heap-internal_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> <a href="setup-heap-internal_8cc_source.html#l00126">setup-heap-internal.cc:126</a></div></div>
<div class="ttc" id="ashared-heap-serializer_8h_html"><div class="ttname"><a href="shared-heap-serializer_8h.html">shared-heap-serializer.h</a></div></div>
<div class="ttc" id="aslot-set_8h_html"><div class="ttname"><a href="slot-set_8h.html">slot-set.h</a></div></div>
<div class="ttc" id="aslots-inl_8h_html"><div class="ttname"><a href="slots-inl_8h.html">slots-inl.h</a></div></div>
<div class="ttc" id="asmi_8h_html"><div class="ttname"><a href="smi_8h.html">smi.h</a></div></div>
<div class="ttc" id="aspaces-inl_8h_html"><div class="ttname"><a href="spaces-inl_8h.html">spaces-inl.h</a></div></div>
<div class="ttc" id="aspaces_8h_html_a30fdeba02f6d5417e78244ad5fe87702"><div class="ttname"><a href="spaces_8h.html#a30fdeba02f6d5417e78244ad5fe87702">DCHECK_CODEOBJECT_SIZE</a></div><div class="ttdeci">#define DCHECK_CODEOBJECT_SIZE(size)</div><div class="ttdef"><b>Definition</b> <a href="spaces_8h_source.html#l00054">spaces.h:54</a></div></div>
<div class="ttc" id="aspaces_8h_html_a56ff3dec24b9951f79e32d38157610a8"><div class="ttname"><a href="spaces_8h.html#a56ff3dec24b9951f79e32d38157610a8">DCHECK_OBJECT_SIZE</a></div><div class="ttdeci">#define DCHECK_OBJECT_SIZE(size)</div><div class="ttdef"><b>Definition</b> <a href="spaces_8h_source.html#l00051">spaces.h:51</a></div></div>
<div class="ttc" id="astring-forwarding-table-inl_8h_html"><div class="ttname"><a href="string-forwarding-table-inl_8h.html">string-forwarding-table-inl.h</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1EphemeronMarking_html_a32d2dab1c9fc92fc74c2ad3e576012dc"><div class="ttname"><a href="structv8_1_1internal_1_1EphemeronMarking.html#a32d2dab1c9fc92fc74c2ad3e576012dc">v8::internal::EphemeronMarking::newly_discovered_limit</a></div><div class="ttdeci">size_t newly_discovered_limit</div><div class="ttdef"><b>Definition</b> <a href="marking-visitor_8h_source.html#l00025">marking-visitor.h:25</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1EphemeronMarking_html_a880dff524fb7e7d3b0df5781d3d1077d"><div class="ttname"><a href="structv8_1_1internal_1_1EphemeronMarking.html#a880dff524fb7e7d3b0df5781d3d1077d">v8::internal::EphemeronMarking::newly_discovered_overflowed</a></div><div class="ttdeci">bool newly_discovered_overflowed</div><div class="ttdef"><b>Definition</b> <a href="marking-visitor_8h_source.html#l00024">marking-visitor.h:24</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1EphemeronMarking_html_a9a6ef141d194b072f366a3afc9537f16"><div class="ttname"><a href="structv8_1_1internal_1_1EphemeronMarking.html#a9a6ef141d194b072f366a3afc9537f16">v8::internal::EphemeronMarking::newly_discovered</a></div><div class="ttdeci">std::vector&lt; Tagged&lt; HeapObject &gt; &gt; newly_discovered</div><div class="ttdef"><b>Definition</b> <a href="marking-visitor_8h_source.html#l00023">marking-visitor.h:23</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1FlagValues_html_ae882666c801b38f319fe2684c27c0d93"><div class="ttname"><a href="structv8_1_1internal_1_1FlagValues.html#ae882666c801b38f319fe2684c27c0d93">v8::internal::FlagValues::heap</a></div><div class="ttdeci">other heap size max size of the shared heap(in Mbytes)</div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo_html"><div class="ttname"><a href="structv8_1_1internal_1_1MarkCompactCollector_1_1RecordRelocSlotInfo.html">v8::internal::MarkCompactCollector::RecordRelocSlotInfo</a></div><div class="ttdef"><b>Definition</b> <a href="mark-compact_8h_source.html#l00112">mark-compact.h:112</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a2d8f6d02b9e8a3e6114c8b1e050aa358"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a2d8f6d02b9e8a3e6114c8b1e050aa358">v8::internal::MarkingHelper::TryMarkAndPush</a></div><div class="ttdeci">static V8_INLINE bool TryMarkAndPush(Heap *heap, MarkingWorklists::Local *marking_worklist, MarkingState *marking_state, WorklistTarget target_worklis, Tagged&lt; HeapObject &gt; object)</div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a4dc8cca289e4f7a300b90ed820cf9f0bac2570b42c277f62e29e44663e362573a"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a4dc8cca289e4f7a300b90ed820cf9f0bac2570b42c277f62e29e44663e362573a">v8::internal::MarkingHelper::LivenessMode::kAlwaysLive</a></div><div class="ttdeci">@ kAlwaysLive</div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a73ca663c9ba5d36d0b15ff93b323b267a520ecade39431601ba732cd4f6de66fa">v8::internal::MarkingHelper::WorklistTarget::kRegular</a></div><div class="ttdeci">@ kRegular</div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a7835e19deaaf9158c792811b0259c3d7"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a7835e19deaaf9158c792811b0259c3d7">v8::internal::MarkingHelper::IsMarkedOrAlwaysLive</a></div><div class="ttdeci">static V8_INLINE bool IsMarkedOrAlwaysLive(Heap *heap, MarkingStateT *marking_state, Tagged&lt; HeapObject &gt; object)</div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_a93bd17221947fab84a5abe4bcfece771"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#a93bd17221947fab84a5abe4bcfece771">v8::internal::MarkingHelper::IsUnmarkedAndNotAlwaysLive</a></div><div class="ttdeci">static V8_INLINE bool IsUnmarkedAndNotAlwaysLive(Heap *heap, MarkingStateT *marking_state, Tagged&lt; HeapObject &gt; object)</div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_ac5e90f6e0c7ddb83975856969a4ad03f"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#ac5e90f6e0c7ddb83975856969a4ad03f">v8::internal::MarkingHelper::ShouldMarkObject</a></div><div class="ttdeci">static V8_INLINE std::optional&lt; WorklistTarget &gt; ShouldMarkObject(Heap *heap, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="marking-inl_8h_source.html#l00269">marking-inl.h:269</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1MarkingHelper_html_ada9b37f4e5abfa1ad3569dcfabea4ff1"><div class="ttname"><a href="structv8_1_1internal_1_1MarkingHelper.html#ada9b37f4e5abfa1ad3569dcfabea4ff1">v8::internal::MarkingHelper::GetLivenessMode</a></div><div class="ttdeci">static V8_INLINE LivenessMode GetLivenessMode(Heap *heap, Tagged&lt; HeapObject &gt; object)</div><div class="ttdef"><b>Definition</b> <a href="marking-inl_8h_source.html#l00295">marking-inl.h:295</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1TracingFlags_html_a2b550a4619e10cd8ccffb3bcb49922c1"><div class="ttname"><a href="structv8_1_1internal_1_1TracingFlags.html#a2b550a4619e10cd8ccffb3bcb49922c1">v8::internal::TracingFlags::gc_stats</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE std::atomic_uint gc_stats</div><div class="ttdef"><b>Definition</b> <a href="tracing-flags_8h_source.html#l00022">tracing-flags.h:22</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1TracingFlags_html_a6ae2ff9ff9df795354e7f9bcda063268"><div class="ttname"><a href="structv8_1_1internal_1_1TracingFlags.html#a6ae2ff9ff9df795354e7f9bcda063268">v8::internal::TracingFlags::is_gc_stats_enabled</a></div><div class="ttdeci">static bool is_gc_stats_enabled()</div><div class="ttdef"><b>Definition</b> <a href="tracing-flags_8h_source.html#l00036">tracing-flags.h:36</a></div></div>
<div class="ttc" id="asweeper_8h_html"><div class="ttname"><a href="sweeper_8h.html">sweeper.h</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a3feabb76c0ac2918798bc11ab55c6a79"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a></div><div class="ttdeci">#define TRACE_EVENT0(category_group, name)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00032">trace-event-no-perfetto.h:32</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a58927f99d797f77024561f336303380c"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a58927f99d797f77024561f336303380c">TRACE_EVENT2</a></div><div class="ttdeci">#define TRACE_EVENT2(category_group, name, arg1_name, arg1_val, arg2_name, arg2_val)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00043">trace-event-no-perfetto.h:43</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a8b5bca924ef796a311bb5ba5c8d7f57d"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a8b5bca924ef796a311bb5ba5c8d7f57d">TRACE_EVENT_SCOPE_THREAD</a></div><div class="ttdeci">#define TRACE_EVENT_SCOPE_THREAD</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00864">trace-event-no-perfetto.h:864</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a97689377430b094caec680dd7dd230fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a></div><div class="ttdeci">#define TRACE_DISABLED_BY_DEFAULT(name)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00025">trace-event-no-perfetto.h:25</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a9caa02a30959b26112c2dcc35ed3727e"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a9caa02a30959b26112c2dcc35ed3727e">TRACE_EVENT_INSTANT2</a></div><div class="ttdeci">#define TRACE_EVENT_INSTANT2(category_group, name, scope, arg1_name, arg1_val, arg2_name, arg2_val)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00064">trace-event-no-perfetto.h:64</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_ac437f27e15925a9bd53c69692a6c85fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a></div><div class="ttdeci">#define TRACE_EVENT1(category_group, name, arg1_name, arg1_val)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00037">trace-event-no-perfetto.h:37</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_af086bb0f8b985835cc9f35cfe856155f"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#af086bb0f8b985835cc9f35cfe856155f">TRACE_EVENT_FLAG_FLOW_OUT</a></div><div class="ttdeci">#define TRACE_EVENT_FLAG_FLOW_OUT</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00837">trace-event-no-perfetto.h:837</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_afd116bac8e67a7eafb2b21a62f0a383f"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#afd116bac8e67a7eafb2b21a62f0a383f">TRACE_EVENT_FLAG_FLOW_IN</a></div><div class="ttdeci">#define TRACE_EVENT_FLAG_FLOW_IN</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00836">trace-event-no-perfetto.h:836</a></div></div>
<div class="ttc" id="atraced-handles-marking-visitor_8h_html"><div class="ttname"><a href="traced-handles-marking-visitor_8h.html">traced-handles-marking-visitor.h</a></div></div>
<div class="ttc" id="atracing-category-observer_8h_html"><div class="ttname"><a href="tracing-category-observer_8h.html">tracing-category-observer.h</a></div></div>
<div class="ttc" id="atracing-flags_8h_html"><div class="ttname"><a href="tracing-flags_8h.html">tracing-flags.h</a></div></div>
<div class="ttc" id="atracing_2trace-event_8h_html_a3e7918f87c057008134f23473b59c341"><div class="ttname"><a href="tracing_2trace-event_8h.html#a3e7918f87c057008134f23473b59c341">TRACE_STR_COPY</a></div><div class="ttdeci">#define TRACE_STR_COPY(str)</div><div class="ttdef"><b>Definition</b> <a href="tracing_2trace-event_8h_source.html#l00050">trace-event.h:50</a></div></div>
<div class="ttc" id="atransitions-inl_8h_html"><div class="ttname"><a href="transitions-inl_8h.html">transitions-inl.h</a></div></div>
<div class="ttc" id="autils-inl_8h_html"><div class="ttname"><a href="utils-inl_8h.html">utils-inl.h</a></div></div>
<div class="ttc" id="av8_8h_html"><div class="ttname"><a href="v8_8h.html">v8.h</a></div></div>
<div class="ttc" id="avalue-mirror_8cc_html_a1ca88ee8dc0e8e51d60cf01ab8e8702a"><div class="ttname"><a href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a></div><div class="ttdeci">std::unique_ptr&lt; ValueMirror &gt; value</div><div class="ttdef"><b>Definition</b> <a href="value-mirror_8cc_source.html#l00950">value-mirror.cc:950</a></div></div>
<div class="ttc" id="avalue-mirror_8cc_html_af6b78a5a5b7a4e51ea415c001e9eb58b"><div class="ttname"><a href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a></div><div class="ttdeci">std::unique_ptr&lt; ValueMirror &gt; key</div><div class="ttdef"><b>Definition</b> <a href="value-mirror_8cc_source.html#l00949">value-mirror.cc:949</a></div></div>
<div class="ttc" id="avisitors_8h_html"><div class="ttname"><a href="visitors_8h.html">visitors.h</a></div></div>
<div class="ttc" id="avm-state-inl_8h_html"><div class="ttname"><a href="vm-state-inl_8h.html">vm-state-inl.h</a></div></div>
<div class="ttc" id="awasm-code-pointer-table_8h_html"><div class="ttname"><a href="wasm-code-pointer-table_8h.html">wasm-code-pointer-table.h</a></div></div>
<div class="ttc" id="aweak-object-worklists_8h_html"><div class="ttname"><a href="weak-object-worklists_8h.html">weak-object-worklists.h</a></div></div>
<div class="ttc" id="azapping_8h_html"><div class="ttname"><a href="zapping_8h.html">zapping.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c4d22fc0e4736089ffe45cb281f7e16f.html">heap</a></li><li class="navelem"><a class="el" href="mark-compact_8cc.html">mark-compact.cc</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
