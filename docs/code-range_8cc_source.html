<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>v8: /home/w1redch4d/Documents/browser-exploitation/v8/v8/src/heap/code-range.cc Source File</title>
<link rel="icon" href="v8.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="v8.svg"/></td>
  <td id="projectalign">
   <div id="projectname">v8
   </div>
   <div id="projectbrief">V8 is Googleâ€™s open source high-performance JavaScript and WebAssembly engine, written in C++. It is used in Chrome and in Node.js, among others. It implements ECMAScript and WebAssembly, and runs on Windows, macOS, and Linux systems that use x64, IA-32, or ARM processors. V8 can be embedded into any C++ application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c4d22fc0e4736089ffe45cb281f7e16f.html">heap</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">code-range.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="code-range_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2021 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="code-range_8h.html">src/heap/code-range.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="bits_8h.html">src/base/bits.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="lazy-instance_8h.html">src/base/lazy-instance.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="once_8h.html">src/base/once.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="constants-arch_8h.html">src/codegen/constants-arch.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="common_2globals_8h.html">src/common/globals.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="flags_2flags_8h.html">src/flags/flags.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="heap-inl_8h.html">src/heap/heap-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="allocation_8h.html">src/utils/allocation.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="unwinding-info-win64_8h.html">src/diagnostics/unwinding-info-win64.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacev8.html">v8</a> {</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="keyword">namespace </span><a class="code hl_variable" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><a class="code hl_define" href="lazy-instance_8h.html#a219abfaf8244b8fa42f0c18aca72c58f">DEFINE_LAZY_LEAKY_OBJECT_GETTER</a>(CodeRangeAddressHint, GetCodeRangeAddressHint)</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="keywordtype">void</span> FunctionInStaticBinaryForAddressHint() {}</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>}  <span class="comment">// anonymous namespace</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="foldopen" id="foldopen00035" data-start="{" data-end="}">
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#aca39d3e1abf10792aa9e1c4d54bd758e">   35</a></span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#aca39d3e1abf10792aa9e1c4d54bd758e">CodeRangeAddressHint::GetAddressHint</a>(<span class="keywordtype">size_t</span> code_range_size,</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>                                             <span class="keywordtype">size_t</span> alignment) {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> guard(&amp;<a class="code hl_variable" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#af7a58f3d2f480b5752aff5427008e912">mutex_</a>);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>  <span class="comment">// Try to allocate code range in the preferred region where we can use</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>  <span class="comment">// short instructions for calling/jumping to embedded builtins.</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>  <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> preferred_region = <a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a952bfca1e4968d433e8c169b98f541f3">Isolate::GetShortBuiltinsCallRegion</a>();</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = 0;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  <span class="keyword">auto</span> it = <a class="code hl_variable" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#a19c1c70c7be7f351c762ffc2dd615c02">recently_freed_</a>.find(code_range_size);</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>  <span class="comment">// No recently freed region has been found, try to provide a hint for placing</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>  <span class="comment">// a code region.</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#a19c1c70c7be7f351c762ffc2dd615c02">recently_freed_</a>.end() || it-&gt;second.empty()) {</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="common_2globals_8h.html#a718cb0bddf9ffe093e66824996fe25dc">V8_ENABLE_NEAR_CODE_RANGE_BOOL</a> &amp;&amp; !preferred_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a29afd92431f4eb737887d7c7ff9b9396">is_empty</a>()) {</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>      <span class="keyword">const</span> <span class="keyword">auto</span> memory_ranges = <a class="code hl_function" href="classv8_1_1base_1_1OS.html#af4f55d86b418913f11eba29009fbd0f1">base::OS::GetFirstFreeMemoryRangeWithin</a>(</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>          preferred_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), preferred_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>(), code_range_size,</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>          alignment);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>      <span class="keywordflow">if</span> (memory_ranges.has_value()) {</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>        <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = memory_ranges.value().start;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>, alignment));</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>      }</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>      <span class="comment">// The empty memory_ranges means that GetFirstFreeMemoryRangeWithin() API</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>      <span class="comment">// is not supported, so use the lowest address from the preferred region</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>      <span class="comment">// as a hint because it&#39;ll be at least as good as the fallback hint but</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>      <span class="comment">// with a higher chances to point to the free address space range.</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(preferred_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), alignment);</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    }</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(<a class="code hl_define" href="common_2globals_8h.html#aa5186b9fd6612bf591ba59464649200b">FUNCTION_ADDR</a>(&amp;FunctionInStaticBinaryForAddressHint),</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>                   alignment);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  }</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>  <span class="comment">// Try to reuse near code range first.</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="common_2globals_8h.html#a718cb0bddf9ffe093e66824996fe25dc">V8_ENABLE_NEAR_CODE_RANGE_BOOL</a> &amp;&amp; !preferred_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a29afd92431f4eb737887d7c7ff9b9396">is_empty</a>()) {</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="keyword">auto</span> freed_regions_for_size = it-&gt;second;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it_freed = freed_regions_for_size.rbegin();</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>         it_freed != freed_regions_for_size.rend(); ++it_freed) {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> code_range_start = *it_freed;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>      <span class="keywordflow">if</span> (preferred_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#ad799a0c1d53c9117b94f95e6bc742e66">contains</a>(code_range_start, code_range_size)) {</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(code_range_start, alignment));</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        freed_regions_for_size.erase((it_freed + 1).<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>());</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        <span class="keywordflow">return</span> code_range_start;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>      }</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    }</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>  }</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = it-&gt;second.back();</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>, alignment));</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  it-&gt;second.pop_back();</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>}</div>
</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="foldopen" id="foldopen00087" data-start="{" data-end="}">
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#aa81e69681bc6caf874f8824730b20cc7">   87</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#aa81e69681bc6caf874f8824730b20cc7">CodeRangeAddressHint::NotifyFreedCodeRange</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> code_range_start,</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                                                <span class="keywordtype">size_t</span> code_range_size) {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> guard(&amp;<a class="code hl_variable" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#af7a58f3d2f480b5752aff5427008e912">mutex_</a>);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  <a class="code hl_variable" href="classv8_1_1internal_1_1CodeRangeAddressHint.html#a19c1c70c7be7f351c762ffc2dd615c02">recently_freed_</a>[code_range_size].push_back(code_range_start);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>}</div>
</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRange.html#a1b4005a6ffa925865a055c9a1c7462a8">   93</a></span><a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1b4005a6ffa925865a055c9a1c7462a8">CodeRange::~CodeRange</a>() { <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#aaba9ae19acd10533dac38759d1f1a96f">Free</a>(); }</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen00096" data-start="{" data-end="}">
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRange.html#a6fab364738c3db6d2f76bcdf26df25c3">   96</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a6fab364738c3db6d2f76bcdf26df25c3">CodeRange::GetWritableReservedAreaSize</a>() {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a678f6dfd6d23a5357bdb8bc045df96d6">kReservedCodeRangePages</a> * <a class="code hl_function" href="classv8_1_1internal_1_1MemoryAllocator.html#a66221eb0ecbea6d9a92bfdd6181b4323">MemoryAllocator::GetCommitPageSize</a>();</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>}</div>
</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="foldopen" id="foldopen00100" data-start="" data-end="">
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="code-range_8cc.html#a5f6aa8edcd99914757600b5d3b259bb7">  100</a></span><span class="preprocessor">#define TRACE(...) \</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="preprocessor">  if (v8_flags.trace_code_range_allocation) PrintF(__VA_ARGS__)</span></div>
</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="foldopen" id="foldopen00103" data-start="{" data-end="}">
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRange.html#a0c79da6994022c645d597adb7d41143a">  103</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a0c79da6994022c645d597adb7d41143a">CodeRange::InitReservation</a>(v8::PageAllocator* page_allocator,</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>                                <span class="keywordtype">size_t</span> requested, <span class="keywordtype">bool</span> immutable) {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(requested, 0);</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="common_2globals_8h.html#a30648966d7f7b10df2c38206c18d6d52">V8_EXTERNAL_CODE_SPACE_BOOL</a>) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a> = <a class="code hl_function" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>();</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  }</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <span class="keywordflow">if</span> (requested &lt;= <a class="code hl_variable" href="namespacev8_1_1internal.html#a7e4c8e36860ddb31a88e9f30d495473e">kMinimumCodeRangeSize</a>) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    requested = <a class="code hl_variable" href="namespacev8_1_1internal.html#a7e4c8e36860ddb31a88e9f30d495473e">kMinimumCodeRangeSize</a>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  }</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kPageSize = <a class="code hl_variable" href="classv8_1_1internal_1_1MutablePageMetadata.html#a8ca68362b7531b2ab93a045cdcedfdde">MutablePageMetadata::kPageSize</a>;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(kPageSize, <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>-&gt;<a class="code hl_function" href="classv8_1_1base_1_1BoundedPageAllocator.html#af7b999d6c3a3526636230bf6b7d72784">AllocatePageSize</a>()));</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  <span class="comment">// When V8_EXTERNAL_CODE_SPACE_BOOL is enabled the allocatable region must</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>  <span class="comment">// not cross the 4Gb boundary and thus the default compression scheme of</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>  <span class="comment">// truncating the InstructionStream pointers to 32-bits still works. It&#39;s</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  <span class="comment">// achieved by specifying base_alignment parameter.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> base_alignment = <a class="code hl_define" href="common_2globals_8h.html#a30648966d7f7b10df2c38206c18d6d52">V8_EXTERNAL_CODE_SPACE_BOOL</a></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                                    ? <a class="code hl_function" href="namespacev8_1_1base_1_1bits.html#af8aa24a002b73b61ef7283bfdfa8b47d">base::bits::RoundUpToPowerOfTwo</a>(requested)</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                                    : kPageSize;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa753e257ba3a44203cd7b3a57831b942">kPlatformRequiresCodeRange</a>,</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>                 requested &lt;= <a class="code hl_variable" href="namespacev8_1_1internal.html#abe54fbe011324cc8d9e2d0ccd3f83a84">kMaximalCodeRangeSize</a>);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1VirtualMemoryCage_1_1ReservationParams.html">VirtualMemoryCage::ReservationParams</a> params;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>  params.<a class="code hl_variable" href="structv8_1_1internal_1_1VirtualMemoryCage_1_1ReservationParams.html#ad9b7d547e3b296ff9242def4d15abe7a">page_allocator</a> = <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  params.reservation_size = requested;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  params.page_size = kPageSize;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.jitless) {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    params.permissions = PageAllocator::Permission::kNoAccess;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    params.page_initialization_mode =</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <a class="code hl_enumvalue" href="namespacev8_1_1base.html#a214ae6bbc219c3bf43cb03f9cf6c165ca4f69ff55cee8b7af23d6473dfdaff203">base::PageInitializationMode::kAllocatedPagesCanBeUninitialized</a>;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    params.page_freeing_mode = <a class="code hl_enumvalue" href="namespacev8_1_1base.html#a40af50cfd5f644e039f2664d17ff298aa8045b5e8d8f2790b6de4ecf6650f5f35">base::PageFreeingMode::kMakeInaccessible</a>;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    params.permissions = PageAllocator::Permission::kNoAccessWillJitLater;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    params.page_initialization_mode =</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <a class="code hl_enumvalue" href="namespacev8_1_1base.html#a214ae6bbc219c3bf43cb03f9cf6c165ca954b5925a94fec2852072b8030f53721">base::PageInitializationMode::kRecommitOnly</a>;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    params.page_freeing_mode = <a class="code hl_enumvalue" href="namespacev8_1_1base.html#a40af50cfd5f644e039f2664d17ff298aa0b3dab4b20154b90199fa91469814014">base::PageFreeingMode::kDiscard</a>;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> allocate_page_size = <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>-&gt;<a class="code hl_function" href="classv8_1_1base_1_1BoundedPageAllocator.html#af7b999d6c3a3526636230bf6b7d72784">AllocatePageSize</a>();</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kRadiusInMB =</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a98928047a27d51a59b4fed57c53d68fa">kMaxPCRelativeCodeRangeInMB</a> &gt; 1024 ? <a class="code hl_variable" href="namespacev8_1_1internal.html#a98928047a27d51a59b4fed57c53d68fa">kMaxPCRelativeCodeRangeInMB</a> : 4096;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  <span class="keyword">auto</span> preferred_region = <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#aeb77197658d4cf3173121f0d3357fca7">GetPreferredRegion</a>(kRadiusInMB, kPageSize);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <a class="code hl_define" href="jump-threading_8cc.html#a5f6aa8edcd99914757600b5d3b259bb7">TRACE</a>(<span class="stringliteral">&quot;=== Preferred region: [%p, %p)\n&quot;</span>,</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(preferred_region.begin()),</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(preferred_region.end()));</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <span class="comment">// For configurations with enabled pointer compression and shared external</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  <span class="comment">// code range we can afford trying harder to allocate code range near .text</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  <span class="comment">// section.</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> kShouldTryHarder = <a class="code hl_define" href="common_2globals_8h.html#a30648966d7f7b10df2c38206c18d6d52">V8_EXTERNAL_CODE_SPACE_BOOL</a> &amp;&amp;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                                <a class="code hl_define" href="common_2globals_8h.html#a5a87b34b32dcbcbd7b8891e6298d5ebb">COMPRESS_POINTERS_IN_SHARED_CAGE_BOOL</a> &amp;&amp;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                                <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.better_code_range_allocation;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  <span class="keywordflow">if</span> (kShouldTryHarder) {</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="comment">// Relax alignment requirement while trying to allocate code range inside</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="comment">// preferred region.</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    params.base_alignment = kPageSize;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="comment">// TODO(v8:11880): consider using base::OS::GetFirstFreeMemoryRangeWithin()</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="comment">// to avoid attempts that&#39;s going to fail anyway.</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <a class="code hl_class" href="classv8_1_1internal_1_1VirtualMemoryCage.html">VirtualMemoryCage</a> candidate_cage;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="comment">// Try to allocate code range at the end of preferred region, by going</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// towards the start in steps.</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> kAllocationTries = 16;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    params.requested_start_hint =</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(preferred_region.end() - requested, kPageSize);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> step =</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(preferred_region.size() / kAllocationTries, kPageSize);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; kAllocationTries; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>      <a class="code hl_define" href="jump-threading_8cc.html#a5f6aa8edcd99914757600b5d3b259bb7">TRACE</a>(<span class="stringliteral">&quot;=== Attempt #%d, hint=%p\n&quot;</span>, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>,</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(params.requested_start_hint));</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>      <span class="keywordflow">if</span> (candidate_cage.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#ad60a3e4d0c05fc8208f042156e6ac4b8">InitReservation</a>(params)) {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <a class="code hl_define" href="jump-threading_8cc.html#a5f6aa8edcd99914757600b5d3b259bb7">TRACE</a>(<span class="stringliteral">&quot;=== Attempt #%d (%p): [%p, %p)\n&quot;</span>, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>,</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>              <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(params.requested_start_hint),</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>              <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(candidate_cage.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a196f3987c6b51d427770d7fc3095bfbc">region</a>().<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>()),</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>              <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(candidate_cage.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a196f3987c6b51d427770d7fc3095bfbc">region</a>().<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>()));</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        <span class="comment">// Allocation succeeded, check if it&#39;s in the preferred range.</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="keywordflow">if</span> (preferred_region.contains(candidate_cage.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a196f3987c6b51d427770d7fc3095bfbc">region</a>())) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        <span class="comment">// This allocation is not the one we are searhing for.</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        candidate_cage.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#aef97aed9cabb1fa4071076230f87a9cc">Free</a>();</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>      }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>      <span class="keywordflow">if</span> (step == 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      params.requested_start_hint -= step;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">if</span> (candidate_cage.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a86e7bdd9ecfebaa08da394ef3c8d034b">IsReserved</a>()) {</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>      *<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classv8_1_1internal_1_1VirtualMemoryCage.html">VirtualMemoryCage</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>) = std::move(candidate_cage);</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    }</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  }</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a86e7bdd9ecfebaa08da394ef3c8d034b">IsReserved</a>()) {</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <span class="comment">// TODO(v8:11880): Use base_alignment here once ChromeOS issue is fixed.</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> the_hint = GetCodeRangeAddressHint()-&gt;GetAddressHint(</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        requested, allocate_page_size);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    the_hint = <a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(the_hint, base_alignment);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="comment">// Last resort, use whatever region we get.</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    params.base_alignment = base_alignment;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    params.requested_start_hint = the_hint;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#ad60a3e4d0c05fc8208f042156e6ac4b8">VirtualMemoryCage::InitReservation</a>(params)) {</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>      params.requested_start_hint = kNullAddress;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#ad60a3e4d0c05fc8208f042156e6ac4b8">VirtualMemoryCage::InitReservation</a>(params)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    }</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <a class="code hl_define" href="jump-threading_8cc.html#a5f6aa8edcd99914757600b5d3b259bb7">TRACE</a>(<span class="stringliteral">&quot;=== Fallback attempt, hint=%p: [%p, %p)\n&quot;</span>,</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(params.requested_start_hint),</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(region().begin()),</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a196f3987c6b51d427770d7fc3095bfbc">region</a>().<a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>()));</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  }</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.abort_on_far_code_range &amp;&amp;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>      !preferred_region.contains(region())) {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="comment">// We didn&#39;t manage to allocate the code range close enough.</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <a class="code hl_define" href="logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(<span class="stringliteral">&quot;Failed to allocate code range close to the .text section&quot;</span>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  <span class="comment">// On some platforms, specifically Win64, we need to reserve some pages at</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  <span class="comment">// the beginning of an executable space. See</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="comment">//   https://cs.chromium.org/chromium/src/components/crash/content/</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="comment">//     app/crashpad_win.cc?rcl=fd680447881449fba2edcf0589320e7253719212&amp;l=204</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="comment">// for details.</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> reserved_area = <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a6fab364738c3db6d2f76bcdf26df25c3">GetWritableReservedAreaSize</a>();</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  <span class="keywordflow">if</span> (reserved_area &gt; 0) {</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <a class="code hl_define" href="logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(reserved_area, kPageSize);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    <span class="comment">// Exclude the reserved area from further allocations.</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_variable" href="classv8_1_1internal_1_1VirtualMemoryCage.html#adf66508177c33a683516684dddfac5e1">page_allocator_</a>-&gt;AllocatePagesAt(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>(), kPageSize,</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>                                           PageAllocator::kNoAccess));</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="comment">// Commit required amount of writable memory.</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#af0e93364779ee18024a3aab1b4cd9958">reservation</a>()-&gt;<a class="code hl_function" href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">SetPermissions</a>(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>(), reserved_area,</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                                       PageAllocator::kReadWrite)) {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    }</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2af86e498cb6c3f31bc898c6b40d287e">win64_unwindinfo::CanRegisterUnwindInfoForNonABICompliantCodeRange</a>()) {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      <a class="code hl_function" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2409db5c20b55125a1f38d2eecf2341b">win64_unwindinfo::RegisterNonABICompliantCodeRange</a>(</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>()), <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a339584956bf59b5688d7d626a129ab7f">size</a>());</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>  }</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span><span class="comment">// Don&#39;t pre-commit the code cage on Windows since it uses memory and it&#39;s not</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment">// required for recommit.</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="preprocessor">#if !defined(V8_OS_WIN)</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  <span class="keywordflow">if</span> (params.page_initialization_mode ==</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>      <a class="code hl_enumvalue" href="namespacev8_1_1base.html#a214ae6bbc219c3bf43cb03f9cf6c165ca954b5925a94fec2852072b8030f53721">base::PageInitializationMode::kRecommitOnly</a>) {</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="keywordtype">void</span>* <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a> =</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="classv8_1_1internal_1_1VirtualMemoryCage.html#adf66508177c33a683516684dddfac5e1">page_allocator_</a>-&gt;begin() + reserved_area);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keywordtype">size_t</span> size = <a class="code hl_variable" href="classv8_1_1internal_1_1VirtualMemoryCage.html#adf66508177c33a683516684dddfac5e1">page_allocator_</a>-&gt;size() - reserved_area;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#a42ebfac4aa3bcade2327daf0cf5efb7f">ThreadIsolation::Enabled</a>()) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ad690ad6c8189d648d7cc8ec987d882c1">ThreadIsolation::MakeExecutable</a>(<span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>),</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                                           size)) {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>      }</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!params.page_allocator-&gt;SetPermissions(</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                   <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>, size, PageAllocator::kReadWriteExecute)) {</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    }</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="keywordflow">if</span> (immutable) {</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>      immutable_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="preprocessor">#ifdef V8_ENABLE_MEMORY_SEALING</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>      params.page_allocator-&gt;SealPages(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>, size);</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    }</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <a class="code hl_class" href="classv8_1_1internal_1_1NopRwxMemoryWriteScope.html">DiscardSealedMemoryScope</a> discard_scope(<span class="stringliteral">&quot;Discard global code range.&quot;</span>);</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="keywordflow">if</span> (!params.page_allocator-&gt;DiscardSystemPages(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>, size)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="preprocessor">#endif  </span><span class="comment">// !defined(V8_OS_WIN)</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>}</div>
</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="comment">// Preferred region for the code range is an intersection of the following</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="comment">// regions:</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="comment">// a) [builtins - kMaxPCRelativeDistance, builtins + kMaxPCRelativeDistance)</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment">// b) [RoundDown(builtins, 4GB), RoundUp(builtins, 4GB)) in order to ensure</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="comment">// Requirement (a) is there to avoid remaping of embedded builtins into</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="comment">// the code for architectures where PC-relative jump/call distance is big</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span><span class="comment">// enough.</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment">// Requirement (b) is aiming at helping CPU branch predictors in general and</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment">// in case V8_EXTERNAL_CODE_SPACE is enabled it ensures that</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment">// ExternalCodeCompressionScheme works for all pointers in the code range.</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen00289" data-start="{" data-end="}">
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRange.html#aeb77197658d4cf3173121f0d3357fca7">  289</a></span><a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#aeb77197658d4cf3173121f0d3357fca7">CodeRange::GetPreferredRegion</a>(<span class="keywordtype">size_t</span> radius_in_megabytes,</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>                                                  <span class="keywordtype">size_t</span> allocate_page_size) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="preprocessor">#ifdef V8_TARGET_ARCH_64_BIT</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>  <span class="comment">// Compute builtins location.</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> embedded_blob_code_start =</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>      <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a1e813a2d79484ec55165b897c21f21b3">Isolate::CurrentEmbeddedBlobCode</a>());</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> embedded_blob_code_end;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  <span class="keywordflow">if</span> (embedded_blob_code_start == kNullAddress) {</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="comment">// When there&#39;s no embedded blob use address of a function from the binary</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="comment">// as an approximation.</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    embedded_blob_code_start =</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <a class="code hl_define" href="common_2globals_8h.html#aa5186b9fd6612bf591ba59464649200b">FUNCTION_ADDR</a>(&amp;FunctionInStaticBinaryForAddressHint);</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    embedded_blob_code_end = embedded_blob_code_start + 1;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    embedded_blob_code_end =</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        embedded_blob_code_start + <a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a27b962aa197ff0b5d20c7ead12858988">Isolate::CurrentEmbeddedBlobCodeSize</a>();</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  }</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>  <span class="comment">// Fulfil requirement (a).</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> max_size = std::numeric_limits&lt;size_t&gt;::max();</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>  <span class="keywordtype">size_t</span> radius = radius_in_megabytes * <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> region_start =</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>      <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(embedded_blob_code_end - radius, allocate_page_size);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>  <span class="keywordflow">if</span> (region_start &gt; embedded_blob_code_end) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="comment">// |region_start| underflowed.</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    region_start = 0;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>  }</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> region_end =</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>      <a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(embedded_blob_code_start + radius, allocate_page_size);</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  <span class="keywordflow">if</span> (region_end &lt; embedded_blob_code_start) {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// |region_end| overflowed.</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    region_end = <a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(max_size, allocate_page_size);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  }</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>  <span class="comment">// Fulfil requirement (b).</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> k4GB = <span class="keywordtype">size_t</span>{4} * GB;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> four_gb_cage_start = <a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(embedded_blob_code_start, k4GB);</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> four_gb_cage_end = four_gb_cage_start + k4GB;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  region_start = std::max(region_start, four_gb_cage_start);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  region_end = std::min(region_end, four_gb_cage_end);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span><span class="preprocessor">#ifdef V8_EXTERNAL_CODE_SPACE</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  <span class="comment">// If ExternalCodeCompressionScheme ever changes then the requirements might</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>  <span class="comment">// need to be updated.</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>  <span class="keyword">static_assert</span>(k4GB &lt;= kPtrComprCageReservationSize);</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(four_gb_cage_start,</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            ExternalCodeCompressionScheme::PrepareCageBaseAddress(</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                embedded_blob_code_start));</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span><span class="preprocessor">#endif  </span><span class="comment">// V8_EXTERNAL_CODE_SPACE</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  <span class="keywordflow">return</span> <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>(region_start, region_end - region_start);</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span><span class="preprocessor">#endif  </span><span class="comment">// V8_TARGET_ARCH_64_BIT</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>}</div>
</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span> </div>
<div class="foldopen" id="foldopen00347" data-start="{" data-end="}">
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRange.html#aaba9ae19acd10533dac38759d1f1a96f">  347</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#aaba9ae19acd10533dac38759d1f1a96f">CodeRange::Free</a>() {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>  <span class="comment">// TODO(361480580): this DCHECK is temporarily disabled since we free the</span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>  <span class="comment">// global CodeRange in the PoolTest.</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>  <span class="comment">// DCHECK(!immutable_);</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a86e7bdd9ecfebaa08da394ef3c8d034b">IsReserved</a>()) {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2af86e498cb6c3f31bc898c6b40d287e">win64_unwindinfo::CanRegisterUnwindInfoForNonABICompliantCodeRange</a>()) {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>      <a class="code hl_function" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a70f996f40a6b9c963c47bb920970d841">win64_unwindinfo::UnregisterNonABICompliantCodeRange</a>(</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">base</a>()));</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    GetCodeRangeAddressHint()-&gt;NotifyFreedCodeRange(</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#af0e93364779ee18024a3aab1b4cd9958">reservation</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a196f3987c6b51d427770d7fc3095bfbc">region</a>().begin(), <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#af0e93364779ee18024a3aab1b4cd9958">reservation</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a196f3987c6b51d427770d7fc3095bfbc">region</a>().<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a339584956bf59b5688d7d626a129ab7f">size</a>());</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#aef97aed9cabb1fa4071076230f87a9cc">VirtualMemoryCage::Free</a>();</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>  }</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>}</div>
</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span> </div>
<div class="foldopen" id="foldopen00365" data-start="{" data-end="}">
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1CodeRange.html#ad9767bcc9443e40debe3015134037f02">  365</a></span>uint8_t* <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#ad9767bcc9443e40debe3015134037f02">CodeRange::RemapEmbeddedBuiltins</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>                                          <span class="keyword">const</span> uint8_t* embedded_blob_code,</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>                                          <span class="keywordtype">size_t</span> embedded_blob_code_size) {</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> guard(&amp;<a class="code hl_variable" href="classv8_1_1internal_1_1CodeRange.html#a0384e21b1772ba6739bd0c40c8c401d6">remap_embedded_builtins_mutex_</a>);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>  <span class="comment">// Remap embedded builtins into the end of the address range controlled by</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>  <span class="comment">// the BoundedPageAllocator.</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> code_region(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;begin(),</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>                                        <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a339584956bf59b5688d7d626a129ab7f">size</a>());</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>  <a class="code hl_define" href="logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a>(code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), kNullAddress);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a29afd92431f4eb737887d7c7ff9b9396">is_empty</a>());</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span> </div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>  uint8_t* <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a> =</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>      <a class="code hl_variable" href="classv8_1_1internal_1_1CodeRange.html#adbc324df29a655c8cb31b5396b761a7f">embedded_blob_code_copy_</a>.load(std::memory_order_acquire);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#ad799a0c1d53c9117b94f95e6bc742e66">contains</a>(<span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>),</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>                             embedded_blob_code_size));</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    <a class="code hl_define" href="checks_8h.html#a8c8b326bb3d6944234eb74fbd0952061">SLOW_DCHECK</a>(memcmp(embedded_blob_code, <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>,</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                       embedded_blob_code_size) == 0);</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>  }</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kAllocatePageSize = <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1base_1_1BoundedPageAllocator.html#af7b999d6c3a3526636230bf6b7d72784">AllocatePageSize</a>();</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kCommitPageSize = <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1base_1_1BoundedPageAllocator.html#a68462e5a1751aa3a8fb0068deca16c5f">CommitPageSize</a>();</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>  <span class="keywordtype">size_t</span> allocate_code_size =</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>      <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(embedded_blob_code_size, kAllocatePageSize);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>  <span class="comment">// Allocate the re-embedded code blob in such a way that it will be reachable</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>  <span class="comment">// by PC-relative addressing from biggest possible region.</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> max_pc_relative_code_range = <a class="code hl_variable" href="namespacev8_1_1internal.html#a98928047a27d51a59b4fed57c53d68fa">kMaxPCRelativeCodeRangeInMB</a> * <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>  <span class="keywordtype">size_t</span> hint_offset =</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>      std::min(max_pc_relative_code_range, code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>()) -</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>      allocate_code_size;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>  <span class="keywordtype">void</span>* hint = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>() + hint_offset);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>  <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a> =</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>      <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1base_1_1BoundedPageAllocator.html#a0de34af3c63e3a50ed6f8613720286b6">AllocatePages</a>(</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>          hint, allocate_code_size, kAllocatePageSize,</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>          PageAllocator::kNoAccessWillJitLater));</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        isolate, <span class="stringliteral">&quot;Can&#39;t allocate space for re-embedded builtins&quot;</span>);</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  }</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>, hint);</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  <span class="keywordflow">if</span> (code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>() &gt; max_pc_relative_code_range) {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="comment">// The re-embedded code blob might not be reachable from the end part of</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    <span class="comment">// the code range, so ensure that code pages will never be allocated in</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <span class="comment">// the &quot;unreachable&quot; area.</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> unreachable_start =</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>) +</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        max_pc_relative_code_range;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <span class="keywordflow">if</span> (code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#ad799a0c1d53c9117b94f95e6bc742e66">contains</a>(unreachable_start)) {</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>      <span class="keywordtype">size_t</span> unreachable_size = code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>() - unreachable_start;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>      <span class="keywordtype">void</span>* <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = <a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;<a class="code hl_function" href="classv8_1_1base_1_1BoundedPageAllocator.html#a0de34af3c63e3a50ed6f8613720286b6">AllocatePages</a>(</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(unreachable_start), unreachable_size,</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>          kAllocatePageSize, PageAllocator::kNoAccess);</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>      <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(<span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>), unreachable_start);</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    }</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>  }</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span> </div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>  <span class="keywordtype">size_t</span> code_size = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(embedded_blob_code_size, kCommitPageSize);</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>  <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (<a class="code hl_function" href="classv8_1_1base_1_1OS.html#a508a6da07e4d91c18871144227406c9e">base::OS::IsRemapPageSupported</a>()) {</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    <span class="comment">// By default, the embedded builtins are not remapped, but copied. This</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    <span class="comment">// costs memory, since builtins become private dirty anonymous memory,</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="comment">// rather than shared, clean, file-backed memory for the embedded version.</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    <span class="comment">// If the OS supports it, we can remap the builtins *on top* of the space</span></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    <span class="comment">// allocated in the code range, making the &quot;copy&quot; shared, clean, file-backed</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="comment">// memory, and thus saving sizeof(builtins).</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    <span class="comment">// Builtins should start at a page boundary, see</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <span class="comment">// platform-embedded-file-writer-mac.cc. If it&#39;s not the case (e.g. if the</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    <span class="comment">// embedded builtins are not coming from the binary), fall back to copying.</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(<span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(embedded_blob_code),</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                  kCommitPageSize)) {</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>      <span class="keywordtype">bool</span> ok = <a class="code hl_function" href="classv8_1_1base_1_1OS.html#ac064118be94dda1784253656be03884e">base::OS::RemapPages</a>(embedded_blob_code, code_size,</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                                     <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>,</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                                     <a class="code hl_enumvalue" href="classv8_1_1base_1_1OS.html#a784ff62e67203e60451e5952454046e4a1a4c5e3d44db171c5ee5aa4bb47a59ed">base::OS::MemoryPermission::kReadExecute</a>);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>      <span class="keywordflow">if</span> (ok) {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1CodeRange.html#adbc324df29a655c8cb31b5396b761a7f">embedded_blob_code_copy_</a>.store(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>,</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                                       std::memory_order_release);</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>      }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    }</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  }</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="common_2globals_8h.html#a176eee2d9bf2d3d44693ed520ae2a12c">V8_HEAP_USE_PTHREAD_JIT_WRITE_PROTECT</a> ||</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>      <a class="code hl_define" href="common_2globals_8h.html#a0209fb3cd7376e822a5c901e9ae72a5c">V8_HEAP_USE_BECORE_JIT_WRITE_PROTECT</a> || <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#a42ebfac4aa3bcade2327daf0cf5efb7f">ThreadIsolation::Enabled</a>()) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;RecommitPages(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>, code_size,</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>                                         PageAllocator::kReadWriteExecute)) {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>      <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(isolate,</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>                                  <span class="stringliteral">&quot;Re-embedded builtins: recommit pages&quot;</span>);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    }</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <a class="code hl_class" href="classv8_1_1internal_1_1RwxMemoryWriteScope.html">RwxMemoryWriteScope</a> rwx_write_scope(</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        <span class="stringliteral">&quot;Enable write access to copy the blob code into the code range&quot;</span>);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    memcpy(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>, embedded_blob_code,</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>           embedded_blob_code_size);</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;<a class="code hl_function" href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">SetPermissions</a>(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>, code_size,</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                                          PageAllocator::kReadWrite)) {</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>      <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(isolate,</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                                  <span class="stringliteral">&quot;Re-embedded builtins: set permissions&quot;</span>);</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    }</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    memcpy(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>, embedded_blob_code,</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>           embedded_blob_code_size);</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span> </div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">page_allocator</a>()-&gt;<a class="code hl_function" href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">SetPermissions</a>(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>, code_size,</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>                                          PageAllocator::kReadExecute)) {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>      <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(isolate,</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                                  <span class="stringliteral">&quot;Re-embedded builtins: set permissions&quot;</span>);</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    }</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>  }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>  <a class="code hl_variable" href="classv8_1_1internal_1_1CodeRange.html#adbc324df29a655c8cb31b5396b761a7f">embedded_blob_code_copy_</a>.store(<a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>,</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>                                 std::memory_order_release);</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">embedded_blob_code_copy</a>;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>}</div>
</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>}  <span class="comment">// namespace internal</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>}  <span class="comment">// namespace v8</span></div>
<div class="ttc" id="aallocation_8h_html"><div class="ttname"><a href="allocation_8h.html">allocation.h</a></div></div>
<div class="ttc" id="abits_8h_html"><div class="ttname"><a href="bits_8h.html">bits.h</a></div></div>
<div class="ttc" id="achecks_8h_html_a8c8b326bb3d6944234eb74fbd0952061"><div class="ttname"><a href="checks_8h.html#a8c8b326bb3d6944234eb74fbd0952061">SLOW_DCHECK</a></div><div class="ttdeci">#define SLOW_DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="checks_8h_source.html#l00021">checks.h:21</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html">v8::base::AddressRegion</a></div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00016">address-region.h:16</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a13bbde71869b71658a03746941a13f69"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">v8::base::AddressRegion::end</a></div><div class="ttdeci">Address end() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00034">address-region.h:34</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a29afd92431f4eb737887d7c7ff9b9396"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a29afd92431f4eb737887d7c7ff9b9396">v8::base::AddressRegion::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00039">address-region.h:39</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a753daf867d9e52511d3483b211a9f0b2"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">v8::base::AddressRegion::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00036">address-region.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a94a15b5dca8bef88c66880c9b00281ea"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">v8::base::AddressRegion::begin</a></div><div class="ttdeci">Address begin() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00033">address-region.h:33</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_ad799a0c1d53c9117b94f95e6bc742e66"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#ad799a0c1d53c9117b94f95e6bc742e66">v8::base::AddressRegion::contains</a></div><div class="ttdeci">bool contains(Address address) const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00041">address-region.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BoundedPageAllocator_html_a0de34af3c63e3a50ed6f8613720286b6"><div class="ttname"><a href="classv8_1_1base_1_1BoundedPageAllocator.html#a0de34af3c63e3a50ed6f8613720286b6">v8::base::BoundedPageAllocator::AllocatePages</a></div><div class="ttdeci">void * AllocatePages(void *hint, size_t size, size_t alignment, Permission access) override</div><div class="ttdef"><b>Definition</b> <a href="bounded-page-allocator_8cc_source.html#l00031">bounded-page-allocator.cc:31</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BoundedPageAllocator_html_a68462e5a1751aa3a8fb0068deca16c5f"><div class="ttname"><a href="classv8_1_1base_1_1BoundedPageAllocator.html#a68462e5a1751aa3a8fb0068deca16c5f">v8::base::BoundedPageAllocator::CommitPageSize</a></div><div class="ttdeci">size_t CommitPageSize() override</div><div class="ttdef"><b>Definition</b> <a href="bounded-page-allocator_8h_source.html#l00091">bounded-page-allocator.h:91</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1BoundedPageAllocator_html_af7b999d6c3a3526636230bf6b7d72784"><div class="ttname"><a href="classv8_1_1base_1_1BoundedPageAllocator.html#af7b999d6c3a3526636230bf6b7d72784">v8::base::BoundedPageAllocator::AllocatePageSize</a></div><div class="ttdeci">size_t AllocatePageSize() override</div><div class="ttdef"><b>Definition</b> <a href="bounded-page-allocator_8h_source.html#l00089">bounded-page-allocator.h:89</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1LockGuard_html"><div class="ttname"><a href="classv8_1_1base_1_1LockGuard.html">v8::base::LockGuard</a></div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00534">mutex.h:534</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a508a6da07e4d91c18871144227406c9e"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a508a6da07e4d91c18871144227406c9e">v8::base::OS::IsRemapPageSupported</a></div><div class="ttdeci">static V8_WARN_UNUSED_RESULT constexpr bool IsRemapPageSupported()</div><div class="ttdef"><b>Definition</b> <a href="base_2platform_2platform_8h_source.html#l00334">platform.h:334</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_a784ff62e67203e60451e5952454046e4a1a4c5e3d44db171c5ee5aa4bb47a59ed"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#a784ff62e67203e60451e5952454046e4a1a4c5e3d44db171c5ee5aa4bb47a59ed">v8::base::OS::MemoryPermission::kReadExecute</a></div><div class="ttdeci">@ kReadExecute</div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_ac064118be94dda1784253656be03884e"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#ac064118be94dda1784253656be03884e">v8::base::OS::RemapPages</a></div><div class="ttdeci">static V8_WARN_UNUSED_RESULT bool RemapPages(const void *address, size_t size, void *new_address, MemoryPermission access)</div><div class="ttdef"><b>Definition</b> <a href="platform-darwin_8cc_source.html#l00184">platform-darwin.cc:184</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OS_html_af4f55d86b418913f11eba29009fbd0f1"><div class="ttname"><a href="classv8_1_1base_1_1OS.html#af4f55d86b418913f11eba29009fbd0f1">v8::base::OS::GetFirstFreeMemoryRangeWithin</a></div><div class="ttdeci">static std::optional&lt; MemoryRange &gt; GetFirstFreeMemoryRangeWithin(Address boundary_start, Address boundary_end, size_t minimum_size, size_t alignment)</div><div class="ttdef"><b>Definition</b> <a href="platform-aix_8cc_source.html#l00132">platform-aix.cc:132</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRangeAddressHint_html_a19c1c70c7be7f351c762ffc2dd615c02"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRangeAddressHint.html#a19c1c70c7be7f351c762ffc2dd615c02">v8::internal::CodeRangeAddressHint::recently_freed_</a></div><div class="ttdeci">std::unordered_map&lt; size_t, std::vector&lt; Address &gt; &gt; recently_freed_</div><div class="ttdef"><b>Definition</b> <a href="code-range_8h_source.html#l00042">code-range.h:42</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRangeAddressHint_html_aa81e69681bc6caf874f8824730b20cc7"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRangeAddressHint.html#aa81e69681bc6caf874f8824730b20cc7">v8::internal::CodeRangeAddressHint::NotifyFreedCodeRange</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void NotifyFreedCodeRange(Address code_range_start, size_t code_range_size)</div><div class="ttdef"><b>Definition</b> <a href="#l00087">code-range.cc:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRangeAddressHint_html_aca39d3e1abf10792aa9e1c4d54bd758e"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRangeAddressHint.html#aca39d3e1abf10792aa9e1c4d54bd758e">v8::internal::CodeRangeAddressHint::GetAddressHint</a></div><div class="ttdeci">V8_EXPORT_PRIVATE Address GetAddressHint(size_t code_range_size, size_t alignment)</div><div class="ttdef"><b>Definition</b> <a href="#l00035">code-range.cc:35</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRangeAddressHint_html_af7a58f3d2f480b5752aff5427008e912"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRangeAddressHint.html#af7a58f3d2f480b5752aff5427008e912">v8::internal::CodeRangeAddressHint::mutex_</a></div><div class="ttdeci">base::SpinningMutex mutex_</div><div class="ttdef"><b>Definition</b> <a href="code-range_8h_source.html#l00037">code-range.h:37</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_a0384e21b1772ba6739bd0c40c8c401d6"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#a0384e21b1772ba6739bd0c40c8c401d6">v8::internal::CodeRange::remap_embedded_builtins_mutex_</a></div><div class="ttdeci">base::SpinningMutex remap_embedded_builtins_mutex_</div><div class="ttdef"><b>Definition</b> <a href="code-range_8h_source.html#l00132">code-range.h:132</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_a0c79da6994022c645d597adb7d41143a"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#a0c79da6994022c645d597adb7d41143a">v8::internal::CodeRange::InitReservation</a></div><div class="ttdeci">bool InitReservation(v8::PageAllocator *page_allocator, size_t requested, bool immutable)</div><div class="ttdef"><b>Definition</b> <a href="#l00103">code-range.cc:103</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_a1b4005a6ffa925865a055c9a1c7462a8"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#a1b4005a6ffa925865a055c9a1c7462a8">v8::internal::CodeRange::~CodeRange</a></div><div class="ttdeci">V8_EXPORT_PRIVATE ~CodeRange() override</div><div class="ttdef"><b>Definition</b> <a href="#l00093">code-range.cc:93</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_a1c59ed5b35f3f42ae097485e86aa8c8e"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#a1c59ed5b35f3f42ae097485e86aa8c8e">v8::internal::CodeRange::embedded_blob_code_copy</a></div><div class="ttdeci">uint8_t * embedded_blob_code_copy() const</div><div class="ttdef"><b>Definition</b> <a href="code-range_8h_source.html#l00077">code-range.h:77</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_a6fab364738c3db6d2f76bcdf26df25c3"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#a6fab364738c3db6d2f76bcdf26df25c3">v8::internal::CodeRange::GetWritableReservedAreaSize</a></div><div class="ttdeci">static size_t GetWritableReservedAreaSize()</div><div class="ttdef"><b>Definition</b> <a href="#l00096">code-range.cc:96</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_aaba9ae19acd10533dac38759d1f1a96f"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#aaba9ae19acd10533dac38759d1f1a96f">v8::internal::CodeRange::Free</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void Free()</div><div class="ttdef"><b>Definition</b> <a href="#l00347">code-range.cc:347</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_ad9767bcc9443e40debe3015134037f02"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#ad9767bcc9443e40debe3015134037f02">v8::internal::CodeRange::RemapEmbeddedBuiltins</a></div><div class="ttdeci">uint8_t * RemapEmbeddedBuiltins(Isolate *isolate, const uint8_t *embedded_blob_code, size_t embedded_blob_code_size)</div><div class="ttdef"><b>Definition</b> <a href="#l00365">code-range.cc:365</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_adbc324df29a655c8cb31b5396b761a7f"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#adbc324df29a655c8cb31b5396b761a7f">v8::internal::CodeRange::embedded_blob_code_copy_</a></div><div class="ttdeci">std::atomic&lt; uint8_t * &gt; embedded_blob_code_copy_</div><div class="ttdef"><b>Definition</b> <a href="code-range_8h_source.html#l00128">code-range.h:128</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeRange_html_aeb77197658d4cf3173121f0d3357fca7"><div class="ttname"><a href="classv8_1_1internal_1_1CodeRange.html#aeb77197658d4cf3173121f0d3357fca7">v8::internal::CodeRange::GetPreferredRegion</a></div><div class="ttdeci">static base::AddressRegion GetPreferredRegion(size_t radius_in_megabytes, size_t allocate_page_size)</div><div class="ttdef"><b>Definition</b> <a href="#l00289">code-range.cc:289</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00575">isolate.h:575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a1e813a2d79484ec55165b897c21f21b3"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a1e813a2d79484ec55165b897c21f21b3">v8::internal::Isolate::CurrentEmbeddedBlobCode</a></div><div class="ttdeci">static const uint8_t * CurrentEmbeddedBlobCode()</div><div class="ttdef"><b>Definition</b> <a href="isolate_8cc_source.html#l00397">isolate.cc:397</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a27b962aa197ff0b5d20c7ead12858988"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a27b962aa197ff0b5d20c7ead12858988">v8::internal::Isolate::CurrentEmbeddedBlobCodeSize</a></div><div class="ttdeci">static uint32_t CurrentEmbeddedBlobCodeSize()</div><div class="ttdef"><b>Definition</b> <a href="isolate_8cc_source.html#l00402">isolate.cc:402</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a952bfca1e4968d433e8c169b98f541f3"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a952bfca1e4968d433e8c169b98f541f3">v8::internal::Isolate::GetShortBuiltinsCallRegion</a></div><div class="ttdeci">static base::AddressRegion GetShortBuiltinsCallRegion()</div><div class="ttdef"><b>Definition</b> <a href="isolate_8cc_source.html#l00417">isolate.cc:417</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MemoryAllocator_html_a66221eb0ecbea6d9a92bfdd6181b4323"><div class="ttname"><a href="classv8_1_1internal_1_1MemoryAllocator.html#a66221eb0ecbea6d9a92bfdd6181b4323">v8::internal::MemoryAllocator::GetCommitPageSize</a></div><div class="ttdeci">static V8_INLINE intptr_t GetCommitPageSize()</div><div class="ttdef"><b>Definition</b> <a href="memory-allocator_8h_source.html#l00112">memory-allocator.h:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MutablePageMetadata_html_a8ca68362b7531b2ab93a045cdcedfdde"><div class="ttname"><a href="classv8_1_1internal_1_1MutablePageMetadata.html#a8ca68362b7531b2ab93a045cdcedfdde">v8::internal::MutablePageMetadata::kPageSize</a></div><div class="ttdeci">static const int kPageSize</div><div class="ttdef"><b>Definition</b> <a href="mutable-page-metadata_8h_source.html#l00062">mutable-page-metadata.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1NopRwxMemoryWriteScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1NopRwxMemoryWriteScope.html">v8::internal::NopRwxMemoryWriteScope</a></div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8h_source.html#l00607">code-memory-access.h:607</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RwxMemoryWriteScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1RwxMemoryWriteScope.html">v8::internal::RwxMemoryWriteScope</a></div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8h_source.html#l00090">code-memory-access.h:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a42ebfac4aa3bcade2327daf0cf5efb7f"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a42ebfac4aa3bcade2327daf0cf5efb7f">v8::internal::ThreadIsolation::Enabled</a></div><div class="ttdeci">static bool Enabled()</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00049">code-memory-access.cc:49</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_ad690ad6c8189d648d7cc8ec987d882c1"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#ad690ad6c8189d648d7cc8ec987d882c1">v8::internal::ThreadIsolation::MakeExecutable</a></div><div class="ttdeci">static V8_NODISCARD bool MakeExecutable(Address address, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00460">code-memory-access.cc:460</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1V8_html_a977b087d4ee58955efe72b33136a4e94"><div class="ttname"><a href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">v8::internal::V8::FatalProcessOutOfMemory</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void FatalProcessOutOfMemory(Isolate *isolate, const char *location, const OOMDetails &amp;details=kNoOOMDetails)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html">v8::internal::VirtualMemoryCage</a></div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00351">allocation.h:351</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_a0a1192b669075b68c9b54693ec08f11b"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#a0a1192b669075b68c9b54693ec08f11b">v8::internal::VirtualMemoryCage::page_allocator</a></div><div class="ttdeci">base::BoundedPageAllocator * page_allocator() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00369">allocation.h:369</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_a196f3987c6b51d427770d7fc3095bfbc"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#a196f3987c6b51d427770d7fc3095bfbc">v8::internal::VirtualMemoryCage::region</a></div><div class="ttdeci">base::AddressRegion region() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00365">allocation.h:365</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_a339584956bf59b5688d7d626a129ab7f"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#a339584956bf59b5688d7d626a129ab7f">v8::internal::VirtualMemoryCage::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00363">allocation.h:363</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_a77f7c0f5eaa5a86bfa2621a0310f914a"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#a77f7c0f5eaa5a86bfa2621a0310f914a">v8::internal::VirtualMemoryCage::base</a></div><div class="ttdeci">Address base() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00362">allocation.h:362</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_a86e7bdd9ecfebaa08da394ef3c8d034b"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#a86e7bdd9ecfebaa08da394ef3c8d034b">v8::internal::VirtualMemoryCage::IsReserved</a></div><div class="ttdeci">bool IsReserved() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00376">allocation.h:376</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_ad60a3e4d0c05fc8208f042156e6ac4b8"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#ad60a3e4d0c05fc8208f042156e6ac4b8">v8::internal::VirtualMemoryCage::InitReservation</a></div><div class="ttdeci">bool InitReservation(const ReservationParams &amp;params, base::AddressRegion existing_reservation=base::AddressRegion())</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00308">allocation.cc:308</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_adf66508177c33a683516684dddfac5e1"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#adf66508177c33a683516684dddfac5e1">v8::internal::VirtualMemoryCage::page_allocator_</a></div><div class="ttdeci">std::unique_ptr&lt; base::BoundedPageAllocator &gt; page_allocator_</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00412">allocation.h:412</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_aef97aed9cabb1fa4071076230f87a9cc"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#aef97aed9cabb1fa4071076230f87a9cc">v8::internal::VirtualMemoryCage::Free</a></div><div class="ttdeci">void Free()</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00355">allocation.cc:355</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemoryCage_html_af0e93364779ee18024a3aab1b4cd9958"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemoryCage.html#af0e93364779ee18024a3aab1b4cd9958">v8::internal::VirtualMemoryCage::reservation</a></div><div class="ttdeci">VirtualMemory * reservation()</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00373">allocation.h:373</a></div></div>
<div class="ttc" id="acode-range_8h_html"><div class="ttname"><a href="code-range_8h.html">code-range.h</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html"><div class="ttname"><a href="common_2globals_8h.html">globals.h</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a0209fb3cd7376e822a5c901e9ae72a5c"><div class="ttname"><a href="common_2globals_8h.html#a0209fb3cd7376e822a5c901e9ae72a5c">V8_HEAP_USE_BECORE_JIT_WRITE_PROTECT</a></div><div class="ttdeci">#define V8_HEAP_USE_BECORE_JIT_WRITE_PROTECT</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00303">globals.h:303</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a176eee2d9bf2d3d44693ed520ae2a12c"><div class="ttname"><a href="common_2globals_8h.html#a176eee2d9bf2d3d44693ed520ae2a12c">V8_HEAP_USE_PTHREAD_JIT_WRITE_PROTECT</a></div><div class="ttdeci">#define V8_HEAP_USE_PTHREAD_JIT_WRITE_PROTECT</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00295">globals.h:295</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a30648966d7f7b10df2c38206c18d6d52"><div class="ttname"><a href="common_2globals_8h.html#a30648966d7f7b10df2c38206c18d6d52">V8_EXTERNAL_CODE_SPACE_BOOL</a></div><div class="ttdeci">#define V8_EXTERNAL_CODE_SPACE_BOOL</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00253">globals.h:253</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a5a87b34b32dcbcbd7b8891e6298d5ebb"><div class="ttname"><a href="common_2globals_8h.html#a5a87b34b32dcbcbd7b8891e6298d5ebb">COMPRESS_POINTERS_IN_SHARED_CAGE_BOOL</a></div><div class="ttdeci">#define COMPRESS_POINTERS_IN_SHARED_CAGE_BOOL</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00111">globals.h:111</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a718cb0bddf9ffe093e66824996fe25dc"><div class="ttname"><a href="common_2globals_8h.html#a718cb0bddf9ffe093e66824996fe25dc">V8_ENABLE_NEAR_CODE_RANGE_BOOL</a></div><div class="ttdeci">#define V8_ENABLE_NEAR_CODE_RANGE_BOOL</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00229">globals.h:229</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_aa5186b9fd6612bf591ba59464649200b"><div class="ttname"><a href="common_2globals_8h.html#aa5186b9fd6612bf591ba59464649200b">FUNCTION_ADDR</a></div><div class="ttdeci">#define FUNCTION_ADDR(f)</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00703">globals.h:703</a></div></div>
<div class="ttc" id="aconstants-arch_8h_html"><div class="ttname"><a href="constants-arch_8h.html">constants-arch.h</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_abce9f5dc9c83f2639b72024fdee5d388"><div class="ttname"><a href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a></div><div class="ttdeci">int end</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00596">debug-coverage.cc:596</a></div></div>
<div class="ttc" id="aflags_2flags_8h_html"><div class="ttname"><a href="flags_2flags_8h.html">flags.h</a></div></div>
<div class="ttc" id="aheap-inl_8h_html"><div class="ttname"><a href="heap-inl_8h.html">heap-inl.h</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a115c48491bb37004f5ac67eb46ac2c23"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a></div><div class="ttdeci">turboshaft::OpIndex base</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00070">instruction-selector-ia32.cc:70</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a41f8c58d2c01bf65b8ee199c3f87fc80"><div class="ttname"><a href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a></div><div class="ttdeci">ZoneVector&lt; RpoNumber &gt; &amp; result</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00021">jump-threading.cc:21</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a5f6aa8edcd99914757600b5d3b259bb7"><div class="ttname"><a href="jump-threading_8cc.html#a5f6aa8edcd99914757600b5d3b259bb7">TRACE</a></div><div class="ttdeci">#define TRACE(...)</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00012">jump-threading.cc:12</a></div></div>
<div class="ttc" id="alazy-instance_8h_html"><div class="ttname"><a href="lazy-instance_8h.html">lazy-instance.h</a></div></div>
<div class="ttc" id="alazy-instance_8h_html_a219abfaf8244b8fa42f0c18aca72c58f"><div class="ttname"><a href="lazy-instance_8h.html#a219abfaf8244b8fa42f0c18aca72c58f">DEFINE_LAZY_LEAKY_OBJECT_GETTER</a></div><div class="ttdeci">#define DEFINE_LAZY_LEAKY_OBJECT_GETTER(T, FunctionName,...)</div><div class="ttdef"><b>Definition</b> <a href="lazy-instance_8h_source.html#l00249">lazy-instance.h:249</a></div></div>
<div class="ttc" id="alogging_8h_html_a0d093cb749cfc7ab5993726392df681f"><div class="ttname"><a href="logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a></div><div class="ttdeci">#define FATAL(...)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00047">logging.h:47</a></div></div>
<div class="ttc" id="alogging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="alogging_8h_html_a56e883b55c80205b4d1727679c68b2bd"><div class="ttname"><a href="logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a></div><div class="ttdeci">#define CHECK_LE(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00493">logging.h:493</a></div></div>
<div class="ttc" id="alogging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="alogging_8h_html_aa958a8a4e5dda3abaa031977268ae60e"><div class="ttname"><a href="logging_8h.html#aa958a8a4e5dda3abaa031977268ae60e">CHECK_NE</a></div><div class="ttdeci">#define CHECK_NE(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_aca32614b4d2aea7dd9abdeb222bf02f3"><div class="ttname"><a href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00482">logging.h:482</a></div></div>
<div class="ttc" id="alogging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="amacros_8h_html_a5113f5db9eec9c30ecea57b8d4175f2d"><div class="ttname"><a href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a></div><div class="ttdeci">constexpr T RoundUp(T x, intptr_t m)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00375">macros.h:375</a></div></div>
<div class="ttc" id="amacros_8h_html_aa0de4a420e74c8df8076fc2aaf4af27a"><div class="ttname"><a href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a></div><div class="ttdeci">constexpr T RoundDown(T x, intptr_t m)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00359">macros.h:359</a></div></div>
<div class="ttc" id="amacros_8h_html_ab7a19c1f785f31f2b190afc19875368a"><div class="ttname"><a href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a></div><div class="ttdeci">constexpr bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00391">macros.h:391</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1bits_html_af8aa24a002b73b61ef7283bfdfa8b47d"><div class="ttname"><a href="namespacev8_1_1base_1_1bits.html#af8aa24a002b73b61ef7283bfdfa8b47d">v8::base::bits::RoundUpToPowerOfTwo</a></div><div class="ttdeci">constexpr size_t RoundUpToPowerOfTwo(size_t value)</div><div class="ttdef"><b>Definition</b> <a href="bits_8h_source.html#l00252">bits.h:252</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a214ae6bbc219c3bf43cb03f9cf6c165ca4f69ff55cee8b7af23d6473dfdaff203"><div class="ttname"><a href="namespacev8_1_1base.html#a214ae6bbc219c3bf43cb03f9cf6c165ca4f69ff55cee8b7af23d6473dfdaff203">v8::base::PageInitializationMode::kAllocatedPagesCanBeUninitialized</a></div><div class="ttdeci">@ kAllocatedPagesCanBeUninitialized</div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a214ae6bbc219c3bf43cb03f9cf6c165ca954b5925a94fec2852072b8030f53721"><div class="ttname"><a href="namespacev8_1_1base.html#a214ae6bbc219c3bf43cb03f9cf6c165ca954b5925a94fec2852072b8030f53721">v8::base::PageInitializationMode::kRecommitOnly</a></div><div class="ttdeci">@ kRecommitOnly</div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a40af50cfd5f644e039f2664d17ff298aa0b3dab4b20154b90199fa91469814014"><div class="ttname"><a href="namespacev8_1_1base.html#a40af50cfd5f644e039f2664d17ff298aa0b3dab4b20154b90199fa91469814014">v8::base::PageFreeingMode::kDiscard</a></div><div class="ttdeci">@ kDiscard</div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a40af50cfd5f644e039f2664d17ff298aa8045b5e8d8f2790b6de4ecf6650f5f35"><div class="ttname"><a href="namespacev8_1_1base.html#a40af50cfd5f644e039f2664d17ff298aa8045b5e8d8f2790b6de4ecf6650f5f35">v8::base::PageFreeingMode::kMakeInaccessible</a></div><div class="ttdeci">@ kMakeInaccessible</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a2409db5c20b55125a1f38d2eecf2341b"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2409db5c20b55125a1f38d2eecf2341b">v8::internal::win64_unwindinfo::RegisterNonABICompliantCodeRange</a></div><div class="ttdeci">void RegisterNonABICompliantCodeRange(void *start, size_t size_in_bytes)</div><div class="ttdef"><b>Definition</b> <a href="unwinding-info-win64_8cc_source.html#l00525">unwinding-info-win64.cc:525</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a2af86e498cb6c3f31bc898c6b40d287e"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2af86e498cb6c3f31bc898c6b40d287e">v8::internal::win64_unwindinfo::CanRegisterUnwindInfoForNonABICompliantCodeRange</a></div><div class="ttdeci">bool CanRegisterUnwindInfoForNonABICompliantCodeRange()</div><div class="ttdef"><b>Definition</b> <a href="unwinding-info-win64_8cc_source.html#l00030">unwinding-info-win64.cc:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a70f996f40a6b9c963c47bb920970d841"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a70f996f40a6b9c963c47bb920970d841">v8::internal::win64_unwindinfo::UnregisterNonABICompliantCodeRange</a></div><div class="ttdeci">void UnregisterNonABICompliantCodeRange(void *start)</div><div class="ttdef"><b>Definition</b> <a href="unwinding-info-win64_8cc_source.html#l00575">unwinding-info-win64.cc:575</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00018">api-arguments-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a08e1140ec7d96bfd4d6b21a808ccd654"><div class="ttname"><a href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">v8::internal::MB</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed Starts incremental marking with kUserVisible priority threshold for starting incremental marking immediately in percent of available minor GC task trigger in percent of the current heap limit use a separate phase for stack scanning in scavenge max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage * MB</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l02095">flags.cc:2095</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0b20b06fc0f215d9b9eac890977a53e7"><div class="ttname"><a href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">v8::internal::SetPermissions</a></div><div class="ttdeci">bool SetPermissions(v8::PageAllocator *page_allocator, void *address, size_t size, PageAllocator::Permission access)</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00198">allocation.cc:198</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a1b38d6a01927e639b91b6a039899ac1a"><div class="ttname"><a href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">v8::internal::GetPlatformPageAllocator</a></div><div class="ttdeci">v8::PageAllocator * GetPlatformPageAllocator()</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00066">allocation.cc:66</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition</b> <a href="wasm-objects-inl_8h_source.html#l00457">wasm-objects-inl.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a678f6dfd6d23a5357bdb8bc045df96d6"><div class="ttname"><a href="namespacev8_1_1internal.html#a678f6dfd6d23a5357bdb8bc045df96d6">v8::internal::kReservedCodeRangePages</a></div><div class="ttdeci">constexpr size_t kReservedCodeRangePages</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00504">globals.h:504</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a782acb70e9eabcd3faaccfb6a3bde48e"><div class="ttname"><a href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">v8::internal::Address</a></div><div class="ttdeci">Address</div><div class="ttdef"><b>Definition</b> <a href="api-callbacks-inl_8h_source.html#l00034">api-callbacks-inl.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a7e4c8e36860ddb31a88e9f30d495473e"><div class="ttname"><a href="namespacev8_1_1internal.html#a7e4c8e36860ddb31a88e9f30d495473e">v8::internal::kMinimumCodeRangeSize</a></div><div class="ttdeci">constexpr size_t kMinimumCodeRangeSize</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00501">globals.h:501</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a98928047a27d51a59b4fed57c53d68fa"><div class="ttname"><a href="namespacev8_1_1internal.html#a98928047a27d51a59b4fed57c53d68fa">v8::internal::kMaxPCRelativeCodeRangeInMB</a></div><div class="ttdeci">constexpr size_t kMaxPCRelativeCodeRangeInMB</div><div class="ttdef"><b>Definition</b> <a href="constants-arm_8h_source.html#l00722">constants-arm.h:722</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa753e257ba3a44203cd7b3a57831b942"><div class="ttname"><a href="namespacev8_1_1internal.html#aa753e257ba3a44203cd7b3a57831b942">v8::internal::kPlatformRequiresCodeRange</a></div><div class="ttdeci">constexpr bool kPlatformRequiresCodeRange</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00499">globals.h:499</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abe54fbe011324cc8d9e2d0ccd3f83a84"><div class="ttname"><a href="namespacev8_1_1internal.html#abe54fbe011324cc8d9e2d0ccd3f83a84">v8::internal::kMaximalCodeRangeSize</a></div><div class="ttdeci">constexpr size_t kMaximalCodeRangeSize</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00500">globals.h:500</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00017">api-arguments-inl.h:17</a></div></div>
<div class="ttc" id="aonce_8h_html"><div class="ttname"><a href="once_8h.html">once.h</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1VirtualMemoryCage_1_1ReservationParams_html"><div class="ttname"><a href="structv8_1_1internal_1_1VirtualMemoryCage_1_1ReservationParams.html">v8::internal::VirtualMemoryCage::ReservationParams</a></div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00382">allocation.h:382</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1VirtualMemoryCage_1_1ReservationParams_html_ad9b7d547e3b296ff9242def4d15abe7a"><div class="ttname"><a href="structv8_1_1internal_1_1VirtualMemoryCage_1_1ReservationParams.html#ad9b7d547e3b296ff9242def4d15abe7a">v8::internal::VirtualMemoryCage::ReservationParams::page_allocator</a></div><div class="ttdeci">v8::PageAllocator * page_allocator</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00384">allocation.h:384</a></div></div>
<div class="ttc" id="aunwinding-info-win64_8h_html"><div class="ttname"><a href="unwinding-info-win64_8h.html">unwinding-info-win64.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 3 2025 08:18:30 for v8 by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
