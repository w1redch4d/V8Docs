<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>v8: src/wasm/fuzzing/random-module-generation.cc Source File</title>
<link rel="icon" href="v8.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="v8.png"/></td>
  <td id="projectalign">
   <div id="projectname">v8
   </div>
   <div id="projectbrief">V8 is Googleâ€™s open source high-performance JavaScript and WebAssembly engine, written in C++. It is used in Chrome and in Node.js, among others. It implements ECMAScript and WebAssembly, and runs on Windows, macOS, and Linux systems that use x64, IA-32, or ARM processors. V8 can be embedded into any C++ application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('random-module-generation_8cc_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">random-module-generation.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="random-module-generation_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2024 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="random-module-generation_8h.html">src/wasm/fuzzing/random-module-generation.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="small-vector_8h.html">src/base/small-vector.h</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="random-number-generator_8h.html">src/base/utils/random-number-generator.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="function-body-decoder_8h.html">src/wasm/function-body-decoder.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-module-builder_8h.html">src/wasm/wasm-module-builder.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-module_8h.html">src/wasm/wasm-module.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-opcodes-inl_8h.html">src/wasm/wasm-opcodes-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// This whole compilation unit should only be included in non-official builds to</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">// reduce binary size (it&#39;s a testing-only implementation which lives in src/ so</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">// that the GenerateRandomWasmModule runtime function can use it).  We normally</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">// disable V8_WASM_RANDOM_FUZZERS in official builds.</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#ifndef V8_WASM_RANDOM_FUZZERS</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#error Exclude this compilation unit in official builds.</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="foldopen" id="foldopen00026" data-start="{" data-end="}">
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html">   26</a></span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html">v8::internal::wasm::fuzzing</a> {</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxArrays = 3;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxStructs = 4;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxStructFields = 4;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxFunctions = 4;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxGlobals = 64;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">constexpr</span> uint32_t kMaxLocals = 32;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxParameters = 15;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxReturns = 15;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxExceptions = 4;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxTableSize = 32;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxTables = 4;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxMemories = 4;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxArraySize = 20;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxPassiveDataSegments = 2;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="keyword">constexpr</span> uint32_t kMaxRecursionDepth = 64;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxCatchCases = 6;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="keyword">struct </span>StringImports {</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a8721885a13fdab545fa508803154d20d">   48</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a8721885a13fdab545fa508803154d20d">cast</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a6e19f60e6d0aaafebbdcd282f212bd6d">   49</a></span>  uint32_t test;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a2a94af96b48ededb482be8d77265360c">   50</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a2a94af96b48ededb482be8d77265360c">fromCharCode</a>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a64a83922e1e2fa0a4a08d4e89e716389">   51</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a64a83922e1e2fa0a4a08d4e89e716389">fromCodePoint</a>;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a4b3721456d8a061caa13e8b30f5d4f74">   52</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a4b3721456d8a061caa13e8b30f5d4f74">charCodeAt</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aa002b1b2006b2e38b143b322a892d9ba">   53</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#aa002b1b2006b2e38b143b322a892d9ba">codePointAt</a>;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aebb70c2aab3407a9f05334c47131a43b">   54</a></span>  uint32_t length;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aecf167532df97fbf5d2f2fa85eda6397">   55</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#aecf167532df97fbf5d2f2fa85eda6397">concat</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aa43d2ab28d2f569f8f848249dfb0a401">   56</a></span>  uint32_t substring;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a1ad2b9239773cbd418818106711ed087">   57</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a1ad2b9239773cbd418818106711ed087">equals</a>;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#ac36537f594f783ae9323e25e7f8317b2">   58</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#ac36537f594f783ae9323e25e7f8317b2">compare</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a764a5f1b2877c8fed9d34b9cf2b7e8c8">   59</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a764a5f1b2877c8fed9d34b9cf2b7e8c8">fromCharCodeArray</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a5f3ec28b358bd591e5e67a67866d4766">   60</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a5f3ec28b358bd591e5e67a67866d4766">intoCharCodeArray</a>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#adf46c6cdb1d1f66f2212c8cfd21b5a89">   61</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#adf46c6cdb1d1f66f2212c8cfd21b5a89">measureStringAsUTF8</a>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a89c0765ddb421d9438d736fc9fdaa0e0">   62</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a89c0765ddb421d9438d736fc9fdaa0e0">encodeStringIntoUTF8Array</a>;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a1d390dc688e2df71af7bd62f5bdc5103">   63</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a1d390dc688e2df71af7bd62f5bdc5103">encodeStringToUTF8Array</a>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a4150e8e3bb68c5622ced13e984be1ef6">   64</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a4150e8e3bb68c5622ced13e984be1ef6">decodeStringFromUTF8Array</a>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  <span class="comment">// These aren&#39;t imports, but closely related, so store them here as well:</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a4e4a8799d9263303948e827dc702dc92">   67</a></span>  ModuleTypeIndex <a class="code hl_variable" href="random-module-generation_8cc.html#a4e4a8799d9263303948e827dc702dc92">array_i16</a>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a5172eb1375a20e6fb302e7aa86db7c12">   68</a></span>  ModuleTypeIndex <a class="code hl_variable" href="random-module-generation_8cc.html#a5172eb1375a20e6fb302e7aa86db7c12">array_i8</a>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>};</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment">// Creates an array out of the arguments without hardcoding the exact number of</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment">// arguments.</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... T&gt;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keyword">constexpr</span> <span class="keyword">auto</span> CreateArray(T... elements) {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  std::array <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = {elements...};</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>}</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment">// Concatenate arrays into one array in compile-time.</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> <a class="code hl_define" href="base_2ieee754_8cc.html#a0acb682b8260ab1c60b918599864e2e5">T</a>, <span class="keywordtype">size_t</span>... <a class="code hl_variable" href="namespacev8_1_1internal.html#a58578a07334d81a9c8cd700020ff9b78">N</a>&gt;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="keyword">constexpr</span> <span class="keyword">auto</span> ConcatArrays(std::array&lt;T, N&gt;... array) {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumArrays = <span class="keyword">sizeof</span>...(array);</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  std::array&lt;T*, kNumArrays&gt; kArrays = {&amp;array[0]...};</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLengths[kNumArrays] = {array.size()...};</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kSumOfLengths = (... + array.size());</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  std::array&lt;T, kSumOfLengths&gt; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = {0};</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  <span class="keywordtype">size_t</span> result_index = 0;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> arr = 0; arr &lt; kNumArrays; arr++) {</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_variable" href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a> = 0; <a class="code hl_variable" href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a> &lt; kLengths[arr]; <a class="code hl_variable" href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a>++) {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>      <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>[result_index++] = kArrays[arr][<a class="code hl_variable" href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a>];</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    }</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>  }</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>}</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="keyword">class </span>DataRange {</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>  <span class="comment">// data_ is used for general random values for fuzzing.</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a2f144d08a5f20a049d175b9dafae2e53">   99</a></span>  base::Vector&lt;const uint8_t&gt; <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  <span class="comment">// The RNG is used for generating random values (i32.consts etc.) for which</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>  <span class="comment">// the quality of the input is less important.</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a321cd8801343a9eba45b76a683376216">  102</a></span>  base::RandomNumberGenerator <a class="code hl_variable" href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <span class="keyword">explicit</span> DataRange(base::Vector&lt;const uint8_t&gt; data, int64_t seed = -1)</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>      : <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>(data), <a class="code hl_variable" href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a>(seed == -1 ? get&lt;int64_t&gt;() : seed) {}</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  DataRange(<span class="keyword">const</span> DataRange&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  DataRange&amp; operator=(<span class="keyword">const</span> DataRange&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <span class="comment">// Don&#39;t accidentally pass DataRange by value. This will reuse bytes and might</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  <span class="comment">// lead to OOM because the end might not be reached.</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>  <span class="comment">// Define move constructor and move assignment, disallow copy constructor and</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  <span class="comment">// copy assignment (below).</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>  DataRange(DataRange&amp;&amp; other) <a class="code hl_define" href="src_2base_2compiler-specific_8h.html#a415acbb16ae1bfc9e3e053f8477852f5">V8_NOEXCEPT</a> : <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>(other.data_),</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                                             <a class="code hl_variable" href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a>(other.rng_) {</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    other.data_ = {};</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>  DataRange&amp; operator=(DataRange&amp;&amp; other) <a class="code hl_define" href="src_2base_2compiler-specific_8h.html#a415acbb16ae1bfc9e3e053f8477852f5">V8_NOEXCEPT</a> {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a> = other.data_;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <a class="code hl_variable" href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a> = other.rng_;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    other.data_ = {};</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  }</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>.size(); }</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>  DataRange <a class="code hl_function" href="namespacev8_1_1internal_1_1libvtune.html#a85908a2ac6abdcec9ee9c4f7e51e795f">split</a>() {</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="comment">// As we might split many times, only use 2 bytes if the data size is large.</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <a class="code hl_typedef" href="namespaceunibrow.html#abcc5d3424c551c568df4199a48bea1c2">uint16_t</a> random_choice = <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>.size() &gt; std::numeric_limits&lt;uint8_t&gt;::max()</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                                 ? get&lt;uint16_t&gt;()</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>                                 : get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <a class="code hl_typedef" href="namespaceunibrow.html#abcc5d3424c551c568df4199a48bea1c2">uint16_t</a> num_bytes = random_choice % std::max(<span class="keywordtype">size_t</span>{1}, <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>.size());</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    int64_t new_seed = <a class="code hl_variable" href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a>.initial_seed() ^ <a class="code hl_variable" href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a>.NextInt64();</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    DataRange <a class="code hl_function" href="namespacev8_1_1internal_1_1libvtune.html#a85908a2ac6abdcec9ee9c4f7e51e795f">split</a>(<a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>.SubVector(0, num_bytes), new_seed);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a> += num_bytes;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal_1_1libvtune.html#a85908a2ac6abdcec9ee9c4f7e51e795f">split</a>;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">size_t</span> max_<span class="keywordtype">byte</span>s = sizeof(T)&gt;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  T getPseudoRandom() {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="keyword">static_assert</span>(!std::is_same_v&lt;T, bool&gt;, <span class="stringliteral">&quot;bool needs special handling&quot;</span>);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keyword">static_assert</span>(max_bytes &lt;= <span class="keyword">sizeof</span>(<a class="code hl_define" href="base_2ieee754_8cc.html#a0acb682b8260ab1c60b918599864e2e5">T</a>));</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="comment">// Special handling for signed integers: Calling getPseudoRandom&lt;int32_t, 1&gt;</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="comment">// () should be equal to getPseudoRandom&lt;int8_t&gt;(). (The NextBytes() below</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="comment">// does not achieve that due to depending on endianness and either never</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="comment">// generating negative values or filling in the highest significant bits</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="comment">// which would be unexpected).</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (std::is_integral_v&lt;T&gt; &amp;&amp; std::is_signed_v&lt;T&gt;) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>      <span class="keywordflow">switch</span> (max_bytes) {</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>          <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>(getPseudoRandom&lt;uint8_t&gt;());</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>          <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="namespaceunibrow.html#adeba6d9ef7f21fc46156d27496bab1d3">int16_t</a><span class="keyword">&gt;</span>(getPseudoRandom&lt;uint16_t&gt;());</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>          <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a><span class="keyword">&gt;</span>(getPseudoRandom&lt;uint32_t&gt;());</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>          <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>              getPseudoRandom&lt;std::make_unsigned_t&lt;T&gt;, max_bytes&gt;());</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>      }</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    }</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    T <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>{};</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <a class="code hl_variable" href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a>.NextBytes(&amp;<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>, max_bytes);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  }</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  T get() {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="comment">// Bool needs special handling (see template specialization below).</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="keyword">static_assert</span>(!std::is_same_v&lt;T, bool&gt;, <span class="stringliteral">&quot;bool needs special handling&quot;</span>);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="comment">// We want to support the case where we have less than sizeof(T) bytes</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="comment">// remaining in the slice. We&#39;ll just use what we have, so we get a bit of</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">// randomness when there are still some bytes left. If size == 0, get&lt;T&gt;()</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="comment">// returns the type&#39;s value-initialized value.</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_bytes = std::min(<span class="keyword">sizeof</span>(T), <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>.size());</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    T <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>{};</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    memcpy(&amp;<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>, <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a>.begin(), num_bytes);</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <a class="code hl_variable" href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a> += num_bytes;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>};</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="comment">// Explicit specialization must be defined outside of class body.</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span><span class="keywordtype">bool</span> DataRange::get() {</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  <span class="comment">// The general implementation above is not instantiable for bool, as that</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  <span class="comment">// would cause undefinied behaviour when memcpy&#39;ing random bytes to the</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  <span class="comment">// bool. This can result in different observable side effects when invoking</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  <span class="comment">// get&lt;bool&gt; between debug and release version, which eventually makes the</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  <span class="comment">// code output different as well as raising various unrecoverable errors on</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  <span class="comment">// runtime.</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  <span class="comment">// Hence we specialize get&lt;bool&gt; to consume a full byte and use the least</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  <span class="comment">// significant bit only (0 == false, 1 == true).</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <span class="keywordflow">return</span> get&lt;uint8_t&gt;() % 2;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>}</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="keyword">enum</span> IncludeNumericTypes {</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  kIncludeNumericTypes = <span class="keyword">true</span>,</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  kExcludeNumericTypes = <span class="keyword">false</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>};</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="keyword">enum</span> IncludePackedTypes {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  kIncludePackedTypes = <span class="keyword">true</span>,</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  kExcludePackedTypes = <span class="keyword">false</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>};</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="keyword">enum</span> IncludeAllGenerics {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  kIncludeAllGenerics = <span class="keyword">true</span>,</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  kExcludeSomeGenerics = <span class="keyword">false</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>};</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="keyword">enum</span> IncludeS128 { kIncludeS128 = <span class="keyword">true</span>, kExcludeS128 = <span class="keyword">false</span> };</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="comment">// Chooses one `ValueType` randomly based on `options` and the enums specified</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="comment">// above.</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>ValueType GetValueTypeHelper(WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>,</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                             DataRange* data, uint32_t num_nullable_types,</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                             uint32_t num_non_nullable_types,</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>                             IncludeNumericTypes include_numeric_types,</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                             IncludePackedTypes include_packed_types,</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>                             IncludeAllGenerics include_all_generics,</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>                             IncludeS128 include_s128 = kIncludeS128) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  <span class="comment">// Create and fill a vector of potential types to choose from.</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  base::SmallVector&lt;ValueType, 32&gt; types;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="comment">// Numeric non-wasmGC types.</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="keywordflow">if</span> (include_numeric_types) {</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="comment">// Many &quot;general-purpose&quot; instructions return i32, so give that a higher</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="comment">// probability (such as 3x).</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    types.insert(types.end(),</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>                 {kWasmI32, kWasmI32, kWasmI32, kWasmI64, kWasmF32, kWasmF64});</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="comment">// SIMD type.</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>.generate_simd() &amp;&amp; include_s128) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>      types.push_back(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a2c3460cd2f939619948406b93b65b4cb">kWasmS128</a>);</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    }</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  }</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  <span class="comment">// The MVP types: apart from numeric types, contains only the non-nullable</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  <span class="comment">// funcRef. We don&#39;t add externRef, because for externRef globals we generate</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  <span class="comment">// initialiser expressions where we need wasmGC types. Also, externRef is not</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <span class="comment">// really useful for the MVP fuzzer, as there is nothing that we could</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  <span class="comment">// generate.</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  types.push_back(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">kWasmFuncRef</a>);</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>  <span class="comment">// WasmGC types (including user-defined types).</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  <span class="comment">// Decide if the return type will be nullable or not.</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> nullable = <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>.generate_wasm_gc() ? data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;() : false;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>.generate_wasm_gc()) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    types.push_back(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a550e7807245e86b42c8585b50db8d723">kWasmI31Ref</a>);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="keywordflow">if</span> (include_numeric_types &amp;&amp; include_packed_types) {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>      types.insert(types.end(), {kWasmI8, kWasmI16});</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="keywordflow">if</span> (nullable) {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>      types.insert(types.end(),</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                   {kWasmNullRef, kWasmNullExternRef, kWasmNullFuncRef});</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keywordflow">if</span> (nullable || include_all_generics) {</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>      types.insert(types.end(), {kWasmStructRef, kWasmArrayRef, kWasmAnyRef,</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                                 kWasmEqRef, kWasmExternRef});</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    }</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>  }</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>  <span class="comment">// The last index of user-defined types allowed is different based on the</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  <span class="comment">// nullability of the output. User-defined types are function signatures or</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="comment">// structs and arrays (in case of wasmGC).</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  <span class="keyword">const</span> uint32_t num_user_defined_types =</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>      nullable ? num_nullable_types : num_non_nullable_types;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  <span class="comment">// Conceptually, user-defined types are added to the end of the list. Pick a</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  <span class="comment">// random one among them.</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  uint32_t chosen_id =</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>      data-&gt;get&lt;uint8_t&gt;() % (types.size() + num_user_defined_types);</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a0c67c72a110565d42e5d85da22aa24b8">Nullability</a> nullability = nullable ? <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a0c67c72a110565d42e5d85da22aa24b8a7630715fff9398c0416edb712253e3db">kNullable</a> : <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a0c67c72a110565d42e5d85da22aa24b8a66101800fc7652c63fbd17b0fe8093cf">kNonNullable</a>;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>  <span class="keywordflow">if</span> (chosen_id &gt;= types.size()) {</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <span class="comment">// Return user-defined type.</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1ValueType.html#a9ea361d96891d9c418a34f7bfabfb2ef">ValueType::RefMaybeNull</a>(</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        ModuleTypeIndex{chosen_id - <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(types.size())},</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        nullability);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>  }</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  <span class="comment">// If returning a reference type, fix its nullability according to {nullable}.</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  <span class="keywordflow">if</span> (types[chosen_id].<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#aed0daa933fcad9ee13252b351e01a3d9">is_reference</a>()) {</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1ValueType.html#a9ea361d96891d9c418a34f7bfabfb2ef">ValueType::RefMaybeNull</a>(types[chosen_id].heap_type(), nullability);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  }</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>  <span class="comment">// Otherwise, just return the picked type.</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  <span class="keywordflow">return</span> types[chosen_id];</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>}</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>ValueType GetValueType(WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, DataRange* data,</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>                       uint32_t num_types) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>  <span class="keywordflow">return</span> GetValueTypeHelper(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, data, num_types, num_types,</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>                            kIncludeNumericTypes, kExcludePackedTypes,</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                            kIncludeAllGenerics);</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>}</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span><span class="keywordtype">void</span> GeneratePassiveDataSegment(DataRange* range, WasmModuleBuilder* builder) {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  <span class="keywordtype">int</span> length = range-&gt;get&lt;uint8_t&gt;() % 65;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>  ZoneVector&lt;uint8_t&gt; <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>(length, builder-&gt;zone());</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">length</a>; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    data[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = range-&gt;getPseudoRandom&lt;uint8_t&gt;();</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>  }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  builder-&gt;AddPassiveDataSegment(data.data(),</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>                                 <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(data.size()));</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>}</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>uint32_t GenerateRefTypeElementSegment(DataRange* range,</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                                       WasmModuleBuilder* builder,</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                                       ValueType element_type) {</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(element_type.is_object_reference());</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(element_type.has_index());</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>  WasmModuleBuilder::WasmElemSegment segment(</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>      builder-&gt;zone(), element_type, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#af1feef98b93722c701ac36d4367f9088">WasmInitExpr::RefNullConst</a>(element_type.heap_representation()));</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  <span class="keywordtype">size_t</span> element_count = range-&gt;get&lt;uint8_t&gt;() % 11;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; element_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    segment.entries.emplace_back(</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        <a class="code hl_enumvalue" href="structv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment_1_1Entry.html#aa9a4cd6f943d6fcb1327ff9f9aafb5fba5e71bbca0242fa690622547d7b4fb563">WasmModuleBuilder::WasmElemSegment::Entry::kRefNullEntry</a>,</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        element_type.ref_index().index);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  }</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>  <span class="keywordflow">return</span> builder-&gt;AddElementSegment(std::move(segment));</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>}</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>std::vector&lt;ValueType&gt; GenerateTypes(WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>,</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                                     DataRange* data, uint32_t num_ref_types) {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  std::vector&lt;ValueType&gt; types;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  <span class="keywordtype">int</span> num_params = <span class="keywordtype">int</span>{data-&gt;get&lt;uint8_t&gt;()} % (kMaxParameters + 1);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  types.reserve(num_params);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_params; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    types.push_back(GetValueType(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, data, num_ref_types));</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>  <span class="keywordflow">return</span> types;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>}</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* CreateSignature(<a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* zone,</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                             base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                             base::Vector&lt;const ValueType&gt; return_types) {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1Signature.html#a942da5a0719940e9f38423bf33b94f2d">FunctionSig::Builder</a> builder(zone, return_types.size(), param_types.size());</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; type : param_types) {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    builder.AddParam(type);</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; type : return_types) {</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    builder.AddReturn(type);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>  }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>  <span class="keywordflow">return</span> builder.Get();</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>}</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="keyword">class </span>BodyGen;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="keyword">using </span>GenerateFn = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">void</a> (BodyGen::*)(DataRange*);</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="keyword">using </span>GenerateFnWithHeap = <a class="code hl_variable" href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">bool</a> (BodyGen::*)(HeapType, DataRange*, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a0c67c72a110565d42e5d85da22aa24b8">Nullability</a>);</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span><span class="comment">// GeneratorAlternativesPerOption allows to statically precompute the generator</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span><span class="comment">// arrays for different {WasmModuleGenerationOptions}.</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span><span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> kNumMVP, <span class="keywordtype">size_t</span> kAdditionalSimd, <span class="keywordtype">size_t</span> kAdditionalWasmGC&gt;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span><span class="keyword">class </span>GeneratorAlternativesPerOption {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a350391907af9374e9d5d234a4fbdf28c">  358</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="random-module-generation_8cc.html#a350391907af9374e9d5d234a4fbdf28c">kNumSimd</a> = kNumMVP + kAdditionalSimd;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aa2ba9de4987a7b6a862edef143709d4c">  359</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="random-module-generation_8cc.html#aa2ba9de4987a7b6a862edef143709d4c">kNumWasmGC</a> = kNumMVP + kAdditionalWasmGC;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a324141a60da2e86bb1c8bdd5f188a04d">  360</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="random-module-generation_8cc.html#a324141a60da2e86bb1c8bdd5f188a04d">kNumAll</a> = <a class="code hl_variable" href="random-module-generation_8cc.html#a350391907af9374e9d5d234a4fbdf28c">kNumSimd</a> + kAdditionalWasmGC;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>  <span class="keyword">constexpr</span> GeneratorAlternativesPerOption(</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>      std::array&lt;GenerateFn, kNumMVP&gt; mvp,</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>      std::array&lt;GenerateFn, kAdditionalSimd&gt; simd,</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>      std::array&lt;GenerateFn, kAdditionalWasmGC&gt; wasmgc)</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>      : <a class="code hl_variable" href="random-module-generation_8cc.html#a723f251054e3378bc8eb00ef06814a29">mvp_</a>(mvp),</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#af27affada9db864b4559c1fc5db5f080">simd_</a>(ConcatArrays(mvp, simd)),</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#ad0f2e5a74f7c7d3cf8b663783bcc7288">wasmgc_</a>(ConcatArrays(mvp, wasmgc)),</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a5835e909f16378f32c44f2381f9173f9">all_</a>(ConcatArrays(mvp, ConcatArrays(simd, wasmgc))) {}</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <span class="keyword">constexpr</span> base::Vector&lt;const GenerateFn&gt; GetAlternatives(</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>      WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>.ToIntegral()) {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>      <span class="keywordflow">case</span> 0:  <span class="comment">// 0</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="keywordflow">return</span> base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#a723f251054e3378bc8eb00ef06814a29">mvp_</a>);</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>      <span class="keywordflow">case</span> 1 &lt;&lt; kGenerateSIMD:  <span class="comment">// 1</span></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <span class="keywordflow">return</span> base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#af27affada9db864b4559c1fc5db5f080">simd_</a>);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>      <span class="keywordflow">case</span> 1 &lt;&lt; kGenerateWasmGC:  <span class="comment">// 2</span></div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <span class="keywordflow">return</span> base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#ad0f2e5a74f7c7d3cf8b663783bcc7288">wasmgc_</a>);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>      <span class="keywordflow">case</span> (1 &lt;&lt; kGenerateSIMD) | (1 &lt;&lt; kGenerateWasmGC):  <span class="comment">// 3</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        return <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a>::<a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">VectorOf</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a5835e909f16378f32c44f2381f9173f9">all_</a>);</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    }</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a723f251054e3378bc8eb00ef06814a29">  388</a></span>  <span class="keyword">const</span> std::array&lt;GenerateFn, kNumMVP&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#a723f251054e3378bc8eb00ef06814a29">mvp_</a>;</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#af27affada9db864b4559c1fc5db5f080">  389</a></span>  <span class="keyword">const</span> std::array&lt;GenerateFn, kNumSimd&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#af27affada9db864b4559c1fc5db5f080">simd_</a>;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#ad0f2e5a74f7c7d3cf8b663783bcc7288">  390</a></span>  <span class="keyword">const</span> std::array&lt;GenerateFn, kNumWasmGC&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#ad0f2e5a74f7c7d3cf8b663783bcc7288">wasmgc_</a>;</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a5835e909f16378f32c44f2381f9173f9">  391</a></span>  <span class="keyword">const</span> std::array&lt;GenerateFn, kNumAll&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#a5835e909f16378f32c44f2381f9173f9">all_</a>;</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>};</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="comment">// Deduction guide for the GeneratorAlternativesPerOption template.</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span><span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> kNumMVP, <span class="keywordtype">size_t</span> kAdditionalSimd, <span class="keywordtype">size_t</span> kAdditionalWasmGC&gt;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>GeneratorAlternativesPerOption(std::array&lt;GenerateFn, kNumMVP&gt;,</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>                               std::array&lt;GenerateFn, kAdditionalSimd&gt;,</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>                               std::array&lt;GenerateFn, kAdditionalWasmGC&gt;)</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    -&gt; GeneratorAlternativesPerOption&lt;kNumMVP, kAdditionalSimd,</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                                      kAdditionalWasmGC&gt;;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="keyword">class </span>BodyGen {</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>  <span class="keyword">template</span> &lt;<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a> Op, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a>... Args&gt;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>  <span class="keywordtype">void</span> op(DataRange* data) {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    Generate&lt;Args...&gt;(<a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(Op);</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>  }</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span> </div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  <span class="keyword">class </span><a class="code hl_define" href="v8config_8h.html#ae5350bf5d731891583a34f9c8c52b532">V8_NODISCARD</a> BlockScope {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>   <span class="keyword">public</span>:</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    BlockScope(BodyGen* <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>, WasmOpcode block_type,</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>               base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>               base::Vector&lt;const ValueType&gt; result_types,</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>               base::Vector&lt;const ValueType&gt; br_types, <span class="keywordtype">bool</span> emit_end = <span class="keyword">true</span>)</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        : <a class="code hl_variable" href="random-module-generation_8cc.html#aa87e407bf6ffd8b3638670d86b1f34ad">gen_</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>), <a class="code hl_variable" href="random-module-generation_8cc.html#a5a523a340e5ba1ff538b0a46638aa90b">emit_end_</a>(emit_end) {</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;blocks_.emplace_back(br_types.begin(), br_types.end());</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;builder_-&gt;EmitByte(block_type);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span> </div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>      if (param_types.size() == 0 &amp;&amp; result_types.size() == 0) {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        gen-&gt;builder_-&gt;EmitValueType(kWasmVoid);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        return;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>      }</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>      if (param_types.size() == 0 &amp;&amp; result_types.size() == 1) {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        gen-&gt;builder_-&gt;EmitValueType(result_types[0]);</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        return;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>      }</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>      <span class="comment">// Multi-value block.</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>      <a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* zone = <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;builder_-&gt;builder()-&gt;zone();</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>      FunctionSig::Builder builder(zone, result_types.size(),</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>                                   param_types.size());</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>      for (<span class="keyword">auto</span>&amp; type : param_types) {</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(type, kWasmVoid);</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        builder.AddParam(type);</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>      }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; type : result_types) {</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(type, kWasmVoid);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        builder.AddReturn(type);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>      }</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>      <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = builder.Get();</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> is_final = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>      ModuleTypeIndex sig_id =</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>          <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;builder_-&gt;builder()-&gt;AddSignature(sig, is_final);</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;builder_-&gt;EmitI32V(sig_id);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    ~BlockScope() {</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="random-module-generation_8cc.html#a5a523a340e5ba1ff538b0a46638aa90b">emit_end_</a>) <a class="code hl_variable" href="random-module-generation_8cc.html#aa87e407bf6ffd8b3638670d86b1f34ad">gen_</a>-&gt;builder_-&gt;Emit(kExprEnd);</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#aa87e407bf6ffd8b3638670d86b1f34ad">gen_</a>-&gt;blocks_.pop_back();</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    }</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>   <span class="keyword">private</span>:</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aa87e407bf6ffd8b3638670d86b1f34ad">  452</a></span>    BodyGen* <span class="keyword">const</span> <a class="code hl_variable" href="random-module-generation_8cc.html#aa87e407bf6ffd8b3638670d86b1f34ad">gen_</a>;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a5a523a340e5ba1ff538b0a46638aa90b">  453</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="random-module-generation_8cc.html#a5a523a340e5ba1ff538b0a46638aa90b">emit_end_</a>;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  };</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keywordtype">void</span> <a class="code hl_variable" href="jump-threading_8cc.html#a32270f820477d0234549c564c87eb009">block</a>(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>             base::Vector&lt;const ValueType&gt; return_types, DataRange* data) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    BlockScope block_scope(<span class="keyword">this</span>, kExprBlock, param_types, return_types,</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>                           return_types);</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    ConsumeAndGenerate(param_types, return_types, data);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>  }</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>  <span class="keyword">template</span> &lt;ValueKind T&gt;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  <span class="keywordtype">void</span> <a class="code hl_variable" href="jump-threading_8cc.html#a32270f820477d0234549c564c87eb009">block</a>(DataRange* data) {</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (T == kVoid) {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>      <a class="code hl_variable" href="jump-threading_8cc.html#a32270f820477d0234549c564c87eb009">block</a>({}, {}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>      <a class="code hl_variable" href="jump-threading_8cc.html#a32270f820477d0234549c564c87eb009">block</a>({}, base::VectorOf({ValueType::Primitive(T)}), data);</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    }</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>  }</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>  <span class="keywordtype">void</span> loop(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>            base::Vector&lt;const ValueType&gt; return_types, DataRange* data) {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    BlockScope block_scope(<span class="keyword">this</span>, kExprLoop, param_types, return_types,</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                           param_types);</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    ConsumeAndGenerate(param_types, return_types, data);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>  }</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span> </div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>  <span class="keyword">template</span> &lt;ValueKind T&gt;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>  <span class="keywordtype">void</span> loop(DataRange* data) {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (T == kVoid) {</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>      loop({}, {}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>      loop({}, base::VectorOf({ValueType::Primitive(T)}), data);</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    }</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>  }</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>  <span class="keywordtype">void</span> finite_loop(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>                   base::Vector&lt;const ValueType&gt; return_types,</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>                   DataRange* data) {</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="comment">// int counter = `kLoopConstant`;</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="keywordtype">int</span> kLoopConstant = data-&gt;get&lt;uint8_t&gt;() % 8 + 1;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    uint32_t counter = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddLocal(kWasmI32);</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(kLoopConstant);</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitSetLocal(counter);</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="comment">// begin loop {</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    BlockScope loop_scope(<span class="keyword">this</span>, kExprLoop, param_types, return_types,</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>                          param_types);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="comment">//   Consume the parameters:</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <span class="comment">//   Resetting locals in each iteration can create interesting loop-phis.</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <span class="comment">// TODO(evih): Iterate through existing locals and try to reuse them instead</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    <span class="comment">// of creating new locals.</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = param_types.rbegin(); it != param_types.rend(); it++) {</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>      uint32_t local = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddLocal(*it);</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitSetLocal(local);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    <span class="comment">//   Loop body.</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    Generate(kWasmVoid, data);</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span> </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <span class="comment">//   Decrement the counter.</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitGetLocal(counter);</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(1);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprI32Sub);</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitTeeLocal(counter);</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span> </div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    <span class="comment">//   If there is another iteration, generate new parameters for the loop and</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="comment">//   go to the beginning of the loop.</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    {</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>      BlockScope if_scope(<span class="keyword">this</span>, kExprIf, {}, {}, {});</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>      Generate(param_types, data);</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(kExprBr, 1);</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    }</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="comment">//   Otherwise, generate the return types.</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    Generate(return_types, data);</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="comment">// } end loop</span></div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>  }</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>  <span class="keyword">template</span> &lt;ValueKind T&gt;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>  <span class="keywordtype">void</span> finite_loop(DataRange* data) {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (T == kVoid) {</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>      finite_loop({}, {}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>      finite_loop({}, base::VectorOf({ValueType::Primitive(T)}), data);</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    }</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>  }</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  <span class="keyword">enum</span> IfType { kIf, kIfElse };</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span> </div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>  <span class="keywordtype">void</span> if_(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>           base::Vector&lt;const ValueType&gt; return_types, IfType type,</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>           DataRange* data) {</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="comment">// One-armed &quot;if&quot; are only valid if the input and output types are the same.</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(type == kIf, param_types == return_types);</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    BlockScope block_scope(<span class="keyword">this</span>, kExprIf, param_types, return_types,</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                           return_types);</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    ConsumeAndGenerate(param_types, return_types, data);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keywordflow">if</span> (type == kIfElse) {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprElse);</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>      ConsumeAndGenerate(param_types, return_types, data);</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    }</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>  }</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>  <span class="keyword">template</span> &lt;ValueKind T, IfType type&gt;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>  <span class="keywordtype">void</span> if_(DataRange* data) {</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="keyword">static_assert</span>(T == kVoid || type == kIfElse,</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>                  <span class="stringliteral">&quot;if without else cannot produce a value&quot;</span>);</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    if_({},</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        T == kVoid ? base::Vector&lt;ValueType&gt;{}</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                   : base::VectorOf({ValueType::Primitive(T)}),</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        type, data);</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>  }</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <span class="keywordtype">void</span> try_block_helper(ValueType return_type, DataRange* data) {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordtype">bool</span> has_catch_all = data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    uint8_t num_catch =</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        data-&gt;get&lt;uint8_t&gt;() % (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTags() + 1);</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="keywordtype">bool</span> is_delegate = num_catch == 0 &amp;&amp; !has_catch_all &amp;&amp; data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    <span class="comment">// Allow one more target than there are enclosing try blocks, for delegating</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <span class="comment">// to the caller.</span></div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    base::Vector&lt;const ValueType&gt; return_type_vec =</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        return_type.kind() == kVoid ? base::Vector&lt;ValueType&gt;{}</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>                                    : base::VectorOf(&amp;return_type, 1);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    BlockScope block_scope(<span class="keyword">this</span>, kExprTry, {}, return_type_vec, return_type_vec,</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>                           !is_delegate);</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    <span class="keywordtype">int</span> control_depth = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size()) - 1;</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    Generate(return_type, data);</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <a class="code hl_variable" href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383">catch_blocks_</a>.push_back(control_depth);</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_catch; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* exception_type = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetTagType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprCatch, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>      ConsumeAndGenerate(exception_type-&gt;parameters(), return_type_vec, data);</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    }</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="keywordflow">if</span> (has_catch_all) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprCatchAll);</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>      Generate(return_type, data);</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    }</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    <span class="keywordflow">if</span> (is_delegate) {</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>      <span class="comment">// The delegate target depth does not include the current try block,</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>      <span class="comment">// because &#39;delegate&#39; closes this scope. However it is still in the</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>      <span class="comment">// {blocks_} list, so remove one to get the correct size.</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>      <span class="keywordtype">int</span> delegate_depth = data-&gt;get&lt;uint8_t&gt;() % (<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size() - 1);</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprDelegate, delegate_depth);</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    }</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <a class="code hl_variable" href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383">catch_blocks_</a>.pop_back();</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>  }</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <span class="keyword">template</span> &lt;ValueKind T&gt;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>  <span class="keywordtype">void</span> try_block(DataRange* data) {</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    try_block_helper(ValueType::Primitive(T), data);</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>  }</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>  <span class="keyword">struct </span>CatchCase {</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#ad8f4702189f9e9e0bde8bfc1804dc17e">  608</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="random-module-generation_8cc.html#ad8f4702189f9e9e0bde8bfc1804dc17e">tag_index</a>;</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a711aad1a9dc45ea13da448b73eb0d4ce">  609</a></span>    CatchKind <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>;</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>  };</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>  <span class="comment">// Generates the i-th nested block for the try-table, and recursively generate</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>  <span class="comment">// the blocks inside it.</span></div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>  <span class="keywordtype">void</span> try_table_rec(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>                     base::Vector&lt;const ValueType&gt; return_types,</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>                     base::Vector&lt;CatchCase&gt; catch_cases, <span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>,</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>                     DataRange* data) {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_exnref);</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> == catch_cases.<a class="code hl_class" href="classsize.html">size</a>()) {</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>      <span class="comment">// Base case: emit the try-table itself.</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprTryTable);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.emplace_back(return_types.begin(), return_types.end());</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> is_final = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>      ModuleTypeIndex try_sig_index = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;AddSignature(</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>          CreateSignature(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;zone(), param_types,</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                          return_types),</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>          is_final);</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32V(try_sig_index);</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(catch_cases.size()));</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; catch_cases.size(); ++j) {</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(catch_cases[j].kind);</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        <span class="keywordflow">if</span> (catch_cases[j].kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216baff69f39b7a9438cb910f880f18c1cdd6">kCatch</a> || catch_cases[j].kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216bafa1ba0e2dab1705e69b17c28d625a24e">kCatchRef</a>) {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(catch_cases[j].<a class="code hl_variable" href="random-module-generation_8cc.html#ad8f4702189f9e9e0bde8bfc1804dc17e">tag_index</a>);</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        }</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(catch_cases.size() - j - 1);</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>      }</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>      ConsumeAndGenerate(param_types, return_types, data);</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprEnd);</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.pop_back();</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(kExprBr, <span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a><span class="keyword">&gt;</span>(catch_cases.size()));</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    }</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="comment">// Enter the i-th nested block. The signature of the block is built as</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <span class="comment">// follows:</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <span class="comment">// - The input types are the same for each block, the operands are forwarded</span></div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <span class="comment">// as-is to the inner try-table.</span></div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="comment">// - The output types can be empty, or contain the tag types and/or an</span></div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <span class="comment">// exnref depending on the catch kind</span></div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* type =</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetTagType(catch_cases[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].<a class="code hl_variable" href="random-module-generation_8cc.html#ad8f4702189f9e9e0bde8bfc1804dc17e">tag_index</a>);</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    <span class="keywordtype">int</span> has_tag =</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        catch_cases[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216bafa1ba0e2dab1705e69b17c28d625a24e">kCatchRef</a> || catch_cases[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216baff69f39b7a9438cb910f880f18c1cdd6">kCatch</a>;</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <span class="keywordtype">int</span> has_ref =</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>        catch_cases[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216ba6254a60dc5f00707ae4502266106a812">kCatchAllRef</a> || catch_cases[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216bafa1ba0e2dab1705e69b17c28d625a24e">kCatchRef</a>;</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <span class="keywordtype">size_t</span> return_count =</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        (has_tag ? type-&gt;parameter_count() : 0) + (has_ref ? 1 : 0);</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <span class="keyword">auto</span> block_returns =</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;zone()-&gt;AllocateVector&lt;ValueType&gt;(return_count);</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <span class="keywordflow">if</span> (has_tag) {</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>      std::copy_n(type-&gt;parameters().begin(), type-&gt;parameter_count(),</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                  block_returns.begin());</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    }</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <span class="keywordflow">if</span> (has_ref) block_returns.last() = <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a2a400b63126e2b506bf2cbc1ea9e0e91">kWasmExnRef</a>;</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    {</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>      BlockScope <a class="code hl_variable" href="jump-threading_8cc.html#a32270f820477d0234549c564c87eb009">block</a>(<span class="keyword">this</span>, kExprBlock, param_types, block_returns,</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                       block_returns);</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>      try_table_rec(param_types, return_types, catch_cases, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> + 1, data);</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    }</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <span class="comment">// Catch label. Consume the unpacked values and exnref (if any), produce</span></div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="comment">// values that match the outer scope, and branch to it.</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    ConsumeAndGenerate(block_returns, return_types, data);</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprBr, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>  }</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span> </div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>  <span class="keywordtype">void</span> try_table_block_helper(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                              base::Vector&lt;const ValueType&gt; return_types,</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>                              DataRange* data) {</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    uint8_t num_catch = data-&gt;get&lt;uint8_t&gt;() % kMaxCatchCases;</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="keyword">auto</span> catch_cases =</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;zone()-&gt;AllocateVector&lt;CatchCase&gt;(num_catch);</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_catch; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>      catch_cases[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].tag_index =</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>          data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTags();</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>      catch_cases[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].kind =</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>          <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216b">CatchKind</a><span class="keyword">&gt;</span>(data-&gt;get&lt;uint8_t&gt;() % (<a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216bac2407cd5ed424cc380aca94bada02f1a">kLastCatchKind</a> + 1));</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    }</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span> </div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    BlockScope block_scope(<span class="keyword">this</span>, kExprBlock, param_types, return_types,</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>                           return_types);</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    try_table_rec(param_types, return_types, catch_cases, 0, data);</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>  }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span> </div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>  <span class="keyword">template</span> &lt;ValueKind T&gt;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>  <span class="keywordtype">void</span> try_table_block(DataRange* data) {</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    ValueType return_types_arr[1] = {ValueType::Primitive(T)};</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <span class="keyword">auto</span> return_types = base::VectorOf(return_types_arr, T == kVoid ? 0 : 1);</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_exnref) {</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>      <span class="comment">// Can&#39;t generate a try_table block. Just generate something else.</span></div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>      any_block({}, return_types, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    }</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    try_table_block_helper({}, return_types, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>  }</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span> </div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>  <span class="keywordtype">void</span> any_block(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>                 base::Vector&lt;const ValueType&gt; return_types, DataRange* data) {</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    uint8_t available_cases = <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_exnref ? 6 : 5;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>    uint8_t block_type = data-&gt;get&lt;uint8_t&gt;() % available_cases;</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="keywordflow">switch</span> (block_type) {</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>      <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>        <a class="code hl_variable" href="jump-threading_8cc.html#a32270f820477d0234549c564c87eb009">block</a>(param_types, return_types, data);</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>      <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>        loop(param_types, return_types, data);</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>      <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>        finite_loop(param_types, return_types, data);</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>      <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        <span class="keywordflow">if</span> (param_types == return_types) {</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>          if_({}, {}, kIf, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>        }</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        [[fallthrough]];</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>      <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>        if_(param_types, return_types, kIfElse, data);</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>      <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        try_table_block_helper(param_types, return_types, data);</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    }</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>  }</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span> </div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>  <span class="keywordtype">void</span> br(DataRange* data) {</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    <span class="comment">// There is always at least the block representing the function body.</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.empty());</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    <span class="keyword">const</span> uint32_t target_block = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size();</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    <span class="keyword">const</span> <span class="keyword">auto</span> break_types = base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>[target_block]);</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span> </div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    Generate(break_types, data);</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>        kExprBr, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size()) - 1 - target_block);</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>  }</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span> </div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>  <span class="keywordtype">void</span> br_if(DataRange* data) {</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>    <span class="comment">// There is always at least the block representing the function body.</span></div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.empty());</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    <span class="keyword">const</span> uint32_t target_block = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size();</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    <span class="keyword">const</span> <span class="keyword">auto</span> break_types = base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>[target_block]);</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    Generate(break_types, data);</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        kExprBrIf, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size()) - 1 - target_block);</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    ConsumeAndGenerate(</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        break_types,</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        wanted_kind == kVoid</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>            ? base::Vector&lt;ValueType&gt;{}</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>            : base::VectorOf({ValueType::Primitive(wanted_kind)}),</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        data);</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>  }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span> </div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>  <span class="keywordtype">void</span> br_on_null(DataRange* data) {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.empty());</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    <span class="keyword">const</span> uint32_t target_block = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size();</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    <span class="keyword">const</span> <span class="keyword">auto</span> break_types = base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>[target_block]);</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    Generate(break_types, data);</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    GenerateRef(data);</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>        kExprBrOnNull,</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>        <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size()) - 1 - target_block);</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprDrop);</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    ConsumeAndGenerate(</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>        break_types,</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>        wanted_kind == kVoid</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>            ? base::Vector&lt;ValueType&gt;{}</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>            : base::VectorOf({ValueType::Primitive(wanted_kind)}),</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        data);</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>  }</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span> </div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>  <span class="keywordtype">void</span> br_on_non_null(DataRange* data) {</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.empty());</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    <span class="keyword">const</span> uint32_t target_block = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size();</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    <span class="keyword">const</span> <span class="keyword">auto</span> break_types = base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>[target_block]);</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    <span class="keywordflow">if</span> (break_types.empty() ||</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        !break_types[break_types.size() - 1].is_reference()) {</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>      <span class="comment">// Invalid break_types for br_on_non_null.</span></div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>      Generate&lt;wanted_kind&gt;(data);</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    }</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    Generate(break_types, data);</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        kExprBrOnNonNull,</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>        <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size()) - 1 - target_block);</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    ConsumeAndGenerate(</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        break_types.SubVector(0, break_types.size() - 1),</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        wanted_kind == kVoid</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>            ? base::Vector&lt;ValueType&gt;{}</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>            : base::VectorOf({ValueType::Primitive(wanted_kind)}),</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        data);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>  }</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span> </div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>  <span class="keywordtype">void</span> br_table(ValueType result_type, DataRange* data) {</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <span class="keyword">const</span> uint8_t block_count = 1 + data-&gt;get&lt;uint8_t&gt;() % 8;</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    <span class="comment">// Generate the block entries.</span></div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <a class="code hl_typedef" href="namespaceunibrow.html#abcc5d3424c551c568df4199a48bea1c2">uint16_t</a> entry_bits =</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        block_count &gt; 4 ? data-&gt;get&lt;<a class="code hl_typedef" href="namespaceunibrow.html#abcc5d3424c551c568df4199a48bea1c2">uint16_t</a>&gt;() : data-&gt;get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; block_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprBlock);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitValueType(result_type);</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.emplace_back();</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>      <span class="keywordflow">if</span> (result_type != kWasmVoid) {</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.back().push_back(result_type);</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>      }</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>      <span class="comment">// There can be additional instructions in each block.</span></div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>      <span class="comment">// Only generate it with a 25% chance as it&#39;s otherwise quite unlikely to</span></div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>      <span class="comment">// have enough random bytes left for the br_table instruction.</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>      <span class="keywordflow">if</span> ((entry_bits &amp; 3) == 3) {</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>        Generate(kWasmVoid, data);</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>      }</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>      entry_bits &gt;&gt;= 2;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    }</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    <span class="comment">// Generate the br_table.</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    Generate(result_type, data);</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprBrTable);</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>    uint32_t entry_count = 1 + data-&gt;get&lt;uint8_t&gt;() % 8;</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(entry_count);</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; entry_count + 1; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(data-&gt;get&lt;uint8_t&gt;() % block_count);</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>    }</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    <span class="comment">// Generate the block ends.</span></div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    uint8_t exit_bits = result_type == <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a2ac79dbfe69c6fd62cfb7bacb43ad583">kWasmVoid</a> ? 0 : data-&gt;get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; block_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>      <span class="keywordflow">if</span> (exit_bits &amp; 1) {</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        <span class="comment">// Drop and generate new value.</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprDrop);</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        Generate(result_type, data);</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>      }</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>      exit_bits &gt;&gt;= 1;</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprEnd);</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.pop_back();</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    }</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>  }</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span> </div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>  <span class="keywordtype">void</span> br_table(DataRange* data) {</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    br_table(</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>        wanted_kind == kVoid ? kWasmVoid : ValueType::Primitive(wanted_kind),</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>        data);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>  }</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span> </div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>  <span class="keywordtype">void</span> return_op(DataRange* data) {</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    <span class="keyword">auto</span> returns = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;returns();</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    Generate(returns, data);</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprReturn);</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>  }</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span> </div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>  <span class="keyword">constexpr</span> <span class="keyword">static</span> uint8_t max_alignment(WasmOpcode memop) {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    <span class="keywordflow">switch</span> (memop) {</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>      <span class="keywordflow">case</span> kExprS128LoadMem:</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>      <span class="keywordflow">case</span> kExprS128StoreMem:</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        <span class="keywordflow">return</span> 4;</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>      <span class="keywordflow">case</span> kExprI64LoadMem:</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>      <span class="keywordflow">case</span> kExprF64LoadMem:</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>      <span class="keywordflow">case</span> kExprI64StoreMem:</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>      <span class="keywordflow">case</span> kExprF64StoreMem:</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>      <span class="keywordflow">case</span> kExprI64AtomicStore:</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>      <span class="keywordflow">case</span> kExprI64AtomicLoad:</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>      <span class="keywordflow">case</span> kExprI64AtomicAdd:</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>      <span class="keywordflow">case</span> kExprI64AtomicSub:</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>      <span class="keywordflow">case</span> kExprI64AtomicAnd:</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>      <span class="keywordflow">case</span> kExprI64AtomicOr:</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>      <span class="keywordflow">case</span> kExprI64AtomicXor:</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>      <span class="keywordflow">case</span> kExprI64AtomicExchange:</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>      <span class="keywordflow">case</span> kExprI64AtomicCompareExchange:</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>      <span class="keywordflow">case</span> kExprS128Load8x8S:</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>      <span class="keywordflow">case</span> kExprS128Load8x8U:</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>      <span class="keywordflow">case</span> kExprS128Load16x4S:</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>      <span class="keywordflow">case</span> kExprS128Load16x4U:</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>      <span class="keywordflow">case</span> kExprS128Load32x2S:</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>      <span class="keywordflow">case</span> kExprS128Load32x2U:</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>      <span class="keywordflow">case</span> kExprS128Load64Splat:</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>      <span class="keywordflow">case</span> kExprS128Load64Zero:</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordflow">return</span> 3;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>      <span class="keywordflow">case</span> kExprI32LoadMem:</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>      <span class="keywordflow">case</span> kExprI64LoadMem32S:</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>      <span class="keywordflow">case</span> kExprI64LoadMem32U:</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>      <span class="keywordflow">case</span> kExprF32LoadMem:</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>      <span class="keywordflow">case</span> kExprI32StoreMem:</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>      <span class="keywordflow">case</span> kExprI64StoreMem32:</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>      <span class="keywordflow">case</span> kExprF32StoreMem:</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>      <span class="keywordflow">case</span> kExprI32AtomicStore:</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>      <span class="keywordflow">case</span> kExprI64AtomicStore32U:</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>      <span class="keywordflow">case</span> kExprI32AtomicLoad:</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>      <span class="keywordflow">case</span> kExprI64AtomicLoad32U:</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>      <span class="keywordflow">case</span> kExprI32AtomicAdd:</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>      <span class="keywordflow">case</span> kExprI32AtomicSub:</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>      <span class="keywordflow">case</span> kExprI32AtomicAnd:</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>      <span class="keywordflow">case</span> kExprI32AtomicOr:</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>      <span class="keywordflow">case</span> kExprI32AtomicXor:</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>      <span class="keywordflow">case</span> kExprI32AtomicExchange:</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>      <span class="keywordflow">case</span> kExprI32AtomicCompareExchange:</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>      <span class="keywordflow">case</span> kExprI64AtomicAdd32U:</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>      <span class="keywordflow">case</span> kExprI64AtomicSub32U:</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>      <span class="keywordflow">case</span> kExprI64AtomicAnd32U:</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>      <span class="keywordflow">case</span> kExprI64AtomicOr32U:</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>      <span class="keywordflow">case</span> kExprI64AtomicXor32U:</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>      <span class="keywordflow">case</span> kExprI64AtomicExchange32U:</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>      <span class="keywordflow">case</span> kExprI64AtomicCompareExchange32U:</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>      <span class="keywordflow">case</span> kExprS128Load32Splat:</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>      <span class="keywordflow">case</span> kExprS128Load32Zero:</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        <span class="keywordflow">return</span> 2;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>      <span class="keywordflow">case</span> kExprI32LoadMem16S:</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>      <span class="keywordflow">case</span> kExprI32LoadMem16U:</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>      <span class="keywordflow">case</span> kExprI64LoadMem16S:</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>      <span class="keywordflow">case</span> kExprI64LoadMem16U:</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>      <span class="keywordflow">case</span> kExprI32StoreMem16:</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>      <span class="keywordflow">case</span> kExprI64StoreMem16:</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>      <span class="keywordflow">case</span> kExprI32AtomicStore16U:</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>      <span class="keywordflow">case</span> kExprI64AtomicStore16U:</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>      <span class="keywordflow">case</span> kExprI32AtomicLoad16U:</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>      <span class="keywordflow">case</span> kExprI64AtomicLoad16U:</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>      <span class="keywordflow">case</span> kExprI32AtomicAdd16U:</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>      <span class="keywordflow">case</span> kExprI32AtomicSub16U:</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>      <span class="keywordflow">case</span> kExprI32AtomicAnd16U:</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>      <span class="keywordflow">case</span> kExprI32AtomicOr16U:</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>      <span class="keywordflow">case</span> kExprI32AtomicXor16U:</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>      <span class="keywordflow">case</span> kExprI32AtomicExchange16U:</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>      <span class="keywordflow">case</span> kExprI32AtomicCompareExchange16U:</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>      <span class="keywordflow">case</span> kExprI64AtomicAdd16U:</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>      <span class="keywordflow">case</span> kExprI64AtomicSub16U:</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>      <span class="keywordflow">case</span> kExprI64AtomicAnd16U:</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>      <span class="keywordflow">case</span> kExprI64AtomicOr16U:</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>      <span class="keywordflow">case</span> kExprI64AtomicXor16U:</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>      <span class="keywordflow">case</span> kExprI64AtomicExchange16U:</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>      <span class="keywordflow">case</span> kExprI64AtomicCompareExchange16U:</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>      <span class="keywordflow">case</span> kExprS128Load16Splat:</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>      <span class="keywordflow">case</span> kExprI32LoadMem8S:</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>      <span class="keywordflow">case</span> kExprI32LoadMem8U:</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>      <span class="keywordflow">case</span> kExprI64LoadMem8S:</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>      <span class="keywordflow">case</span> kExprI64LoadMem8U:</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>      <span class="keywordflow">case</span> kExprI32StoreMem8:</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>      <span class="keywordflow">case</span> kExprI64StoreMem8:</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>      <span class="keywordflow">case</span> kExprI32AtomicStore8U:</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>      <span class="keywordflow">case</span> kExprI64AtomicStore8U:</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>      <span class="keywordflow">case</span> kExprI32AtomicLoad8U:</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>      <span class="keywordflow">case</span> kExprI64AtomicLoad8U:</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>      <span class="keywordflow">case</span> kExprI32AtomicAdd8U:</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>      <span class="keywordflow">case</span> kExprI32AtomicSub8U:</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>      <span class="keywordflow">case</span> kExprI32AtomicAnd8U:</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>      <span class="keywordflow">case</span> kExprI32AtomicOr8U:</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>      <span class="keywordflow">case</span> kExprI32AtomicXor8U:</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>      <span class="keywordflow">case</span> kExprI32AtomicExchange8U:</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>      <span class="keywordflow">case</span> kExprI32AtomicCompareExchange8U:</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>      <span class="keywordflow">case</span> kExprI64AtomicAdd8U:</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>      <span class="keywordflow">case</span> kExprI64AtomicSub8U:</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>      <span class="keywordflow">case</span> kExprI64AtomicAnd8U:</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>      <span class="keywordflow">case</span> kExprI64AtomicOr8U:</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>      <span class="keywordflow">case</span> kExprI64AtomicXor8U:</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>      <span class="keywordflow">case</span> kExprI64AtomicExchange8U:</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>      <span class="keywordflow">case</span> kExprI64AtomicCompareExchange8U:</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>      <span class="keywordflow">case</span> kExprS128Load8Splat:</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    }</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>  }</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span> </div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>  <span class="keyword">template</span> &lt;<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a> memory_op, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a>... arg_kinds&gt;</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>  <span class="keywordtype">void</span> memop(DataRange* data) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>    <span class="comment">// Atomic operations need to be aligned exactly to their max alignment.</span></div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_atomic = memory_op &gt;&gt; 8 == kAtomicPrefix;</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    <span class="keyword">const</span> uint8_t align = is_atomic ? max_alignment(memory_op)</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                                    : data-&gt;getPseudoRandom&lt;uint8_t&gt;() %</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                                          (max_alignment(memory_op) + 1);</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>    uint8_t memory_index =</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumMemories();</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span> </div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>    uint64_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> = data-&gt;get&lt;<a class="code hl_typedef" href="namespaceunibrow.html#abcc5d3424c551c568df4199a48bea1c2">uint16_t</a>&gt;();</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    <span class="comment">// With a 1/256 chance generate potentially very large offsets.</span></div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> &amp; 0xff) == 0xff) {</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsMemory64(memory_index)</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                   ? data-&gt;getPseudoRandom&lt;uint64_t&gt;() &amp; 0x1ffffffff</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                   : data-&gt;getPseudoRandom&lt;uint32_t&gt;();</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    }</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span> </div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>    <span class="comment">// Generate the index and the arguments, if any.</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsMemory64(memory_index)</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>        ? Generate&lt;kI64, arg_kinds...&gt;(data)</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        : Generate&lt;kI32, arg_kinds...&gt;(data);</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span> </div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    <span class="comment">// Format of the instruction (supports multi-memory):</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    <span class="comment">// memory_op (align | 0x40) memory_index offset</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    <span class="keywordflow">if</span> (WasmOpcodes::IsPrefixOpcode(<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a><span class="keyword">&gt;</span>(memory_op &gt;&gt; 8))) {</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(memory_op &gt;&gt; 8 == kAtomicPrefix || memory_op &gt;&gt; 8 == kSimdPrefix);</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(memory_op);</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(memory_op);</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>    }</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(align | 0x40);</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(memory_index);</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU64V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>);</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>  }</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span> </div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>  <span class="keyword">template</span> &lt;<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a> Op, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a>... Args&gt;</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>  <span class="keywordtype">void</span> op_with_prefix(DataRange* data) {</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    Generate&lt;Args...&gt;(<a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(Op);</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>  }</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>  <span class="keywordtype">void</span> simd_const(DataRange* data) {</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprS128Const);</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a1ac5aaec8d986abe45d958e665beb21a">kSimd128Size</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(data-&gt;getPseudoRandom&lt;uint8_t&gt;());</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    }</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>  }</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span> </div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>  <span class="keyword">template</span> &lt;<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a> Op, <span class="keywordtype">int</span> lanes, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a>... Args&gt;</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>  <span class="keywordtype">void</span> simd_lane_op(DataRange* data) {</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    Generate&lt;Args...&gt;(<a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(Op);</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(data-&gt;get&lt;uint8_t&gt;() % lanes);</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>  }</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span> </div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>  <span class="keyword">template</span> &lt;<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a> Op, <span class="keywordtype">int</span> lanes, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a>... Args&gt;</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>  <span class="keywordtype">void</span> simd_lane_memop(DataRange* data) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    <span class="comment">// Simd load/store instructions that have a lane immediate.</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    memop&lt;Op, Args...&gt;(<a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(data-&gt;get&lt;uint8_t&gt;() % lanes);</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>  }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span> </div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>  <span class="keywordtype">void</span> simd_shuffle(DataRange* data) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    Generate&lt;kS128, kS128&gt;(data);</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprI8x16Shuffle);</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a1ac5aaec8d986abe45d958e665beb21a">kSimd128Size</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(<span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(data-&gt;get&lt;uint8_t&gt;() % 32));</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>    }</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>  }</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>  <span class="keywordtype">void</span> drop(DataRange* data) {</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    Generate(</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>        GetValueType(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, data,</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>                     <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() +</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>                                           <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size())),</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        data);</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprDrop);</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>  }</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span> </div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>  <span class="keyword">enum</span> CallKind { kCallDirect, kCallIndirect, kCallRef };</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span> </div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>  <span class="keywordtype">void</span> call(DataRange* data) {</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    call(data, ValueType::Primitive(wanted_kind), kCallDirect);</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>  }</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span> </div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>  <span class="keywordtype">void</span> call_indirect(DataRange* data) {</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    call(data, ValueType::Primitive(wanted_kind), kCallIndirect);</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>  }</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span> </div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>  <span class="keywordtype">void</span> call_ref(DataRange* data) {</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    call(data, ValueType::Primitive(wanted_kind), kCallRef);</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>  }</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span> </div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>  <span class="keywordtype">void</span> Convert(ValueType src, ValueType dst) {</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    <span class="keyword">auto</span> idx = [](ValueType t) -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>      <span class="keywordflow">switch</span> (t.kind()) {</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>:</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>          <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6601e7b0f7c0f03d9ffa9f222c82e6a0">kI64</a>:</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>          <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2">kF32</a>:</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>          <span class="keywordflow">return</span> 2;</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319">kF64</a>:</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>          <span class="keywordflow">return</span> 3;</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>          <a class="code hl_define" href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>      }</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>    };</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a> kConvertOpcodes[] = {</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        <span class="comment">// {i32, i64, f32, f64} -&gt; i32</span></div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        kExprNop, kExprI32ConvertI64, kExprI32SConvertF32, kExprI32SConvertF64,</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        <span class="comment">// {i32, i64, f32, f64} -&gt; i64</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>        kExprI64SConvertI32, kExprNop, kExprI64SConvertF32, kExprI64SConvertF64,</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        <span class="comment">// {i32, i64, f32, f64} -&gt; f32</span></div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        kExprF32SConvertI32, kExprF32SConvertI64, kExprNop, kExprF32ConvertF64,</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        <span class="comment">// {i32, i64, f32, f64} -&gt; f64</span></div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>        kExprF64SConvertI32, kExprF64SConvertI64, kExprF64ConvertF32, kExprNop};</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    <span class="keywordtype">int</span> arr_idx = idx(dst) &lt;&lt; 2 | idx(src);</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kConvertOpcodes[arr_idx]);</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>  }</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span> </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>  <span class="keywordtype">int</span> choose_function_table_index(DataRange* data) {</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>    <span class="keywordtype">int</span> table_count = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTables();</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = data-&gt;get&lt;uint8_t&gt;() % table_count;</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; table_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>      <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = (<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> + <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) % table_count;</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetTableType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>).is_reference_to(</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>              HeapType::kFunc)) {</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>;</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>      }</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>    }</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(<span class="stringliteral">&quot;No funcref table found; table index 0 is expected to be funcref&quot;</span>);</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>  }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span> </div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>  <span class="keywordtype">void</span> call(DataRange* data, ValueType wanted_kind, CallKind call_kind) {</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    uint8_t random_byte = data-&gt;get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <span class="keywordtype">int</span> func_index = random_byte % <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size();</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    ModuleTypeIndex sig_index = <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>[func_index];</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetSignature(sig_index);</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>    <span class="comment">// Generate arguments.</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>      Generate(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), data);</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>    <span class="comment">// Emit call.</span></div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>    <span class="comment">// If the return types of the callee happen to match the return types of the</span></div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>    <span class="comment">// caller, generate a tail call.</span></div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    <span class="keywordtype">bool</span> use_return_call = random_byte &gt; 127;</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>    <span class="keywordflow">if</span> (use_return_call &amp;&amp;</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>        std::equal(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;returns().begin(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;returns().end(),</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>                   <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;returns().begin(),</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>                   <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;returns().end())) {</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>      <span class="keywordflow">if</span> (call_kind == kCallDirect) {</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprReturnCall,</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>                               NumImportedFunctions() + func_index);</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (call_kind == kCallIndirect) {</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>        <span class="comment">// This will not trap because table[func_index] always contains function</span></div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>        <span class="comment">// func_index.</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>        uint32_t table_index = choose_function_table_index(data);</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsTable64(table_index)</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>            ? <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI64Const(func_index)</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>            : <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(func_index);</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprReturnCallIndirect, sig_index);</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(table_index);</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>        GenerateRef(HeapType(sig_index), data);</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprReturnCallRef, sig_index);</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>      }</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>      <span class="keywordflow">if</span> (call_kind == kCallDirect) {</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprCallFunction,</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>                               NumImportedFunctions() + func_index);</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (call_kind == kCallIndirect) {</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>        <span class="comment">// This will not trap because table[func_index] always contains function</span></div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>        <span class="comment">// func_index.</span></div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>        uint32_t table_index = choose_function_table_index(data);</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsTable64(table_index)</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>            ? <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI64Const(func_index)</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            : <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(func_index);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprCallIndirect, sig_index);</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitByte(table_index);</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>        GenerateRef(HeapType(sig_index), data);</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprCallRef, sig_index);</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>      }</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>    }</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count() == 0 &amp;&amp; wanted_kind != kWasmVoid) {</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>      <span class="comment">// The call did not generate a value. Thus just generate it here.</span></div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>      Generate(wanted_kind, data);</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    }</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>    <span class="keywordflow">if</span> (wanted_kind == kWasmVoid) {</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>      <span class="comment">// The call did generate values, but we did not want one.</span></div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprDrop);</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>      }</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>    }</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>    <span class="keyword">auto</span> wanted_types =</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>        base::VectorOf(&amp;wanted_kind, wanted_kind == kWasmVoid ? 0 : 1);</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>    ConsumeAndGenerate(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;returns(), wanted_types, data);</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>  }</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span> </div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>  <span class="keyword">struct </span>Var {</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aafd95f8c7a99b9189ede7cdf0871ebe8"> 1184</a></span>    uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>;</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a916393eb4f9fcc06a8cdfe791dfb1ed8"> 1185</a></span>    ValueType type = kWasmVoid;</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>    Var() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>    Var(uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, ValueType type) : <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>), type(type) {}</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a06e9a4ee78c5afbe50af1340be80ae78">is_valid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> type != <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a2ac79dbfe69c6fd62cfb7bacb43ad583">kWasmVoid</a>; }</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>  };</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span> </div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>  Var GetRandomLocal(DataRange* data) {</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    uint32_t num_params =</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>        <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;<a class="code hl_variable" href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a>());</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    uint32_t num_locals = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>.size());</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    <span class="keywordflow">if</span> (num_params + num_locals == 0) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>    uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = data-&gt;get&lt;uint8_t&gt;() % (num_params + num_locals);</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    ValueType type = <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> &lt; num_params ? <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;GetParam(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>)</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>                                        : <a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> - num_params];</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>    <span class="keywordflow">return</span> {<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, type};</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>  }</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span> </div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>  <span class="keyword">constexpr</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> is_convertible_kind(ValueKind kind) {</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>    <span class="keywordflow">return</span> kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> || kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6601e7b0f7c0f03d9ffa9f222c82e6a0">kI64</a> || kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2">kF32</a> || kind == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319">kF64</a>;</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>  }</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span> </div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>  <span class="keywordtype">void</span> local_op(DataRange* data, WasmOpcode opcode) {</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    <span class="keyword">static_assert</span>(wanted_kind == kVoid || is_convertible_kind(wanted_kind));</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    Var local = GetRandomLocal(data);</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    <span class="comment">// If there are no locals and no parameters, just generate any value (if a</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>    <span class="comment">// value is needed), or do nothing.</span></div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>    <span class="keywordflow">if</span> (!local.is_valid() || !is_convertible_kind(local.type.kind())) {</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>      <span class="keywordflow">if</span> (wanted_kind == kVoid) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>      <span class="keywordflow">return</span> Generate&lt;wanted_kind&gt;(data);</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    }</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span> </div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>    <span class="keywordflow">if</span> (opcode != kExprLocalGet) Generate(local.type, data);</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(opcode, local.index);</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    <span class="keywordflow">if</span> (wanted_kind != kVoid &amp;&amp; local.type.kind() != wanted_kind) {</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>      Convert(local.type, ValueType::Primitive(wanted_kind));</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    }</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>  }</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  <span class="keywordtype">void</span> get_local(DataRange* data) {</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    <span class="keyword">static_assert</span>(wanted_kind != kVoid, <span class="stringliteral">&quot;illegal type&quot;</span>);</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>    local_op&lt;wanted_kind&gt;(data, kExprLocalGet);</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>  }</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span> </div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>  <span class="keywordtype">void</span> set_local(DataRange* data) { local_op&lt;kVoid&gt;(data, kExprLocalSet); }</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>  <span class="keywordtype">void</span> tee_local(DataRange* data) {</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    local_op&lt;wanted_kind&gt;(data, kExprLocalTee);</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>  }</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span> </div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> num_<span class="keywordtype">byte</span>s&gt;</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>  <span class="keywordtype">void</span> i32_const(DataRange* data) {</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(data-&gt;getPseudoRandom&lt;int32_t, num_bytes&gt;());</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>  }</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span> </div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> num_<span class="keywordtype">byte</span>s&gt;</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>  <span class="keywordtype">void</span> i64_const(DataRange* data) {</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI64Const(data-&gt;getPseudoRandom&lt;int64_t, num_bytes&gt;());</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>  }</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span> </div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>  Var GetRandomGlobal(DataRange* data, <span class="keywordtype">bool</span> ensure_mutable) {</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>;</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    <span class="keywordflow">if</span> (ensure_mutable) {</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="random-module-generation_8cc.html#a627a3560d110093764ccc48dd9109f4c">mutable_globals_</a>.empty()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = <a class="code hl_variable" href="random-module-generation_8cc.html#a627a3560d110093764ccc48dd9109f4c">mutable_globals_</a>[data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#a627a3560d110093764ccc48dd9109f4c">mutable_globals_</a>.size()];</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="random-module-generation_8cc.html#ac4f9b6d6cb579b84f6722d37b6217c10">globals_</a>.empty()) <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>      <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#ac4f9b6d6cb579b84f6722d37b6217c10">globals_</a>.size();</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    }</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    ValueType type = <a class="code hl_variable" href="random-module-generation_8cc.html#ac4f9b6d6cb579b84f6722d37b6217c10">globals_</a>[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>];</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    <span class="keywordflow">return</span> {<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, type};</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>  }</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span> </div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>  <span class="keywordtype">void</span> global_op(DataRange* data) {</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>    <span class="keyword">static_assert</span>(wanted_kind == kVoid || is_convertible_kind(wanted_kind));</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> is_set = wanted_kind == kVoid;</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>    Var global = GetRandomGlobal(data, is_set);</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    <span class="comment">// If there are no globals, just generate any value (if a value is needed),</span></div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <span class="comment">// or do nothing.</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>    <span class="keywordflow">if</span> (!global.is_valid() || !is_convertible_kind(global.type.kind())) {</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>      <span class="keywordflow">if</span> (wanted_kind == kVoid) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>      <span class="keywordflow">return</span> Generate&lt;wanted_kind&gt;(data);</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    }</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span> </div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <span class="keywordflow">if</span> (is_set) Generate(global.type, data);</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(is_set ? kExprGlobalSet : kExprGlobalGet,</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>                           global.index);</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <span class="keywordflow">if</span> (!is_set &amp;&amp; global.type.kind() != wanted_kind) {</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>      Convert(global.type, ValueType::Primitive(wanted_kind));</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    }</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>  }</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span> </div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>  <span class="keywordtype">void</span> get_global(DataRange* data) {</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    <span class="keyword">static_assert</span>(wanted_kind != kVoid, <span class="stringliteral">&quot;illegal type&quot;</span>);</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>    global_op&lt;wanted_kind&gt;(data);</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>  }</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span> </div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>  <span class="keyword">template</span> &lt;ValueKind select_kind&gt;</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>  <span class="keywordtype">void</span> select_with_type(DataRange* data) {</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>    <span class="keyword">static_assert</span>(select_kind != kVoid, <span class="stringliteral">&quot;illegal kind for select&quot;</span>);</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    Generate&lt;select_kind, select_kind, kI32&gt;(data);</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>    <span class="comment">// num_types is always 1.</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    uint8_t num_types = 1;</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU8U8(kExprSelectWithType, num_types,</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>                           ValueType::Primitive(select_kind).value_type_code());</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>  }</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span> </div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>  <span class="keywordtype">void</span> set_global(DataRange* data) { global_op&lt;kVoid&gt;(data); }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span> </div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>  <span class="keywordtype">void</span> throw_or_rethrow(DataRange* data) {</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    <span class="keywordtype">bool</span> rethrow = data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <span class="keywordflow">if</span> (rethrow &amp;&amp; !<a class="code hl_variable" href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383">catch_blocks_</a>.empty()) {</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>      <span class="keywordtype">int</span> control_depth = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size() - 1);</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>      <span class="keywordtype">int</span> catch_index =</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>          data-&gt;get&lt;uint8_t&gt;() % <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383">catch_blocks_</a>.size());</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprRethrow,</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>                             control_depth - <a class="code hl_variable" href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383">catch_blocks_</a>[catch_index]);</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>      <span class="keywordtype">int</span> tag = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTags();</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* exception_sig = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetTagType(tag);</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>      Generate(exception_sig-&gt;parameters(), data);</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprThrow, tag);</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    }</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>  }</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span> </div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>  <span class="keyword">template</span> &lt;<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a>... Types&gt;</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>  <span class="keywordtype">void</span> sequence(DataRange* data) {</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>    Generate&lt;Types...&gt;(<a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>  }</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span> </div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>  <span class="keywordtype">void</span> memory_size(DataRange* data) {</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    uint8_t memory_index =</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>        data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumMemories();</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span> </div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU8(kExprMemorySize, memory_index);</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    <span class="comment">// The `memory_size` returns an I32. However, `kExprMemorySize` for memory64</span></div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    <span class="comment">// returns an I64, so we should convert it.</span></div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsMemory64(memory_index)) {</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprI32ConvertI64);</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>    }</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>  }</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span> </div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>  <span class="keywordtype">void</span> grow_memory(DataRange* data) {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    uint8_t memory_index =</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumMemories();</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span> </div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    <span class="comment">// Generate the index and the arguments, if any.</span></div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsMemory64(memory_index) ? Generate&lt;kI64&gt;(data)</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>                                                  : Generate&lt;<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>&gt;(data);</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU8(kExprMemoryGrow, memory_index);</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    <span class="comment">// The `grow_memory` returns an I32. However, `kExprMemoryGrow` for memory64</span></div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>    <span class="comment">// returns an I64, so we should convert it.</span></div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsMemory64(memory_index)) {</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>      builder_-&gt;Emit(kExprI32ConvertI64);</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>    }</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>  }</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span> </div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>  <span class="keywordtype">void</span> ref_null(HeapType type, DataRange* data) {</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(kExprRefNull, type.code());</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>  }</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span> </div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>  <span class="keywordtype">bool</span> get_local_ref(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>    Var local = GetRandomLocal(data);</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>    <span class="comment">// TODO(14034): Ideally we would check for subtyping here over type</span></div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>    <span class="comment">// equality, but we don&#39;t have a module.</span></div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>    <span class="keywordflow">if</span> (local.is_valid() &amp;&amp; local.type.is_object_reference() &amp;&amp;</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>        local.type.heap_type() == type &amp;&amp;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>        (local.type.is_nullable()</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>             ? nullable == kNullable  <span class="comment">// We check for nullability-subtyping</span></div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>             : <a class="code hl_variable" href="random-module-generation_8cc.html#a7ad4cdfdce811c734dd45ad4b2051c0c">locals_initialized_</a>    <span class="comment">// If the local is not nullable, we cannot</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>                                      <span class="comment">// use it during locals initialization</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>         )) {</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprLocalGet, local.index);</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    }</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span> </div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>  }</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span> </div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>  <span class="keywordtype">bool</span> new_object(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(type.is_index());</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span> </div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>    ModuleTypeIndex <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = type.ref_index();</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>    <span class="keywordtype">bool</span> new_default = data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span> </div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsStructType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>)) {</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>      <span class="keyword">const</span> StructType* struct_gen = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetStructType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>      <span class="keywordtype">int</span> field_count = struct_gen-&gt;field_count();</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>      <span class="keywordtype">bool</span> can_be_defaultable = std::all_of(</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>          struct_gen-&gt;fields().begin(), struct_gen-&gt;fields().end(),</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>          [](ValueType type) -&gt; <span class="keywordtype">bool</span> { return type.is_defaultable(); });</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span> </div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>      <span class="keywordflow">if</span> (new_default &amp;&amp; can_be_defaultable) {</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprStructNewDefault);</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; field_count; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>          Generate(struct_gen-&gt;field(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>).Unpacked(), data);</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>        }</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprStructNew);</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>      }</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>)) {</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>      ValueType element_type =</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetArrayType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>)-&gt;element_type();</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>      <span class="keywordtype">bool</span> can_be_defaultable = element_type.is_defaultable();</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>      <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">WasmOpcode</a> array_new_op[] = {</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>          kExprArrayNew,        kExprArrayNewFixed,</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>          kExprArrayNewData,    kExprArrayNewElem,</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>          kExprArrayNewDefault,  <span class="comment">// default op has to be at the end of the list.</span></div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>      };</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>      <span class="keywordtype">size_t</span> op_size = <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(array_new_op);</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>      <span class="keywordflow">if</span> (!can_be_defaultable) --op_size;</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>      <span class="keywordflow">switch</span> (array_new_op[data-&gt;get&lt;uint8_t&gt;() % op_size]) {</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>        <span class="keywordflow">case</span> kExprArrayNewElem:</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>        <span class="keywordflow">case</span> kExprArrayNewData: {</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>          <span class="comment">// This is more restrictive than it has to be.</span></div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>          <span class="comment">// TODO(14034): Also support nonnullable and non-index reference</span></div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>          <span class="comment">// types.</span></div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>          <span class="keywordflow">if</span> (element_type.is_reference() &amp;&amp; element_type.is_nullable() &amp;&amp;</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>              element_type.has_index()) {</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>            <span class="comment">// Add a new element segment with the corresponding type.</span></div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>            uint32_t element_segment = GenerateRefTypeElementSegment(</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>                data, <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder(), element_type);</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>            <span class="comment">// Generate offset, length.</span></div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>            <span class="comment">// TODO(14034): Change the distribution here to make it more likely</span></div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>            <span class="comment">// that the numbers are in range.</span></div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>            Generate(base::VectorOf({<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>}), <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>            <span class="comment">// Generate array.new_elem instruction.</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>            <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayNewElem);</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>            <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>            <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(element_segment);</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!element_type.is_reference()) {</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>            <span class="comment">// Lazily create a data segment if the module doesn&#39;t have one yet.</span></div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumDataSegments() == 0) {</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>              GeneratePassiveDataSegment(data, <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder());</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>            }</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>            <span class="keywordtype">int</span> data_index =</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>                data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumDataSegments();</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>            <span class="comment">// Generate offset, length.</span></div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>            Generate(base::VectorOf({<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>}), <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>            <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayNewData);</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>            <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>            <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(data_index);</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>          }</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>          [[fallthrough]];  <span class="comment">// To array.new.</span></div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>        }</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>        <span class="keywordflow">case</span> kExprArrayNew:</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>          Generate(element_type.Unpacked(), data);</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>          Generate(kWasmI32, data);</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(kMaxArraySize);</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprI32RemS);</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayNew);</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>        <span class="keywordflow">case</span> kExprArrayNewFixed: {</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>          <span class="keywordtype">size_t</span> element_count =</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>              std::min(<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(data-&gt;get&lt;uint8_t&gt;()), data-&gt;size());</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; element_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>            Generate(element_type.Unpacked(), data);</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>          }</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayNewFixed);</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(element_count));</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>        }</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>        <span class="keywordflow">case</span> kExprArrayNewDefault:</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>          Generate(kWasmI32, data);</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(kMaxArraySize);</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprI32RemS);</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayNewDefault);</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>          <a class="code hl_define" href="src_2base_2logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(<span class="stringliteral">&quot;Unimplemented opcode&quot;</span>);</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>      }</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsSignature(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>));</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>      <span class="comment">// Map the type index to a function index.</span></div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>      <span class="comment">// TODO(11954. 7748): Once we have type canonicalization, choose a random</span></div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>      <span class="comment">// function from among those matching the signature (consider function</span></div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>      <span class="comment">// subtyping?).</span></div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>      uint32_t declared_func_index =</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>          <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>.index - <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size());</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>      <span class="keywordtype">size_t</span> num_functions = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumDeclaredFunctions();</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetSignature(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_functions; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>        <span class="keywordflow">if</span> (sig == <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>                       -&gt;GetFunction(declared_func_index)</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>                       -&gt;signature()) {</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>          uint32_t absolute_func_index =</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>              NumImportedFunctions() + declared_func_index;</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprRefFunc, absolute_func_index);</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>        }</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>        declared_func_index = (declared_func_index + 1) % num_functions;</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>      }</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>      <span class="comment">// We did not find a function matching the requested signature.</span></div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithI32V(kExprRefNull, <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>.index);</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>      <span class="keywordflow">if</span> (!nullable) {</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefAsNonNull);</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>      }</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    }</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span> </div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>  }</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span> </div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>  <span class="keywordtype">void</span> table_op(uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, std::vector&lt;ValueType&gt; types, DataRange* data,</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>                WasmOpcode opcode) {</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(opcode == kExprTableSet || opcode == kExprTableSize ||</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>           opcode == kExprTableGrow || opcode == kExprTableFill);</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; types.size(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>      <span class="comment">// When passing the reftype by default kWasmFuncRef is used.</span></div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>      <span class="comment">// Then the type is changed according to its table type.</span></div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>      <span class="keywordflow">if</span> (types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] == kWasmFuncRef) {</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>        types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetTableType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>      }</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>    }</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>    Generate(base::VectorOf(types), data);</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>    <span class="keywordflow">if</span> (opcode == kExprTableSet) {</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(opcode);</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(opcode);</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>    }</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span> </div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>    <span class="comment">// The `table_size` and `table_grow` should return an I32. However, the Wasm</span></div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>    <span class="comment">// instruction for table64 returns an I64, so it should be converted.</span></div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>    <span class="keywordflow">if</span> ((opcode == kExprTableSize || opcode == kExprTableGrow) &amp;&amp;</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsTable64(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>)) {</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprI32ConvertI64);</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>    }</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>  }</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span> </div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>  ValueType table_address_type(<span class="keywordtype">int</span> table_index) {</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsTable64(table_index) ? <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#ac0993b253da7c6a4f84e778a5a7b99a3">kWasmI64</a> : <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>;</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>  }</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span> </div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>  std::pair&lt;int, ValueType&gt; select_random_table(DataRange* data) {</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>    <span class="keywordtype">int</span> num_tables = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTables();</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(num_tables, 0);</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = data-&gt;get&lt;uint8_t&gt;() % num_tables;</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>    ValueType address_type = table_address_type(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span> </div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>    <span class="keywordflow">return</span> {<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, address_type};</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>  }</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span> </div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>  <span class="keywordtype">bool</span> table_get(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>    ValueType needed_type = ValueType::RefMaybeNull(type, nullable);</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>    <span class="keywordtype">int</span> table_count = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTables();</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(table_count, 0);</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>    ZoneVector&lt;uint32_t&gt; table(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;zone());</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; table_count; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetTableType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) == needed_type) {</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>        table.push_back(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>      }</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>    }</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>    <span class="keywordflow">if</span> (table.empty()) {</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>    }</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>    <span class="keywordtype">int</span> table_index =</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>        table[data-&gt;get&lt;uint8_t&gt;() % <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(table.size())];</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>    ValueType address_type = table_address_type(table_index);</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>    Generate(address_type, data);</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprTableGet);</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(table_index);</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>  }</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span> </div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>  <span class="keywordtype">void</span> table_set(DataRange* data) {</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="keyword">auto</span> [table_index, address_type] = select_random_table(data);</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>    table_op(table_index, {address_type, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">kWasmFuncRef</a>}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>, kExprTableSet);</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>  }</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span> </div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>  <span class="keywordtype">void</span> table_size(DataRange* data) {</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    <span class="keyword">auto</span> [table_index, <a class="code hl_define" href="js-call-reducer_8cc.html#ae4dfd7b0d66121016d6466d2ff10e8ba">_</a>] = select_random_table(data);</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>    table_op(table_index, {}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>, kExprTableSize);</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>  }</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span> </div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>  <span class="keywordtype">void</span> table_grow(DataRange* data) {</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>    <span class="keyword">auto</span> [table_index, address_type] = select_random_table(data);</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>    table_op(table_index, {<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">kWasmFuncRef</a>, address_type}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>, kExprTableGrow);</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>  }</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span> </div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>  <span class="keywordtype">void</span> table_fill(DataRange* data) {</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>    <span class="keyword">auto</span> [table_index, address_type] = select_random_table(data);</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>    table_op(table_index, {address_type, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">kWasmFuncRef</a>, address_type}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>,</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>             kExprTableFill);</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>  }</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span> </div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>  <span class="keywordtype">void</span> table_copy(DataRange* data) {</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    ValueType needed_type = data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;() ? kWasmFuncRef : <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#aed8b0c264ada0ac0e941efbc9bf943a1">kWasmExternRef</a>;</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    <span class="keywordtype">int</span> table_count = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTables();</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>    ZoneVector&lt;uint32_t&gt; table(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;zone());</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; table_count; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetTableType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) == needed_type) {</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>        table.push_back(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>      }</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>    }</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>    <span class="keywordflow">if</span> (table.empty()) {</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>    }</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>    <span class="keywordtype">int</span> first_index = data-&gt;get&lt;uint8_t&gt;() % <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(table.size());</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>    <span class="keywordtype">int</span> second_index = data-&gt;get&lt;uint8_t&gt;() % <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(table.size());</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>    ValueType first_addrtype = table_address_type(table[first_index]);</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>    ValueType second_addrtype = table_address_type(table[second_index]);</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>    ValueType result_addrtype =</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>        first_addrtype == <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a> ? <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a> : second_addrtype;</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>    Generate(first_addrtype, data);</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>    Generate(second_addrtype, data);</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>    Generate(result_addrtype, data);</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprTableCopy);</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(table[first_index]);</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(table[second_index]);</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>  }</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span> </div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>  <span class="keywordtype">bool</span> array_get_helper(ValueType value_type, DataRange* data) {</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>    WasmModuleBuilder* builder = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder();</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    ZoneVector&lt;ModuleTypeIndex&gt; array_indices(builder-&gt;zone());</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span> </div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>    <span class="keywordflow">for</span> (ModuleTypeIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>) {</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(builder-&gt;IsArrayType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>      <span class="keywordflow">if</span> (builder-&gt;GetArrayType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)-&gt;element_type().Unpacked() == value_type) {</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>        array_indices.push_back(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>      }</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>    }</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span> </div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>    <span class="keywordflow">if</span> (!array_indices.empty()) {</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>      <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = data-&gt;get&lt;uint8_t&gt;() % <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(array_indices.size());</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>      GenerateRef(HeapType(array_indices[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>]), data, kNullable);</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>      Generate(kWasmI32, data);</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>      <span class="keywordflow">if</span> (builder-&gt;GetArrayType(array_indices[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>])</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>              -&gt;element_type()</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>              .is_packed()) {</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;() ? kExprArrayGetS</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>                                                   : kExprArrayGetU);</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span> </div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayGet);</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>      }</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(array_indices[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>]);</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    }</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span> </div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>  }</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span> </div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>  <span class="keywordtype">void</span> array_get(DataRange* data) {</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>    <span class="keywordtype">bool</span> got_array_value =</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>        array_get_helper(ValueType::Primitive(wanted_kind), data);</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>    <span class="keywordflow">if</span> (!got_array_value) {</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>      Generate&lt;wanted_kind&gt;(data);</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>    }</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>  }</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>  <span class="keywordtype">bool</span> array_get_ref(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>    ValueType needed_type = ValueType::RefMaybeNull(type, nullable);</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>    <span class="keywordflow">return</span> array_get_helper(needed_type, data);</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>  }</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span> </div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>  <span class="keywordtype">void</span> i31_get(DataRange* data) {</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>    GenerateRef(HeapType(HeapType::kI31), data);</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    <span class="keywordflow">if</span> (data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;()) {</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprI31GetS);</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprI31GetU);</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>    }</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>  }</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span> </div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>  <span class="keywordtype">void</span> array_len(DataRange* data) {</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(0, <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size());  <span class="comment">// We always emit at least one array type.</span></div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>    GenerateRef(HeapType(HeapType::kArray), data);</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayLen);</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>  }</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span> </div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>  <span class="keywordtype">void</span> array_copy(DataRange* data) {</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(0, <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size());  <span class="comment">// We always emit at least one array type.</span></div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>    <span class="comment">// TODO(14034): The source element type only has to be a subtype of the</span></div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>    <span class="comment">// destination element type. Currently this only generates copy from same</span></div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>    <span class="comment">// typed arrays.</span></div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>    ModuleTypeIndex array_index =</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()];</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(array_index));</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    GenerateRef(HeapType(array_index), data);  <span class="comment">// destination</span></div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    Generate(kWasmI32, data);                  <span class="comment">// destination index</span></div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>    GenerateRef(HeapType(array_index), data);  <span class="comment">// source</span></div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>    Generate(kWasmI32, data);                  <span class="comment">// source index</span></div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>    Generate(kWasmI32, data);                  <span class="comment">// length</span></div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayCopy);</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(array_index);  <span class="comment">// destination array type index</span></div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(array_index);  <span class="comment">// source array type index</span></div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>  }</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span> </div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>  <span class="keywordtype">void</span> array_fill(DataRange* data) {</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(0, <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size());  <span class="comment">// We always emit at least one array type.</span></div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>    ModuleTypeIndex array_index =</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()];</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(array_index));</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>    ValueType element_type = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>                                 -&gt;GetArrayType(array_index)</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>                                 -&gt;element_type()</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>                                 .Unpacked();</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>    GenerateRef(HeapType(array_index), data);  <span class="comment">// array</span></div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>    Generate(kWasmI32, data);                  <span class="comment">// offset</span></div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>    Generate(element_type, data);              <span class="comment">// value</span></div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>    Generate(kWasmI32, data);                  <span class="comment">// length</span></div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayFill);</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(array_index);</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>  }</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span> </div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>  <span class="keywordtype">void</span> array_init_data(DataRange* data) {</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(0, <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size());  <span class="comment">// We always emit at least one array type.</span></div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    ModuleTypeIndex array_index =</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()];</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(array_index));</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>    <span class="keyword">const</span> ArrayType* array_type =</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetArrayType(array_index);</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(array_type-&gt;mutability());</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>    ValueType element_type = array_type-&gt;element_type().Unpacked();</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>    <span class="keywordflow">if</span> (element_type.is_reference()) {</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>    }</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumDataSegments() == 0) {</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>      GeneratePassiveDataSegment(data, <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder());</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    }</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span> </div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>    <span class="keywordtype">int</span> data_index =</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>        data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumDataSegments();</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    <span class="comment">// Generate array, index, data_offset, length.</span></div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    Generate(base::VectorOf({ValueType::RefNull(array_index), <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>,</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>                             <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>}),</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>             <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayInitData);</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(array_index);</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(data_index);</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>  }</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span> </div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>  <span class="keywordtype">void</span> array_init_elem(DataRange* data) {</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(0, <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size());  <span class="comment">// We always emit at least one array type.</span></div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>    ModuleTypeIndex array_index =</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()];</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(array_index));</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>    <span class="keyword">const</span> ArrayType* array_type =</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetArrayType(array_index);</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(array_type-&gt;mutability());</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>    ValueType element_type = array_type-&gt;element_type().Unpacked();</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>    <span class="comment">// This is more restrictive than it has to be.</span></div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>    <span class="comment">// TODO(14034): Also support nonnullable and non-index reference</span></div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>    <span class="comment">// types.</span></div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>    <span class="keywordflow">if</span> (!element_type.is_reference() || element_type.is_non_nullable() ||</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>        !element_type.has_index()) {</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>    }</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>    <span class="comment">// Add a new element segment with the corresponding type.</span></div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>    uint32_t element_segment =</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        GenerateRefTypeElementSegment(data, <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder(), element_type);</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>    <span class="comment">// Generate array, index, elem_offset, length.</span></div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>    <span class="comment">// TODO(14034): Change the distribution here to make it more likely</span></div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>    <span class="comment">// that the numbers are in range.</span></div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>    Generate(base::VectorOf({ValueType::RefNull(array_index), <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>,</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>                             <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>}),</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>             <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>    <span class="comment">// Generate array.new_elem instruction.</span></div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArrayInitElem);</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(array_index);</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(element_segment);</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>  }</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span> </div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>  <span class="keywordtype">void</span> array_set(DataRange* data) {</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    WasmModuleBuilder* builder = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder();</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    ZoneVector&lt;ModuleTypeIndex&gt; array_indices(builder-&gt;zone());</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    <span class="keywordflow">for</span> (ModuleTypeIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>) {</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(builder-&gt;IsArrayType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>      <span class="keywordflow">if</span> (builder-&gt;GetArrayType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)-&gt;mutability()) {</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>        array_indices.push_back(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>      }</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>    }</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span> </div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>    <span class="keywordflow">if</span> (array_indices.empty()) {</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>    }</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span> </div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = data-&gt;get&lt;uint8_t&gt;() % <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(array_indices.size());</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>    GenerateRef(HeapType(array_indices[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>]), data);</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>    Generate(</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>        builder-&gt;GetArrayType(array_indices[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>])-&gt;element_type().Unpacked(),</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>        data);</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprArraySet);</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(array_indices[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>]);</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>  }</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span> </div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>  <span class="keywordtype">bool</span> struct_get_helper(ValueType value_type, DataRange* data) {</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>    WasmModuleBuilder* builder = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder();</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>    ZoneVector&lt;uint32_t&gt; field_index(builder-&gt;zone());</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>    ZoneVector&lt;ModuleTypeIndex&gt; struct_index(builder-&gt;zone());</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>    <span class="keywordflow">for</span> (ModuleTypeIndex <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> : <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>) {</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(builder-&gt;IsStructType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>      <span class="keywordtype">int</span> field_count = builder-&gt;GetStructType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)-&gt;field_count();</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = 0; <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> &lt; field_count; <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>++) {</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>        <span class="comment">// TODO(14034): This should be a subtype check!</span></div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>        <span class="keywordflow">if</span> (builder-&gt;GetStructType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)-&gt;field(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) == value_type) {</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>          field_index.push_back(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>          struct_index.push_back(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>        }</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>      }</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>    }</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>    <span class="keywordflow">if</span> (!field_index.empty()) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>      <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = data-&gt;get&lt;uint8_t&gt;() % <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(field_index.size());</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>      GenerateRef(HeapType(struct_index[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>]), data, kNullable);</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>      <span class="keywordflow">if</span> (builder-&gt;GetStructType(struct_index[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>])</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>              -&gt;field(field_index[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>])</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>              .is_packed()) {</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;() ? kExprStructGetS</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                                                   : kExprStructGetU);</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprStructGet);</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>      }</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(struct_index[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>]);</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(field_index[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>]);</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>    }</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>  }</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span> </div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>  <span class="keyword">template</span> &lt;ValueKind wanted_kind&gt;</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>  <span class="keywordtype">void</span> struct_get(DataRange* data) {</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>    <span class="keywordtype">bool</span> got_struct_value =</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>        struct_get_helper(ValueType::Primitive(wanted_kind), data);</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>    <span class="keywordflow">if</span> (!got_struct_value) {</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>      Generate&lt;wanted_kind&gt;(data);</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>    }</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>  }</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span> </div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>  <span class="keywordtype">bool</span> struct_get_ref(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>    ValueType needed_type = ValueType::RefMaybeNull(type, nullable);</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>    <span class="keywordflow">return</span> struct_get_helper(needed_type, data);</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>  }</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span> </div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>  <span class="keywordtype">bool</span> ref_cast(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>    HeapType input_type = top_type(type);</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>    GenerateRef(input_type, data);</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(nullable ? kExprRefCastNull : kExprRefCast);</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32V(type.code());</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// It always produces the desired result type.</span></div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>  }</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span> </div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>  HeapType top_type(HeapType type) {</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>    <span class="keywordflow">switch</span> (type.representation()) {</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>      <span class="keywordflow">case</span> HeapType::kAny:</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>      <span class="keywordflow">case</span> HeapType::kEq:</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>      <span class="keywordflow">case</span> HeapType::kArray:</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>      <span class="keywordflow">case</span> HeapType::kStruct:</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>      <span class="keywordflow">case</span> HeapType::kI31:</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>      <span class="keywordflow">case</span> HeapType::kNone:</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>        <span class="keywordflow">return</span> HeapType(HeapType::kAny);</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>      <span class="keywordflow">case</span> HeapType::kExtern:</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>      <span class="keywordflow">case</span> HeapType::kNoExtern:</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>        <span class="keywordflow">return</span> HeapType(HeapType::kExtern);</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>      <span class="keywordflow">case</span> HeapType::kExn:</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>      <span class="keywordflow">case</span> HeapType::kNoExn:</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>        <span class="keywordflow">return</span> HeapType(HeapType::kExn);</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>      <span class="keywordflow">case</span> HeapType::kFunc:</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>      <span class="keywordflow">case</span> HeapType::kNoFunc:</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>        <span class="keywordflow">return</span> HeapType(HeapType::kFunc);</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(type.is_index());</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsSignature(type.ref_index())) {</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>          <span class="keywordflow">return</span> HeapType(HeapType::kFunc);</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>        }</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsStructType(type.ref_index()) ||</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>               <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(type.ref_index()));</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>        <span class="keywordflow">return</span> HeapType(HeapType::kAny);</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    }</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>  }</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span> </div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>  HeapType choose_sub_type(HeapType type, DataRange* data) {</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>    <span class="keywordflow">switch</span> (type.representation()) {</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>      <span class="keywordflow">case</span> HeapType::kAny: {</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>        <span class="keyword">constexpr</span> HeapType::Representation generic_types[] = {</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>            HeapType::kAny,    HeapType::kEq,  HeapType::kArray,</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>            HeapType::kStruct, HeapType::kI31, HeapType::kNone,</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>        };</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>        <span class="keywordtype">size_t</span> choice =</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>            data-&gt;get&lt;uint8_t&gt;() %</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>            (<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() + <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(generic_types));</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span> </div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>        <span class="keywordflow">if</span> (choice &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()) <span class="keywordflow">return</span> HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[choice]);</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>        choice -= <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size();</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>        <span class="keywordflow">if</span> (choice &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size()) <span class="keywordflow">return</span> HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>[choice]);</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>        choice -= <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size();</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>        <span class="keywordflow">return</span> HeapType(generic_types[choice]);</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>      }</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>      <span class="keywordflow">case</span> HeapType::kEq: {</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>        <span class="keyword">constexpr</span> HeapType::Representation generic_types[] = {</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>            HeapType::kEq,  HeapType::kArray, HeapType::kStruct,</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>            HeapType::kI31, HeapType::kNone,</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>        };</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>        <span class="keywordtype">size_t</span> choice =</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>            data-&gt;get&lt;uint8_t&gt;() %</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>            (<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() + <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(generic_types));</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span> </div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>        <span class="keywordflow">if</span> (choice &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()) <span class="keywordflow">return</span> HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[choice]);</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>        choice -= <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size();</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>        <span class="keywordflow">if</span> (choice &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size()) <span class="keywordflow">return</span> HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>[choice]);</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>        choice -= <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size();</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>        <span class="keywordflow">return</span> HeapType(generic_types[choice]);</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>      }</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>      <span class="keywordflow">case</span> HeapType::kStruct: {</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>        <span class="keyword">constexpr</span> HeapType::Representation generic_types[] = {</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>            HeapType::kStruct,</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>            HeapType::kNone,</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>        };</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> type_count = <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size();</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> choice =</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>            data-&gt;get&lt;uint8_t&gt;() % (type_count + <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(generic_types));</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>        <span class="keywordflow">return</span> choice &gt;= type_count</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>                   ? HeapType(generic_types[choice - type_count])</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>                   : HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>[choice]);</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>      }</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>      <span class="keywordflow">case</span> HeapType::kArray: {</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>        <span class="keyword">constexpr</span> HeapType::Representation generic_types[] = {</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>            HeapType::kArray,</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>            HeapType::kNone,</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>        };</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> type_count = <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size();</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> choice =</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>            data-&gt;get&lt;uint8_t&gt;() % (type_count + <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(generic_types));</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>        <span class="keywordflow">return</span> choice &gt;= type_count</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>                   ? HeapType(generic_types[choice - type_count])</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>                   : HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[choice]);</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>      }</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>      <span class="keywordflow">case</span> HeapType::kFunc: {</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>        <span class="keyword">constexpr</span> HeapType::Representation generic_types[] = {</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>            HeapType::kFunc, HeapType::kNoFunc};</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> type_count = <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size();</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>        <span class="keyword">const</span> <span class="keywordtype">size_t</span> choice =</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>            data-&gt;get&lt;uint8_t&gt;() % (type_count + <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(generic_types));</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>        <span class="keywordflow">return</span> choice &gt;= type_count</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>                   ? HeapType(generic_types[choice - type_count])</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>                   : HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>[choice]);</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>      }</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>      <span class="keywordflow">case</span> HeapType::kExtern:</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>        <span class="comment">// About 10% of chosen subtypes will be kNoExtern.</span></div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>        <span class="keywordflow">return</span> HeapType(data-&gt;get&lt;uint8_t&gt;() &gt; 25 ? HeapType::kExtern</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>                                                  : HeapType::kNoExtern);</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>        <span class="keywordflow">if</span> (!type.is_index()) {</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>          <span class="comment">// No logic implemented to find a sub-type.</span></div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>          <span class="keywordflow">return</span> <a class="code hl_variable" href="wasm-inlining-into-js_8cc.html#a66874a4e937e4192b2b42e57f55251e8">type</a>;</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>        }</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>        <span class="comment">// Collect all (direct) sub types.</span></div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>        <span class="comment">// TODO(14034): Also collect indirect sub types.</span></div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>        std::vector&lt;ModuleTypeIndex&gt; subtypes;</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>        uint32_t type_count = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumTypes();</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>        <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; type_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;GetSuperType(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) == type.ref_index()) {</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>            subtypes.push_back(ModuleTypeIndex{<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>});</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>          }</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>        }</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>        <span class="keywordflow">return</span> subtypes.empty()</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>                   ? type  <span class="comment">// no downcast possible</span></div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>                   : HeapType(subtypes[data-&gt;get&lt;uint8_t&gt;() % subtypes.size()]);</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>    }</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>  }</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span> </div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>  <span class="keywordtype">bool</span> br_on_cast(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.empty());</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>    <span class="keyword">const</span> uint32_t target_block = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size();</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>    <span class="keyword">const</span> uint32_t block_index =</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>        <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.size()) - 1 - target_block;</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>    <span class="keyword">const</span> <span class="keyword">auto</span> break_types = base::VectorOf(<a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>[target_block]);</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    <span class="keywordflow">if</span> (break_types.empty()) {</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>    }</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>    ValueType break_type = break_types.last();</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>    <span class="keywordflow">if</span> (!break_type.is_reference()) {</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>    }</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span> </div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>    Generate(break_types.SubVector(0, break_types.size() - 1), data);</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>    <span class="keywordflow">if</span> (data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;()) {</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>      <span class="comment">// br_on_cast</span></div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>      HeapType source_type = top_type(break_type.heap_type());</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> source_is_nullable = data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>      GenerateRef(source_type, data,</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>                  source_is_nullable ? kNullable : kNonNullable);</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> target_is_nullable =</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>          source_is_nullable &amp;&amp; break_type.is_nullable() &amp;&amp; data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprBrOnCast);</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(source_is_nullable + (target_is_nullable &lt;&lt; 1));</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(block_index);</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32V(source_type.code());             <span class="comment">// source type</span></div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32V(break_type.heap_type().code());  <span class="comment">// target type</span></div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>      <span class="comment">// Fallthrough: The type has been up-cast to the source type of the</span></div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>      <span class="comment">// br_on_cast instruction! (If the type on the stack was more specific,</span></div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>      <span class="comment">// this loses type information.)</span></div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>      base::SmallVector&lt;ValueType, 32&gt; fallthrough_types(break_types);</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>      fallthrough_types.back() = ValueType::RefMaybeNull(</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>          source_type, source_is_nullable ? kNullable : kNonNullable);</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>      ConsumeAndGenerate(base::VectorOf(fallthrough_types), {}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>      <span class="comment">// Generate the actually desired ref type.</span></div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>      GenerateRef(type, data, nullable);</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>      <span class="comment">// br_on_cast_fail</span></div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>      HeapType source_type = break_type.heap_type();</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> source_is_nullable = data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>      GenerateRef(source_type, data,</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>                  source_is_nullable ? kNullable : kNonNullable);</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> target_is_nullable =</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>          source_is_nullable &amp;&amp;</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>          (!break_type.is_nullable() || data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;());</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>      HeapType target_type = choose_sub_type(source_type, data);</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span> </div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprBrOnCastFail);</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(source_is_nullable + (target_is_nullable &lt;&lt; 1));</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(block_index);</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32V(source_type.code());</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32V(target_type.code());</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>      <span class="comment">// Fallthrough: The type has been cast to the target type.</span></div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>      base::SmallVector&lt;ValueType, 32&gt; fallthrough_types(break_types);</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>      fallthrough_types.back() = ValueType::RefMaybeNull(</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>          target_type, target_is_nullable ? kNullable : kNonNullable);</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>      ConsumeAndGenerate(base::VectorOf(fallthrough_types), {}, <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>      <span class="comment">// Generate the actually desired ref type.</span></div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>      GenerateRef(type, data, nullable);</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>    }</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>  }</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span> </div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>  <span class="keywordtype">bool</span> any_convert_extern(HeapType type, DataRange* data,</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>                          Nullability nullable) {</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>    <span class="keywordflow">if</span> (type.representation() != HeapType::kAny) {</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>    }</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprAnyConvertExtern);</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>    <span class="keywordflow">if</span> (nullable == kNonNullable) {</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefAsNonNull);</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    }</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>  }</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span> </div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>  <span class="keywordtype">bool</span> ref_as_non_null(HeapType type, DataRange* data, Nullability nullable) {</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>    GenerateRef(type, data, kNullable);</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefAsNonNull);</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>  }</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span> </div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>  <span class="keywordtype">void</span> struct_set(DataRange* data) {</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    WasmModuleBuilder* builder = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder();</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(0, <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size());  <span class="comment">// We always emit at least one struct type.</span></div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>    ModuleTypeIndex struct_index =</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>[data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size()];</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(builder-&gt;IsStructType(struct_index));</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>    <span class="keyword">const</span> StructType* struct_type = builder-&gt;GetStructType(struct_index);</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>    ZoneVector&lt;uint32_t&gt; field_indices(builder-&gt;zone());</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; struct_type-&gt;field_count(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>      <span class="keywordflow">if</span> (struct_type-&gt;mutability(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)) {</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>        field_indices.push_back(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>      }</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>    }</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    <span class="keywordflow">if</span> (field_indices.empty()) {</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>    }</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>    <span class="keywordtype">int</span> field_index =</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>        field_indices[data-&gt;get&lt;uint8_t&gt;() % field_indices.size()];</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>    GenerateRef(HeapType(struct_index), data);</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>    Generate(struct_type-&gt;field(field_index).Unpacked(), data);</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprStructSet);</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(struct_index);</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(field_index);</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>  }</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span> </div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>  <span class="keywordtype">void</span> ref_is_null(DataRange* data) {</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>    GenerateRef(HeapType(HeapType::kAny), data);</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefIsNull);</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>  }</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span> </div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>  <span class="keyword">template</span> &lt;WasmOpcode opcode&gt;</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>  <span class="keywordtype">void</span> ref_test(DataRange* data) {</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>    GenerateRef(HeapType(HeapType::kAny), data);</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> generic_types[] = {<a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a097c2d18f48b609c1b57a561c9c7098c">kAnyRefCode</a>,    <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a51112be8b1ef71cf4deab59adc1812e1">kEqRefCode</a>, <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81aa5677d4f95ce37ae9956f8c971aad9a0">kArrayRefCode</a>,</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>                                     <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a300d7fdea09e2e3f951cb9e55a349625">kStructRefCode</a>, <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81acf6c42955c8abb9a1060b20494b33fa3">kNoneCode</a>,  <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a50a33b2c8f7f4393c327d63acd732174">kI31RefCode</a>};</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>    <span class="keywordtype">size_t</span> num_types = <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size();</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>    <span class="keywordtype">size_t</span> num_all_types = num_types + <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(generic_types);</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>    <span class="keywordtype">size_t</span> type_choice = data-&gt;get&lt;uint8_t&gt;() % num_all_types;</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(opcode);</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>    <span class="keywordflow">if</span> (type_choice &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size()) {</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>[type_choice]);</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>    }</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>    type_choice -= <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size();</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>    <span class="keywordflow">if</span> (type_choice &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()) {</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[type_choice]);</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>    }</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>    type_choice -= <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size();</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitU32V(generic_types[type_choice]);</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>  }</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span> </div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>  <span class="keywordtype">void</span> ref_eq(DataRange* data) {</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    GenerateRef(HeapType(HeapType::kEq), data);</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>    GenerateRef(HeapType(HeapType::kEq), data);</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefEq);</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>  }</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span> </div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>  <span class="keywordtype">void</span> call_string_import(uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) {</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprCallFunction, <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>  }</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span> </div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>  <span class="keywordtype">void</span> string_cast(DataRange* data) {</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.cast);</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>  }</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span> </div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>  <span class="keywordtype">void</span> string_test(DataRange* data) {</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.test);</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>  }</div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span> </div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>  <span class="keywordtype">void</span> string_fromcharcode(DataRange* data) {</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.fromCharCode);</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>  }</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span> </div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>  <span class="keywordtype">void</span> string_fromcodepoint(DataRange* data) {</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.fromCodePoint);</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>  }</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span> </div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>  <span class="keywordtype">void</span> string_charcodeat(DataRange* data) {</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.charCodeAt);</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>  }</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span> </div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>  <span class="keywordtype">void</span> string_codepointat(DataRange* data) {</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.codePointAt);</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>  }</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span> </div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>  <span class="keywordtype">void</span> string_length(DataRange* data) {</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.length);</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>  }</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span> </div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>  <span class="keywordtype">void</span> string_concat(DataRange* data) {</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.concat);</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>  }</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span> </div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>  <span class="keywordtype">void</span> string_substring(DataRange* data) {</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.substring);</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>  }</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span> </div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>  <span class="keywordtype">void</span> string_equals(DataRange* data) {</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.equals);</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>  }</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span> </div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>  <span class="keywordtype">void</span> string_compare(DataRange* data) {</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.compare);</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>  }</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span> </div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>  <span class="keywordtype">void</span> string_fromcharcodearray(DataRange* data) {</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    GenerateRef(HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.array_i16), data);</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.fromCharCodeArray);</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>  }</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span> </div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>  <span class="keywordtype">void</span> string_intocharcodearray(DataRange* data) {</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>    GenerateRef(HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.array_i16), data);</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.intoCharCodeArray);</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>  }</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span> </div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>  <span class="keywordtype">void</span> string_measureutf8(DataRange* data) {</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.measureStringAsUTF8);</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>  }</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span> </div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>  <span class="keywordtype">void</span> string_intoutf8array(DataRange* data) {</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>    GenerateRef(HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.array_i8), data);</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.encodeStringIntoUTF8Array);</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>  }</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span> </div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>  <span class="keywordtype">void</span> string_toutf8array(DataRange* data) {</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>    GenerateRef(HeapType(HeapType::kExtern), data);</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.encodeStringToUTF8Array);</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>  }</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span> </div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>  <span class="keywordtype">void</span> string_fromutf8array(DataRange* data) {</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    GenerateRef(HeapType(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.array_i8), data);</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>    Generate(kWasmI32, data);</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    call_string_import(<a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.decodeStringFromUTF8Array);</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>  }</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span> </div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Arr&gt;</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>    <span class="keyword">requires</span> <span class="keyword">requires</span>(<span class="keyword">const</span> Arr&amp; arr) {</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>      { arr.size() } -&gt; std::convertible_to&lt;std::size_t&gt;;</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>      { arr.data()[0] } -&gt; std::convertible_to&lt;GenerateFn&gt;;</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>    }</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>  <span class="keywordtype">void</span> GenerateOneOf(<span class="keyword">const</span> Arr&amp; alternatives, DataRange* data) {</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(alternatives.size(), std::numeric_limits&lt;uint8_t&gt;::max());</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>    <span class="keyword">const</span> <span class="keyword">auto</span> which = data-&gt;get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span> </div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>    GenerateFn alternate = alternatives[which % alternatives.size()];</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>    (this-&gt;*alternate)(data);</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>  }</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span> </div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span>... kAlternativesSizes&gt;</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>  <span class="keywordtype">void</span> GenerateOneOf(<span class="keyword">const</span> GeneratorAlternativesPerOption&lt;</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>                         kAlternativesSizes...&gt;&amp; alternatives_per_option,</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>                     DataRange* data) {</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>    <span class="keywordflow">return</span> GenerateOneOf(alternatives_per_option.GetAlternatives(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>),</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>                         data);</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>  }</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span> </div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>  <span class="comment">// Returns true if it had succesfully generated a randomly chosen expression</span></div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>  <span class="comment">// from the `alternatives`.</span></div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Arr&gt;</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>    <span class="keyword">requires</span> <span class="keyword">requires</span>(<span class="keyword">const</span> Arr&amp; arr) {</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>      { arr.size() } -&gt; std::convertible_to&lt;std::size_t&gt;;</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>      { arr.data()[0] } -&gt; std::convertible_to&lt;GenerateFnWithHeap&gt;;</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>    }</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>  <span class="keywordtype">bool</span> GenerateOneOf(<span class="keyword">const</span> Arr&amp; alternatives, HeapType type, DataRange* data,</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>                     Nullability nullability) {</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(alternatives.size(), std::numeric_limits&lt;uint8_t&gt;::max());</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span> </div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = data-&gt;get&lt;uint8_t&gt;() % (alternatives.size() + 1);</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span> </div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>    <span class="keywordflow">if</span> (nullability &amp;&amp; <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> == alternatives.size()) {</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>      ref_null(type, data);</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>    }</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span> </div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; alternatives.<a class="code hl_class" href="classsize.html">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>      <span class="keywordflow">if</span> ((this-&gt;*alternatives[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>])(type, data, nullability)) {</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>      }</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>    }</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span> </div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>      <span class="keywordflow">if</span> ((this-&gt;*alternatives[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>])(type, data, nullability)) {</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>      }</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>    }</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span> </div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>    <span class="keywordflow">if</span> (nullability == kNullable) {</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>      ref_null(type, data);</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>    }</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span> </div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>  }</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span> </div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>  <span class="keyword">struct </span>GeneratorRecursionScope {</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>    <span class="keyword">explicit</span> GeneratorRecursionScope(BodyGen* <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>) : <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>) {</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>      ++<a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;recursion_depth;</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;recursion_depth, kMaxRecursionDepth);</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>    }</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>    ~GeneratorRecursionScope() {</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;recursion_depth, 0);</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>      --<a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>-&gt;recursion_depth;</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>    }</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d"> 2270</a></span>    BodyGen* <a class="code hl_variable" href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a>;</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>  };</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span> </div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>  BodyGen(WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, WasmFunctionBuilder* <a class="code hl_variable" href="liftoff-compiler_8cc.html#ac96b98a543c504abf4ffd7eaa447e94a">fn</a>,</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>          <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; functions,</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>          <span class="keyword">const</span> std::vector&lt;ValueType&gt;&amp; globals,</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>          <span class="keyword">const</span> std::vector&lt;uint8_t&gt;&amp; mutable_globals,</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>          <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; structs,</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>          <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; arrays,</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>          <span class="keyword">const</span> StringImports&amp; strings, DataRange* data)</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>      : <a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>),</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>(<a class="code hl_variable" href="liftoff-compiler_8cc.html#ac96b98a543c504abf4ffd7eaa447e94a">fn</a>),</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>(functions),</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#ac4f9b6d6cb579b84f6722d37b6217c10">globals_</a>(globals),</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a627a3560d110093764ccc48dd9109f4c">mutable_globals_</a>(mutable_globals),</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>(structs),</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>(arrays),</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>(strings) {</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = <a class="code hl_variable" href="liftoff-compiler_8cc.html#ac96b98a543c504abf4ffd7eaa447e94a">fn</a>-&gt;signature();</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>    <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.emplace_back();</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>      <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>.back().push_back(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>    }</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>    <a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>.resize(data-&gt;get&lt;uint8_t&gt;() % kMaxLocals);</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>    uint32_t num_types = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size());</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>    for (ValueType&amp; local : <a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>) {</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>      local = GetValueType(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, data, num_types);</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>      <a class="code hl_variable" href="liftoff-compiler_8cc.html#ac96b98a543c504abf4ffd7eaa447e94a">fn</a>-&gt;AddLocal(local);</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>    }</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>  }</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span> </div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>  <span class="keywordtype">int</span> NumImportedFunctions() {</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;NumImportedFunctions();</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>  }</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span> </div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>  <span class="comment">// Generator functions.</span></div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>  <span class="comment">// Implementation detail: We define non-template Generate*TYPE*() functions</span></div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>  <span class="comment">// instead of templatized Generate&lt;TYPE&gt;(). This is because we cannot define</span></div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>  <span class="comment">// the templatized Generate&lt;TYPE&gt;() functions:</span></div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>  <span class="comment">//  - outside of the class body without specializing the template of the</span></div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>  <span class="comment">//  `BodyGen` (results in partial template specialization error);</span></div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>  <span class="comment">//  - inside of the class body (gcc complains about explicit specialization in</span></div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>  <span class="comment">//  non-namespace scope).</span></div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span> </div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>  <span class="keywordtype">void</span> GenerateVoid(DataRange* data) {</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>    GeneratorRecursionScope rec_scope(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>    <span class="keywordflow">if</span> (recursion_limit_reached() || data-&gt;size() == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span> </div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kMvpAlternatives =</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>        CreateArray(&amp;BodyGen::sequence&lt;kVoid, kVoid&gt;,</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>                    &amp;BodyGen::sequence&lt;kVoid, kVoid, kVoid, kVoid&gt;,</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>                    &amp;BodyGen::sequence&lt;kVoid, kVoid, kVoid, kVoid, kVoid, kVoid,</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>                                       kVoid, kVoid&gt;,</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>                    &amp;BodyGen::block&lt;kVoid&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>                    &amp;BodyGen::loop&lt;kVoid&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>                    &amp;BodyGen::finite_loop&lt;kVoid&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>                    &amp;BodyGen::if_&lt;kVoid, kIf&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>                    &amp;BodyGen::if_&lt;kVoid, kIfElse&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>                    &amp;BodyGen::br,                      <span class="comment">//</span></div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>                    &amp;BodyGen::br_if&lt;kVoid&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>                    &amp;BodyGen::br_on_null&lt;kVoid&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>                    &amp;BodyGen::br_on_non_null&lt;kVoid&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>                    &amp;BodyGen::br_table&lt;kVoid&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>                    &amp;BodyGen::try_table_block&lt;kVoid&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>                    &amp;BodyGen::return_op,               <span class="comment">//</span></div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span> </div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>                    &amp;BodyGen::memop&lt;kExprI32StoreMem, kI32&gt;,</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>                    &amp;BodyGen::memop&lt;kExprI32StoreMem8, kI32&gt;,</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>                    &amp;BodyGen::memop&lt;kExprI32StoreMem16, kI32&gt;,</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>                    &amp;BodyGen::memop&lt;kExprI64StoreMem, kI64&gt;,</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>                    &amp;BodyGen::memop&lt;kExprI64StoreMem8, kI64&gt;,</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>                    &amp;BodyGen::memop&lt;kExprI64StoreMem16, kI64&gt;,</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>                    &amp;BodyGen::memop&lt;kExprI64StoreMem32, kI64&gt;,</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>                    &amp;BodyGen::memop&lt;kExprF32StoreMem, kF32&gt;,</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>                    &amp;BodyGen::memop&lt;kExprF64StoreMem, kF64&gt;,</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>                    &amp;BodyGen::memop&lt;kExprI32AtomicStore, kI32&gt;,</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>                    &amp;BodyGen::memop&lt;kExprI32AtomicStore8U, kI32&gt;,</div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>                    &amp;BodyGen::memop&lt;kExprI32AtomicStore16U, kI32&gt;,</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>                    &amp;BodyGen::memop&lt;kExprI64AtomicStore, kI64&gt;,</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>                    &amp;BodyGen::memop&lt;kExprI64AtomicStore8U, kI64&gt;,</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>                    &amp;BodyGen::memop&lt;kExprI64AtomicStore16U, kI64&gt;,</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>                    &amp;BodyGen::memop&lt;kExprI64AtomicStore32U, kI64&gt;,</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span> </div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>                    &amp;BodyGen::drop,</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span> </div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>                    &amp;BodyGen::call&lt;kVoid&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>                    &amp;BodyGen::call_indirect&lt;kVoid&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>                    &amp;BodyGen::call_ref&lt;kVoid&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span> </div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>                    &amp;BodyGen::set_local,         <span class="comment">//</span></div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>                    &amp;BodyGen::set_global,        <span class="comment">//</span></div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>                    &amp;BodyGen::throw_or_rethrow,  <span class="comment">//</span></div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>                    &amp;BodyGen::try_block&lt;kVoid&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span> </div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>                    &amp;BodyGen::table_set,   <span class="comment">//</span></div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>                    &amp;BodyGen::table_fill,  <span class="comment">//</span></div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>                    &amp;BodyGen::table_copy);</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span> </div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kSimdAlternatives =</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>        CreateArray(&amp;BodyGen::memop&lt;kExprS128StoreMem, kS128&gt;,</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>                    &amp;BodyGen::simd_lane_memop&lt;kExprS128Store8Lane, 16, kS128&gt;,</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>                    &amp;BodyGen::simd_lane_memop&lt;kExprS128Store16Lane, 8, kS128&gt;,</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>                    &amp;BodyGen::simd_lane_memop&lt;kExprS128Store32Lane, 4, kS128&gt;,</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>                    &amp;BodyGen::simd_lane_memop&lt;kExprS128Store64Lane, 2, kS128&gt;);</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span> </div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kWasmGCAlternatives =</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>        CreateArray(&amp;BodyGen::struct_set,       <span class="comment">//</span></div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>                    &amp;BodyGen::array_set,        <span class="comment">//</span></div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>                    &amp;BodyGen::array_copy,       <span class="comment">//</span></div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>                    &amp;BodyGen::array_fill,       <span class="comment">//</span></div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>                    &amp;BodyGen::array_init_data,  <span class="comment">//</span></div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>                    &amp;BodyGen::array_init_elem);</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span> </div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> GeneratorAlternativesPerOption kAlternativesPerOptions{</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>        kMvpAlternatives, kSimdAlternatives, kWasmGCAlternatives};</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span> </div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>    GenerateOneOf(kAlternativesPerOptions, data);</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>  }</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span> </div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>  <span class="keywordtype">void</span> GenerateI32(DataRange* data) {</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>    GeneratorRecursionScope rec_scope(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>    <span class="keywordflow">if</span> (recursion_limit_reached() || data-&gt;size() &lt;= 1) {</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>      <span class="comment">// Rather than evenly distributing values across the full 32-bit range,</span></div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>      <span class="comment">// distribute them evenly over the possible bit lengths. In particular,</span></div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>      <span class="comment">// for values used as indices into something else, smaller values are</span></div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>      <span class="comment">// more likely to be useful.</span></div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>      uint8_t size = 1 + (data-&gt;getPseudoRandom&lt;uint8_t&gt;() &amp; 31);</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>      uint32_t <a class="code hl_variable" href="machine-operator-reducer_8cc.html#a406af858c5259e17f9ddc64513999dac">mask</a> = <a class="code hl_variable" href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">kMaxUInt32</a> &gt;&gt; (32 - <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>);</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(data-&gt;getPseudoRandom&lt;uint32_t&gt;() &amp; <a class="code hl_variable" href="machine-operator-reducer_8cc.html#a406af858c5259e17f9ddc64513999dac">mask</a>);</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>    }</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span> </div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kMvpAlternatives = CreateArray(</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>        &amp;BodyGen::i32_const&lt;1&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>        &amp;BodyGen::i32_const&lt;2&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>        &amp;BodyGen::i32_const&lt;3&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>        &amp;BodyGen::i32_const&lt;4&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span> </div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>        &amp;BodyGen::sequence&lt;kI32, kVoid&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>        &amp;BodyGen::sequence&lt;kVoid, kI32&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>        &amp;BodyGen::sequence&lt;kVoid, kI32, kVoid&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span> </div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>        &amp;BodyGen::op&lt;kExprI32Eqz, kI32&gt;,        <span class="comment">//</span></div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>        &amp;BodyGen::op&lt;kExprI32Eq, kI32, kI32&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>        &amp;BodyGen::op&lt;kExprI32Ne, kI32, kI32&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>        &amp;BodyGen::op&lt;kExprI32LtS, kI32, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>        &amp;BodyGen::op&lt;kExprI32LtU, kI32, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>        &amp;BodyGen::op&lt;kExprI32GeS, kI32, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>        &amp;BodyGen::op&lt;kExprI32GeU, kI32, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span> </div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>        &amp;BodyGen::op&lt;kExprI64Eqz, kI64&gt;,        <span class="comment">//</span></div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>        &amp;BodyGen::op&lt;kExprI64Eq, kI64, kI64&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>        &amp;BodyGen::op&lt;kExprI64Ne, kI64, kI64&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>        &amp;BodyGen::op&lt;kExprI64LtS, kI64, kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>        &amp;BodyGen::op&lt;kExprI64LtU, kI64, kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>        &amp;BodyGen::op&lt;kExprI64GeS, kI64, kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>        &amp;BodyGen::op&lt;kExprI64GeU, kI64, kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span> </div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        &amp;BodyGen::op&lt;kExprF32Eq, kF32, kF32&gt;,</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>        &amp;BodyGen::op&lt;kExprF32Ne, kF32, kF32&gt;,</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>        &amp;BodyGen::op&lt;kExprF32Lt, kF32, kF32&gt;,</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>        &amp;BodyGen::op&lt;kExprF32Ge, kF32, kF32&gt;,</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span> </div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>        &amp;BodyGen::op&lt;kExprF64Eq, kF64, kF64&gt;,</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>        &amp;BodyGen::op&lt;kExprF64Ne, kF64, kF64&gt;,</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>        &amp;BodyGen::op&lt;kExprF64Lt, kF64, kF64&gt;,</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>        &amp;BodyGen::op&lt;kExprF64Ge, kF64, kF64&gt;,</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span> </div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>        &amp;BodyGen::op&lt;kExprI32Add, kI32, kI32&gt;,</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>        &amp;BodyGen::op&lt;kExprI32Sub, kI32, kI32&gt;,</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>        &amp;BodyGen::op&lt;kExprI32Mul, kI32, kI32&gt;,</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span> </div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>        &amp;BodyGen::op&lt;kExprI32DivS, kI32, kI32&gt;,</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>        &amp;BodyGen::op&lt;kExprI32DivU, kI32, kI32&gt;,</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>        &amp;BodyGen::op&lt;kExprI32RemS, kI32, kI32&gt;,</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>        &amp;BodyGen::op&lt;kExprI32RemU, kI32, kI32&gt;,</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span> </div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>        &amp;BodyGen::op&lt;kExprI32And, kI32, kI32&gt;,</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>        &amp;BodyGen::op&lt;kExprI32Ior, kI32, kI32&gt;,</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>        &amp;BodyGen::op&lt;kExprI32Xor, kI32, kI32&gt;,</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>        &amp;BodyGen::op&lt;kExprI32Shl, kI32, kI32&gt;,</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>        &amp;BodyGen::op&lt;kExprI32ShrU, kI32, kI32&gt;,</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>        &amp;BodyGen::op&lt;kExprI32ShrS, kI32, kI32&gt;,</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>        &amp;BodyGen::op&lt;kExprI32Ror, kI32, kI32&gt;,</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>        &amp;BodyGen::op&lt;kExprI32Rol, kI32, kI32&gt;,</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span> </div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>        &amp;BodyGen::op&lt;kExprI32Clz, kI32&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>        &amp;BodyGen::op&lt;kExprI32Ctz, kI32&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>        &amp;BodyGen::op&lt;kExprI32Popcnt, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span> </div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>        &amp;BodyGen::op&lt;kExprI32ConvertI64, kI64&gt;,</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>        &amp;BodyGen::op&lt;kExprI32SConvertF32, kF32&gt;,</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>        &amp;BodyGen::op&lt;kExprI32UConvertF32, kF32&gt;,</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>        &amp;BodyGen::op&lt;kExprI32SConvertF64, kF64&gt;,</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>        &amp;BodyGen::op&lt;kExprI32UConvertF64, kF64&gt;,</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>        &amp;BodyGen::op&lt;kExprI32ReinterpretF32, kF32&gt;,</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span> </div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32SConvertSatF32, kF32&gt;,</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32UConvertSatF32, kF32&gt;,</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32SConvertSatF64, kF64&gt;,</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32UConvertSatF64, kF64&gt;,</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span> </div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>        &amp;BodyGen::block&lt;kI32&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>        &amp;BodyGen::loop&lt;kI32&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>        &amp;BodyGen::finite_loop&lt;kI32&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>        &amp;BodyGen::if_&lt;kI32, kIfElse&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>        &amp;BodyGen::br_if&lt;kI32&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>        &amp;BodyGen::br_on_null&lt;kI32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>        &amp;BodyGen::br_on_non_null&lt;kI32&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>        &amp;BodyGen::br_table&lt;kI32&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>        &amp;BodyGen::try_table_block&lt;kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span> </div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>        &amp;BodyGen::memop&lt;kExprI32LoadMem&gt;,                               <span class="comment">//</span></div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>        &amp;BodyGen::memop&lt;kExprI32LoadMem8S&gt;,                             <span class="comment">//</span></div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>        &amp;BodyGen::memop&lt;kExprI32LoadMem8U&gt;,                             <span class="comment">//</span></div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>        &amp;BodyGen::memop&lt;kExprI32LoadMem16S&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>        &amp;BodyGen::memop&lt;kExprI32LoadMem16U&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>                                                                        <span class="comment">//</span></div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>        &amp;BodyGen::memop&lt;kExprI32AtomicLoad&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>        &amp;BodyGen::memop&lt;kExprI32AtomicLoad8U&gt;,                          <span class="comment">//</span></div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>        &amp;BodyGen::memop&lt;kExprI32AtomicLoad16U&gt;,                         <span class="comment">//</span></div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>        &amp;BodyGen::memop&lt;kExprI32AtomicAdd, kI32&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>        &amp;BodyGen::memop&lt;kExprI32AtomicSub, kI32&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>        &amp;BodyGen::memop&lt;kExprI32AtomicAnd, kI32&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>        &amp;BodyGen::memop&lt;kExprI32AtomicOr, kI32&gt;,                        <span class="comment">//</span></div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>        &amp;BodyGen::memop&lt;kExprI32AtomicXor, kI32&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>        &amp;BodyGen::memop&lt;kExprI32AtomicExchange, kI32&gt;,                  <span class="comment">//</span></div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>        &amp;BodyGen::memop&lt;kExprI32AtomicCompareExchange, kI32, kI32&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>        &amp;BodyGen::memop&lt;kExprI32AtomicAdd8U, kI32&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>        &amp;BodyGen::memop&lt;kExprI32AtomicSub8U, kI32&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>        &amp;BodyGen::memop&lt;kExprI32AtomicAnd8U, kI32&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>        &amp;BodyGen::memop&lt;kExprI32AtomicOr8U, kI32&gt;,                      <span class="comment">//</span></div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>        &amp;BodyGen::memop&lt;kExprI32AtomicXor8U, kI32&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>        &amp;BodyGen::memop&lt;kExprI32AtomicExchange8U, kI32&gt;,                <span class="comment">//</span></div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>        &amp;BodyGen::memop&lt;kExprI32AtomicCompareExchange8U, kI32, kI32&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>        &amp;BodyGen::memop&lt;kExprI32AtomicAdd16U, kI32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>        &amp;BodyGen::memop&lt;kExprI32AtomicSub16U, kI32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>        &amp;BodyGen::memop&lt;kExprI32AtomicAnd16U, kI32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>        &amp;BodyGen::memop&lt;kExprI32AtomicOr16U, kI32&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>        &amp;BodyGen::memop&lt;kExprI32AtomicXor16U, kI32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>        &amp;BodyGen::memop&lt;kExprI32AtomicExchange16U, kI32&gt;,               <span class="comment">//</span></div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>        &amp;BodyGen::memop&lt;kExprI32AtomicCompareExchange16U, kI32, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span> </div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>        &amp;BodyGen::memory_size,  <span class="comment">//</span></div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>        &amp;BodyGen::grow_memory,  <span class="comment">//</span></div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span> </div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>        &amp;BodyGen::get_local&lt;kI32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>        &amp;BodyGen::tee_local&lt;kI32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>        &amp;BodyGen::get_global&lt;kI32&gt;,                   <span class="comment">//</span></div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>        &amp;BodyGen::op&lt;kExprSelect, kI32, kI32, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>        &amp;BodyGen::select_with_type&lt;kI32&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span> </div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>        &amp;BodyGen::call&lt;kI32&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>        &amp;BodyGen::call_indirect&lt;kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>        &amp;BodyGen::call_ref&lt;kI32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>        &amp;BodyGen::try_block&lt;kI32&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span> </div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>        &amp;BodyGen::table_size,  <span class="comment">//</span></div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>        &amp;BodyGen::table_grow);</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span> </div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kSimdAlternatives =</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>        CreateArray(&amp;BodyGen::op_with_prefix&lt;kExprV128AnyTrue, kS128&gt;,</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI8x16AllTrue, kS128&gt;,</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI8x16BitMask, kS128&gt;,</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI16x8AllTrue, kS128&gt;,</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI16x8BitMask, kS128&gt;,</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI32x4AllTrue, kS128&gt;,</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI32x4BitMask, kS128&gt;,</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI64x2AllTrue, kS128&gt;,</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>                    &amp;BodyGen::op_with_prefix&lt;kExprI64x2BitMask, kS128&gt;,</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>                    &amp;BodyGen::simd_lane_op&lt;kExprI8x16ExtractLaneS, 16, kS128&gt;,</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>                    &amp;BodyGen::simd_lane_op&lt;kExprI8x16ExtractLaneU, 16, kS128&gt;,</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>                    &amp;BodyGen::simd_lane_op&lt;kExprI16x8ExtractLaneS, 8, kS128&gt;,</div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>                    &amp;BodyGen::simd_lane_op&lt;kExprI16x8ExtractLaneU, 8, kS128&gt;,</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>                    &amp;BodyGen::simd_lane_op&lt;kExprI32x4ExtractLane, 4, kS128&gt;);</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span> </div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kWasmGCAlternatives =</div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>        CreateArray(&amp;BodyGen::i31_get,                     <span class="comment">//</span></div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>                                                           <span class="comment">//</span></div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>                    &amp;BodyGen::struct_get&lt;kI32&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>                    &amp;BodyGen::array_get&lt;kI32&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>                    &amp;BodyGen::array_len,                   <span class="comment">//</span></div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>                                                           <span class="comment">//</span></div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>                    &amp;BodyGen::ref_is_null,                 <span class="comment">//</span></div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>                    &amp;BodyGen::ref_eq,                      <span class="comment">//</span></div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>                    &amp;BodyGen::ref_test&lt;kExprRefTest&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>                    &amp;BodyGen::ref_test&lt;kExprRefTestNull&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>                                                           <span class="comment">//</span></div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>                    &amp;BodyGen::string_test,                 <span class="comment">//</span></div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>                    &amp;BodyGen::string_charcodeat,           <span class="comment">//</span></div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>                    &amp;BodyGen::string_codepointat,          <span class="comment">//</span></div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>                    &amp;BodyGen::string_length,               <span class="comment">//</span></div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>                    &amp;BodyGen::string_equals,               <span class="comment">//</span></div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>                    &amp;BodyGen::string_compare,              <span class="comment">//</span></div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>                    &amp;BodyGen::string_intocharcodearray,    <span class="comment">//</span></div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>                    &amp;BodyGen::string_intoutf8array,        <span class="comment">//</span></div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>                    &amp;BodyGen::string_measureutf8);</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span> </div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> GeneratorAlternativesPerOption kAlternativesPerOptions{</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>        kMvpAlternatives, kSimdAlternatives, kWasmGCAlternatives};</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span> </div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>    GenerateOneOf(kAlternativesPerOptions, data);</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>  }</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span> </div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>  <span class="keywordtype">void</span> GenerateI64(DataRange* data) {</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>    GeneratorRecursionScope rec_scope(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>    <span class="keywordflow">if</span> (recursion_limit_reached() || data-&gt;size() &lt;= 1) {</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI64Const(data-&gt;getPseudoRandom&lt;int64_t&gt;());</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>    }</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span> </div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kMvpAlternatives = CreateArray(</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>        &amp;BodyGen::i64_const&lt;1&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>        &amp;BodyGen::i64_const&lt;2&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>        &amp;BodyGen::i64_const&lt;3&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>        &amp;BodyGen::i64_const&lt;4&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>        &amp;BodyGen::i64_const&lt;5&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>        &amp;BodyGen::i64_const&lt;6&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>        &amp;BodyGen::i64_const&lt;7&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>        &amp;BodyGen::i64_const&lt;8&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span> </div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>        &amp;BodyGen::sequence&lt;kI64, kVoid&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>        &amp;BodyGen::sequence&lt;kVoid, kI64&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>        &amp;BodyGen::sequence&lt;kVoid, kI64, kVoid&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span> </div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>        &amp;BodyGen::op&lt;kExprI64Add, kI64, kI64&gt;,</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>        &amp;BodyGen::op&lt;kExprI64Sub, kI64, kI64&gt;,</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>        &amp;BodyGen::op&lt;kExprI64Mul, kI64, kI64&gt;,</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span> </div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>        &amp;BodyGen::op&lt;kExprI64DivS, kI64, kI64&gt;,</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>        &amp;BodyGen::op&lt;kExprI64DivU, kI64, kI64&gt;,</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>        &amp;BodyGen::op&lt;kExprI64RemS, kI64, kI64&gt;,</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>        &amp;BodyGen::op&lt;kExprI64RemU, kI64, kI64&gt;,</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span> </div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>        &amp;BodyGen::op&lt;kExprI64And, kI64, kI64&gt;,</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>        &amp;BodyGen::op&lt;kExprI64Ior, kI64, kI64&gt;,</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>        &amp;BodyGen::op&lt;kExprI64Xor, kI64, kI64&gt;,</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>        &amp;BodyGen::op&lt;kExprI64Shl, kI64, kI64&gt;,</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>        &amp;BodyGen::op&lt;kExprI64ShrU, kI64, kI64&gt;,</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>        &amp;BodyGen::op&lt;kExprI64ShrS, kI64, kI64&gt;,</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>        &amp;BodyGen::op&lt;kExprI64Ror, kI64, kI64&gt;,</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>        &amp;BodyGen::op&lt;kExprI64Rol, kI64, kI64&gt;,</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span> </div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>        &amp;BodyGen::op&lt;kExprI64Clz, kI64&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>        &amp;BodyGen::op&lt;kExprI64Ctz, kI64&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>        &amp;BodyGen::op&lt;kExprI64Popcnt, kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span> </div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64SConvertSatF32, kF32&gt;,</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64UConvertSatF32, kF32&gt;,</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64SConvertSatF64, kF64&gt;,</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64UConvertSatF64, kF64&gt;,</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span> </div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>        &amp;BodyGen::block&lt;kI64&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>        &amp;BodyGen::loop&lt;kI64&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>        &amp;BodyGen::finite_loop&lt;kI64&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>        &amp;BodyGen::if_&lt;kI64, kIfElse&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>        &amp;BodyGen::br_if&lt;kI64&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>        &amp;BodyGen::br_on_null&lt;kI64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>        &amp;BodyGen::br_on_non_null&lt;kI64&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>        &amp;BodyGen::br_table&lt;kI64&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>        &amp;BodyGen::try_table_block&lt;kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span> </div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>        &amp;BodyGen::memop&lt;kExprI64LoadMem&gt;,                               <span class="comment">//</span></div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>        &amp;BodyGen::memop&lt;kExprI64LoadMem8S&gt;,                             <span class="comment">//</span></div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>        &amp;BodyGen::memop&lt;kExprI64LoadMem8U&gt;,                             <span class="comment">//</span></div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>        &amp;BodyGen::memop&lt;kExprI64LoadMem16S&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>        &amp;BodyGen::memop&lt;kExprI64LoadMem16U&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>        &amp;BodyGen::memop&lt;kExprI64LoadMem32S&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>        &amp;BodyGen::memop&lt;kExprI64LoadMem32U&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>                                                                        <span class="comment">//</span></div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>        &amp;BodyGen::memop&lt;kExprI64AtomicLoad&gt;,                            <span class="comment">//</span></div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>        &amp;BodyGen::memop&lt;kExprI64AtomicLoad8U&gt;,                          <span class="comment">//</span></div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>        &amp;BodyGen::memop&lt;kExprI64AtomicLoad16U&gt;,                         <span class="comment">//</span></div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>        &amp;BodyGen::memop&lt;kExprI64AtomicLoad32U&gt;,                         <span class="comment">//</span></div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAdd, kI64&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>        &amp;BodyGen::memop&lt;kExprI64AtomicSub, kI64&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAnd, kI64&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>        &amp;BodyGen::memop&lt;kExprI64AtomicOr, kI64&gt;,                        <span class="comment">//</span></div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>        &amp;BodyGen::memop&lt;kExprI64AtomicXor, kI64&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>        &amp;BodyGen::memop&lt;kExprI64AtomicExchange, kI64&gt;,                  <span class="comment">//</span></div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>        &amp;BodyGen::memop&lt;kExprI64AtomicCompareExchange, kI64, kI64&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAdd8U, kI64&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>        &amp;BodyGen::memop&lt;kExprI64AtomicSub8U, kI64&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAnd8U, kI64&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>        &amp;BodyGen::memop&lt;kExprI64AtomicOr8U, kI64&gt;,                      <span class="comment">//</span></div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>        &amp;BodyGen::memop&lt;kExprI64AtomicXor8U, kI64&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>        &amp;BodyGen::memop&lt;kExprI64AtomicExchange8U, kI64&gt;,                <span class="comment">//</span></div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>        &amp;BodyGen::memop&lt;kExprI64AtomicCompareExchange8U, kI64, kI64&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAdd16U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>        &amp;BodyGen::memop&lt;kExprI64AtomicSub16U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAnd16U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>        &amp;BodyGen::memop&lt;kExprI64AtomicOr16U, kI64&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>        &amp;BodyGen::memop&lt;kExprI64AtomicXor16U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>        &amp;BodyGen::memop&lt;kExprI64AtomicExchange16U, kI64&gt;,               <span class="comment">//</span></div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>        &amp;BodyGen::memop&lt;kExprI64AtomicCompareExchange16U, kI64, kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAdd32U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>        &amp;BodyGen::memop&lt;kExprI64AtomicSub32U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>        &amp;BodyGen::memop&lt;kExprI64AtomicAnd32U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>        &amp;BodyGen::memop&lt;kExprI64AtomicOr32U, kI64&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>        &amp;BodyGen::memop&lt;kExprI64AtomicXor32U, kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>        &amp;BodyGen::memop&lt;kExprI64AtomicExchange32U, kI64&gt;,               <span class="comment">//</span></div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>        &amp;BodyGen::memop&lt;kExprI64AtomicCompareExchange32U, kI64, kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span> </div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>        &amp;BodyGen::get_local&lt;kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>        &amp;BodyGen::tee_local&lt;kI64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>        &amp;BodyGen::get_global&lt;kI64&gt;,                   <span class="comment">//</span></div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>        &amp;BodyGen::op&lt;kExprSelect, kI64, kI64, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>        &amp;BodyGen::select_with_type&lt;kI64&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span> </div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>        &amp;BodyGen::call&lt;kI64&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>        &amp;BodyGen::call_indirect&lt;kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>        &amp;BodyGen::call_ref&lt;kI64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>        &amp;BodyGen::try_block&lt;kI64&gt;);</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span> </div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kSimdAlternatives =</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>        CreateArray(&amp;BodyGen::simd_lane_op&lt;kExprI64x2ExtractLane, 2, kS128&gt;);</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span> </div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kWasmGCAlternatives =</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span>        CreateArray(&amp;BodyGen::struct_get&lt;kI64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>                    &amp;BodyGen::array_get&lt;kI64&gt;);</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span> </div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> GeneratorAlternativesPerOption kAlternativesPerOptions{</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>        kMvpAlternatives, kSimdAlternatives, kWasmGCAlternatives};</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span> </div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>    GenerateOneOf(kAlternativesPerOptions, data);</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>  }</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span> </div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>  <span class="keywordtype">void</span> GenerateF32(DataRange* data) {</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>    GeneratorRecursionScope rec_scope(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>    <span class="keywordflow">if</span> (recursion_limit_reached() || data-&gt;size() &lt;= <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>)) {</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitF32Const(data-&gt;getPseudoRandom&lt;<span class="keywordtype">float</span>&gt;());</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>    }</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span> </div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kMvpAlternatives = CreateArray(</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>        &amp;BodyGen::sequence&lt;kF32, kVoid&gt;, &amp;BodyGen::sequence&lt;kVoid, kF32&gt;,</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>        &amp;BodyGen::sequence&lt;kVoid, kF32, kVoid&gt;,</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span> </div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>        &amp;BodyGen::op&lt;kExprF32Abs, kF32&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>        &amp;BodyGen::op&lt;kExprF32Neg, kF32&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>        &amp;BodyGen::op&lt;kExprF32Ceil, kF32&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>        &amp;BodyGen::op&lt;kExprF32Floor, kF32&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>        &amp;BodyGen::op&lt;kExprF32Trunc, kF32&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>        &amp;BodyGen::op&lt;kExprF32NearestInt, kF32&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>        &amp;BodyGen::op&lt;kExprF32Sqrt, kF32&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>        &amp;BodyGen::op&lt;kExprF32Add, kF32, kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>        &amp;BodyGen::op&lt;kExprF32Sub, kF32, kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>        &amp;BodyGen::op&lt;kExprF32Mul, kF32, kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>        &amp;BodyGen::op&lt;kExprF32Div, kF32, kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>        &amp;BodyGen::op&lt;kExprF32Min, kF32, kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>        &amp;BodyGen::op&lt;kExprF32Max, kF32, kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>        &amp;BodyGen::op&lt;kExprF32CopySign, kF32, kF32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span> </div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>        &amp;BodyGen::op&lt;kExprF32SConvertI32, kI32&gt;,</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>        &amp;BodyGen::op&lt;kExprF32UConvertI32, kI32&gt;,</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>        &amp;BodyGen::op&lt;kExprF32SConvertI64, kI64&gt;,</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>        &amp;BodyGen::op&lt;kExprF32UConvertI64, kI64&gt;,</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>        &amp;BodyGen::op&lt;kExprF32ConvertF64, kF64&gt;,</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>        &amp;BodyGen::op&lt;kExprF32ReinterpretI32, kI32&gt;,</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span> </div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>        &amp;BodyGen::block&lt;kF32&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>        &amp;BodyGen::loop&lt;kF32&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>        &amp;BodyGen::finite_loop&lt;kF32&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>        &amp;BodyGen::if_&lt;kF32, kIfElse&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>        &amp;BodyGen::br_if&lt;kF32&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>        &amp;BodyGen::br_on_null&lt;kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>        &amp;BodyGen::br_on_non_null&lt;kF32&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>        &amp;BodyGen::br_table&lt;kF32&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>        &amp;BodyGen::try_table_block&lt;kF32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span> </div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>        &amp;BodyGen::memop&lt;kExprF32LoadMem&gt;,</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span> </div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>        &amp;BodyGen::get_local&lt;kF32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>        &amp;BodyGen::tee_local&lt;kF32&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>        &amp;BodyGen::get_global&lt;kF32&gt;,                   <span class="comment">//</span></div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>        &amp;BodyGen::op&lt;kExprSelect, kF32, kF32, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>        &amp;BodyGen::select_with_type&lt;kF32&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span> </div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>        &amp;BodyGen::call&lt;kF32&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>        &amp;BodyGen::call_indirect&lt;kF32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>        &amp;BodyGen::call_ref&lt;kF32&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>        &amp;BodyGen::try_block&lt;kF32&gt;);</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span> </div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kSimdAlternatives =</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>        CreateArray(&amp;BodyGen::simd_lane_op&lt;kExprF32x4ExtractLane, 4, kS128&gt;);</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span> </div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kWasmGCAlternatives =</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>        CreateArray(&amp;BodyGen::struct_get&lt;kF32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>                    &amp;BodyGen::array_get&lt;kF32&gt;);</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span> </div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> GeneratorAlternativesPerOption kAlternativesPerOptions{</div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>        kMvpAlternatives, kSimdAlternatives, kWasmGCAlternatives};</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span> </div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>    GenerateOneOf(kAlternativesPerOptions, data);</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>  }</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span> </div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>  <span class="keywordtype">void</span> GenerateF64(DataRange* data) {</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>    GeneratorRecursionScope rec_scope(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>    <span class="keywordflow">if</span> (recursion_limit_reached() || data-&gt;size() &lt;= <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>)) {</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitF64Const(data-&gt;getPseudoRandom&lt;<span class="keywordtype">double</span>&gt;());</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>    }</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span> </div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kMvpAlternatives = CreateArray(</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>        &amp;BodyGen::sequence&lt;kF64, kVoid&gt;, &amp;BodyGen::sequence&lt;kVoid, kF64&gt;,</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>        &amp;BodyGen::sequence&lt;kVoid, kF64, kVoid&gt;,</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span> </div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>        &amp;BodyGen::op&lt;kExprF64Abs, kF64&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>        &amp;BodyGen::op&lt;kExprF64Neg, kF64&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>        &amp;BodyGen::op&lt;kExprF64Ceil, kF64&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>        &amp;BodyGen::op&lt;kExprF64Floor, kF64&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>        &amp;BodyGen::op&lt;kExprF64Trunc, kF64&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>        &amp;BodyGen::op&lt;kExprF64NearestInt, kF64&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>        &amp;BodyGen::op&lt;kExprF64Sqrt, kF64&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>        &amp;BodyGen::op&lt;kExprF64Add, kF64, kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>        &amp;BodyGen::op&lt;kExprF64Sub, kF64, kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>        &amp;BodyGen::op&lt;kExprF64Mul, kF64, kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>        &amp;BodyGen::op&lt;kExprF64Div, kF64, kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>        &amp;BodyGen::op&lt;kExprF64Min, kF64, kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>        &amp;BodyGen::op&lt;kExprF64Max, kF64, kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>        &amp;BodyGen::op&lt;kExprF64CopySign, kF64, kF64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span> </div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>        &amp;BodyGen::op&lt;kExprF64SConvertI32, kI32&gt;,</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>        &amp;BodyGen::op&lt;kExprF64UConvertI32, kI32&gt;,</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>        &amp;BodyGen::op&lt;kExprF64SConvertI64, kI64&gt;,</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>        &amp;BodyGen::op&lt;kExprF64UConvertI64, kI64&gt;,</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>        &amp;BodyGen::op&lt;kExprF64ConvertF32, kF32&gt;,</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>        &amp;BodyGen::op&lt;kExprF64ReinterpretI64, kI64&gt;,</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span> </div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>        &amp;BodyGen::block&lt;kF64&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>        &amp;BodyGen::loop&lt;kF64&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>        &amp;BodyGen::finite_loop&lt;kF64&gt;,      <span class="comment">//</span></div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>        &amp;BodyGen::if_&lt;kF64, kIfElse&gt;,     <span class="comment">//</span></div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>        &amp;BodyGen::br_if&lt;kF64&gt;,            <span class="comment">//</span></div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>        &amp;BodyGen::br_on_null&lt;kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>        &amp;BodyGen::br_on_non_null&lt;kF64&gt;,   <span class="comment">//</span></div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>        &amp;BodyGen::br_table&lt;kF64&gt;,         <span class="comment">//</span></div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>        &amp;BodyGen::try_table_block&lt;kF64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span> </div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>        &amp;BodyGen::memop&lt;kExprF64LoadMem&gt;,</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span> </div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>        &amp;BodyGen::get_local&lt;kF64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>        &amp;BodyGen::tee_local&lt;kF64&gt;,                    <span class="comment">//</span></div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>        &amp;BodyGen::get_global&lt;kF64&gt;,                   <span class="comment">//</span></div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>        &amp;BodyGen::op&lt;kExprSelect, kF64, kF64, kI32&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>        &amp;BodyGen::select_with_type&lt;kF64&gt;,             <span class="comment">//</span></div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span> </div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>        &amp;BodyGen::call&lt;kF64&gt;,           <span class="comment">//</span></div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>        &amp;BodyGen::call_indirect&lt;kF64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>        &amp;BodyGen::call_ref&lt;kF64&gt;,       <span class="comment">//</span></div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>        &amp;BodyGen::try_block&lt;kF64&gt;);</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span> </div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kSimdAlternatives =</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>        CreateArray(&amp;BodyGen::simd_lane_op&lt;kExprF64x2ExtractLane, 2, kS128&gt;);</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span> </div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> kWasmGCAlternatives =</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>        CreateArray(&amp;BodyGen::struct_get&lt;kF64&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>                    &amp;BodyGen::array_get&lt;kF64&gt;);</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span> </div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> GeneratorAlternativesPerOption kAlternativesPerOptions{</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>        kMvpAlternatives, kSimdAlternatives, kWasmGCAlternatives};</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span> </div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>    GenerateOneOf(kAlternativesPerOptions, data);</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>  }</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span> </div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>  <span class="keywordtype">void</span> GenerateS128(DataRange* data) {</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>.generate_simd());</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>    GeneratorRecursionScope rec_scope(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>    <span class="keywordflow">if</span> (recursion_limit_reached() || data-&gt;size() &lt;= <span class="keyword">sizeof</span>(int32_t)) {</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>      <span class="comment">// TODO(v8:8460): v128.const is not implemented yet, and we need a way to</span></div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>      <span class="comment">// &quot;bottom-out&quot;, so use a splat to generate this.</span></div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(0);</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprI8x16Splat);</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>    }</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span> </div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>    <span class="keyword">constexpr</span> <span class="keyword">auto</span> alternatives = CreateArray(</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>        &amp;BodyGen::simd_const,</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>        &amp;BodyGen::simd_lane_op&lt;kExprI8x16ReplaceLane, 16, kS128, kI32&gt;,</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>        &amp;BodyGen::simd_lane_op&lt;kExprI16x8ReplaceLane, 8, kS128, kI32&gt;,</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>        &amp;BodyGen::simd_lane_op&lt;kExprI32x4ReplaceLane, 4, kS128, kI32&gt;,</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>        &amp;BodyGen::simd_lane_op&lt;kExprI64x2ReplaceLane, 2, kS128, kI64&gt;,</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>        &amp;BodyGen::simd_lane_op&lt;kExprF32x4ReplaceLane, 4, kS128, kF32&gt;,</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>        &amp;BodyGen::simd_lane_op&lt;kExprF64x2ReplaceLane, 2, kS128, kF64&gt;,</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span> </div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Splat, kI32&gt;,</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Eq, kS128, kS128&gt;,</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Ne, kS128, kS128&gt;,</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16LtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16LtU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16GtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16GtU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16LeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16LeU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16GeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16GeU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Abs, kS128&gt;,</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Neg, kS128&gt;,</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Shl, kS128, kI32&gt;,</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16ShrS, kS128, kI32&gt;,</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16ShrU, kS128, kI32&gt;,</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Add, kS128, kS128&gt;,</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16AddSatS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16AddSatU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Sub, kS128, kS128&gt;,</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16SubSatS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16SubSatU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16MinS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16MinU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16MaxS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16MaxU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16RoundingAverageU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Popcnt, kS128&gt;,</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span> </div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Splat, kI32&gt;,</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Eq, kS128, kS128&gt;,</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Ne, kS128, kS128&gt;,</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8LtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8LtU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8GtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8GtU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8LeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8LeU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8GeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8GeU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Abs, kS128&gt;,</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Neg, kS128&gt;,</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Shl, kS128, kI32&gt;,</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ShrS, kS128, kI32&gt;,</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ShrU, kS128, kI32&gt;,</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Add, kS128, kS128&gt;,</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8AddSatS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8AddSatU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Sub, kS128, kS128&gt;,</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8SubSatS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8SubSatU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Mul, kS128, kS128&gt;,</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8MinS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8MinU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8MaxS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8MaxU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8RoundingAverageU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ExtMulLowI8x16S, kS128, kS128&gt;,</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ExtMulLowI8x16U, kS128, kS128&gt;,</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ExtMulHighI8x16S, kS128, kS128&gt;,</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ExtMulHighI8x16U, kS128, kS128&gt;,</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8Q15MulRSatS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ExtAddPairwiseI8x16S, kS128&gt;,</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8ExtAddPairwiseI8x16U, kS128&gt;,</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span> </div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Splat, kI32&gt;,</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Eq, kS128, kS128&gt;,</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Ne, kS128, kS128&gt;,</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4LtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4LtU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4GtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4GtU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4LeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4LeU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4GeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4GeU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Abs, kS128&gt;,</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Neg, kS128&gt;,</div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Shl, kS128, kI32&gt;,</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ShrS, kS128, kI32&gt;,</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ShrU, kS128, kI32&gt;,</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Add, kS128, kS128&gt;,</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Sub, kS128, kS128&gt;,</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4Mul, kS128, kS128&gt;,</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4MinS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4MinU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4MaxS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4MaxU, kS128, kS128&gt;,</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4DotI16x8S, kS128, kS128&gt;,</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ExtMulLowI16x8S, kS128, kS128&gt;,</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ExtMulLowI16x8U, kS128, kS128&gt;,</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ExtMulHighI16x8S, kS128, kS128&gt;,</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ExtMulHighI16x8U, kS128, kS128&gt;,</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ExtAddPairwiseI16x8S, kS128&gt;,</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4ExtAddPairwiseI16x8U, kS128&gt;,</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span> </div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Splat, kI64&gt;,</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Eq, kS128, kS128&gt;,</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Ne, kS128, kS128&gt;,</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2LtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2GtS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2LeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2GeS, kS128, kS128&gt;,</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Abs, kS128&gt;,</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Neg, kS128&gt;,</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Shl, kS128, kI32&gt;,</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2ShrS, kS128, kI32&gt;,</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2ShrU, kS128, kI32&gt;,</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Add, kS128, kS128&gt;,</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Sub, kS128, kS128&gt;,</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2Mul, kS128, kS128&gt;,</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2ExtMulLowI32x4S, kS128, kS128&gt;,</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2ExtMulLowI32x4U, kS128, kS128&gt;,</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2ExtMulHighI32x4S, kS128, kS128&gt;,</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2ExtMulHighI32x4U, kS128, kS128&gt;,</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span> </div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Splat, kF32&gt;,</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Eq, kS128, kS128&gt;,</div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Ne, kS128, kS128&gt;,</div>
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Lt, kS128, kS128&gt;,</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Gt, kS128, kS128&gt;,</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Le, kS128, kS128&gt;,</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Ge, kS128, kS128&gt;,</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Abs, kS128&gt;,</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Neg, kS128&gt;,</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Sqrt, kS128&gt;,</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Add, kS128, kS128&gt;,</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Sub, kS128, kS128&gt;,</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Mul, kS128, kS128&gt;,</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Div, kS128, kS128&gt;,</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Min, kS128, kS128&gt;,</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Max, kS128, kS128&gt;,</div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Pmin, kS128, kS128&gt;,</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Pmax, kS128, kS128&gt;,</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Ceil, kS128&gt;,</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Floor, kS128&gt;,</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Trunc, kS128&gt;,</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4NearestInt, kS128&gt;,</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span> </div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Splat, kF64&gt;,</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Eq, kS128, kS128&gt;,</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Ne, kS128, kS128&gt;,</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Lt, kS128, kS128&gt;,</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Gt, kS128, kS128&gt;,</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Le, kS128, kS128&gt;,</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Ge, kS128, kS128&gt;,</div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Abs, kS128&gt;,</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Neg, kS128&gt;,</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Sqrt, kS128&gt;,</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Add, kS128, kS128&gt;,</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Sub, kS128, kS128&gt;,</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Mul, kS128, kS128&gt;,</div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Div, kS128, kS128&gt;,</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Min, kS128, kS128&gt;,</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Max, kS128, kS128&gt;,</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Pmin, kS128, kS128&gt;,</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Pmax, kS128, kS128&gt;,</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Ceil, kS128&gt;,</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Floor, kS128&gt;,</div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Trunc, kS128&gt;,</div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2NearestInt, kS128&gt;,</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span> </div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2PromoteLowF32x4, kS128&gt;,</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2ConvertLowI32x4S, kS128&gt;,</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2ConvertLowI32x4U, kS128&gt;,</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4DemoteF64x2Zero, kS128&gt;,</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4TruncSatF64x2SZero, kS128&gt;,</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4TruncSatF64x2UZero, kS128&gt;,</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span> </div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2SConvertI32x4Low, kS128&gt;,</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2SConvertI32x4High, kS128&gt;,</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2UConvertI32x4Low, kS128&gt;,</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2UConvertI32x4High, kS128&gt;,</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span> </div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4SConvertF32x4, kS128&gt;,</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4UConvertF32x4, kS128&gt;,</div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4SConvertI32x4, kS128&gt;,</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4UConvertI32x4, kS128&gt;,</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span> </div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16SConvertI16x8, kS128, kS128&gt;,</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16UConvertI16x8, kS128, kS128&gt;,</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8SConvertI32x4, kS128, kS128&gt;,</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8UConvertI32x4, kS128, kS128&gt;,</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span> </div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8SConvertI8x16Low, kS128&gt;,</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8SConvertI8x16High, kS128&gt;,</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8UConvertI8x16Low, kS128&gt;,</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8UConvertI8x16High, kS128&gt;,</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4SConvertI16x8Low, kS128&gt;,</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4SConvertI16x8High, kS128&gt;,</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4UConvertI16x8Low, kS128&gt;,</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4UConvertI16x8High, kS128&gt;,</div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span> </div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>        &amp;BodyGen::op_with_prefix&lt;kExprS128Not, kS128&gt;,</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>        &amp;BodyGen::op_with_prefix&lt;kExprS128And, kS128, kS128&gt;,</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>        &amp;BodyGen::op_with_prefix&lt;kExprS128AndNot, kS128, kS128&gt;,</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>        &amp;BodyGen::op_with_prefix&lt;kExprS128Or, kS128, kS128&gt;,</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>        &amp;BodyGen::op_with_prefix&lt;kExprS128Xor, kS128, kS128&gt;,</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>        &amp;BodyGen::op_with_prefix&lt;kExprS128Select, kS128, kS128, kS128&gt;,</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span> </div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>        &amp;BodyGen::simd_shuffle,</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16Swizzle, kS128, kS128&gt;,</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span> </div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>        &amp;BodyGen::memop&lt;kExprS128LoadMem&gt;,                         <span class="comment">//</span></div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>        &amp;BodyGen::memop&lt;kExprS128Load8x8S&gt;,                        <span class="comment">//</span></div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>        &amp;BodyGen::memop&lt;kExprS128Load8x8U&gt;,                        <span class="comment">//</span></div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>        &amp;BodyGen::memop&lt;kExprS128Load16x4S&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>        &amp;BodyGen::memop&lt;kExprS128Load16x4U&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>        &amp;BodyGen::memop&lt;kExprS128Load32x2S&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>        &amp;BodyGen::memop&lt;kExprS128Load32x2U&gt;,                       <span class="comment">//</span></div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>        &amp;BodyGen::memop&lt;kExprS128Load8Splat&gt;,                      <span class="comment">//</span></div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>        &amp;BodyGen::memop&lt;kExprS128Load16Splat&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>        &amp;BodyGen::memop&lt;kExprS128Load32Splat&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>        &amp;BodyGen::memop&lt;kExprS128Load64Splat&gt;,                     <span class="comment">//</span></div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>        &amp;BodyGen::memop&lt;kExprS128Load32Zero&gt;,                      <span class="comment">//</span></div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>        &amp;BodyGen::memop&lt;kExprS128Load64Zero&gt;,                      <span class="comment">//</span></div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>        &amp;BodyGen::simd_lane_memop&lt;kExprS128Load8Lane, 16, kS128&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>        &amp;BodyGen::simd_lane_memop&lt;kExprS128Load16Lane, 8, kS128&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>        &amp;BodyGen::simd_lane_memop&lt;kExprS128Load32Lane, 4, kS128&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>        &amp;BodyGen::simd_lane_memop&lt;kExprS128Load64Lane, 2, kS128&gt;,  <span class="comment">//</span></div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span> </div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16RelaxedSwizzle, kS128, kS128&gt;,</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>        &amp;BodyGen::op_with_prefix&lt;kExprI8x16RelaxedLaneSelect, kS128, kS128,</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>                                 kS128&gt;,</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8RelaxedLaneSelect, kS128, kS128,</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>                                 kS128&gt;,</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4RelaxedLaneSelect, kS128, kS128,</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>                                 kS128&gt;,</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>        &amp;BodyGen::op_with_prefix&lt;kExprI64x2RelaxedLaneSelect, kS128, kS128,</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>                                 kS128&gt;,</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Qfma, kS128, kS128, kS128&gt;,</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4Qfms, kS128, kS128, kS128&gt;,</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Qfma, kS128, kS128, kS128&gt;,</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2Qfms, kS128, kS128, kS128&gt;,</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4RelaxedMin, kS128, kS128&gt;,</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>        &amp;BodyGen::op_with_prefix&lt;kExprF32x4RelaxedMax, kS128, kS128&gt;,</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2RelaxedMin, kS128, kS128&gt;,</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>        &amp;BodyGen::op_with_prefix&lt;kExprF64x2RelaxedMax, kS128, kS128&gt;,</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4RelaxedTruncF32x4S, kS128&gt;,</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4RelaxedTruncF32x4U, kS128&gt;,</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4RelaxedTruncF64x2SZero, kS128&gt;,</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4RelaxedTruncF64x2UZero, kS128&gt;,</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span>        &amp;BodyGen::op_with_prefix&lt;kExprI16x8DotI8x16I7x16S, kS128, kS128&gt;,</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>        &amp;BodyGen::op_with_prefix&lt;kExprI32x4DotI8x16I7x16AddS, kS128, kS128,</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>                                 kS128&gt;);</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span> </div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>    GenerateOneOf(alternatives, data);</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>  }</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span> </div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span>  <span class="keywordtype">void</span> Generate(ValueType type, DataRange* data) {</div>
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>    <span class="keywordflow">switch</span> (type.kind()) {</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>      <span class="keywordflow">case</span> kVoid:</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>        <span class="keywordflow">return</span> GenerateVoid(data);</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>:</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>        <span class="keywordflow">return</span> GenerateI32(data);</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6601e7b0f7c0f03d9ffa9f222c82e6a0">kI64</a>:</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>        <span class="keywordflow">return</span> GenerateI64(data);</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2">kF32</a>:</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>        <span class="keywordflow">return</span> GenerateF32(data);</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319">kF64</a>:</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>        <span class="keywordflow">return</span> GenerateF64(data);</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210af99a6cf928bc2257d654d6301969318c">kS128</a>:</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>        <span class="keywordflow">return</span> GenerateS128(data);</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210aafd4fc7d3d7d9d9bc84ef9f0fd3d09c3">kRefNull</a>:</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>        <span class="keywordflow">return</span> GenerateRef(type.heap_type(), data, kNullable);</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210ab5b96df89f6d4b5436a728a5a4014d83">kRef</a>:</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>        <span class="keywordflow">return</span> GenerateRef(type.heap_type(), data, kNonNullable);</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>    }</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>  }</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span> </div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>  <span class="keyword">template</span> &lt;ValueKind kind&gt;</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>  <span class="keyword">constexpr</span> <span class="keywordtype">void</span> Generate(DataRange* data) {</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>    <span class="keywordflow">switch</span> (kind) {</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>      <span class="keywordflow">case</span> kVoid:</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>        <span class="keywordflow">return</span> GenerateVoid(data);</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>:</div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span>        <span class="keywordflow">return</span> GenerateI32(data);</div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6601e7b0f7c0f03d9ffa9f222c82e6a0">kI64</a>:</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>        <span class="keywordflow">return</span> GenerateI64(data);</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2">kF32</a>:</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>        <span class="keywordflow">return</span> GenerateF32(data);</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319">kF64</a>:</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>        <span class="keywordflow">return</span> GenerateF64(data);</div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210af99a6cf928bc2257d654d6301969318c">kS128</a>:</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>        <span class="keywordflow">return</span> GenerateS128(data);</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>        <span class="comment">// For kRefNull and kRef we need the HeapType which we can get from the</span></div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>        <span class="comment">// ValueType.</span></div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>    }</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>  }</div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span> </div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>  <span class="keyword">template</span> &lt;<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a> <a class="code hl_define" href="token_8cc.html#a11e128205e425378254b6a9cf928ac6a">T1</a>, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a> <a class="code hl_define" href="token_8cc.html#af160c8734afb064af618897deb6ddb0e">T2</a>, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">ValueKind</a>... Ts&gt;</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>  <span class="keywordtype">void</span> Generate(DataRange* data) {</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    <span class="comment">// TODO(clemensb): Implement a more even split.</span></div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>    <span class="comment">// TODO(mliedtke): Instead of splitting we should probably &quot;reserve&quot; amount</span></div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>    <span class="comment">// x for the first part, any reserved but potentially unused random bytes</span></div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>    <span class="comment">// should then carry over instead of throwing them away which heavily</span></div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>    <span class="comment">// reduces the amount of actually used random input bytes.</span></div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>    <span class="keyword">auto</span> first_data = data-&gt;split();</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>    Generate&lt;T1&gt;(&amp;first_data);</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>    Generate&lt;<a class="code hl_define" href="token_8cc.html#af160c8734afb064af618897deb6ddb0e">T2</a>, Ts...&gt;(<a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>);</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>  }</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span> </div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>  <span class="keywordtype">void</span> GenerateRef(HeapType type, DataRange* data,</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>                   Nullability nullability = kNullable) {</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>    std::optional&lt;GeneratorRecursionScope&gt; rec_scope;</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>    <span class="keywordflow">if</span> (nullability) {</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>      rec_scope.emplace(<span class="keyword">this</span>);</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>    }</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span> </div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>    <span class="keywordflow">if</span> (recursion_limit_reached() || data-&gt;size() == 0) {</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>      <span class="keywordflow">if</span> (nullability == kNullable) {</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>        ref_null(type, data);</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>      }</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>      <span class="comment">// It is ok not to return here because the non-nullable types are not</span></div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>      <span class="comment">// recursive by construction, so the depth is limited already.</span></div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>    }</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span> </div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>    <span class="keyword">constexpr</span> <span class="keyword">auto</span> alternatives_indexed_type =</div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>        CreateArray(&amp;BodyGen::new_object,       <span class="comment">//</span></div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>                    &amp;BodyGen::get_local_ref,    <span class="comment">//</span></div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>                    &amp;BodyGen::array_get_ref,    <span class="comment">//</span></div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>                    &amp;BodyGen::struct_get_ref,   <span class="comment">//</span></div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>                    &amp;BodyGen::ref_cast,         <span class="comment">//</span></div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>                    &amp;BodyGen::ref_as_non_null,  <span class="comment">//</span></div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>                    &amp;BodyGen::br_on_cast);      <span class="comment">//</span></div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span> </div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>    <span class="keyword">constexpr</span> <span class="keyword">auto</span> alternatives_func_any =</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>        CreateArray(&amp;BodyGen::table_get,           <span class="comment">//</span></div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span>                    &amp;BodyGen::get_local_ref,       <span class="comment">//</span></div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>                    &amp;BodyGen::array_get_ref,       <span class="comment">//</span></div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>                    &amp;BodyGen::struct_get_ref,      <span class="comment">//</span></div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>                    &amp;BodyGen::ref_cast,            <span class="comment">//</span></div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>                    &amp;BodyGen::any_convert_extern,  <span class="comment">//</span></div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>                    &amp;BodyGen::ref_as_non_null,     <span class="comment">//</span></div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>                    &amp;BodyGen::br_on_cast);         <span class="comment">//</span></div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span> </div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span>    <span class="keyword">constexpr</span> <span class="keyword">auto</span> alternatives_other =</div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>        CreateArray(&amp;BodyGen::array_get_ref,    <span class="comment">//</span></div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>                    &amp;BodyGen::get_local_ref,    <span class="comment">//</span></div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>                    &amp;BodyGen::struct_get_ref,   <span class="comment">//</span></div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>                    &amp;BodyGen::ref_cast,         <span class="comment">//</span></div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>                    &amp;BodyGen::ref_as_non_null,  <span class="comment">//</span></div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span>                    &amp;BodyGen::br_on_cast);      <span class="comment">//</span></div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span> </div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>    <span class="keywordflow">switch</span> (type.representation()) {</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>      <span class="comment">// For abstract types, sometimes generate one of their subtypes.</span></div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>      <span class="keywordflow">case</span> HeapType::kAny: {</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>        <span class="comment">// Weighted according to the types in the module:</span></div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>        <span class="comment">// If there are D data types and F function types, the relative</span></div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>        <span class="comment">// frequencies for dataref is D, for funcref F, and for i31ref and</span></div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span>        <span class="comment">// falling back to anyref 2.</span></div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>        <span class="keyword">const</span> uint8_t num_data_types =</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>            <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size());</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>        <span class="keyword">const</span> uint8_t emit_i31ref = 2;</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span>        <span class="keyword">const</span> uint8_t fallback_to_anyref = 2;</div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span>        uint8_t random = data-&gt;get&lt;uint8_t&gt;() %</div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>                         (num_data_types + emit_i31ref + fallback_to_anyref);</div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>        <span class="comment">// We have to compute this first so in case GenerateOneOf fails</span></div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>        <span class="comment">// we will continue to fall back on an alternative that is guaranteed</span></div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>        <span class="comment">// to generate a value of the wanted type.</span></div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>        <span class="comment">// In order to know which alternative to fall back to in case</span></div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>        <span class="comment">// GenerateOneOf failed, the random variable is recomputed.</span></div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span>        <span class="keywordflow">if</span> (random &gt;= num_data_types + emit_i31ref) {</div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>          <span class="keywordflow">if</span> (GenerateOneOf(alternatives_func_any, type, data, nullability)) {</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>          }</div>
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"> 3228</span>          random = data-&gt;get&lt;uint8_t&gt;() % (num_data_types + emit_i31ref);</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>        }</div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>        <span class="keywordflow">if</span> (random &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size()) {</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>          GenerateRef(HeapType(HeapType::kStruct), data, nullability);</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (random &lt; num_data_types) {</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>          GenerateRef(HeapType(HeapType::kArray), data, nullability);</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>          GenerateRef(HeapType(HeapType::kI31), data, nullability);</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>        }</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>      }</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span>      <span class="keywordflow">case</span> HeapType::kArray: {</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>        <span class="keyword">constexpr</span> uint8_t fallback_to_dataref = 1;</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>        uint8_t random =</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>            data-&gt;get&lt;uint8_t&gt;() % (<a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size() + fallback_to_dataref);</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span>        <span class="comment">// Try generating one of the alternatives and continue to the rest of</span></div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>        <span class="comment">// the methods in case it fails.</span></div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span>        <span class="keywordflow">if</span> (random &gt;= <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()) {</div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span>          <span class="keywordflow">if</span> (GenerateOneOf(alternatives_other, type, data, nullability))</div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span>          random = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size();</div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>        }</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>        ModuleTypeIndex <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>[<a class="code hl_function" href="flag-definitions_8h.html#af3cb81a0a1a11ad602fa7f70b7f25571">random</a>];</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>));</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>        GenerateRef(HeapType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>), data, nullability);</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>      }</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>      <span class="keywordflow">case</span> HeapType::kStruct: {</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>        <span class="keyword">constexpr</span> uint8_t fallback_to_dataref = 2;</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>        uint8_t random =</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>            data-&gt;get&lt;uint8_t&gt;() % (<a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() + fallback_to_dataref);</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>        <span class="comment">// Try generating one of the alternatives</span></div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>        <span class="comment">// and continue to the rest of the methods in case it fails.</span></div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>        <span class="keywordflow">if</span> (random &gt;= <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size()) {</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>          <span class="keywordflow">if</span> (GenerateOneOf(alternatives_other, type, data, nullability)) {</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>          }</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>          random = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size();</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>        }</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>        ModuleTypeIndex <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>[<a class="code hl_function" href="flag-definitions_8h.html#af3cb81a0a1a11ad602fa7f70b7f25571">random</a>];</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsStructType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>));</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>        GenerateRef(HeapType(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>), data, nullability);</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>      }</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>      <span class="keywordflow">case</span> HeapType::kEq: {</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>        <span class="keyword">const</span> uint8_t num_types = <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size();</div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>        <span class="keyword">const</span> uint8_t emit_i31ref = 2;</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>        <span class="keyword">constexpr</span> uint8_t fallback_to_eqref = 1;</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>        uint8_t random = data-&gt;get&lt;uint8_t&gt;() %</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>                         (num_types + emit_i31ref + fallback_to_eqref);</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>        <span class="comment">// Try generating one of the alternatives</span></div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>        <span class="comment">// and continue to the rest of the methods in case it fails.</span></div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>        <span class="keywordflow">if</span> (random &gt;= num_types + emit_i31ref) {</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>          <span class="keywordflow">if</span> (GenerateOneOf(alternatives_other, type, data, nullability)) {</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>          }</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>          random = data-&gt;get&lt;uint8_t&gt;() % (num_types + emit_i31ref);</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>        }</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>        <span class="keywordflow">if</span> (random &lt; num_types) {</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>          <span class="comment">// Using `HeapType(random)` here relies on the assumption that struct</span></div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>          <span class="comment">// and array types come before signatures.</span></div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>          <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsArrayType(random) ||</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>                 <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsStructType(random));</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>          GenerateRef(HeapType(ModuleTypeIndex{random}), <a class="code hl_variable" href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a>, nullability);</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>          GenerateRef(HeapType(HeapType::kI31), data, nullability);</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>        }</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>      }</div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>      <span class="keywordflow">case</span> HeapType::kFunc: {</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>        uint32_t random = data-&gt;get&lt;uint8_t&gt;() % (<a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size() + 1);</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>        <span class="comment">// and continue to the rest of the methods in case it fails.</span></div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>        <span class="keywordflow">if</span> (random &gt;= <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size()) {</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>          <span class="keywordflow">if</span> (GenerateOneOf(alternatives_func_any, type, data, nullability)) {</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>          }</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>          random = data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size();</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>        }</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>        ModuleTypeIndex signature_index = <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>[<a class="code hl_function" href="flag-definitions_8h.html#af3cb81a0a1a11ad602fa7f70b7f25571">random</a>];</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;builder()-&gt;IsSignature(signature_index));</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>        GenerateRef(HeapType(signature_index), data, nullability);</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>      }</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>      <span class="keywordflow">case</span> HeapType::kI31: {</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>        <span class="comment">// Try generating one of the alternatives</span></div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>        <span class="comment">// and continue to the rest of the methods in case it fails.</span></div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>        <span class="keywordflow">if</span> (data-&gt;get&lt;<span class="keywordtype">bool</span>&gt;() &amp;&amp;</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span>            GenerateOneOf(alternatives_other, type, data, nullability)) {</div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>        }</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>        Generate(kWasmI32, data);</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprRefI31);</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>      }</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>      <span class="keywordflow">case</span> HeapType::kExn: {</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>        <span class="comment">// TODO(manoskouk): Can we somehow come up with a nontrivial exnref?</span></div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>        ref_null(type, data);</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>        <span class="keywordflow">if</span> (nullability == kNonNullable) {</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefAsNonNull);</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>        }</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>      }</div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>      <span class="keywordflow">case</span> HeapType::kExtern: {</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>        uint8_t choice = data-&gt;get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>        <span class="keywordflow">if</span> (choice &lt; 25) {</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>          <span class="comment">// ~10% chance of extern.convert_any.</span></div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>          GenerateRef(HeapType(HeapType::kAny), data);</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithPrefix(kExprExternConvertAny);</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>          <span class="keywordflow">if</span> (nullability == kNonNullable) {</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>            <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefAsNonNull);</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>          }</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>        }</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>        <span class="comment">// ~80% chance of string.</span></div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>        <span class="keywordflow">if</span> (choice &lt; 230 &amp;&amp; <a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>.generate_wasm_gc()) {</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>          uint8_t subchoice = choice % 7;</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>          <span class="keywordflow">switch</span> (subchoice) {</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>            <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>              <span class="keywordflow">return</span> string_cast(data);</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>              <span class="keywordflow">return</span> string_fromcharcode(data);</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>              <span class="keywordflow">return</span> string_fromcodepoint(data);</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>              <span class="keywordflow">return</span> string_concat(data);</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>            <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>              <span class="keywordflow">return</span> string_substring(data);</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>            <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>              <span class="keywordflow">return</span> string_fromcharcodearray(data);</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>            <span class="keywordflow">case</span> 6:</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>              <span class="keywordflow">return</span> string_fromutf8array(data);</div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>          }</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>        }</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>        <span class="comment">// ~10% chance of fallthrough.</span></div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>        [[fallthrough]];</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>      }</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>      <span class="keywordflow">case</span> HeapType::kNoExtern:</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>      <span class="keywordflow">case</span> HeapType::kNoFunc:</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>      <span class="keywordflow">case</span> HeapType::kNone:</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>      <span class="keywordflow">case</span> HeapType::kNoExn:</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>        ref_null(type, data);</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>        <span class="keywordflow">if</span> (nullability == kNonNullable) {</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprRefAsNonNull);</div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>        }</div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>        <span class="comment">// Indexed type (i.e. user-defined type).</span></div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(type.is_index());</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>.generate_wasm_gc() &amp;&amp;</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>            type.ref_index() == <a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>.array_i8 &amp;&amp;</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>            data-&gt;get&lt;uint8_t&gt;() &lt; 32) {</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>          <span class="comment">// 1/8th chance, fits the number of remaining alternatives (7) well.</span></div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>          <span class="keywordflow">return</span> string_toutf8array(data);</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>        }</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>        GenerateOneOf(alternatives_indexed_type, type, data, nullability);</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>    }</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>  }</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span> </div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>  <span class="keywordtype">void</span> GenerateRef(DataRange* data) {</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>    <span class="keyword">constexpr</span> HeapType::Representation top_types[] = {</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span>        HeapType::kAny,</div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>        HeapType::kFunc,</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span>        HeapType::kExtern,</div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>    };</div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>    HeapType::Representation type =</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span>        top_types[data-&gt;get&lt;uint8_t&gt;() % <a class="code hl_define" href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a>(top_types)];</div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>    GenerateRef(HeapType(type), data);</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>  }</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span> </div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>  std::vector&lt;ValueType&gt; GenerateTypes(DataRange* data) {</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>    <span class="keywordflow">return</span> fuzzing::GenerateTypes(</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>        <a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, data,</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>        <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>.size() + <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>.size() +</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>                              <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>.size()));</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>  }</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span> </div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>  <span class="keywordtype">void</span> Generate(base::Vector&lt;const ValueType&gt; types, DataRange* data) {</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>    <span class="comment">// Maybe emit a multi-value block with the expected return type. Use a</span></div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>    <span class="comment">// non-default value to indicate block generation to avoid recursion when we</span></div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>    <span class="comment">// reach the end of the data.</span></div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>    <span class="keywordtype">bool</span> generate_block = data-&gt;get&lt;uint8_t&gt;() % 32 == 1;</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>    <span class="keywordflow">if</span> (generate_block) {</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>      GeneratorRecursionScope rec_scope(<span class="keyword">this</span>);</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>      <span class="keywordflow">if</span> (!recursion_limit_reached()) {</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>        <span class="keyword">const</span> <span class="keyword">auto</span> param_types = GenerateTypes(data);</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>        Generate(base::VectorOf(param_types), data);</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>        any_block(base::VectorOf(param_types), types, data);</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span>      }</div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>    }</div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span> </div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>    <span class="keywordflow">if</span> (types.size() == 0) {</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>      Generate(kWasmVoid, data);</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>    }</div>
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"> 3426</span>    <span class="keywordflow">if</span> (types.size() == 1) {</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>      Generate(types[0], data);</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>    }</div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span> </div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>    <span class="comment">// Split the types in two halves and recursively generate each half.</span></div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>    <span class="comment">// Each half is non empty to ensure termination.</span></div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>    <span class="keywordtype">size_t</span> split_index = data-&gt;get&lt;uint8_t&gt;() % (types.size() - 1) + 1;</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>    base::Vector&lt;const ValueType&gt; lower_half = types.SubVector(0, split_index);</div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>    base::Vector&lt;const ValueType&gt; upper_half =</div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span>        types.SubVector(split_index, types.size());</div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>    DataRange first_range = data-&gt;split();</div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>    Generate(lower_half, &amp;first_range);</div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span>    Generate(upper_half, data);</div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>  }</div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span> </div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>  <span class="keywordtype">void</span> Consume(ValueType type) {</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>    <span class="comment">// Try to store the value in a local if there is a local with the same</span></div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>    <span class="comment">// type. TODO(14034): For reference types a local with a super type</span></div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>    <span class="comment">// would also be fine.</span></div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>    <span class="keywordtype">size_t</span> num_params = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;parameter_count();</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>    <span class="keywordflow">for</span> (uint32_t local_offset = 0; local_offset &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>.size();</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>         ++local_offset) {</div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>[local_offset] == type) {</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>        uint32_t local_index = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(local_offset + num_params);</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprLocalSet, local_index);</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>      }</div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span>    }</div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span>    <span class="keywordflow">for</span> (uint32_t param_index = 0; param_index &lt; num_params; ++param_index) {</div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;GetParam(param_index) == type) {</div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(kExprLocalSet, param_index);</div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>      }</div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>    }</div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span>    <span class="comment">// No opportunity found to use the value, so just drop it.</span></div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span>    <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprDrop);</div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span>  }</div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span> </div>
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span>  <span class="comment">// Emit code to match an arbitrary signature.</span></div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>  <span class="comment">// TODO(11954): Add the missing reference type conversion/upcasting.</span></div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>  <span class="keywordtype">void</span> ConsumeAndGenerate(base::Vector&lt;const ValueType&gt; param_types,</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>                          base::Vector&lt;const ValueType&gt; return_types,</div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>                          DataRange* data) {</div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>    <span class="comment">// This numeric conversion logic consists of picking exactly one</span></div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>    <span class="comment">// index in the return values and dropping all the values that come</span></div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span>    <span class="comment">// before that index. Then we convert the value from that index to the</span></div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>    <span class="comment">// wanted type. If we don&#39;t find any value we generate it.</span></div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>    <span class="keyword">auto</span> primitive = [](ValueType t) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>      <span class="keywordflow">switch</span> (t.kind()) {</div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>:</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6601e7b0f7c0f03d9ffa9f222c82e6a0">kI64</a>:</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2">kF32</a>:</div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319">kF64</a>:</div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span>          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>      }</div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span>    };</div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span> </div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span>    <span class="keywordflow">if</span> (return_types.size() == 0 || param_types.size() == 0 ||</div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>        !primitive(return_types[0])) {</div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = param_types.rbegin(); iter != param_types.rend();</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>           ++iter) {</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>        Consume(*iter);</div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span>      }</div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span>      Generate(return_types, data);</div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>    }</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span> </div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>    <span class="keywordtype">int</span> bottom_primitives = 0;</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span> </div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>    <span class="keywordflow">while</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(param_types.size()) &gt; bottom_primitives &amp;&amp;</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>           primitive(param_types[bottom_primitives])) {</div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>      bottom_primitives++;</div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>    }</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>    <span class="keywordtype">int</span> return_index =</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>        bottom_primitives &gt; 0 ? (data-&gt;get&lt;uint8_t&gt;() % bottom_primitives) : -1;</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(param_types.size() - 1); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &gt; return_index;</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>         --<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>      Consume(param_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]);</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>    }</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = return_index; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &gt; 0; --<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>      Convert(param_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>], param_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> - 1]);</div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitI32Const(0);</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;Emit(kExprSelect);</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>    }</div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!return_types.empty());</div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>    <span class="keywordflow">if</span> (return_index &gt;= 0) {</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span>      Convert(param_types[0], return_types[0]);</div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>      Generate(return_types + 1, data);</div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>      Generate(return_types, data);</div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span>    }</div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>  }</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span> </div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span>  <span class="keywordtype">void</span> InitializeNonDefaultableLocals(DataRange* data) {</div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>.<a class="code hl_class" href="classsize.html">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>      <span class="keywordflow">if</span> (!<a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#aa5bca5925c27c54f3c66b958c81b9190">is_defaultable</a>()) {</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>        GenerateRef(<a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].heap_type(), data, kNonNullable);</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;EmitWithU32V(</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>            kExprLocalSet, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> + <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>                                   <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;signature()-&gt;parameter_count()));</div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>      }</div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>    }</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span>    <a class="code hl_variable" href="random-module-generation_8cc.html#a7ad4cdfdce811c734dd45ad4b2051c0c">locals_initialized_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>  }</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span> </div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>  <span class="keywordtype">bool</span> recursion_limit_reached() {</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> &gt;= kMaxRecursionDepth;</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>  }</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span> </div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#ac7f3191520c08998045286951480a3d9"> 3539</a></span>  <span class="keyword">const</span> WasmModuleGenerationOptions <a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>;</div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#af63de4c1c418b3fc976fefdeae94b85b"> 3540</a></span>  WasmFunctionBuilder* <span class="keyword">const</span> <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>;</div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c"> 3541</a></span>  std::vector&lt;std::vector&lt;ValueType&gt;&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a>;</div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4"> 3542</a></span>  <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; <a class="code hl_variable" href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a>;</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb"> 3543</a></span>  std::vector&lt;ValueType&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a>;</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#ac4f9b6d6cb579b84f6722d37b6217c10"> 3544</a></span>  std::vector&lt;ValueType&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#ac4f9b6d6cb579b84f6722d37b6217c10">globals_</a>;</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a627a3560d110093764ccc48dd9109f4c"> 3545</a></span>  std::vector&lt;uint8_t&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#a627a3560d110093764ccc48dd9109f4c">mutable_globals_</a>;  <span class="comment">// indexes into {globals_}.</span></div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743"> 3546</a></span>  uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> = 0;</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383"> 3547</a></span>  std::vector&lt;int&gt; <a class="code hl_variable" href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383">catch_blocks_</a>;</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6"> 3548</a></span>  <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; <a class="code hl_variable" href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a>;</div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32"> 3549</a></span>  <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; <a class="code hl_variable" href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a>;</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447"> 3550</a></span>  <span class="keyword">const</span> StringImports&amp; <a class="code hl_variable" href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a>;</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a7ad4cdfdce811c734dd45ad4b2051c0c"> 3551</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="random-module-generation_8cc.html#a7ad4cdfdce811c734dd45ad4b2051c0c">locals_initialized_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>};</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span> </div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span>WasmInitExpr GenerateInitExpr(<a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* zone, DataRange&amp; range,</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>                              WasmModuleBuilder* builder, ValueType type,</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>                              <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; structs,</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span>                              <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; arrays,</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span>                              uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>);</div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span> </div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span><span class="keyword">class </span>ModuleGen {</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span>  <span class="keyword">explicit</span> ModuleGen(<a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* zone, WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>,</div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>                     WasmModuleBuilder* <a class="code hl_variable" href="liftoff-compiler_8cc.html#ac96b98a543c504abf4ffd7eaa447e94a">fn</a>, DataRange* module_range,</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>                     uint8_t num_functions, uint8_t num_structs,</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span>                     uint8_t num_arrays, uint8_t num_signatures)</div>
<div class="line"><a id="l03566" name="l03566"></a><span class="lineno"> 3566</span>      : <a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>(zone),</div>
<div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>        <a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>),</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>(<a class="code hl_variable" href="liftoff-compiler_8cc.html#ac96b98a543c504abf4ffd7eaa447e94a">fn</a>),</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>(module_range),</div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a018b4bebee22d7f7e53b290510767da4">num_functions_</a>(num_functions),</div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a9572c1f21f92ef80ce29464c2b99d302">num_structs_</a>(num_structs),</div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a996bf7979ae342de8ab3c61497548104">num_arrays_</a>(num_arrays),</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>        <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>(num_signatures + num_structs + num_arrays) {}</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span> </div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>  <span class="comment">// Generates and adds random number of memories.</span></div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span>  <span class="keywordtype">void</span> GenerateRandomMemories() {</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span>    <span class="keywordtype">int</span> num_memories = 1 + (<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % kMaxMemories);</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_memories; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>      uint8_t random_byte = <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span>      <span class="keywordtype">bool</span> mem64 = <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_memory64 &amp;&amp; (random_byte &amp; 1);</div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>      <span class="keywordtype">bool</span> has_maximum = random_byte &amp; 2;</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>      <span class="keyword">static_assert</span>(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a58280911560a19ed11d754bee507198e">kV8MaxWasmMemory64Pages</a> &lt;= <a class="code hl_variable" href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">kMaxUInt32</a>);</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span>      uint32_t max_supported_pages =</div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>          mem64 ? <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a58280911560a19ed11d754bee507198e">kV8MaxWasmMemory64Pages</a> : <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#af9eea7ef6c36992fe92707061703fb43">kV8MaxWasmMemory32Pages</a>;</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>      uint32_t min_pages =</div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>          <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint32_t&gt;() % (max_supported_pages + 1);</div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>      <span class="keywordflow">if</span> (has_maximum) {</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>        uint32_t max_pages =</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>            std::max(min_pages, <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint32_t&gt;() %</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>                                    (max_supported_pages + 1));</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>        <span class="keywordflow">if</span> (mem64) {</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddMemory64(min_pages, max_pages);</div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddMemory(min_pages, max_pages);</div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span>        }</div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>        <span class="keywordflow">if</span> (mem64) {</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddMemory64(min_pages);</div>
<div class="line"><a id="l03599" name="l03599"></a><span class="lineno"> 3599</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03600" name="l03600"></a><span class="lineno"> 3600</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddMemory(min_pages);</div>
<div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>        }</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>      }</div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>    }</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>  }</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span> </div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>  <span class="comment">// Puts the types into random recursive groups.</span></div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>  std::map&lt;uint8_t, uint8_t&gt; GenerateRandomRecursiveGroups(</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>      uint8_t kNumDefaultArrayTypes) {</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>    <span class="comment">// (Type_index -&gt; end of explicit rec group).</span></div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>    std::map&lt;uint8_t, uint8_t&gt; explicit_rec_groups;</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span>    uint8_t current_type_index = 0;</div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span> </div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>    <span class="comment">// The default array types are each in their own recgroup.</span></div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span>    <span class="keywordflow">for</span> (uint8_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; kNumDefaultArrayTypes; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>      explicit_rec_groups.emplace(current_type_index, current_type_index);</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddRecursiveTypeGroup(current_type_index++, 1);</div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>    }</div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span> </div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>    <span class="keywordflow">while</span> (current_type_index &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>) {</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span>      <span class="comment">// First, pick a random start for the next group. We allow it to be</span></div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>      <span class="comment">// beyond the end of types (i.e., we add no further recursive groups).</span></div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span>      uint8_t group_start = <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() %</div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span>                                (<a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a> - current_type_index + 1) +</div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>                            current_type_index;</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(group_start, current_type_index);</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span>      current_type_index = group_start;</div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>      <span class="keywordflow">if</span> (group_start &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>) {</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>        <span class="comment">// If we did not reach the end of the types, pick a random group size.</span></div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>        uint8_t group_size =</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>            <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % (<a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a> - group_start) + 1;</div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>        <a class="code hl_define" href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(group_start + group_size, <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>);</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>        <span class="keywordflow">for</span> (uint8_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = group_start; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; group_start + group_size; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>          explicit_rec_groups.emplace(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, group_start + group_size - 1);</div>
<div class="line"><a id="l03634" name="l03634"></a><span class="lineno"> 3634</span>        }</div>
<div class="line"><a id="l03635" name="l03635"></a><span class="lineno"> 3635</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddRecursiveTypeGroup(group_start, group_size);</div>
<div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>        current_type_index += group_size;</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>      }</div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span>    }</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span>    <span class="keywordflow">return</span> explicit_rec_groups;</div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>  }</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span> </div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>  <span class="comment">// Generates and adds random struct types.</span></div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>  <span class="keywordtype">void</span> GenerateRandomStructs(</div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>      <span class="keyword">const</span> std::map&lt;uint8_t, uint8_t&gt;&amp; explicit_rec_groups,</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>      std::vector&lt;ModuleTypeIndex&gt;&amp; struct_types, uint8_t&amp; current_type_index,</div>
<div class="line"><a id="l03646" name="l03646"></a><span class="lineno"> 3646</span>      uint8_t kNumDefaultArrayTypes) {</div>
<div class="line"><a id="l03647" name="l03647"></a><span class="lineno"> 3647</span>    uint8_t last_struct_type_index = current_type_index + <a class="code hl_variable" href="random-module-generation_8cc.html#a9572c1f21f92ef80ce29464c2b99d302">num_structs_</a>;</div>
<div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span>    <span class="keywordflow">for</span> (; current_type_index &lt; last_struct_type_index; current_type_index++) {</div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>      <span class="keyword">auto</span> rec_group = explicit_rec_groups.find(current_type_index);</div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>      uint8_t current_rec_group_end = rec_group != explicit_rec_groups.end()</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>                                          ? rec_group-&gt;second</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>                                          : current_type_index;</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span> </div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span>      ModuleTypeIndex supertype = <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>;</div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>      uint8_t num_fields =</div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>          <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % (kMaxStructFields + 1);</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span> </div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>      uint32_t existing_struct_types =</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>          current_type_index - kNumDefaultArrayTypes;</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>      <span class="keywordflow">if</span> (existing_struct_types &gt; 0 &amp;&amp; <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;<span class="keywordtype">bool</span>&gt;()) {</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>        supertype = ModuleTypeIndex{<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() %</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>                                        existing_struct_types +</div>
<div class="line"><a id="l03663" name="l03663"></a><span class="lineno"> 3663</span>                                    kNumDefaultArrayTypes};</div>
<div class="line"><a id="l03664" name="l03664"></a><span class="lineno"> 3664</span>        num_fields += <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;GetStructType(supertype)-&gt;field_count();</div>
<div class="line"><a id="l03665" name="l03665"></a><span class="lineno"> 3665</span>      }</div>
<div class="line"><a id="l03666" name="l03666"></a><span class="lineno"> 3666</span>      StructType::Builder struct_builder(<a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>, num_fields);</div>
<div class="line"><a id="l03667" name="l03667"></a><span class="lineno"> 3667</span> </div>
<div class="line"><a id="l03668" name="l03668"></a><span class="lineno"> 3668</span>      <span class="comment">// Add all fields from super type.</span></div>
<div class="line"><a id="l03669" name="l03669"></a><span class="lineno"> 3669</span>      uint32_t field_index = 0;</div>
<div class="line"><a id="l03670" name="l03670"></a><span class="lineno"> 3670</span>      <span class="keywordflow">if</span> (supertype != kNoSuperType) {</div>
<div class="line"><a id="l03671" name="l03671"></a><span class="lineno"> 3671</span>        <span class="keyword">const</span> StructType* parent = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;GetStructType(supertype);</div>
<div class="line"><a id="l03672" name="l03672"></a><span class="lineno"> 3672</span>        <span class="keywordflow">for</span> (; field_index &lt; parent-&gt;field_count(); ++field_index) {</div>
<div class="line"><a id="l03673" name="l03673"></a><span class="lineno"> 3673</span>          <span class="comment">// TODO(14034): This could also be any sub type of the supertype&#39;s</span></div>
<div class="line"><a id="l03674" name="l03674"></a><span class="lineno"> 3674</span>          <span class="comment">// element type.</span></div>
<div class="line"><a id="l03675" name="l03675"></a><span class="lineno"> 3675</span>          struct_builder.AddField(parent-&gt;field(field_index),</div>
<div class="line"><a id="l03676" name="l03676"></a><span class="lineno"> 3676</span>                                  parent-&gt;mutability(field_index));</div>
<div class="line"><a id="l03677" name="l03677"></a><span class="lineno"> 3677</span>        }</div>
<div class="line"><a id="l03678" name="l03678"></a><span class="lineno"> 3678</span>      }</div>
<div class="line"><a id="l03679" name="l03679"></a><span class="lineno"> 3679</span>      <span class="keywordflow">for</span> (; field_index &lt; num_fields; field_index++) {</div>
<div class="line"><a id="l03680" name="l03680"></a><span class="lineno"> 3680</span>        <span class="comment">// Notes:</span></div>
<div class="line"><a id="l03681" name="l03681"></a><span class="lineno"> 3681</span>        <span class="comment">// - We allow a type to only have non-nullable fields of types that</span></div>
<div class="line"><a id="l03682" name="l03682"></a><span class="lineno"> 3682</span>        <span class="comment">//   are defined earlier. This way we avoid infinite non-nullable</span></div>
<div class="line"><a id="l03683" name="l03683"></a><span class="lineno"> 3683</span>        <span class="comment">//   constructions. Also relevant for arrays and functions.</span></div>
<div class="line"><a id="l03684" name="l03684"></a><span class="lineno"> 3684</span>        <span class="comment">// - On the other hand, nullable fields can be picked up to the end of</span></div>
<div class="line"><a id="l03685" name="l03685"></a><span class="lineno"> 3685</span>        <span class="comment">//   the current recursive group.</span></div>
<div class="line"><a id="l03686" name="l03686"></a><span class="lineno"> 3686</span>        <span class="comment">// - We exclude the non-nullable generic types arrayref, anyref,</span></div>
<div class="line"><a id="l03687" name="l03687"></a><span class="lineno"> 3687</span>        <span class="comment">//   structref, eqref and externref from the fields of structs and</span></div>
<div class="line"><a id="l03688" name="l03688"></a><span class="lineno"> 3688</span>        <span class="comment">//   arrays. This is so that GenerateInitExpr has a way to break a</span></div>
<div class="line"><a id="l03689" name="l03689"></a><span class="lineno"> 3689</span>        <span class="comment">//   recursion between a struct/array field and those types</span></div>
<div class="line"><a id="l03690" name="l03690"></a><span class="lineno"> 3690</span>        <span class="comment">//   ((ref extern) gets materialized through (ref any)).</span></div>
<div class="line"><a id="l03691" name="l03691"></a><span class="lineno"> 3691</span>        ValueType type = GetValueTypeHelper(</div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>            <a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, current_rec_group_end + 1,</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>            current_type_index, kIncludeNumericTypes, kIncludePackedTypes,</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span>            kExcludeSomeGenerics);</div>
<div class="line"><a id="l03695" name="l03695"></a><span class="lineno"> 3695</span> </div>
<div class="line"><a id="l03696" name="l03696"></a><span class="lineno"> 3696</span>        <span class="keywordtype">bool</span> mutability = <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l03697" name="l03697"></a><span class="lineno"> 3697</span>        struct_builder.AddField(type, mutability);</div>
<div class="line"><a id="l03698" name="l03698"></a><span class="lineno"> 3698</span>      }</div>
<div class="line"><a id="l03699" name="l03699"></a><span class="lineno"> 3699</span>      StructType* struct_fuz = struct_builder.Build();</div>
<div class="line"><a id="l03700" name="l03700"></a><span class="lineno"> 3700</span>      <span class="comment">// TODO(14034): Generate some final types too.</span></div>
<div class="line"><a id="l03701" name="l03701"></a><span class="lineno"> 3701</span>      ModuleTypeIndex <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> =</div>
<div class="line"><a id="l03702" name="l03702"></a><span class="lineno"> 3702</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddStructType(struct_fuz, <span class="keyword">false</span>, supertype);</div>
<div class="line"><a id="l03703" name="l03703"></a><span class="lineno"> 3703</span>      struct_types.push_back(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l03704" name="l03704"></a><span class="lineno"> 3704</span>    }</div>
<div class="line"><a id="l03705" name="l03705"></a><span class="lineno"> 3705</span>  }</div>
<div class="line"><a id="l03706" name="l03706"></a><span class="lineno"> 3706</span> </div>
<div class="line"><a id="l03707" name="l03707"></a><span class="lineno"> 3707</span>  <span class="comment">// Creates and adds random array types.</span></div>
<div class="line"><a id="l03708" name="l03708"></a><span class="lineno"> 3708</span>  <span class="keywordtype">void</span> GenerateRandomArrays(</div>
<div class="line"><a id="l03709" name="l03709"></a><span class="lineno"> 3709</span>      <span class="keyword">const</span> std::map&lt;uint8_t, uint8_t&gt;&amp; explicit_rec_groups,</div>
<div class="line"><a id="l03710" name="l03710"></a><span class="lineno"> 3710</span>      std::vector&lt;ModuleTypeIndex&gt;&amp; array_types, uint8_t&amp; current_type_index) {</div>
<div class="line"><a id="l03711" name="l03711"></a><span class="lineno"> 3711</span>    uint32_t last_struct_type_index = current_type_index + <a class="code hl_variable" href="random-module-generation_8cc.html#a9572c1f21f92ef80ce29464c2b99d302">num_structs_</a>;</div>
<div class="line"><a id="l03712" name="l03712"></a><span class="lineno"> 3712</span>    <span class="keywordflow">for</span> (; current_type_index &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a9572c1f21f92ef80ce29464c2b99d302">num_structs_</a> + <a class="code hl_variable" href="random-module-generation_8cc.html#a996bf7979ae342de8ab3c61497548104">num_arrays_</a>;</div>
<div class="line"><a id="l03713" name="l03713"></a><span class="lineno"> 3713</span>         current_type_index++) {</div>
<div class="line"><a id="l03714" name="l03714"></a><span class="lineno"> 3714</span>      <span class="keyword">auto</span> rec_group = explicit_rec_groups.find(current_type_index);</div>
<div class="line"><a id="l03715" name="l03715"></a><span class="lineno"> 3715</span>      uint8_t current_rec_group_end = rec_group != explicit_rec_groups.end()</div>
<div class="line"><a id="l03716" name="l03716"></a><span class="lineno"> 3716</span>                                          ? rec_group-&gt;second</div>
<div class="line"><a id="l03717" name="l03717"></a><span class="lineno"> 3717</span>                                          : current_type_index;</div>
<div class="line"><a id="l03718" name="l03718"></a><span class="lineno"> 3718</span>      ValueType type =</div>
<div class="line"><a id="l03719" name="l03719"></a><span class="lineno"> 3719</span>          GetValueTypeHelper(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, current_rec_group_end + 1,</div>
<div class="line"><a id="l03720" name="l03720"></a><span class="lineno"> 3720</span>                             current_type_index, kIncludeNumericTypes,</div>
<div class="line"><a id="l03721" name="l03721"></a><span class="lineno"> 3721</span>                             kIncludePackedTypes, kExcludeSomeGenerics);</div>
<div class="line"><a id="l03722" name="l03722"></a><span class="lineno"> 3722</span>      ModuleTypeIndex supertype = <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>;</div>
<div class="line"><a id="l03723" name="l03723"></a><span class="lineno"> 3723</span>      <span class="keywordflow">if</span> (current_type_index &gt; last_struct_type_index &amp;&amp;</div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>          <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;<span class="keywordtype">bool</span>&gt;()) {</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span>        <span class="comment">// Do not include the default array types, because they are final.</span></div>
<div class="line"><a id="l03726" name="l03726"></a><span class="lineno"> 3726</span>        uint8_t existing_array_types =</div>
<div class="line"><a id="l03727" name="l03727"></a><span class="lineno"> 3727</span>            current_type_index - last_struct_type_index;</div>
<div class="line"><a id="l03728" name="l03728"></a><span class="lineno"> 3728</span>        supertype = ModuleTypeIndex{</div>
<div class="line"><a id="l03729" name="l03729"></a><span class="lineno"> 3729</span>            last_struct_type_index +</div>
<div class="line"><a id="l03730" name="l03730"></a><span class="lineno"> 3730</span>            (<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % existing_array_types)};</div>
<div class="line"><a id="l03731" name="l03731"></a><span class="lineno"> 3731</span>        <span class="comment">// TODO(14034): This could also be any sub type of the supertype&#39;s</span></div>
<div class="line"><a id="l03732" name="l03732"></a><span class="lineno"> 3732</span>        <span class="comment">// element type.</span></div>
<div class="line"><a id="l03733" name="l03733"></a><span class="lineno"> 3733</span>        type = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;GetArrayType(supertype)-&gt;element_type();</div>
<div class="line"><a id="l03734" name="l03734"></a><span class="lineno"> 3734</span>      }</div>
<div class="line"><a id="l03735" name="l03735"></a><span class="lineno"> 3735</span>      ArrayType* array_fuz = <a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>-&gt;New&lt;ArrayType&gt;(<a class="code hl_variable" href="wasm-inlining-into-js_8cc.html#a66874a4e937e4192b2b42e57f55251e8">type</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l03736" name="l03736"></a><span class="lineno"> 3736</span>      <span class="comment">// TODO(14034): Generate some final types too.</span></div>
<div class="line"><a id="l03737" name="l03737"></a><span class="lineno"> 3737</span>      ModuleTypeIndex <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> =</div>
<div class="line"><a id="l03738" name="l03738"></a><span class="lineno"> 3738</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddArrayType(array_fuz, <span class="keyword">false</span>, supertype);</div>
<div class="line"><a id="l03739" name="l03739"></a><span class="lineno"> 3739</span>      array_types.push_back(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l03740" name="l03740"></a><span class="lineno"> 3740</span>    }</div>
<div class="line"><a id="l03741" name="l03741"></a><span class="lineno"> 3741</span>  }</div>
<div class="line"><a id="l03742" name="l03742"></a><span class="lineno"> 3742</span> </div>
<div class="line"><a id="l03743" name="l03743"></a><span class="lineno"> 3743</span>  <span class="keyword">enum</span> SigKind { kFunctionSig, kExceptionSig };</div>
<div class="line"><a id="l03744" name="l03744"></a><span class="lineno"> 3744</span> </div>
<div class="line"><a id="l03745" name="l03745"></a><span class="lineno"> 3745</span>  <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* GenerateSig(SigKind sig_kind, <span class="keywordtype">int</span> num_types) {</div>
<div class="line"><a id="l03746" name="l03746"></a><span class="lineno"> 3746</span>    <span class="comment">// Generate enough parameters to spill some to the stack.</span></div>
<div class="line"><a id="l03747" name="l03747"></a><span class="lineno"> 3747</span>    <span class="keywordtype">int</span> num_params = <span class="keywordtype">int</span>{<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;()} % (kMaxParameters + 1);</div>
<div class="line"><a id="l03748" name="l03748"></a><span class="lineno"> 3748</span>    <span class="keywordtype">int</span> num_returns =</div>
<div class="line"><a id="l03749" name="l03749"></a><span class="lineno"> 3749</span>        sig_kind == kFunctionSig</div>
<div class="line"><a id="l03750" name="l03750"></a><span class="lineno"> 3750</span>            ? <span class="keywordtype">int</span>{<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;()} % (kMaxReturns + 1)</div>
<div class="line"><a id="l03751" name="l03751"></a><span class="lineno"> 3751</span>            : 0;</div>
<div class="line"><a id="l03752" name="l03752"></a><span class="lineno"> 3752</span> </div>
<div class="line"><a id="l03753" name="l03753"></a><span class="lineno"> 3753</span>    FunctionSig::Builder builder(<a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>, num_returns, num_params);</div>
<div class="line"><a id="l03754" name="l03754"></a><span class="lineno"> 3754</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_returns; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03755" name="l03755"></a><span class="lineno"> 3755</span>      builder.AddReturn(GetValueType(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, num_types));</div>
<div class="line"><a id="l03756" name="l03756"></a><span class="lineno"> 3756</span>    }</div>
<div class="line"><a id="l03757" name="l03757"></a><span class="lineno"> 3757</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_params; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03758" name="l03758"></a><span class="lineno"> 3758</span>      builder.AddParam(GetValueType(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, num_types));</div>
<div class="line"><a id="l03759" name="l03759"></a><span class="lineno"> 3759</span>    }</div>
<div class="line"><a id="l03760" name="l03760"></a><span class="lineno"> 3760</span>    <span class="keywordflow">return</span> builder.Get();</div>
<div class="line"><a id="l03761" name="l03761"></a><span class="lineno"> 3761</span>  }</div>
<div class="line"><a id="l03762" name="l03762"></a><span class="lineno"> 3762</span> </div>
<div class="line"><a id="l03763" name="l03763"></a><span class="lineno"> 3763</span>  <span class="comment">// Creates and adds random function signatures.</span></div>
<div class="line"><a id="l03764" name="l03764"></a><span class="lineno"> 3764</span>  <span class="keywordtype">void</span> GenerateRandomFunctionSigs(</div>
<div class="line"><a id="l03765" name="l03765"></a><span class="lineno"> 3765</span>      <span class="keyword">const</span> std::map&lt;uint8_t, uint8_t&gt;&amp; explicit_rec_groups,</div>
<div class="line"><a id="l03766" name="l03766"></a><span class="lineno"> 3766</span>      std::vector&lt;ModuleTypeIndex&gt;&amp; function_signatures,</div>
<div class="line"><a id="l03767" name="l03767"></a><span class="lineno"> 3767</span>      uint8_t&amp; current_type_index, <span class="keywordtype">bool</span> kIsFinal) {</div>
<div class="line"><a id="l03768" name="l03768"></a><span class="lineno"> 3768</span>    <span class="comment">// Recursive groups consist of recursive types that came with the WasmGC</span></div>
<div class="line"><a id="l03769" name="l03769"></a><span class="lineno"> 3769</span>    <span class="comment">// proposal.</span></div>
<div class="line"><a id="l03770" name="l03770"></a><span class="lineno"> 3770</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(!<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>.generate_wasm_gc(), explicit_rec_groups.empty());</div>
<div class="line"><a id="l03771" name="l03771"></a><span class="lineno"> 3771</span> </div>
<div class="line"><a id="l03772" name="l03772"></a><span class="lineno"> 3772</span>    <span class="keywordflow">for</span> (; current_type_index &lt; <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>; current_type_index++) {</div>
<div class="line"><a id="l03773" name="l03773"></a><span class="lineno"> 3773</span>      <span class="keyword">auto</span> rec_group = explicit_rec_groups.find(current_type_index);</div>
<div class="line"><a id="l03774" name="l03774"></a><span class="lineno"> 3774</span>      uint8_t current_rec_group_end = rec_group != explicit_rec_groups.end()</div>
<div class="line"><a id="l03775" name="l03775"></a><span class="lineno"> 3775</span>                                          ? rec_group-&gt;second</div>
<div class="line"><a id="l03776" name="l03776"></a><span class="lineno"> 3776</span>                                          : current_type_index;</div>
<div class="line"><a id="l03777" name="l03777"></a><span class="lineno"> 3777</span>      <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = GenerateSig(kFunctionSig, current_rec_group_end + 1);</div>
<div class="line"><a id="l03778" name="l03778"></a><span class="lineno"> 3778</span>      ModuleTypeIndex signature_index =</div>
<div class="line"><a id="l03779" name="l03779"></a><span class="lineno"> 3779</span>          <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;ForceAddSignature(sig, kIsFinal);</div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>      function_signatures.push_back(signature_index);</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span>    }</div>
<div class="line"><a id="l03782" name="l03782"></a><span class="lineno"> 3782</span>  }</div>
<div class="line"><a id="l03783" name="l03783"></a><span class="lineno"> 3783</span> </div>
<div class="line"><a id="l03784" name="l03784"></a><span class="lineno"> 3784</span>  <span class="keywordtype">void</span> GenerateRandomExceptions(uint8_t <a class="code hl_variable" href="liftoff-compiler_8cc.html#a6fe609353c39c0b8953d6309e0797779">num_exceptions</a>) {</div>
<div class="line"><a id="l03785" name="l03785"></a><span class="lineno"> 3785</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="liftoff-compiler_8cc.html#a6fe609353c39c0b8953d6309e0797779">num_exceptions</a>; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03786" name="l03786"></a><span class="lineno"> 3786</span>      <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = GenerateSig(kExceptionSig, <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>);</div>
<div class="line"><a id="l03787" name="l03787"></a><span class="lineno"> 3787</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddTag(sig);</div>
<div class="line"><a id="l03788" name="l03788"></a><span class="lineno"> 3788</span>    }</div>
<div class="line"><a id="l03789" name="l03789"></a><span class="lineno"> 3789</span>  }</div>
<div class="line"><a id="l03790" name="l03790"></a><span class="lineno"> 3790</span> </div>
<div class="line"><a id="l03791" name="l03791"></a><span class="lineno"> 3791</span>  <span class="comment">// Adds the &quot;wasm:js-string&quot; imports to the module.</span></div>
<div class="line"><a id="l03792" name="l03792"></a><span class="lineno"> 3792</span>  StringImports AddImportedStringImports() {</div>
<div class="line"><a id="l03793" name="l03793"></a><span class="lineno"> 3793</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ModuleTypeIndex kArrayI8{0};</div>
<div class="line"><a id="l03794" name="l03794"></a><span class="lineno"> 3794</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ModuleTypeIndex kArrayI16{1};</div>
<div class="line"><a id="l03795" name="l03795"></a><span class="lineno"> 3795</span>    StringImports strings;</div>
<div class="line"><a id="l03796" name="l03796"></a><span class="lineno"> 3796</span>    strings.array_i8 = kArrayI8;</div>
<div class="line"><a id="l03797" name="l03797"></a><span class="lineno"> 3797</span>    strings.array_i16 = kArrayI16;</div>
<div class="line"><a id="l03798" name="l03798"></a><span class="lineno"> 3798</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kRefExtern = ValueType::Ref(HeapType::kExtern);</div>
<div class="line"><a id="l03799" name="l03799"></a><span class="lineno"> 3799</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kExternRef = <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#aed8b0c264ada0ac0e941efbc9bf943a1">kWasmExternRef</a>;</div>
<div class="line"><a id="l03800" name="l03800"></a><span class="lineno"> 3800</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a> = <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>;</div>
<div class="line"><a id="l03801" name="l03801"></a><span class="lineno"> 3801</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kRefA8 = ValueType::Ref(kArrayI8);</div>
<div class="line"><a id="l03802" name="l03802"></a><span class="lineno"> 3802</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kRefNullA8 = ValueType::RefNull(kArrayI8);</div>
<div class="line"><a id="l03803" name="l03803"></a><span class="lineno"> 3803</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kRefNullA16 = ValueType::RefNull(kArrayI16);</div>
<div class="line"><a id="l03804" name="l03804"></a><span class="lineno"> 3804</span> </div>
<div class="line"><a id="l03805" name="l03805"></a><span class="lineno"> 3805</span>    <span class="comment">// Shorthands: &quot;r&quot; = nullable &quot;externref&quot;,</span></div>
<div class="line"><a id="l03806" name="l03806"></a><span class="lineno"> 3806</span>    <span class="comment">// &quot;e&quot; = non-nullable &quot;ref extern&quot;.</span></div>
<div class="line"><a id="l03807" name="l03807"></a><span class="lineno"> 3807</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_e_i[] = {kRefExtern, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a id="l03808" name="l03808"></a><span class="lineno"> 3808</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_e_rr[] = {kRefExtern, kExternRef,</div>
<div class="line"><a id="l03809" name="l03809"></a><span class="lineno"> 3809</span>                                               kExternRef};</div>
<div class="line"><a id="l03810" name="l03810"></a><span class="lineno"> 3810</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_e_rii[] = {kRefExtern, kExternRef, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>,</div>
<div class="line"><a id="l03811" name="l03811"></a><span class="lineno"> 3811</span>                                                <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a id="l03812" name="l03812"></a><span class="lineno"> 3812</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_i_ri[] = {<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>, kExternRef, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a id="l03813" name="l03813"></a><span class="lineno"> 3813</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_i_rr[] = {<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>, kExternRef, kExternRef};</div>
<div class="line"><a id="l03814" name="l03814"></a><span class="lineno"> 3814</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_from_a16[] = {kRefExtern, kRefNullA16,</div>
<div class="line"><a id="l03815" name="l03815"></a><span class="lineno"> 3815</span>                                                   <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a id="l03816" name="l03816"></a><span class="lineno"> 3816</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_from_a8[] = {kRefExtern, kRefNullA8, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>,</div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span>                                                  <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_into_a16[] = {<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>, kExternRef,</div>
<div class="line"><a id="l03819" name="l03819"></a><span class="lineno"> 3819</span>                                                   kRefNullA16, <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a id="l03820" name="l03820"></a><span class="lineno"> 3820</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_into_a8[] = {<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>, kExternRef, kRefNullA8,</div>
<div class="line"><a id="l03821" name="l03821"></a><span class="lineno"> 3821</span>                                                  <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">kI32</a>};</div>
<div class="line"><a id="l03822" name="l03822"></a><span class="lineno"> 3822</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> ValueType kReps_to_a8[] = {kRefA8, kExternRef};</div>
<div class="line"><a id="l03823" name="l03823"></a><span class="lineno"> 3823</span> </div>
<div class="line"><a id="l03824" name="l03824"></a><span class="lineno"> 3824</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_e_i(1, 1, kReps_e_i);</div>
<div class="line"><a id="l03825" name="l03825"></a><span class="lineno"> 3825</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_e_r(1, 1, kReps_e_rr);</div>
<div class="line"><a id="l03826" name="l03826"></a><span class="lineno"> 3826</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_e_rr(1, 2, kReps_e_rr);</div>
<div class="line"><a id="l03827" name="l03827"></a><span class="lineno"> 3827</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_e_rii(1, 3, kReps_e_rii);</div>
<div class="line"><a id="l03828" name="l03828"></a><span class="lineno"> 3828</span> </div>
<div class="line"><a id="l03829" name="l03829"></a><span class="lineno"> 3829</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_i_r(1, 1, kReps_i_ri);</div>
<div class="line"><a id="l03830" name="l03830"></a><span class="lineno"> 3830</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_i_ri(1, 2, kReps_i_ri);</div>
<div class="line"><a id="l03831" name="l03831"></a><span class="lineno"> 3831</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_i_rr(1, 2, kReps_i_rr);</div>
<div class="line"><a id="l03832" name="l03832"></a><span class="lineno"> 3832</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_from_a16(1, 3, kReps_from_a16);</div>
<div class="line"><a id="l03833" name="l03833"></a><span class="lineno"> 3833</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_from_a8(1, 3, kReps_from_a8);</div>
<div class="line"><a id="l03834" name="l03834"></a><span class="lineno"> 3834</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_into_a16(1, 3, kReps_into_a16);</div>
<div class="line"><a id="l03835" name="l03835"></a><span class="lineno"> 3835</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_into_a8(1, 3, kReps_into_a8);</div>
<div class="line"><a id="l03836" name="l03836"></a><span class="lineno"> 3836</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a> kSig_to_a8(1, 1, kReps_to_a8);</div>
<div class="line"><a id="l03837" name="l03837"></a><span class="lineno"> 3837</span> </div>
<div class="line"><a id="l03838" name="l03838"></a><span class="lineno"> 3838</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> base::Vector&lt;const char&gt; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a8e105f40fdd24a8ca69e0e2d08191420">kJsString</a> =</div>
<div class="line"><a id="l03839" name="l03839"></a><span class="lineno"> 3839</span>        base::StaticCharVector(<span class="stringliteral">&quot;wasm:js-string&quot;</span>);</div>
<div class="line"><a id="l03840" name="l03840"></a><span class="lineno"> 3840</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> base::Vector&lt;const char&gt; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a1dd92644a8e57b6ff1321f68dc340f04">kTextDecoder</a> =</div>
<div class="line"><a id="l03841" name="l03841"></a><span class="lineno"> 3841</span>        base::StaticCharVector(<span class="stringliteral">&quot;wasm:text-decoder&quot;</span>);</div>
<div class="line"><a id="l03842" name="l03842"></a><span class="lineno"> 3842</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> base::Vector&lt;const char&gt; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a6c2ab476973341ef6752d1b30e333ac9">kTextEncoder</a> =</div>
<div class="line"><a id="l03843" name="l03843"></a><span class="lineno"> 3843</span>        base::StaticCharVector(<span class="stringliteral">&quot;wasm:text-encoder&quot;</span>);</div>
<div class="line"><a id="l03844" name="l03844"></a><span class="lineno"> 3844</span> </div>
<div class="line"><a id="l03845" name="l03845"></a><span class="lineno"> 3845</span><span class="preprocessor">#define STRINGFUNC(name, sig, group) \</span></div>
<div class="line"><a id="l03846" name="l03846"></a><span class="lineno"> 3846</span><span class="preprocessor">  strings.name = builder_-&gt;AddImport(base::CStrVector(#name), &amp;sig, group)</span></div>
<div class="line"><a id="l03847" name="l03847"></a><span class="lineno"> 3847</span> </div>
<div class="line"><a id="l03848" name="l03848"></a><span class="lineno"> 3848</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a8721885a13fdab545fa508803154d20d">cast</a>, kSig_e_r, kJsString);</div>
<div class="line"><a id="l03849" name="l03849"></a><span class="lineno"> 3849</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(test, kSig_i_r, kJsString);</div>
<div class="line"><a id="l03850" name="l03850"></a><span class="lineno"> 3850</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a2a94af96b48ededb482be8d77265360c">fromCharCode</a>, kSig_e_i, kJsString);</div>
<div class="line"><a id="l03851" name="l03851"></a><span class="lineno"> 3851</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a64a83922e1e2fa0a4a08d4e89e716389">fromCodePoint</a>, kSig_e_i, kJsString);</div>
<div class="line"><a id="l03852" name="l03852"></a><span class="lineno"> 3852</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a4b3721456d8a061caa13e8b30f5d4f74">charCodeAt</a>, kSig_i_ri, kJsString);</div>
<div class="line"><a id="l03853" name="l03853"></a><span class="lineno"> 3853</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#aa002b1b2006b2e38b143b322a892d9ba">codePointAt</a>, kSig_i_ri, kJsString);</div>
<div class="line"><a id="l03854" name="l03854"></a><span class="lineno"> 3854</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(length, kSig_i_r, kJsString);</div>
<div class="line"><a id="l03855" name="l03855"></a><span class="lineno"> 3855</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#aecf167532df97fbf5d2f2fa85eda6397">concat</a>, kSig_e_rr, kJsString);</div>
<div class="line"><a id="l03856" name="l03856"></a><span class="lineno"> 3856</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(substring, kSig_e_rii, kJsString);</div>
<div class="line"><a id="l03857" name="l03857"></a><span class="lineno"> 3857</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a1ad2b9239773cbd418818106711ed087">equals</a>, kSig_i_rr, kJsString);</div>
<div class="line"><a id="l03858" name="l03858"></a><span class="lineno"> 3858</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#ac36537f594f783ae9323e25e7f8317b2">compare</a>, kSig_i_rr, kJsString);</div>
<div class="line"><a id="l03859" name="l03859"></a><span class="lineno"> 3859</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a764a5f1b2877c8fed9d34b9cf2b7e8c8">fromCharCodeArray</a>, kSig_from_a16, kJsString);</div>
<div class="line"><a id="l03860" name="l03860"></a><span class="lineno"> 3860</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a5f3ec28b358bd591e5e67a67866d4766">intoCharCodeArray</a>, kSig_into_a16, kJsString);</div>
<div class="line"><a id="l03861" name="l03861"></a><span class="lineno"> 3861</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#adf46c6cdb1d1f66f2212c8cfd21b5a89">measureStringAsUTF8</a>, kSig_i_r, kTextEncoder);</div>
<div class="line"><a id="l03862" name="l03862"></a><span class="lineno"> 3862</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a89c0765ddb421d9438d736fc9fdaa0e0">encodeStringIntoUTF8Array</a>, kSig_into_a8, kTextEncoder);</div>
<div class="line"><a id="l03863" name="l03863"></a><span class="lineno"> 3863</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a1d390dc688e2df71af7bd62f5bdc5103">encodeStringToUTF8Array</a>, kSig_to_a8, kTextEncoder);</div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>    <a class="code hl_define" href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a>(<a class="code hl_variable" href="random-module-generation_8cc.html#a4150e8e3bb68c5622ced13e984be1ef6">decodeStringFromUTF8Array</a>, kSig_from_a8, kTextDecoder);</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span> </div>
<div class="line"><a id="l03866" name="l03866"></a><span class="lineno"> 3866</span><span class="preprocessor">#undef STRINGFUNC</span></div>
<div class="line"><a id="l03867" name="l03867"></a><span class="lineno"> 3867</span> </div>
<div class="line"><a id="l03868" name="l03868"></a><span class="lineno"> 3868</span>    <span class="keywordflow">return</span> strings;</div>
<div class="line"><a id="l03869" name="l03869"></a><span class="lineno"> 3869</span>  }</div>
<div class="line"><a id="l03870" name="l03870"></a><span class="lineno"> 3870</span> </div>
<div class="line"><a id="l03871" name="l03871"></a><span class="lineno"> 3871</span>  <span class="comment">// Creates and adds random tables.</span></div>
<div class="line"><a id="l03872" name="l03872"></a><span class="lineno"> 3872</span>  <span class="keywordtype">void</span> GenerateRandomTables(<span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; array_types,</div>
<div class="line"><a id="l03873" name="l03873"></a><span class="lineno"> 3873</span>                            <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; struct_types) {</div>
<div class="line"><a id="l03874" name="l03874"></a><span class="lineno"> 3874</span>    <span class="keywordtype">int</span> num_tables = <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % kMaxTables + 1;</div>
<div class="line"><a id="l03875" name="l03875"></a><span class="lineno"> 3875</span>    <span class="keywordtype">int</span> are_table64 = <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l03876" name="l03876"></a><span class="lineno"> 3876</span>    <span class="keyword">static_assert</span>(</div>
<div class="line"><a id="l03877" name="l03877"></a><span class="lineno"> 3877</span>        kMaxTables &lt;= 8,</div>
<div class="line"><a id="l03878" name="l03878"></a><span class="lineno"> 3878</span>        <span class="stringliteral">&quot;Too many tables. Use more random bits to choose their address type.&quot;</span>);</div>
<div class="line"><a id="l03879" name="l03879"></a><span class="lineno"> 3879</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_tables; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l03880" name="l03880"></a><span class="lineno"> 3880</span>      uint32_t min_size = <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> == 0</div>
<div class="line"><a id="l03881" name="l03881"></a><span class="lineno"> 3881</span>                              ? <a class="code hl_variable" href="random-module-generation_8cc.html#a018b4bebee22d7f7e53b290510767da4">num_functions_</a></div>
<div class="line"><a id="l03882" name="l03882"></a><span class="lineno"> 3882</span>                              : <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;<a class="code hl_class" href="classget.html">get</a>&lt;uint8_t&gt;() % kMaxTableSize;</div>
<div class="line"><a id="l03883" name="l03883"></a><span class="lineno"> 3883</span>      uint32_t max_size =</div>
<div class="line"><a id="l03884" name="l03884"></a><span class="lineno"> 3884</span>          <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % (kMaxTableSize - min_size) + min_size;</div>
<div class="line"><a id="l03885" name="l03885"></a><span class="lineno"> 3885</span>      <span class="comment">// Table 0 is always funcref. This guarantees that</span></div>
<div class="line"><a id="l03886" name="l03886"></a><span class="lineno"> 3886</span>      <span class="comment">// - call_indirect has at least one funcref table to work with,</span></div>
<div class="line"><a id="l03887" name="l03887"></a><span class="lineno"> 3887</span>      <span class="comment">// - we have a place to reference all functions in the program, so they</span></div>
<div class="line"><a id="l03888" name="l03888"></a><span class="lineno"> 3888</span>      <span class="comment">//   count as &quot;declared&quot; for ref.func.</span></div>
<div class="line"><a id="l03889" name="l03889"></a><span class="lineno"> 3889</span>      <span class="keywordtype">bool</span> force_funcref = <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> == 0;</div>
<div class="line"><a id="l03890" name="l03890"></a><span class="lineno"> 3890</span>      ValueType type =</div>
<div class="line"><a id="l03891" name="l03891"></a><span class="lineno"> 3891</span>          force_funcref</div>
<div class="line"><a id="l03892" name="l03892"></a><span class="lineno"> 3892</span>              ? <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">kWasmFuncRef</a></div>
<div class="line"><a id="l03893" name="l03893"></a><span class="lineno"> 3893</span>              : GetValueTypeHelper(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>,</div>
<div class="line"><a id="l03894" name="l03894"></a><span class="lineno"> 3894</span>                                   <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>, kExcludeNumericTypes,</div>
<div class="line"><a id="l03895" name="l03895"></a><span class="lineno"> 3895</span>                                   kExcludePackedTypes, kIncludeAllGenerics);</div>
<div class="line"><a id="l03896" name="l03896"></a><span class="lineno"> 3896</span>      <span class="keywordtype">bool</span> use_initializer =</div>
<div class="line"><a id="l03897" name="l03897"></a><span class="lineno"> 3897</span>          !type.is_defaultable() || <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l03898" name="l03898"></a><span class="lineno"> 3898</span> </div>
<div class="line"><a id="l03899" name="l03899"></a><span class="lineno"> 3899</span>      <span class="keywordtype">bool</span> use_table64 =</div>
<div class="line"><a id="l03900" name="l03900"></a><span class="lineno"> 3900</span>          <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_memory64 &amp;&amp; (are_table64 &amp; 1);</div>
<div class="line"><a id="l03901" name="l03901"></a><span class="lineno"> 3901</span>      are_table64 &gt;&gt;= 1;</div>
<div class="line"><a id="l03902" name="l03902"></a><span class="lineno"> 3902</span>      AddressType address_type =</div>
<div class="line"><a id="l03903" name="l03903"></a><span class="lineno"> 3903</span>          use_table64 ? AddressType::kI64 : AddressType::kI32;</div>
<div class="line"><a id="l03904" name="l03904"></a><span class="lineno"> 3904</span>      uint32_t table_index =</div>
<div class="line"><a id="l03905" name="l03905"></a><span class="lineno"> 3905</span>          use_initializer</div>
<div class="line"><a id="l03906" name="l03906"></a><span class="lineno"> 3906</span>              ? <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddTable(</div>
<div class="line"><a id="l03907" name="l03907"></a><span class="lineno"> 3907</span>                    type, min_size, max_size,</div>
<div class="line"><a id="l03908" name="l03908"></a><span class="lineno"> 3908</span>                    GenerateInitExpr(<a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>, *<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>, type,</div>
<div class="line"><a id="l03909" name="l03909"></a><span class="lineno"> 3909</span>                                     struct_types, array_types, 0),</div>
<div class="line"><a id="l03910" name="l03910"></a><span class="lineno"> 3910</span>                    address_type)</div>
<div class="line"><a id="l03911" name="l03911"></a><span class="lineno"> 3911</span>              : <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddTable(type, min_size, max_size, address_type);</div>
<div class="line"><a id="l03912" name="l03912"></a><span class="lineno"> 3912</span>      <span class="keywordflow">if</span> (type.is_reference_to(HeapType::kFunc)) {</div>
<div class="line"><a id="l03913" name="l03913"></a><span class="lineno"> 3913</span>        <span class="comment">// For function tables, initialize them with functions from the program.</span></div>
<div class="line"><a id="l03914" name="l03914"></a><span class="lineno"> 3914</span>        <span class="comment">// Currently, the fuzzer assumes that every funcref/(ref func) table</span></div>
<div class="line"><a id="l03915" name="l03915"></a><span class="lineno"> 3915</span>        <span class="comment">// contains the functions in the program in the order they are defined.</span></div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span>        <span class="comment">// TODO(11954): Consider generalizing this.</span></div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span>        WasmInitExpr init_expr = <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;IsTable64(table_index)</div>
<div class="line"><a id="l03918" name="l03918"></a><span class="lineno"> 3918</span>                                     ? WasmInitExpr(<span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(0))</div>
<div class="line"><a id="l03919" name="l03919"></a><span class="lineno"> 3919</span>                                     : WasmInitExpr(static_cast&lt;<a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a>&gt;(0));</div>
<div class="line"><a id="l03920" name="l03920"></a><span class="lineno"> 3920</span>        WasmModuleBuilder::WasmElemSegment segment(<a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>, type, table_index,</div>
<div class="line"><a id="l03921" name="l03921"></a><span class="lineno"> 3921</span>                                                   init_expr);</div>
<div class="line"><a id="l03922" name="l03922"></a><span class="lineno"> 3922</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> entry_index = 0; entry_index &lt; static_cast&lt;int&gt;(min_size);</div>
<div class="line"><a id="l03923" name="l03923"></a><span class="lineno"> 3923</span>             entry_index++) {</div>
<div class="line"><a id="l03924" name="l03924"></a><span class="lineno"> 3924</span>          segment.entries.emplace_back(</div>
<div class="line"><a id="l03925" name="l03925"></a><span class="lineno"> 3925</span>              WasmModuleBuilder::WasmElemSegment::Entry::kRefFuncEntry,</div>
<div class="line"><a id="l03926" name="l03926"></a><span class="lineno"> 3926</span>              <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;NumImportedFunctions() +</div>
<div class="line"><a id="l03927" name="l03927"></a><span class="lineno"> 3927</span>                  (entry_index % <a class="code hl_variable" href="random-module-generation_8cc.html#a018b4bebee22d7f7e53b290510767da4">num_functions_</a>));</div>
<div class="line"><a id="l03928" name="l03928"></a><span class="lineno"> 3928</span>        }</div>
<div class="line"><a id="l03929" name="l03929"></a><span class="lineno"> 3929</span>        <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddElementSegment(std::move(segment));</div>
<div class="line"><a id="l03930" name="l03930"></a><span class="lineno"> 3930</span>      }</div>
<div class="line"><a id="l03931" name="l03931"></a><span class="lineno"> 3931</span>    }</div>
<div class="line"><a id="l03932" name="l03932"></a><span class="lineno"> 3932</span>  }</div>
<div class="line"><a id="l03933" name="l03933"></a><span class="lineno"> 3933</span> </div>
<div class="line"><a id="l03934" name="l03934"></a><span class="lineno"> 3934</span>  <span class="comment">// Creates and adds random globals.</span></div>
<div class="line"><a id="l03935" name="l03935"></a><span class="lineno"> 3935</span>  std::tuple&lt;std::vector&lt;ValueType&gt;, std::vector&lt;uint8_t&gt;&gt;</div>
<div class="line"><a id="l03936" name="l03936"></a><span class="lineno"> 3936</span>  GenerateRandomGlobals(<span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; array_types,</div>
<div class="line"><a id="l03937" name="l03937"></a><span class="lineno"> 3937</span>                        <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; struct_types) {</div>
<div class="line"><a id="l03938" name="l03938"></a><span class="lineno"> 3938</span>    <span class="keywordtype">int</span> num_globals = <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % (kMaxGlobals + 1);</div>
<div class="line"><a id="l03939" name="l03939"></a><span class="lineno"> 3939</span>    std::vector&lt;ValueType&gt; globals;</div>
<div class="line"><a id="l03940" name="l03940"></a><span class="lineno"> 3940</span>    std::vector&lt;uint8_t&gt; mutable_globals;</div>
<div class="line"><a id="l03941" name="l03941"></a><span class="lineno"> 3941</span>    globals.reserve(num_globals);</div>
<div class="line"><a id="l03942" name="l03942"></a><span class="lineno"> 3942</span>    mutable_globals.reserve(num_globals);</div>
<div class="line"><a id="l03943" name="l03943"></a><span class="lineno"> 3943</span> </div>
<div class="line"><a id="l03944" name="l03944"></a><span class="lineno"> 3944</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_globals; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03945" name="l03945"></a><span class="lineno"> 3945</span>      ValueType type = GetValueType(<a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>);</div>
<div class="line"><a id="l03946" name="l03946"></a><span class="lineno"> 3946</span>      <span class="comment">// 1/8 of globals are immutable.</span></div>
<div class="line"><a id="l03947" name="l03947"></a><span class="lineno"> 3947</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> mutability = (<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>-&gt;get&lt;uint8_t&gt;() % 8) != 0;</div>
<div class="line"><a id="l03948" name="l03948"></a><span class="lineno"> 3948</span>      <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>-&gt;AddGlobal(type, mutability,</div>
<div class="line"><a id="l03949" name="l03949"></a><span class="lineno"> 3949</span>                          GenerateInitExpr(<a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>, *<a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>, <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>,</div>
<div class="line"><a id="l03950" name="l03950"></a><span class="lineno"> 3950</span>                                           type, struct_types, array_types, 0));</div>
<div class="line"><a id="l03951" name="l03951"></a><span class="lineno"> 3951</span>      globals.push_back(type);</div>
<div class="line"><a id="l03952" name="l03952"></a><span class="lineno"> 3952</span>      <span class="keywordflow">if</span> (mutability) mutable_globals.push_back(<span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l03953" name="l03953"></a><span class="lineno"> 3953</span>    }</div>
<div class="line"><a id="l03954" name="l03954"></a><span class="lineno"> 3954</span> </div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"> 3955</span>    <span class="keywordflow">return</span> {globals, mutable_globals};</div>
<div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span>  }</div>
<div class="line"><a id="l03957" name="l03957"></a><span class="lineno"> 3957</span> </div>
<div class="line"><a id="l03958" name="l03958"></a><span class="lineno"> 3958</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l03959" name="l03959"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a4a6b4a892c0386a211c059cd253af213"> 3959</a></span>  <a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* <span class="keyword">const</span> <a class="code hl_variable" href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a>;</div>
<div class="line"><a id="l03960" name="l03960"></a><span class="lineno"> 3960</span>  <span class="keyword">const</span> WasmModuleGenerationOptions <a class="code hl_variable" href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a>;</div>
<div class="line"><a id="l03961" name="l03961"></a><span class="lineno"> 3961</span>  WasmModuleBuilder* <span class="keyword">const</span> <a class="code hl_variable" href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a>;</div>
<div class="line"><a id="l03962" name="l03962"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f"> 3962</a></span>  DataRange* <span class="keyword">const</span> <a class="code hl_variable" href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a>;</div>
<div class="line"><a id="l03963" name="l03963"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a018b4bebee22d7f7e53b290510767da4"> 3963</a></span>  <span class="keyword">const</span> uint8_t <a class="code hl_variable" href="random-module-generation_8cc.html#a018b4bebee22d7f7e53b290510767da4">num_functions_</a>;</div>
<div class="line"><a id="l03964" name="l03964"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a9572c1f21f92ef80ce29464c2b99d302"> 3964</a></span>  <span class="keyword">const</span> uint8_t <a class="code hl_variable" href="random-module-generation_8cc.html#a9572c1f21f92ef80ce29464c2b99d302">num_structs_</a>;</div>
<div class="line"><a id="l03965" name="l03965"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a996bf7979ae342de8ab3c61497548104"> 3965</a></span>  <span class="keyword">const</span> uint8_t <a class="code hl_variable" href="random-module-generation_8cc.html#a996bf7979ae342de8ab3c61497548104">num_arrays_</a>;</div>
<div class="line"><a id="l03966" name="l03966"></a><span class="lineno"><a class="line" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8"> 3966</a></span>  <span class="keyword">const</span> uint16_t <a class="code hl_variable" href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a>;</div>
<div class="line"><a id="l03967" name="l03967"></a><span class="lineno"> 3967</span>};</div>
<div class="line"><a id="l03968" name="l03968"></a><span class="lineno"> 3968</span> </div>
<div class="line"><a id="l03969" name="l03969"></a><span class="lineno"> 3969</span>WasmInitExpr GenerateStructNewInitExpr(</div>
<div class="line"><a id="l03970" name="l03970"></a><span class="lineno"> 3970</span>    <a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* zone, DataRange&amp; range, WasmModuleBuilder* builder,</div>
<div class="line"><a id="l03971" name="l03971"></a><span class="lineno"> 3971</span>    ModuleTypeIndex <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; structs,</div>
<div class="line"><a id="l03972" name="l03972"></a><span class="lineno"> 3972</span>    <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; arrays, uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>) {</div>
<div class="line"><a id="l03973" name="l03973"></a><span class="lineno"> 3973</span>  <span class="keyword">const</span> StructType* struct_type = builder-&gt;GetStructType(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l03974" name="l03974"></a><span class="lineno"> 3974</span>  <span class="keywordtype">bool</span> use_new_default =</div>
<div class="line"><a id="l03975" name="l03975"></a><span class="lineno"> 3975</span>      std::all_of(struct_type-&gt;fields().begin(), struct_type-&gt;fields().end(),</div>
<div class="line"><a id="l03976" name="l03976"></a><span class="lineno"> 3976</span>                  [](ValueType type) { return type.is_defaultable(); }) &amp;&amp;</div>
<div class="line"><a id="l03977" name="l03977"></a><span class="lineno"> 3977</span>      range.get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l03978" name="l03978"></a><span class="lineno"> 3978</span> </div>
<div class="line"><a id="l03979" name="l03979"></a><span class="lineno"> 3979</span>  <span class="keywordflow">if</span> (use_new_default) {</div>
<div class="line"><a id="l03980" name="l03980"></a><span class="lineno"> 3980</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a8f987b4313f95fd7fa01e4fee905c7bc">WasmInitExpr::StructNewDefault</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l03981" name="l03981"></a><span class="lineno"> 3981</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03982" name="l03982"></a><span class="lineno"> 3982</span>    ZoneVector&lt;WasmInitExpr&gt;* elements =</div>
<div class="line"><a id="l03983" name="l03983"></a><span class="lineno"> 3983</span>        zone-&gt;New&lt;ZoneVector&lt;WasmInitExpr&gt;&gt;(zone);</div>
<div class="line"><a id="l03984" name="l03984"></a><span class="lineno"> 3984</span>    <span class="keywordtype">int</span> field_count = struct_type-&gt;field_count();</div>
<div class="line"><a id="l03985" name="l03985"></a><span class="lineno"> 3985</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> field_index = 0; field_index &lt; field_count; field_index++) {</div>
<div class="line"><a id="l03986" name="l03986"></a><span class="lineno"> 3986</span>      elements-&gt;push_back(GenerateInitExpr(</div>
<div class="line"><a id="l03987" name="l03987"></a><span class="lineno"> 3987</span>          zone, range, builder, struct_type-&gt;field(field_index), structs,</div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"> 3988</span>          arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1));</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span>    }</div>
<div class="line"><a id="l03990" name="l03990"></a><span class="lineno"> 3990</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ae5ec317a68c4e0d1f89ee37d5acc93e0">WasmInitExpr::StructNew</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, elements);</div>
<div class="line"><a id="l03991" name="l03991"></a><span class="lineno"> 3991</span>  }</div>
<div class="line"><a id="l03992" name="l03992"></a><span class="lineno"> 3992</span>}</div>
<div class="line"><a id="l03993" name="l03993"></a><span class="lineno"> 3993</span> </div>
<div class="line"><a id="l03994" name="l03994"></a><span class="lineno"> 3994</span>WasmInitExpr GenerateArrayInitExpr(<a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* zone, DataRange&amp; range,</div>
<div class="line"><a id="l03995" name="l03995"></a><span class="lineno"> 3995</span>                                   WasmModuleBuilder* builder,</div>
<div class="line"><a id="l03996" name="l03996"></a><span class="lineno"> 3996</span>                                   ModuleTypeIndex <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>,</div>
<div class="line"><a id="l03997" name="l03997"></a><span class="lineno"> 3997</span>                                   <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; structs,</div>
<div class="line"><a id="l03998" name="l03998"></a><span class="lineno"> 3998</span>                                   <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; arrays,</div>
<div class="line"><a id="l03999" name="l03999"></a><span class="lineno"> 3999</span>                                   uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>) {</div>
<div class="line"><a id="l04000" name="l04000"></a><span class="lineno"> 4000</span>  <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxArrayLength = 20;</div>
<div class="line"><a id="l04001" name="l04001"></a><span class="lineno"> 4001</span>  uint8_t choice = range.get&lt;uint8_t&gt;() % 3;</div>
<div class="line"><a id="l04002" name="l04002"></a><span class="lineno"> 4002</span>  ValueType element_type = builder-&gt;GetArrayType(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)-&gt;element_type();</div>
<div class="line"><a id="l04003" name="l04003"></a><span class="lineno"> 4003</span>  <span class="keywordflow">if</span> (choice == 0) {</div>
<div class="line"><a id="l04004" name="l04004"></a><span class="lineno"> 4004</span>    <span class="keywordtype">size_t</span> element_count = range.get&lt;uint8_t&gt;() % kMaxArrayLength;</div>
<div class="line"><a id="l04005" name="l04005"></a><span class="lineno"> 4005</span>    <span class="keywordflow">if</span> (!element_type.is_defaultable()) {</div>
<div class="line"><a id="l04006" name="l04006"></a><span class="lineno"> 4006</span>      <span class="comment">// If the element type is not defaultable, limit the size to 0 or 1</span></div>
<div class="line"><a id="l04007" name="l04007"></a><span class="lineno"> 4007</span>      <span class="comment">// to prevent having to create too many such elements on the value</span></div>
<div class="line"><a id="l04008" name="l04008"></a><span class="lineno"> 4008</span>      <span class="comment">// stack. (With multiple non-nullable references, this can explode</span></div>
<div class="line"><a id="l04009" name="l04009"></a><span class="lineno"> 4009</span>      <span class="comment">// in size very quickly.)</span></div>
<div class="line"><a id="l04010" name="l04010"></a><span class="lineno"> 4010</span>      element_count %= 2;</div>
<div class="line"><a id="l04011" name="l04011"></a><span class="lineno"> 4011</span>    }</div>
<div class="line"><a id="l04012" name="l04012"></a><span class="lineno"> 4012</span>    ZoneVector&lt;WasmInitExpr&gt;* elements =</div>
<div class="line"><a id="l04013" name="l04013"></a><span class="lineno"> 4013</span>        zone-&gt;New&lt;ZoneVector&lt;WasmInitExpr&gt;&gt;(zone);</div>
<div class="line"><a id="l04014" name="l04014"></a><span class="lineno"> 4014</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; element_count; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l04015" name="l04015"></a><span class="lineno"> 4015</span>      elements-&gt;push_back(GenerateInitExpr(zone, range, builder, element_type,</div>
<div class="line"><a id="l04016" name="l04016"></a><span class="lineno"> 4016</span>                                           structs, arrays,</div>
<div class="line"><a id="l04017" name="l04017"></a><span class="lineno"> 4017</span>                                           <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1));</div>
<div class="line"><a id="l04018" name="l04018"></a><span class="lineno"> 4018</span>    }</div>
<div class="line"><a id="l04019" name="l04019"></a><span class="lineno"> 4019</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ac151143d7da3e295c0a6b8d100adb1f3">WasmInitExpr::ArrayNewFixed</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, elements);</div>
<div class="line"><a id="l04020" name="l04020"></a><span class="lineno"> 4020</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (choice == 1 || !element_type.is_defaultable()) {</div>
<div class="line"><a id="l04021" name="l04021"></a><span class="lineno"> 4021</span>    <span class="comment">// TODO(14034): Add other int expressions to length (same below).</span></div>
<div class="line"><a id="l04022" name="l04022"></a><span class="lineno"> 4022</span>    WasmInitExpr length = WasmInitExpr(range.get&lt;uint8_t&gt;() % kMaxArrayLength);</div>
<div class="line"><a id="l04023" name="l04023"></a><span class="lineno"> 4023</span>    WasmInitExpr init = GenerateInitExpr(zone, range, builder, element_type,</div>
<div class="line"><a id="l04024" name="l04024"></a><span class="lineno"> 4024</span>                                         structs, arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1);</div>
<div class="line"><a id="l04025" name="l04025"></a><span class="lineno"> 4025</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ad79cdde572cc43f611168d8f7a65f236">WasmInitExpr::ArrayNew</a>(zone, <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, init, length);</div>
<div class="line"><a id="l04026" name="l04026"></a><span class="lineno"> 4026</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04027" name="l04027"></a><span class="lineno"> 4027</span>    WasmInitExpr length = WasmInitExpr(range.get&lt;uint8_t&gt;() % kMaxArrayLength);</div>
<div class="line"><a id="l04028" name="l04028"></a><span class="lineno"> 4028</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#aa938ae840cb1687762a391bd85b64d0c">WasmInitExpr::ArrayNewDefault</a>(zone, <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, length);</div>
<div class="line"><a id="l04029" name="l04029"></a><span class="lineno"> 4029</span>  }</div>
<div class="line"><a id="l04030" name="l04030"></a><span class="lineno"> 4030</span>}</div>
<div class="line"><a id="l04031" name="l04031"></a><span class="lineno"> 4031</span> </div>
<div class="line"><a id="l04032" name="l04032"></a><span class="lineno"> 4032</span>WasmInitExpr GenerateInitExpr(<a class="code hl_variable" href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a>* zone, DataRange&amp; range,</div>
<div class="line"><a id="l04033" name="l04033"></a><span class="lineno"> 4033</span>                              WasmModuleBuilder* builder, ValueType type,</div>
<div class="line"><a id="l04034" name="l04034"></a><span class="lineno"> 4034</span>                              <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; structs,</div>
<div class="line"><a id="l04035" name="l04035"></a><span class="lineno"> 4035</span>                              <span class="keyword">const</span> std::vector&lt;ModuleTypeIndex&gt;&amp; arrays,</div>
<div class="line"><a id="l04036" name="l04036"></a><span class="lineno"> 4036</span>                              uint32_t <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>) {</div>
<div class="line"><a id="l04037" name="l04037"></a><span class="lineno"> 4037</span>  <span class="keywordflow">switch</span> (type.kind()) {</div>
<div class="line"><a id="l04038" name="l04038"></a><span class="lineno"> 4038</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6c86e764d5c427a8339c3920a3c08603">kI8</a>:</div>
<div class="line"><a id="l04039" name="l04039"></a><span class="lineno"> 4039</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a1201e21104cbb7ea3a7c362efcb325a3">kI16</a>:</div>
<div class="line"><a id="l04040" name="l04040"></a><span class="lineno"> 4040</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293">kI32</a>: {</div>
<div class="line"><a id="l04041" name="l04041"></a><span class="lineno"> 4041</span>      <span class="keywordflow">if</span> (range.size() == 0 || <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> &gt;= kMaxRecursionDepth) {</div>
<div class="line"><a id="l04042" name="l04042"></a><span class="lineno"> 4042</span>        <span class="keywordflow">return</span> WasmInitExpr(int32_t{0});</div>
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"> 4043</span>      }</div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span>      <span class="comment">// 50% to generate a constant, 50% to generate a binary operator.</span></div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>      uint8_t choice = range.get&lt;uint8_t&gt;() % 6;</div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span>      <span class="keywordflow">switch</span> (choice) {</div>
<div class="line"><a id="l04047" name="l04047"></a><span class="lineno"> 4047</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span>          <span class="keywordflow">if</span> (choice % 2 == 0 &amp;&amp; builder-&gt;NumGlobals()) {</div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>            <span class="comment">// Search for a matching global to emit a global.get.</span></div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>            <span class="keywordtype">int</span> num_globals = builder-&gt;NumGlobals();</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span>            <span class="keywordtype">int</span> start_index = range.get&lt;uint8_t&gt;() % num_globals;</div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_globals; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04055" name="l04055"></a><span class="lineno"> 4055</span>              <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = (start_index + <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) % num_globals;</div>
<div class="line"><a id="l04056" name="l04056"></a><span class="lineno"> 4056</span>              <span class="keywordflow">if</span> (builder-&gt;GetGlobalType(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) == type &amp;&amp;</div>
<div class="line"><a id="l04057" name="l04057"></a><span class="lineno"> 4057</span>                  !builder-&gt;IsMutableGlobal(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)) {</div>
<div class="line"><a id="l04058" name="l04058"></a><span class="lineno"> 4058</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a55febed3c02fcbaa3c2cbf3569b0ca08">WasmInitExpr::GlobalGet</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l04059" name="l04059"></a><span class="lineno"> 4059</span>              }</div>
<div class="line"><a id="l04060" name="l04060"></a><span class="lineno"> 4060</span>            }</div>
<div class="line"><a id="l04061" name="l04061"></a><span class="lineno"> 4061</span>            <span class="comment">// Fall back to constant if no matching global was found.</span></div>
<div class="line"><a id="l04062" name="l04062"></a><span class="lineno"> 4062</span>          }</div>
<div class="line"><a id="l04063" name="l04063"></a><span class="lineno"> 4063</span>          <span class="keywordflow">return</span> WasmInitExpr(range.getPseudoRandom&lt;int32_t&gt;());</div>
<div class="line"><a id="l04064" name="l04064"></a><span class="lineno"> 4064</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04065" name="l04065"></a><span class="lineno"> 4065</span>          <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ff">WasmInitExpr::Operator</a> op = choice == 3   ? <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffa81c3c7cde1a07237722733f27da07e0f">WasmInitExpr::kI32Add</a></div>
<div class="line"><a id="l04066" name="l04066"></a><span class="lineno"> 4066</span>                                      : choice == 4 ? <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffa68da8c84daf848c2b299bbe535a3aa9e">WasmInitExpr::kI32Sub</a></div>
<div class="line"><a id="l04067" name="l04067"></a><span class="lineno"> 4067</span>                                                    : <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffac58bae28d6cb7050783b59f7e082ff3e">WasmInitExpr::kI32Mul</a>;</div>
<div class="line"><a id="l04068" name="l04068"></a><span class="lineno"> 4068</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#adae152807b2aaf24b953c477c5b2cf2f">WasmInitExpr::Binop</a>(</div>
<div class="line"><a id="l04069" name="l04069"></a><span class="lineno"> 4069</span>              zone, op,</div>
<div class="line"><a id="l04070" name="l04070"></a><span class="lineno"> 4070</span>              GenerateInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, structs, arrays,</div>
<div class="line"><a id="l04071" name="l04071"></a><span class="lineno"> 4071</span>                               <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1),</div>
<div class="line"><a id="l04072" name="l04072"></a><span class="lineno"> 4072</span>              GenerateInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, structs, arrays,</div>
<div class="line"><a id="l04073" name="l04073"></a><span class="lineno"> 4073</span>                               <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1));</div>
<div class="line"><a id="l04074" name="l04074"></a><span class="lineno"> 4074</span>      }</div>
<div class="line"><a id="l04075" name="l04075"></a><span class="lineno"> 4075</span>    }</div>
<div class="line"><a id="l04076" name="l04076"></a><span class="lineno"> 4076</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0">kI64</a>: {</div>
<div class="line"><a id="l04077" name="l04077"></a><span class="lineno"> 4077</span>      <span class="keywordflow">if</span> (range.size() == 0 || <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> &gt;= kMaxRecursionDepth) {</div>
<div class="line"><a id="l04078" name="l04078"></a><span class="lineno"> 4078</span>        <span class="keywordflow">return</span> WasmInitExpr(int64_t{0});</div>
<div class="line"><a id="l04079" name="l04079"></a><span class="lineno"> 4079</span>      }</div>
<div class="line"><a id="l04080" name="l04080"></a><span class="lineno"> 4080</span>      <span class="comment">// 50% to generate a constant, 50% to generate a binary operator.</span></div>
<div class="line"><a id="l04081" name="l04081"></a><span class="lineno"> 4081</span>      uint8_t choice = range.get&lt;uint8_t&gt;() % 6;</div>
<div class="line"><a id="l04082" name="l04082"></a><span class="lineno"> 4082</span>      <span class="keywordflow">switch</span> (choice) {</div>
<div class="line"><a id="l04083" name="l04083"></a><span class="lineno"> 4083</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l04084" name="l04084"></a><span class="lineno"> 4084</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l04085" name="l04085"></a><span class="lineno"> 4085</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l04086" name="l04086"></a><span class="lineno"> 4086</span>          <span class="keywordflow">return</span> WasmInitExpr(range.get&lt;int64_t&gt;());</div>
<div class="line"><a id="l04087" name="l04087"></a><span class="lineno"> 4087</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04088" name="l04088"></a><span class="lineno"> 4088</span>          <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ff">WasmInitExpr::Operator</a> op = choice == 3   ? <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffa6265b55dcf7cc59380c802cfdad058e5">WasmInitExpr::kI64Add</a></div>
<div class="line"><a id="l04089" name="l04089"></a><span class="lineno"> 4089</span>                                      : choice == 4 ? <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffaafd80be1e45817a29e2976a95dcb5df9">WasmInitExpr::kI64Sub</a></div>
<div class="line"><a id="l04090" name="l04090"></a><span class="lineno"> 4090</span>                                                    : <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffafb4e80bcaf8b7877a7d7779b42069c2c">WasmInitExpr::kI64Mul</a>;</div>
<div class="line"><a id="l04091" name="l04091"></a><span class="lineno"> 4091</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#adae152807b2aaf24b953c477c5b2cf2f">WasmInitExpr::Binop</a>(</div>
<div class="line"><a id="l04092" name="l04092"></a><span class="lineno"> 4092</span>              zone, op,</div>
<div class="line"><a id="l04093" name="l04093"></a><span class="lineno"> 4093</span>              GenerateInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#ac0993b253da7c6a4f84e778a5a7b99a3">kWasmI64</a>, structs, arrays,</div>
<div class="line"><a id="l04094" name="l04094"></a><span class="lineno"> 4094</span>                               <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1),</div>
<div class="line"><a id="l04095" name="l04095"></a><span class="lineno"> 4095</span>              GenerateInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#ac0993b253da7c6a4f84e778a5a7b99a3">kWasmI64</a>, structs, arrays,</div>
<div class="line"><a id="l04096" name="l04096"></a><span class="lineno"> 4096</span>                               <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1));</div>
<div class="line"><a id="l04097" name="l04097"></a><span class="lineno"> 4097</span>      }</div>
<div class="line"><a id="l04098" name="l04098"></a><span class="lineno"> 4098</span>    }</div>
<div class="line"><a id="l04099" name="l04099"></a><span class="lineno"> 4099</span>    <span class="keywordflow">case</span> kF16:</div>
<div class="line"><a id="l04100" name="l04100"></a><span class="lineno"> 4100</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2">kF32</a>:</div>
<div class="line"><a id="l04101" name="l04101"></a><span class="lineno"> 4101</span>      <span class="keywordflow">return</span> WasmInitExpr(0.0f);</div>
<div class="line"><a id="l04102" name="l04102"></a><span class="lineno"> 4102</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319">kF64</a>:</div>
<div class="line"><a id="l04103" name="l04103"></a><span class="lineno"> 4103</span>      <span class="keywordflow">return</span> WasmInitExpr(0.0);</div>
<div class="line"><a id="l04104" name="l04104"></a><span class="lineno"> 4104</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210af99a6cf928bc2257d654d6301969318c">kS128</a>: {</div>
<div class="line"><a id="l04105" name="l04105"></a><span class="lineno"> 4105</span>      uint8_t s128_const[<a class="code hl_variable" href="namespacev8_1_1internal.html#a1ac5aaec8d986abe45d958e665beb21a">kSimd128Size</a>] = {0};</div>
<div class="line"><a id="l04106" name="l04106"></a><span class="lineno"> 4106</span>      <span class="keywordflow">return</span> WasmInitExpr(s128_const);</div>
<div class="line"><a id="l04107" name="l04107"></a><span class="lineno"> 4107</span>    }</div>
<div class="line"><a id="l04108" name="l04108"></a><span class="lineno"> 4108</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210aafd4fc7d3d7d9d9bc84ef9f0fd3d09c3">kRefNull</a>: {</div>
<div class="line"><a id="l04109" name="l04109"></a><span class="lineno"> 4109</span>      <span class="keywordtype">bool</span> null_only = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>      <span class="keywordflow">switch</span> (type.heap_representation()) {</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787addd08e9014cea077cc28ab6cbcbff986">HeapType::kNone</a>:</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787ada6888bc410e07dbaf1f0b45eeb22d04">HeapType::kNoFunc</a>:</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a987b6ca446d2306e8506f82869ddac97">HeapType::kNoExtern</a>:</div>
<div class="line"><a id="l04114" name="l04114"></a><span class="lineno"> 4114</span>          null_only = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04115" name="l04115"></a><span class="lineno"> 4115</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04116" name="l04116"></a><span class="lineno"> 4116</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04117" name="l04117"></a><span class="lineno"> 4117</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04118" name="l04118"></a><span class="lineno"> 4118</span>      }</div>
<div class="line"><a id="l04119" name="l04119"></a><span class="lineno"> 4119</span>      <span class="keywordflow">if</span> (range.size() == 0 || <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> &gt;= kMaxRecursionDepth ||</div>
<div class="line"><a id="l04120" name="l04120"></a><span class="lineno"> 4120</span>          null_only || (range.get&lt;uint8_t&gt;() % 4 == 0)) {</div>
<div class="line"><a id="l04121" name="l04121"></a><span class="lineno"> 4121</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#af1feef98b93722c701ac36d4367f9088">WasmInitExpr::RefNullConst</a>(type.heap_type().representation());</div>
<div class="line"><a id="l04122" name="l04122"></a><span class="lineno"> 4122</span>      }</div>
<div class="line"><a id="l04123" name="l04123"></a><span class="lineno"> 4123</span>      [[fallthrough]];</div>
<div class="line"><a id="l04124" name="l04124"></a><span class="lineno"> 4124</span>    }</div>
<div class="line"><a id="l04125" name="l04125"></a><span class="lineno"> 4125</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210ab5b96df89f6d4b5436a728a5a4014d83">kRef</a>: {</div>
<div class="line"><a id="l04126" name="l04126"></a><span class="lineno"> 4126</span>      <span class="keywordflow">switch</span> (type.heap_representation()) {</div>
<div class="line"><a id="l04127" name="l04127"></a><span class="lineno"> 4127</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a5621b910055ccbf8fe66df77cf288fc6">HeapType::kStruct</a>: {</div>
<div class="line"><a id="l04128" name="l04128"></a><span class="lineno"> 4128</span>          ModuleTypeIndex <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> =</div>
<div class="line"><a id="l04129" name="l04129"></a><span class="lineno"> 4129</span>              structs[range.get&lt;uint8_t&gt;() % structs.size()];</div>
<div class="line"><a id="l04130" name="l04130"></a><span class="lineno"> 4130</span>          <span class="keywordflow">return</span> GenerateStructNewInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, structs,</div>
<div class="line"><a id="l04131" name="l04131"></a><span class="lineno"> 4131</span>                                           arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>);</div>
<div class="line"><a id="l04132" name="l04132"></a><span class="lineno"> 4132</span>        }</div>
<div class="line"><a id="l04133" name="l04133"></a><span class="lineno"> 4133</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a12fc36cebc5486d34bcec8ba9adbc1c6">HeapType::kAny</a>: {</div>
<div class="line"><a id="l04134" name="l04134"></a><span class="lineno"> 4134</span>          <span class="comment">// Do not use 0 as the determining value here, otherwise an exhausted</span></div>
<div class="line"><a id="l04135" name="l04135"></a><span class="lineno"> 4135</span>          <span class="comment">// {range} will generate an infinite recursion with the {kExtern}</span></div>
<div class="line"><a id="l04136" name="l04136"></a><span class="lineno"> 4136</span>          <span class="comment">// case.</span></div>
<div class="line"><a id="l04137" name="l04137"></a><span class="lineno"> 4137</span>          <span class="keywordflow">if</span> (<a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> &lt; kMaxRecursionDepth &amp;&amp; range.size() &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l04138" name="l04138"></a><span class="lineno"> 4138</span>              range.get&lt;uint8_t&gt;() % 4 == 3) {</div>
<div class="line"><a id="l04139" name="l04139"></a><span class="lineno"> 4139</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a4f0ce74bdf879a60982f0e17b292379e">WasmInitExpr::AnyConvertExtern</a>(</div>
<div class="line"><a id="l04140" name="l04140"></a><span class="lineno"> 4140</span>                zone,</div>
<div class="line"><a id="l04141" name="l04141"></a><span class="lineno"> 4141</span>                GenerateInitExpr(zone, range, builder,</div>
<div class="line"><a id="l04142" name="l04142"></a><span class="lineno"> 4142</span>                                 <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1ValueType.html#a9ea361d96891d9c418a34f7bfabfb2ef">ValueType::RefMaybeNull</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a01edec79a04fce2edabc7f5f9b6f2305">HeapType::kExtern</a>,</div>
<div class="line"><a id="l04143" name="l04143"></a><span class="lineno"> 4143</span>                                                         type.nullability()),</div>
<div class="line"><a id="l04144" name="l04144"></a><span class="lineno"> 4144</span>                                 structs, arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1));</div>
<div class="line"><a id="l04145" name="l04145"></a><span class="lineno"> 4145</span>          }</div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>          [[fallthrough]];</div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span>        }</div>
<div class="line"><a id="l04148" name="l04148"></a><span class="lineno"> 4148</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a747949a8c02d366db421957a9a737347">HeapType::kEq</a>: {</div>
<div class="line"><a id="l04149" name="l04149"></a><span class="lineno"> 4149</span>          uint8_t choice = range.get&lt;uint8_t&gt;() % 3;</div>
<div class="line"><a id="l04150" name="l04150"></a><span class="lineno"> 4150</span>          <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787">HeapType::Representation</a> subtype = choice == 0   ? <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a52cfdbb770d3ad5e7d8c11792560de20">HeapType::kI31</a></div>
<div class="line"><a id="l04151" name="l04151"></a><span class="lineno"> 4151</span>                                             : choice == 1 ? <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a57169601682149a6b8bebd68e0e0f9a7">HeapType::kArray</a></div>
<div class="line"><a id="l04152" name="l04152"></a><span class="lineno"> 4152</span>                                                           : <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a5621b910055ccbf8fe66df77cf288fc6">HeapType::kStruct</a>;</div>
<div class="line"><a id="l04153" name="l04153"></a><span class="lineno"> 4153</span> </div>
<div class="line"><a id="l04154" name="l04154"></a><span class="lineno"> 4154</span>          <span class="keywordflow">return</span> GenerateInitExpr(</div>
<div class="line"><a id="l04155" name="l04155"></a><span class="lineno"> 4155</span>              zone, range, builder,</div>
<div class="line"><a id="l04156" name="l04156"></a><span class="lineno"> 4156</span>              <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1ValueType.html#a9ea361d96891d9c418a34f7bfabfb2ef">ValueType::RefMaybeNull</a>(subtype, type.nullability()), structs,</div>
<div class="line"><a id="l04157" name="l04157"></a><span class="lineno"> 4157</span>              arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>);</div>
<div class="line"><a id="l04158" name="l04158"></a><span class="lineno"> 4158</span>        }</div>
<div class="line"><a id="l04159" name="l04159"></a><span class="lineno"> 4159</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a8668d98b226023d9ccef4c77f2a722e3">HeapType::kFunc</a>: {</div>
<div class="line"><a id="l04160" name="l04160"></a><span class="lineno"> 4160</span>          uint32_t <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> =</div>
<div class="line"><a id="l04161" name="l04161"></a><span class="lineno"> 4161</span>              range.get&lt;uint32_t&gt;() % (builder-&gt;NumDeclaredFunctions() +</div>
<div class="line"><a id="l04162" name="l04162"></a><span class="lineno"> 4162</span>                                       builder-&gt;NumImportedFunctions());</div>
<div class="line"><a id="l04163" name="l04163"></a><span class="lineno"> 4163</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#af1a88dbeb0a15e1c875a637eed156247">WasmInitExpr::RefFuncConst</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l04164" name="l04164"></a><span class="lineno"> 4164</span>        }</div>
<div class="line"><a id="l04165" name="l04165"></a><span class="lineno"> 4165</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a01edec79a04fce2edabc7f5f9b6f2305">HeapType::kExtern</a>:</div>
<div class="line"><a id="l04166" name="l04166"></a><span class="lineno"> 4166</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a67f960c7706731df16e00dda9c237801">WasmInitExpr::ExternConvertAny</a>(</div>
<div class="line"><a id="l04167" name="l04167"></a><span class="lineno"> 4167</span>              zone, GenerateInitExpr(zone, range, builder,</div>
<div class="line"><a id="l04168" name="l04168"></a><span class="lineno"> 4168</span>                                     <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1ValueType.html#a9ea361d96891d9c418a34f7bfabfb2ef">ValueType::RefMaybeNull</a>(</div>
<div class="line"><a id="l04169" name="l04169"></a><span class="lineno"> 4169</span>                                         <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a12fc36cebc5486d34bcec8ba9adbc1c6">HeapType::kAny</a>, type.nullability()),</div>
<div class="line"><a id="l04170" name="l04170"></a><span class="lineno"> 4170</span>                                     structs, arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1));</div>
<div class="line"><a id="l04171" name="l04171"></a><span class="lineno"> 4171</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a52cfdbb770d3ad5e7d8c11792560de20">HeapType::kI31</a>:</div>
<div class="line"><a id="l04172" name="l04172"></a><span class="lineno"> 4172</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a18fa66dd3e7ffd8f003d787b9a77b05b">WasmInitExpr::RefI31</a>(</div>
<div class="line"><a id="l04173" name="l04173"></a><span class="lineno"> 4173</span>              zone, GenerateInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, structs,</div>
<div class="line"><a id="l04174" name="l04174"></a><span class="lineno"> 4174</span>                                     arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a> + 1));</div>
<div class="line"><a id="l04175" name="l04175"></a><span class="lineno"> 4175</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a57169601682149a6b8bebd68e0e0f9a7">HeapType::kArray</a>: {</div>
<div class="line"><a id="l04176" name="l04176"></a><span class="lineno"> 4176</span>          ModuleTypeIndex <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = arrays[range.get&lt;uint8_t&gt;() % arrays.size()];</div>
<div class="line"><a id="l04177" name="l04177"></a><span class="lineno"> 4177</span>          <span class="keywordflow">return</span> GenerateArrayInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, structs,</div>
<div class="line"><a id="l04178" name="l04178"></a><span class="lineno"> 4178</span>                                       arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>);</div>
<div class="line"><a id="l04179" name="l04179"></a><span class="lineno"> 4179</span>        }</div>
<div class="line"><a id="l04180" name="l04180"></a><span class="lineno"> 4180</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787addd08e9014cea077cc28ab6cbcbff986">HeapType::kNone</a>:</div>
<div class="line"><a id="l04181" name="l04181"></a><span class="lineno"> 4181</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787ada6888bc410e07dbaf1f0b45eeb22d04">HeapType::kNoFunc</a>:</div>
<div class="line"><a id="l04182" name="l04182"></a><span class="lineno"> 4182</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a987b6ca446d2306e8506f82869ddac97">HeapType::kNoExtern</a>:</div>
<div class="line"><a id="l04183" name="l04183"></a><span class="lineno"> 4183</span>          <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l04184" name="l04184"></a><span class="lineno"> 4184</span>        <span class="keywordflow">default</span>: {</div>
<div class="line"><a id="l04185" name="l04185"></a><span class="lineno"> 4185</span>          ModuleTypeIndex <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = type.ref_index();</div>
<div class="line"><a id="l04186" name="l04186"></a><span class="lineno"> 4186</span>          <span class="keywordflow">if</span> (builder-&gt;IsStructType(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)) {</div>
<div class="line"><a id="l04187" name="l04187"></a><span class="lineno"> 4187</span>            <span class="keywordflow">return</span> GenerateStructNewInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>,</div>
<div class="line"><a id="l04188" name="l04188"></a><span class="lineno"> 4188</span>                                             structs, arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>);</div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (builder-&gt;IsArrayType(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)) {</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span>            <span class="keywordflow">return</span> GenerateArrayInitExpr(zone, range, builder, <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, structs,</div>
<div class="line"><a id="l04191" name="l04191"></a><span class="lineno"> 4191</span>                                         arrays, <a class="code hl_variable" href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a>);</div>
<div class="line"><a id="l04192" name="l04192"></a><span class="lineno"> 4192</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04193" name="l04193"></a><span class="lineno"> 4193</span>            <a class="code hl_define" href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(builder-&gt;IsSignature(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>));</div>
<div class="line"><a id="l04194" name="l04194"></a><span class="lineno"> 4194</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; builder-&gt;NumDeclaredFunctions(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04195" name="l04195"></a><span class="lineno"> 4195</span>              <span class="keywordflow">if</span> (builder-&gt;GetFunction(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)-&gt;sig_index() == <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) {</div>
<div class="line"><a id="l04196" name="l04196"></a><span class="lineno"> 4196</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#af1a88dbeb0a15e1c875a637eed156247">WasmInitExpr::RefFuncConst</a>(</div>
<div class="line"><a id="l04197" name="l04197"></a><span class="lineno"> 4197</span>                    builder-&gt;NumImportedFunctions() + <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l04198" name="l04198"></a><span class="lineno"> 4198</span>              }</div>
<div class="line"><a id="l04199" name="l04199"></a><span class="lineno"> 4199</span>            }</div>
<div class="line"><a id="l04200" name="l04200"></a><span class="lineno"> 4200</span>            <span class="comment">// There has to be at least one function per signature, otherwise</span></div>
<div class="line"><a id="l04201" name="l04201"></a><span class="lineno"> 4201</span>            <span class="comment">// the init expression is unable to generate a non-nullable</span></div>
<div class="line"><a id="l04202" name="l04202"></a><span class="lineno"> 4202</span>            <span class="comment">// reference with the correct type.</span></div>
<div class="line"><a id="l04203" name="l04203"></a><span class="lineno"> 4203</span>            <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l04204" name="l04204"></a><span class="lineno"> 4204</span>          }</div>
<div class="line"><a id="l04205" name="l04205"></a><span class="lineno"> 4205</span>          <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l04206" name="l04206"></a><span class="lineno"> 4206</span>        }</div>
<div class="line"><a id="l04207" name="l04207"></a><span class="lineno"> 4207</span>      }</div>
<div class="line"><a id="l04208" name="l04208"></a><span class="lineno"> 4208</span>    }</div>
<div class="line"><a id="l04209" name="l04209"></a><span class="lineno"> 4209</span>    <span class="keywordflow">case</span> kVoid:</div>
<div class="line"><a id="l04210" name="l04210"></a><span class="lineno"> 4210</span>    <span class="keywordflow">case</span> kRtt:</div>
<div class="line"><a id="l04211" name="l04211"></a><span class="lineno"> 4211</span>    <span class="keywordflow">case</span> kTop:</div>
<div class="line"><a id="l04212" name="l04212"></a><span class="lineno"> 4212</span>    <span class="keywordflow">case</span> kBottom:</div>
<div class="line"><a id="l04213" name="l04213"></a><span class="lineno"> 4213</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l04214" name="l04214"></a><span class="lineno"> 4214</span>  }</div>
<div class="line"><a id="l04215" name="l04215"></a><span class="lineno"> 4215</span>}</div>
<div class="line"><a id="l04216" name="l04216"></a><span class="lineno"> 4216</span> </div>
<div class="line"><a id="l04217" name="l04217"></a><span class="lineno"> 4217</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l04218" name="l04218"></a><span class="lineno"> 4218</span> </div>
<div class="foldopen" id="foldopen04219" data-start="{" data-end="}">
<div class="line"><a id="l04219" name="l04219"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a1183d8f95dc068f6dea002cc003f2b3f"> 4219</a></span><a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a1183d8f95dc068f6dea002cc003f2b3f">GenerateRandomWasmModule</a>(</div>
<div class="line"><a id="l04220" name="l04220"></a><span class="lineno"> 4220</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Zone.html">Zone</a>* zone, WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>,</div>
<div class="line"><a id="l04221" name="l04221"></a><span class="lineno"> 4221</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> data) {</div>
<div class="line"><a id="l04222" name="l04222"></a><span class="lineno"> 4222</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html">WasmModuleBuilder</a> builder(zone);</div>
<div class="line"><a id="l04223" name="l04223"></a><span class="lineno"> 4223</span> </div>
<div class="line"><a id="l04224" name="l04224"></a><span class="lineno"> 4224</span>  <span class="comment">// Split input data in two parts:</span></div>
<div class="line"><a id="l04225" name="l04225"></a><span class="lineno"> 4225</span>  <span class="comment">// - One for the &quot;module&quot; (types, globals, ..)</span></div>
<div class="line"><a id="l04226" name="l04226"></a><span class="lineno"> 4226</span>  <span class="comment">// - One for all the function bodies</span></div>
<div class="line"><a id="l04227" name="l04227"></a><span class="lineno"> 4227</span>  <span class="comment">// This prevents using a too large portion on the module resulting in</span></div>
<div class="line"><a id="l04228" name="l04228"></a><span class="lineno"> 4228</span>  <span class="comment">// uninteresting function bodies.</span></div>
<div class="line"><a id="l04229" name="l04229"></a><span class="lineno"> 4229</span>  DataRange module_range(data);</div>
<div class="line"><a id="l04230" name="l04230"></a><span class="lineno"> 4230</span>  DataRange functions_range = module_range.split();</div>
<div class="line"><a id="l04231" name="l04231"></a><span class="lineno"> 4231</span>  std::vector&lt;ModuleTypeIndex&gt; function_signatures;</div>
<div class="line"><a id="l04232" name="l04232"></a><span class="lineno"> 4232</span> </div>
<div class="line"><a id="l04233" name="l04233"></a><span class="lineno"> 4233</span>  <span class="keyword">static_assert</span>(kMaxFunctions &gt;= 1, <span class="stringliteral">&quot;need min. 1 function&quot;</span>);</div>
<div class="line"><a id="l04234" name="l04234"></a><span class="lineno"> 4234</span>  uint8_t num_functions = 1 + (module_range.get&lt;uint8_t&gt;() % kMaxFunctions);</div>
<div class="line"><a id="l04235" name="l04235"></a><span class="lineno"> 4235</span> </div>
<div class="line"><a id="l04236" name="l04236"></a><span class="lineno"> 4236</span>  <span class="comment">// In case of WasmGC expressions:</span></div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>  <span class="comment">// Add struct and array types first so that we get a chance to generate</span></div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span>  <span class="comment">// these types in function signatures.</span></div>
<div class="line"><a id="l04239" name="l04239"></a><span class="lineno"> 4239</span>  <span class="comment">// Currently, `BodyGen` assumes this order for struct/array/signature</span></div>
<div class="line"><a id="l04240" name="l04240"></a><span class="lineno"> 4240</span>  <span class="comment">// definitions.</span></div>
<div class="line"><a id="l04241" name="l04241"></a><span class="lineno"> 4241</span>  <span class="comment">// Otherwise, for non-WasmGC we can&#39;t use structs/arrays.</span></div>
<div class="line"><a id="l04242" name="l04242"></a><span class="lineno"> 4242</span>  uint8_t num_structs = 0;</div>
<div class="line"><a id="l04243" name="l04243"></a><span class="lineno"> 4243</span>  uint8_t num_arrays = 0;</div>
<div class="line"><a id="l04244" name="l04244"></a><span class="lineno"> 4244</span>  std::vector&lt;ModuleTypeIndex&gt; array_types;</div>
<div class="line"><a id="l04245" name="l04245"></a><span class="lineno"> 4245</span>  std::vector&lt;ModuleTypeIndex&gt; struct_types;</div>
<div class="line"><a id="l04246" name="l04246"></a><span class="lineno"> 4246</span> </div>
<div class="line"><a id="l04247" name="l04247"></a><span class="lineno"> 4247</span>  <span class="comment">// In case of WasmGC expressions:</span></div>
<div class="line"><a id="l04248" name="l04248"></a><span class="lineno"> 4248</span>  <span class="comment">// We always add two default array types with mutable i8 and i16 elements,</span></div>
<div class="line"><a id="l04249" name="l04249"></a><span class="lineno"> 4249</span>  <span class="comment">// respectively.</span></div>
<div class="line"><a id="l04250" name="l04250"></a><span class="lineno"> 4250</span>  <span class="keyword">constexpr</span> uint8_t kNumDefaultArrayTypesForWasmGC = 2;</div>
<div class="line"><a id="l04251" name="l04251"></a><span class="lineno"> 4251</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>.generate_wasm_gc()) {</div>
<div class="line"><a id="l04252" name="l04252"></a><span class="lineno"> 4252</span>    <span class="comment">// We need at least one struct and one array in order to support</span></div>
<div class="line"><a id="l04253" name="l04253"></a><span class="lineno"> 4253</span>    <span class="comment">// WasmInitExpr for abstract types.</span></div>
<div class="line"><a id="l04254" name="l04254"></a><span class="lineno"> 4254</span>    num_structs = 1 + module_range.get&lt;uint8_t&gt;() % kMaxStructs;</div>
<div class="line"><a id="l04255" name="l04255"></a><span class="lineno"> 4255</span>    num_arrays = kNumDefaultArrayTypesForWasmGC +</div>
<div class="line"><a id="l04256" name="l04256"></a><span class="lineno"> 4256</span>                 module_range.get&lt;uint8_t&gt;() % kMaxArrays;</div>
<div class="line"><a id="l04257" name="l04257"></a><span class="lineno"> 4257</span>  }</div>
<div class="line"><a id="l04258" name="l04258"></a><span class="lineno"> 4258</span> </div>
<div class="line"><a id="l04259" name="l04259"></a><span class="lineno"> 4259</span>  uint8_t num_signatures = num_functions;</div>
<div class="line"><a id="l04260" name="l04260"></a><span class="lineno"> 4260</span>  ModuleGen gen_module(zone, <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;builder, &amp;module_range, num_functions,</div>
<div class="line"><a id="l04261" name="l04261"></a><span class="lineno"> 4261</span>                       num_structs, num_arrays, num_signatures);</div>
<div class="line"><a id="l04262" name="l04262"></a><span class="lineno"> 4262</span> </div>
<div class="line"><a id="l04263" name="l04263"></a><span class="lineno"> 4263</span>  <span class="comment">// Add random number of memories.</span></div>
<div class="line"><a id="l04264" name="l04264"></a><span class="lineno"> 4264</span>  <span class="comment">// TODO(v8:14674): Add a mode without declaring any memory or memory</span></div>
<div class="line"><a id="l04265" name="l04265"></a><span class="lineno"> 4265</span>  <span class="comment">// instructions.</span></div>
<div class="line"><a id="l04266" name="l04266"></a><span class="lineno"> 4266</span>  gen_module.GenerateRandomMemories();</div>
<div class="line"><a id="l04267" name="l04267"></a><span class="lineno"> 4267</span> </div>
<div class="line"><a id="l04268" name="l04268"></a><span class="lineno"> 4268</span>  uint8_t current_type_index = 0;</div>
<div class="line"><a id="l04269" name="l04269"></a><span class="lineno"> 4269</span>  <span class="comment">// In case of WasmGC expressions, we create recursive groups for the recursive</span></div>
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"> 4270</span>  <span class="comment">// types.</span></div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span>  std::map&lt;uint8_t, uint8_t&gt; explicit_rec_groups;</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>.generate_wasm_gc()) {</div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span>    <span class="comment">// Put the types into random recursive groups.</span></div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span>    explicit_rec_groups = gen_module.GenerateRandomRecursiveGroups(</div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span>        kNumDefaultArrayTypesForWasmGC);</div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span> </div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>    <span class="comment">// Add default array types.</span></div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> kArrayI8{0};</div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> kArrayI16{1};</div>
<div class="line"><a id="l04280" name="l04280"></a><span class="lineno"> 4280</span>    {</div>
<div class="line"><a id="l04281" name="l04281"></a><span class="lineno"> 4281</span>      <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>* a8 = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ad0db66a23649463e572b49f50973e779">New</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>&gt;(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a2d6792d11c7a188eee3c11154383ab05">kWasmI8</a>, 1);</div>
<div class="line"><a id="l04282" name="l04282"></a><span class="lineno"> 4282</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(kArrayI8, builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a468b8abeb8298088bc0c865eeb0ca734">AddArrayType</a>(a8, <span class="keyword">true</span>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>));</div>
<div class="line"><a id="l04283" name="l04283"></a><span class="lineno"> 4283</span>      array_types.push_back(kArrayI8);</div>
<div class="line"><a id="l04284" name="l04284"></a><span class="lineno"> 4284</span>      <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>* a16 = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ad0db66a23649463e572b49f50973e779">New</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>&gt;(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#aeeac0cc9a95a66e780071a192fd8bc42">kWasmI16</a>, 1);</div>
<div class="line"><a id="l04285" name="l04285"></a><span class="lineno"> 4285</span>      <a class="code hl_define" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(kArrayI16, builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a468b8abeb8298088bc0c865eeb0ca734">AddArrayType</a>(a16, <span class="keyword">true</span>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>));</div>
<div class="line"><a id="l04286" name="l04286"></a><span class="lineno"> 4286</span>      array_types.push_back(kArrayI16);</div>
<div class="line"><a id="l04287" name="l04287"></a><span class="lineno"> 4287</span>    }</div>
<div class="line"><a id="l04288" name="l04288"></a><span class="lineno"> 4288</span>    <span class="keyword">static_assert</span>(kNumDefaultArrayTypesForWasmGC == kArrayI16.index + 1);</div>
<div class="line"><a id="l04289" name="l04289"></a><span class="lineno"> 4289</span>    current_type_index = kNumDefaultArrayTypesForWasmGC;</div>
<div class="line"><a id="l04290" name="l04290"></a><span class="lineno"> 4290</span> </div>
<div class="line"><a id="l04291" name="l04291"></a><span class="lineno"> 4291</span>    <span class="comment">// Add randomly generated structs.</span></div>
<div class="line"><a id="l04292" name="l04292"></a><span class="lineno"> 4292</span>    gen_module.GenerateRandomStructs(explicit_rec_groups, struct_types,</div>
<div class="line"><a id="l04293" name="l04293"></a><span class="lineno"> 4293</span>                                     current_type_index,</div>
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"> 4294</span>                                     kNumDefaultArrayTypesForWasmGC);</div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(current_type_index, kNumDefaultArrayTypesForWasmGC + num_structs);</div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span> </div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span>    <span class="comment">// Add randomly generated arrays.</span></div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span>    gen_module.GenerateRandomArrays(explicit_rec_groups, array_types,</div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span>                                    current_type_index);</div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(current_type_index, num_structs + num_arrays);</div>
<div class="line"><a id="l04301" name="l04301"></a><span class="lineno"> 4301</span>  }</div>
<div class="line"><a id="l04302" name="l04302"></a><span class="lineno"> 4302</span> </div>
<div class="line"><a id="l04303" name="l04303"></a><span class="lineno"> 4303</span>  <span class="comment">// We keep the signature for the first (main) function constant.</span></div>
<div class="line"><a id="l04304" name="l04304"></a><span class="lineno"> 4304</span>  <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> kIsFinal = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04305" name="l04305"></a><span class="lineno"> 4305</span>  <span class="keyword">auto</span> kMainFnSig = <a class="code hl_function" href="classv8_1_1internal_1_1FixedSizeSignature.html#ace1846202c96e97bb1df2ef87a55973d">FixedSizeSignature&lt;ValueType&gt;::Returns</a>(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>).Params(</div>
<div class="line"><a id="l04306" name="l04306"></a><span class="lineno"> 4306</span>      <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>);</div>
<div class="line"><a id="l04307" name="l04307"></a><span class="lineno"> 4307</span>  function_signatures.push_back(</div>
<div class="line"><a id="l04308" name="l04308"></a><span class="lineno"> 4308</span>      builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61023bf6d16a1b6f2c8f24b008c3ca25">ForceAddSignature</a>(&amp;kMainFnSig, kIsFinal));</div>
<div class="line"><a id="l04309" name="l04309"></a><span class="lineno"> 4309</span>  current_type_index++;</div>
<div class="line"><a id="l04310" name="l04310"></a><span class="lineno"> 4310</span> </div>
<div class="line"><a id="l04311" name="l04311"></a><span class="lineno"> 4311</span>  <span class="comment">// Add randomly generated signatures.</span></div>
<div class="line"><a id="l04312" name="l04312"></a><span class="lineno"> 4312</span>  gen_module.GenerateRandomFunctionSigs(</div>
<div class="line"><a id="l04313" name="l04313"></a><span class="lineno"> 4313</span>      explicit_rec_groups, function_signatures, current_type_index, kIsFinal);</div>
<div class="line"><a id="l04314" name="l04314"></a><span class="lineno"> 4314</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(current_type_index, num_functions + num_structs + num_arrays);</div>
<div class="line"><a id="l04315" name="l04315"></a><span class="lineno"> 4315</span> </div>
<div class="line"><a id="l04316" name="l04316"></a><span class="lineno"> 4316</span>  <span class="comment">// Add exceptions.</span></div>
<div class="line"><a id="l04317" name="l04317"></a><span class="lineno"> 4317</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="liftoff-compiler_8cc.html#a6fe609353c39c0b8953d6309e0797779">num_exceptions</a> = 1 + (module_range.get&lt;uint8_t&gt;() % kMaxExceptions);</div>
<div class="line"><a id="l04318" name="l04318"></a><span class="lineno"> 4318</span>  gen_module.GenerateRandomExceptions(<a class="code hl_variable" href="liftoff-compiler_8cc.html#a6fe609353c39c0b8953d6309e0797779">num_exceptions</a>);</div>
<div class="line"><a id="l04319" name="l04319"></a><span class="lineno"> 4319</span> </div>
<div class="line"><a id="l04320" name="l04320"></a><span class="lineno"> 4320</span>  <span class="comment">// In case of WasmGC expressions:</span></div>
<div class="line"><a id="l04321" name="l04321"></a><span class="lineno"> 4321</span>  <span class="comment">// Add the &quot;wasm:js-string&quot; imports to the module. They may or may not be</span></div>
<div class="line"><a id="l04322" name="l04322"></a><span class="lineno"> 4322</span>  <span class="comment">// used later, but they&#39;ll always be available.</span></div>
<div class="line"><a id="l04323" name="l04323"></a><span class="lineno"> 4323</span>  StringImports strings = <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>.generate_wasm_gc()</div>
<div class="line"><a id="l04324" name="l04324"></a><span class="lineno"> 4324</span>                              ? gen_module.AddImportedStringImports()</div>
<div class="line"><a id="l04325" name="l04325"></a><span class="lineno"> 4325</span>                              : StringImports();</div>
<div class="line"><a id="l04326" name="l04326"></a><span class="lineno"> 4326</span> </div>
<div class="line"><a id="l04327" name="l04327"></a><span class="lineno"> 4327</span>  <span class="comment">// Generate function declarations before tables. This will be needed once we</span></div>
<div class="line"><a id="l04328" name="l04328"></a><span class="lineno"> 4328</span>  <span class="comment">// have typed-function tables.</span></div>
<div class="line"><a id="l04329" name="l04329"></a><span class="lineno"> 4329</span>  std::vector&lt;WasmFunctionBuilder*&gt; functions;</div>
<div class="line"><a id="l04330" name="l04330"></a><span class="lineno"> 4330</span>  <span class="keywordflow">for</span> (uint8_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_functions; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l04331" name="l04331"></a><span class="lineno"> 4331</span>    <span class="comment">// If we are using wasm-gc, we cannot allow signature normalization</span></div>
<div class="line"><a id="l04332" name="l04332"></a><span class="lineno"> 4332</span>    <span class="comment">// performed by adding a function by {FunctionSig}, because we emit</span></div>
<div class="line"><a id="l04333" name="l04333"></a><span class="lineno"> 4333</span>    <span class="comment">// everything in one recursive group which blocks signature</span></div>
<div class="line"><a id="l04334" name="l04334"></a><span class="lineno"> 4334</span>    <span class="comment">// canonicalization.</span></div>
<div class="line"><a id="l04335" name="l04335"></a><span class="lineno"> 4335</span>    <span class="comment">// TODO(14034): Relax this when we implement proper recursive-group</span></div>
<div class="line"><a id="l04336" name="l04336"></a><span class="lineno"> 4336</span>    <span class="comment">// support.</span></div>
<div class="line"><a id="l04337" name="l04337"></a><span class="lineno"> 4337</span>    functions.push_back(builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a8da3e038d5a48e29c43f77323ec1350b">AddFunction</a>(function_signatures[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]));</div>
<div class="line"><a id="l04338" name="l04338"></a><span class="lineno"> 4338</span>  }</div>
<div class="line"><a id="l04339" name="l04339"></a><span class="lineno"> 4339</span> </div>
<div class="line"><a id="l04340" name="l04340"></a><span class="lineno"> 4340</span>  <span class="comment">// Generate tables before function bodies, so they are available for table</span></div>
<div class="line"><a id="l04341" name="l04341"></a><span class="lineno"> 4341</span>  <span class="comment">// operations. Generate tables before the globals, so tables don&#39;t</span></div>
<div class="line"><a id="l04342" name="l04342"></a><span class="lineno"> 4342</span>  <span class="comment">// accidentally use globals in their initializer expressions.</span></div>
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"> 4343</span>  <span class="comment">// Always generate at least one table for call_indirect.</span></div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span>  gen_module.GenerateRandomTables(array_types, struct_types);</div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span> </div>
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"> 4346</span>  <span class="comment">// Add globals.</span></div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span>  <span class="keyword">auto</span> [globals, mutable_globals] =</div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span>      gen_module.GenerateRandomGlobals(array_types, struct_types);</div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span> </div>
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"> 4350</span>  <span class="comment">// Add passive data segments.</span></div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>  <span class="keywordtype">int</span> num_data_segments = module_range.get&lt;uint8_t&gt;() % kMaxPassiveDataSegments;</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_data_segments; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l04353" name="l04353"></a><span class="lineno"> 4353</span>    GeneratePassiveDataSegment(&amp;module_range, &amp;builder);</div>
<div class="line"><a id="l04354" name="l04354"></a><span class="lineno"> 4354</span>  }</div>
<div class="line"><a id="l04355" name="l04355"></a><span class="lineno"> 4355</span> </div>
<div class="line"><a id="l04356" name="l04356"></a><span class="lineno"> 4356</span>  <span class="comment">// Generate function bodies.</span></div>
<div class="line"><a id="l04357" name="l04357"></a><span class="lineno"> 4357</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_functions; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04358" name="l04358"></a><span class="lineno"> 4358</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html">WasmFunctionBuilder</a>* f = functions[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l04359" name="l04359"></a><span class="lineno"> 4359</span>    <span class="comment">// On the last function don&#39;t split the DataRange but just use the</span></div>
<div class="line"><a id="l04360" name="l04360"></a><span class="lineno"> 4360</span>    <span class="comment">// existing DataRange.</span></div>
<div class="line"><a id="l04361" name="l04361"></a><span class="lineno"> 4361</span>    DataRange function_range = <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> != num_functions - 1</div>
<div class="line"><a id="l04362" name="l04362"></a><span class="lineno"> 4362</span>                                   ? functions_range.split()</div>
<div class="line"><a id="l04363" name="l04363"></a><span class="lineno"> 4363</span>                                   : std::move(functions_range);</div>
<div class="line"><a id="l04364" name="l04364"></a><span class="lineno"> 4364</span>    BodyGen gen_body(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, f, function_signatures, globals, mutable_globals,</div>
<div class="line"><a id="l04365" name="l04365"></a><span class="lineno"> 4365</span>                     struct_types, array_types, strings, &amp;function_range);</div>
<div class="line"><a id="l04366" name="l04366"></a><span class="lineno"> 4366</span>    <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#a68ec12c4b5e5f5c12d7c6130d84c427b">signature</a>();</div>
<div class="line"><a id="l04367" name="l04367"></a><span class="lineno"> 4367</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const ValueType&gt;</a> return_types(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;returns().begin(),</div>
<div class="line"><a id="l04368" name="l04368"></a><span class="lineno"> 4368</span>                                               <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count());</div>
<div class="line"><a id="l04369" name="l04369"></a><span class="lineno"> 4369</span>    gen_body.InitializeNonDefaultableLocals(&amp;function_range);</div>
<div class="line"><a id="l04370" name="l04370"></a><span class="lineno"> 4370</span>    gen_body.Generate(return_types, &amp;function_range);</div>
<div class="line"><a id="l04371" name="l04371"></a><span class="lineno"> 4371</span>    f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#afcf948a734fad5c6b0d2891d5a0aa2fe">Emit</a>(kExprEnd);</div>
<div class="line"><a id="l04372" name="l04372"></a><span class="lineno"> 4372</span>    <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> == 0) builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a1d6a755038037b7876f2481251117830">AddExport</a>(<a class="code hl_function" href="namespacev8_1_1base.html#ab7bb05a38073e903d44170c3fed70276">base::CStrVector</a>(<span class="stringliteral">&quot;main&quot;</span>), f);</div>
<div class="line"><a id="l04373" name="l04373"></a><span class="lineno"> 4373</span>  }</div>
<div class="line"><a id="l04374" name="l04374"></a><span class="lineno"> 4374</span> </div>
<div class="line"><a id="l04375" name="l04375"></a><span class="lineno"> 4375</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ZoneBuffer.html">ZoneBuffer</a> buffer{zone};</div>
<div class="line"><a id="l04376" name="l04376"></a><span class="lineno"> 4376</span>  builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a6035c34cf52b42d5a417e086f265082a">WriteTo</a>(&amp;buffer);</div>
<div class="line"><a id="l04377" name="l04377"></a><span class="lineno"> 4377</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(buffer);</div>
<div class="line"><a id="l04378" name="l04378"></a><span class="lineno"> 4378</span>}</div>
</div>
<div class="line"><a id="l04379" name="l04379"></a><span class="lineno"> 4379</span> </div>
<div class="line"><a id="l04380" name="l04380"></a><span class="lineno"> 4380</span><span class="comment">// Used by the initializer expression fuzzer.</span></div>
<div class="foldopen" id="foldopen04381" data-start="{" data-end="}">
<div class="line"><a id="l04381" name="l04381"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a6c61d781e3840a7be4fb41a49f1ccd61"> 4381</a></span><a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a6c61d781e3840a7be4fb41a49f1ccd61">GenerateWasmModuleForInitExpressions</a>(</div>
<div class="line"><a id="l04382" name="l04382"></a><span class="lineno"> 4382</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Zone.html">Zone</a>* zone, <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> data, <span class="keywordtype">size_t</span>* <a class="code hl_struct" href="structv8_1_1internal_1_1count.html">count</a>) {</div>
<div class="line"><a id="l04383" name="l04383"></a><span class="lineno"> 4383</span>  <span class="comment">// Don&#39;t limit expressions for the initializer expression fuzzer.</span></div>
<div class="line"><a id="l04384" name="l04384"></a><span class="lineno"> 4384</span>  <span class="keyword">constexpr</span> WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a> =</div>
<div class="line"><a id="l04385" name="l04385"></a><span class="lineno"> 4385</span>      WasmModuleGenerationOptions::All();</div>
<div class="line"><a id="l04386" name="l04386"></a><span class="lineno"> 4386</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html">WasmModuleBuilder</a> builder(zone);</div>
<div class="line"><a id="l04387" name="l04387"></a><span class="lineno"> 4387</span> </div>
<div class="line"><a id="l04388" name="l04388"></a><span class="lineno"> 4388</span>  DataRange module_range(data);</div>
<div class="line"><a id="l04389" name="l04389"></a><span class="lineno"> 4389</span>  std::vector&lt;ModuleTypeIndex&gt; function_signatures;</div>
<div class="line"><a id="l04390" name="l04390"></a><span class="lineno"> 4390</span>  std::vector&lt;ModuleTypeIndex&gt; array_types;</div>
<div class="line"><a id="l04391" name="l04391"></a><span class="lineno"> 4391</span>  std::vector&lt;ModuleTypeIndex&gt; struct_types;</div>
<div class="line"><a id="l04392" name="l04392"></a><span class="lineno"> 4392</span> </div>
<div class="line"><a id="l04393" name="l04393"></a><span class="lineno"> 4393</span>  <span class="keywordtype">int</span> num_globals = 1 + module_range.get&lt;uint8_t&gt;() % (kMaxGlobals + 1);</div>
<div class="line"><a id="l04394" name="l04394"></a><span class="lineno"> 4394</span> </div>
<div class="line"><a id="l04395" name="l04395"></a><span class="lineno"> 4395</span>  uint8_t num_functions = num_globals;</div>
<div class="line"><a id="l04396" name="l04396"></a><span class="lineno"> 4396</span>  *<a class="code hl_struct" href="structv8_1_1internal_1_1count.html">count</a> = num_functions;</div>
<div class="line"><a id="l04397" name="l04397"></a><span class="lineno"> 4397</span> </div>
<div class="line"><a id="l04398" name="l04398"></a><span class="lineno"> 4398</span>  <span class="comment">// We need at least one struct and one array in order to support</span></div>
<div class="line"><a id="l04399" name="l04399"></a><span class="lineno"> 4399</span>  <span class="comment">// WasmInitExpr for abstract types.</span></div>
<div class="line"><a id="l04400" name="l04400"></a><span class="lineno"> 4400</span>  uint8_t num_structs = 1 + module_range.get&lt;uint8_t&gt;() % kMaxStructs;</div>
<div class="line"><a id="l04401" name="l04401"></a><span class="lineno"> 4401</span>  uint8_t num_arrays = 1 + module_range.get&lt;uint8_t&gt;() % kMaxArrays;</div>
<div class="line"><a id="l04402" name="l04402"></a><span class="lineno"> 4402</span>  uint16_t num_types = num_functions + num_structs + num_arrays;</div>
<div class="line"><a id="l04403" name="l04403"></a><span class="lineno"> 4403</span> </div>
<div class="line"><a id="l04404" name="l04404"></a><span class="lineno"> 4404</span>  uint8_t current_type_index = 0;</div>
<div class="line"><a id="l04405" name="l04405"></a><span class="lineno"> 4405</span> </div>
<div class="line"><a id="l04406" name="l04406"></a><span class="lineno"> 4406</span>  <span class="comment">// Add random-generated types.</span></div>
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"> 4407</span>  uint8_t last_struct_type = current_type_index + num_structs;</div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span>  <span class="keywordflow">for</span> (; current_type_index &lt; last_struct_type; current_type_index++) {</div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>    <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> supertype = <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>;</div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>    uint8_t num_fields = module_range.get&lt;uint8_t&gt;() % (kMaxStructFields + 1);</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span> </div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span>    uint32_t existing_struct_types = current_type_index;</div>
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"> 4413</span>    <span class="keywordflow">if</span> (existing_struct_types &gt; 0 &amp;&amp; module_range.get&lt;<span class="keywordtype">bool</span>&gt;()) {</div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>      supertype =</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span>          <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a>{module_range.get&lt;uint8_t&gt;() % existing_struct_types};</div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>      num_fields += builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a3cd1606260402fbb478c6f27bdcd9225">GetStructType</a>(supertype)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1StructTypeBase.html#ac0b87d48dd4e3ca9e711b70d77309035">field_count</a>();</div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>    }</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl.html">StructType::Builder</a> struct_builder(zone, num_fields);</div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span> </div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span>    <span class="comment">// Add all fields from super type.</span></div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span>    uint32_t field_index = 0;</div>
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"> 4422</span>    <span class="keywordflow">if</span> (supertype != <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>) {</div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span>      <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1StructType.html">StructType</a>* parent = builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a3cd1606260402fbb478c6f27bdcd9225">GetStructType</a>(supertype);</div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span>      <span class="keywordflow">for</span> (; field_index &lt; parent-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1StructTypeBase.html#ac0b87d48dd4e3ca9e711b70d77309035">field_count</a>(); ++field_index) {</div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span>        struct_builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl.html#ab602a0028414bcde6fc2f51d1f0c8de6">AddField</a>(parent-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1StructType.html#a0befc03840ccdf98e89b868ecaf154c7">field</a>(field_index),</div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>                                parent-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1StructTypeBase.html#a1927b0b6f2449f663e27c9fd7b5eed78">mutability</a>(field_index));</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span>      }</div>
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"> 4428</span>    }</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span>    <span class="keywordflow">for</span> (; field_index &lt; num_fields; field_index++) {</div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>      <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> type = GetValueTypeHelper(</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>          <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;module_range, current_type_index, current_type_index,</div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span>          kIncludeNumericTypes, kIncludePackedTypes, kExcludeSomeGenerics);</div>
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"> 4433</span> </div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span>      <span class="keywordtype">bool</span> mutability = module_range.get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l04435" name="l04435"></a><span class="lineno"> 4435</span>      struct_builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl.html#ab602a0028414bcde6fc2f51d1f0c8de6">AddField</a>(type, mutability);</div>
<div class="line"><a id="l04436" name="l04436"></a><span class="lineno"> 4436</span>    }</div>
<div class="line"><a id="l04437" name="l04437"></a><span class="lineno"> 4437</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1StructType.html">StructType</a>* struct_fuz = struct_builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl.html#afadee1c657fc8eca3129428e50a72cbb">Build</a>();</div>
<div class="line"><a id="l04438" name="l04438"></a><span class="lineno"> 4438</span>    <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#ab063ad0776688b47e4006855f8e5b070">AddStructType</a>(struct_fuz, <span class="keyword">false</span>, supertype);</div>
<div class="line"><a id="l04439" name="l04439"></a><span class="lineno"> 4439</span>    struct_types.push_back(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l04440" name="l04440"></a><span class="lineno"> 4440</span>  }</div>
<div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span> </div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span>  <span class="keywordflow">for</span> (; current_type_index &lt; num_structs + num_arrays; current_type_index++) {</div>
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"> 4443</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> type = GetValueTypeHelper(</div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span>        <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;module_range, current_type_index, current_type_index,</div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>        kIncludeNumericTypes, kIncludePackedTypes, kExcludeSomeGenerics);</div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>    <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> supertype = <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>;</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span>    <span class="keywordflow">if</span> (current_type_index &gt; last_struct_type &amp;&amp; module_range.get&lt;<span class="keywordtype">bool</span>&gt;()) {</div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>      uint32_t existing_array_types = current_type_index - last_struct_type;</div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>      supertype =</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>          <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a>{last_struct_type +</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>                          (module_range.get&lt;uint8_t&gt;() % existing_array_types)};</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span>      type = builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a123e29e1e7592cd82ca06bde50c3a380">GetArrayType</a>(supertype)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html#a33942a61683c7b83fe86986a26333b1a">element_type</a>();</div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>    }</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>* array_fuz = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ad0db66a23649463e572b49f50973e779">New</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>&gt;(<a class="code hl_variable" href="wasm-inlining-into-js_8cc.html#a66874a4e937e4192b2b42e57f55251e8">type</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>    <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a468b8abeb8298088bc0c865eeb0ca734">AddArrayType</a>(array_fuz, <span class="keyword">false</span>, supertype);</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>    array_types.push_back(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span>  }</div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span> </div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>  <span class="comment">// Choose global types and create function signatures.</span></div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>  <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> kIsFinal = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span>  std::vector&lt;ValueType&gt; globals;</div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span>  <span class="keywordflow">for</span> (; current_type_index &lt; num_types; current_type_index++) {</div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> return_type = GetValueTypeHelper(</div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span>        <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;module_range, num_types - num_globals,</div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>        num_types - num_globals, kIncludeNumericTypes, kExcludePackedTypes,</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>        kIncludeAllGenerics, kExcludeS128);</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span>    globals.push_back(return_type);</div>
<div class="line"><a id="l04468" name="l04468"></a><span class="lineno"> 4468</span>    <span class="comment">// Create a new function signature for each global. These functions will be</span></div>
<div class="line"><a id="l04469" name="l04469"></a><span class="lineno"> 4469</span>    <span class="comment">// used to compare against the initializer value of the global.</span></div>
<div class="line"><a id="l04470" name="l04470"></a><span class="lineno"> 4470</span>    <a class="code hl_class" href="classv8_1_1internal_1_1SignatureBuilder.html">FunctionSig::Builder</a> sig_builder(zone, 1, 0);</div>
<div class="line"><a id="l04471" name="l04471"></a><span class="lineno"> 4471</span>    sig_builder.<a class="code hl_function" href="classv8_1_1internal_1_1SignatureBuilder.html#a1cf0a0a868c1403005cbc43a1a23fb6a">AddReturn</a>(return_type);</div>
<div class="line"><a id="l04472" name="l04472"></a><span class="lineno"> 4472</span>    <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> signature_index =</div>
<div class="line"><a id="l04473" name="l04473"></a><span class="lineno"> 4473</span>        builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61023bf6d16a1b6f2c8f24b008c3ca25">ForceAddSignature</a>(sig_builder.<a class="code hl_function" href="classv8_1_1internal_1_1SignatureBuilder.html#aa4aa5ec8b8630f5798ef6cf00011d8ee">Get</a>(), kIsFinal);</div>
<div class="line"><a id="l04474" name="l04474"></a><span class="lineno"> 4474</span>    function_signatures.push_back(signature_index);</div>
<div class="line"><a id="l04475" name="l04475"></a><span class="lineno"> 4475</span>  }</div>
<div class="line"><a id="l04476" name="l04476"></a><span class="lineno"> 4476</span> </div>
<div class="line"><a id="l04477" name="l04477"></a><span class="lineno"> 4477</span>  std::vector&lt;WasmFunctionBuilder*&gt; functions;</div>
<div class="line"><a id="l04478" name="l04478"></a><span class="lineno"> 4478</span>  <span class="keywordflow">for</span> (uint8_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_functions; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l04479" name="l04479"></a><span class="lineno"> 4479</span>    functions.push_back(builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a8da3e038d5a48e29c43f77323ec1350b">AddFunction</a>(function_signatures[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]));</div>
<div class="line"><a id="l04480" name="l04480"></a><span class="lineno"> 4480</span>  }</div>
<div class="line"><a id="l04481" name="l04481"></a><span class="lineno"> 4481</span> </div>
<div class="line"><a id="l04482" name="l04482"></a><span class="lineno"> 4482</span>  <span class="comment">// Create globals.</span></div>
<div class="line"><a id="l04483" name="l04483"></a><span class="lineno"> 4483</span>  std::vector&lt;uint8_t&gt; mutable_globals;</div>
<div class="line"><a id="l04484" name="l04484"></a><span class="lineno"> 4484</span>  std::vector&lt;WasmInitExpr&gt; init_exprs;</div>
<div class="line"><a id="l04485" name="l04485"></a><span class="lineno"> 4485</span>  init_exprs.reserve(num_globals);</div>
<div class="line"><a id="l04486" name="l04486"></a><span class="lineno"> 4486</span>  mutable_globals.reserve(num_globals);</div>
<div class="line"><a id="l04487" name="l04487"></a><span class="lineno"> 4487</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(globals.size(), num_globals);</div>
<div class="line"><a id="l04488" name="l04488"></a><span class="lineno"> 4488</span>  uint64_t mutabilities = module_range.get&lt;uint64_t&gt;();</div>
<div class="line"><a id="l04489" name="l04489"></a><span class="lineno"> 4489</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_globals; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04490" name="l04490"></a><span class="lineno"> 4490</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ValueType.html">ValueType</a> type = globals[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l04491" name="l04491"></a><span class="lineno"> 4491</span>    <span class="comment">// 50% of globals are immutable.</span></div>
<div class="line"><a id="l04492" name="l04492"></a><span class="lineno"> 4492</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> mutability = mutabilities &amp; 1;</div>
<div class="line"><a id="l04493" name="l04493"></a><span class="lineno"> 4493</span>    mutabilities &gt;&gt;= 1;</div>
<div class="line"><a id="l04494" name="l04494"></a><span class="lineno"> 4494</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html">WasmInitExpr</a> init_expr = GenerateInitExpr(</div>
<div class="line"><a id="l04495" name="l04495"></a><span class="lineno"> 4495</span>        zone, module_range, &amp;builder, type, struct_types, array_types, 0);</div>
<div class="line"><a id="l04496" name="l04496"></a><span class="lineno"> 4496</span>    init_exprs.push_back(init_expr);</div>
<div class="line"><a id="l04497" name="l04497"></a><span class="lineno"> 4497</span>    <span class="keyword">auto</span> buffer = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ae9377ec6a07122d265a8ed3d458a3240">AllocateVector</a>&lt;<span class="keywordtype">char</span>&gt;(8);</div>
<div class="line"><a id="l04498" name="l04498"></a><span class="lineno"> 4498</span>    <span class="keywordtype">size_t</span> len = <a class="code hl_function" href="namespacev8_1_1base.html#a36caaf43a3f7761ae90d699b961f0239">base::SNPrintF</a>(buffer, <span class="stringliteral">&quot;g%i&quot;</span>, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l04499" name="l04499"></a><span class="lineno"> 4499</span>    builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#afdb010057e3a8a829c445eaf9471b09c">AddExportedGlobal</a>(type, mutability, init_expr,</div>
<div class="line"><a id="l04500" name="l04500"></a><span class="lineno"> 4500</span>                              {buffer.begin(), len});</div>
<div class="line"><a id="l04501" name="l04501"></a><span class="lineno"> 4501</span>    <span class="keywordflow">if</span> (mutability) mutable_globals.push_back(<span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l04502" name="l04502"></a><span class="lineno"> 4502</span>  }</div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span> </div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span>  <span class="comment">// Create functions containing the initializer of each global as its function</span></div>
<div class="line"><a id="l04505" name="l04505"></a><span class="lineno"> 4505</span>  <span class="comment">// body.</span></div>
<div class="line"><a id="l04506" name="l04506"></a><span class="lineno"> 4506</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_functions; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04507" name="l04507"></a><span class="lineno"> 4507</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html">WasmFunctionBuilder</a>* f = functions[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l04508" name="l04508"></a><span class="lineno"> 4508</span>    f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#a27e687e058a028ed4a7e081525931368">EmitFromInitializerExpression</a>(init_exprs[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]);</div>
<div class="line"><a id="l04509" name="l04509"></a><span class="lineno"> 4509</span>    <span class="keyword">auto</span> buffer = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ae9377ec6a07122d265a8ed3d458a3240">AllocateVector</a>&lt;<span class="keywordtype">char</span>&gt;(8);</div>
<div class="line"><a id="l04510" name="l04510"></a><span class="lineno"> 4510</span>    <span class="keywordtype">size_t</span> len = <a class="code hl_function" href="namespacev8_1_1base.html#a36caaf43a3f7761ae90d699b961f0239">base::SNPrintF</a>(buffer, <span class="stringliteral">&quot;f%i&quot;</span>, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l04511" name="l04511"></a><span class="lineno"> 4511</span>    builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a1d6a755038037b7876f2481251117830">AddExport</a>({buffer.begin(), len}, f);</div>
<div class="line"><a id="l04512" name="l04512"></a><span class="lineno"> 4512</span>  }</div>
<div class="line"><a id="l04513" name="l04513"></a><span class="lineno"> 4513</span> </div>
<div class="line"><a id="l04514" name="l04514"></a><span class="lineno"> 4514</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ZoneBuffer.html">ZoneBuffer</a> buffer{zone};</div>
<div class="line"><a id="l04515" name="l04515"></a><span class="lineno"> 4515</span>  builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a6035c34cf52b42d5a417e086f265082a">WriteTo</a>(&amp;buffer);</div>
<div class="line"><a id="l04516" name="l04516"></a><span class="lineno"> 4516</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(buffer);</div>
<div class="line"><a id="l04517" name="l04517"></a><span class="lineno"> 4517</span>}</div>
</div>
<div class="line"><a id="l04518" name="l04518"></a><span class="lineno"> 4518</span> </div>
<div class="line"><a id="l04519" name="l04519"></a><span class="lineno"> 4519</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l04520" name="l04520"></a><span class="lineno"> 4520</span> </div>
<div class="line"><a id="l04521" name="l04521"></a><span class="lineno"> 4521</span><span class="keywordtype">bool</span> HasSameReturns(<span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* a, <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* b) {</div>
<div class="line"><a id="l04522" name="l04522"></a><span class="lineno"> 4522</span>  <span class="keywordflow">if</span> (a-&gt;return_count() != b-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Signature.html#a1280bc48b23c97cbf6d4498145693440">return_count</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04523" name="l04523"></a><span class="lineno"> 4523</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; a-&gt;return_count(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04524" name="l04524"></a><span class="lineno"> 4524</span>    <span class="keywordflow">if</span> (a-&gt;GetReturn(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) != b-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Signature.html#a60e0b4e3ca49c39e4392945d26e24b3f">GetReturn</a>(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l04525" name="l04525"></a><span class="lineno"> 4525</span>  }</div>
<div class="line"><a id="l04526" name="l04526"></a><span class="lineno"> 4526</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l04527" name="l04527"></a><span class="lineno"> 4527</span>}</div>
<div class="line"><a id="l04528" name="l04528"></a><span class="lineno"> 4528</span> </div>
<div class="line"><a id="l04529" name="l04529"></a><span class="lineno"> 4529</span><span class="keywordtype">void</span> EmitDeoptAndReturnValues(BodyGen gen_body, WasmFunctionBuilder* f,</div>
<div class="line"><a id="l04530" name="l04530"></a><span class="lineno"> 4530</span>                              <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* target_sig,</div>
<div class="line"><a id="l04531" name="l04531"></a><span class="lineno"> 4531</span>                              ModuleTypeIndex target_sig_index,</div>
<div class="line"><a id="l04532" name="l04532"></a><span class="lineno"> 4532</span>                              uint32_t global_index, uint32_t table_index,</div>
<div class="line"><a id="l04533" name="l04533"></a><span class="lineno"> 4533</span>                              <span class="keywordtype">bool</span> use_table64, DataRange* data) {</div>
<div class="line"><a id="l04534" name="l04534"></a><span class="lineno"> 4534</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const ValueType&gt;</a> return_types = f-&gt;signature()-&gt;returns();</div>
<div class="line"><a id="l04535" name="l04535"></a><span class="lineno"> 4535</span>  <span class="comment">// Split the return types randomly and generate some values before the</span></div>
<div class="line"><a id="l04536" name="l04536"></a><span class="lineno"> 4536</span>  <span class="comment">// deopting call and some afterwards. (This makes sure that we have deopts</span></div>
<div class="line"><a id="l04537" name="l04537"></a><span class="lineno"> 4537</span>  <span class="comment">// where there are values on the wasm value stack which are not used by the</span></div>
<div class="line"><a id="l04538" name="l04538"></a><span class="lineno"> 4538</span>  <span class="comment">// deopting call itself.)</span></div>
<div class="line"><a id="l04539" name="l04539"></a><span class="lineno"> 4539</span>  uint32_t returns_split = data-&gt;get&lt;uint8_t&gt;() % (return_types.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() + 1);</div>
<div class="line"><a id="l04540" name="l04540"></a><span class="lineno"> 4540</span>  <span class="keywordflow">if</span> (returns_split) {</div>
<div class="line"><a id="l04541" name="l04541"></a><span class="lineno"> 4541</span>    gen_body.Generate(return_types.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a2a7f93a33a4938bd73b628789f214d3d">SubVector</a>(0, returns_split), data);</div>
<div class="line"><a id="l04542" name="l04542"></a><span class="lineno"> 4542</span>  }</div>
<div class="line"><a id="l04543" name="l04543"></a><span class="lineno"> 4543</span>  gen_body.Generate(target_sig-&gt;parameters(), data);</div>
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"> 4544</span>  f-&gt;EmitWithU32V(kExprGlobalGet, global_index);</div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>  <span class="keywordflow">if</span> (use_table64) {</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span>    f-&gt;Emit(kExprI64UConvertI32);</div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>  }</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span>  <span class="comment">// Tail calls can only be emitted if the return types match.</span></div>
<div class="line"><a id="l04549" name="l04549"></a><span class="lineno"> 4549</span>  <span class="keywordtype">bool</span> same_returns = HasSameReturns(target_sig, f-&gt;signature());</div>
<div class="line"><a id="l04550" name="l04550"></a><span class="lineno"> 4550</span>  <span class="keywordtype">size_t</span> option_count = (same_returns + 1) * 2;</div>
<div class="line"><a id="l04551" name="l04551"></a><span class="lineno"> 4551</span>  <span class="keywordflow">switch</span> (data-&gt;get&lt;uint8_t&gt;() % option_count) {</div>
<div class="line"><a id="l04552" name="l04552"></a><span class="lineno"> 4552</span>    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l04553" name="l04553"></a><span class="lineno"> 4553</span>      <span class="comment">// Emit call_ref.</span></div>
<div class="line"><a id="l04554" name="l04554"></a><span class="lineno"> 4554</span>      f-&gt;Emit(kExprTableGet);</div>
<div class="line"><a id="l04555" name="l04555"></a><span class="lineno"> 4555</span>      f-&gt;EmitU32V(table_index);</div>
<div class="line"><a id="l04556" name="l04556"></a><span class="lineno"> 4556</span>      f-&gt;EmitWithPrefix(kExprRefCast);</div>
<div class="line"><a id="l04557" name="l04557"></a><span class="lineno"> 4557</span>      f-&gt;EmitI32V(target_sig_index);</div>
<div class="line"><a id="l04558" name="l04558"></a><span class="lineno"> 4558</span>      f-&gt;EmitWithU32V(kExprCallRef, target_sig_index);</div>
<div class="line"><a id="l04559" name="l04559"></a><span class="lineno"> 4559</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04560" name="l04560"></a><span class="lineno"> 4560</span>    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l04561" name="l04561"></a><span class="lineno"> 4561</span>      <span class="comment">// Emit call_indirect.</span></div>
<div class="line"><a id="l04562" name="l04562"></a><span class="lineno"> 4562</span>      f-&gt;EmitWithU32V(kExprCallIndirect, target_sig_index);</div>
<div class="line"><a id="l04563" name="l04563"></a><span class="lineno"> 4563</span>      f-&gt;EmitByte(table_index);</div>
<div class="line"><a id="l04564" name="l04564"></a><span class="lineno"> 4564</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04565" name="l04565"></a><span class="lineno"> 4565</span>    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l04566" name="l04566"></a><span class="lineno"> 4566</span>      <span class="comment">// Emit return_call_ref.</span></div>
<div class="line"><a id="l04567" name="l04567"></a><span class="lineno"> 4567</span>      f-&gt;Emit(kExprTableGet);</div>
<div class="line"><a id="l04568" name="l04568"></a><span class="lineno"> 4568</span>      f-&gt;EmitU32V(table_index);</div>
<div class="line"><a id="l04569" name="l04569"></a><span class="lineno"> 4569</span>      f-&gt;EmitWithPrefix(kExprRefCast);</div>
<div class="line"><a id="l04570" name="l04570"></a><span class="lineno"> 4570</span>      f-&gt;EmitI32V(target_sig_index);</div>
<div class="line"><a id="l04571" name="l04571"></a><span class="lineno"> 4571</span>      f-&gt;EmitWithU32V(kExprReturnCallRef, target_sig_index);</div>
<div class="line"><a id="l04572" name="l04572"></a><span class="lineno"> 4572</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04573" name="l04573"></a><span class="lineno"> 4573</span>    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l04574" name="l04574"></a><span class="lineno"> 4574</span>      <span class="comment">// Emit return_call_indirect.</span></div>
<div class="line"><a id="l04575" name="l04575"></a><span class="lineno"> 4575</span>      f-&gt;EmitWithU32V(kExprReturnCallIndirect, target_sig_index);</div>
<div class="line"><a id="l04576" name="l04576"></a><span class="lineno"> 4576</span>      f-&gt;EmitByte(table_index);</div>
<div class="line"><a id="l04577" name="l04577"></a><span class="lineno"> 4577</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04578" name="l04578"></a><span class="lineno"> 4578</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04579" name="l04579"></a><span class="lineno"> 4579</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l04580" name="l04580"></a><span class="lineno"> 4580</span>  }</div>
<div class="line"><a id="l04581" name="l04581"></a><span class="lineno"> 4581</span>  gen_body.ConsumeAndGenerate(target_sig-&gt;returns(),</div>
<div class="line"><a id="l04582" name="l04582"></a><span class="lineno"> 4582</span>                              return_types.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#aab9b38b61ae9c6ca2c00f0f3f579e088">SubVectorFrom</a>(returns_split), data);</div>
<div class="line"><a id="l04583" name="l04583"></a><span class="lineno"> 4583</span>}</div>
<div class="line"><a id="l04584" name="l04584"></a><span class="lineno"> 4584</span> </div>
<div class="line"><a id="l04585" name="l04585"></a><span class="lineno"> 4585</span><span class="keywordtype">void</span> EmitCallAndReturnValues(BodyGen gen_body, WasmFunctionBuilder* f,</div>
<div class="line"><a id="l04586" name="l04586"></a><span class="lineno"> 4586</span>                             WasmFunctionBuilder* callee, uint32_t table_index,</div>
<div class="line"><a id="l04587" name="l04587"></a><span class="lineno"> 4587</span>                             <span class="keywordtype">bool</span> use_table64, DataRange* data) {</div>
<div class="line"><a id="l04588" name="l04588"></a><span class="lineno"> 4588</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">FunctionSig</a>* callee_sig = callee-&gt;signature();</div>
<div class="line"><a id="l04589" name="l04589"></a><span class="lineno"> 4589</span>  uint32_t callee_index =</div>
<div class="line"><a id="l04590" name="l04590"></a><span class="lineno"> 4590</span>      callee-&gt;func_index() + gen_body.NumImportedFunctions();</div>
<div class="line"><a id="l04591" name="l04591"></a><span class="lineno"> 4591</span> </div>
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"> 4592</span>  base::Vector&lt;const ValueType&gt; return_types = f-&gt;signature()-&gt;returns();</div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span>  <span class="comment">// Split the return types randomly and generate some values before the</span></div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>  <span class="comment">// deopting call and some afterwards to create more interesting test cases.</span></div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>  uint32_t returns_split = data-&gt;get&lt;uint8_t&gt;() % (return_types.size() + 1);</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>  <span class="keywordflow">if</span> (returns_split) {</div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>    gen_body.Generate(return_types.SubVector(0, returns_split), data);</div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span>  }</div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span>  gen_body.Generate(callee_sig-&gt;parameters(), data);</div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>  <span class="comment">// Tail calls can only be emitted if the return types match.</span></div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span>  <span class="keywordtype">bool</span> same_returns = HasSameReturns(callee_sig, f-&gt;signature());</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>  <span class="keywordtype">size_t</span> option_count = (same_returns + 1) * 3;</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>  <span class="keywordflow">switch</span> (data-&gt;get&lt;uint8_t&gt;() % option_count) {</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>      f-&gt;EmitWithU32V(kExprCallFunction, callee_index);</div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span>    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l04608" name="l04608"></a><span class="lineno"> 4608</span>      f-&gt;EmitWithU32V(kExprRefFunc, callee_index);</div>
<div class="line"><a id="l04609" name="l04609"></a><span class="lineno"> 4609</span>      f-&gt;EmitWithU32V(kExprCallRef, callee-&gt;sig_index());</div>
<div class="line"><a id="l04610" name="l04610"></a><span class="lineno"> 4610</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04611" name="l04611"></a><span class="lineno"> 4611</span>    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l04612" name="l04612"></a><span class="lineno"> 4612</span>      <span class="comment">// Note that this assumes that the declared function index is the same as</span></div>
<div class="line"><a id="l04613" name="l04613"></a><span class="lineno"> 4613</span>      <span class="comment">// the index of the function in the table.</span></div>
<div class="line"><a id="l04614" name="l04614"></a><span class="lineno"> 4614</span>      use_table64 ? f-&gt;EmitI64Const(callee-&gt;func_index())</div>
<div class="line"><a id="l04615" name="l04615"></a><span class="lineno"> 4615</span>                  : f-&gt;EmitI32Const(callee-&gt;func_index());</div>
<div class="line"><a id="l04616" name="l04616"></a><span class="lineno"> 4616</span>      f-&gt;EmitWithU32V(kExprCallIndirect, callee-&gt;sig_index());</div>
<div class="line"><a id="l04617" name="l04617"></a><span class="lineno"> 4617</span>      f-&gt;EmitByte(table_index);</div>
<div class="line"><a id="l04618" name="l04618"></a><span class="lineno"> 4618</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04619" name="l04619"></a><span class="lineno"> 4619</span>    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l04620" name="l04620"></a><span class="lineno"> 4620</span>      f-&gt;EmitWithU32V(kExprReturnCall, callee_index);</div>
<div class="line"><a id="l04621" name="l04621"></a><span class="lineno"> 4621</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04622" name="l04622"></a><span class="lineno"> 4622</span>    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l04623" name="l04623"></a><span class="lineno"> 4623</span>      f-&gt;EmitWithU32V(kExprRefFunc, callee_index);</div>
<div class="line"><a id="l04624" name="l04624"></a><span class="lineno"> 4624</span>      f-&gt;EmitWithU32V(kExprReturnCallRef, callee-&gt;sig_index());</div>
<div class="line"><a id="l04625" name="l04625"></a><span class="lineno"> 4625</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04626" name="l04626"></a><span class="lineno"> 4626</span>    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l04627" name="l04627"></a><span class="lineno"> 4627</span>      <span class="comment">// Note that this assumes that the declared function index is the same as</span></div>
<div class="line"><a id="l04628" name="l04628"></a><span class="lineno"> 4628</span>      <span class="comment">// the index of the function in the table.</span></div>
<div class="line"><a id="l04629" name="l04629"></a><span class="lineno"> 4629</span>      use_table64 ? f-&gt;EmitI64Const(callee-&gt;func_index())</div>
<div class="line"><a id="l04630" name="l04630"></a><span class="lineno"> 4630</span>                  : f-&gt;EmitI32Const(callee-&gt;func_index());</div>
<div class="line"><a id="l04631" name="l04631"></a><span class="lineno"> 4631</span>      f-&gt;EmitWithU32V(kExprReturnCallIndirect, callee-&gt;sig_index());</div>
<div class="line"><a id="l04632" name="l04632"></a><span class="lineno"> 4632</span>      f-&gt;EmitByte(table_index);</div>
<div class="line"><a id="l04633" name="l04633"></a><span class="lineno"> 4633</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l04634" name="l04634"></a><span class="lineno"> 4634</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l04635" name="l04635"></a><span class="lineno"> 4635</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l04636" name="l04636"></a><span class="lineno"> 4636</span>  }</div>
<div class="line"><a id="l04637" name="l04637"></a><span class="lineno"> 4637</span>  gen_body.ConsumeAndGenerate(callee_sig-&gt;returns(),</div>
<div class="line"><a id="l04638" name="l04638"></a><span class="lineno"> 4638</span>                              return_types.SubVectorFrom(returns_split), data);</div>
<div class="line"><a id="l04639" name="l04639"></a><span class="lineno"> 4639</span>}</div>
<div class="line"><a id="l04640" name="l04640"></a><span class="lineno"> 4640</span>}  <span class="comment">// anonymous namespace</span></div>
<div class="line"><a id="l04641" name="l04641"></a><span class="lineno"> 4641</span> </div>
<div class="foldopen" id="foldopen04642" data-start="{" data-end="}">
<div class="line"><a id="l04642" name="l04642"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a9c8b656db77414bf033e312d64b7ecd8"> 4642</a></span><a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a9c8b656db77414bf033e312d64b7ecd8">GenerateWasmModuleForDeopt</a>(</div>
<div class="line"><a id="l04643" name="l04643"></a><span class="lineno"> 4643</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Zone.html">Zone</a>* zone, <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> data,</div>
<div class="line"><a id="l04644" name="l04644"></a><span class="lineno"> 4644</span>    std::vector&lt;std::string&gt;&amp; callees, std::vector&lt;std::string&gt;&amp; inlinees) {</div>
<div class="line"><a id="l04645" name="l04645"></a><span class="lineno"> 4645</span>  <span class="comment">// Don&#39;t limit the features for the deopt fuzzer.</span></div>
<div class="line"><a id="l04646" name="l04646"></a><span class="lineno"> 4646</span>  <span class="keyword">constexpr</span> WasmModuleGenerationOptions <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a> =</div>
<div class="line"><a id="l04647" name="l04647"></a><span class="lineno"> 4647</span>      WasmModuleGenerationOptions::All();</div>
<div class="line"><a id="l04648" name="l04648"></a><span class="lineno"> 4648</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html">WasmModuleBuilder</a> builder(zone);</div>
<div class="line"><a id="l04649" name="l04649"></a><span class="lineno"> 4649</span> </div>
<div class="line"><a id="l04650" name="l04650"></a><span class="lineno"> 4650</span>  DataRange range(data);</div>
<div class="line"><a id="l04651" name="l04651"></a><span class="lineno"> 4651</span>  std::vector&lt;ModuleTypeIndex&gt; function_signatures;</div>
<div class="line"><a id="l04652" name="l04652"></a><span class="lineno"> 4652</span>  std::vector&lt;ModuleTypeIndex&gt; array_types;</div>
<div class="line"><a id="l04653" name="l04653"></a><span class="lineno"> 4653</span>  std::vector&lt;ModuleTypeIndex&gt; struct_types;</div>
<div class="line"><a id="l04654" name="l04654"></a><span class="lineno"> 4654</span> </div>
<div class="line"><a id="l04655" name="l04655"></a><span class="lineno"> 4655</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxCallTargets = 5;</div>
<div class="line"><a id="l04656" name="l04656"></a><span class="lineno"> 4656</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxInlinees = 3;</div>
<div class="line"><a id="l04657" name="l04657"></a><span class="lineno"> 4657</span> </div>
<div class="line"><a id="l04658" name="l04658"></a><span class="lineno"> 4658</span>  <span class="comment">// We need at least 2 call targets to be able to trigger a deopt.</span></div>
<div class="line"><a id="l04659" name="l04659"></a><span class="lineno"> 4659</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> num_call_targets = 2 + range.get&lt;uint8_t&gt;() % (kMaxCallTargets - 1);</div>
<div class="line"><a id="l04660" name="l04660"></a><span class="lineno"> 4660</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> num_inlinees = range.get&lt;uint8_t&gt;() % (kMaxInlinees + 1);</div>
<div class="line"><a id="l04661" name="l04661"></a><span class="lineno"> 4661</span> </div>
<div class="line"><a id="l04662" name="l04662"></a><span class="lineno"> 4662</span>  <span class="comment">// 1 main function + x inlinees + x callees.</span></div>
<div class="line"><a id="l04663" name="l04663"></a><span class="lineno"> 4663</span>  uint8_t num_functions = 1 + num_inlinees + num_call_targets;</div>
<div class="line"><a id="l04664" name="l04664"></a><span class="lineno"> 4664</span>  <span class="comment">// 1 signature for all the callees, 1 signature for the main function +</span></div>
<div class="line"><a id="l04665" name="l04665"></a><span class="lineno"> 4665</span>  <span class="comment">// 1 signature per inlinee.</span></div>
<div class="line"><a id="l04666" name="l04666"></a><span class="lineno"> 4666</span>  uint8_t num_signatures = 2 + num_inlinees;</div>
<div class="line"><a id="l04667" name="l04667"></a><span class="lineno"> 4667</span> </div>
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"> 4668</span>  uint8_t num_structs = 1 + range.get&lt;uint8_t&gt;() % kMaxStructs;</div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span>  <span class="comment">// In case of WasmGC expressions:</span></div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span>  <span class="comment">// We always add two default array types with mutable i8 and i16 elements,</span></div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span>  <span class="comment">// respectively.</span></div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>  <span class="keyword">constexpr</span> uint8_t kNumDefaultArrayTypesForWasmGC = 2;</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>  uint8_t num_arrays =</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>      range.get&lt;uint8_t&gt;() % kMaxArrays + kNumDefaultArrayTypesForWasmGC;</div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span>  <span class="comment">// Just ignoring user-defined signature types in the signatures.</span></div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span>  uint16_t num_types = num_structs + num_arrays;</div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span> </div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span>  uint8_t current_type_index = kNumDefaultArrayTypesForWasmGC;</div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span> </div>
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"> 4680</span>  <span class="comment">// Add random-generated types.</span></div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span>  ModuleGen gen_module(zone, <a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;builder, &amp;range, num_functions,</div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>                       num_structs, num_arrays, num_signatures);</div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span> </div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span>  gen_module.GenerateRandomMemories();</div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span>  std::map&lt;uint8_t, uint8_t&gt; explicit_rec_groups =</div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>      gen_module.GenerateRandomRecursiveGroups(kNumDefaultArrayTypesForWasmGC);</div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span>  <span class="comment">// Add default array types.</span></div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> kArrayI8{0};</div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> kArrayI16{1};</div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span>  {</div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>* a8 = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ad0db66a23649463e572b49f50973e779">New</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>&gt;(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a2d6792d11c7a188eee3c11154383ab05">kWasmI8</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l04692" name="l04692"></a><span class="lineno"> 4692</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(kArrayI8, builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a468b8abeb8298088bc0c865eeb0ca734">AddArrayType</a>(a8, <span class="keyword">true</span>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>));</div>
<div class="line"><a id="l04693" name="l04693"></a><span class="lineno"> 4693</span>    array_types.push_back(kArrayI8);</div>
<div class="line"><a id="l04694" name="l04694"></a><span class="lineno"> 4694</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>* a16 = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ad0db66a23649463e572b49f50973e779">New</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">ArrayType</a>&gt;(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#aeeac0cc9a95a66e780071a192fd8bc42">kWasmI16</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l04695" name="l04695"></a><span class="lineno"> 4695</span>    <a class="code hl_define" href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(kArrayI16, builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a468b8abeb8298088bc0c865eeb0ca734">AddArrayType</a>(a16, <span class="keyword">true</span>, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">kNoSuperType</a>));</div>
<div class="line"><a id="l04696" name="l04696"></a><span class="lineno"> 4696</span>    array_types.push_back(kArrayI16);</div>
<div class="line"><a id="l04697" name="l04697"></a><span class="lineno"> 4697</span>  }</div>
<div class="line"><a id="l04698" name="l04698"></a><span class="lineno"> 4698</span>  <span class="keyword">static_assert</span>(kNumDefaultArrayTypesForWasmGC == kArrayI16.index + 1);</div>
<div class="line"><a id="l04699" name="l04699"></a><span class="lineno"> 4699</span>  gen_module.GenerateRandomStructs(explicit_rec_groups, struct_types,</div>
<div class="line"><a id="l04700" name="l04700"></a><span class="lineno"> 4700</span>                                   current_type_index,</div>
<div class="line"><a id="l04701" name="l04701"></a><span class="lineno"> 4701</span>                                   kNumDefaultArrayTypesForWasmGC);</div>
<div class="line"><a id="l04702" name="l04702"></a><span class="lineno"> 4702</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(current_type_index, kNumDefaultArrayTypesForWasmGC + num_structs);</div>
<div class="line"><a id="l04703" name="l04703"></a><span class="lineno"> 4703</span>  gen_module.GenerateRandomArrays(explicit_rec_groups, array_types,</div>
<div class="line"><a id="l04704" name="l04704"></a><span class="lineno"> 4704</span>                                  current_type_index);</div>
<div class="line"><a id="l04705" name="l04705"></a><span class="lineno"> 4705</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(current_type_index, num_structs + num_arrays);</div>
<div class="line"><a id="l04706" name="l04706"></a><span class="lineno"> 4706</span> </div>
<div class="line"><a id="l04707" name="l04707"></a><span class="lineno"> 4707</span>  <span class="comment">// Create signature for call target.</span></div>
<div class="line"><a id="l04708" name="l04708"></a><span class="lineno"> 4708</span>  std::vector&lt;ValueType&gt; return_types =</div>
<div class="line"><a id="l04709" name="l04709"></a><span class="lineno"> 4709</span>      GenerateTypes(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;range, num_types);</div>
<div class="line"><a id="l04710" name="l04710"></a><span class="lineno"> 4710</span>  <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> kIsFinal = <span class="keyword">true</span>;</div>
<div class="line"><a id="l04711" name="l04711"></a><span class="lineno"> 4711</span>  <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* target_sig = CreateSignature(</div>
<div class="line"><a id="l04712" name="l04712"></a><span class="lineno"> 4712</span>      builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#aa0946c70ee7eccf4f18403ea0832ab4d">zone</a>(), <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(GenerateTypes(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;range, num_types)),</div>
<div class="line"><a id="l04713" name="l04713"></a><span class="lineno"> 4713</span>      <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(return_types));</div>
<div class="line"><a id="l04714" name="l04714"></a><span class="lineno"> 4714</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">ModuleTypeIndex</a> target_sig_index =</div>
<div class="line"><a id="l04715" name="l04715"></a><span class="lineno"> 4715</span>      builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61023bf6d16a1b6f2c8f24b008c3ca25">ForceAddSignature</a>(target_sig, kIsFinal);</div>
<div class="line"><a id="l04716" name="l04716"></a><span class="lineno"> 4716</span> </div>
<div class="line"><a id="l04717" name="l04717"></a><span class="lineno"> 4717</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_call_targets; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04718" name="l04718"></a><span class="lineno"> 4718</span>    <span class="comment">// Simplification: All call targets of a call_ref / call_indirect have the</span></div>
<div class="line"><a id="l04719" name="l04719"></a><span class="lineno"> 4719</span>    <span class="comment">// same signature.</span></div>
<div class="line"><a id="l04720" name="l04720"></a><span class="lineno"> 4720</span>    function_signatures.push_back(target_sig_index);</div>
<div class="line"><a id="l04721" name="l04721"></a><span class="lineno"> 4721</span>  }</div>
<div class="line"><a id="l04722" name="l04722"></a><span class="lineno"> 4722</span> </div>
<div class="line"><a id="l04723" name="l04723"></a><span class="lineno"> 4723</span>  <span class="comment">// Create signatures for inlinees.</span></div>
<div class="line"><a id="l04724" name="l04724"></a><span class="lineno"> 4724</span>  <span class="comment">// Use the same return types with a certain chance. This increases the chance</span></div>
<div class="line"><a id="l04725" name="l04725"></a><span class="lineno"> 4725</span>  <span class="comment">// to emit return calls.</span></div>
<div class="line"><a id="l04726" name="l04726"></a><span class="lineno"> 4726</span>  uint8_t use_same_return = range.get&lt;uint8_t&gt;();</div>
<div class="line"><a id="l04727" name="l04727"></a><span class="lineno"> 4727</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_inlinees; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04728" name="l04728"></a><span class="lineno"> 4728</span>    <span class="keywordflow">if</span> ((use_same_return &amp; (1 &lt;&lt; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)) == 0) {</div>
<div class="line"><a id="l04729" name="l04729"></a><span class="lineno"> 4729</span>      return_types = GenerateTypes(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;range, num_types);</div>
<div class="line"><a id="l04730" name="l04730"></a><span class="lineno"> 4730</span>    }</div>
<div class="line"><a id="l04731" name="l04731"></a><span class="lineno"> 4731</span>    <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* inlinee_sig = CreateSignature(</div>
<div class="line"><a id="l04732" name="l04732"></a><span class="lineno"> 4732</span>        builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#aa0946c70ee7eccf4f18403ea0832ab4d">zone</a>(),</div>
<div class="line"><a id="l04733" name="l04733"></a><span class="lineno"> 4733</span>        <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(GenerateTypes(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, &amp;range, num_types)),</div>
<div class="line"><a id="l04734" name="l04734"></a><span class="lineno"> 4734</span>        <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(return_types));</div>
<div class="line"><a id="l04735" name="l04735"></a><span class="lineno"> 4735</span>    function_signatures.push_back(</div>
<div class="line"><a id="l04736" name="l04736"></a><span class="lineno"> 4736</span>        builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61023bf6d16a1b6f2c8f24b008c3ca25">ForceAddSignature</a>(inlinee_sig, kIsFinal));</div>
<div class="line"><a id="l04737" name="l04737"></a><span class="lineno"> 4737</span>  }</div>
<div class="line"><a id="l04738" name="l04738"></a><span class="lineno"> 4738</span> </div>
<div class="line"><a id="l04739" name="l04739"></a><span class="lineno"> 4739</span>  <span class="comment">// Create signature for main function.</span></div>
<div class="line"><a id="l04740" name="l04740"></a><span class="lineno"> 4740</span>  <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* main_sig = CreateSignature(</div>
<div class="line"><a id="l04741" name="l04741"></a><span class="lineno"> 4741</span>      builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#aa0946c70ee7eccf4f18403ea0832ab4d">zone</a>(), <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>({kWasmI32}), <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>({kWasmI32}));</div>
<div class="line"><a id="l04742" name="l04742"></a><span class="lineno"> 4742</span>  function_signatures.push_back(builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61023bf6d16a1b6f2c8f24b008c3ca25">ForceAddSignature</a>(main_sig, kIsFinal));</div>
<div class="line"><a id="l04743" name="l04743"></a><span class="lineno"> 4743</span> </div>
<div class="line"><a id="l04744" name="l04744"></a><span class="lineno"> 4744</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(function_signatures.back().index,</div>
<div class="line"><a id="l04745" name="l04745"></a><span class="lineno"> 4745</span>            num_structs + num_arrays + num_signatures - 1);</div>
<div class="line"><a id="l04746" name="l04746"></a><span class="lineno"> 4746</span> </div>
<div class="line"><a id="l04747" name="l04747"></a><span class="lineno"> 4747</span>  <span class="comment">// This needs to be done after the signatures are added.</span></div>
<div class="line"><a id="l04748" name="l04748"></a><span class="lineno"> 4748</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="liftoff-compiler_8cc.html#a6fe609353c39c0b8953d6309e0797779">num_exceptions</a> = 1 + range.get&lt;uint8_t&gt;() % kMaxExceptions;</div>
<div class="line"><a id="l04749" name="l04749"></a><span class="lineno"> 4749</span>  gen_module.GenerateRandomExceptions(<a class="code hl_variable" href="liftoff-compiler_8cc.html#a6fe609353c39c0b8953d6309e0797779">num_exceptions</a>);</div>
<div class="line"><a id="l04750" name="l04750"></a><span class="lineno"> 4750</span>  StringImports strings = gen_module.AddImportedStringImports();</div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span> </div>
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"> 4752</span>  <span class="comment">// Add functions to module.</span></div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>  std::vector&lt;WasmFunctionBuilder*&gt; functions;</div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>  <a class="code hl_define" href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(num_functions, function_signatures.size());</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span>  functions.reserve(num_functions);</div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span>  <span class="keywordflow">for</span> (uint8_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_functions; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>    functions.push_back(builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a8da3e038d5a48e29c43f77323ec1350b">AddFunction</a>(function_signatures[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]));</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>  }</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span> </div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span>  uint32_t num_entries = num_call_targets + num_inlinees;</div>
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"> 4761</span>  <span class="keywordtype">bool</span> use_table64 = range.get&lt;<span class="keywordtype">bool</span>&gt;();</div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952">AddressType</a> address_type =</div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>      use_table64 ? <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0">AddressType::kI64</a> : <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293">AddressType::kI32</a>;</div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>  uint32_t table_index =</div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span>      builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#aa4180ad4e0376bf66308be47f182e993">AddTable</a>(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">kWasmFuncRef</a>, num_entries, num_entries, address_type);</div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment.html">WasmModuleBuilder::WasmElemSegment</a> segment(</div>
<div class="line"><a id="l04767" name="l04767"></a><span class="lineno"> 4767</span>      zone, <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">kWasmFuncRef</a>, table_index,</div>
<div class="line"><a id="l04768" name="l04768"></a><span class="lineno"> 4768</span>      use_table64 ? <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html">WasmInitExpr</a>(int64_t{0}) : <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html">WasmInitExpr</a>(0));</div>
<div class="line"><a id="l04769" name="l04769"></a><span class="lineno"> 4769</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_entries; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l04770" name="l04770"></a><span class="lineno"> 4770</span>    segment.entries.emplace_back(</div>
<div class="line"><a id="l04771" name="l04771"></a><span class="lineno"> 4771</span>        <a class="code hl_enumvalue" href="structv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment_1_1Entry.html#aa9a4cd6f943d6fcb1327ff9f9aafb5fba97258595290934ad077e7aa18ecbf236">WasmModuleBuilder::WasmElemSegment::Entry::kRefFuncEntry</a>,</div>
<div class="line"><a id="l04772" name="l04772"></a><span class="lineno"> 4772</span>        builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61b5e2d3c4065162cbfa9609801efd9b">NumImportedFunctions</a>() + <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l04773" name="l04773"></a><span class="lineno"> 4773</span>  }</div>
<div class="line"><a id="l04774" name="l04774"></a><span class="lineno"> 4774</span>  builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a522bfa9c8a6295a230542d9252388633">AddElementSegment</a>(std::move(segment));</div>
<div class="line"><a id="l04775" name="l04775"></a><span class="lineno"> 4775</span> </div>
<div class="line"><a id="l04776" name="l04776"></a><span class="lineno"> 4776</span>  gen_module.GenerateRandomTables(array_types, struct_types);</div>
<div class="line"><a id="l04777" name="l04777"></a><span class="lineno"> 4777</span> </div>
<div class="line"><a id="l04778" name="l04778"></a><span class="lineno"> 4778</span>  <span class="comment">// Create global for call target index.</span></div>
<div class="line"><a id="l04779" name="l04779"></a><span class="lineno"> 4779</span>  <span class="comment">// Simplification: This global is used to specify the call target at the deopt</span></div>
<div class="line"><a id="l04780" name="l04780"></a><span class="lineno"> 4780</span>  <span class="comment">// point instead of passing the call target around dynamically.</span></div>
<div class="line"><a id="l04781" name="l04781"></a><span class="lineno"> 4781</span>  uint32_t global_index =</div>
<div class="line"><a id="l04782" name="l04782"></a><span class="lineno"> 4782</span>      builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#afdb010057e3a8a829c445eaf9471b09c">AddExportedGlobal</a>(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">kWasmI32</a>, <span class="keyword">true</span>, <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html">WasmInitExpr</a>(0),</div>
<div class="line"><a id="l04783" name="l04783"></a><span class="lineno"> 4783</span>                                <a class="code hl_function" href="namespacev8_1_1base.html#a9664ae877cd992ea375f1b34c6fa1b1b">base::StaticCharVector</a>(<span class="stringliteral">&quot;call_target_index&quot;</span>));</div>
<div class="line"><a id="l04784" name="l04784"></a><span class="lineno"> 4784</span> </div>
<div class="line"><a id="l04785" name="l04785"></a><span class="lineno"> 4785</span>  <span class="comment">// Create inlinee bodies.</span></div>
<div class="line"><a id="l04786" name="l04786"></a><span class="lineno"> 4786</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_inlinees; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04787" name="l04787"></a><span class="lineno"> 4787</span>    uint32_t declared_func_index = <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> + num_call_targets;</div>
<div class="line"><a id="l04788" name="l04788"></a><span class="lineno"> 4788</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html">WasmFunctionBuilder</a>* f = functions[declared_func_index];</div>
<div class="line"><a id="l04789" name="l04789"></a><span class="lineno"> 4789</span>    DataRange function_range = range.split();</div>
<div class="line"><a id="l04790" name="l04790"></a><span class="lineno"> 4790</span>    BodyGen gen_body(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, f, function_signatures, {}, {}, struct_types,</div>
<div class="line"><a id="l04791" name="l04791"></a><span class="lineno"> 4791</span>                     array_types, strings, &amp;function_range);</div>
<div class="line"><a id="l04792" name="l04792"></a><span class="lineno"> 4792</span>    gen_body.InitializeNonDefaultableLocals(&amp;function_range);</div>
<div class="line"><a id="l04793" name="l04793"></a><span class="lineno"> 4793</span>    <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> == 0) {</div>
<div class="line"><a id="l04794" name="l04794"></a><span class="lineno"> 4794</span>      <span class="comment">// For the inner-most inlinee, emit the deopt point (e.g. a call_ref).</span></div>
<div class="line"><a id="l04795" name="l04795"></a><span class="lineno"> 4795</span>      EmitDeoptAndReturnValues(gen_body, f, target_sig, target_sig_index,</div>
<div class="line"><a id="l04796" name="l04796"></a><span class="lineno"> 4796</span>                               global_index, table_index, use_table64,</div>
<div class="line"><a id="l04797" name="l04797"></a><span class="lineno"> 4797</span>                               &amp;function_range);</div>
<div class="line"><a id="l04798" name="l04798"></a><span class="lineno"> 4798</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04799" name="l04799"></a><span class="lineno"> 4799</span>      <span class="comment">// All other inlinees call the previous inlinee.</span></div>
<div class="line"><a id="l04800" name="l04800"></a><span class="lineno"> 4800</span>      uint32_t callee_declared_index = declared_func_index - 1;</div>
<div class="line"><a id="l04801" name="l04801"></a><span class="lineno"> 4801</span>      EmitCallAndReturnValues(gen_body, f, functions[callee_declared_index],</div>
<div class="line"><a id="l04802" name="l04802"></a><span class="lineno"> 4802</span>                              table_index, use_table64, &amp;function_range);</div>
<div class="line"><a id="l04803" name="l04803"></a><span class="lineno"> 4803</span>    }</div>
<div class="line"><a id="l04804" name="l04804"></a><span class="lineno"> 4804</span>    f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#afcf948a734fad5c6b0d2891d5a0aa2fe">Emit</a>(kExprEnd);</div>
<div class="line"><a id="l04805" name="l04805"></a><span class="lineno"> 4805</span>    <span class="keyword">auto</span> buffer = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ae9377ec6a07122d265a8ed3d458a3240">AllocateVector</a>&lt;<span class="keywordtype">char</span>&gt;(32);</div>
<div class="line"><a id="l04806" name="l04806"></a><span class="lineno"> 4806</span>    <span class="keywordtype">size_t</span> len = <a class="code hl_function" href="namespacev8_1_1base.html#a36caaf43a3f7761ae90d699b961f0239">base::SNPrintF</a>(buffer, <span class="stringliteral">&quot;inlinee_%i&quot;</span>, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l04807" name="l04807"></a><span class="lineno"> 4807</span>    builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a1d6a755038037b7876f2481251117830">AddExport</a>({buffer.begin(), len}, f);</div>
<div class="line"><a id="l04808" name="l04808"></a><span class="lineno"> 4808</span>    inlinees.emplace_back(buffer.begin(), len);</div>
<div class="line"><a id="l04809" name="l04809"></a><span class="lineno"> 4809</span>  }</div>
<div class="line"><a id="l04810" name="l04810"></a><span class="lineno"> 4810</span> </div>
<div class="line"><a id="l04811" name="l04811"></a><span class="lineno"> 4811</span>  <span class="comment">// Create main function body.</span></div>
<div class="line"><a id="l04812" name="l04812"></a><span class="lineno"> 4812</span>  {</div>
<div class="line"><a id="l04813" name="l04813"></a><span class="lineno"> 4813</span>    uint32_t declared_func_index = num_functions - 1;</div>
<div class="line"><a id="l04814" name="l04814"></a><span class="lineno"> 4814</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html">WasmFunctionBuilder</a>* f = functions[declared_func_index];</div>
<div class="line"><a id="l04815" name="l04815"></a><span class="lineno"> 4815</span>    DataRange function_range = range.split();</div>
<div class="line"><a id="l04816" name="l04816"></a><span class="lineno"> 4816</span>    BodyGen gen_body(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, f, function_signatures, {}, {}, struct_types,</div>
<div class="line"><a id="l04817" name="l04817"></a><span class="lineno"> 4817</span>                     array_types, strings, &amp;function_range);</div>
<div class="line"><a id="l04818" name="l04818"></a><span class="lineno"> 4818</span>    gen_body.InitializeNonDefaultableLocals(&amp;function_range);</div>
<div class="line"><a id="l04819" name="l04819"></a><span class="lineno"> 4819</span>    <span class="comment">// Store the call target</span></div>
<div class="line"><a id="l04820" name="l04820"></a><span class="lineno"> 4820</span>    f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#aac7d473733a21340a8015d23f9ad6d62">EmitWithU32V</a>(kExprLocalGet, 0);</div>
<div class="line"><a id="l04821" name="l04821"></a><span class="lineno"> 4821</span>    f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#aac7d473733a21340a8015d23f9ad6d62">EmitWithU32V</a>(kExprGlobalSet, 0);</div>
<div class="line"><a id="l04822" name="l04822"></a><span class="lineno"> 4822</span>    <span class="comment">// Call inlinee or emit deopt.</span></div>
<div class="line"><a id="l04823" name="l04823"></a><span class="lineno"> 4823</span>    <span class="keywordflow">if</span> (num_inlinees == 0) {</div>
<div class="line"><a id="l04824" name="l04824"></a><span class="lineno"> 4824</span>      <span class="comment">// If we don&#39;t have any inlinees, directly emit the deopt point.</span></div>
<div class="line"><a id="l04825" name="l04825"></a><span class="lineno"> 4825</span>      EmitDeoptAndReturnValues(gen_body, f, target_sig, target_sig_index,</div>
<div class="line"><a id="l04826" name="l04826"></a><span class="lineno"> 4826</span>                               global_index, table_index, use_table64,</div>
<div class="line"><a id="l04827" name="l04827"></a><span class="lineno"> 4827</span>                               &amp;function_range);</div>
<div class="line"><a id="l04828" name="l04828"></a><span class="lineno"> 4828</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l04829" name="l04829"></a><span class="lineno"> 4829</span>      <span class="comment">// Otherwise call the &quot;outer-most&quot; inlinee.</span></div>
<div class="line"><a id="l04830" name="l04830"></a><span class="lineno"> 4830</span>      uint32_t callee_declared_index = declared_func_index - 1;</div>
<div class="line"><a id="l04831" name="l04831"></a><span class="lineno"> 4831</span>      EmitCallAndReturnValues(gen_body, f, functions[callee_declared_index],</div>
<div class="line"><a id="l04832" name="l04832"></a><span class="lineno"> 4832</span>                              table_index, use_table64, &amp;function_range);</div>
<div class="line"><a id="l04833" name="l04833"></a><span class="lineno"> 4833</span>    }</div>
<div class="line"><a id="l04834" name="l04834"></a><span class="lineno"> 4834</span> </div>
<div class="line"><a id="l04835" name="l04835"></a><span class="lineno"> 4835</span>    f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#afcf948a734fad5c6b0d2891d5a0aa2fe">Emit</a>(kExprEnd);</div>
<div class="line"><a id="l04836" name="l04836"></a><span class="lineno"> 4836</span>    builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a1d6a755038037b7876f2481251117830">AddExport</a>(<a class="code hl_function" href="namespacev8_1_1base.html#a9664ae877cd992ea375f1b34c6fa1b1b">base::StaticCharVector</a>(<span class="stringliteral">&quot;main&quot;</span>), f);</div>
<div class="line"><a id="l04837" name="l04837"></a><span class="lineno"> 4837</span>  }</div>
<div class="line"><a id="l04838" name="l04838"></a><span class="lineno"> 4838</span> </div>
<div class="line"><a id="l04839" name="l04839"></a><span class="lineno"> 4839</span>  <span class="comment">// Create call target bodies.</span></div>
<div class="line"><a id="l04840" name="l04840"></a><span class="lineno"> 4840</span>  <span class="comment">// This is done last as we care much less about the content of these</span></div>
<div class="line"><a id="l04841" name="l04841"></a><span class="lineno"> 4841</span>  <span class="comment">// functions, so it&#39;s less of an issue if there aren&#39;t (m)any random bytes</span></div>
<div class="line"><a id="l04842" name="l04842"></a><span class="lineno"> 4842</span>  <span class="comment">// left.</span></div>
<div class="line"><a id="l04843" name="l04843"></a><span class="lineno"> 4843</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_call_targets; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l04844" name="l04844"></a><span class="lineno"> 4844</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html">WasmFunctionBuilder</a>* f = functions[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l04845" name="l04845"></a><span class="lineno"> 4845</span>    DataRange function_range = range.split();</div>
<div class="line"><a id="l04846" name="l04846"></a><span class="lineno"> 4846</span>    BodyGen gen_body(<a class="code hl_variable" href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a>, f, function_signatures, {}, {}, struct_types,</div>
<div class="line"><a id="l04847" name="l04847"></a><span class="lineno"> 4847</span>                     array_types, strings, &amp;function_range);</div>
<div class="line"><a id="l04848" name="l04848"></a><span class="lineno"> 4848</span>    <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">FunctionSig</a>* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> = f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#a68ec12c4b5e5f5c12d7c6130d84c427b">signature</a>();</div>
<div class="line"><a id="l04849" name="l04849"></a><span class="lineno"> 4849</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const ValueType&gt;</a> target_return_types(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;returns().begin(),</div>
<div class="line"><a id="l04850" name="l04850"></a><span class="lineno"> 4850</span>                                                      <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count());</div>
<div class="line"><a id="l04851" name="l04851"></a><span class="lineno"> 4851</span>    gen_body.InitializeNonDefaultableLocals(&amp;function_range);</div>
<div class="line"><a id="l04852" name="l04852"></a><span class="lineno"> 4852</span>    gen_body.Generate(target_return_types, &amp;function_range);</div>
<div class="line"><a id="l04853" name="l04853"></a><span class="lineno"> 4853</span> </div>
<div class="line"><a id="l04854" name="l04854"></a><span class="lineno"> 4854</span>    f-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#afcf948a734fad5c6b0d2891d5a0aa2fe">Emit</a>(kExprEnd);</div>
<div class="line"><a id="l04855" name="l04855"></a><span class="lineno"> 4855</span>    <span class="keyword">auto</span> buffer = zone-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Zone.html#ae9377ec6a07122d265a8ed3d458a3240">AllocateVector</a>&lt;<span class="keywordtype">char</span>&gt;(32);</div>
<div class="line"><a id="l04856" name="l04856"></a><span class="lineno"> 4856</span>    <span class="keywordtype">size_t</span> len = <a class="code hl_function" href="namespacev8_1_1base.html#a36caaf43a3f7761ae90d699b961f0239">base::SNPrintF</a>(buffer, <span class="stringliteral">&quot;callee_%i&quot;</span>, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l04857" name="l04857"></a><span class="lineno"> 4857</span>    builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a1d6a755038037b7876f2481251117830">AddExport</a>({buffer.begin(), len}, f);</div>
<div class="line"><a id="l04858" name="l04858"></a><span class="lineno"> 4858</span>    callees.emplace_back(buffer.begin(), len);</div>
<div class="line"><a id="l04859" name="l04859"></a><span class="lineno"> 4859</span>  }</div>
<div class="line"><a id="l04860" name="l04860"></a><span class="lineno"> 4860</span> </div>
<div class="line"><a id="l04861" name="l04861"></a><span class="lineno"> 4861</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1ZoneBuffer.html">ZoneBuffer</a> buffer{zone};</div>
<div class="line"><a id="l04862" name="l04862"></a><span class="lineno"> 4862</span>  builder.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a6035c34cf52b42d5a417e086f265082a">WriteTo</a>(&amp;buffer);</div>
<div class="line"><a id="l04863" name="l04863"></a><span class="lineno"> 4863</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(buffer);</div>
<div class="line"><a id="l04864" name="l04864"></a><span class="lineno"> 4864</span>}</div>
</div>
<div class="line"><a id="l04865" name="l04865"></a><span class="lineno"> 4865</span> </div>
<div class="line"><a id="l04866" name="l04866"></a><span class="lineno"> 4866</span>}  <span class="comment">// namespace v8::internal::wasm::fuzzing</span></div>
</div>
<div class="ttc" id="aapi_8cc_html_a87cb119678e603084928af555fe13e36"><div class="ttname"><a href="api_8cc.html#a87cb119678e603084928af555fe13e36">data_</a></div><div class="ttdeci">const char * data_</div><div class="ttdef"><b>Definition</b> <a href="api_8cc_source.html#l00673">api.cc:673</a></div></div>
<div class="ttc" id="aasm-types_8cc_html_a3ec7489f692d014c845cc17e64456793"><div class="ttname"><a href="asm-types_8cc.html#a3ec7489f692d014c845cc17e64456793">Zone</a></div><div class="ttdeci">friend Zone</div><div class="ttdef"><b>Definition</b> <a href="asm-types_8cc_source.html#l00195">asm-types.cc:195</a></div></div>
<div class="ttc" id="abase_2ieee754_8cc_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="base_2ieee754_8cc.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div></div>
<div class="ttc" id="abuiltins_8cc_html_a34a6b28885d79bbc20d4110313cb28be"><div class="ttname"><a href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a></div><div class="ttdeci">int16_t parameter_count</div><div class="ttdef"><b>Definition</b> <a href="builtins_8cc_source.html#l00067">builtins.cc:67</a></div></div>
<div class="ttc" id="abuiltins_8cc_html_a3cd87c38d55640b6d2bb8fd20580d2ab"><div class="ttname"><a href="builtins_8cc.html#a3cd87c38d55640b6d2bb8fd20580d2ab">data</a></div><div class="ttdeci">union v8::internal::@332::BuiltinMetadata::KindSpecificData data</div></div>
<div class="ttc" id="abuiltins_8cc_html_adc156a864d6037c4df1b276073ae7277"><div class="ttname"><a href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a></div><div class="ttdeci">Builtins::Kind kind</div><div class="ttdef"><b>Definition</b> <a href="builtins_8cc_source.html#l00040">builtins.cc:40</a></div></div>
<div class="ttc" id="aclass-debug-reader-generator_8cc_html_aede818ff693a0360e722300214ad6a52"><div class="ttname"><a href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a></div><div class="ttdeci">SourcePosition pos</div><div class="ttdef"><b>Definition</b> <a href="class-debug-reader-generator_8cc_source.html#l00034">class-debug-reader-generator.cc:34</a></div></div>
<div class="ttc" id="aclassget_html"><div class="ttname"><a href="classget.html">get</a></div></div>
<div class="ttc" id="aclasssize_html"><div class="ttname"><a href="classsize.html">size</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html">v8::base::Vector</a></div><div class="ttdef"><b>Definition</b> <a href="zone-list_8h_source.html#l00015">zone-list.h:15</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a2a7f93a33a4938bd73b628789f214d3d"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a2a7f93a33a4938bd73b628789f214d3d">v8::base::Vector::SubVector</a></div><div class="ttdeci">Vector&lt; T &gt; SubVector(size_t from, size_t to) const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00041">vector.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a8f91dff816409fb9bceaa94c6caeec32"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">v8::base::Vector::size</a></div><div class="ttdeci">constexpr size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00070">vector.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_aab9b38b61ae9c6ca2c00f0f3f579e088"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#aab9b38b61ae9c6ca2c00f0f3f579e088">v8::base::Vector::SubVectorFrom</a></div><div class="ttdeci">Vector&lt; T &gt; SubVectorFrom(size_t from) const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00046">vector.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FixedSizeSignature_html_ace1846202c96e97bb1df2ef87a55973d"><div class="ttname"><a href="classv8_1_1internal_1_1FixedSizeSignature.html#ace1846202c96e97bb1df2ef87a55973d">v8::internal::FixedSizeSignature::Returns</a></div><div class="ttdeci">auto Returns(ReturnTypes... return_types) const</div><div class="ttdef"><b>Definition</b> <a href="signature_8h_source.html#l00166">signature.h:166</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SignatureBuilder_html"><div class="ttname"><a href="classv8_1_1internal_1_1SignatureBuilder.html">v8::internal::SignatureBuilder</a></div><div class="ttdef"><b>Definition</b> <a href="signature_8h_source.html#l00018">signature.h:18</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SignatureBuilder_html_a1cf0a0a868c1403005cbc43a1a23fb6a"><div class="ttname"><a href="classv8_1_1internal_1_1SignatureBuilder.html#a1cf0a0a868c1403005cbc43a1a23fb6a">v8::internal::SignatureBuilder::AddReturn</a></div><div class="ttdeci">void AddReturn(T val)</div><div class="ttdef"><b>Definition</b> <a href="signature_8h_source.html#l00042">signature.h:42</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SignatureBuilder_html_aa4aa5ec8b8630f5798ef6cf00011d8ee"><div class="ttname"><a href="classv8_1_1internal_1_1SignatureBuilder.html#aa4aa5ec8b8630f5798ef6cf00011d8ee">v8::internal::SignatureBuilder::Get</a></div><div class="ttdeci">SigT * Get() const</div><div class="ttdef"><b>Definition</b> <a href="signature_8h_source.html#l00064">signature.h:64</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Signature_html"><div class="ttname"><a href="classv8_1_1internal_1_1Signature.html">v8::internal::Signature&lt; ValueType &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Signature_html_a1280bc48b23c97cbf6d4498145693440"><div class="ttname"><a href="classv8_1_1internal_1_1Signature.html#a1280bc48b23c97cbf6d4498145693440">v8::internal::Signature::return_count</a></div><div class="ttdeci">size_t return_count() const</div><div class="ttdef"><b>Definition</b> <a href="signature_8h_source.html#l00093">signature.h:93</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Signature_html_a60e0b4e3ca49c39e4392945d26e24b3f"><div class="ttname"><a href="classv8_1_1internal_1_1Signature.html#a60e0b4e3ca49c39e4392945d26e24b3f">v8::internal::Signature::GetReturn</a></div><div class="ttdeci">T GetReturn(size_t index=0) const</div><div class="ttdef"><b>Definition</b> <a href="signature_8h_source.html#l00103">signature.h:103</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Signature_html_a942da5a0719940e9f38423bf33b94f2d"><div class="ttname"><a href="classv8_1_1internal_1_1Signature.html#a942da5a0719940e9f38423bf33b94f2d">v8::internal::Signature&lt; ValueType &gt;::Builder</a></div><div class="ttdeci">SignatureBuilder&lt; Signature&lt; T &gt;, T &gt; Builder</div><div class="ttdef"><b>Definition</b> <a href="signature_8h_source.html#l00130">signature.h:130</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Zone_html"><div class="ttname"><a href="classv8_1_1internal_1_1Zone.html">v8::internal::Zone</a></div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00043">zone.h:43</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Zone_html_ad0db66a23649463e572b49f50973e779"><div class="ttname"><a href="classv8_1_1internal_1_1Zone.html#ad0db66a23649463e572b49f50973e779">v8::internal::Zone::New</a></div><div class="ttdeci">T * New(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00114">zone.h:114</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Zone_html_ae9377ec6a07122d265a8ed3d458a3240"><div class="ttname"><a href="classv8_1_1internal_1_1Zone.html#ae9377ec6a07122d265a8ed3d458a3240">v8::internal::Zone::AllocateVector</a></div><div class="ttdeci">base::Vector&lt; T &gt; AllocateVector(size_t length)</div><div class="ttdef"><b>Definition</b> <a href="zone_8h_source.html#l00136">zone.h:136</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ArrayType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ArrayType.html">v8::internal::wasm::ArrayType</a></div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00275">struct-types.h:275</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ArrayType_html_a33942a61683c7b83fe86986a26333b1a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ArrayType.html#a33942a61683c7b83fe86986a26333b1a">v8::internal::wasm::ArrayType::element_type</a></div><div class="ttdeci">ValueType element_type() const</div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00287">struct-types.h:287</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787">v8::internal::wasm::HeapTypeBase::Representation</a></div><div class="ttdeci">Representation</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00105">value-type.h:105</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a01edec79a04fce2edabc7f5f9b6f2305"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a01edec79a04fce2edabc7f5f9b6f2305">v8::internal::wasm::HeapTypeBase::kExtern</a></div><div class="ttdeci">@ kExtern</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00112">value-type.h:112</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a12fc36cebc5486d34bcec8ba9adbc1c6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a12fc36cebc5486d34bcec8ba9adbc1c6">v8::internal::wasm::HeapTypeBase::kAny</a></div><div class="ttdeci">@ kAny</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00111">value-type.h:111</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a52cfdbb770d3ad5e7d8c11792560de20"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a52cfdbb770d3ad5e7d8c11792560de20">v8::internal::wasm::HeapTypeBase::kI31</a></div><div class="ttdeci">@ kI31</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00108">value-type.h:108</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a5621b910055ccbf8fe66df77cf288fc6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a5621b910055ccbf8fe66df77cf288fc6">v8::internal::wasm::HeapTypeBase::kStruct</a></div><div class="ttdeci">@ kStruct</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00109">value-type.h:109</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a57169601682149a6b8bebd68e0e0f9a7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a57169601682149a6b8bebd68e0e0f9a7">v8::internal::wasm::HeapTypeBase::kArray</a></div><div class="ttdeci">@ kArray</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00110">value-type.h:110</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a747949a8c02d366db421957a9a737347"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a747949a8c02d366db421957a9a737347">v8::internal::wasm::HeapTypeBase::kEq</a></div><div class="ttdeci">@ kEq</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00107">value-type.h:107</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a8668d98b226023d9ccef4c77f2a722e3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a8668d98b226023d9ccef4c77f2a722e3">v8::internal::wasm::HeapTypeBase::kFunc</a></div><div class="ttdeci">@ kFunc</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00106">value-type.h:106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787a987b6ca446d2306e8506f82869ddac97"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787a987b6ca446d2306e8506f82869ddac97">v8::internal::wasm::HeapTypeBase::kNoExtern</a></div><div class="ttdeci">@ kNoExtern</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00123">value-type.h:123</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787ada6888bc410e07dbaf1f0b45eeb22d04"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787ada6888bc410e07dbaf1f0b45eeb22d04">v8::internal::wasm::HeapTypeBase::kNoFunc</a></div><div class="ttdeci">@ kNoFunc</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00122">value-type.h:122</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1HeapTypeBase_html_a463a41f5a96db5c80819e14e5461d787addd08e9014cea077cc28ab6cbcbff986"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1HeapTypeBase.html#a463a41f5a96db5c80819e14e5461d787addd08e9014cea077cc28ab6cbcbff986">v8::internal::wasm::HeapTypeBase::kNone</a></div><div class="ttdeci">@ kNone</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00121">value-type.h:121</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl.html">v8::internal::wasm::StructTypeBase::BuilderImpl</a></div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00115">struct-types.h:115</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl_html_ab602a0028414bcde6fc2f51d1f0c8de6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl.html#ab602a0028414bcde6fc2f51d1f0c8de6">v8::internal::wasm::StructTypeBase::BuilderImpl::AddField</a></div><div class="ttdeci">void AddField(ValueTypeSubclass type, bool mutability, uint32_t offset=0)</div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00132">struct-types.h:132</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl_html_afadee1c657fc8eca3129428e50a72cbb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StructTypeBase_1_1BuilderImpl.html#afadee1c657fc8eca3129428e50a72cbb">v8::internal::wasm::StructTypeBase::BuilderImpl::Build</a></div><div class="ttdeci">Subclass * Build(ComputeOffsets compute_offsets=kComputeOffsets)</div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00152">struct-types.h:152</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StructTypeBase_html_a1927b0b6f2449f663e27c9fd7b5eed78"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StructTypeBase.html#a1927b0b6f2449f663e27c9fd7b5eed78">v8::internal::wasm::StructTypeBase::mutability</a></div><div class="ttdeci">bool mutability(uint32_t index) const</div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00036">struct-types.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StructTypeBase_html_ac0b87d48dd4e3ca9e711b70d77309035"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StructTypeBase.html#ac0b87d48dd4e3ca9e711b70d77309035">v8::internal::wasm::StructTypeBase::field_count</a></div><div class="ttdeci">uint32_t field_count() const</div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00029">struct-types.h:29</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StructType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StructType.html">v8::internal::wasm::StructType</a></div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00199">struct-types.h:199</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1StructType_html_a0befc03840ccdf98e89b868ecaf154c7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1StructType.html#a0befc03840ccdf98e89b868ecaf154c7">v8::internal::wasm::StructType::field</a></div><div class="ttdeci">ValueType field(uint32_t index) const</div><div class="ttdef"><b>Definition</b> <a href="struct-types_8h_source.html#l00217">struct-types.h:217</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueType_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueType.html">v8::internal::wasm::ValueType</a></div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00932">value-type.h:932</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ValueType_html_a9ea361d96891d9c418a34f7bfabfb2ef"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ValueType.html#a9ea361d96891d9c418a34f7bfabfb2ef">v8::internal::wasm::ValueType::RefMaybeNull</a></div><div class="ttdeci">static constexpr ValueType RefMaybeNull(HeapType::Representation heap_type, Nullability nullability)</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00962">value-type.h:962</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html">v8::internal::wasm::WasmFunctionBuilder</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00168">wasm-module-builder.h:168</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder_html_a27e687e058a028ed4a7e081525931368"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#a27e687e058a028ed4a7e081525931368">v8::internal::wasm::WasmFunctionBuilder::EmitFromInitializerExpression</a></div><div class="ttdeci">void EmitFromInitializerExpression(const WasmInitExpr &amp;init_expr)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00333">wasm-module-builder.cc:333</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder_html_a68ec12c4b5e5f5c12d7c6130d84c427b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#a68ec12c4b5e5f5c12d7c6130d84c427b">v8::internal::wasm::WasmFunctionBuilder::signature</a></div><div class="ttdeci">const FunctionSig * signature() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00562">wasm-module-builder.h:562</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder_html_aac7d473733a21340a8015d23f9ad6d62"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#aac7d473733a21340a8015d23f9ad6d62">v8::internal::wasm::WasmFunctionBuilder::EmitWithU32V</a></div><div class="ttdeci">void EmitWithU32V(WasmOpcode opcode, uint32_t immediate)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00281">wasm-module-builder.cc:281</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder_html_afcf948a734fad5c6b0d2891d5a0aa2fe"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmFunctionBuilder.html#afcf948a734fad5c6b0d2891d5a0aa2fe">v8::internal::wasm::WasmFunctionBuilder::Emit</a></div><div class="ttdeci">void Emit(WasmOpcode opcode)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00246">wasm-module-builder.cc:246</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html">v8::internal::wasm::WasmInitExpr</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00026">wasm-init-expr.h:26</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_a18fa66dd3e7ffd8f003d787b9a77b05b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a18fa66dd3e7ffd8f003d787b9a77b05b">v8::internal::wasm::WasmInitExpr::RefI31</a></div><div class="ttdeci">static WasmInitExpr RefI31(Zone *zone, WasmInitExpr value)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00145">wasm-init-expr.h:145</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_a4f0ce74bdf879a60982f0e17b292379e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a4f0ce74bdf879a60982f0e17b292379e">v8::internal::wasm::WasmInitExpr::AnyConvertExtern</a></div><div class="ttdeci">static WasmInitExpr AnyConvertExtern(Zone *zone, WasmInitExpr arg)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00156">wasm-init-expr.h:156</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_a55febed3c02fcbaa3c2cbf3569b0ca08"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a55febed3c02fcbaa3c2cbf3569b0ca08">v8::internal::wasm::WasmInitExpr::GlobalGet</a></div><div class="ttdeci">static WasmInitExpr GlobalGet(uint32_t index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00088">wasm-init-expr.h:88</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_a67f960c7706731df16e00dda9c237801"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a67f960c7706731df16e00dda9c237801">v8::internal::wasm::WasmInitExpr::ExternConvertAny</a></div><div class="ttdeci">static WasmInitExpr ExternConvertAny(Zone *zone, WasmInitExpr arg)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00160">wasm-init-expr.h:160</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_a8f987b4313f95fd7fa01e4fee905c7bc"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#a8f987b4313f95fd7fa01e4fee905c7bc">v8::internal::wasm::WasmInitExpr::StructNewDefault</a></div><div class="ttdeci">static WasmInitExpr StructNewDefault(ModuleTypeIndex index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00118">wasm-init-expr.h:118</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_aa938ae840cb1687762a391bd85b64d0c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#aa938ae840cb1687762a391bd85b64d0c">v8::internal::wasm::WasmInitExpr::ArrayNewDefault</a></div><div class="ttdeci">static WasmInitExpr ArrayNewDefault(Zone *zone, ModuleTypeIndex index, WasmInitExpr length)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00131">wasm-init-expr.h:131</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ab6ca63493459621f9bd223e78dd4f0ff"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ff">v8::internal::wasm::WasmInitExpr::Operator</a></div><div class="ttdeci">Operator</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00028">wasm-init-expr.h:28</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ab6ca63493459621f9bd223e78dd4f0ffa6265b55dcf7cc59380c802cfdad058e5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffa6265b55dcf7cc59380c802cfdad058e5">v8::internal::wasm::WasmInitExpr::kI64Add</a></div><div class="ttdeci">@ kI64Add</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00038">wasm-init-expr.h:38</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ab6ca63493459621f9bd223e78dd4f0ffa68da8c84daf848c2b299bbe535a3aa9e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffa68da8c84daf848c2b299bbe535a3aa9e">v8::internal::wasm::WasmInitExpr::kI32Sub</a></div><div class="ttdeci">@ kI32Sub</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00036">wasm-init-expr.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ab6ca63493459621f9bd223e78dd4f0ffa81c3c7cde1a07237722733f27da07e0f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffa81c3c7cde1a07237722733f27da07e0f">v8::internal::wasm::WasmInitExpr::kI32Add</a></div><div class="ttdeci">@ kI32Add</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00035">wasm-init-expr.h:35</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ab6ca63493459621f9bd223e78dd4f0ffaafd80be1e45817a29e2976a95dcb5df9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffaafd80be1e45817a29e2976a95dcb5df9">v8::internal::wasm::WasmInitExpr::kI64Sub</a></div><div class="ttdeci">@ kI64Sub</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00039">wasm-init-expr.h:39</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ab6ca63493459621f9bd223e78dd4f0ffac58bae28d6cb7050783b59f7e082ff3e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffac58bae28d6cb7050783b59f7e082ff3e">v8::internal::wasm::WasmInitExpr::kI32Mul</a></div><div class="ttdeci">@ kI32Mul</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00037">wasm-init-expr.h:37</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ab6ca63493459621f9bd223e78dd4f0ffafb4e80bcaf8b7877a7d7779b42069c2c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ab6ca63493459621f9bd223e78dd4f0ffafb4e80bcaf8b7877a7d7779b42069c2c">v8::internal::wasm::WasmInitExpr::kI64Mul</a></div><div class="ttdeci">@ kI64Mul</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00040">wasm-init-expr.h:40</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ac151143d7da3e295c0a6b8d100adb1f3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ac151143d7da3e295c0a6b8d100adb1f3">v8::internal::wasm::WasmInitExpr::ArrayNewFixed</a></div><div class="ttdeci">static WasmInitExpr ArrayNewFixed(ModuleTypeIndex index, ZoneVector&lt; WasmInitExpr &gt; *elements)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00138">wasm-init-expr.h:138</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ad79cdde572cc43f611168d8f7a65f236"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ad79cdde572cc43f611168d8f7a65f236">v8::internal::wasm::WasmInitExpr::ArrayNew</a></div><div class="ttdeci">static WasmInitExpr ArrayNew(Zone *zone, ModuleTypeIndex index, WasmInitExpr initial, WasmInitExpr length)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00124">wasm-init-expr.h:124</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_adae152807b2aaf24b953c477c5b2cf2f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#adae152807b2aaf24b953c477c5b2cf2f">v8::internal::wasm::WasmInitExpr::Binop</a></div><div class="ttdeci">static WasmInitExpr Binop(Zone *zone, Operator op, WasmInitExpr lhs, WasmInitExpr rhs)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00081">wasm-init-expr.h:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_ae5ec317a68c4e0d1f89ee37d5acc93e0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#ae5ec317a68c4e0d1f89ee37d5acc93e0">v8::internal::wasm::WasmInitExpr::StructNew</a></div><div class="ttdeci">static WasmInitExpr StructNew(ModuleTypeIndex index, ZoneVector&lt; WasmInitExpr &gt; *elements)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00111">wasm-init-expr.h:111</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_af1a88dbeb0a15e1c875a637eed156247"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#af1a88dbeb0a15e1c875a637eed156247">v8::internal::wasm::WasmInitExpr::RefFuncConst</a></div><div class="ttdeci">static WasmInitExpr RefFuncConst(uint32_t index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00094">wasm-init-expr.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmInitExpr_html_af1feef98b93722c701ac36d4367f9088"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmInitExpr.html#af1feef98b93722c701ac36d4367f9088">v8::internal::wasm::WasmInitExpr::RefNullConst</a></div><div class="ttdeci">static WasmInitExpr RefNullConst(HeapType::Representation heap_type)</div><div class="ttdef"><b>Definition</b> <a href="wasm-init-expr_8h_source.html#l00100">wasm-init-expr.h:100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment.html">v8::internal::wasm::WasmModuleBuilder::WasmElemSegment</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00264">wasm-module-builder.h:264</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html">v8::internal::wasm::WasmModuleBuilder</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00256">wasm-module-builder.h:256</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a123e29e1e7592cd82ca06bde50c3a380"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a123e29e1e7592cd82ca06bde50c3a380">v8::internal::wasm::WasmModuleBuilder::GetArrayType</a></div><div class="ttdeci">const ArrayType * GetArrayType(uint32_t index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00437">wasm-module-builder.h:437</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a1d6a755038037b7876f2481251117830"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a1d6a755038037b7876f2481251117830">v8::internal::wasm::WasmModuleBuilder::AddExport</a></div><div class="ttdeci">void AddExport(base::Vector&lt; const char &gt; name, ImportExportKindCode kind, uint32_t index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00624">wasm-module-builder.cc:624</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a3cd1606260402fbb478c6f27bdcd9225"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a3cd1606260402fbb478c6f27bdcd9225">v8::internal::wasm::WasmModuleBuilder::GetStructType</a></div><div class="ttdeci">const StructType * GetStructType(uint32_t index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00426">wasm-module-builder.h:426</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a468b8abeb8298088bc0c865eeb0ca734"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a468b8abeb8298088bc0c865eeb0ca734">v8::internal::wasm::WasmModuleBuilder::AddArrayType</a></div><div class="ttdeci">ModuleTypeIndex AddArrayType(ArrayType *type, bool is_final, ModuleTypeIndex supertype=kNoSuperType)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00510">wasm-module-builder.cc:510</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a522bfa9c8a6295a230542d9252388633"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a522bfa9c8a6295a230542d9252388633">v8::internal::wasm::WasmModuleBuilder::AddElementSegment</a></div><div class="ttdeci">uint32_t AddElementSegment(WasmElemSegment segment)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00584">wasm-module-builder.cc:584</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a6035c34cf52b42d5a417e086f265082a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a6035c34cf52b42d5a417e086f265082a">v8::internal::wasm::WasmModuleBuilder::WriteTo</a></div><div class="ttdeci">void WriteTo(ZoneBuffer *buffer) const</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00657">wasm-module-builder.cc:657</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a61023bf6d16a1b6f2c8f24b008c3ca25"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61023bf6d16a1b6f2c8f24b008c3ca25">v8::internal::wasm::WasmModuleBuilder::ForceAddSignature</a></div><div class="ttdeci">ModuleTypeIndex ForceAddSignature(const FunctionSig *sig, bool is_final, ModuleTypeIndex supertype=kNoSuperType)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00478">wasm-module-builder.cc:478</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a61b5e2d3c4065162cbfa9609801efd9b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a61b5e2d3c4065162cbfa9609801efd9b">v8::internal::wasm::WasmModuleBuilder::NumImportedFunctions</a></div><div class="ttdeci">int NumImportedFunctions()</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00459">wasm-module-builder.h:459</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_a8da3e038d5a48e29c43f77323ec1350b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#a8da3e038d5a48e29c43f77323ec1350b">v8::internal::wasm::WasmModuleBuilder::AddFunction</a></div><div class="ttdeci">WasmFunctionBuilder * AddFunction(const FunctionSig *sig=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00446">wasm-module-builder.cc:446</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_aa0946c70ee7eccf4f18403ea0832ab4d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#aa0946c70ee7eccf4f18403ea0832ab4d">v8::internal::wasm::WasmModuleBuilder::zone</a></div><div class="ttdeci">Zone * zone()</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00405">wasm-module-builder.h:405</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_aa4180ad4e0376bf66308be47f182e993"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#aa4180ad4e0376bf66308be47f182e993">v8::internal::wasm::WasmModuleBuilder::AddTable</a></div><div class="ttdeci">uint32_t AddTable(ValueType type, uint32_t min_size)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00530">wasm-module-builder.cc:530</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_ab063ad0776688b47e4006855f8e5b070"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#ab063ad0776688b47e4006855f8e5b070">v8::internal::wasm::WasmModuleBuilder::AddStructType</a></div><div class="ttdeci">ModuleTypeIndex AddStructType(StructType *type, bool is_final, ModuleTypeIndex supertype=kNoSuperType)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00502">wasm-module-builder.cc:502</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_html_afdb010057e3a8a829c445eaf9471b09c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleBuilder.html#afdb010057e3a8a829c445eaf9471b09c">v8::internal::wasm::WasmModuleBuilder::AddExportedGlobal</a></div><div class="ttdeci">uint32_t AddExportedGlobal(ValueType type, bool mutability, WasmInitExpr init, base::Vector&lt; const char &gt; name)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8cc_source.html#l00631">wasm-module-builder.cc:631</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1ZoneBuffer_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1ZoneBuffer.html">v8::internal::wasm::ZoneBuffer</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00028">wasm-module-builder.h:28</a></div></div>
<div class="ttc" id="acode-generator-arm_8cc_html_a4979f6e7e64e9ee56f4229d03fa20c69"><div class="ttname"><a href="code-generator-arm_8cc.html#a4979f6e7e64e9ee56f4229d03fa20c69">zone_</a></div><div class="ttdeci">Zone * zone_</div><div class="ttdef"><b>Definition</b> <a href="code-generator-arm_8cc_source.html#l00230">code-generator-arm.cc:230</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_a37722a150250e2a5a98e5e0d11e53449"><div class="ttname"><a href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a></div><div class="ttdeci">int start</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00595">debug-coverage.cc:595</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_af3cb81a0a1a11ad602fa7f70b7f25571"><div class="ttname"><a href="flag-definitions_8h.html#af3cb81a0a1a11ad602fa7f70b7f25571">random</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after random(0, X) cppgc allocations.&quot;) DEFINE_INT(retain_maps_for_n_gc</div></div>
<div class="ttc" id="afunction-body-decoder_8h_html"><div class="ttname"><a href="function-body-decoder_8h.html">function-body-decoder.h</a></div></div>
<div class="ttc" id="agc-extension_8cc_html_a8b2d6638d6a0333705428ca4b944d1dd"><div class="ttname"><a href="gc-extension_8cc.html#a8b2d6638d6a0333705428ca4b944d1dd">options_</a></div><div class="ttdeci">GCOptions options_</div><div class="ttdef"><b>Definition</b> <a href="gc-extension_8cc_source.html#l00261">gc-extension.cc:261</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a115c48491bb37004f5ac67eb46ac2c23"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a></div><div class="ttdeci">turboshaft::OpIndex base</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00070">instruction-selector-ia32.cc:70</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a97bd6c077f3c7769f575b82988b9b668"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a></div><div class="ttdeci">int32_t offset</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00072">instruction-selector-ia32.cc:72</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_ae55190dbead0a94298bdfa37911694e3"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a></div><div class="ttdeci">turboshaft::OptionalOpIndex index</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00071">instruction-selector-ia32.cc:71</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_ae4dfd7b0d66121016d6466d2ff10e8ba"><div class="ttname"><a href="js-call-reducer_8cc.html#ae4dfd7b0d66121016d6466d2ff10e8ba">_</a></div><div class="ttdeci">#define _</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l00054">js-call-reducer.cc:54</a></div></div>
<div class="ttc" id="ajs-temporal-objects_8cc_html_a5d1eaa4d00d65b745d493b4b8ae43b00"><div class="ttname"><a href="js-temporal-objects_8cc.html#a5d1eaa4d00d65b745d493b4b8ae43b00">options</a></div><div class="ttdeci">DirectHandle&lt; JSReceiver &gt; options</div><div class="ttdef"><b>Definition</b> <a href="js-temporal-objects_8cc_source.html#l00207">js-temporal-objects.cc:207</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a32270f820477d0234549c564c87eb009"><div class="ttname"><a href="jump-threading_8cc.html#a32270f820477d0234549c564c87eb009">block</a></div><div class="ttdeci">RpoNumber block</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00062">jump-threading.cc:62</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a41f8c58d2c01bf65b8ee199c3f87fc80"><div class="ttname"><a href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a></div><div class="ttdeci">ZoneVector&lt; RpoNumber &gt; &amp; result</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00021">jump-threading.cc:21</a></div></div>
<div class="ttc" id="aliftoff-compiler_8cc_html_a6fe609353c39c0b8953d6309e0797779"><div class="ttname"><a href="liftoff-compiler_8cc.html#a6fe609353c39c0b8953d6309e0797779">num_exceptions</a></div><div class="ttdeci">int num_exceptions</div><div class="ttdef"><b>Definition</b> <a href="liftoff-compiler_8cc_source.html#l00470">liftoff-compiler.cc:470</a></div></div>
<div class="ttc" id="aliftoff-compiler_8cc_html_ac96b98a543c504abf4ffd7eaa447e94a"><div class="ttname"><a href="liftoff-compiler_8cc.html#ac96b98a543c504abf4ffd7eaa447e94a">fn</a></div><div class="ttdeci">EmitFn fn</div><div class="ttdef"><b>Definition</b> <a href="liftoff-compiler_8cc_source.html#l02031">liftoff-compiler.cc:2031</a></div></div>
<div class="ttc" id="amachine-operator-reducer_8cc_html_a406af858c5259e17f9ddc64513999dac"><div class="ttname"><a href="machine-operator-reducer_8cc.html#a406af858c5259e17f9ddc64513999dac">mask</a></div><div class="ttdeci">uint32_t const mask</div><div class="ttdef"><b>Definition</b> <a href="machine-operator-reducer_8cc_source.html#l02278">machine-operator-reducer.cc:2278</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_a67de744730c9fed24aa185ab5747772c"><div class="ttname"><a href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition</b> <a href="unicode_8cc_source.html#l00040">unicode.cc:40</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_abcc5d3424c551c568df4199a48bea1c2"><div class="ttname"><a href="namespaceunibrow.html#abcc5d3424c551c568df4199a48bea1c2">unibrow::uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition</b> <a href="unicode_8cc_source.html#l00039">unicode.cc:39</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_adeba6d9ef7f21fc46156d27496bab1d3"><div class="ttname"><a href="namespaceunibrow.html#adeba6d9ef7f21fc46156d27496bab1d3">unibrow::int16_t</a></div><div class="ttdeci">signed short int16_t</div><div class="ttdef"><b>Definition</b> <a href="unicode_8cc_source.html#l00038">unicode.cc:38</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a36caaf43a3f7761ae90d699b961f0239"><div class="ttname"><a href="namespacev8_1_1base.html#a36caaf43a3f7761ae90d699b961f0239">v8::base::SNPrintF</a></div><div class="ttdeci">int SNPrintF(Vector&lt; char &gt; str, const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="strings_8cc_source.html#l00020">strings.cc:20</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a9664ae877cd992ea375f1b34c6fa1b1b"><div class="ttname"><a href="namespacev8_1_1base.html#a9664ae877cd992ea375f1b34c6fa1b1b">v8::base::StaticCharVector</a></div><div class="ttdeci">constexpr Vector&lt; const char &gt; StaticCharVector(const char(&amp;array)[N])</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00326">vector.h:326</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ab277246c6caecad159bbc8755cf6bb54"><div class="ttname"><a href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">v8::base::VectorOf</a></div><div class="ttdeci">constexpr Vector&lt; T &gt; VectorOf(T *start, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00360">vector.h:360</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ab7bb05a38073e903d44170c3fed70276"><div class="ttname"><a href="namespacev8_1_1base.html#ab7bb05a38073e903d44170c3fed70276">v8::base::CStrVector</a></div><div class="ttdeci">Vector&lt; const char &gt; CStrVector(const char *data)</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00331">vector.h:331</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1libvtune_html_a85908a2ac6abdcec9ee9c4f7e51e795f"><div class="ttname"><a href="namespacev8_1_1internal_1_1libvtune.html#a85908a2ac6abdcec9ee9c4f7e51e795f">v8::internal::libvtune::split</a></div><div class="ttdeci">void split(const std::string &amp;str, char delimiter, std::vector&lt; std::string &gt; *vparams)</div><div class="ttdef"><b>Definition</b> <a href="vtunedomain-support-extension_8cc_source.html#l00025">vtunedomain-support-extension.cc:25</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1fuzzing_html"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html">v8::internal::wasm::fuzzing</a></div><div class="ttdef"><b>Definition</b> <a href="#l00026">random-module-generation.cc:26</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1fuzzing_html_a1183d8f95dc068f6dea002cc003f2b3f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a1183d8f95dc068f6dea002cc003f2b3f">v8::internal::wasm::fuzzing::GenerateRandomWasmModule</a></div><div class="ttdeci">base::Vector&lt; uint8_t &gt; GenerateRandomWasmModule(Zone *zone, WasmModuleGenerationOptions options, base::Vector&lt; const uint8_t &gt; data)</div><div class="ttdef"><b>Definition</b> <a href="#l04219">random-module-generation.cc:4219</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1fuzzing_html_a6c61d781e3840a7be4fb41a49f1ccd61"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a6c61d781e3840a7be4fb41a49f1ccd61">v8::internal::wasm::fuzzing::GenerateWasmModuleForInitExpressions</a></div><div class="ttdeci">base::Vector&lt; uint8_t &gt; GenerateWasmModuleForInitExpressions(Zone *zone, base::Vector&lt; const uint8_t &gt; data, size_t *count)</div><div class="ttdef"><b>Definition</b> <a href="#l04381">random-module-generation.cc:4381</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_1_1fuzzing_html_a9c8b656db77414bf033e312d64b7ecd8"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm_1_1fuzzing.html#a9c8b656db77414bf033e312d64b7ecd8">v8::internal::wasm::fuzzing::GenerateWasmModuleForDeopt</a></div><div class="ttdeci">base::Vector&lt; uint8_t &gt; GenerateWasmModuleForDeopt(Zone *zone, base::Vector&lt; const uint8_t &gt; data, std::vector&lt; std::string &gt; &amp;callees, std::vector&lt; std::string &gt; &amp;inlinees)</div><div class="ttdef"><b>Definition</b> <a href="#l04642">random-module-generation.cc:4642</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a06e9a4ee78c5afbe50af1340be80ae78"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a06e9a4ee78c5afbe50af1340be80ae78">v8::internal::wasm::is_valid</a></div><div class="ttdeci">constexpr bool is_valid(ValueKind kind)</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00510">value-type.h:510</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a0c67c72a110565d42e5d85da22aa24b8"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a0c67c72a110565d42e5d85da22aa24b8">v8::internal::wasm::Nullability</a></div><div class="ttdeci">Nullability</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00490">value-type.h:490</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a0c67c72a110565d42e5d85da22aa24b8a66101800fc7652c63fbd17b0fe8093cf"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a0c67c72a110565d42e5d85da22aa24b8a66101800fc7652c63fbd17b0fe8093cf">v8::internal::wasm::kNonNullable</a></div><div class="ttdeci">@ kNonNullable</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00490">value-type.h:490</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a0c67c72a110565d42e5d85da22aa24b8a7630715fff9398c0416edb712253e3db"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a0c67c72a110565d42e5d85da22aa24b8a7630715fff9398c0416edb712253e3db">v8::internal::wasm::kNullable</a></div><div class="ttdeci">@ kNullable</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00490">value-type.h:490</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a17aedf25fa2edcefae3f561a222df0e7a1dd92644a8e57b6ff1321f68dc340f04"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a1dd92644a8e57b6ff1321f68dc340f04">v8::internal::wasm::CompileTimeImport::kTextDecoder</a></div><div class="ttdeci">@ kTextDecoder</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a17aedf25fa2edcefae3f561a222df0e7a6c2ab476973341ef6752d1b30e333ac9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a6c2ab476973341ef6752d1b30e333ac9">v8::internal::wasm::CompileTimeImport::kTextEncoder</a></div><div class="ttdeci">@ kTextEncoder</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a17aedf25fa2edcefae3f561a222df0e7a8e105f40fdd24a8ca69e0e2d08191420"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a17aedf25fa2edcefae3f561a222df0e7a8e105f40fdd24a8ca69e0e2d08191420">v8::internal::wasm::CompileTimeImport::kJsString</a></div><div class="ttdeci">@ kJsString</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a2a400b63126e2b506bf2cbc1ea9e0e91"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a2a400b63126e2b506bf2cbc1ea9e0e91">v8::internal::wasm::kWasmExnRef</a></div><div class="ttdeci">constexpr ValueType kWasmExnRef</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01120">value-type.h:1120</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a2ac79dbfe69c6fd62cfb7bacb43ad583"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a2ac79dbfe69c6fd62cfb7bacb43ad583">v8::internal::wasm::kWasmVoid</a></div><div class="ttdeci">constexpr ValueType kWasmVoid</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01112">value-type.h:1112</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a2c3460cd2f939619948406b93b65b4cb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a2c3460cd2f939619948406b93b65b4cb">v8::internal::wasm::kWasmS128</a></div><div class="ttdeci">constexpr ValueType kWasmS128</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01108">value-type.h:1108</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a2d6792d11c7a188eee3c11154383ab05"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a2d6792d11c7a188eee3c11154383ab05">v8::internal::wasm::kWasmI8</a></div><div class="ttdeci">constexpr ValueType kWasmI8</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01109">value-type.h:1109</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a37c10a6c9b36e2b30daa3adf302a9331"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a37c10a6c9b36e2b30daa3adf302a9331">v8::internal::wasm::kWasmFuncRef</a></div><div class="ttdeci">constexpr ValueType kWasmFuncRef</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01117">value-type.h:1117</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3c3af68913657ea09674c213ad0a3641"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3c3af68913657ea09674c213ad0a3641">v8::internal::wasm::ValueKind</a></div><div class="ttdeci">ValueKind</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00492">value-type.h:492</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a550e7807245e86b42c8585b50db8d723"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a550e7807245e86b42c8585b50db8d723">v8::internal::wasm::kWasmI31Ref</a></div><div class="ttdeci">constexpr ValueType kWasmI31Ref</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01122">value-type.h:1122</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a58280911560a19ed11d754bee507198e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a58280911560a19ed11d754bee507198e">v8::internal::wasm::kV8MaxWasmMemory64Pages</a></div><div class="ttdeci">constexpr size_t kV8MaxWasmMemory64Pages</div><div class="ttdef"><b>Definition</b> <a href="wasm-limits_8h_source.html#l00046">wasm-limits.h:46</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6fe669f8d30bcc2fcbdf157c16f0216b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216b">v8::internal::wasm::CatchKind</a></div><div class="ttdeci">CatchKind</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00154">wasm-constants.h:154</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6fe669f8d30bcc2fcbdf157c16f0216ba6254a60dc5f00707ae4502266106a812"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216ba6254a60dc5f00707ae4502266106a812">v8::internal::wasm::kCatchAllRef</a></div><div class="ttdeci">@ kCatchAllRef</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00158">wasm-constants.h:158</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6fe669f8d30bcc2fcbdf157c16f0216bac2407cd5ed424cc380aca94bada02f1a"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216bac2407cd5ed424cc380aca94bada02f1a">v8::internal::wasm::kLastCatchKind</a></div><div class="ttdeci">@ kLastCatchKind</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00159">wasm-constants.h:159</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6fe669f8d30bcc2fcbdf157c16f0216bafa1ba0e2dab1705e69b17c28d625a24e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216bafa1ba0e2dab1705e69b17c28d625a24e">v8::internal::wasm::kCatchRef</a></div><div class="ttdeci">@ kCatchRef</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00156">wasm-constants.h:156</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6fe669f8d30bcc2fcbdf157c16f0216baff69f39b7a9438cb910f880f18c1cdd6"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6fe669f8d30bcc2fcbdf157c16f0216baff69f39b7a9438cb910f880f18c1cdd6">v8::internal::wasm::kCatch</a></div><div class="ttdeci">@ kCatch</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00155">wasm-constants.h:155</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a737911f89bb20433e3eb3d67fac6be64"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a737911f89bb20433e3eb3d67fac6be64">v8::internal::wasm::WasmOpcode</a></div><div class="ttdeci">WasmOpcode</div><div class="ttdef"><b>Definition</b> <a href="wasm-opcodes_8h_source.html#l00913">wasm-opcodes.h:913</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a9426d91ec5f89dd5402e6579bd09e9cc"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a9426d91ec5f89dd5402e6579bd09e9cc">v8::internal::wasm::kNoSuperType</a></div><div class="ttdeci">constexpr ModuleTypeIndex kNoSuperType</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00448">wasm-module.h:448</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aa5bca5925c27c54f3c66b958c81b9190"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aa5bca5925c27c54f3c66b958c81b9190">v8::internal::wasm::is_defaultable</a></div><div class="ttdeci">constexpr bool is_defaultable(ValueKind kind)</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00605">value-type.h:605</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abe108c96012d3726499466455f359115"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abe108c96012d3726499466455f359115">v8::internal::wasm::kWasmI32</a></div><div class="ttdeci">constexpr ValueType kWasmI32</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01104">value-type.h:1104</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac0993b253da7c6a4f84e778a5a7b99a3"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac0993b253da7c6a4f84e778a5a7b99a3">v8::internal::wasm::kWasmI64</a></div><div class="ttdeci">constexpr ValueType kWasmI64</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01105">value-type.h:1105</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac81d27d6edb00aeed62a3e4745b8cba0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac81d27d6edb00aeed62a3e4745b8cba0">v8::internal::wasm::void</a></div><div class="ttdeci">typedef void(VECTORCALL PWasmOp)(const uint8_t *code</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca3af72b5da01dfb563e4c5f56af8952"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952">v8::internal::wasm::AddressType</a></div><div class="ttdeci">AddressType</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00046">wasm-module.h:46</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a0a0ecdb4eded286c722877578774a293">v8::internal::wasm::AddressType::kI32</a></div><div class="ttdeci">@ kI32</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aca3af72b5da01dfb563e4c5f56af8952a6601e7b0f7c0f03d9ffa9f222c82e6a0">v8::internal::wasm::AddressType::kI64</a></div><div class="ttdeci">@ kI64</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ae93e72dc85ae1fb5608e74b0410cb281"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ae93e72dc85ae1fb5608e74b0410cb281">v8::internal::wasm::FunctionSig</a></div><div class="ttdeci">Signature&lt; ValueType &gt; FunctionSig</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01171">value-type.h:1171</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aed0daa933fcad9ee13252b351e01a3d9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aed0daa933fcad9ee13252b351e01a3d9">v8::internal::wasm::is_reference</a></div><div class="ttdeci">constexpr bool is_reference(ValueKind kind)</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00516">value-type.h:516</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aed8b0c264ada0ac0e941efbc9bf943a1"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aed8b0c264ada0ac0e941efbc9bf943a1">v8::internal::wasm::kWasmExternRef</a></div><div class="ttdeci">constexpr ValueType kWasmExternRef</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01119">value-type.h:1119</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aeeac0cc9a95a66e780071a192fd8bc42"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aeeac0cc9a95a66e780071a192fd8bc42">v8::internal::wasm::kWasmI16</a></div><div class="ttdeci">constexpr ValueType kWasmI16</div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l01110">value-type.h:1110</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af0a29b526eb7f8cbb8ffbd9e2c8f1a81a097c2d18f48b609c1b57a561c9c7098c"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a097c2d18f48b609c1b57a561c9c7098c">v8::internal::wasm::kAnyRefCode</a></div><div class="ttdeci">@ kAnyRefCode</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00043">wasm-constants.h:43</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af0a29b526eb7f8cbb8ffbd9e2c8f1a81a300d7fdea09e2e3f951cb9e55a349625"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a300d7fdea09e2e3f951cb9e55a349625">v8::internal::wasm::kStructRefCode</a></div><div class="ttdeci">@ kStructRefCode</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00046">wasm-constants.h:46</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af0a29b526eb7f8cbb8ffbd9e2c8f1a81a50a33b2c8f7f4393c327d63acd732174"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a50a33b2c8f7f4393c327d63acd732174">v8::internal::wasm::kI31RefCode</a></div><div class="ttdeci">@ kI31RefCode</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00045">wasm-constants.h:45</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af0a29b526eb7f8cbb8ffbd9e2c8f1a81a51112be8b1ef71cf4deab59adc1812e1"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81a51112be8b1ef71cf4deab59adc1812e1">v8::internal::wasm::kEqRefCode</a></div><div class="ttdeci">@ kEqRefCode</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00044">wasm-constants.h:44</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af0a29b526eb7f8cbb8ffbd9e2c8f1a81aa5677d4f95ce37ae9956f8c971aad9a0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81aa5677d4f95ce37ae9956f8c971aad9a0">v8::internal::wasm::kArrayRefCode</a></div><div class="ttdeci">@ kArrayRefCode</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00047">wasm-constants.h:47</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af0a29b526eb7f8cbb8ffbd9e2c8f1a81acf6c42955c8abb9a1060b20494b33fa3"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af0a29b526eb7f8cbb8ffbd9e2c8f1a81acf6c42955c8abb9a1060b20494b33fa3">v8::internal::wasm::kNoneCode</a></div><div class="ttdeci">@ kNoneCode</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00040">wasm-constants.h:40</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af9eea7ef6c36992fe92707061703fb43"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af9eea7ef6c36992fe92707061703fb43">v8::internal::wasm::kV8MaxWasmMemory32Pages</a></div><div class="ttdeci">constexpr size_t kV8MaxWasmMemory32Pages</div><div class="ttdef"><b>Definition</b> <a href="wasm-limits_8h_source.html#l00043">wasm-limits.h:43</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00018">api-arguments-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0cfab207d565dcf62ebf50f3987e05de"><div class="ttname"><a href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">v8::internal::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition</b> <a href="heap-snapshot-generator_8cc_source.html#l01584">heap-snapshot-generator.cc:1584</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a1ac5aaec8d986abe45d958e665beb21a"><div class="ttname"><a href="namespacev8_1_1internal.html#a1ac5aaec8d986abe45d958e665beb21a">v8::internal::kSimd128Size</a></div><div class="ttdeci">constexpr int kSimd128Size</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00697">globals.h:697</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4e2118a7c0d730210e0cb87b511cba70"><div class="ttname"><a href="namespacev8_1_1internal.html#a4e2118a7c0d730210e0cb87b511cba70">v8::internal::bool</a></div><div class="ttdeci">bool</div><div class="ttdef"><b>Definition</b> <a href="js-function-inl_8h_source.html#l00452">js-function-inl.h:452</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a58578a07334d81a9c8cd700020ff9b78"><div class="ttname"><a href="namespacev8_1_1internal.html#a58578a07334d81a9c8cd700020ff9b78">v8::internal::N</a></div><div class="ttdeci">constexpr int N</div><div class="ttdef"><b>Definition</b> <a href="constants-arm_8h_source.html#l00179">constants-arm.h:179</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6135f0ef57de8d381e3225f6659c617a"><div class="ttname"><a href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">v8::internal::sig</a></div><div class="ttdeci">kWasmInternalFunctionIndirectPointerTag kProtectedInstanceDataOffset sig</div><div class="ttdef"><b>Definition</b> <a href="wasm-objects-inl_8h_source.html#l00475">wasm-objects-inl.h:475</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a0a0ecdb4eded286c722877578774a293">v8::internal::WasmValueType::kI32</a></div><div class="ttdeci">@ kI32</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a1201e21104cbb7ea3a7c362efcb325a3"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a1201e21104cbb7ea3a7c362efcb325a3">v8::internal::WasmValueType::kI16</a></div><div class="ttdeci">@ kI16</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a5234930e162acb53b17e178221057319">v8::internal::WasmValueType::kF64</a></div><div class="ttdeci">@ kF64</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a6601e7b0f7c0f03d9ffa9f222c82e6a0"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6601e7b0f7c0f03d9ffa9f222c82e6a0">v8::internal::WasmValueType::kI64</a></div><div class="ttdeci">@ kI64</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a6c86e764d5c427a8339c3920a3c08603"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a6c86e764d5c427a8339c3920a3c08603">v8::internal::WasmValueType::kI8</a></div><div class="ttdeci">@ kI8</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210a941c992a0e3d2eb28203202730996ba2">v8::internal::WasmValueType::kF32</a></div><div class="ttdeci">@ kF32</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210aafd4fc7d3d7d9d9bc84ef9f0fd3d09c3"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210aafd4fc7d3d7d9d9bc84ef9f0fd3d09c3">v8::internal::WasmValueType::kRefNull</a></div><div class="ttdeci">@ kRefNull</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210ab5b96df89f6d4b5436a728a5a4014d83"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210ab5b96df89f6d4b5436a728a5a4014d83">v8::internal::WasmValueType::kRef</a></div><div class="ttdeci">@ kRef</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abb767b639fb9b3ebabe15c8e91e99210af99a6cf928bc2257d654d6301969318c"><div class="ttname"><a href="namespacev8_1_1internal.html#abb767b639fb9b3ebabe15c8e91e99210af99a6cf928bc2257d654d6301969318c">v8::internal::WasmValueType::kS128</a></div><div class="ttdeci">@ kS128</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae9b3d70a0b2f7c3c669d187fd9a9dae2"><div class="ttname"><a href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">v8::internal::kMaxUInt32</a></div><div class="ttdeci">constexpr uint32_t kMaxUInt32</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00379">globals.h:379</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afa9ea55d792121fba92b4cfc8ef8c9d7"><div class="ttname"><a href="namespacev8_1_1internal.html#afa9ea55d792121fba92b4cfc8ef8c9d7">v8::internal::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition</b> <a href="external-reference_8cc_source.html#l01421">external-reference.cc:1421</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a018b4bebee22d7f7e53b290510767da4"><div class="ttname"><a href="random-module-generation_8cc.html#a018b4bebee22d7f7e53b290510767da4">num_functions_</a></div><div class="ttdeci">const uint8_t num_functions_</div><div class="ttdef"><b>Definition</b> <a href="#l03963">random-module-generation.cc:3963</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a075ef7b97341b0161660a66918ddd1e6"><div class="ttname"><a href="random-module-generation_8cc.html#a075ef7b97341b0161660a66918ddd1e6">structs_</a></div><div class="ttdeci">const std::vector&lt; ModuleTypeIndex &gt; &amp; structs_</div><div class="ttdef"><b>Definition</b> <a href="#l03548">random-module-generation.cc:3548</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a1ad2b9239773cbd418818106711ed087"><div class="ttname"><a href="random-module-generation_8cc.html#a1ad2b9239773cbd418818106711ed087">equals</a></div><div class="ttdeci">uint32_t equals</div><div class="ttdef"><b>Definition</b> <a href="#l00057">random-module-generation.cc:57</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a1d390dc688e2df71af7bd62f5bdc5103"><div class="ttname"><a href="random-module-generation_8cc.html#a1d390dc688e2df71af7bd62f5bdc5103">encodeStringToUTF8Array</a></div><div class="ttdeci">uint32_t encodeStringToUTF8Array</div><div class="ttdef"><b>Definition</b> <a href="#l00063">random-module-generation.cc:63</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a251e256e4428375f20fca9ff05f353f8"><div class="ttname"><a href="random-module-generation_8cc.html#a251e256e4428375f20fca9ff05f353f8">num_types_</a></div><div class="ttdeci">const uint16_t num_types_</div><div class="ttdef"><b>Definition</b> <a href="#l03966">random-module-generation.cc:3966</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a2a94af96b48ededb482be8d77265360c"><div class="ttname"><a href="random-module-generation_8cc.html#a2a94af96b48ededb482be8d77265360c">fromCharCode</a></div><div class="ttdeci">uint32_t fromCharCode</div><div class="ttdef"><b>Definition</b> <a href="#l00050">random-module-generation.cc:50</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a324141a60da2e86bb1c8bdd5f188a04d"><div class="ttname"><a href="random-module-generation_8cc.html#a324141a60da2e86bb1c8bdd5f188a04d">kNumAll</a></div><div class="ttdeci">static constexpr size_t kNumAll</div><div class="ttdef"><b>Definition</b> <a href="#l00360">random-module-generation.cc:360</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a32c7f778abc4eedb27a436cbe0e158bb"><div class="ttname"><a href="random-module-generation_8cc.html#a32c7f778abc4eedb27a436cbe0e158bb">locals_</a></div><div class="ttdeci">std::vector&lt; ValueType &gt; locals_</div><div class="ttdef"><b>Definition</b> <a href="#l03543">random-module-generation.cc:3543</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a350391907af9374e9d5d234a4fbdf28c"><div class="ttname"><a href="random-module-generation_8cc.html#a350391907af9374e9d5d234a4fbdf28c">kNumSimd</a></div><div class="ttdeci">static constexpr size_t kNumSimd</div><div class="ttdef"><b>Definition</b> <a href="#l00358">random-module-generation.cc:358</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a3fe056dcc597487a71f1cdde30678d2f"><div class="ttname"><a href="random-module-generation_8cc.html#a3fe056dcc597487a71f1cdde30678d2f">module_range_</a></div><div class="ttdeci">DataRange *const module_range_</div><div class="ttdef"><b>Definition</b> <a href="#l03962">random-module-generation.cc:3962</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a4150e8e3bb68c5622ced13e984be1ef6"><div class="ttname"><a href="random-module-generation_8cc.html#a4150e8e3bb68c5622ced13e984be1ef6">decodeStringFromUTF8Array</a></div><div class="ttdeci">uint32_t decodeStringFromUTF8Array</div><div class="ttdef"><b>Definition</b> <a href="#l00064">random-module-generation.cc:64</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a4a713e562d0caefc7e6d597651ce3383"><div class="ttname"><a href="random-module-generation_8cc.html#a4a713e562d0caefc7e6d597651ce3383">catch_blocks_</a></div><div class="ttdeci">std::vector&lt; int &gt; catch_blocks_</div><div class="ttdef"><b>Definition</b> <a href="#l03547">random-module-generation.cc:3547</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a4b3721456d8a061caa13e8b30f5d4f74"><div class="ttname"><a href="random-module-generation_8cc.html#a4b3721456d8a061caa13e8b30f5d4f74">charCodeAt</a></div><div class="ttdeci">uint32_t charCodeAt</div><div class="ttdef"><b>Definition</b> <a href="#l00052">random-module-generation.cc:52</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a4e4a8799d9263303948e827dc702dc92"><div class="ttname"><a href="random-module-generation_8cc.html#a4e4a8799d9263303948e827dc702dc92">array_i16</a></div><div class="ttdeci">ModuleTypeIndex array_i16</div><div class="ttdef"><b>Definition</b> <a href="#l00067">random-module-generation.cc:67</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a5172eb1375a20e6fb302e7aa86db7c12"><div class="ttname"><a href="random-module-generation_8cc.html#a5172eb1375a20e6fb302e7aa86db7c12">array_i8</a></div><div class="ttdeci">ModuleTypeIndex array_i8</div><div class="ttdef"><b>Definition</b> <a href="#l00068">random-module-generation.cc:68</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a5835e909f16378f32c44f2381f9173f9"><div class="ttname"><a href="random-module-generation_8cc.html#a5835e909f16378f32c44f2381f9173f9">all_</a></div><div class="ttdeci">const std::array&lt; GenerateFn, kNumAll &gt; all_</div><div class="ttdef"><b>Definition</b> <a href="#l00391">random-module-generation.cc:391</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a5a523a340e5ba1ff538b0a46638aa90b"><div class="ttname"><a href="random-module-generation_8cc.html#a5a523a340e5ba1ff538b0a46638aa90b">emit_end_</a></div><div class="ttdeci">bool emit_end_</div><div class="ttdef"><b>Definition</b> <a href="#l00453">random-module-generation.cc:453</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a5f3ec28b358bd591e5e67a67866d4766"><div class="ttname"><a href="random-module-generation_8cc.html#a5f3ec28b358bd591e5e67a67866d4766">intoCharCodeArray</a></div><div class="ttdeci">uint32_t intoCharCodeArray</div><div class="ttdef"><b>Definition</b> <a href="#l00060">random-module-generation.cc:60</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a627a3560d110093764ccc48dd9109f4c"><div class="ttname"><a href="random-module-generation_8cc.html#a627a3560d110093764ccc48dd9109f4c">mutable_globals_</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; mutable_globals_</div><div class="ttdef"><b>Definition</b> <a href="#l03545">random-module-generation.cc:3545</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a64a83922e1e2fa0a4a08d4e89e716389"><div class="ttname"><a href="random-module-generation_8cc.html#a64a83922e1e2fa0a4a08d4e89e716389">fromCodePoint</a></div><div class="ttdeci">uint32_t fromCodePoint</div><div class="ttdef"><b>Definition</b> <a href="#l00051">random-module-generation.cc:51</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a723f251054e3378bc8eb00ef06814a29"><div class="ttname"><a href="random-module-generation_8cc.html#a723f251054e3378bc8eb00ef06814a29">mvp_</a></div><div class="ttdeci">const std::array&lt; GenerateFn, kNumMVP &gt; mvp_</div><div class="ttdef"><b>Definition</b> <a href="#l00388">random-module-generation.cc:388</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a764a5f1b2877c8fed9d34b9cf2b7e8c8"><div class="ttname"><a href="random-module-generation_8cc.html#a764a5f1b2877c8fed9d34b9cf2b7e8c8">fromCharCodeArray</a></div><div class="ttdeci">uint32_t fromCharCodeArray</div><div class="ttdef"><b>Definition</b> <a href="#l00059">random-module-generation.cc:59</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a7ad4cdfdce811c734dd45ad4b2051c0c"><div class="ttname"><a href="random-module-generation_8cc.html#a7ad4cdfdce811c734dd45ad4b2051c0c">locals_initialized_</a></div><div class="ttdeci">bool locals_initialized_</div><div class="ttdef"><b>Definition</b> <a href="#l03551">random-module-generation.cc:3551</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a8721885a13fdab545fa508803154d20d"><div class="ttname"><a href="random-module-generation_8cc.html#a8721885a13fdab545fa508803154d20d">cast</a></div><div class="ttdeci">uint32_t cast</div><div class="ttdef"><b>Definition</b> <a href="#l00048">random-module-generation.cc:48</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a89c0765ddb421d9438d736fc9fdaa0e0"><div class="ttname"><a href="random-module-generation_8cc.html#a89c0765ddb421d9438d736fc9fdaa0e0">encodeStringIntoUTF8Array</a></div><div class="ttdeci">uint32_t encodeStringIntoUTF8Array</div><div class="ttdef"><b>Definition</b> <a href="#l00062">random-module-generation.cc:62</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a8a8454388e749ce23d60e2003a6bc743"><div class="ttname"><a href="random-module-generation_8cc.html#a8a8454388e749ce23d60e2003a6bc743">recursion_depth</a></div><div class="ttdeci">uint32_t recursion_depth</div><div class="ttdef"><b>Definition</b> <a href="#l03546">random-module-generation.cc:3546</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a93cf0d1f30400717830572c8616e17d4"><div class="ttname"><a href="random-module-generation_8cc.html#a93cf0d1f30400717830572c8616e17d4">functions_</a></div><div class="ttdeci">const std::vector&lt; ModuleTypeIndex &gt; &amp; functions_</div><div class="ttdef"><b>Definition</b> <a href="#l03542">random-module-generation.cc:3542</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a9572c1f21f92ef80ce29464c2b99d302"><div class="ttname"><a href="random-module-generation_8cc.html#a9572c1f21f92ef80ce29464c2b99d302">num_structs_</a></div><div class="ttdeci">const uint8_t num_structs_</div><div class="ttdef"><b>Definition</b> <a href="#l03964">random-module-generation.cc:3964</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_a996bf7979ae342de8ab3c61497548104"><div class="ttname"><a href="random-module-generation_8cc.html#a996bf7979ae342de8ab3c61497548104">num_arrays_</a></div><div class="ttdeci">const uint8_t num_arrays_</div><div class="ttdef"><b>Definition</b> <a href="#l03965">random-module-generation.cc:3965</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_aa002b1b2006b2e38b143b322a892d9ba"><div class="ttname"><a href="random-module-generation_8cc.html#aa002b1b2006b2e38b143b322a892d9ba">codePointAt</a></div><div class="ttdeci">uint32_t codePointAt</div><div class="ttdef"><b>Definition</b> <a href="#l00053">random-module-generation.cc:53</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_aa2ba9de4987a7b6a862edef143709d4c"><div class="ttname"><a href="random-module-generation_8cc.html#aa2ba9de4987a7b6a862edef143709d4c">kNumWasmGC</a></div><div class="ttdeci">static constexpr size_t kNumWasmGC</div><div class="ttdef"><b>Definition</b> <a href="#l00359">random-module-generation.cc:359</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_aa87e407bf6ffd8b3638670d86b1f34ad"><div class="ttname"><a href="random-module-generation_8cc.html#aa87e407bf6ffd8b3638670d86b1f34ad">gen_</a></div><div class="ttdeci">BodyGen *const gen_</div><div class="ttdef"><b>Definition</b> <a href="#l00452">random-module-generation.cc:452</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_aad50de711b165cea7110572bd2bc8d32"><div class="ttname"><a href="random-module-generation_8cc.html#aad50de711b165cea7110572bd2bc8d32">arrays_</a></div><div class="ttdeci">const std::vector&lt; ModuleTypeIndex &gt; &amp; arrays_</div><div class="ttdef"><b>Definition</b> <a href="#l03549">random-module-generation.cc:3549</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_ab92c0250d8b173c3559e38e549ada15d"><div class="ttname"><a href="random-module-generation_8cc.html#ab92c0250d8b173c3559e38e549ada15d">gen</a></div><div class="ttdeci">BodyGen * gen</div><div class="ttdef"><b>Definition</b> <a href="#l02270">random-module-generation.cc:2270</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_ac36537f594f783ae9323e25e7f8317b2"><div class="ttname"><a href="random-module-generation_8cc.html#ac36537f594f783ae9323e25e7f8317b2">compare</a></div><div class="ttdeci">uint32_t compare</div><div class="ttdef"><b>Definition</b> <a href="#l00058">random-module-generation.cc:58</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_ac4f9b6d6cb579b84f6722d37b6217c10"><div class="ttname"><a href="random-module-generation_8cc.html#ac4f9b6d6cb579b84f6722d37b6217c10">globals_</a></div><div class="ttdeci">std::vector&lt; ValueType &gt; globals_</div><div class="ttdef"><b>Definition</b> <a href="#l03544">random-module-generation.cc:3544</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_ad0f2e5a74f7c7d3cf8b663783bcc7288"><div class="ttname"><a href="random-module-generation_8cc.html#ad0f2e5a74f7c7d3cf8b663783bcc7288">wasmgc_</a></div><div class="ttdeci">const std::array&lt; GenerateFn, kNumWasmGC &gt; wasmgc_</div><div class="ttdef"><b>Definition</b> <a href="#l00390">random-module-generation.cc:390</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_ad8f4702189f9e9e0bde8bfc1804dc17e"><div class="ttname"><a href="random-module-generation_8cc.html#ad8f4702189f9e9e0bde8bfc1804dc17e">tag_index</a></div><div class="ttdeci">int tag_index</div><div class="ttdef"><b>Definition</b> <a href="#l00608">random-module-generation.cc:608</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_adf46c6cdb1d1f66f2212c8cfd21b5a89"><div class="ttname"><a href="random-module-generation_8cc.html#adf46c6cdb1d1f66f2212c8cfd21b5a89">measureStringAsUTF8</a></div><div class="ttdeci">uint32_t measureStringAsUTF8</div><div class="ttdef"><b>Definition</b> <a href="#l00061">random-module-generation.cc:61</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_ae74788e32c2ef7084c5fcd5b20c3024c"><div class="ttname"><a href="random-module-generation_8cc.html#ae74788e32c2ef7084c5fcd5b20c3024c">blocks_</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; ValueType &gt; &gt; blocks_</div><div class="ttdef"><b>Definition</b> <a href="#l03541">random-module-generation.cc:3541</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_aecf167532df97fbf5d2f2fa85eda6397"><div class="ttname"><a href="random-module-generation_8cc.html#aecf167532df97fbf5d2f2fa85eda6397">concat</a></div><div class="ttdeci">uint32_t concat</div><div class="ttdef"><b>Definition</b> <a href="#l00055">random-module-generation.cc:55</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_af27affada9db864b4559c1fc5db5f080"><div class="ttname"><a href="random-module-generation_8cc.html#af27affada9db864b4559c1fc5db5f080">simd_</a></div><div class="ttdeci">const std::array&lt; GenerateFn, kNumSimd &gt; simd_</div><div class="ttdef"><b>Definition</b> <a href="#l00389">random-module-generation.cc:389</a></div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_af621f083c6ca99eb507333a0bb7135a4"><div class="ttname"><a href="random-module-generation_8cc.html#af621f083c6ca99eb507333a0bb7135a4">STRINGFUNC</a></div><div class="ttdeci">#define STRINGFUNC(name, sig, group)</div></div>
<div class="ttc" id="arandom-module-generation_8cc_html_afab1bd9b69ea9b2456acd6d97381c447"><div class="ttname"><a href="random-module-generation_8cc.html#afab1bd9b69ea9b2456acd6d97381c447">string_imports_</a></div><div class="ttdeci">const StringImports &amp; string_imports_</div><div class="ttdef"><b>Definition</b> <a href="#l03550">random-module-generation.cc:3550</a></div></div>
<div class="ttc" id="arandom-module-generation_8h_html"><div class="ttname"><a href="random-module-generation_8h.html">random-module-generation.h</a></div></div>
<div class="ttc" id="arandom-number-generator_8h_html"><div class="ttname"><a href="random-number-generator_8h.html">random-number-generator.h</a></div></div>
<div class="ttc" id="aregexp-parser_8cc_html_a8fa4c811ec7a8c2f7fc741be03e19c37"><div class="ttname"><a href="regexp-parser_8cc.html#a8fa4c811ec7a8c2f7fc741be03e19c37">builder_</a></div><div class="ttdeci">RegExpBuilder builder_</div><div class="ttdef"><b>Definition</b> <a href="regexp-parser_8cc_source.html#l00429">regexp-parser.cc:429</a></div></div>
<div class="ttc" id="ascavenger_8cc_html_a43586ed91f936d95ff97fd99e8625157"><div class="ttname"><a href="scavenger_8cc.html#a43586ed91f936d95ff97fd99e8625157">rng_</a></div><div class="ttdeci">base::RandomNumberGenerator *const rng_</div><div class="ttdef"><b>Definition</b> <a href="scavenger_8cc_source.html#l00568">scavenger.cc:568</a></div></div>
<div class="ttc" id="asetup-heap-internal_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> <a href="setup-heap-internal_8cc_source.html#l00126">setup-heap-internal.cc:126</a></div></div>
<div class="ttc" id="asmall-vector_8h_html"><div class="ttname"><a href="small-vector_8h.html">small-vector.h</a></div></div>
<div class="ttc" id="asrc_2base_2compiler-specific_8h_html_a415acbb16ae1bfc9e3e053f8477852f5"><div class="ttname"><a href="src_2base_2compiler-specific_8h.html#a415acbb16ae1bfc9e3e053f8477852f5">V8_NOEXCEPT</a></div><div class="ttdeci">#define V8_NOEXCEPT</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2compiler-specific_8h_source.html#l00105">compiler-specific.h:105</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="src_2base_2logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00067">logging.h:67</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a0d093cb749cfc7ab5993726392df681f"><div class="ttname"><a href="src_2base_2logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a></div><div class="ttdeci">#define FATAL(...)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00047">logging.h:47</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="src_2base_2logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00490">logging.h:490</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="src_2base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="src_2base_2logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00493">logging.h:493</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="src_2base_2logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="src_2base_2logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_aca32614b4d2aea7dd9abdeb222bf02f3"><div class="ttname"><a href="src_2base_2logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(lhs, rhs)</div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="src_2base_2logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00482">logging.h:482</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="src_2base_2logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="src_2base_2logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="asrc_2base_2logging_8h_html_afd957f297df7e9ee36c46185e961485f"><div class="ttname"><a href="src_2base_2logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a></div><div class="ttdeci">#define DCHECK_GT(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2logging_8h_source.html#l00487">logging.h:487</a></div></div>
<div class="ttc" id="asrc_2base_2macros_8h_html_ac55fdd6aa61539c49b1b1f5d38a0ed73"><div class="ttname"><a href="src_2base_2macros_8h.html#ac55fdd6aa61539c49b1b1f5d38a0ed73">arraysize</a></div><div class="ttdeci">#define arraysize(array)</div><div class="ttdef"><b>Definition</b> <a href="src_2base_2macros_8h_source.html#l00067">macros.h:67</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1count_html"><div class="ttname"><a href="structv8_1_1internal_1_1count.html">v8::internal::count</a></div><div class="ttdef"><b>Definition</b> <a href="v8-fast-api-calls_8h_source.html#l00567">v8-fast-api-calls.h:567</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleTypeIndex_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleTypeIndex.html">v8::internal::wasm::ModuleTypeIndex</a></div><div class="ttdef"><b>Definition</b> <a href="value-type_8h_source.html#l00063">value-type.h:63</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment_1_1Entry_html_aa9a4cd6f943d6fcb1327ff9f9aafb5fba5e71bbca0242fa690622547d7b4fb563"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment_1_1Entry.html#aa9a4cd6f943d6fcb1327ff9f9aafb5fba5e71bbca0242fa690622547d7b4fb563">v8::internal::wasm::WasmModuleBuilder::WasmElemSegment::Entry::kRefNullEntry</a></div><div class="ttdeci">@ kRefNullEntry</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00278">wasm-module-builder.h:278</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment_1_1Entry_html_aa9a4cd6f943d6fcb1327ff9f9aafb5fba97258595290934ad077e7aa18ecbf236"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModuleBuilder_1_1WasmElemSegment_1_1Entry.html#aa9a4cd6f943d6fcb1327ff9f9aafb5fba97258595290934ad077e7aa18ecbf236">v8::internal::wasm::WasmModuleBuilder::WasmElemSegment::Entry::kRefFuncEntry</a></div><div class="ttdeci">@ kRefFuncEntry</div><div class="ttdef"><b>Definition</b> <a href="wasm-module-builder_8h_source.html#l00278">wasm-module-builder.h:278</a></div></div>
<div class="ttc" id="atoken_8cc_html_a11e128205e425378254b6a9cf928ac6a"><div class="ttname"><a href="token_8cc.html#a11e128205e425378254b6a9cf928ac6a">T1</a></div><div class="ttdeci">#define T1(name, string, precedence)</div><div class="ttdef"><b>Definition</b> <a href="token_8cc_source.html#l00028">token.cc:28</a></div></div>
<div class="ttc" id="atoken_8cc_html_af160c8734afb064af618897deb6ddb0e"><div class="ttname"><a href="token_8cc.html#af160c8734afb064af618897deb6ddb0e">T2</a></div><div class="ttdeci">#define T2(name, string, precedence)</div><div class="ttdef"><b>Definition</b> <a href="token_8cc_source.html#l00030">token.cc:30</a></div></div>
<div class="ttc" id="av8config_8h_html_ae5350bf5d731891583a34f9c8c52b532"><div class="ttname"><a href="v8config_8h.html#ae5350bf5d731891583a34f9c8c52b532">V8_NODISCARD</a></div><div class="ttdeci">#define V8_NODISCARD</div><div class="ttdef"><b>Definition</b> <a href="v8config_8h_source.html#l00682">v8config.h:682</a></div></div>
<div class="ttc" id="awasm-inlining-into-js_8cc_html_a66874a4e937e4192b2b42e57f55251e8"><div class="ttname"><a href="wasm-inlining-into-js_8cc.html#a66874a4e937e4192b2b42e57f55251e8">type</a></div><div class="ttdeci">wasm::ValueType type</div><div class="ttdef"><b>Definition</b> <a href="wasm-inlining-into-js_8cc_source.html#l00028">wasm-inlining-into-js.cc:28</a></div></div>
<div class="ttc" id="awasm-module-builder_8h_html"><div class="ttname"><a href="wasm-module-builder_8h.html">wasm-module-builder.h</a></div></div>
<div class="ttc" id="awasm-module_8h_html"><div class="ttname"><a href="wasm-module_8h.html">wasm-module.h</a></div></div>
<div class="ttc" id="awasm-opcodes-inl_8h_html"><div class="ttname"><a href="wasm-opcodes-inl_8h.html">wasm-opcodes-inl.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2b581e8501b9ee14adb2dc81ebf46f49.html">wasm</a></li><li class="navelem"><a class="el" href="dir_d8a47552eb3f5e05075faf15184d8c28.html">fuzzing</a></li><li class="navelem"><a class="el" href="random-module-generation_8cc.html">random-module-generation.cc</a></li>
    <li class="footer">Generated on Thu Apr 3 2025 09:56:17 for v8 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
