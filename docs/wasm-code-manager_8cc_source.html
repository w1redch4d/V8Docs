<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>v8: src/wasm/wasm-code-manager.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="v8.svg"/></td>
  <td id="projectalign">
   <div id="projectname">v8
   </div>
   <div id="projectbrief">V8 is Googleâ€™s open source high-performance JavaScript and WebAssembly engine, written in C++. It is used in Chrome and in Node.js, among others. It implements ECMAScript and WebAssembly, and runs on Windows, macOS, and Linux systems that use x64, IA-32, or ARM processors. V8 can be embedded into any C++ application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('wasm-code-manager_8cc_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">wasm-code-manager.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="wasm-code-manager_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2017 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-code-manager_8h.html">src/wasm/wasm-code-manager.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="atomicops_8h.html">src/base/atomicops.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="build__config_8h.html">src/base/build_config.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="iterator_8h.html">src/base/iterator.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="macros_8h.html">src/base/macros.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="base_2platform_2platform_8h.html">src/base/platform/platform.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="wrappers_8h.html">src/base/platform/wrappers.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="small-vector_8h.html">src/base/small-vector.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="string-format_8h.html">src/base/string-format.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="vector_8h.html">src/base/vector.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="builtins-inl_8h.html">src/builtins/builtins-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="assembler-inl_8h.html">src/codegen/assembler-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="macro-assembler-inl_8h.html">src/codegen/macro-assembler-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="macro-assembler_8h.html">src/codegen/macro-assembler.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="code-memory-access_8h.html">src/common/code-memory-access.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="common_2globals_8h.html">src/common/globals.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="deoptimizer_8h.html">src/deoptimizer/deoptimizer.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="disassembler_8h.html">src/diagnostics/disassembler.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="counters_8h.html">src/logging/counters.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">src/logging/log.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="objects-inl_8h.html">src/objects/objects-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="embedded-data-inl_8h.html">src/snapshot/embedded/embedded-data-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="ostreams_8h.html">src/utils/ostreams.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="code-space-access_8h.html">src/wasm/code-space-access.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="compilation-environment_8h.html">src/wasm/compilation-environment.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="function-compiler_8h.html">src/wasm/function-compiler.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="jump-table-assembler_8h.html">src/wasm/jump-table-assembler.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="module-compiler_8h.html">src/wasm/module-compiler.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="names-provider_8h.html">src/wasm/names-provider.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="pgo_8h.html">src/wasm/pgo.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="std-object-sizes_8h.html">src/wasm/std-object-sizes.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-builtin-list_8h.html">src/wasm/wasm-builtin-list.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-code-pointer-table-inl_8h.html">src/wasm/wasm-code-pointer-table-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-debug_8h.html">src/wasm/wasm-debug.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-deopt-data_8h.html">src/wasm/wasm-deopt-data.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-engine_8h.html">src/wasm/wasm-engine.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-import-wrapper-cache_8h.html">src/wasm/wasm-import-wrapper-cache.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-module-sourcemap_8h.html">src/wasm/wasm-module-sourcemap.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-module_8h.html">src/wasm/wasm-module.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-objects-inl_8h.html">src/wasm/wasm-objects-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-objects_8h.html">src/wasm/wasm-objects.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="well-known-imports_8h.html">src/wasm/well-known-imports.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-interpreter-runtime_8h.html">src/wasm/interpreter/wasm-interpreter-runtime.h</a>&quot;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#include &quot;<a class="code" href="unwinding-info-win64_8h.html">src/diagnostics/unwinding-info-win64.h</a>&quot;</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="foldopen" id="foldopen00062" data-start="" data-end="">
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">   62</a></span><span class="preprocessor">#define TRACE_HEAP(...)                                       \</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="preprocessor">  do {                                                        \</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">    if (v8_flags.trace_wasm_native_heap) PrintF(__VA_ARGS__); \</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">  } while (false)</span></div>
</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacev8.html">v8</a> {</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="keyword">namespace </span>internal {</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacewasm.html">wasm</a> {</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="keyword">using </span>trap_handler::ProtectedInstructionData;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment">// Check that {WasmCode} objects are sufficiently small. We create many of them,</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="comment">// often for rather small functions.</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment">// Increase the limit if needed, but first check if the size increase is</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment">// justified.</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="preprocessor">#ifndef V8_GC_MOLE</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(WasmCode) &lt;= 104);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="foldopen" id="foldopen00081" data-start="{" data-end="}">
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">   81</a></span><a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">DisjointAllocationPool::Merge</a>(</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> new_region) {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  <span class="comment">// Find the possible insertion position by identifying the first region whose</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <span class="comment">// start address is not less than that of {new_region}. Since there cannot be</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="comment">// any overlap between regions, this also means that the start of {above} is</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <span class="comment">// bigger or equal than the *end* of {new_region}.</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  <span class="keyword">auto</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a> = regions_.lower_bound(new_region);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a> == regions_.end() || <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>-&gt;begin() &gt;= new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>());</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  <span class="comment">// Check whether to merge with {above}.</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a> != regions_.end() &amp;&amp; new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>-&gt;begin()) {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> merged_region{new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(),</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                                      new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>() + <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>-&gt;size()};</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(merged_region.end(), <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>-&gt;end());</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="comment">// Check whether to also merge with the region below.</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a> != regions_.begin()) {</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>      <span class="keyword">auto</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a> = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>      --<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>      <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;end() == new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>()) {</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        merged_region = {<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;begin(), <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;size() + merged_region.size()};</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        regions_.erase(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>      }</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    }</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="keyword">auto</span> insert_pos = regions_.erase(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>);</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    regions_.insert(insert_pos, merged_region);</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">return</span> merged_region;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  }</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  <span class="comment">// No element below, and not adjavent to {above}: insert and done.</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a> == regions_.begin()) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    regions_.insert(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>, new_region);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keywordflow">return</span> new_region;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  }</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  <span class="keyword">auto</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a> = <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  --<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  <span class="comment">// Consistency check:</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a> == regions_.end() || <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;end() &lt; <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>-&gt;begin());</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  <span class="comment">// Adjacent to {below}: merge and done.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;end() == new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>()) {</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> merged_region{<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;begin(),</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                                      <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;size() + new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>()};</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(merged_region.end(), new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>());</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    regions_.erase(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    regions_.insert(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>, merged_region);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keywordflow">return</span> merged_region;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  <span class="comment">// Not adjacent to any existing region: insert between {below} and {above}.</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">below</a>-&gt;end(), new_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>());</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  regions_.insert(<a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">above</a>, new_region);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  <span class="keywordflow">return</span> new_region;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>}</div>
</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="foldopen" id="foldopen00136" data-start="{" data-end="}">
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#a5a78c9832c8962fdc94b954e5b0adb65">  136</a></span><a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#a5a78c9832c8962fdc94b954e5b0adb65">DisjointAllocationPool::Allocate</a>(<span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aaae1e5e18b6363b94f228abe6521dd3b">AllocateInRegion</a>(size,</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>                          {kNullAddress, std::numeric_limits&lt;size_t&gt;::max()});</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>}</div>
</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="foldopen" id="foldopen00141" data-start="{" data-end="}">
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aaae1e5e18b6363b94f228abe6521dd3b">  141</a></span><a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aaae1e5e18b6363b94f228abe6521dd3b">DisjointAllocationPool::AllocateInRegion</a>(</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordtype">size_t</span> size, <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> region) {</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="comment">// Get an iterator to the first contained region whose start address is not</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="comment">// smaller than the start address of {region}. Start the search from the</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="comment">// region one before that (the last one whose start address is smaller).</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  <span class="keyword">auto</span> it = regions_.lower_bound(region);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  <span class="keywordflow">if</span> (it != regions_.begin()) --it;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> = regions_.end(); it != <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>; ++it) {</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> overlap = it-&gt;<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a65b3baa673fc67d3dde9fec305ccdebc">GetOverlap</a>(region);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keywordflow">if</span> (size &gt; overlap.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> ret{overlap.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), size};</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> old = *it;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="keyword">auto</span> insert_pos = regions_.erase(it);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordflow">if</span> (size == old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>()) {</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>      <span class="comment">// We use the full region --&gt; nothing to add back.</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret.begin() == old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>()) {</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>      <span class="comment">// We return a region at the start --&gt; shrink old region from front.</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>      regions_.insert(insert_pos, {old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>() + <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>() - size});</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret.end() == old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>()) {</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>      <span class="comment">// We return a region at the end --&gt; shrink remaining region.</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>      regions_.insert(insert_pos, {old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>() - size});</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>      <span class="comment">// We return something in the middle --&gt; split the remaining region</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>      <span class="comment">// (insert the region with smaller address first).</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>      regions_.insert(insert_pos, {old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), ret.begin() - old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>()});</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>      regions_.insert(insert_pos, {ret.end(), old.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>() - ret.end()});</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  }</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>}</div>
</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="foldopen" id="foldopen00174" data-start="{" data-end="}">
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aec3d947bda334f5e27cf71c49674b10d">  174</a></span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aec3d947bda334f5e27cf71c49674b10d">WasmCode::constant_pool</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="common_2globals_8h.html#a66ec6fa51a5427d80ac1b27a3b4f38d2">V8_EMBEDDED_CONSTANT_POOL_BOOL</a>) {</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="keywordflow">if</span> (constant_pool_offset_ &lt; code_comments_offset_) {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() + constant_pool_offset_;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  <span class="keywordflow">return</span> kNullAddress;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>}</div>
</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="foldopen" id="foldopen00183" data-start="{" data-end="}">
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a00c5b3d34913272e9ce1cacfe05d4d33">  183</a></span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a00c5b3d34913272e9ce1cacfe05d4d33">WasmCode::handler_table</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() + handler_table_offset_;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>}</div>
</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="foldopen" id="foldopen00187" data-start="{" data-end="}">
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a78bb078a03d73444b991c277dd6194">  187</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a78bb078a03d73444b991c277dd6194">WasmCode::handler_table_size</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(constant_pool_offset_, handler_table_offset_);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(constant_pool_offset_ - handler_table_offset_);</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>}</div>
</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="foldopen" id="foldopen00192" data-start="{" data-end="}">
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8fe73eecc8f962c5a2d2172c9c54454">  192</a></span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8fe73eecc8f962c5a2d2172c9c54454">WasmCode::code_comments</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() + code_comments_offset_;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>}</div>
</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="foldopen" id="foldopen00196" data-start="{" data-end="}">
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ae626a585fa560ca29921df489d63f35f">  196</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ae626a585fa560ca29921df489d63f35f">WasmCode::code_comments_size</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(unpadded_binary_size_, code_comments_offset_);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(unpadded_binary_size_ - code_comments_offset_);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>}</div>
</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>std::unique_ptr&lt;const uint8_t[]&gt; WasmCode::ConcatenateBytes(</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    std::initializer_list&lt;<a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a>&gt; vectors) {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  <span class="keywordtype">size_t</span> total_size = 0;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; vec : vectors) total_size += vec.size();</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  <span class="comment">// Use default-initialization (== no initialization).</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  std::unique_ptr&lt;uint8_t[]&gt; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>{<span class="keyword">new</span> uint8_t[total_size]};</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  uint8_t* ptr = <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.get();</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; vec : vectors) {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <span class="keywordflow">if</span> (vec.empty()) <span class="keywordflow">continue</span>;  <span class="comment">// Avoid nullptr in {memcpy}.</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    memcpy(ptr, vec.begin(), vec.size());</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    ptr += vec.size();</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>  }</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>}</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span><span class="keywordtype">void</span> WasmCode::RegisterTrapHandlerData() {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!has_trap_handler_index());</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8a26bf968040e704a34b3d572ba7d3f">kind</a>() != <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">WasmCode::kWasmFunction</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  <span class="keywordflow">if</span> (protected_instructions_size_ == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a> = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>();</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="keywordtype">size_t</span> size = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>().<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>();</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="keyword">auto</span> protected_instruction_data = this-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a90b2d5047637c5c548dfdb68727529">protected_instructions</a>();</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a41fcec1a1b74c208fe92d705c51f2a81">index</a> =</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>      RegisterHandlerData(base, size, protected_instruction_data.size(),</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                          protected_instruction_data.begin());</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  <span class="comment">// TODO(eholk): if index is negative, fail.</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  <a class="code hl_define" href="logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(0, <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a41fcec1a1b74c208fe92d705c51f2a81">index</a>);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  set_trap_handler_index(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a41fcec1a1b74c208fe92d705c51f2a81">index</a>);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(has_trap_handler_index());</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>}</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span> </div>
<div class="foldopen" id="foldopen00235" data-start="{" data-end="}">
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">  235</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">WasmCode::ShouldBeLogged</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate) {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  <span class="comment">// The return value is cached in {WasmEngine::IsolateData::log_codes}. Ensure</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  <span class="comment">// to call {WasmEngine::EnableCodeLogging} if this return value would change</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  <span class="comment">// for any isolate. Otherwise we might lose code events.</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  <span class="keywordflow">return</span> isolate-&gt;IsLoggingCodeCreation();</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>}</div>
</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="foldopen" id="foldopen00242" data-start="{" data-end="}">
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a309bc6c5680169670f74f25abc9ad0e2">  242</a></span>std::string <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a309bc6c5680169670f74f25abc9ad0e2">WasmCode::DebugName</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>  <span class="keywordflow">switch</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8a26bf968040e704a34b3d572ba7d3f">kind</a>()) {</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da806ef6ecaaea44fafa40934e34fceef5">kWasmToCapiWrapper</a>:</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm-to-c&quot;</span>;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730">kJumpTable</a>:</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;jump-table&quot;</span>;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4">kWasmToJsWrapper</a>:</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm-to-js&quot;</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="keywordflow">case</span> kInterpreterEntry:</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;interpreter entry&quot;</span>;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">kWasmFunction</a>:</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>      <span class="comment">// Gets handled below</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  }</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span> </div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">ModuleWireBytes</a> wire_bytes(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7505326ebe9aab3ab86719afe8a9a612">native_module</a>()-&gt;wire_bytes());</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7505326ebe9aab3ab86719afe8a9a612">native_module</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>();</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">WireBytesRef</a> name_ref =</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>      <span class="keyword">module</span>-&gt;lazily_generated_names.LookupFunctionName(wire_bytes, index());</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">WasmName</a> name = wire_bytes.<a class="code hl_function" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#aad25d74a24c1f21b337f94460ecc662c">GetNameOrNull</a>(name_ref);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>  std::string name_buffer;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>  <span class="keywordflow">if</span> (name.empty()) {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    name_buffer.resize(32);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    name_buffer.resize(</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        SNPrintF(<a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(&amp;name_buffer.front(), name_buffer.size()),</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                 <span class="stringliteral">&quot;wasm-function[%d]&quot;</span>, <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a41fcec1a1b74c208fe92d705c51f2a81">index</a>()));</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    name_buffer.append(name.begin(), name.end());</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  <span class="keywordflow">return</span> name_buffer;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>}</div>
</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="foldopen" id="foldopen00276" data-start="{" data-end="}">
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8812eaf47c0af7737451c411dd2f15f1">  276</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8812eaf47c0af7737451c411dd2f15f1">WasmCode::LogCode</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <span class="keyword">const</span> <span class="keywordtype">char</span>* source_url,</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                       <span class="keywordtype">int</span> script_id)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">ShouldBeLogged</a>(isolate));</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a9e613d2e2b4efb89259f7e209d0911c2">IsAnonymous</a>() &amp;&amp; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8a26bf968040e704a34b3d572ba7d3f">kind</a>() != <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4">WasmCode::Kind::kWasmToJsWrapper</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  std::string fn_name = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a309bc6c5680169670f74f25abc9ad0e2">DebugName</a>();</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">WasmName</a> name = <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(fn_name);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  <span class="keywordflow">if</span> (native_module_) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module = native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>();</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmDebugSymbols.html">WasmDebugSymbols</a>&amp; symbol =</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <span class="keyword">module</span>-&gt;debug_symbols[WasmDebugSymbols::Type::SourceMap];</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="keyword">auto</span> load_wasm_source_map = isolate-&gt;wasm_load_source_map_callback();</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="keyword">auto</span> source_map = native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#adfb76e34f35dc0075dfa6458491ebc59">GetWasmSourceMap</a>();</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">if</span> (!source_map &amp;&amp; symbol.type == <a class="code hl_enumvalue" href="structv8_1_1internal_1_1wasm_1_1WasmDebugSymbols.html#a8532d4e68c0d024103622db816fcf401ac4d77198cabac1171ccc6b233df6243f">WasmDebugSymbols::Type::SourceMap</a> &amp;&amp;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        !symbol.external_url.is_empty() &amp;&amp; load_wasm_source_map) {</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>      <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">ModuleWireBytes</a> wire_bytes(native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">wire_bytes</a>());</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>      <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">WasmName</a> external_url = wire_bytes.<a class="code hl_function" href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#aad25d74a24c1f21b337f94460ecc662c">GetNameOrNull</a>(symbol.external_url);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>      std::string external_url_string(external_url.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#adc40a57a246645ccf947f03f5c8dee62">data</a>(), external_url.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>      <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">HandleScope</a> scope(isolate);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>      v8::Isolate* v8_isolate = <span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>);</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>      Local&lt;v8::String&gt; source_map_str =</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>          load_wasm_source_map(v8_isolate, external_url_string.c_str());</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>      native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af7f35e6098885c81d9915c96d6b7cf9d">SetWasmSourceMap</a>(</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>          std::make_unique&lt;WasmModuleSourceMap&gt;(v8_isolate, source_map_str));</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    }</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>  }</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>  <span class="comment">// Record source positions before adding code, otherwise when code is added,</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  <span class="comment">// there are no source positions to associate with the added code.</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a62907f7d086c7c661973f20709860049">source_positions</a>().empty()) {</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <a class="code hl_define" href="log_8h.html#a2136964700ae2b6a19ce954e7848210b">LOG_CODE_EVENT</a>(isolate, WasmCodeLinePosInfoRecordEvent(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>(),</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>                                                           <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a62907f7d086c7c661973f20709860049">source_positions</a>()));</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>  }</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  <span class="keywordtype">int</span> code_offset = 0;</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a9e613d2e2b4efb89259f7e209d0911c2">IsAnonymous</a>()) {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    code_offset = native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>()-&gt;<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>[index_].code.offset();</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>  }</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>  <a class="code hl_define" href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a>(isolate, CodeCreateEvent(LogEventListener::CodeTag::kFunction, <span class="keyword">this</span>,</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                                   name, source_url, code_offset, script_id));</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>}</div>
</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span><span class="keywordtype">bool</span> ProtectedInstructionDataCompare(<span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData.html">ProtectedInstructionData</a>&amp; left,</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                                     <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData.html">ProtectedInstructionData</a>&amp; right) {</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  <span class="keywordflow">return</span> left.<a class="code hl_variable" href="structv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData.html#ad53ed09d9db529dc778705518be5967f">instr_offset</a> &lt; right.instr_offset;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>}</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="foldopen" id="foldopen00326" data-start="{" data-end="}">
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a1951335f26c2a59efcd6997ad28b6157">  326</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a1951335f26c2a59efcd6997ad28b6157">WasmCode::IsProtectedInstruction</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>) {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const trap_handler::ProtectedInstructionData&gt;</a> instructions =</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a90b2d5047637c5c548dfdb68727529">protected_instructions</a>();</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData.html">ProtectedInstructionData</a> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>{</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>      <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a> - <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>())};</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  <span class="keywordflow">return</span> std::binary_search(instructions.begin(), instructions.end(), <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>,</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                            ProtectedInstructionDataCompare);</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>}</div>
</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span> </div>
<div class="foldopen" id="foldopen00335" data-start="{" data-end="}">
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8457a62709deef003163c655a448f756">  335</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8457a62709deef003163c655a448f756">WasmCode::Validate</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>  <span class="comment">// The packing strategy for {tagged_parameter_slots} only works if both the</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>  <span class="comment">// max number of parameters and their max combined stack slot usage fits into</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>  <span class="comment">// their respective half of the result value.</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>  <span class="keyword">static_assert</span>(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#af945328e16ca1b7c2a5d2baf50ca445c">wasm::kV8MaxWasmFunctionParams</a> &lt;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                std::numeric_limits&lt;uint16_t&gt;::max());</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kMaxSlotsPerParam = 4;  <span class="comment">// S128 on 32-bit platforms.</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>  <span class="keyword">static_assert</span>(<a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#af945328e16ca1b7c2a5d2baf50ca445c">wasm::kV8MaxWasmFunctionParams</a> * kMaxSlotsPerParam &lt;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                std::numeric_limits&lt;uint16_t&gt;::max());</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91fa3ea02a42f6eb12f120ac558a8ec7">NativeModule::CallIndirectTargetMap</a> function_index_map;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>  <span class="keywordflow">if</span> (native_module_) {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    function_index_map =</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac075badc36b3fdb58a4f15b9a3dd12c9">CreateIndirectCallTargetToFunctionIndexMap</a>();</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>  }</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>  <span class="comment">// Scope for foreign WasmCode pointers.</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>  <span class="comment">// We expect certain relocation info modes to never appear in {WasmCode}</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>  <span class="comment">// objects or to be restricted to a small set of valid values. Hence the</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>  <span class="comment">// iteration below does not use a mask, but visits all relocation data.</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1RelocIterator.html">RelocIterator</a> it(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7ce5e9c4ac84834ffd253b89c0f35d71">reloc_info</a>(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aec3d947bda334f5e27cf71c49674b10d">constant_pool</a>());</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>       !it.<a class="code hl_function" href="classv8_1_1internal_1_1RelocIteratorBase.html#a4e36ec3860d142b680388b2280014ea0">done</a>(); it.next()) {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <a class="code hl_enumeration" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">RelocInfo::Mode</a> mode = it.rinfo()-&gt;rmode();</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="keywordflow">switch</span> (mode) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea39bd1ffa884c00f07773f11ee5ea8f48">RelocInfo::WASM_CALL</a>: {</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> target = it.rinfo()-&gt;wasm_call_address();</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5cff149410fcd416933af17dab385ba0">Lookup</a>(target);</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <a class="code hl_define" href="logging_8h.html#a9154b181227e4b02e465befe50219158">CHECK_NOT_NULL</a>(code);</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730">WasmCode::kJumpTable</a>, code-&gt;kind());</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(code-&gt;contains(target));</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>      }</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8eaf44d1f5521a36a56293dd55fa8e269c6">RelocInfo::WASM_STUB_CALL</a>: {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> target = it.rinfo()-&gt;wasm_stub_call_address();</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5cff149410fcd416933af17dab385ba0">Lookup</a>(target);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <a class="code hl_define" href="logging_8h.html#a9154b181227e4b02e465befe50219158">CHECK_NOT_NULL</a>(code);</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730">WasmCode::kJumpTable</a>, code-&gt;kind());</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(code-&gt;contains(target));</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>      }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea98c891fef4fdd3db6140ef54e117d01f">RelocInfo::WASM_CANONICAL_SIG_ID</a>: {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        uint32_t sig_id = it.rinfo()-&gt;wasm_canonical_sig_id();</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <a class="code hl_define" href="logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(sig_id, <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">GetTypeCanonicalizer</a>()-&gt;GetCurrentNumberOfTypes());</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>      }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea1cc6db35064ce98174704bf423847a61">RelocInfo::WASM_CODE_POINTER_TABLE_ENTRY</a>: {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        <a class="code hl_class" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> call_target =</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>            it.rinfo()-&gt;wasm_code_pointer_table_entry();</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        uint32_t function_index = function_index_map.at(call_target);</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(call_target,</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>                 native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">GetCodePointerHandle</a>(function_index));</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>      }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea723a8870ed824d0646f87123220c709c">RelocInfo::INTERNAL_REFERENCE</a>:</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea3b7f4cf84436d1c2c76bf8e06c2e53bd">RelocInfo::INTERNAL_REFERENCE_ENCODED</a>: {</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> target = it.rinfo()-&gt;target_internal_reference();</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a86612599c4a49e5ff328d3fd108ed267">contains</a>(target));</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>      }</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea4749f69effc3746c91e2472a2e73d718">RelocInfo::EXTERNAL_REFERENCE</a>:</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8eac9e0110e19d8df8e93d56ae136b543e4">RelocInfo::CONST_POOL</a>:</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea5f7b01771fa839eba1164bdc0061a291">RelocInfo::VENEER_POOL</a>:</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        <span class="comment">// These are OK to appear.</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        <a class="code hl_define" href="logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(<span class="stringliteral">&quot;Unexpected mode: %d&quot;</span>, mode);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    }</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>  }</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>}</div>
</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="foldopen" id="foldopen00407" data-start="{" data-end="}">
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0f94a461ae1a32a2931d6cec086860e2">  407</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0f94a461ae1a32a2931d6cec086860e2">WasmCode::MaybePrint</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>  <span class="comment">// Determines whether flags want this code to be printed.</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  <span class="keywordtype">bool</span> function_index_matches =</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>      (!<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a9e613d2e2b4efb89259f7e209d0911c2">IsAnonymous</a>() &amp;&amp;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>       <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_wasm_code_function_index == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a41fcec1a1b74c208fe92d705c51f2a81">index</a>()));</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_code ||</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>      (kind() == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">kWasmFunction</a></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>           ? (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_wasm_code || function_index_matches)</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>           : <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_wasm_stub_code.value())) {</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    std::string name = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a309bc6c5680169670f74f25abc9ad0e2">DebugName</a>();</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0fd2c078c0b8a5e5d2dfa2c253c58676">Print</a>(name.c_str());</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  }</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>}</div>
</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span> </div>
<div class="foldopen" id="foldopen00421" data-start="{" data-end="}">
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0fd2c078c0b8a5e5d2dfa2c253c58676">  421</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0fd2c078c0b8a5e5d2dfa2c253c58676">WasmCode::Print</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>  <a class="code hl_class" href="classv8_1_1internal_1_1StdoutStream.html">StdoutStream</a> os;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>  os &lt;&lt; <span class="stringliteral">&quot;--- WebAssembly code ---\n&quot;</span>;</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a67fc73055bd53a21c7fd76f8c9bb93c3">Disassemble</a>(name, os);</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>  <span class="keywordflow">if</span> (native_module_ &amp;&amp; native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a32aeb7786fe56d49f56d6da667f940ca">HasDebugInfo</a>()) {</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span>* debug_side_table =</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            native_module_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a773f6a9db3d5a181ca810d7a92e19da6">GetDebugInfo</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html#abd6a863dc47b07d34f5b383c79ee3e20">GetDebugSideTableIfExists</a>(<span class="keyword">this</span>)) {</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>      debug_side_table-&gt;Print(os);</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>  }</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>  os &lt;&lt; <span class="stringliteral">&quot;--- End code ---\n&quot;</span>;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>}</div>
</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="foldopen" id="foldopen00434" data-start="{" data-end="}">
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a67fc73055bd53a21c7fd76f8c9bb93c3">  434</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a67fc73055bd53a21c7fd76f8c9bb93c3">WasmCode::Disassemble</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, std::ostream&amp; os,</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                           <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> current_pc)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>  <span class="keywordflow">if</span> (name) os &lt;&lt; <span class="stringliteral">&quot;name: &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a9e613d2e2b4efb89259f7e209d0911c2">IsAnonymous</a>()) os &lt;&lt; <span class="stringliteral">&quot;index: &quot;</span> &lt;&lt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a41fcec1a1b74c208fe92d705c51f2a81">index</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>  os &lt;&lt; <span class="stringliteral">&quot;kind: &quot;</span> &lt;&lt; <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a7d4fcae80d23d6a3fd336b7ed70eee1e">GetWasmCodeKindAsString</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8a26bf968040e704a34b3d572ba7d3f">kind</a>()) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8a26bf968040e704a34b3d572ba7d3f">kind</a>() == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">kWasmFunction</a>) {</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8bd3de600f8533f15759f5770993cb34">is_liftoff</a>() || <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a135625ac865b7b381136e919e5e7c2bd">tier</a>() == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>);</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* compiler =</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8bd3de600f8533f15759f5770993cb34">is_liftoff</a>() ? (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ac92fbbfae3b4073dd57a49cd6a3d7c85">for_debugging</a>() ? <span class="stringliteral">&quot;Liftoff (debug)&quot;</span> : <span class="stringliteral">&quot;Liftoff&quot;</span>)</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                     : <span class="stringliteral">&quot;TurboFan&quot;</span>;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    os &lt;&lt; <span class="stringliteral">&quot;compiler: &quot;</span> &lt;&lt; compiler &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>  }</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  <span class="keywordtype">size_t</span> padding = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>().<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() - unpadded_binary_size_;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  os &lt;&lt; <span class="stringliteral">&quot;Body (size = &quot;</span> &lt;&lt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>().<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() &lt;&lt; <span class="stringliteral">&quot; = &quot;</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>     &lt;&lt; unpadded_binary_size_ &lt;&lt; <span class="stringliteral">&quot; + &quot;</span> &lt;&lt; padding &lt;&lt; <span class="stringliteral">&quot; padding)\n&quot;</span>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>  <span class="keywordtype">int</span> instruction_size = unpadded_binary_size_;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>  <span class="keywordflow">if</span> (constant_pool_offset_ &lt; instruction_size) {</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    instruction_size = constant_pool_offset_;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>  }</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  <span class="keywordflow">if</span> (safepoint_table_offset_ &amp;&amp; safepoint_table_offset_ &lt; instruction_size) {</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    instruction_size = safepoint_table_offset_;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  }</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>  <span class="keywordflow">if</span> (handler_table_offset_ &lt; instruction_size) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    instruction_size = handler_table_offset_;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>  }</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, instruction_size);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span><span class="preprocessor">#ifdef ENABLE_DISASSEMBLER</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>  os &lt;&lt; <span class="stringliteral">&quot;Instructions (size = &quot;</span> &lt;&lt; instruction_size &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  <a class="code hl_function" href="classv8_1_1internal_1_1Disassembler.html#a3dbcf578257496f2a1b1f3db8966f119">Disassembler::Decode</a>(<span class="keyword">nullptr</span>, os, <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>().begin(),</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>                       <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>().begin() + instruction_size,</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>                       <a class="code hl_class" href="classv8_1_1internal_1_1CodeReference.html">CodeReference</a>(<span class="keyword">this</span>), current_pc);</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>  os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a78bb078a03d73444b991c277dd6194">handler_table_size</a>() &gt; 0) {</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <a class="code hl_class" href="classv8_1_1internal_1_1HandlerTable.html">HandlerTable</a> table(<span class="keyword">this</span>);</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    os &lt;&lt; <span class="stringliteral">&quot;Exception Handler Table (size = &quot;</span> &lt;&lt; table.NumberOfReturnEntries()</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>       &lt;&lt; <span class="stringliteral">&quot;):\n&quot;</span>;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    table.HandlerTableReturnPrint(os);</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>  }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>  <span class="keywordflow">if</span> (protected_instructions_size_ &gt; 0) {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    os &lt;&lt; <span class="stringliteral">&quot;Protected instructions:\n pc offset\n&quot;</span>;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; data : <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a90b2d5047637c5c548dfdb68727529">protected_instructions</a>()) {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>      os &lt;&lt; std::setw(10) &lt;&lt; std::hex &lt;&lt; data.instr_offset &lt;&lt; std::setw(10)</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    }</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a62907f7d086c7c661973f20709860049">source_positions</a>().empty()) {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    os &lt;&lt; <span class="stringliteral">&quot;Source positions:\n pc offset  position\n&quot;</span>;</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1SourcePositionTableIterator.html">SourcePositionTableIterator</a> it(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a62907f7d086c7c661973f20709860049">source_positions</a>()); !it.<a class="code hl_function" href="classv8_1_1internal_1_1SourcePositionTableIterator.html#a0845f40c6af62abe649e2a543efc057d">done</a>();</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>         it.Advance()) {</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>      os &lt;&lt; std::setw(10) &lt;&lt; std::hex &lt;&lt; it.code_offset() &lt;&lt; std::dec</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>         &lt;&lt; std::setw(10) &lt;&lt; it.source_position().ScriptOffset()</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>         &lt;&lt; (it.is_statement() ? <span class="stringliteral">&quot;  statement&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>  }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>  <span class="keywordflow">if</span> (deopt_data_size_ &gt; 0) {</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmDeoptView.html">WasmDeoptView</a> view(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a6fb7953d0c7eff21f73f8004030ad2a1">deopt_data</a>());</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmDeoptData.html">WasmDeoptData</a> data = view.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmDeoptView.html#af1fcf3edd7783d8c6779b9615a792b94">GetDeoptData</a>();</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    os &lt;&lt; <span class="stringliteral">&quot;Deopt exits (entries = &quot;</span> &lt;&lt; data.entry_count</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>       &lt;&lt; <span class="stringliteral">&quot;, byte size = &quot;</span> &lt;&lt; deopt_data_size_ &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <span class="keyword">constexpr</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="liftoff-compiler_8cc.html#ac8403346601a16f8902bbe271ff3c261">pc_offset</a>[] = <span class="stringliteral">&quot;pc-offset&quot;</span>;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    <span class="keyword">constexpr</span> <span class="keywordtype">char</span> source_offset[] = <span class="stringliteral">&quot; source-offset&quot;</span>;</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <span class="keyword">constexpr</span> <span class="keywordtype">char</span> translation_index[] = <span class="stringliteral">&quot; translation-index&quot;</span>;</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    os &lt;&lt; <a class="code hl_variable" href="liftoff-compiler_8cc.html#ac8403346601a16f8902bbe271ff3c261">pc_offset</a> &lt;&lt; source_offset &lt;&lt; translation_index &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    uint32_t code_offset = data.deopt_exit_start_offset;</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; data.entry_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>      <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry.html">WasmDeoptEntry</a> entry = view.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmDeoptView.html#a47c97d84e8183f29fdd51be5b63c392b">GetDeoptEntry</a>(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>      os &lt;&lt; std::setw(<span class="keyword">sizeof</span> <a class="code hl_variable" href="liftoff-compiler_8cc.html#ac8403346601a16f8902bbe271ff3c261">pc_offset</a> - 1) &lt;&lt; std::hex &lt;&lt; code_offset</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>         &lt;&lt; std::dec &lt;&lt; std::setw(<span class="keyword">sizeof</span> source_offset - 1)</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>         &lt;&lt; entry.<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry.html#a6d04a31802433fcc5d96dee5d14242dc">bytecode_offset</a> &lt;&lt; std::setw(<span class="keyword">sizeof</span> translation_index - 1)</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>         &lt;&lt; entry.<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry.html#a54f2c5c587bb8d6ca3c718bf143aa2f4">translation_index</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>      code_offset += <a class="code hl_variable" href="classv8_1_1internal_1_1Deoptimizer.html#a2baf047b2ee590dddae72e66e1386983">Deoptimizer::kEagerDeoptExitSize</a>;</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    }</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    os &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>  }</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span> </div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>  <span class="keywordflow">if</span> (safepoint_table_offset_ &gt; 0) {</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <a class="code hl_class" href="classv8_1_1internal_1_1SafepointTable.html">SafepointTable</a> table(<span class="keyword">this</span>);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    table.Print(os);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>  }</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>  os &lt;&lt; <span class="stringliteral">&quot;RelocInfo (size = &quot;</span> &lt;&lt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7ce5e9c4ac84834ffd253b89c0f35d71">reloc_info</a>().<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1RelocIterator.html">RelocIterator</a> it(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7ce5e9c4ac84834ffd253b89c0f35d71">reloc_info</a>(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aec3d947bda334f5e27cf71c49674b10d">constant_pool</a>());</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>       !it.<a class="code hl_function" href="classv8_1_1internal_1_1RelocIteratorBase.html#a4e36ec3860d142b680388b2280014ea0">done</a>(); it.next()) {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    it.rinfo()-&gt;Print(<span class="keyword">nullptr</span>, os);</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>  }</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>  os &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span><span class="preprocessor">#else   </span><span class="comment">// !ENABLE_DISASSEMBLER</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>  os &lt;&lt; <span class="stringliteral">&quot;Instructions (size = &quot;</span> &lt;&lt; instruction_size &lt;&lt; <span class="stringliteral">&quot;, &quot;</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>     &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>().<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>()) &lt;&lt; <span class="stringliteral">&quot;-&quot;</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>     &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">instructions</a>().begin() + instruction_size) &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span><span class="preprocessor">#endif  </span><span class="comment">// !ENABLE_DISASSEMBLER</span></div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>}</div>
</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="foldopen" id="foldopen00537" data-start="{" data-end="}">
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#a7d4fcae80d23d6a3fd336b7ed70eee1e">  537</a></span><span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a7d4fcae80d23d6a3fd336b7ed70eee1e">GetWasmCodeKindAsString</a>(<a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04d">WasmCode::Kind</a> kind) {</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>  <span class="keywordflow">switch</span> (kind) {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">WasmCode::kWasmFunction</a>:</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm function&quot;</span>;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da806ef6ecaaea44fafa40934e34fceef5">WasmCode::kWasmToCapiWrapper</a>:</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm-to-capi&quot;</span>;</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4">WasmCode::kWasmToJsWrapper</a>:</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;wasm-to-js&quot;</span>;</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span><span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="keywordflow">case</span> WasmCode::kInterpreterEntry:</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;interpreter entry&quot;</span>;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730">WasmCode::kJumpTable</a>:</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;jump table&quot;</span>;</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>  }</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown kind&quot;</span>;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>}</div>
</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="foldopen" id="foldopen00555" data-start="{" data-end="}">
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a42a79bd135c2fe3f5aec43a4a39d2cb1">  555</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a42a79bd135c2fe3f5aec43a4a39d2cb1">WasmCode::~WasmCode</a>() {</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>  <span class="keywordflow">if</span> (has_trap_handler_index()) {</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <a class="code hl_function" href="namespacev8_1_1internal_1_1trap__handler.html#a6212dc14540b8761e5f9d7d46ac445ec">trap_handler::ReleaseHandlerData</a>(trap_handler_index());</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>  }</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>}</div>
</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>V8_WARN_UNUSED_RESULT <span class="keywordtype">bool</span> WasmCode::DecRefOnPotentiallyDeadCode() {</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;AddPotentiallyDeadCode(<span class="keyword">this</span>)) {</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <span class="comment">// The code just became potentially dead. The ref count we wanted to</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <span class="comment">// decrement is now transferred to the set of potentially dead code, and</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="comment">// will be decremented when the next GC is run.</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  }</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>  <span class="comment">// If we reach here, the code was already potentially dead. Decrement the ref</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>  <span class="comment">// count, and return true if it drops to zero.</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>  <span class="comment">// This can happen when there were temporary C++ references (e.g. while</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  <span class="comment">// walking a stack) to code objects that are otherwise dead, and this</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>  <span class="comment">// temporary reference is now the last reference.</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span> </div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aac733a220bc5ba8a401b7898cd2a911d">DecRefOnDeadCode</a>();</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>}</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span> </div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen00578" data-start="{" data-end="}">
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aabc336382e10df3a5f7c37ba95d15799">  578</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aabc336382e10df3a5f7c37ba95d15799">WasmCode::DecrementRefCount</a>(<a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCode* const&gt;</a> code_vec) {</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>  <span class="comment">// Decrement the ref counter of all given code objects. Keep the ones whose</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>  <span class="comment">// ref count drops to zero.</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aeb5f29b3650d0c661e7693d367034939">WasmEngine::DeadCodeMap</a> dead_code;</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>  std::vector&lt;WasmCode*&gt; dead_wrappers;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code : code_vec) {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="keywordflow">if</span> (!code-&gt;DecRef()) <span class="keywordflow">continue</span>;  <span class="comment">// Remaining references.</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7505326ebe9aab3ab86719afe8a9a612">native_module</a> = code-&gt;native_module();</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7505326ebe9aab3ab86719afe8a9a612">native_module</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>      dead_code[<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7505326ebe9aab3ab86719afe8a9a612">native_module</a>].push_back(code);</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>      dead_wrappers.push_back(code);</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    }</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>  }</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  <span class="keywordflow">if</span> (dead_code.empty() &amp;&amp; dead_wrappers.empty()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span> </div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>  <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a7205b4150830ce82a81d687f9f0765af">FreeDeadCode</a>(dead_code, dead_wrappers);</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>}</div>
</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="foldopen" id="foldopen00598" data-start="{" data-end="}">
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aa28996c5cbe5173fdf91835423281487">  598</a></span><a class="code hl_class" href="classv8_1_1internal_1_1SourcePosition.html">SourcePosition</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aa28996c5cbe5173fdf91835423281487">WasmCode::GetSourcePositionBefore</a>(<span class="keywordtype">int</span> code_offset) {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>  <a class="code hl_class" href="classv8_1_1internal_1_1SourcePosition.html">SourcePosition</a> <a class="code hl_variable" href="liveedit_8cc.html#a401e942526aac47cef94f478182486e7">position</a>;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1SourcePositionTableIterator.html">SourcePositionTableIterator</a> iterator(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a62907f7d086c7c661973f20709860049">source_positions</a>());</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>       !iterator.<a class="code hl_function" href="classv8_1_1internal_1_1SourcePositionTableIterator.html#a0845f40c6af62abe649e2a543efc057d">done</a>() &amp;&amp; iterator.code_offset() &lt; code_offset;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>       iterator.Advance()) {</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <a class="code hl_variable" href="liveedit_8cc.html#a401e942526aac47cef94f478182486e7">position</a> = iterator.source_position();</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>  }</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="liveedit_8cc.html#a401e942526aac47cef94f478182486e7">position</a>;</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>}</div>
</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="foldopen" id="foldopen00608" data-start="{" data-end="}">
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acd35922706de8e53f6636e2ffee15c47">  608</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acd35922706de8e53f6636e2ffee15c47">WasmCode::GetSourceOffsetBefore</a>(<span class="keywordtype">int</span> code_offset) {</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aa28996c5cbe5173fdf91835423281487">GetSourcePositionBefore</a>(code_offset).<a class="code hl_function" href="classv8_1_1internal_1_1SourcePosition.html#a303c0c4fa47bd9368489bdd75b5931ec">ScriptOffset</a>();</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>}</div>
</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="foldopen" id="foldopen00612" data-start="{" data-end="}">
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0665c8539d19ce1d73de15e50a308ed0">  612</a></span>std::tuple&lt;int, bool, SourcePosition&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0665c8539d19ce1d73de15e50a308ed0">WasmCode::GetInliningPosition</a>(</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    <span class="keywordtype">int</span> inlining_id)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> elem_size = <span class="keyword">sizeof</span>(int) + <span class="keyword">sizeof</span>(<span class="keywordtype">bool</span>) + <span class="keyword">sizeof</span>(<a class="code hl_class" href="classv8_1_1internal_1_1SourcePosition.html">SourcePosition</a>);</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>  <span class="keyword">const</span> uint8_t* <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aa5871171b9acb176f06c4a76532af6d6">inlining_positions</a>().<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>() + elem_size * inlining_id;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aa5871171b9acb176f06c4a76532af6d6">inlining_positions</a>().<a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>());</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>  std::tuple&lt;int, bool, SourcePosition&gt; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>  std::memcpy(&amp;std::get&lt;0&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>), <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <span class="keyword">sizeof</span> std::get&lt;0&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>));</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>  std::memcpy(&amp;std::get&lt;1&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>), <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> + <span class="keyword">sizeof</span> std::get&lt;0&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>),</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>              <span class="keyword">sizeof</span> std::get&lt;1&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>));</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>  std::memcpy(&amp;std::get&lt;2&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>),</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>              <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> + <span class="keyword">sizeof</span> std::get&lt;0&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>) + <span class="keyword">sizeof</span> std::get&lt;1&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>),</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>              <span class="keyword">sizeof</span> std::get&lt;2&gt;(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>));</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>}</div>
</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span> </div>
<div class="foldopen" id="foldopen00627" data-start="{" data-end="}">
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acbb10aa1640d3e9bfaeac3d22a4d15f7">  627</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acbb10aa1640d3e9bfaeac3d22a4d15f7">WasmCode::EstimateCurrentMemoryConsumption</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>  <a class="code hl_define" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>, 104);</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = <span class="keyword">sizeof</span>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ac2265f4016946fd6cebc80a33de464e3">WasmCode</a>);</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>  <span class="comment">// For meta_data_.</span></div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += protected_instructions_size_ + reloc_info_size_ +</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            source_positions_size_ + inlining_positions_size_ +</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>            deopt_data_size_;</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>}</div>
</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span> </div>
<div class="foldopen" id="foldopen00637" data-start="{" data-end="}">
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#aa289065d9ae1bb0c582cbbc494d37bdb">  637</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#aa289065d9ae1bb0c582cbbc494d37bdb">WasmCodeAllocator::WasmCodeAllocator</a>(std::shared_ptr&lt;Counters&gt; async_counters)</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    : async_counters_(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(async_counters)) {</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>  owned_code_space_.reserve(4);</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>}</div>
</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="foldopen" id="foldopen00642" data-start="{" data-end="}">
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a9abc070754afe49eaea6f0d31a55da49">  642</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a9abc070754afe49eaea6f0d31a55da49">WasmCodeAllocator::~WasmCodeAllocator</a>() {</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>  <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">GetWasmCodeManager</a>()-&gt;FreeNativeModule(<a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(owned_code_space_),</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>                                         <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a9f5f12643315075f0a553f61c992fdb1">committed_code_space</a>());</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>}</div>
</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span> </div>
<div class="foldopen" id="foldopen00647" data-start="{" data-end="}">
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#aac5c374b4b033bd08bb50481fda354db">  647</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#aac5c374b4b033bd08bb50481fda354db">WasmCodeAllocator::Init</a>(<a class="code hl_class" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a> code_space) {</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(owned_code_space_.empty());</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(free_code_space_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#ae1c8c42c6b46181491ce58c3680e04a3">IsEmpty</a>());</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>  free_code_space_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">Merge</a>(code_space.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemory.html#acaf3913c1e6e1568fa8fa50f2c74b736">region</a>());</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>  owned_code_space_.emplace_back(std::move(code_space));</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>  async_counters_-&gt;wasm_module_num_code_spaces()-&gt;AddSample(1);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>}</div>
</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span> </div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span><span class="comment">// On Windows, we cannot commit a region that straddles different reservations</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span><span class="comment">// of virtual memory. Because we bump-allocate, and because, if we need more</span></div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span><span class="comment">// memory, we append that memory at the end of the owned_code_space_ list, we</span></div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span><span class="comment">// traverse that list in reverse order to find the reservation(s) that guide how</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span><span class="comment">// to chunk the region to commit.</span></div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span><span class="preprocessor">#if V8_OS_WIN</span></div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span><span class="keyword">constexpr</span> <span class="keywordtype">bool</span> kNeedsToSplitRangeByReservations = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span><span class="keyword">constexpr</span> <span class="keywordtype">bool</span> kNeedsToSplitRangeByReservations = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span> </div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span><a class="code hl_class" href="classv8_1_1base_1_1SmallVector.html">base::SmallVector&lt;base::AddressRegion, 1&gt;</a> SplitRangeByReservationsIfNeeded(</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> range,</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <span class="keyword">const</span> std::vector&lt;VirtualMemory&gt;&amp; owned_code_space) {</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>  <span class="keywordflow">if</span> (!kNeedsToSplitRangeByReservations) <span class="keywordflow">return</span> {range};</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span> </div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>  <a class="code hl_class" href="classv8_1_1base_1_1SmallVector.html">base::SmallVector&lt;base::AddressRegion, 1&gt;</a> split_ranges;</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>  <span class="keywordtype">size_t</span> missing_begin = range.<a class="code hl_function" href="classv8_1_1base_1_1SmallVector.html#a11309184df55803b2e97eabdf1cd8aef">begin</a>();</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>  <span class="keywordtype">size_t</span> missing_end = range.end();</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; vmem : <a class="code hl_function" href="namespacev8_1_1base.html#a7364bf7dcb822d07f7380aeff8d2a77b">base::Reversed</a>(owned_code_space)) {</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> overlap_begin = std::max(missing_begin, vmem.address());</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> overlap_end = std::min(missing_end, vmem.end());</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <span class="keywordflow">if</span> (overlap_begin &gt;= overlap_end) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    split_ranges.<a class="code hl_function" href="classv8_1_1base_1_1SmallVector.html#a52ba6afaadfb2e894fff71b9a44c38db">emplace_back</a>(overlap_begin, overlap_end - overlap_begin);</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="comment">// Opportunistically reduce the missing range. This might terminate the loop</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="comment">// early.</span></div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">if</span> (missing_begin == overlap_begin) missing_begin = overlap_end;</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <span class="keywordflow">if</span> (missing_end == overlap_end) missing_end = overlap_begin;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <span class="keywordflow">if</span> (missing_begin &gt;= missing_end) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>  }</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span><span class="preprocessor">#ifdef ENABLE_SLOW_DCHECKS</span></div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>  <span class="comment">// The returned vector should cover the full range.</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>  <span class="keywordtype">size_t</span> total_split_size = 0;</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> split : split_ranges) total_split_size += split.size();</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(range.size(), total_split_size);</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>  <span class="keywordflow">return</span> split_ranges;</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>}</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span> </div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span><span class="keywordtype">int</span> NumWasmFunctionsInFarJumpTable(uint32_t num_declared_functions) {</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c38ae4d35483f2b9c6e5634c7bf4bd6">NativeModule::kNeedsFarJumpsBetweenCodeSpaces</a></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>             ? <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(num_declared_functions)</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>             : 0;</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>}</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span> </div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span><span class="comment">// Returns an overapproximation of the code size overhead per new code space</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span><span class="comment">// created by the jump tables.</span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span><span class="keywordtype">size_t</span> OverheadPerCodeSpace(uint32_t num_declared_functions) {</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>  <span class="comment">// Overhead for the jump table.</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>  <span class="keywordtype">size_t</span> overhead = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a5515cdbbc42cf3c78581ea13768f74bb">JumpTableAssembler::SizeForNumberOfSlots</a>(num_declared_functions));</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span> </div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>  <span class="comment">// On Win64, we need to reserve some pages at the beginning of an executable</span></div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>  <span class="comment">// space. See {AddCodeSpace}.</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>  overhead += <a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a163e8ada76f0d7319bf51a7fefc33074">Heap::GetCodeRangeReservedAreaSize</a>();</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span> </div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>  <span class="comment">// Overhead for the far jump table.</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>  overhead +=</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>      <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a87add92ae969554c1b14d8ff3e8d7cd2">JumpTableAssembler::SizeForNumberOfFarJumpSlots</a>(</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>          <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>(),</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>          NumWasmFunctionsInFarJumpTable(num_declared_functions)));</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span> </div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>  <span class="keywordflow">return</span> overhead;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>}</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span> </div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span><span class="comment">// Returns an estimate how much code space should be reserved. This can be</span></div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span><span class="comment">// smaller than the passed-in {code_size_estimate}, see comments in the code.</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span><span class="keywordtype">size_t</span> ReservationSize(<span class="keywordtype">size_t</span> code_size_estimate, <span class="keywordtype">int</span> num_declared_functions,</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                       <span class="keywordtype">size_t</span> total_reserved) {</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>  <span class="keywordtype">size_t</span> overhead = OverheadPerCodeSpace(num_declared_functions);</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>  <span class="comment">// Reserve the maximum of</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>  <span class="comment">//   a) needed size + overhead (this is the minimum needed)</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>  <span class="comment">//   b) 2 * overhead (to not waste too much space by overhead)</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>  <span class="comment">//   c) 1/4 of current total reservation size (to grow exponentially)</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>  <span class="comment">// For the minimum size we only take the overhead into account and not the</span></div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>  <span class="comment">// code space estimate, for two reasons:</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>  <span class="comment">//  - The code space estimate is only an estimate; we might actually need less</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>  <span class="comment">//    space later.</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>  <span class="comment">//  - When called at module construction time we pass the estimate for all</span></div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>  <span class="comment">//    code in the module; this can still be split up into multiple spaces</span></div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>  <span class="comment">//    later.</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>  <span class="keywordtype">size_t</span> minimum_size = 2 * overhead;</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>  <span class="keywordtype">size_t</span> suggested_size =</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>      std::max(std::max(<a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(code_size_estimate) + overhead,</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                        minimum_size),</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>               total_reserved / 4);</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span> </div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> max_code_space_size =</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>      <span class="keywordtype">size_t</span>{<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_code_space_size_mb} * <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(minimum_size &gt; max_code_space_size)) {</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>    <span class="keyword">auto</span> oom_detail = <a class="code hl_function" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{}</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>                      &lt;&lt; <span class="stringliteral">&quot;required reservation minimum (&quot;</span> &lt;&lt; minimum_size</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>                      &lt;&lt; <span class="stringliteral">&quot;) is bigger than supported maximum (&quot;</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>                      &lt;&lt; max_code_space_size &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>                                <span class="stringliteral">&quot;Exceeding maximum wasm code space size&quot;</span>,</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>                                oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>  }</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span> </div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>  <span class="comment">// Limit by the maximum code space size.</span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>  <span class="keywordtype">size_t</span> reserve_size = std::min(max_code_space_size, suggested_size);</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span> </div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>  <span class="keywordflow">return</span> reserve_size;</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>}</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span> </div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span><span class="comment">// Sentinel value to be used for {AllocateForCodeInRegion} for specifying no</span></div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span><span class="comment">// restriction on the region to allocate in.</span></div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span><span class="keyword">constexpr</span> base::AddressRegion kUnrestrictedRegion{</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    <a class="code hl_variable" href="namespacev8_1_1base.html#ae714b233e65334e0104cda752fc559c5">kNullAddress</a>, std::numeric_limits&lt;size_t&gt;::max()};</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span> </div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="foldopen" id="foldopen00772" data-start="{" data-end="}">
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#af2b5295be5ab5f4b6371ab8dce603009">  772</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#af2b5295be5ab5f4b6371ab8dce603009">WasmCodeAllocator::InitializeCodeRange</a>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module,</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>                                            <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> region) {</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>  <span class="comment">// On some platforms, specifically Win64, we need to reserve some pages at</span></div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>  <span class="comment">// the beginning of an executable space.</span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>  <span class="comment">// See src/heap/spaces.cc, MemoryAllocator::InitializeCodePageAllocator() and</span></div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>  <span class="comment">// https://cs.chromium.org/chromium/src/components/crash/content/app/crashpad_win.cc?rcl=fd680447881449fba2edcf0589320e7253719212&amp;l=204</span></div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>  <span class="comment">// for details.</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>  <span class="keywordflow">if</span> (WasmCodeManager::CanRegisterUnwindInfoForNonABICompliantCodeRange()) {</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    <span class="keywordtype">size_t</span> size = <a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a163e8ada76f0d7319bf51a7fefc33074">Heap::GetCodeRangeReservedAreaSize</a>();</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, size);</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> padding =</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a24e7306c031d78f7744ca33ba091e0d9">AllocateForCodeInRegion</a>(native_module, size, region);</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>    <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(<span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(padding.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>()), region.begin());</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    <a class="code hl_function" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2409db5c20b55125a1f38d2eecf2341b">win64_unwindinfo::RegisterNonABICompliantCodeRange</a>(</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(region.begin()), region.size());</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>  }</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>}</div>
</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span> </div>
<div class="foldopen" id="foldopen00792" data-start="{" data-end="}">
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a1aa6c58339ee0dc3f42716472fc79fc8">  792</a></span><a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a1aa6c58339ee0dc3f42716472fc79fc8">WasmCodeAllocator::AllocateForCode</a>(</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module, <span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a24e7306c031d78f7744ca33ba091e0d9">AllocateForCodeInRegion</a>(native_module, size, kUnrestrictedRegion);</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>}</div>
</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span> </div>
<div class="foldopen" id="foldopen00797" data-start="{" data-end="}">
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ae4803a09e4d6892714a7fd22fe31446e">  797</a></span><a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ae4803a09e4d6892714a7fd22fe31446e">WasmCodeAllocator::AllocateForWrapper</a>(<span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a24e7306c031d78f7744ca33ba091e0d9">AllocateForCodeInRegion</a>(<span class="keyword">nullptr</span>, size, kUnrestrictedRegion);</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>}</div>
</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span> </div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span><span class="comment">// {native_module} may be {nullptr} when allocating wrapper code.</span></div>
<div class="foldopen" id="foldopen00802" data-start="{" data-end="}">
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a24e7306c031d78f7744ca33ba091e0d9">  802</a></span><a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a24e7306c031d78f7744ca33ba091e0d9">WasmCodeAllocator::AllocateForCodeInRegion</a>(</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* native_module, <span class="keywordtype">size_t</span> size, <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> region) {</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, size);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>  <span class="keyword">auto</span>* <a class="code hl_variable" href="wasm-engine_8cc.html#a7edd6d7cb36a3ca555668ff04ed90737">code_manager</a> = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">GetWasmCodeManager</a>();</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>  size = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(size);</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>  <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> code_space =</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>      free_code_space_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aaae1e5e18b6363b94f228abe6521dd3b">AllocateInRegion</a>(size, region);</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a29afd92431f4eb737887d7c7ff9b9396">is_empty</a>())) {</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <span class="comment">// Only allocations without a specific region are allowed to fail. Otherwise</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    <span class="comment">// the region must have been allocated big enough to hold all initial</span></div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    <span class="comment">// allocations (jump tables etc).</span></div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(kUnrestrictedRegion, region);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span> </div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    <span class="keywordtype">size_t</span> total_reserved = 0;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; vmem : owned_code_space_) total_reserved += vmem.size();</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    uint32_t num_functions =</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        native_module ? native_module-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>()-&gt;<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">num_declared_functions</a> : 0;</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <span class="keywordtype">size_t</span> reserve_size = ReservationSize(size, num_functions, total_reserved);</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    <span class="keywordflow">if</span> (reserve_size &lt; size) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>      <span class="keyword">auto</span> oom_detail = <a class="code hl_class" href="classv8_1_1base_1_1FormattedString.html">base::FormattedString</a>{}</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>                        &lt;&lt; <span class="stringliteral">&quot;cannot reserve space for &quot;</span> &lt;&lt; size</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>                        &lt;&lt; <span class="stringliteral">&quot;bytes of code (maximum reservation size is &quot;</span></div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>                        &lt;&lt; reserve_size &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>      <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Grow wasm code space&quot;</span>,</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>                                  oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    }</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    <a class="code hl_class" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a> new_mem = <a class="code hl_variable" href="wasm-engine_8cc.html#a7edd6d7cb36a3ca555668ff04ed90737">code_manager</a>-&gt;TryAllocate(reserve_size);</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordflow">if</span> (!new_mem.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemory.html#a4e314fe91c3c610bb8495aa6435cba9f">IsReserved</a>()) {</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>      <span class="keyword">auto</span> oom_detail = <a class="code hl_class" href="classv8_1_1base_1_1FormattedString.html">base::FormattedString</a>{}</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>                        &lt;&lt; <span class="stringliteral">&quot;cannot allocate more code space (&quot;</span> &lt;&lt; reserve_size</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>                        &lt;&lt; <span class="stringliteral">&quot; bytes, currently &quot;</span> &lt;&lt; total_reserved &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>      <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Grow wasm code space&quot;</span>,</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>                                  oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    }</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span> </div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> new_region = new_mem.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemory.html#acaf3913c1e6e1568fa8fa50f2c74b736">region</a>();</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    free_code_space_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">Merge</a>(new_region);</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    owned_code_space_.emplace_back(std::move(new_mem));</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#af2b5295be5ab5f4b6371ab8dce603009">InitializeCodeRange</a>(native_module, new_region);</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <span class="keywordflow">if</span> (native_module) {</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>      <a class="code hl_variable" href="wasm-engine_8cc.html#a7edd6d7cb36a3ca555668ff04ed90737">code_manager</a>-&gt;AssignRange(new_region, native_module);</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>      native_module-&gt;AddCodeSpaceLocked(new_region);</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span> </div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>      async_counters_-&gt;wasm_module_num_code_spaces()-&gt;AddSample(</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>          <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(owned_code_space_.size()));</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    }</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span> </div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    code_space = free_code_space_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#a5a78c9832c8962fdc94b954e5b0adb65">Allocate</a>(size);</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a29afd92431f4eb737887d7c7ff9b9396">is_empty</a>());</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>  }</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>  <span class="keyword">const</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> commit_page_size = <a class="code hl_function" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>();</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> commit_start = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), commit_page_size);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> commit_end = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>(), commit_page_size);</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>  <span class="comment">// {commit_start} will be either code_space.start or the start of the next</span></div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>  <span class="comment">// page. {commit_end} will be the start of the page after the one in which</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>  <span class="comment">// the allocation ends.</span></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>  <span class="comment">// We start from an aligned start, and we know we allocated vmem in</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>  <span class="comment">// page multiples.</span></div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>  <span class="comment">// We just need to commit what&#39;s not committed. The page in which we</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>  <span class="comment">// start is already committed (or we start at the beginning of a page).</span></div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>  <span class="comment">// The end needs to be committed all through the end of the page.</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>  <span class="keywordflow">if</span> (commit_start &lt; commit_end) {</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> split_range : SplitRangeByReservationsIfNeeded(</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>             {commit_start, commit_end - commit_start}, owned_code_space_)) {</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>      <a class="code hl_variable" href="wasm-engine_8cc.html#a7edd6d7cb36a3ca555668ff04ed90737">code_manager</a>-&gt;Commit(split_range);</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    }</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>    committed_code_space_.fetch_add(commit_end - commit_start);</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    <span class="comment">// Committed code cannot grow bigger than maximum code space size.</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(committed_code_space_.load(),</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>              <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_committed_code_mb * MB);</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>  }</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">kCodeAlignment</a>));</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>  generated_code_size_.fetch_add(code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>(), std::memory_order_relaxed);</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span> </div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>  <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;Code alloc for %p: 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;,+%zu\n&quot;</span>, <span class="keyword">this</span>,</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>             code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>(), size);</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>  <span class="keywordflow">return</span> {<span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>()), code_space.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">size</a>()};</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>}</div>
</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span> </div>
<div class="foldopen" id="foldopen00882" data-start="{" data-end="}">
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ae6d33802bb8ba17667cb1ae5b32e1aae">  882</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ae6d33802bb8ba17667cb1ae5b32e1aae">WasmCodeAllocator::FreeCode</a>(<a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCode* const&gt;</a> codes) {</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>  <span class="comment">// Zap code area and collect freed code regions.</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html">DisjointAllocationPool</a> freed_regions;</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>  <span class="keywordtype">size_t</span> code_size = 0;</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code : codes) {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    code_size += code-&gt;instructions().size();</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>    freed_regions.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">Merge</a>(<a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a>{code-&gt;instruction_start(),</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>                                            code-&gt;instructions().size()});</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>    <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ae13414c0ae7d8ac16347aa93bf7b5771">ThreadIsolation::UnregisterWasmAllocation</a>(code-&gt;instruction_start(),</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>                                              code-&gt;instructions().size());</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>  }</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>  freed_code_size_.fetch_add(code_size);</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span> </div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>  <span class="comment">// Merge {freed_regions} into {freed_code_space_} and put all ranges of full</span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>  <span class="comment">// pages to decommit into {regions_to_decommit} (decommitting is expensive,</span></div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>  <span class="comment">// so try to merge regions before decommitting).</span></div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html">DisjointAllocationPool</a> regions_to_decommit;</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>  <span class="keywordtype">size_t</span> commit_page_size = <a class="code hl_function" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>();</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> region : freed_regions.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aba736b32e415de8aefbb55c44e0ba04d">regions</a>()) {</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <span class="keyword">auto</span> merged_region = freed_code_space_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">Merge</a>(region);</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> discard_start =</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>        std::max(<a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(merged_region.begin(), commit_page_size),</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                 <a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(region.begin(), commit_page_size));</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> discard_end =</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        std::min(<a class="code hl_function" href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a>(merged_region.end(), commit_page_size),</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                 <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(region.end(), commit_page_size));</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="keywordflow">if</span> (discard_start &gt;= discard_end) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    regions_to_decommit.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">Merge</a>({discard_start, discard_end - discard_start});</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>  }</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span> </div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>  <span class="keyword">auto</span>* <a class="code hl_variable" href="wasm-engine_8cc.html#a7edd6d7cb36a3ca555668ff04ed90737">code_manager</a> = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">GetWasmCodeManager</a>();</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> region : regions_to_decommit.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aba736b32e415de8aefbb55c44e0ba04d">regions</a>()) {</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>    [[maybe_unused]] <span class="keywordtype">size_t</span> old_committed =</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        committed_code_space_.fetch_sub(region.size());</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(old_committed, region.size());</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> split_range :</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>         SplitRangeByReservationsIfNeeded(region, owned_code_space_)) {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>      <a class="code hl_variable" href="wasm-engine_8cc.html#a7edd6d7cb36a3ca555668ff04ed90737">code_manager</a>-&gt;Decommit(split_range);</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    }</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>  }</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>}</div>
</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="foldopen" id="foldopen00924" data-start="{" data-end="}">
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a5d094d325d0686a0da62db1dd40c2688">  924</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a5d094d325d0686a0da62db1dd40c2688">WasmCodeAllocator::GetNumCodeSpaces</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>  <span class="keywordflow">return</span> owned_code_space_.size();</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>}</div>
</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a16196a1962694773b11f2434c5d7becf">NativeModule::NativeModule</a>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>                           <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features,</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>                           <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports,</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>                           <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#ae73da17de18352a106bb4e622f610d85">DynamicTiering</a> dynamic_tiering,</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                           <a class="code hl_class" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a> code_space,</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                           std::shared_ptr&lt;const WasmModule&gt; module,</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                           std::shared_ptr&lt;Counters&gt; async_counters,</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                           std::shared_ptr&lt;NativeModule&gt;* shared_this)</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    : engine_scope_(</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>          <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;GetBarrierForBackgroundCompile()-&gt;TryLock()),</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>      code_allocator_(async_counters),</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>      enabled_features_(enabled_features),</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>      compile_imports_(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(compile_imports)),</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>      module_(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(module)),</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>      fast_api_targets_(</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>          new <a class="code hl_namespace" href="namespacestd.html">std</a>::atomic&lt;<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a>&gt;[module_-&gt;num_imported_functions]()),</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>      fast_api_signatures_(</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>          new <a class="code hl_namespace" href="namespacestd.html">std</a>::atomic&lt;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>              const <a class="code hl_class" href="classv8_1_1internal_1_1Signature.html">MachineSignature</a>*&gt;[module_-&gt;num_imported_functions]()) {</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(engine_scope_);</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>  <span class="comment">// We receive a pointer to an empty {std::shared_ptr}, and install ourselve</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>  <span class="comment">// there.</span></div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(shared_this);</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>  <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(*shared_this);</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>  shared_this-&gt;reset(<span class="keyword">this</span>);</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>  compilation_state_ =</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>      CompilationState::New(*shared_this, std::move(async_counters),</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                            dynamic_tiering, detected_features);</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>  compilation_state_-&gt;InitCompileJob();</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(module_);</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>  <span class="keywordflow">if</span> (module_-&gt;num_declared_functions &gt; 0) {</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    code_table_ =</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        std::make_unique&lt;WasmCode*[]&gt;(module_-&gt;num_declared_functions);</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    InitializeCodePointerTableHandles(module_-&gt;num_declared_functions);</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>    tiering_budgets_ = std::make_unique&lt;std::atomic&lt;uint32_t&gt;[]&gt;(</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        module_-&gt;num_declared_functions);</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    <span class="comment">// The tiering budget is accessed directly from generated code.</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>    <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(*tiering_budgets_.get()) == <span class="keyword">sizeof</span>(uint32_t));</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span> </div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>    std::fill_n(tiering_budgets_.get(), module_-&gt;num_declared_functions,</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_tiering_budget);</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>  }</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span> </div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span> </div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>  <span class="comment">// Even though there cannot be another thread using this object (since we</span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>  <span class="comment">// are just constructing it), we need to hold the mutex to fulfill the</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>  <span class="comment">// precondition of {WasmCodeAllocator::Init}, which calls</span></div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>  <span class="comment">// {NativeModule::AddCodeSpaceLocked}.</span></div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard{&amp;allocation_mutex_};</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>  <span class="keyword">auto</span> initial_region = code_space.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemory.html#acaf3913c1e6e1568fa8fa50f2c74b736">region</a>();</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>  code_allocator_.Init(std::move(code_space));</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>  code_allocator_.InitializeCodeRange(<span class="keyword">this</span>, initial_region);</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>  AddCodeSpaceLocked(initial_region);</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>}</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span> </div>
<div class="foldopen" id="foldopen00984" data-start="{" data-end="}">
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a681d9765150a305cb980bee8c01044a2">  984</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a681d9765150a305cb980bee8c01044a2">NativeModule::ReserveCodeTableForTesting</a>(uint32_t max_functions) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span> </div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>  <a class="code hl_define" href="logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a>(module_-&gt;num_declared_functions, max_functions);</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>  <span class="keyword">auto</span> new_table = std::make_unique&lt;WasmCode*[]&gt;(max_functions);</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>  <span class="keywordflow">if</span> (module_-&gt;num_declared_functions &gt; 0) {</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    memcpy(new_table.get(), code_table_.get(),</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>           module_-&gt;num_declared_functions * <span class="keyword">sizeof</span>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>*));</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>  }</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>  code_table_ = std::move(new_table);</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac7e788f315225a2a75db5ecdba7f1da8">InitializeCodePointerTableHandles</a>(max_functions);</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span> </div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(1, code_space_data_.size());</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>  <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> single_code_space_region = code_space_data_[0].region;</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>  <span class="comment">// Re-allocate the near and far jump tables.</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>  main_jump_table_ = CreateEmptyJumpTableInRegionLocked(</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a5515cdbbc42cf3c78581ea13768f74bb">JumpTableAssembler::SizeForNumberOfSlots</a>(max_functions),</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>      single_code_space_region, <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a4237d3e837c403339afce6a8387246cb">JumpTableType::kJumpTable</a>);</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>      single_code_space_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#ad799a0c1d53c9117b94f95e6bc742e66">contains</a>(main_jump_table_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>()));</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>  main_far_jump_table_ = CreateEmptyJumpTableInRegionLocked(</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a87add92ae969554c1b14d8ff3e8d7cd2">JumpTableAssembler::SizeForNumberOfFarJumpSlots</a>(</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>          <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>(),</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>          NumWasmFunctionsInFarJumpTable(max_functions)),</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>      single_code_space_region, <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a693267f9d764c2f577d25c2afc461a10">JumpTableType::kFarJumpTable</a>);</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(single_code_space_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#ad799a0c1d53c9117b94f95e6bc742e66">contains</a>(</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>      main_far_jump_table_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>()));</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>  code_space_data_[0].jump_table = main_jump_table_;</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7eebb8a25711eac01dfad476ab555f66">InitializeJumpTableForLazyCompilation</a>(max_functions);</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>}</div>
</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span> </div>
<div class="foldopen" id="foldopen01017" data-start="{" data-end="}">
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5dcbc5c21a8a83b7787033a13b7c48ad"> 1017</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5dcbc5c21a8a83b7787033a13b7c48ad">NativeModule::LogWasmCodes</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Script&gt;</a> script) {</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>  <a class="code hl_class" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> no_gc;</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">WasmCode::ShouldBeLogged</a>(isolate)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span> </div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<span class="stringliteral">&quot;v8.wasm&quot;</span>, <span class="stringliteral">&quot;wasm.LogWasmCodes&quot;</span>, <span class="stringliteral">&quot;functions&quot;</span>,</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>               module_-&gt;num_declared_functions);</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span> </div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;Object&gt;</a> url_obj = script-&gt;name();</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsString(url_obj) || IsUndefined(url_obj));</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>  std::unique_ptr&lt;char[]&gt; source_url =</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>      IsString(url_obj) ? <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;String&gt;</a>(url_obj)-&gt;ToCString()</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>                        : std::unique_ptr&lt;char[]&gt;(<span class="keyword">new</span> <span class="keywordtype">char</span>[1]{<span class="charliteral">&#39;\0&#39;</span>});</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span> </div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>  <span class="comment">// Log all owned code, not just the current entries in the code table. This</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>  <span class="comment">// will also include import wrappers.</span></div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; code : <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a26241881bc9c29ebcbfe2109c4a64cf7">SnapshotAllOwnedCode</a>()) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    code-&gt;LogCode(isolate, source_url.get(), script-&gt;id());</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>  }</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>}</div>
</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span> </div>
<div class="foldopen" id="foldopen01038" data-start="{" data-end="}">
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abdeee50fefaf3f7666243cff1a13b3da"> 1038</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abdeee50fefaf3f7666243cff1a13b3da">NativeModule::AddCodeForTesting</a>(<a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Code&gt;</a> code,</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>                                          uint64_t signature_hash) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> relocation_size = code-&gt;relocation_size();</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>  <a class="code hl_class" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;uint8_t&gt;</a> reloc_info =</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>      <a class="code hl_function" href="namespacev8_1_1base.html#abc1a5cbcd5118aa93d683e4875fa029c">base::OwnedCopyOf</a>(code-&gt;relocation_start(), relocation_size);</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;TrustedByteArray&gt;</a> source_pos_table(</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>      code-&gt;source_position_table(), code-&gt;instruction_stream()-&gt;GetIsolate());</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>  <span class="keywordtype">int</span> source_pos_len = source_pos_table-&gt;length();</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>  <a class="code hl_class" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;uint8_t&gt;</a> source_pos =</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>      <a class="code hl_function" href="namespacev8_1_1base.html#abc1a5cbcd5118aa93d683e4875fa029c">base::OwnedCopyOf</a>(source_pos_table-&gt;begin(), source_pos_len);</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span> </div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>  <span class="keyword">static_assert</span>(<a class="code hl_variable" href="classv8_1_1internal_1_1InstructionStream.html#a16ed052d97bcdbbcc973bd4e6061d64a">InstructionStream::kOnHeapBodyIsContiguous</a>);</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> instructions(</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>      <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(code-&gt;body_start()),</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>      <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(code-&gt;body_size()));</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a> = code-&gt;stack_slots();</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span> </div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>  <span class="comment">// Metadata offsets in InstructionStream objects are relative to the start of</span></div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>  <span class="comment">// the metadata section, whereas WasmCode expects offsets relative to</span></div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>  <span class="comment">// instruction_start.</span></div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> base_offset = code-&gt;instruction_size();</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>  <span class="comment">// TODO(jgruber,v8:8758): Remove this translation. It exists only because</span></div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>  <span class="comment">// InstructionStream objects contains real offsets but WasmCode expects an</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>  <span class="comment">// offset of 0 to mean &#39;empty&#39;.</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> safepoint_table_offset =</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>      code-&gt;has_safepoint_table() ? base_offset + code-&gt;safepoint_table_offset()</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                                  : 0;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> handler_table_offset = base_offset + code-&gt;handler_table_offset();</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> constant_pool_offset = base_offset + code-&gt;constant_pool_offset();</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> code_comments_offset = base_offset + code-&gt;code_comments_offset();</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span> </div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard{&amp;allocation_mutex_};</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> dst_code_bytes =</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>      code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a1aa6c58339ee0dc3f42716472fc79fc8">AllocateForCode</a>(<span class="keyword">this</span>, instructions.size());</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>  {</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    <a class="code hl_class" href="classv8_1_1internal_1_1WritableJitAllocation.html">WritableJitAllocation</a> jit_allocation =</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ae2e342788fbcd47076ccce4a1996c464">ThreadIsolation::RegisterJitAllocation</a>(</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>()),</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>(),</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>            <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0ea3d2a650902eeb3540a581b2abbb17bb8">ThreadIsolation::JitAllocationType::kWasmCode</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    jit_allocation.<a class="code hl_function" href="classv8_1_1internal_1_1WritableJitAllocation.html#a5214a39ff535864c1f6ae1968547208d">CopyCode</a>(0, instructions.begin(), instructions.size());</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span> </div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    <span class="comment">// Apply the relocation delta by iterating over the RelocInfo.</span></div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>    intptr_t delta = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>()) -</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>                     code-&gt;instruction_start();</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>    <span class="keywordtype">int</span> mode_mask =</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1RelocInfo.html#a3674f1738fbd7b36d670397d0fbd363e">RelocInfo::kApplyMask</a> | <a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a4bb9ca8ff590a4b9a46751997f9f9c5e">RelocInfo::ModeMask</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8eaf44d1f5521a36a56293dd55fa8e269c6">RelocInfo::WASM_STUB_CALL</a>) |</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        <a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a4bb9ca8ff590a4b9a46751997f9f9c5e">RelocInfo::ModeMask</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea1cc6db35064ce98174704bf423847a61">RelocInfo::WASM_CODE_POINTER_TABLE_ENTRY</a>);</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    <span class="keyword">auto</span> jump_tables_ref =</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        FindJumpTablesForRegionLocked(<a class="code hl_function" href="namespacev8_1_1base.html#a576345f40485ddc3e105508023924217">base::AddressRegionOf</a>(dst_code_bytes));</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> dst_code_addr = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>());</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> constant_pool_start = dst_code_addr + constant_pool_offset;</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>    <a class="code hl_class" href="classv8_1_1internal_1_1RelocIterator.html">RelocIterator</a> orig_it(*code, mode_mask);</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1WritableRelocIterator.html">WritableRelocIterator</a> it(jit_allocation, dst_code_bytes,</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>                                  reloc_info.<a class="code hl_function" href="classv8_1_1base_1_1OwnedVector.html#af39d85796ffd00480472cde62fb36012">as_vector</a>(), constant_pool_start,</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                                  mode_mask);</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>         !it.<a class="code hl_function" href="classv8_1_1internal_1_1RelocIteratorBase.html#a4e36ec3860d142b680388b2280014ea0">done</a>(); it.next(), orig_it.<a class="code hl_function" href="classv8_1_1internal_1_1RelocIteratorBase.html#a571153ba88b558f4994e7ef8b6b6d71f">next</a>()) {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>      <a class="code hl_enumeration" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">RelocInfo::Mode</a> mode = it.rinfo()-&gt;rmode();</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a9b6cc7beedb93c75dda2852cb6af822e">RelocInfo::IsWasmStubCall</a>(mode)) {</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>        uint32_t stub_call_tag = orig_it.<a class="code hl_function" href="classv8_1_1internal_1_1RelocIteratorBase.html#aececb928d612751179eb8a5d61e81922">rinfo</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a4532875f67c1658431b317da15aaa1b9">wasm_call_tag</a>();</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>        <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(stub_call_tag,</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>                  <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(Builtin::kFirstBytecodeHandler));</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        <a class="code hl_enumeration" href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52">Builtin</a> builtin = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52">Builtin</a><span class="keyword">&gt;</span>(stub_call_tag);</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> entry = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8697f83af39e72a0327a6d299e1e23b7">GetJumpTableEntryForBuiltin</a>(builtin, jump_tables_ref);</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>        it.rinfo()-&gt;set_wasm_stub_call_address(entry);</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#ace9340a0c27b322249d990c3b6351cea">RelocInfo::IsWasmCodePointerTableEntry</a>(mode)) {</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>        uint32_t function_index =</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>            it.rinfo()-&gt;wasm_code_pointer_table_entry().value();</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>        <a class="code hl_class" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> target = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">GetCodePointerHandle</a>(function_index);</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>        it.rinfo()-&gt;set_wasm_code_pointer_table_entry(target,</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                                                      <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abef7e063903876c844c905764b46b438acb3ba39651f2444a7fff95297d974390">SKIP_ICACHE_FLUSH</a>);</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>        it.rinfo()-&gt;apply(delta);</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>      }</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>    }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>  }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span> </div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>  <span class="comment">// Flush the i-cache after relocation.</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4ae783a89fc65122f5edc866f1209176">FlushInstructionCache</a>(dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>(), dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span> </div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>  std::unique_ptr&lt;WasmCode&gt; new_code{</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>      <span class="keyword">new</span> <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>{<span class="keyword">this</span>,                     <span class="comment">// native_module</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>                   <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a1bb1a5429ae3d1ec380de1b5da81238f">kAnonymousFuncIndex</a>,      <span class="comment">// index</span></div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                   dst_code_bytes,           <span class="comment">// instructions</span></div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                   <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a>,              <span class="comment">// stack_slots</span></div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>                   0,                        <span class="comment">// ool_spills</span></div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>                   0,                        <span class="comment">// tagged_parameter_slots</span></div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>                   safepoint_table_offset,   <span class="comment">// safepoint_table_offset</span></div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>                   handler_table_offset,     <span class="comment">// handler_table_offset</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>                   constant_pool_offset,     <span class="comment">// constant_pool_offset</span></div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>                   code_comments_offset,     <span class="comment">// code_comments_offset</span></div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>                   instructions.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">length</a>(),    <span class="comment">// unpadded_binary_size</span></div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>                   {},                       <span class="comment">// protected_instructions</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>                   reloc_info.<a class="code hl_function" href="classv8_1_1base_1_1OwnedVector.html#af39d85796ffd00480472cde62fb36012">as_vector</a>(),   <span class="comment">// reloc_info</span></div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>                   source_pos.<a class="code hl_function" href="classv8_1_1base_1_1OwnedVector.html#af39d85796ffd00480472cde62fb36012">as_vector</a>(),   <span class="comment">// source positions</span></div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>                   {},                       <span class="comment">// inlining positions</span></div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>                   {},                       <span class="comment">// deopt data</span></div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>                   <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">WasmCode::kWasmFunction</a>,  <span class="comment">// kind</span></div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>                   <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>,     <span class="comment">// tier</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>                   <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>,         <span class="comment">// for_debugging</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>                   signature_hash}};         <span class="comment">// signature_hash</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>  new_code-&gt;MaybePrint();</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>  new_code-&gt;Validate();</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span> </div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>  <span class="keywordflow">return</span> PublishCodeLocked(std::move(new_code),</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>                           <a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html#a4c0e64721e6f0d179c1b2151a97bbc4a">UnpublishedWasmCode::kNoAssumptions</a>);</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>}</div>
</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span> </div>
<div class="foldopen" id="foldopen01146" data-start="{" data-end="}">
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7eebb8a25711eac01dfad476ab555f66"> 1146</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7eebb8a25711eac01dfad476ab555f66">NativeModule::InitializeJumpTableForLazyCompilation</a>(</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>    uint32_t num_wasm_functions) {</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>  <span class="keywordflow">if</span> (!num_wasm_functions) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span> </div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>  <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(lazy_compile_table_);</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>  lazy_compile_table_ = CreateEmptyJumpTableLocked(</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a52670982950dc90851cb4a1de6e97781">JumpTableAssembler::SizeForNumberOfLazyFunctions</a>(num_wasm_functions),</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>      <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a0aeb6cda2e68c213e2a6670941658d8b">JumpTableType::kLazyCompileTable</a>);</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span> </div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>  <a class="code hl_define" href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a>(1, code_space_data_.size());</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>  <span class="keyword">const</span> CodeSpaceData&amp; code_space_data = code_space_data_[0];</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(code_space_data.jump_table);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(code_space_data.far_jump_table);</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span> </div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> compile_lazy_address =</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>      code_space_data.far_jump_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() +</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a4e616135983a522caacfc5b4bf44bcd3">JumpTableAssembler::FarJumpSlotIndexToOffset</a>(</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>          <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a282118f97cf3fce4133b63c1c15906bc">BuiltinLookup::JumptableIndexForBuiltin</a>(Builtin::kWasmCompileLazy));</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span> </div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#ae71b16baa415877eb767aeb926b938e5">JumpTableAssembler::GenerateLazyCompileTable</a>(</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>      lazy_compile_table_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>(), num_wasm_functions,</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>      module_-&gt;num_imported_functions, compile_lazy_address);</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span> </div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a8d1850fd6a11a830c0b62ccfe4906baf">JumpTableAssembler::InitializeJumpsToLazyCompileTable</a>(</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>      code_space_data.jump_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>(), num_wasm_functions,</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>      lazy_compile_table_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>());</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html">WasmCodePointerTable</a>* code_pointer_table =</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>      <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a0a36931b3d2bbcdfcbb253b229838952">GetProcessWideWasmCodePointerTable</a>();</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>  <a class="code hl_class" href="classv8_1_1internal_1_1RwxMemoryWriteScope.html">WasmCodePointerTable::WriteScope</a> write_scope(</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>      <span class="stringliteral">&quot;Initialize WasmCodePointerTable&quot;</span>);</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(num_wasm_functions, code_pointer_handles_size_);</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html">TypeCanonicalizer</a>* type_canonicalizer = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">GetTypeCanonicalizer</a>();</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_wasm_functions; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    uint64_t signature_hash = module_-&gt;signature_hash(</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>        type_canonicalizer, module_-&gt;num_imported_functions + <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>    code_pointer_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ab4376a858eb1237ab620dca61294d690">SetEntrypointWithWriteScope</a>(</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>        code_pointer_handles_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>],</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>        code_space_data.jump_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() +</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>            <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a75af4ab220bf462ded5d5cc62d9da9da">JumpTableAssembler::JumpSlotIndexToOffset</a>(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>),</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        signature_hash, write_scope);</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>  }</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>}</div>
</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span> </div>
<div class="foldopen" id="foldopen01191" data-start="{" data-end="}">
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#aafa35dbd8dcc12821a84cb56594ee2df"> 1191</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#aafa35dbd8dcc12821a84cb56594ee2df">NativeModule::UseLazyStubLocked</a>(uint32_t func_index) {</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(module_-&gt;num_imported_functions, func_index);</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(func_index,</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>            module_-&gt;num_imported_functions + module_-&gt;num_declared_functions);</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>  <span class="comment">// Avoid opening a new write scope per function. The caller should hold the</span></div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>  <span class="comment">// scope instead.</span></div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(lazy_compile_table_);</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span> </div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>  <span class="comment">// Add jump table entry for jump to the lazy compile stub.</span></div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>  uint32_t slot_index = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), func_index);</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>  <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(code_table_[slot_index]);</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span> </div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> jump_table_target =</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>      main_jump_table_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() +</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a75af4ab220bf462ded5d5cc62d9da9da">JumpTableAssembler::JumpSlotIndexToOffset</a>(slot_index);</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> lazy_compile_target =</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>      lazy_compile_table_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() +</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#ab9d14294753cfc3099f3612018a8d6e6">JumpTableAssembler::LazyCompileSlotIndexToOffset</a>(slot_index);</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>  uint64_t signature_hash =</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>      module_-&gt;signature_hash(<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">GetTypeCanonicalizer</a>(), func_index);</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>  PatchJumpTablesLocked(slot_index, lazy_compile_target, jump_table_target,</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>                        signature_hash);</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>}</div>
</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span> </div>
<div class="foldopen" id="foldopen01217" data-start="{" data-end="}">
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ab37173d38eb0a6e707f8636ea5519a8d"> 1217</a></span>std::unique_ptr&lt;WasmCode&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ab37173d38eb0a6e707f8636ea5519a8d">NativeModule::AddCode</a>(</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1CodeDesc.html">CodeDesc</a>&amp; desc, <span class="keywordtype">int</span> <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a>, <span class="keywordtype">int</span> ool_spill_count,</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    uint32_t tagged_parameter_slots,</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> protected_instructions_data,</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> source_position_table,</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> inlining_positions,</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> deopt_data, <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04d">WasmCode::Kind</a> kind,</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> tier, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5b">ForDebugging</a> for_debugging) {</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> code_space;</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html">NativeModule::JumpTablesRef</a> jump_table_ref;</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>  {</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard{&amp;allocation_mutex_};</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    code_space = code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a1aa6c58339ee0dc3f42716472fc79fc8">AllocateForCode</a>(<span class="keyword">this</span>, desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#af887603bc5c17ab365f80879c2660727">instr_size</a>);</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>    jump_table_ref =</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>        FindJumpTablesForRegionLocked(<a class="code hl_function" href="namespacev8_1_1base.html#a576345f40485ddc3e105508023924217">base::AddressRegionOf</a>(code_space));</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>  }</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>  <span class="comment">// Only Liftoff code can have the {frame_has_feedback_slot} bit set.</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(tier, <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>);</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>  <span class="keywordtype">bool</span> frame_has_feedback_slot = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>  <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ae2e342788fbcd47076ccce4a1996c464">ThreadIsolation::RegisterJitAllocation</a>(</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>      <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(code_space.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>()), code_space.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>(),</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>      <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0ea3d2a650902eeb3540a581b2abbb17bb8">ThreadIsolation::JitAllocationType::kWasmCode</a>);</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>  <span class="keywordflow">return</span> AddCodeWithCodeSpace(</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, desc, <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a>, ool_spill_count, tagged_parameter_slots,</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>      protected_instructions_data, source_position_table, inlining_positions,</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>      deopt_data, kind, tier, for_debugging, frame_has_feedback_slot,</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>      code_space, jump_table_ref);</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>}</div>
</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span> </div>
<div class="foldopen" id="foldopen01246" data-start="{" data-end="}">
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a58ee010c88ea49154c8528518931dbc2"> 1246</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a58ee010c88ea49154c8528518931dbc2">NativeModule::FreeCodePointerTableHandles</a>() {</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html">WasmCodePointerTable</a>* code_pointer_table =</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>      <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a0a36931b3d2bbcdfcbb253b229838952">GetProcessWideWasmCodePointerTable</a>();</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; code_pointer_handles_size_; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    code_pointer_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#a65f15597b54747d33d9d892912b1c5f4">FreeEntry</a>(code_pointer_handles_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]);</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>  }</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span> </div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>  code_pointer_handles_.reset();</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>  code_pointer_handles_size_ = 0;</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>}</div>
</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span> </div>
<div class="foldopen" id="foldopen01257" data-start="{" data-end="}">
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac7e788f315225a2a75db5ecdba7f1da8"> 1257</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac7e788f315225a2a75db5ecdba7f1da8">NativeModule::InitializeCodePointerTableHandles</a>(</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>    uint32_t num_wasm_functions) {</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>  <span class="keywordflow">if</span> (code_pointer_handles_size_ != 0) {</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>    <span class="comment">// During testing, we might already have code pointer handles allocated.</span></div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a58ee010c88ea49154c8528518931dbc2">FreeCodePointerTableHandles</a>();</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>  }</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>  code_pointer_handles_ =</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>      std::make_unique&lt;WasmCodePointer[]&gt;(num_wasm_functions);</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>  code_pointer_handles_size_ = num_wasm_functions;</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span> </div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html">WasmCodePointerTable</a>* code_pointer_table =</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>      <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a0a36931b3d2bbcdfcbb253b229838952">GetProcessWideWasmCodePointerTable</a>();</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_wasm_functions; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>    code_pointer_handles_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = code_pointer_table-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ad5e11c7f8d574045296d9d8c07f928f8">AllocateUninitializedEntry</a>();</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>  }</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>}</div>
</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span> </div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>std::unique_ptr&lt;WasmCode&gt; NativeModule::AddCodeWithCodeSpace(</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1CodeDesc.html">CodeDesc</a>&amp; desc, <span class="keywordtype">int</span> <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a>, <span class="keywordtype">int</span> ool_spill_count,</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    uint32_t tagged_parameter_slots,</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> protected_instructions_data,</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> source_position_table,</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> inlining_positions,</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> deopt_data, <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04d">WasmCode::Kind</a> kind,</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> tier, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5b">ForDebugging</a> for_debugging,</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>    <span class="keywordtype">bool</span> frame_has_feedback_slot, <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> dst_code_bytes,</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>    <span class="keyword">const</span> JumpTablesRef&amp; jump_tables) {</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> reloc_info{</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>      desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a0640b83e72c68ce482d00ce65b0732cf">buffer</a> + desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#ab886efa479651e14e7e6bc708a4be521">buffer_size</a> - desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a4ec6827a7510122e162e8849e387f33b">reloc_size</a>,</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>      <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a4ec6827a7510122e162e8849e387f33b">reloc_size</a>)};</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>  UpdateCodeSize(desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#af887603bc5c17ab365f80879c2660727">instr_size</a>, tier, for_debugging);</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span> </div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>  <span class="comment">// TODO(jgruber,v8:8758): Remove this translation. It exists only because</span></div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>  <span class="comment">// CodeDesc contains real offsets but WasmCode expects an offset of 0 to mean</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>  <span class="comment">// &#39;empty&#39;.</span></div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> safepoint_table_offset =</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>      desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a0ef1d82572dad59b3e6aedc82bf1247f">safepoint_table_size</a> == 0 ? 0 : desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#ae607eb84e6b2870d1e80928c4e5e1cde">safepoint_table_offset</a>;</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> handler_table_offset = desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a67a9dadee748e8f0ab644b5a3e282cd9">handler_table_offset</a>;</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> constant_pool_offset = desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a95ad53de51277b77af42d916e2565e24">constant_pool_offset</a>;</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> code_comments_offset = desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#afd7aefc249b9a1db13e3d00f95f94e09">code_comments_offset</a>;</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> instr_size = desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#af887603bc5c17ab365f80879c2660727">instr_size</a>;</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span> </div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>  {</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <a class="code hl_class" href="classv8_1_1internal_1_1WritableJitAllocation.html">WritableJitAllocation</a> jit_allocation = <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ad005e4948f48131f0f8727020bd52b68">ThreadIsolation::LookupJitAllocation</a>(</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>        <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>()),</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>        dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>(), <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0ea3d2a650902eeb3540a581b2abbb17bb8">ThreadIsolation::JitAllocationType::kWasmCode</a>,</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>        <span class="keyword">true</span>);</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>    jit_allocation.<a class="code hl_function" href="classv8_1_1internal_1_1WritableJitAllocation.html#a5214a39ff535864c1f6ae1968547208d">CopyCode</a>(0, desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a0640b83e72c68ce482d00ce65b0732cf">buffer</a>, desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#af887603bc5c17ab365f80879c2660727">instr_size</a>);</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span> </div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="comment">// Apply the relocation delta by iterating over the RelocInfo.</span></div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    intptr_t delta = dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>() - desc.<a class="code hl_variable" href="classv8_1_1internal_1_1CodeDesc.html#a0640b83e72c68ce482d00ce65b0732cf">buffer</a>;</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    <span class="keywordtype">int</span> mode_mask =</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>        <a class="code hl_variable" href="classv8_1_1internal_1_1RelocInfo.html#a3674f1738fbd7b36d670397d0fbd363e">RelocInfo::kApplyMask</a> | <a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a4bb9ca8ff590a4b9a46751997f9f9c5e">RelocInfo::ModeMask</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea39bd1ffa884c00f07773f11ee5ea8f48">RelocInfo::WASM_CALL</a>) |</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>        <a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a4bb9ca8ff590a4b9a46751997f9f9c5e">RelocInfo::ModeMask</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8eaf44d1f5521a36a56293dd55fa8e269c6">RelocInfo::WASM_STUB_CALL</a>) |</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>        <a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a4bb9ca8ff590a4b9a46751997f9f9c5e">RelocInfo::ModeMask</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea1cc6db35064ce98174704bf423847a61">RelocInfo::WASM_CODE_POINTER_TABLE_ENTRY</a>);</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> code_start = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>());</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> constant_pool_start = code_start + constant_pool_offset;</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span> </div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>    <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1WritableRelocIterator.html">WritableRelocIterator</a> it(jit_allocation, dst_code_bytes, reloc_info,</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>                                  constant_pool_start, mode_mask);</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>         !it.<a class="code hl_function" href="classv8_1_1internal_1_1RelocIteratorBase.html#a4e36ec3860d142b680388b2280014ea0">done</a>(); it.next()) {</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>      <a class="code hl_enumeration" href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">RelocInfo::Mode</a> mode = it.rinfo()-&gt;rmode();</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a7ced4909c9b4b70bf6b682825d75b25e">RelocInfo::IsWasmCall</a>(mode)) {</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>        uint32_t call_tag = it.rinfo()-&gt;wasm_call_tag();</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> target = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c0e38351c07fa1377db0a30e94ac8c0">GetNearCallTargetForFunction</a>(call_tag, jump_tables);</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>        it.rinfo()-&gt;set_wasm_call_address(target);</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#a9b6cc7beedb93c75dda2852cb6af822e">RelocInfo::IsWasmStubCall</a>(mode)) {</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        uint32_t stub_call_tag = it.rinfo()-&gt;wasm_call_tag();</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>        <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(stub_call_tag,</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>                  <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(Builtin::kFirstBytecodeHandler));</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>        <a class="code hl_enumeration" href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52">Builtin</a> builtin = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52">Builtin</a><span class="keyword">&gt;</span>(stub_call_tag);</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> entry = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8697f83af39e72a0327a6d299e1e23b7">GetJumpTableEntryForBuiltin</a>(builtin, jump_tables);</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>        it.rinfo()-&gt;set_wasm_stub_call_address(entry);</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1RelocInfo.html#ace9340a0c27b322249d990c3b6351cea">RelocInfo::IsWasmCodePointerTableEntry</a>(mode)) {</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>        uint32_t function_index =</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>            it.rinfo()-&gt;wasm_code_pointer_table_entry().value();</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        WasmCodePointer target = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">GetCodePointerHandle</a>(function_index);</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>        it.rinfo()-&gt;set_wasm_code_pointer_table_entry(target,</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>                                                      <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#abef7e063903876c844c905764b46b438acb3ba39651f2444a7fff95297d974390">SKIP_ICACHE_FLUSH</a>);</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>        it.rinfo()-&gt;apply(delta);</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>      }</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    }</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>  }</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span> </div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>  <span class="comment">// Flush the i-cache after relocation.</span></div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4ae783a89fc65122f5edc866f1209176">FlushInstructionCache</a>(dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>(), dst_code_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span> </div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>  <span class="comment">// Liftoff code will not be relocated or serialized, thus do not store any</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>  <span class="comment">// relocation information.</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>  <span class="keywordflow">if</span> (tier == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>) reloc_info = {};</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span> </div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>  uint64_t signature_hash =</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>      module_-&gt;signature_hash(<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">GetTypeCanonicalizer</a>(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span> </div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>  std::unique_ptr&lt;WasmCode&gt; code{<span class="keyword">new</span> <a class="code hl_friend" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a0ec92359918c6ef6fe010cafb580eb86">WasmCode</a>{<span class="keyword">this</span>,</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>                                              <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>,</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>                                              dst_code_bytes,</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                                              <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a>,</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>                                              ool_spill_count,</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>                                              tagged_parameter_slots,</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>                                              safepoint_table_offset,</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>                                              handler_table_offset,</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>                                              constant_pool_offset,</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>                                              code_comments_offset,</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>                                              instr_size,</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>                                              protected_instructions_data,</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>                                              reloc_info,</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>                                              source_position_table,</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>                                              inlining_positions,</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>                                              deopt_data,</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>                                              <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>,</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>                                              <a class="code hl_variable" href="namespacev8_1_1internal.html#a3537741c9c2331491d22d53de5115350">tier</a>,</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>                                              for_debugging,</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>                                              signature_hash,</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>                                              frame_has_feedback_slot}};</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span> </div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>  code-&gt;MaybePrint();</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>  code-&gt;Validate();</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span> </div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">code</a>;</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>}</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span> </div>
<div class="foldopen" id="foldopen01380" data-start="{" data-end="}">
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91db58c0a3ed6efdba8d82e23a659fa7"> 1380</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91db58c0a3ed6efdba8d82e23a659fa7">NativeModule::PublishCode</a>(<a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html">UnpublishedWasmCode</a> unpublished_code) {</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>               <span class="stringliteral">&quot;wasm.PublishCode&quot;</span>);</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span>  <span class="keywordflow">return</span> PublishCodeLocked(std::move(unpublished_code.<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html#ad4eb73b61221a3f4358b84c8cece9809">code</a>),</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>                           unpublished_code.<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html#a72e7efdeb49dc77769f6b99e9e904aca">assumptions</a>.get());</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>}</div>
</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span> </div>
<div class="foldopen" id="foldopen01388" data-start="{" data-end="}">
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a77032a9badd038815c22969e9f073578"> 1388</a></span>std::vector&lt;WasmCode*&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91db58c0a3ed6efdba8d82e23a659fa7">NativeModule::PublishCode</a>(</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;UnpublishedWasmCode&gt;</a> unpublished_codes) {</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>               <span class="stringliteral">&quot;wasm.PublishCode&quot;</span>, <span class="stringliteral">&quot;number&quot;</span>, unpublished_codes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>  std::vector&lt;WasmCode*&gt; published_code;</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>  published_code.reserve(unpublished_codes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>  <span class="comment">// The published code is put into the top-most surrounding {WasmCodeRefScope}.</span></div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; unpublished_code : unpublished_codes) {</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = PublishCodeLocked(std::move(unpublished_code.code),</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>                                       unpublished_code.assumptions.get());</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>    <span class="keywordflow">if</span> (code == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>      <span class="comment">// There were invalid assumptions in the code.</span></div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>      <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(unpublished_code.assumptions);</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>    }</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>    published_code.push_back(code);</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>  }</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>  <span class="keywordflow">return</span> published_code;</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>}</div>
</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span> </div>
<div class="foldopen" id="foldopen01409" data-start="{" data-end="}">
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a02cf7c113ae0ade3b2943210fa4bd02a"> 1409</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a02cf7c113ae0ade3b2943210fa4bd02a">NativeModule::UpdateWellKnownImports</a>(</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WellKnownImport&gt;</a> <a class="code hl_variable" href="liftoff-compiler_8cc.html#ab8d3010479e75420093f37bb28df0db7">entries</a>) {</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>  <span class="comment">// The {~WasmCodeRefScope} destructor must run after releasing the {lock},</span></div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>  <span class="comment">// to avoid lock order inversion.</span></div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> ref_scope;</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>  <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WellKnownImportsList.html#ad1d42dd019b4556bceb6911f5314d6e5">WellKnownImportsList::UpdateResult</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> =</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>      module_-&gt;type_feedback.well_known_imports.Update(<a class="code hl_variable" href="liftoff-compiler_8cc.html#ab8d3010479e75420093f37bb28df0db7">entries</a>);</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WellKnownImportsList.html#ad1d42dd019b4556bceb6911f5314d6e5a645a35f6c5fc6147785da45d7e871648">WellKnownImportsList::UpdateResult::kFoundIncompatibility</a>) {</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8eaf4313bd088d6cb36ba7f444621d1c">RemoveCompiledCode</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca69b3b2c8ba3f6cffe3967b55e0cb44fe">NativeModule::RemoveFilter::kRemoveTurbofanCode</a>);</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>  }</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>}</div>
</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span> </div>
<div class="foldopen" id="foldopen01422" data-start="{" data-end="}">
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"><a class="line" href="namespacev8_1_1internal_1_1wasm.html#ac5c325f4f80fa26ae7e7bd8fa6caed93"> 1422</a></span><a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04d">WasmCode::Kind</a> <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#ac5c325f4f80fa26ae7e7bd8fa6caed93">GetCodeKind</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html">WasmCompilationResult</a>&amp; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>) {</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>  <span class="keywordflow">switch</span> (<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.kind) {</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html#a22182bebf65051a0260cbd4e9d7eccbca5bef4caf3c8a2a4189717b0fedf37d74">WasmCompilationResult::kWasmToJsWrapper</a>:</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4">WasmCode::Kind::kWasmToJsWrapper</a>;</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span><span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>    <span class="keywordflow">case</span> WasmCompilationResult::kInterpreterEntry:</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>      <span class="keywordflow">return</span> WasmCode::Kind::kInterpreterEntry;</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html#a22182bebf65051a0260cbd4e9d7eccbcababc9138086c84aecbc35644fa4e15f4">WasmCompilationResult::kFunction</a>:</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">WasmCode::Kind::kWasmFunction</a>;</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>  }</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>}</div>
</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span> </div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>WasmCode* NativeModule::PublishCodeLocked(std::unique_ptr&lt;WasmCode&gt; owned_code,</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>                                          AssumptionsJournal* assumptions) {</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(owned_code-&gt;index(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>());</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span> </div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>  <span class="keywordflow">if</span> (assumptions != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>    <span class="comment">// We should not allocate an empty set to avoid unnecessary overhead.</span></div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>    <span class="comment">// TODO(clemensb): Fix and enable this assertion.</span></div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>    <span class="comment">// DCHECK(!assumptions-&gt;empty());</span></div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>    <span class="comment">// Only Turbofan makes assumptions.</span></div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>, owned_code-&gt;tier());</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>    <span class="comment">// Assumptions are not used for imports.</span></div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>    <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(owned_code-&gt;index(),</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>              <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(module_-&gt;num_imported_functions));</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>    WellKnownImportsList&amp; current = module_-&gt;type_feedback.well_known_imports;</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> [import_index, status] : assumptions-&gt;import_statuses()) {</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>      <span class="keywordflow">if</span> (V8_UNLIKELY(current.get(import_index) != status)) {</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>        compilation_state_-&gt;AllowAnotherTopTierJob(owned_code-&gt;index());</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>      }</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>    }</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>  }</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span> </div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>  <a class="code hl_friend" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a0ec92359918c6ef6fe010cafb580eb86">WasmCode</a>* code = owned_code.get();</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>  new_owned_code_.emplace_back(std::move(owned_code));</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>  <a class="code hl_define" href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a>(owned_code);</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span> </div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>  <span class="comment">// Add the code to the surrounding code ref scope, so the returned pointer is</span></div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>  <span class="comment">// guaranteed to be valid.</span></div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(code);</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span> </div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>  <span class="keywordflow">if</span> (code-&gt;index() &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(module_-&gt;num_imported_functions)) {</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">code</a>;</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>  }</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span> </div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>  code-&gt;RegisterTrapHandlerData();</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span> </div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>  <span class="comment">// Assume an order of execution tiers that represents the quality of their</span></div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>  <span class="comment">// generated code.</span></div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>  <span class="keyword">static_assert</span>(<a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a> &lt; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a> &amp;&amp;</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>                    <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a> &lt; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>,</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>                <span class="stringliteral">&quot;Assume an order on execution tiers&quot;</span>);</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span> </div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>  uint32_t slot_idx = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), code-&gt;index());</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>  <a class="code hl_friend" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a0ec92359918c6ef6fe010cafb580eb86">WasmCode</a>* prior_code = code_table_[slot_idx];</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>  <span class="comment">// If we are tiered down, install all debugging code (except for stepping</span></div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>  <span class="comment">// code, which is only used for a single frame and never installed in the</span></div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>  <span class="comment">// code table of jump table). Otherwise, install code if it was compiled</span></div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>  <span class="comment">// with a higher tier.</span></div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>  <span class="keyword">static_assert</span>(</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>      <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba43d94925083957d680eef3a3987e0de0">kForDebugging</a> &gt; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a> &amp;&amp; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5bafb5f23c032f3e99631bbc881807faac5">kWithBreakpoints</a> &gt; <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba43d94925083957d680eef3a3987e0de0">kForDebugging</a>,</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>      <span class="stringliteral">&quot;for_debugging is ordered&quot;</span>);</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span> </div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>  <span class="keywordflow">if</span> (should_update_code_table(code, prior_code)) {</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>    code_table_[slot_idx] = <a class="code hl_variable" href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">code</a>;</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <span class="keywordflow">if</span> (prior_code) {</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(prior_code);</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>      <span class="comment">// The code is added to the current {WasmCodeRefScope}, hence the ref</span></div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>      <span class="comment">// count cannot drop to zero here.</span></div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>      prior_code-&gt;DecRefOnLiveCode();</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    }</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span> </div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>    PatchJumpTablesLocked(slot_idx, code-&gt;instruction_start(),</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>                          code-&gt;instruction_start(), code-&gt;signature_hash());</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>    <span class="comment">// The code tables does not hold a reference to the code, hence decrement</span></div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>    <span class="comment">// the initial ref count of 1. The code was added to the</span></div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>    <span class="comment">// {WasmCodeRefScope} though, so it cannot die here.</span></div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>    code-&gt;DecRefOnLiveCode();</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>  }</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span> </div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">code</a>;</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>}</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span> </div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span><span class="keywordtype">bool</span> NativeModule::should_update_code_table(WasmCode* new_code,</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>                                            WasmCode* prior_code)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>  <span class="keywordflow">if</span> (new_code-&gt;for_debugging() == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5badca2ce91f5a20ba7013f50c59576421e">kForStepping</a>) {</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>    <span class="comment">// Never install stepping code.</span></div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>  }</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>  <span class="keywordflow">if</span> (debug_state_ == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">kDebugging</a>) {</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>    <span class="keywordflow">if</span> (new_code-&gt;for_debugging() == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>) {</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>      <span class="comment">// In debug state, only install debug code.</span></div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>    }</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>    <span class="keywordflow">if</span> (prior_code &amp;&amp; prior_code-&gt;for_debugging() &gt; new_code-&gt;for_debugging()) {</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>      <span class="comment">// In debug state, install breakpoints over normal debug code.</span></div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>    }</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>  }</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>  <span class="comment">// In kNoDebugging:</span></div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>  <span class="comment">// Install if the tier is higher than before or we replace debugging code with</span></div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>  <span class="comment">// non-debugging code.</span></div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>  <span class="comment">// Also allow installing a lower tier if deopt support is enabled and the</span></div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>  <span class="comment">// prior code has deopt data. (The check for deopt_data is needed as with</span></div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>  <span class="comment">// compilation hints, both baseline and top tier compilation run concurrently</span></div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>  <span class="comment">// in the background and can finish in any order.)</span></div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>  <span class="keywordflow">if</span> (prior_code &amp;&amp; !prior_code-&gt;for_debugging() &amp;&amp;</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>      prior_code-&gt;tier() &gt; new_code-&gt;tier() &amp;&amp;</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>      (!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_deopt || prior_code-&gt;deopt_data().empty())) {</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>  }</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>}</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span> </div>
<div class="foldopen" id="foldopen01542" data-start="{" data-end="}">
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a813274940c91bd21cf6c10bcfd3b7c40"> 1542</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a813274940c91bd21cf6c10bcfd3b7c40">NativeModule::ReinstallDebugCode</a>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code) {</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span> </div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<span class="keyword">this</span>, code-&gt;native_module());</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5bafb5f23c032f3e99631bbc881807faac5">kWithBreakpoints</a>, code-&gt;for_debugging());</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!code-&gt;IsAnonymous());</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(module_-&gt;num_imported_functions, code-&gt;index());</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(code-&gt;index(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>());</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span> </div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>  <span class="comment">// If the module is tiered up by now, do not reinstall debug code.</span></div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>  <span class="keywordflow">if</span> (debug_state_ != <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">kDebugging</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span> </div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>  uint32_t slot_idx = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), code-&gt;index());</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* prior_code = code_table_[slot_idx]) {</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(prior_code);</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>    <span class="comment">// The code is added to the current {WasmCodeRefScope}, hence the ref</span></div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>    <span class="comment">// count cannot drop to zero here.</span></div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>    prior_code-&gt;DecRefOnLiveCode();</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>  }</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>  code_table_[slot_idx] = <a class="code hl_variable" href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">code</a>;</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>  code-&gt;IncRef();</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span> </div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>  PatchJumpTablesLocked(slot_idx, code-&gt;instruction_start(),</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>                        code-&gt;instruction_start(), code-&gt;signature_hash());</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>}</div>
</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span> </div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>std::pair&lt;base::Vector&lt;uint8_t&gt;, <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html">NativeModule::JumpTablesRef</a>&gt;</div>
<div class="foldopen" id="foldopen01569" data-start="{" data-end="}">
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a460c056c89d554e3a4a8dfcb8ffc22b4"> 1569</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a460c056c89d554e3a4a8dfcb8ffc22b4">NativeModule::AllocateForDeserializedCode</a>(<span class="keywordtype">size_t</span> total_code_size) {</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard{&amp;allocation_mutex_};</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> code_space =</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>      code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a1aa6c58339ee0dc3f42716472fc79fc8">AllocateForCode</a>(<span class="keyword">this</span>, total_code_size);</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>  <span class="keyword">auto</span> jump_tables =</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>      FindJumpTablesForRegionLocked(<a class="code hl_function" href="namespacev8_1_1base.html#a576345f40485ddc3e105508023924217">base::AddressRegionOf</a>(code_space));</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>  <span class="keywordflow">return</span> {code_space, jump_tables};</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>}</div>
</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span> </div>
<div class="foldopen" id="foldopen01578" data-start="{" data-end="}">
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a913dccd53bf2f36bdd2847c236912de6"> 1578</a></span>std::unique_ptr&lt;WasmCode&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a913dccd53bf2f36bdd2847c236912de6">NativeModule::AddDeserializedCode</a>(</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> instructions, <span class="keywordtype">int</span> <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a>,</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>    <span class="keywordtype">int</span> ool_spills, uint32_t tagged_parameter_slots, <span class="keywordtype">int</span> safepoint_table_offset,</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>    <span class="keywordtype">int</span> handler_table_offset, <span class="keywordtype">int</span> constant_pool_offset,</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    <span class="keywordtype">int</span> code_comments_offset, <span class="keywordtype">int</span> unpadded_binary_size,</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> protected_instructions_data,</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> reloc_info,</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> source_position_table,</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> inlining_positions,</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;const uint8_t&gt;</a> deopt_data, <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04d">WasmCode::Kind</a> kind,</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> tier) {</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>  UpdateCodeSize(instructions.size(), tier, <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>);</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span> </div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>  uint64_t signature_hash =</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>      module_-&gt;signature_hash(<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">GetTypeCanonicalizer</a>(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span> </div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>  <span class="keywordflow">return</span> std::unique_ptr&lt;WasmCode&gt;{<span class="keyword">new</span> <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>{<span class="keyword">this</span>,</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>                                                <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>,</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>                                                instructions,</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>                                                <a class="code hl_variable" href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a>,</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>                                                ool_spills,</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>                                                tagged_parameter_slots,</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>                                                safepoint_table_offset,</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>                                                handler_table_offset,</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>                                                constant_pool_offset,</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>                                                code_comments_offset,</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>                                                unpadded_binary_size,</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>                                                protected_instructions_data,</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>                                                reloc_info,</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>                                                source_position_table,</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>                                                inlining_positions,</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>                                                deopt_data,</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>                                                <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>,</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>                                                <a class="code hl_variable" href="namespacev8_1_1internal.html#a3537741c9c2331491d22d53de5115350">tier</a>,</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>                                                <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>,</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>                                                signature_hash}};</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>}</div>
</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span> </div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>std::pair&lt;std::vector&lt;WasmCode*&gt;, std::vector&lt;WellKnownImport&gt;&gt;</div>
<div class="foldopen" id="foldopen01617" data-start="{" data-end="}">
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a42240b9985270350c5a898e36da4dcf8"> 1617</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a42240b9985270350c5a898e36da4dcf8">NativeModule::SnapshotCodeTable</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>** <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = code_table_.get();</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>** <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> = <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> + module_-&gt;num_declared_functions;</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code : <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> - <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>)) {</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>    <span class="keywordflow">if</span> (code) <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(code);</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>  }</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>  std::vector&lt;WellKnownImport&gt; import_statuses(module_-&gt;num_imported_functions);</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; module_-&gt;num_imported_functions; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>    import_statuses[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = module_-&gt;type_feedback.well_known_imports.get(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>  }</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>  <span class="keywordflow">return</span> {std::vector&lt;WasmCode*&gt;{<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>}, std::move(import_statuses)};</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>}</div>
</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span> </div>
<div class="foldopen" id="foldopen01631" data-start="{" data-end="}">
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a26241881bc9c29ebcbfe2109c4a64cf7"> 1631</a></span>std::vector&lt;WasmCode*&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a26241881bc9c29ebcbfe2109c4a64cf7">NativeModule::SnapshotAllOwnedCode</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>  <span class="keywordflow">if</span> (!new_owned_code_.empty()) TransferNewOwnedCodeLocked();</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span> </div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>  std::vector&lt;WasmCode*&gt; all_code(owned_code_.size());</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>  std::transform(owned_code_.begin(), owned_code_.end(), all_code.begin(),</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>                 [](<span class="keyword">auto</span>&amp; entry) { return entry.second.get(); });</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>  std::for_each(all_code.begin(), all_code.end(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>);</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>  <span class="keywordflow">return</span> all_code;</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>}</div>
</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span> </div>
<div class="foldopen" id="foldopen01642" data-start="{" data-end="}">
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a37a8384fb8317a24c3d58cf66ff64123"> 1642</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a37a8384fb8317a24c3d58cf66ff64123">NativeModule::GetCode</a>(uint32_t <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = code_table_[<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)];</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>  <span class="keywordflow">if</span> (code) <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(code);</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">code</a>;</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>}</div>
</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span> </div>
<div class="foldopen" id="foldopen01649" data-start="{" data-end="}">
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7a50cdbc0772ef702c1401259707e93e"> 1649</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7a50cdbc0772ef702c1401259707e93e">NativeModule::HasCode</a>(uint32_t <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>  <span class="keywordflow">return</span> code_table_[<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)] != <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>}</div>
</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span> </div>
<div class="foldopen" id="foldopen01654" data-start="{" data-end="}">
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a74d82ac97a7bb02ac5781d209ffe2bc5"> 1654</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a74d82ac97a7bb02ac5781d209ffe2bc5">NativeModule::HasCodeWithTier</a>(uint32_t <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> tier)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>  <span class="keywordflow">return</span> code_table_[<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)] != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>         code_table_[<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)]-&gt;tier() == <a class="code hl_variable" href="namespacev8_1_1internal.html#a3537741c9c2331491d22d53de5115350">tier</a>;</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>}</div>
</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span> </div>
<div class="foldopen" id="foldopen01660" data-start="{" data-end="}">
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af7f35e6098885c81d9915c96d6b7cf9d"> 1660</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af7f35e6098885c81d9915c96d6b7cf9d">NativeModule::SetWasmSourceMap</a>(</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    std::unique_ptr&lt;WasmModuleSourceMap&gt; source_map) {</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>  source_map_ = std::move(source_map);</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>}</div>
</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span> </div>
<div class="foldopen" id="foldopen01665" data-start="{" data-end="}">
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#adfb76e34f35dc0075dfa6458491ebc59"> 1665</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmModuleSourceMap.html">WasmModuleSourceMap</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#adfb76e34f35dc0075dfa6458491ebc59">NativeModule::GetWasmSourceMap</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>  <span class="keywordflow">return</span> source_map_.get();</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>}</div>
</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span> </div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* NativeModule::CreateEmptyJumpTableLocked(<span class="keywordtype">int</span> jump_table_size,</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>                                                   JumpTableType type) {</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>  <span class="keywordflow">return</span> CreateEmptyJumpTableInRegionLocked(jump_table_size,</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>                                            kUnrestrictedRegion, type);</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>}</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span> </div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span> </div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span><a class="code hl_enumeration" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0e">ThreadIsolation::JitAllocationType</a> ToAllocationType(</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>    <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12">v8::internal::wasm::NativeModule::JumpTableType</a> type) {</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>  <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a4237d3e837c403339afce6a8387246cb">NativeModule::JumpTableType::kJumpTable</a>:</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0ea91a8fed74b604f7e84b3036af763ee8b">ThreadIsolation::JitAllocationType::kWasmJumpTable</a>;</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a693267f9d764c2f577d25c2afc461a10">NativeModule::JumpTableType::kFarJumpTable</a>:</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0eac2316abd3338b7d2e92c44dfde6164c5">ThreadIsolation::JitAllocationType::kWasmFarJumpTable</a>;</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a0aeb6cda2e68c213e2a6670941658d8b">NativeModule::JumpTableType::kLazyCompileTable</a>:</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>      <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0eadae8f9a2ade7ec362cbf97c727cb233c">ThreadIsolation::JitAllocationType::kWasmLazyCompileTable</a>;</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>  }</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>}</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span> </div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span> </div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>WasmCode* NativeModule::CreateEmptyJumpTableInRegionLocked(</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>    <span class="keywordtype">int</span> jump_table_size, base::AddressRegion region, JumpTableType type) {</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>  <span class="comment">// Only call this if we really need a jump table.</span></div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(0, jump_table_size);</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>  base::Vector&lt;uint8_t&gt; code_space =</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>      code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a24e7306c031d78f7744ca33ba091e0d9">AllocateForCodeInRegion</a>(<span class="keyword">this</span>, jump_table_size, region);</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!code_space.empty());</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>  UpdateCodeSize(jump_table_size, <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>, <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>);</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>  {</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>    WritableJitAllocation jit_allocation =</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>        <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ae2e342788fbcd47076ccce4a1996c464">ThreadIsolation::RegisterJitAllocation</a>(</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>            <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(code_space.begin()), code_space.size(),</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>            ToAllocationType(type));</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    jit_allocation.ClearBytes(0, code_space.size());</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>  }</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>  std::unique_ptr&lt;WasmCode&gt; code{</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>      <span class="keyword">new</span> <a class="code hl_friend" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a0ec92359918c6ef6fe010cafb580eb86">WasmCode</a>{<span class="keyword">this</span>,                  <span class="comment">// native_module</span></div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>                   <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a1bb1a5429ae3d1ec380de1b5da81238f">kAnonymousFuncIndex</a>,   <span class="comment">// index</span></div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>                   code_space,            <span class="comment">// instructions</span></div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>                   0,                     <span class="comment">// stack_slots</span></div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>                   0,                     <span class="comment">// ool_spills</span></div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>                   0,                     <span class="comment">// tagged_parameter_slots</span></div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>                   0,                     <span class="comment">// safepoint_table_offset</span></div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>                   jump_table_size,       <span class="comment">// handler_table_offset</span></div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>                   jump_table_size,       <span class="comment">// constant_pool_offset</span></div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>                   jump_table_size,       <span class="comment">// code_comments_offset</span></div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>                   jump_table_size,       <span class="comment">// unpadded_binary_size</span></div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>                   {},                    <span class="comment">// protected_instructions</span></div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>                   {},                    <span class="comment">// reloc_info</span></div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>                   {},                    <span class="comment">// source_pos</span></div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>                   {},                    <span class="comment">// inlining pos</span></div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>                   {},                    <span class="comment">// deopt data</span></div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>                   <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730">WasmCode::kJumpTable</a>,  <span class="comment">// kind</span></div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>                   <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">ExecutionTier::kNone</a>,  <span class="comment">// tier</span></div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>                   <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>,      <span class="comment">// for_debugging</span></div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>                   0}};                   <span class="comment">// signature_hash</span></div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>  <span class="keywordflow">return</span> PublishCodeLocked(std::move(code),</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>                           <a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html#a4c0e64721e6f0d179c1b2151a97bbc4a">UnpublishedWasmCode::kNoAssumptions</a>);</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>}</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span> </div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span><span class="keywordtype">void</span> NativeModule::UpdateCodeSize(<span class="keywordtype">size_t</span> size, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">ExecutionTier</a> tier,</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>                                  <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5b">ForDebugging</a> for_debugging) {</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>  <span class="keywordflow">if</span> (for_debugging != <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">kNotForDebugging</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>  <span class="comment">// Count jump tables (ExecutionTier::kNone) for both Liftoff and TurboFan as</span></div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>  <span class="comment">// this is shared code.</span></div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>  <span class="keywordflow">if</span> (tier != <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">ExecutionTier::kTurbofan</a>) liftoff_code_size_.fetch_add(size);</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>  <span class="keywordflow">if</span> (tier != <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">ExecutionTier::kLiftoff</a>) turbofan_code_size_.fetch_add(size);</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>}</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span> </div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span><span class="keywordtype">void</span> NativeModule::PatchJumpTablesLocked(uint32_t slot_index, <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> target,</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>                                         <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> code_pointer_table_target,</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>                                         uint64_t signature_hash) {</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span> </div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>  <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a0a36931b3d2bbcdfcbb253b229838952">GetProcessWideWasmCodePointerTable</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ae052cc798b9dd1e4970a6cdbcb2adb05">SetEntrypointAndSignature</a>(</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>      code_pointer_handles_[slot_index], code_pointer_table_target,</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>      signature_hash);</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span> </div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; code_space_data : code_space_data_) {</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>    <span class="comment">// TODO(sroettger): need to unlock both jump tables together</span></div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(code_space_data.jump_table, code_space_data.far_jump_table);</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>    <span class="keywordflow">if</span> (!code_space_data.jump_table) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>    WritableJumpTablePair writable_jump_tables =</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>        ThreadIsolation::LookupJumpTableAllocations(</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>            code_space_data.jump_table-&gt;instruction_start(),</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>            code_space_data.jump_table-&gt;instructions_size_,</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>            code_space_data.far_jump_table-&gt;instruction_start(),</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>            code_space_data.far_jump_table-&gt;instructions_size_);</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    PatchJumpTableLocked(writable_jump_tables, code_space_data, slot_index,</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>                         target);</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>  }</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>}</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span> </div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span><span class="keywordtype">void</span> NativeModule::PatchJumpTableLocked(WritableJumpTablePair&amp; jump_table_pair,</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>                                        <span class="keyword">const</span> CodeSpaceData&amp; code_space_data,</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>                                        uint32_t slot_index, <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> target) {</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span> </div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(code_space_data.jump_table);</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(code_space_data.far_jump_table);</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span> </div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(slot_index, module_-&gt;num_declared_functions);</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> jump_table_slot =</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>      code_space_data.jump_table-&gt;instruction_start() +</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a75af4ab220bf462ded5d5cc62d9da9da">JumpTableAssembler::JumpSlotIndexToOffset</a>(slot_index);</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>  uint32_t far_jump_table_offset = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a4e616135983a522caacfc5b4bf44bcd3">JumpTableAssembler::FarJumpSlotIndexToOffset</a>(</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>() + slot_index);</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>  <span class="comment">// Only pass the far jump table start if the far jump table actually has a</span></div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>  <span class="comment">// slot for this function index (i.e. does not only contain runtime stubs).</span></div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>  <span class="keywordtype">bool</span> has_far_jump_slot =</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>      far_jump_table_offset &lt;</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>      code_space_data.far_jump_table-&gt;instructions().size();</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> far_jump_table_start =</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>      code_space_data.far_jump_table-&gt;instruction_start();</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> far_jump_table_slot =</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>      has_far_jump_slot ? far_jump_table_start + far_jump_table_offset</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>                        : <a class="code hl_variable" href="namespacev8_1_1base.html#ae714b233e65334e0104cda752fc559c5">kNullAddress</a>;</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a0cabb404f2bfe1a9ef3ea35fe63f7cf3">JumpTableAssembler::PatchJumpTableSlot</a>(jump_table_pair, jump_table_slot,</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>                                         far_jump_table_slot, target);</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(slot_index, code_pointer_handles_size_);</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>}</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span> </div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span><span class="keywordtype">void</span> NativeModule::AddCodeSpaceLocked(base::AddressRegion region) {</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span> </div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>  <span class="comment">// Each code space must be at least twice as large as the overhead per code</span></div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>  <span class="comment">// space. Otherwise, we are wasting too much memory.</span></div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>  <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(region.size(),</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>            2 * OverheadPerCodeSpace(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>()-&gt;num_declared_functions));</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span> </div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>  WasmCodeRefScope code_ref_scope;</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>  <a class="code hl_friend" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a0ec92359918c6ef6fe010cafb580eb86">WasmCode</a>* jump_table = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>  <a class="code hl_friend" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a0ec92359918c6ef6fe010cafb580eb86">WasmCode</a>* far_jump_table = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>  <span class="keyword">const</span> uint32_t num_wasm_functions = module_-&gt;num_declared_functions;</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> is_first_code_space = code_space_data_.empty();</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>  <span class="comment">// We always need a far jump table, because it contains the runtime stubs.</span></div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> needs_far_jump_table =</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>      !FindJumpTablesForRegionLocked(region).<a class="code hl_function" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#af7c96722e3f88e952d116c817305c7bb">is_valid</a>();</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> needs_jump_table = num_wasm_functions &gt; 0 &amp;&amp; needs_far_jump_table;</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span> </div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>  <span class="keywordflow">if</span> (needs_jump_table) {</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>    <span class="comment">// Allocate additional jump tables just as big as the first one.</span></div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>    <span class="comment">// This is in particular needed in cctests which add functions to the module</span></div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>    <span class="comment">// after the jump tables are already created (see https://crbug.com/v8/14213</span></div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>    <span class="comment">// and {NativeModule::ReserveCodeTableForTesting}.</span></div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>    <span class="keywordtype">int</span> jump_table_size =</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>        is_first_code_space</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>            ? <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a5515cdbbc42cf3c78581ea13768f74bb">JumpTableAssembler::SizeForNumberOfSlots</a>(num_wasm_functions)</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>            : main_jump_table_-&gt;instructions_size_;</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>    jump_table = CreateEmptyJumpTableInRegionLocked(jump_table_size, region,</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>                                                    <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a4237d3e837c403339afce6a8387246cb">JumpTableType::kJumpTable</a>);</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(region.contains(jump_table-&gt;instruction_start()));</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>  }</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span> </div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>  <span class="keywordflow">if</span> (needs_far_jump_table) {</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>    <span class="keywordtype">int</span> num_function_slots = NumWasmFunctionsInFarJumpTable(num_wasm_functions);</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>    <span class="comment">// See comment above for the size computation.</span></div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>    <span class="keywordtype">int</span> far_jump_table_size =</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>        is_first_code_space</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>            ? <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a87add92ae969554c1b14d8ff3e8d7cd2">JumpTableAssembler::SizeForNumberOfFarJumpSlots</a>(</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>                  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>(), num_function_slots)</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>            : main_far_jump_table_-&gt;instructions_size_;</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>    far_jump_table = CreateEmptyJumpTableInRegionLocked(</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>        far_jump_table_size, region, <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a693267f9d764c2f577d25c2afc461a10">JumpTableType::kFarJumpTable</a>);</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(region.contains(far_jump_table-&gt;instruction_start()));</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    EmbeddedData embedded_data = <a class="code hl_function" href="classv8_1_1internal_1_1EmbeddedData.html#a5f046101e1ed7d746979f87acbcb60e5">EmbeddedData::FromBlob</a>();</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>    <span class="keyword">static_assert</span>(<a class="code hl_variable" href="classv8_1_1internal_1_1Builtins.html#a9272a472ad4885ecd59c1f55dcb16028">Builtins::kAllBuiltinsAreIsolateIndependent</a>);</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> builtin_addresses[<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>()];</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>      builtin_addresses[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = embedded_data.InstructionStartOf(</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>          <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a67dcedf7516507a705bc79ffd2e0a089">BuiltinLookup::BuiltinForJumptableIndex</a>(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>));</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    }</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>    WritableJitAllocation jit_allocation = <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ad005e4948f48131f0f8727020bd52b68">ThreadIsolation::LookupJitAllocation</a>(</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>        far_jump_table-&gt;instruction_start(), far_jump_table-&gt;instructions_size_,</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>        <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0eac2316abd3338b7d2e92c44dfde6164c5">ThreadIsolation::JitAllocationType::kWasmFarJumpTable</a>);</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span> </div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a9429626ba78f937f1bdd773af25dda77">JumpTableAssembler::GenerateFarJumpTable</a>(</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>        jit_allocation, far_jump_table-&gt;instruction_start(), builtin_addresses,</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>        <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>(), num_function_slots);</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>  }</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span> </div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>  <span class="keywordflow">if</span> (is_first_code_space) {</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>    <span class="comment">// This can be updated and accessed without locks, since the addition of the</span></div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>    <span class="comment">// first code space happens during initialization of the {NativeModule},</span></div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>    <span class="comment">// where no concurrent accesses are possible.</span></div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>    main_jump_table_ = jump_table;</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>    main_far_jump_table_ = far_jump_table;</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>  }</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span> </div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>  code_space_data_.push_back(CodeSpaceData{region, jump_table, far_jump_table});</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span> </div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>  <span class="keywordflow">if</span> (is_first_code_space) {</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7eebb8a25711eac01dfad476ab555f66">InitializeJumpTableForLazyCompilation</a>(num_wasm_functions);</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>  }</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span> </div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>  <span class="keywordflow">if</span> (jump_table &amp;&amp; !is_first_code_space) {</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>    <span class="comment">// Patch the new jump table(s) with existing functions. If this is the first</span></div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>    <span class="comment">// code space, there cannot be any functions that have been compiled yet.</span></div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>    <span class="keyword">const</span> CodeSpaceData&amp; new_code_space_data = code_space_data_.back();</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>    <span class="comment">// TODO(sroettger): need to create two write scopes? Or have a write scope</span></div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>    <span class="comment">// for multiple allocations.</span></div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>    WritableJumpTablePair writable_jump_tables =</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>        ThreadIsolation::LookupJumpTableAllocations(</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>            new_code_space_data.jump_table-&gt;instruction_start(),</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span> </div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>            new_code_space_data.jump_table-&gt;instructions_size_,</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>            new_code_space_data.far_jump_table-&gt;instruction_start(),</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span> </div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>            new_code_space_data.far_jump_table-&gt;instructions_size_);</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>    <span class="keywordflow">for</span> (uint32_t slot_index = 0; slot_index &lt; num_wasm_functions;</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>         ++slot_index) {</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>      <span class="keywordflow">if</span> (code_table_[slot_index]) {</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>        PatchJumpTableLocked(writable_jump_tables, new_code_space_data,</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>                             slot_index,</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>                             code_table_[slot_index]-&gt;instruction_start());</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lazy_compile_table_) {</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>        <span class="comment">// Use the main jump table as the target so that we don&#39;t have to add a</span></div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>        <span class="comment">// landing pad instruction to the lazy compile table entries.</span></div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> main_jump_table_target =</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>            main_jump_table_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>() +</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>            <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a75af4ab220bf462ded5d5cc62d9da9da">JumpTableAssembler::JumpSlotIndexToOffset</a>(slot_index);</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>        PatchJumpTableLocked(writable_jump_tables, new_code_space_data,</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>                             slot_index, main_jump_table_target);</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>      }</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>    }</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>  }</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>}</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span> </div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span><span class="keyword">class </span>NativeModuleWireBytesStorage final : <span class="keyword">public</span> WireBytesStorage {</div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>  <span class="keyword">explicit</span> NativeModuleWireBytesStorage(</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>      std::shared_ptr&lt;base::OwnedVector&lt;const uint8_t&gt;&gt; wire_bytes)</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>      : wire_bytes_(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(wire_bytes)) {}</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span> </div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>  base::Vector&lt;const uint8_t&gt; GetCode(WireBytesRef ref) <span class="keyword">const</span> <span class="keyword">final</span> {</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>    <span class="keywordflow">return</span> std::atomic_load(&amp;wire_bytes_)</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>        -&gt;as_vector()</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        .SubVector(ref.offset(), ref.end_offset());</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>  }</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span> </div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>  std::optional&lt;ModuleWireBytes&gt; GetModuleBytes() const final {</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>    <span class="keywordflow">return</span> std::optional&lt;ModuleWireBytes&gt;(</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>        std::atomic_load(&amp;wire_bytes_)-&gt;as_vector());</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>  }</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span> </div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>  <span class="keyword">const</span> std::shared_ptr&lt;base::OwnedVector&lt;const uint8_t&gt;&gt; wire_bytes_;</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>};</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span> </div>
<div class="foldopen" id="foldopen01923" data-start="{" data-end="}">
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a61b6504416cddebca8e11c5635d5c203"> 1923</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a61b6504416cddebca8e11c5635d5c203">NativeModule::SetWireBytes</a>(<a class="code hl_class" href="classv8_1_1base_1_1OwnedVector.html">base::OwnedVector&lt;const uint8_t&gt;</a> wire_bytes) {</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>  <span class="keyword">auto</span> shared_wire_bytes =</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>      std::make_shared&lt;base::OwnedVector&lt;const uint8_t&gt;&gt;(std::move(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">wire_bytes</a>));</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>  std::atomic_store(&amp;wire_bytes_, shared_wire_bytes);</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>  <span class="keywordflow">if</span> (!shared_wire_bytes-&gt;empty()) {</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>    compilation_state_-&gt;SetWireBytesStorage(</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>        std::make_shared&lt;NativeModuleWireBytesStorage&gt;(</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>            std::move(shared_wire_bytes)));</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>  }</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>}</div>
</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span> </div>
<div class="foldopen" id="foldopen01934" data-start="{" data-end="}">
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a9a1111455be88abe59c4e98636c15314"> 1934</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a9a1111455be88abe59c4e98636c15314">NativeModule::AddLazyCompilationTimeSample</a>(int64_t sample_in_micro_sec) {</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>  num_lazy_compilations_.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>  sum_lazy_compilation_time_in_micro_sec_.fetch_add(sample_in_micro_sec,</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>                                                    std::memory_order_relaxed);</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>  int64_t max =</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>      max_lazy_compilation_time_in_micro_sec_.load(std::memory_order_relaxed);</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>  <span class="keywordflow">while</span> (sample_in_micro_sec &gt; max &amp;&amp;</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>         !max_lazy_compilation_time_in_micro_sec_.compare_exchange_weak(</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>             max, sample_in_micro_sec, std::memory_order_relaxed,</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>             std::memory_order_relaxed)) {</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    <span class="comment">// Repeat until we set the new maximum sucessfully.</span></div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>  }</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>}</div>
</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span> </div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span><span class="keywordtype">void</span> NativeModule::TransferNewOwnedCodeLocked()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!new_owned_code_.empty());</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>  <span class="comment">// Sort the {new_owned_code_} vector reversed, such that the position of the</span></div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>  <span class="comment">// previously inserted element can be used as a hint for the next element. If</span></div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>  <span class="comment">// elements in {new_owned_code_} are adjacent, this will guarantee</span></div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>  <span class="comment">// constant-time insertion into the map.</span></div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>  std::sort(new_owned_code_.begin(), new_owned_code_.end(),</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>            [](<span class="keyword">const</span> std::unique_ptr&lt;WasmCode&gt;&amp; a,</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>               <span class="keyword">const</span> std::unique_ptr&lt;WasmCode&gt;&amp; b) {</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>              return a-&gt;instruction_start() &gt; b-&gt;instruction_start();</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>            });</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>  <span class="keyword">auto</span> insertion_hint = owned_code_.end();</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; code : new_owned_code_) {</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, owned_code_.count(code-&gt;instruction_start()));</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    <span class="comment">// Check plausibility of the insertion hint.</span></div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(insertion_hint == owned_code_.end() ||</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>           insertion_hint-&gt;first &gt; code-&gt;instruction_start());</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>    insertion_hint = owned_code_.emplace_hint(</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>        insertion_hint, code-&gt;instruction_start(), std::move(code));</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>  }</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>  new_owned_code_.clear();</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>}</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span> </div>
<div class="foldopen" id="foldopen01972" data-start="{" data-end="}">
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5cff149410fcd416933af17dab385ba0"> 1972</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5cff149410fcd416933af17dab385ba0">NativeModule::Lookup</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>  <span class="keywordflow">if</span> (!new_owned_code_.empty()) TransferNewOwnedCodeLocked();</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>  <span class="keyword">auto</span> iter = owned_code_.upper_bound(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>  <span class="keywordflow">if</span> (iter == owned_code_.begin()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>  --iter;</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* candidate = iter-&gt;second.get();</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(candidate-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">instruction_start</a>(), iter-&gt;first);</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>  <span class="keywordflow">if</span> (!candidate-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a86612599c4a49e5ff328d3fd108ed267">contains</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>)) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(candidate);</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>  <span class="keywordflow">return</span> candidate;</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>}</div>
</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span> </div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span><a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html">NativeModule::JumpTablesRef</a> NativeModule::FindJumpTablesForRegionLocked(</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>    <a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> code_region)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>  allocation_mutex_.<a class="code hl_function" href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">AssertHeld</a>();</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>  <span class="keyword">auto</span> jump_table_usable = [code_region](<span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* jump_table) {</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>    <span class="comment">// We only ever need to check for suitable jump tables if</span></div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>    <span class="comment">// {kNeedsFarJumpsBetweenCodeSpaces} is true.</span></div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>    <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (!<a class="code hl_variable" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c38ae4d35483f2b9c6e5634c7bf4bd6">kNeedsFarJumpsBetweenCodeSpaces</a>) <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> table_start = jump_table-&gt;instruction_start();</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> table_end = table_start + jump_table-&gt;instructions().size();</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>    <span class="comment">// Compute the maximum distance from anywhere in the code region to anywhere</span></div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>    <span class="comment">// in the jump table, avoiding any underflow.</span></div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>    <span class="keywordtype">size_t</span> max_distance = std::max(</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>        code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>() &gt; table_start ? code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">end</a>() - table_start : 0,</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>        table_end &gt; code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>() ? table_end - code_region.<a class="code hl_function" href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">begin</a>() : 0);</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>    <span class="comment">// kDefaultMaxWasmCodeSpaceSizeMb is &lt;= the maximum near call distance on</span></div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>    <span class="comment">// the current platform.</span></div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>    <span class="comment">// We can allow a max_distance that is equal to</span></div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>    <span class="comment">// kDefaultMaxWasmCodeSpaceSizeMb, because every call or jump will target an</span></div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>    <span class="comment">// address *within* the region, but never exactly the end of the region. So</span></div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>    <span class="comment">// all occuring offsets are actually smaller than max_distance.</span></div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>    <span class="keywordflow">return</span> max_distance &lt;= <a class="code hl_variable" href="namespacev8_1_1internal.html#a55676947d895fd4cdd273e53dff16694">kDefaultMaxWasmCodeSpaceSizeMb</a> * <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>;</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>  };</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span> </div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; code_space_data : code_space_data_) {</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(code_space_data.jump_table, code_space_data.far_jump_table);</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>    <span class="keywordflow">if</span> (!code_space_data.far_jump_table) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>    <span class="comment">// Only return these jump tables if they are reachable from the whole</span></div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>    <span class="comment">// {code_region}.</span></div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c38ae4d35483f2b9c6e5634c7bf4bd6">kNeedsFarJumpsBetweenCodeSpaces</a> &amp;&amp;</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>        (!jump_table_usable(code_space_data.far_jump_table) ||</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>         (code_space_data.jump_table &amp;&amp;</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>          !jump_table_usable(code_space_data.jump_table)))) {</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>    }</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>    <span class="keywordflow">return</span> {code_space_data.jump_table</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>                ? code_space_data.jump_table-&gt;instruction_start()</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>                : kNullAddress,</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>            code_space_data.far_jump_table-&gt;instruction_start()};</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>  }</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>  <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>}</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span> </div>
<div class="foldopen" id="foldopen02027" data-start="{" data-end="}">
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c0e38351c07fa1377db0a30e94ac8c0"> 2027</a></span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c0e38351c07fa1377db0a30e94ac8c0">NativeModule::GetNearCallTargetForFunction</a>(</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>    uint32_t func_index, <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html">JumpTablesRef</a>&amp; jump_tables)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(jump_tables.<a class="code hl_function" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#af7c96722e3f88e952d116c817305c7bb">is_valid</a>());</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>  uint32_t slot_offset = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a6a8744656191d24bad76f9c6562d9fdb">JumpTableOffset</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>(), func_index);</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>  <span class="keywordflow">return</span> jump_tables.<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#a50f3e825d91e66fe4c340debaf6fc31a">jump_table_start</a> + slot_offset;</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>}</div>
</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span> </div>
<div class="foldopen" id="foldopen02034" data-start="{" data-end="}">
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8697f83af39e72a0327a6d299e1e23b7"> 2034</a></span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8697f83af39e72a0327a6d299e1e23b7">NativeModule::GetJumpTableEntryForBuiltin</a>(</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52">Builtin</a> builtin, <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html">JumpTablesRef</a>&amp; jump_tables)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(jump_tables.<a class="code hl_function" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#af7c96722e3f88e952d116c817305c7bb">is_valid</a>());</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a282118f97cf3fce4133b63c1c15906bc">BuiltinLookup::JumptableIndexForBuiltin</a>(builtin);</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span> </div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>  <span class="keyword">auto</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a4e616135983a522caacfc5b4bf44bcd3">JumpTableAssembler::FarJumpSlotIndexToOffset</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>  <span class="keywordflow">return</span> jump_tables.<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#a863fbb343af1151884091489dcb5b191">far_jump_table_start</a> + <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>;</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>}</div>
</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span> </div>
<div class="foldopen" id="foldopen02043" data-start="{" data-end="}">
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#adda8e2ac30083dec687f18bca0ab5364"> 2043</a></span>uint32_t <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#adda8e2ac30083dec687f18bca0ab5364">NativeModule::GetFunctionIndexFromJumpTableSlot</a>(</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> slot_address)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a> code_refs;</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5cff149410fcd416933af17dab385ba0">Lookup</a>(slot_address);</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(code);</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730">WasmCode::kJumpTable</a>, code-&gt;kind());</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>  uint32_t slot_offset =</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>      <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(slot_address - code-&gt;instruction_start());</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>  uint32_t slot_idx = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#ada6cc7624595bb4befe6288661dc75ba">JumpTableAssembler::SlotOffsetToIndex</a>(slot_offset);</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>  <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(slot_idx, module_-&gt;num_declared_functions);</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(slot_address,</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>            code-&gt;instruction_start() +</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>                <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a75af4ab220bf462ded5d5cc62d9da9da">JumpTableAssembler::JumpSlotIndexToOffset</a>(slot_idx));</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>  <span class="keywordflow">return</span> module_-&gt;num_imported_functions + slot_idx;</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>}</div>
</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span> </div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span><a class="code hl_typedef" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91fa3ea02a42f6eb12f120ac558a8ec7">NativeModule::CallIndirectTargetMap</a></div>
<div class="foldopen" id="foldopen02060" data-start="{" data-end="}">
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac075badc36b3fdb58a4f15b9a3dd12c9"> 2060</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac075badc36b3fdb58a4f15b9a3dd12c9">NativeModule::CreateIndirectCallTargetToFunctionIndexMap</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>  <a class="code hl_typedef" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91fa3ea02a42f6eb12f120ac558a8ec7">CallIndirectTargetMap</a> lookup_map;</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>  <span class="keywordflow">for</span> (uint32_t func_index = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af886dc3d493824b7a1ae1e1f5ae02e42">num_imported_functions</a>();</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>       func_index &lt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>(); func_index++) {</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>    lookup_map.emplace(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">GetCodePointerHandle</a>(func_index), func_index);</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>  }</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>  <span class="keywordflow">return</span> lookup_map;</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>}</div>
</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span> </div>
<div class="foldopen" id="foldopen02069" data-start="{" data-end="}">
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a119487efc92641da665eb0252dcc9a18"> 2069</a></span><a class="code hl_enumeration" href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52">Builtin</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a119487efc92641da665eb0252dcc9a18">NativeModule::GetBuiltinInJumptableSlot</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> target)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span> </div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; code_space_data : code_space_data_) {</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    <span class="keywordflow">if</span> (code_space_data.far_jump_table != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>        code_space_data.far_jump_table-&gt;contains(target)) {</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>      uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>          target - code_space_data.far_jump_table-&gt;instruction_start());</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>      uint32_t <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a01dc0a56e4bad49ae441513379eabe4d">JumpTableAssembler::FarJumpSlotOffsetToIndex</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>);</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> &gt;= <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a4e616135983a522caacfc5b4bf44bcd3">JumpTableAssembler::FarJumpSlotIndexToOffset</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) != <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>) {</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>      }</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a67dcedf7516507a705bc79ffd2e0a089">BuiltinLookup::BuiltinForJumptableIndex</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>);</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>    }</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>  }</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span> </div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>  <span class="comment">// Invalid address.</span></div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52a04022b3cd6b405230761e1a685db3b88">Builtin::kNoBuiltinId</a>;</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>}</div>
</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span> </div>
<div class="foldopen" id="foldopen02090" data-start="{" data-end="}">
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd"> 2090</a></span><a class="code hl_class" href="classv8_1_1internal_1_1WasmCodePointer.html">WasmCodePointer</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">NativeModule::GetCodePointerHandle</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>  <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> != <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a1bb1a5429ae3d1ec380de1b5da81238f">kAnonymousFuncIndex</a>, <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> &gt;= 0);</div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> == <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a1bb1a5429ae3d1ec380de1b5da81238f">kAnonymousFuncIndex</a> ||</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>      <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>) &lt; module_-&gt;num_imported_functions) {</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>    <span class="comment">// TODO(sroettger): do ImportWrappers need a code pointer handle?</span></div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal_1_1wasm.html#a7d41c6d12091165e18a14f58ae8b1b91">kInvalidWasmCodePointer</a>;</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>  }</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>  <span class="keywordflow">return</span> code_pointer_handles_[<a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">declared_function_index</a>(module_.get(), <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>)];</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>}</div>
</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span> </div>
<div class="foldopen" id="foldopen02100" data-start="{" data-end="}">
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a969ac2536a1c63951c940e7f1552c323"> 2100</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a969ac2536a1c63951c940e7f1552c323">NativeModule::~NativeModule</a>() {</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>  <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;Deleting native module: %p\n&quot;</span>, <span class="keyword">this</span>);</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>  <span class="comment">// Cancel all background compilation before resetting any field of the</span></div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>  <span class="comment">// NativeModule or freeing anything.</span></div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>  compilation_state_-&gt;CancelCompilation();</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span> </div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_wasm_offheap_memory_size)) {</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>    <span class="comment">// Print the current memory consumption of both this Module *and* the whole</span></div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>    <span class="comment">// engine before freeing this module. In a benchmark with a single module</span></div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>    <span class="comment">// this will probably be the high watermark of memory usage for the whole</span></div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>    <span class="comment">// engine.</span></div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>    <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a2b2e70f05aba4cbb41820e840e79ab3a">PrintCurrentMemoryConsumptionEstimate</a>();</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>    <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a32e34a8169c3a723824780c6ac126654">PrintCurrentMemoryConsumptionEstimate</a>();</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>  }</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span> </div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>  <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">GetWasmEngine</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aaf9cd2000af17e8d1f3ebbb9d4cd7c09">FreeNativeModule</a>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span> </div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>  <span class="comment">// If experimental PGO support is enabled, serialize the PGO data now.</span></div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.experimental_wasm_pgo_to_file)) {</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>    <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#ab2ab774cdc5dfa0fea419719c89815f6">DumpProfileToFile</a>(module_.get(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">wire_bytes</a>(), tiering_budgets_.get());</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>  }</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span> </div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a58ee010c88ea49154c8528518931dbc2">FreeCodePointerTableHandles</a>();</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>}</div>
</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span> </div>
<div class="foldopen" id="foldopen02125" data-start="{" data-end="}">
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a08c0531d703317ba61ae16c19a505f7a"> 2125</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a08c0531d703317ba61ae16c19a505f7a">WasmCodeManager::WasmCodeManager</a>()</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>    : max_committed_code_space_(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_committed_code_mb * MB),</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>      critical_committed_code_space_(max_committed_code_space_ / 2),</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>      next_code_space_hint_(reinterpret_cast&lt;<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a>&gt;(</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>          <a class="code hl_function" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>()-&gt;<a class="code hl_function" href="namespacev8_1_1internal.html#a604a6dd52477843a9531577e32877ca5">GetRandomMmapAddr</a>())) {</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>  <span class="comment">// Check that --wasm-max-code-space-size-mb is not set bigger than the default</span></div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>  <span class="comment">// value. Otherwise we run into DCHECKs or other crashes later.</span></div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>  <a class="code hl_define" href="logging_8h.html#a1c7c9b7f14b9a33ea69cbe4578016a19">CHECK_GE</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a55676947d895fd4cdd273e53dff16694">kDefaultMaxWasmCodeSpaceSizeMb</a>,</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>           <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_code_space_size_mb);</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>}</div>
</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span> </div>
<div class="foldopen" id="foldopen02136" data-start="{" data-end="}">
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#af407c29783d5ce7ad5d29928a54adca5"> 2136</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#af407c29783d5ce7ad5d29928a54adca5">WasmCodeManager::~WasmCodeManager</a>() {</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>  <span class="comment">// No more committed code space.</span></div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, total_committed_code_space_.load());</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>}</div>
</div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span> </div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span><span class="comment">// static</span></div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span><span class="keywordtype">bool</span> WasmCodeManager::CanRegisterUnwindInfoForNonABICompliantCodeRange() {</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2af86e498cb6c3f31bc898c6b40d287e">win64_unwindinfo::CanRegisterUnwindInfoForNonABICompliantCodeRange</a>() &amp;&amp;</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>         <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.win64_unwinding_info;</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>}</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span> </div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span><span class="keywordtype">void</span> WasmCodeManager::Commit(<a class="code hl_class" href="classv8_1_1base_1_1AddressRegion.html">base::AddressRegion</a> region) {</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.begin(), <a class="code hl_function" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>()));</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.size(), <a class="code hl_function" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>()));</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>  <span class="comment">// Reserve the size. Use CAS loop to avoid overflow on</span></div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>  <span class="comment">// {total_committed_code_space_}.</span></div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>  <span class="keywordtype">size_t</span> old_value = total_committed_code_space_.load();</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>    <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(max_committed_code_space_, old_value);</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>    <span class="keywordflow">if</span> (region.size() &gt; max_committed_code_space_ - old_value) {</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>      <span class="keyword">auto</span> oom_detail = <a class="code hl_class" href="classv8_1_1base_1_1FormattedString.html">base::FormattedString</a>{}</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>                        &lt;&lt; <span class="stringliteral">&quot;trying to commit &quot;</span> &lt;&lt; region.size()</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>                        &lt;&lt; <span class="stringliteral">&quot;, already committed &quot;</span> &lt;&lt; old_value;</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>      <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>                                  <span class="stringliteral">&quot;Exceeding maximum wasm committed code space&quot;</span>,</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>                                  oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    }</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>    <span class="keywordflow">if</span> (total_committed_code_space_.compare_exchange_weak(</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>            old_value, old_value + region.size())) {</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>    }</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>  }</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span> </div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>  <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;Setting rwx permissions for 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>             region.begin(), region.end());</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>  <span class="keywordtype">bool</span> success = <a class="code hl_function" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>()-&gt;RecommitPages(</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>      <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(region.begin()), region.size(),</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>      PageAllocator::kReadWriteExecute);</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span> </div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(!success)) {</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>    <span class="keyword">auto</span> oom_detail = <a class="code hl_function" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{} &lt;&lt; <span class="stringliteral">&quot;region size: &quot;</span></div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>                                              &lt;&lt; region.size();</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>    <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Commit wasm code space&quot;</span>,</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>                                oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>  }</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>}</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span> </div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span><span class="keywordtype">void</span> WasmCodeManager::Decommit(base::AddressRegion region) {</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>  PageAllocator* allocator = <a class="code hl_function" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>();</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.begin(), allocator-&gt;CommitPageSize()));</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(region.size(), allocator-&gt;CommitPageSize()));</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>  [[maybe_unused]] <span class="keywordtype">size_t</span> old_committed =</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>      total_committed_code_space_.fetch_sub(region.size());</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(region.size(), old_committed);</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>  <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;Decommitting system pages 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>             region.begin(), region.end());</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>  <span class="keywordflow">if</span> (V8_UNLIKELY(!allocator-&gt;DecommitPages(</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(region.begin()), region.size()))) {</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>    <span class="comment">// Decommit can fail in near-OOM situations.</span></div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    <span class="keyword">auto</span> oom_detail = <a class="code hl_function" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{} &lt;&lt; <span class="stringliteral">&quot;region size: &quot;</span></div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>                                              &lt;&lt; region.size();</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>    <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Decommit Wasm code space&quot;</span>,</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>                                oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>  }</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>}</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span> </div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span><span class="keywordtype">void</span> WasmCodeManager::AssignRange(base::AddressRegion region,</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>                                  NativeModule* native_module) {</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>  <a class="code hl_typedef" href="namespacev8_1_1base.html#a3279492e34e391eefba807ff6a59576e">base::SpinningMutexGuard</a> lock(&amp;native_modules_mutex_);</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>  lookup_map_.insert(std::make_pair(</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>      region.begin(), std::make_pair(region.end(), native_module)));</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>}</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span> </div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>VirtualMemory WasmCodeManager::TryAllocate(<span class="keywordtype">size_t</span> size) {</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>  v8::PageAllocator* page_allocator = <a class="code hl_function" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>();</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>  <a class="code hl_define" href="logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a>(size, 0);</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>  <span class="keywordtype">size_t</span> allocate_page_size = page_allocator-&gt;AllocatePageSize();</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>  size = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a>(size, allocate_page_size);</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> hint =</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>      next_code_space_hint_.fetch_add(size, std::memory_order_relaxed);</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span> </div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>  <span class="comment">// When we start exposing Wasm in jitless mode, then the jitless flag</span></div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>  <span class="comment">// will have to determine whether we set kMapAsJittable or not.</span></div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.jitless);</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>  VirtualMemory mem(page_allocator, size, <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(hint),</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>                    allocate_page_size,</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>                    PageAllocator::Permission::kNoAccessWillJitLater);</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>  <span class="keywordflow">if</span> (!mem.IsReserved()) {</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>    <span class="comment">// Try resetting {next_code_space_hint_}, which might fail if another thread</span></div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>    <span class="comment">// bumped it in the meantime.</span></div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> bumped_hint = hint + <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>    next_code_space_hint_.compare_exchange_weak(bumped_hint, hint,</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>                                                std::memory_order_relaxed);</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>    <span class="keywordflow">return</span> {};</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>  }</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>  <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;VMem alloc: 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot; (%zu)\n&quot;</span>, mem.address(),</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>             mem.end(), mem.size());</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span> </div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>  <span class="keywordflow">if</span> (mem.address() != hint) {</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>    <span class="comment">// If the hint was ignored, just store the end of the new vmem area</span></div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>    <span class="comment">// unconditionally, potentially racing with other concurrent allocations (it</span></div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>    <span class="comment">// does not really matter which end pointer we keep in that case).</span></div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>    next_code_space_hint_.store(mem.end(), std::memory_order_relaxed);</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>  }</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span> </div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>  <span class="comment">// Don&#39;t pre-commit the code cage on Windows since it uses memory and it&#39;s not</span></div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>  <span class="comment">// required for recommit.</span></div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span><span class="preprocessor">#if !defined(V8_OS_WIN)</span></div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a930893209d531231682fce4cbef728ed">MemoryProtectionKeysEnabled</a>()) {</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span><span class="preprocessor">#if V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#a42ebfac4aa3bcade2327daf0cf5efb7f">ThreadIsolation::Enabled</a>()) {</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>      <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#ad690ad6c8189d648d7cc8ec987d882c1">ThreadIsolation::MakeExecutable</a>(mem.address(), mem.size()));</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>      <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(base::MemoryProtectionKey::SetPermissionsAndKey(</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>          mem.region(), PageAllocator::kReadWriteExecute,</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>          RwxMemoryWriteScope::memory_protection_key()));</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>    }</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">SetPermissions</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">GetPlatformPageAllocator</a>(), mem.address(), mem.size(),</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>                         PageAllocator::kReadWriteExecute));</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>  }</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>  page_allocator-&gt;DiscardSystemPages(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(mem.address()),</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>                                     mem.size());</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span><span class="preprocessor">#endif  </span><span class="comment">// !defined(V8_OS_WIN)</span></div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span> </div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>  <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#a9fff9d0a2fb22b0853a69400bea0f618">ThreadIsolation::RegisterJitPage</a>(mem.address(), mem.size());</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span> </div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>  <span class="keywordflow">return</span> mem;</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>}</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span> </div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span><span class="comment">// The numbers here are rough estimates, used to calculate the size of the</span></div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span><span class="comment">// initial code reservation and for estimating the amount of external memory</span></div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span><span class="comment">// reported to the GC.</span></div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span><span class="comment">// They do not need to be accurate. Choosing them too small will result in</span></div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span><span class="comment">// separate code spaces being allocated (compile time and runtime overhead),</span></div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span><span class="comment">// choosing them too large results in over-reservation (virtual address space</span></div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span><span class="comment">// only).</span></div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span><span class="comment">// In doubt, choose the numbers slightly too large on 64-bit systems (where</span></div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span><span class="comment">// {kNeedsFarJumpsBetweenCodeSpaces} is {true}). Over-reservation is less</span></div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span><span class="comment">// critical in a 64-bit address space, but separate code spaces cause overhead.</span></div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span><span class="comment">// On 32-bit systems (where {kNeedsFarJumpsBetweenCodeSpaces} is {false}), the</span></div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span><span class="comment">// opposite is true: Multiple code spaces are cheaper, and address space is</span></div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span><span class="comment">// scarce, hence choose numbers slightly too small.</span></div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span><span class="comment">//</span></div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span><span class="comment">// Numbers can be determined by running benchmarks with</span></div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span><span class="comment">// --trace-wasm-compilation-times, and piping the output through</span></div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span><span class="comment">// tools/wasm/code-size-factors.py.</span></div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span><span class="preprocessor">#if V8_TARGET_ARCH_X64</span></div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanFunctionOverhead = 24;</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanCodeSizeMultiplier = 3;</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffFunctionOverhead = 56;</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffCodeSizeMultiplier = 4;</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kImportSize = 640;</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span><span class="preprocessor">#elif V8_TARGET_ARCH_IA32</span></div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanFunctionOverhead = 20;</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanCodeSizeMultiplier = 3;</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffFunctionOverhead = 48;</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffCodeSizeMultiplier = 3;</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kImportSize = 600;</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span><span class="preprocessor">#elif V8_TARGET_ARCH_ARM</span></div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanFunctionOverhead = 44;</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanCodeSizeMultiplier = 3;</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffFunctionOverhead = 96;</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffCodeSizeMultiplier = 5;</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kImportSize = 550;</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span><span class="preprocessor">#elif V8_TARGET_ARCH_ARM64</span></div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanFunctionOverhead = 40;</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanCodeSizeMultiplier = 3;</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffFunctionOverhead = 68;</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffCodeSizeMultiplier = 4;</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kImportSize = 750;</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span><span class="comment">// Other platforms should add their own estimates for best performance. Numbers</span></div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span><span class="comment">// below are the maximum of other architectures.</span></div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanFunctionOverhead = 44;</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kTurbofanCodeSizeMultiplier = 4;</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffFunctionOverhead = 96;</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kLiftoffCodeSizeMultiplier = 5;</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span><span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kImportSize = 750;</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span> </div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02327" data-start="{" data-end="}">
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a0fcb42a940eb11201694e507b09fa04c"> 2327</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a0fcb42a940eb11201694e507b09fa04c">WasmCodeManager::EstimateLiftoffCodeSize</a>(<span class="keywordtype">int</span> body_size) {</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>  <span class="keywordflow">return</span> kLiftoffFunctionOverhead + <a class="code hl_variable" href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">kCodeAlignment</a> / 2 +</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>         body_size * kLiftoffCodeSizeMultiplier;</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>}</div>
</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span> </div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02333" data-start="{" data-end="}">
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab90b2371ac3c63fcc039e3189203dbb3"> 2333</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab90b2371ac3c63fcc039e3189203dbb3">WasmCodeManager::EstimateNativeModuleCodeSize</a>(</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module, <span class="keywordtype">bool</span> include_liftoff,</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>    <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#ae73da17de18352a106bb4e622f610d85">DynamicTiering</a> dynamic_tiering) {</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>  <span class="keywordtype">int</span> num_functions = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<span class="keyword">module</span>-&gt;num_declared_functions);</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>  <span class="keywordtype">int</span> num_imported_functions = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<span class="keyword">module</span>-&gt;num_imported_functions);</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>  <span class="keywordtype">int</span> code_section_length = 0;</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>  <span class="keywordflow">if</span> (num_functions &gt; 0) {</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;<a class="code hl_variable" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">functions</a>.size(), num_imported_functions + num_functions);</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>    <span class="keyword">auto</span>* first_fn = &amp;<span class="keyword">module</span>-&gt;functions[module-&gt;num_imported_functions];</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>    <span class="keyword">auto</span>* last_fn = &amp;<span class="keyword">module</span>-&gt;functions.back();</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>    code_section_length =</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(last_fn-&gt;code.end_offset() - first_fn-&gt;code.offset());</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>  }</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab90b2371ac3c63fcc039e3189203dbb3">EstimateNativeModuleCodeSize</a>(num_functions, num_imported_functions,</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>                                      code_section_length, include_liftoff,</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>                                      dynamic_tiering);</div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>}</div>
</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span> </div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02352" data-start="{" data-end="}">
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a0583d75dcd1f49c687749f8da7fdc7bd"> 2352</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab90b2371ac3c63fcc039e3189203dbb3">WasmCodeManager::EstimateNativeModuleCodeSize</a>(</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>    <span class="keywordtype">int</span> num_functions, <span class="keywordtype">int</span> num_imported_functions, <span class="keywordtype">int</span> code_section_length,</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>    <span class="keywordtype">bool</span> include_liftoff, <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#ae73da17de18352a106bb4e622f610d85">DynamicTiering</a> dynamic_tiering) {</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>  <span class="comment">// The size for the jump table and far jump table is added later, per code</span></div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>  <span class="comment">// space (see {OverheadPerCodeSpace}). We still need to add the overhead for</span></div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>  <span class="comment">// the lazy compile table once, though. There are configurations where we do</span></div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>  <span class="comment">// not need it (non-asm.js, no dynamic tiering and no lazy compilation), but</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>  <span class="comment">// we ignore this here as most of the time we will need it.</span></div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> lazy_compile_table_size =</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a52670982950dc90851cb4a1de6e97781">JumpTableAssembler::SizeForNumberOfLazyFunctions</a>(num_functions);</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span> </div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> size_of_imports = kImportSize * num_imported_functions;</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span> </div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> overhead_per_function_turbofan =</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>      kTurbofanFunctionOverhead + <a class="code hl_variable" href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">kCodeAlignment</a> / 2;</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>  <span class="keywordtype">size_t</span> size_of_turbofan = overhead_per_function_turbofan * num_functions +</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>                            kTurbofanCodeSizeMultiplier * code_section_length;</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span> </div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> overhead_per_function_liftoff =</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>      kLiftoffFunctionOverhead + <a class="code hl_variable" href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">kCodeAlignment</a> / 2;</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> size_of_liftoff =</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>      include_liftoff ? overhead_per_function_liftoff * num_functions +</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>                            kLiftoffCodeSizeMultiplier * code_section_length</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>                      : 0;</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span> </div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>  <span class="comment">// With dynamic tiering we don&#39;t expect to compile more than 25% with</span></div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>  <span class="comment">// TurboFan. If there is no liftoff though then all code will get generated</span></div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>  <span class="comment">// by TurboFan.</span></div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>  <span class="keywordflow">if</span> (include_liftoff &amp;&amp; dynamic_tiering) size_of_turbofan /= 4;</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span> </div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>  <span class="keywordflow">return</span> lazy_compile_table_size + size_of_imports + size_of_liftoff +</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>         size_of_turbofan;</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>}</div>
</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span> </div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02387" data-start="{" data-end="}">
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a791a00c5dc50aed58b0d0a5908753675"> 2387</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a791a00c5dc50aed58b0d0a5908753675">WasmCodeManager::EstimateNativeModuleMetaDataSize</a>(</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">WasmModule</a>* module) {</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>  <span class="keywordtype">size_t</span> wasm_module_estimate = <span class="keyword">module</span>-&gt;EstimateStoredSize();</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span> </div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>  uint32_t num_wasm_functions = <span class="keyword">module</span>-&gt;num_declared_functions;</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span> </div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>  <span class="comment">// TODO(wasm): Include wire bytes size.</span></div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>  <span class="keywordtype">size_t</span> native_module_estimate =</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>      <span class="keyword">sizeof</span>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>) +                      <span class="comment">// NativeModule struct</span></div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>      (<span class="keyword">sizeof</span>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>*) * num_wasm_functions) +  <span class="comment">// code table size</span></div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>      (<span class="keyword">sizeof</span>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>) * num_wasm_functions);    <span class="comment">// code object size</span></div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span> </div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>  <span class="keywordtype">size_t</span> jump_table_size = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a5515cdbbc42cf3c78581ea13768f74bb">JumpTableAssembler::SizeForNumberOfSlots</a>(num_wasm_functions));</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>  <span class="keywordtype">size_t</span> far_jump_table_size =</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>      <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a87add92ae969554c1b14d8ff3e8d7cd2">JumpTableAssembler::SizeForNumberOfFarJumpSlots</a>(</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>          <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">BuiltinLookup::BuiltinCount</a>(),</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>          NumWasmFunctionsInFarJumpTable(num_wasm_functions)));</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span> </div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>  <span class="keywordflow">return</span> wasm_module_estimate + native_module_estimate + jump_table_size +</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>         far_jump_table_size;</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>}</div>
</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span> </div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02411" data-start="{" data-end="}">
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb"> 2411</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">WasmCodeManager::HasMemoryProtectionKeySupport</a>() {</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span><span class="preprocessor">#if V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1RwxMemoryWriteScope.html#a9771bab10900e92154b51ae8884ebd47">RwxMemoryWriteScope::IsSupported</a>();</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span><span class="preprocessor">#endif  </span><span class="comment">// V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>}</div>
</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span> </div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02420" data-start="{" data-end="}">
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a930893209d531231682fce4cbef728ed"> 2420</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a930893209d531231682fce4cbef728ed">WasmCodeManager::MemoryProtectionKeysEnabled</a>() {</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">HasMemoryProtectionKeySupport</a>();</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>}</div>
</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span> </div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02425" data-start="{" data-end="}">
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a2241851e1074b022606031a831966b17"> 2425</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a2241851e1074b022606031a831966b17">WasmCodeManager::MemoryProtectionKeyWritable</a>() {</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span><span class="preprocessor">#if V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>  <span class="keywordflow">return</span> RwxMemoryWriteScope::IsPKUWritable();</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span><span class="preprocessor">#endif  </span><span class="comment">// V8_HAS_PKU_JIT_WRITE_PROTECT</span></div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>}</div>
</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span> </div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>std::shared_ptr&lt;NativeModule&gt; WasmCodeManager::NewNativeModule(</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">WasmEnabledFeatures</a> enabled_features,</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">WasmDetectedFeatures</a> detected_features, <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">CompileTimeImports</a> compile_imports,</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    <span class="keywordtype">size_t</span> code_size_estimate, std::shared_ptr&lt;const WasmModule&gt; module) {</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span><span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>    <a class="code hl_class" href="classv8_1_1internal_1_1VirtualMemory.html">VirtualMemory</a> code_space;</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>    std::shared_ptr&lt;NativeModule&gt; ret;</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>    <span class="keyword">new</span> <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>(enabled_features, detected_features, compile_imports,</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>                     <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#ae73da17de18352a106bb4e622f610d85">DynamicTiering</a>{<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_dynamic_tiering.value()},</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>                     std::move(code_space), std::move(module),</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>                     isolate-&gt;async_counters(), &amp;ret);</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>    <span class="comment">// The constructor initialized the shared_ptr.</span></div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>    <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(ret);</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>    <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;New NativeModule (wasm-jitless) %p\n&quot;</span>, ret.get());</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>  }</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span> </div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>  <span class="keywordflow">if</span> (total_committed_code_space_.load() &gt;</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>      critical_committed_code_space_.load()) {</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>    <span class="comment">// Flush Liftoff code and record the flushed code size.</span></div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>    <span class="keyword">auto</span> [code_size, metadata_size] = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">wasm::GetWasmEngine</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#afb84cc1eff65c2e2c597b932ca80696c">FlushLiftoffCode</a>();</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>    isolate-&gt;counters()-&gt;wasm_flushed_liftoff_code_size_bytes()-&gt;AddSample(</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(code_size));</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>    isolate-&gt;counters()-&gt;wasm_flushed_liftoff_metadata_size_bytes()-&gt;AddSample(</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(metadata_size));</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span> </div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>    (<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>))</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>        -&gt;MemoryPressureNotification(MemoryPressureLevel::kCritical);</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>    <span class="keywordtype">size_t</span> committed = total_committed_code_space_.load();</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>    <a class="code hl_define" href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a>(max_committed_code_space_, committed);</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>    critical_committed_code_space_.store(</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>        committed + (max_committed_code_space_ - committed) / 2);</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>  }</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span> </div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>  <span class="keywordtype">size_t</span> code_vmem_size =</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>      ReservationSize(code_size_estimate, module-&gt;num_declared_functions, 0);</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span> </div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>  <span class="comment">// The &#39;--wasm-max-initial-code-space-reservation&#39; testing flag can be used to</span></div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>  <span class="comment">// reduce the maximum size of the initial code space reservation (in MB).</span></div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_initial_code_space_reservation &gt; 0) {</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>    <span class="keywordtype">size_t</span> flag_max_bytes =</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>        <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_initial_code_space_reservation) *</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>        MB;</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>    <span class="keywordflow">if</span> (flag_max_bytes &lt; code_vmem_size) code_vmem_size = flag_max_bytes;</div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>  }</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span> </div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>  <span class="comment">// Try up to two times; getting rid of dead JSArrayBuffer allocations might</span></div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>  <span class="comment">// require two GCs because the first GC maybe incremental and may have</span></div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>  <span class="comment">// floating garbage.</span></div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kAllocationRetries = 2;</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>  VirtualMemory code_space;</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> retries = 0;; ++retries) {</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>    code_space = TryAllocate(code_vmem_size);</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>    <span class="keywordflow">if</span> (code_space.IsReserved()) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>    <span class="keywordflow">if</span> (retries == kAllocationRetries) {</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span>      <span class="keyword">auto</span> oom_detail = <a class="code hl_function" href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">base::FormattedString</a>{}</div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>                        &lt;&lt; <span class="stringliteral">&quot;NewNativeModule cannot allocate code space of &quot;</span></div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>                        &lt;&lt; code_vmem_size &lt;&lt; <span class="stringliteral">&quot; bytes&quot;</span>;</div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>      <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(isolate, <span class="stringliteral">&quot;Allocate initial wasm code space&quot;</span>,</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>                                  oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">UNREACHABLE</a>();</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>    }</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>    <span class="comment">// Run one GC, then try the allocation again.</span></div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>    isolate-&gt;heap()-&gt;MemoryPressureNotification(MemoryPressureLevel::kCritical,</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>                                                <span class="keyword">true</span>);</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>  }</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span> </div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = code_space.<a class="code hl_function" href="classv8_1_1internal_1_1VirtualMemory.html#ae9a440f195e1f00ff57e360c163d9b33">address</a>();</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>  <span class="keywordtype">size_t</span> size = code_space.size();</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> = code_space.end();</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>  std::shared_ptr&lt;NativeModule&gt; ret;</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>  <span class="keyword">new</span> NativeModule(enabled_features, detected_features,</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>                   std::move(compile_imports),</div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>                   <a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#ae73da17de18352a106bb4e622f610d85">DynamicTiering</a>{<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_dynamic_tiering.value()},</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>                   std::move(code_space), std::move(module),</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>                   isolate-&gt;async_counters(), &amp;ret);</div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>  <span class="comment">// The constructor initialized the shared_ptr.</span></div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(ret);</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>  <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;New NativeModule %p: Mem: 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;,+%zu\n&quot;</span>, ret.get(),</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>             <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, size);</div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span> </div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>  <a class="code hl_typedef" href="namespacev8_1_1base.html#a3279492e34e391eefba807ff6a59576e">base::SpinningMutexGuard</a> lock(&amp;native_modules_mutex_);</div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>  lookup_map_.insert(std::make_pair(<a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a>, std::make_pair(<a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>, ret.get())));</div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>}</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span> </div>
<div class="foldopen" id="foldopen02521" data-start="{" data-end="}">
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ae66433eec52661194dacaa6ded13bf6d"> 2521</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ae66433eec52661194dacaa6ded13bf6d">NativeModule::SampleCodeSize</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Counters.html">Counters</a>* counters)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>  <span class="keywordtype">size_t</span> code_size = code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a9f5f12643315075f0a553f61c992fdb1">committed_code_space</a>();</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>  <span class="keywordtype">int</span> code_size_mb = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(code_size / <a class="code hl_variable" href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">MB</a>);</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span><span class="preprocessor">#if V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_jitless) {</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>    <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> lock(&amp;module_-&gt;interpreter_mutex_);</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> interpreter = module_-&gt;interpreter_.lock()) {</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>      code_size_mb = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(interpreter-&gt;TotalBytecodeSize() / MB);</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>    }</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>  }</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span><span class="preprocessor">#endif  </span><span class="comment">// V8_ENABLE_DRUMBRAKE</span></div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>  counters-&gt;wasm_module_code_size_mb()-&gt;AddSample(code_size_mb);</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>  <span class="keywordtype">int</span> code_size_kb = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(code_size / <a class="code hl_variable" href="namespacev8_1_1internal.html#ab368fe5f67cc93158861582746107fec">KB</a>);</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>  counters-&gt;wasm_module_code_size_kb()-&gt;AddSample(code_size_kb);</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>  <span class="comment">// Record the size of metadata.</span></div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Histogram.html">Histogram</a>* metadata_histogram = counters-&gt;wasm_module_metadata_size_kb();</div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>  <span class="keywordflow">if</span> (metadata_histogram-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Histogram.html#a8c6f22e6b5446dfc455a8af4e97eb21b">Enabled</a>()) {</div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>    <span class="comment">// TODO(349610478): EstimateCurrentMemoryConsumption() acquires a large</span></div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>    <span class="comment">// amount of locks per NativeModule. This estimation is run on every</span></div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>    <span class="comment">// mark-compact GC. Reconsider whether this should be run less frequently.</span></div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>    <span class="comment">// (Probably incomplete) list of locks acquired:</span></div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>    <span class="comment">// - TypeFeedbackStorage::mutex</span></div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>    <span class="comment">// - LazilyGeneratedNames::mutex_</span></div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>    <span class="comment">// - CompilationStateImpl::mutex_</span></div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>    <span class="comment">// - CompilationUnitQueues::queues_mutex_</span></div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>    <span class="comment">//   - per queue: QueueImpl::mutex</span></div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span>    <span class="comment">// - BigUnitsQueue::mutex</span></div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>    <span class="comment">// - WasmImportWrapperCache::mutex_</span></div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>    <span class="comment">// - NativeModule::allocation_mutex_</span></div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>    <span class="comment">// - LazilyGeneratedNames::mutex_</span></div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>    <span class="comment">// - DebugInfoImpl::debug_side_tables_mutex_</span></div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>    <span class="comment">// - DebugInfoImpl::mutex_</span></div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>    <span class="keywordtype">int</span> metadata_size_kb =</div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>        <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a46fa56beff1669a8eb218e9aec9fd8d2">EstimateCurrentMemoryConsumption</a>() / <a class="code hl_variable" href="namespacev8_1_1internal.html#ab368fe5f67cc93158861582746107fec">KB</a>);</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>    metadata_histogram-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Histogram.html#a1fa018dc2756acdc3a1bb4fdbe97ae86">AddSample</a>(metadata_size_kb);</div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>  }</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span>  <span class="comment">// If this is a wasm module of &gt;= 2MB, also sample the freed code size,</span></div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>  <span class="comment">// absolute and relative. Code GC does not happen on asm.js</span></div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>  <span class="comment">// modules, and small modules will never trigger GC anyway.</span></div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>  <span class="keywordtype">size_t</span> generated_size = code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ac228b5f49cf9bad916c9226c6e48e5a2">generated_code_size</a>();</div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>  <span class="keywordflow">if</span> (generated_size &gt;= 2 * MB &amp;&amp; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>()-&gt;origin == <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>) {</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>    <span class="keywordtype">size_t</span> freed_size = code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a3a969b7f9241a75ec3b51dd31aacf3ad">freed_code_size</a>();</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>    <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(freed_size, generated_size);</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>    <span class="keywordtype">int</span> freed_percent = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(100 * freed_size / generated_size);</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>    counters-&gt;wasm_module_freed_code_size_percent()-&gt;AddSample(freed_percent);</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>  }</div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>}</div>
</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span> </div>
<div class="foldopen" id="foldopen02569" data-start="{" data-end="}">
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed"> 2569</a></span><a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html">UnpublishedWasmCode</a> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">NativeModule::AddCompiledCode</a>(</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>    <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html">WasmCompilationResult</a>&amp; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>) {</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>  std::vector&lt;UnpublishedWasmCode&gt; code = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">AddCompiledCode</a>({&amp;<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>, 1});</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>  <span class="keywordflow">return</span> std::move(code[0]);</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>}</div>
</div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span> </div>
<div class="foldopen" id="foldopen02575" data-start="{" data-end="}">
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ad7de45595a2546cd0e533309b1389f00"> 2575</a></span>std::vector&lt;UnpublishedWasmCode&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">NativeModule::AddCompiledCode</a>(</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCompilationResult&gt;</a> results) {</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>  <a class="code hl_define" href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a>(<a class="code hl_define" href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a>(<span class="stringliteral">&quot;v8.wasm.detailed&quot;</span>),</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>               <span class="stringliteral">&quot;wasm.AddCompiledCode&quot;</span>, <span class="stringliteral">&quot;num&quot;</span>, results.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!results.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">empty</a>());</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>  std::vector&lt;UnpublishedWasmCode&gt; generated_code;</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>  generated_code.reserve(results.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span> </div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>  <span class="comment">// First, allocate code space for all the results.</span></div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>  <span class="comment">// Never add more than half of a code space at once. This leaves some space</span></div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>  <span class="comment">// for jump tables and other overhead. We could use {OverheadPerCodeSpace},</span></div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>  <span class="comment">// but that&#39;s only an approximation, so we are conservative here and never use</span></div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>  <span class="comment">// more than half a code space.</span></div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>  <span class="keywordtype">size_t</span> max_code_batch_size = <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_code_space_size_mb * MB / 2;</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>  <span class="keywordtype">size_t</span> total_code_space = 0;</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> : results) {</div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.succeeded());</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>    <span class="keywordtype">size_t</span> new_code_space =</div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>        <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.code_desc.instr_size);</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    <span class="keywordflow">if</span> (total_code_space + new_code_space &gt; max_code_batch_size) {</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>      <span class="comment">// Split off the first part of the {results} vector and process it</span></div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>      <span class="comment">// separately. This method then continues with the rest.</span></div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>      <span class="keywordtype">size_t</span> split_point = &amp;<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> - results.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>();</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>      <span class="keywordflow">if</span> (split_point == 0) {</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>        <span class="comment">// Fuzzers sometimes hit this by reducing --wasm-max-code-sapce-size-mb</span></div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>        <span class="comment">// to an unreasonably small value. Make this an OOM to avoid getting a</span></div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>        <span class="comment">// CHECK failure in this case.</span></div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_code_space_size_mb &lt;</div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>            <a class="code hl_variable" href="namespacev8_1_1internal.html#a55676947d895fd4cdd273e53dff16694">kDefaultMaxWasmCodeSpaceSizeMb</a> / 10) {</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>          <span class="keyword">auto</span> oom_detail = <a class="code hl_class" href="classv8_1_1base_1_1FormattedString.html">base::FormattedString</a>{}</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>                            &lt;&lt; <span class="stringliteral">&quot;--wasm-max-code-space-size=&quot;</span></div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span>                            &lt;&lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.wasm_max_code_space_size_mb.value();</div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>          <a class="code hl_function" href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">V8::FatalProcessOutOfMemory</a>(<span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>                                      <span class="stringliteral">&quot;A single code object needs more than &quot;</span></div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>                                      <span class="stringliteral">&quot;half of the code space size&quot;</span>,</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span>                                      oom_detail.PrintToArray().data());</div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>          <span class="comment">// Otherwise make this a CHECK failure so we see if this is happening</span></div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>          <span class="comment">// in the wild or in tests.</span></div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>          <a class="code hl_define" href="logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a>(</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>              <span class="stringliteral">&quot;A single code object needs more than half of the code space &quot;</span></div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>              <span class="stringliteral">&quot;size&quot;</span>);</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>        }</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>      }</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>      <span class="keyword">auto</span> first_results = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">AddCompiledCode</a>(results.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a2a7f93a33a4938bd73b628789f214d3d">SubVector</a>(0, split_point));</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>      generated_code.insert(generated_code.end(),</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>                            std::make_move_iterator(first_results.begin()),</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>                            std::make_move_iterator(first_results.end()));</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>      <span class="comment">// Continue processing the rest of the vector. This change to the</span></div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>      <span class="comment">// {results} vector does not invalidate iterators (which are just</span></div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>      <span class="comment">// pointers). In particular, the end pointer stays the same.</span></div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>      results += split_point;</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>      total_code_space = 0;</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>    }</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>    total_code_space += new_code_space;</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>  }</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> code_space;</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>  <a class="code hl_struct" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html">NativeModule::JumpTablesRef</a> jump_tables;</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>  {</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>    <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard{&amp;allocation_mutex_};</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>    code_space = code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a1aa6c58339ee0dc3f42716472fc79fc8">AllocateForCode</a>(<span class="keyword">this</span>, total_code_space);</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span>    <span class="comment">// Lookup the jump tables to use once, then use for all code objects.</span></div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>    jump_tables =</div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>        FindJumpTablesForRegionLocked(<a class="code hl_function" href="namespacev8_1_1base.html#a576345f40485ddc3e105508023924217">base::AddressRegionOf</a>(code_space));</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>  }</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>  <span class="comment">// If we happen to have a {total_code_space} which is bigger than</span></div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>  <span class="comment">// {kMaxCodeSpaceSize}, we would not find valid jump tables for the whole</span></div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>  <span class="comment">// region. If this ever happens, we need to handle this case (by splitting the</span></div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>  <span class="comment">// {results} vector in smaller chunks).</span></div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(jump_tables.<a class="code hl_function" href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#af7c96722e3f88e952d116c817305c7bb">is_valid</a>());</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span> </div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>  std::vector&lt;size_t&gt; sizes;</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> : results) {</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>    sizes.emplace_back(<a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.code_desc.instr_size));</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>  }</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>  <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#a647c86b788456e7ec80f0bc1d365561a">ThreadIsolation::RegisterJitAllocations</a>(</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>      <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a><span class="keyword">&gt;</span>(code_space.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>()), sizes,</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>      <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0ea3d2a650902eeb3540a581b2abbb17bb8">ThreadIsolation::JitAllocationType::kWasmCode</a>);</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span> </div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>  <span class="comment">// Now copy the generated code into the code space and relocate it.</span></div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> : results) {</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.code_desc.buffer, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.instr_buffer-&gt;start());</div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>    <span class="keywordtype">size_t</span> code_size = <a class="code hl_function" href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp&lt;kCodeAlignment&gt;</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.code_desc.instr_size);</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;uint8_t&gt;</a> this_code_space = code_space.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a2a7f93a33a4938bd73b628789f214d3d">SubVector</a>(0, code_size);</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>    code_space += code_size;</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>    generated_code.emplace_back(</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>        AddCodeWithCodeSpace(</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.func_index, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.code_desc, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.frame_slot_count,</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.ool_spill_count, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.tagged_parameter_slots,</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.protected_instructions_data.as_vector(),</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.source_positions.as_vector(),</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.inlining_positions.as_vector(),</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.deopt_data.as_vector(), <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#ac5c325f4f80fa26ae7e7bd8fa6caed93">GetCodeKind</a>(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>),</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.result_tier, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.for_debugging,</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>            <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.frame_has_feedback_slot, this_code_space, jump_tables),</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>        std::move(<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>.assumptions));</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>  }</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(0, code_space.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>());</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span> </div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>  <span class="comment">// Check that we added the expected amount of code objects, even if we split</span></div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span>  <span class="comment">// the {results} vector.</span></div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(generated_code.capacity(), generated_code.size());</div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span> </div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>  <span class="keywordflow">return</span> generated_code;</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>}</div>
</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span> </div>
<div class="foldopen" id="foldopen02681" data-start="{" data-end="}">
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ad3b78decf5b6f968e1e563f3759515b5"> 2681</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ad3b78decf5b6f968e1e563f3759515b5">NativeModule::SetDebugState</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3c">DebugState</a> new_debug_state) {</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>  <span class="comment">// Do not tier down asm.js (just never change the tiering state).</span></div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">module</a>()-&gt;origin != <a class="code hl_enumvalue" href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">kWasmOrigin</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span> </div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>  debug_state_ = new_debug_state;</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>}</div>
</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span> </div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span><span class="keywordtype">bool</span> ShouldRemoveCode(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code, <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599c">NativeModule::RemoveFilter</a> filter) {</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>  <span class="keywordflow">if</span> (filter == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472">NativeModule::RemoveFilter::kRemoveDebugCode</a> &amp;&amp;</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>      !code-&gt;for_debugging()) {</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>  }</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>  <span class="keywordflow">if</span> (filter == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">NativeModule::RemoveFilter::kRemoveNonDebugCode</a> &amp;&amp;</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span>      code-&gt;for_debugging()) {</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>  }</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>  <span class="keywordflow">if</span> (filter == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436">NativeModule::RemoveFilter::kRemoveLiftoffCode</a> &amp;&amp;</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>      !code-&gt;is_liftoff()) {</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>  }</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span>  <span class="keywordflow">if</span> (filter == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca69b3b2c8ba3f6cffe3967b55e0cb44fe">NativeModule::RemoveFilter::kRemoveTurbofanCode</a> &amp;&amp;</div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>      !code-&gt;is_turbofan()) {</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>  }</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>}</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span> </div>
<div class="foldopen" id="foldopen02711" data-start="{" data-end="}">
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8eaf4313bd088d6cb36ba7f444621d1c"> 2711</a></span>std::pair&lt;size_t, size_t&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8eaf4313bd088d6cb36ba7f444621d1c">NativeModule::RemoveCompiledCode</a>(</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>    <a class="code hl_enumeration" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599c">RemoveFilter</a> filter) {</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>  <span class="keyword">const</span> uint32_t num_imports = module_-&gt;num_imported_functions;</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>  <span class="keyword">const</span> uint32_t <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a> = module_-&gt;num_declared_functions;</div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>  <span class="keywordtype">size_t</span> removed_codesize = 0;</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>  <span class="keywordtype">size_t</span> removed_metadatasize = 0;</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = code_table_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>    <span class="keywordflow">if</span> (code &amp;&amp; ShouldRemoveCode(code, filter)) {</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>      removed_codesize += code-&gt;instructions_size();</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>      removed_metadatasize += code-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>      code_table_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>      <span class="comment">// Add the code to the {WasmCodeRefScope}, so the ref count cannot drop to</span></div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>      <span class="comment">// zero here. It might in the {WasmCodeRefScope} destructor, though.</span></div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(code);</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>      code-&gt;DecRefOnLiveCode();</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>      uint32_t func_index = <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> + num_imports;</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>      <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#aafa35dbd8dcc12821a84cb56594ee2df">UseLazyStubLocked</a>(func_index);</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>    }</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>  }</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>  <span class="comment">// When resuming optimized execution after a debugging session ends, or when</span></div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>  <span class="comment">// discarding optimized code that made outdated assumptions, allow another</span></div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>  <span class="comment">// tier-up task to get scheduled.</span></div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>  <span class="keywordflow">if</span> (filter == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472">RemoveFilter::kRemoveDebugCode</a> ||</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>      filter == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca69b3b2c8ba3f6cffe3967b55e0cb44fe">RemoveFilter::kRemoveTurbofanCode</a>) {</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>    compilation_state_-&gt;AllowAnotherTopTierJobForAllFunctions();</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>  }</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span>  <span class="keywordflow">return</span> std::make_pair(removed_codesize, removed_metadatasize);</div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>}</div>
</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span> </div>
<div class="foldopen" id="foldopen02742" data-start="{" data-end="}">
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a21586b2fdaae541148e2d8bdb100bf8b"> 2742</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a21586b2fdaae541148e2d8bdb100bf8b">NativeModule::SumLiftoffCodeSizeForTesting</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>  <span class="keyword">const</span> uint32_t <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a> = module_-&gt;num_declared_functions;</div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>  <span class="keywordtype">size_t</span> codesize_liftoff = 0;</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">num_functions</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = code_table_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>    <span class="keywordflow">if</span> (code &amp;&amp; code-&gt;is_liftoff()) {</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>      codesize_liftoff += code-&gt;instructions_size();</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>    }</div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span>  }</div>
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"> 2752</span>  <span class="keywordflow">return</span> codesize_liftoff;</div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>}</div>
</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span> </div>
<div class="foldopen" id="foldopen02755" data-start="{" data-end="}">
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a169fd10581fcc34645b802baca380789"> 2755</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a169fd10581fcc34645b802baca380789">NativeModule::FreeCode</a>(<a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;WasmCode* const&gt;</a> codes) {</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>  <span class="comment">// Free the code space.</span></div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>  code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ae6d33802bb8ba17667cb1ae5b32e1aae">FreeCode</a>(codes);</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span> </div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>  <span class="keywordflow">if</span> (!new_owned_code_.empty()) TransferNewOwnedCodeLocked();</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html">DebugInfo</a>* debug_info = debug_info_.get();</div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>  <span class="comment">// Free the {WasmCode} objects. This will also unregister trap handler data.</span></div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code : codes) {</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(1, owned_code_.count(code-&gt;instruction_start()));</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>    owned_code_.erase(code-&gt;instruction_start());</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>  }</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>  <span class="comment">// Remove debug side tables for all removed code objects, after releasing our</span></div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>  <span class="comment">// lock. This is to avoid lock order inversion.</span></div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>  <span class="keywordflow">if</span> (debug_info) debug_info-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html#ad68da127ead8c18497a9a92b11f3f4d9">RemoveDebugSideTables</a>(codes);</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>}</div>
</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span> </div>
<div class="foldopen" id="foldopen02772" data-start="{" data-end="}">
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac3706216da596aa8cf7337b8182d5e75"> 2772</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac3706216da596aa8cf7337b8182d5e75">NativeModule::GetNumberOfCodeSpacesForTesting</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard{&amp;allocation_mutex_};</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>  <span class="keywordflow">return</span> code_allocator_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a5d094d325d0686a0da62db1dd40c2688">GetNumCodeSpaces</a>();</div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>}</div>
</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span> </div>
<div class="foldopen" id="foldopen02777" data-start="{" data-end="}">
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a32aeb7786fe56d49f56d6da667f940ca"> 2777</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a32aeb7786fe56d49f56d6da667f940ca">NativeModule::HasDebugInfo</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>  <span class="keywordflow">return</span> debug_info_ != <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>}</div>
</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span> </div>
<div class="foldopen" id="foldopen02782" data-start="{" data-end="}">
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a773f6a9db3d5a181ca810d7a92e19da6"> 2782</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html">DebugInfo</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a773f6a9db3d5a181ca810d7a92e19da6">NativeModule::GetDebugInfo</a>() {</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>  <span class="keywordflow">if</span> (!debug_info_) debug_info_ = std::make_unique&lt;DebugInfo&gt;(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>  <span class="keywordflow">return</span> debug_info_.get();</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span>}</div>
</div>
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span> </div>
<div class="foldopen" id="foldopen02788" data-start="{" data-end="}">
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ae9941bdd4ef6ffa3b896d196231cf8c5"> 2788</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NamesProvider.html">NamesProvider</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ae9941bdd4ef6ffa3b896d196231cf8c5">NativeModule::GetNamesProvider</a>() {</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a53bed2d056d03e227cb3fd50df82a114">HasWireBytes</a>());</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> guard(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>  <span class="keywordflow">if</span> (!names_provider_) {</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>    names_provider_ =</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>        std::make_unique&lt;NamesProvider&gt;(module_.get(), <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">wire_bytes</a>());</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>  }</div>
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"> 2795</span>  <span class="keywordflow">return</span> names_provider_.get();</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>}</div>
</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span> </div>
<div class="foldopen" id="foldopen02798" data-start="{" data-end="}">
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a46fa56beff1669a8eb218e9aec9fd8d2"> 2798</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a46fa56beff1669a8eb218e9aec9fd8d2">NativeModule::EstimateCurrentMemoryConsumption</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>  <a class="code hl_define" href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>, 480);</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = <span class="keyword">sizeof</span>(<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a16196a1962694773b11f2434c5d7becf">NativeModule</a>);</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += module_-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span> </div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>  std::shared_ptr&lt;base::OwnedVector&lt;const uint8_t&gt;&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">wire_bytes</a> =</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span>      std::atomic_load(&amp;wire_bytes_);</div>
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"> 2805</span>  <span class="keywordtype">size_t</span> wire_bytes_size = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">wire_bytes</a> ? <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">wire_bytes</a>-&gt;<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>() : 0;</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += wire_bytes_size;</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span> </div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>  <span class="keywordflow">if</span> (source_map_) {</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += source_map_-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>  }</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += compilation_state_-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>  <span class="comment">// For {tiering_budgets_}.</span></div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += module_-&gt;num_declared_functions * <span class="keyword">sizeof</span>(uint32_t);</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span> </div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>  <span class="keywordtype">size_t</span> external_storage = compile_imports_.<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#a9c6aade0e5919e30ceb5a765ae2ff5de">constants_module</a>().capacity();</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>  <span class="comment">// This is an approximation: the actual number of inline-stored characters</span></div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>  <span class="comment">// is a little less than the result of `sizeof`.</span></div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>  <span class="keywordflow">if</span> (external_storage &gt; <span class="keyword">sizeof</span>(std::string)) {</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += external_storage;</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>  }</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span> </div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>  <span class="comment">// For fast api call targets.</span></div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += module_-&gt;num_imported_functions *</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>            (<span class="keyword">sizeof</span>(std::atomic&lt;Address&gt;) + <span class="keyword">sizeof</span>(CFunctionInfo*));</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>  <span class="comment">// We cannot hold the `allocation_mutex_` while calling</span></div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>  <span class="comment">// `debug_info_-&gt;EstimateCurrentMemoryConsumption`, as we would run into a</span></div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>  <span class="comment">// lock-order-inversion when acquiring the `mutex_`. The reverse order happens</span></div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>  <span class="comment">// when calling `WasmScript::SetBreakPointForFunction`.</span></div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html">DebugInfo</a>* debug_info;</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span>  {</div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>    <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::RecursiveMutexGuard</a> lock(&amp;allocation_mutex_);</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(owned_code_);</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; [address, unique_code_ptr] : owned_code_) {</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span>      <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += unique_code_ptr-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>    }</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(new_owned_code_);</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>    <span class="keywordflow">for</span> (std::unique_ptr&lt;WasmCode&gt;&amp; code : new_owned_code_) {</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>      <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += code-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>    }</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>    <span class="comment">// For {code_table_}.</span></div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += module_-&gt;num_declared_functions * <span class="keyword">sizeof</span>(<span class="keywordtype">void</span>*);</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">ContentSize</a>(code_space_data_);</div>
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"> 2843</span>    debug_info = debug_info_.get();</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>    <span class="keywordflow">if</span> (names_provider_) {</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>      <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += names_provider_-&gt;EstimateCurrentMemoryConsumption();</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>    }</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>  }</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>  <span class="keywordflow">if</span> (debug_info) {</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> += debug_info-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html#a67a17d959961e67bc426f9aaa7ba2198">EstimateCurrentMemoryConsumption</a>();</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>  }</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span> </div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.trace_wasm_offheap_memory) {</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;NativeModule wire bytes: %zu\n&quot;</span>, wire_bytes_size);</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;NativeModule: %zu\n&quot;</span>, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>);</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>  }</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>}</div>
</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span> </div>
<div class="foldopen" id="foldopen02859" data-start="{" data-end="}">
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a2b2e70f05aba4cbb41820e840e79ab3a"> 2859</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a2b2e70f05aba4cbb41820e840e79ab3a">NativeModule::PrintCurrentMemoryConsumptionEstimate</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8_flags</a>.print_wasm_offheap_memory_size);</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;Off-heap memory size of NativeModule: %zu\n&quot;</span>,</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>         <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a46fa56beff1669a8eb218e9aec9fd8d2">EstimateCurrentMemoryConsumption</a>());</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>}</div>
</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span> </div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span><span class="keywordtype">void</span> WasmCodeManager::FreeNativeModule(</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>    <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">base::Vector&lt;VirtualMemory&gt;</a> owned_code_space, <span class="keywordtype">size_t</span> committed_size) {</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> lock(&amp;native_modules_mutex_);</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; code_space : owned_code_space) {</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(code_space.IsReserved());</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>    <a class="code hl_define" href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a>(<span class="stringliteral">&quot;VMem Release: 0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot;:0x%&quot;</span> PRIxPTR <span class="stringliteral">&quot; (%zu)\n&quot;</span>,</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>               code_space.address(), code_space.end(), code_space.size());</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span> </div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span><span class="preprocessor">#if defined(V8_OS_WIN64)</span></div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>    <span class="keywordflow">if</span> (CanRegisterUnwindInfoForNonABICompliantCodeRange()) {</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>      <a class="code hl_function" href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a70f996f40a6b9c963c47bb920970d841">win64_unwindinfo::UnregisterNonABICompliantCodeRange</a>(</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(code_space.address()));</div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>    }</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN64</span></div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span> </div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>    lookup_map_.erase(code_space.address());</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>    <a class="code hl_function" href="classv8_1_1internal_1_1ThreadIsolation.html#a6a523c13e4e0f1cd5dc4a57a754a616a">ThreadIsolation::UnregisterJitPage</a>(code_space.address(), code_space.size());</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>    code_space.Free();</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!code_space.IsReserved());</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>  }</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span> </div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a>(committed_size, <a class="code hl_function" href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">CommitPageSize</a>()));</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>  [[maybe_unused]] <span class="keywordtype">size_t</span> old_committed =</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>      total_committed_code_space_.fetch_sub(committed_size);</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(committed_size, old_committed);</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>}</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span> </div>
<div class="foldopen" id="foldopen02892" data-start="{" data-end="}">
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a65237f5b80dae7a92d86f131b6df4461"> 2892</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a65237f5b80dae7a92d86f131b6df4461">WasmCodeManager::LookupNativeModule</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>  <a class="code hl_class" href="classv8_1_1base_1_1LockGuard.html">base::SpinningMutexGuard</a> lock(&amp;native_modules_mutex_);</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>  <span class="keywordflow">if</span> (lookup_map_.empty()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span> </div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>  <span class="keyword">auto</span> iter = lookup_map_.upper_bound(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>  <span class="keywordflow">if</span> (iter == lookup_map_.begin()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>  --iter;</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> region_start = iter-&gt;first;</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> region_end = iter-&gt;second.first;</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* candidate = iter-&gt;second.second;</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span> </div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(candidate);</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>  <span class="keywordflow">return</span> region_start &lt;= <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a> &amp;&amp; <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a> &lt; region_end ? candidate : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>}</div>
</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span> </div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">WasmCodeManager::LookupCode</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">NativeModule</a>* candidate = <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a65237f5b80dae7a92d86f131b6df4461">LookupNativeModule</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>  <span class="keywordflow">if</span> (candidate) <span class="keywordflow">return</span> candidate-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5cff149410fcd416933af17dab385ba0">Lookup</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">GetWasmImportWrapperCache</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a14ee1f266c89689eb799afe5f843dc41">Lookup</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>}</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span> </div>
<div class="foldopen" id="foldopen02913" data-start="{" data-end="}">
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f"> 2913</a></span><a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">WasmCodeManager::LookupCode</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>  <span class="comment">// Since kNullAddress is used as a sentinel value, we should not try</span></div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>  <span class="comment">// to look it up in the cache</span></div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a> == kNullAddress) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>  <span class="comment">// If &#39;isolate&#39; is nullptr, do not use a cache. This can happen when</span></div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>  <span class="comment">// called from function V8NameConverter::NameOfAddress</span></div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>  <span class="keywordflow">if</span> (isolate) {</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>    <span class="keywordflow">return</span> isolate-&gt;wasm_code_look_up_cache()-&gt;GetCacheEntry(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>)-&gt;code;</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">wasm::WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">LookupCode</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>  }</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>}</div>
</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span> </div>
<div class="foldopen" id="foldopen02927" data-start="{" data-end="}">
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a589a55d2b33354d07415b1a22cb00d89"> 2927</a></span>std::pair&lt;WasmCode*, SafepointEntry&gt; <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a589a55d2b33354d07415b1a22cb00d89">WasmCodeManager::LookupCodeAndSafepoint</a>(</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>) {</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>  <span class="keyword">auto</span>* entry = isolate-&gt;wasm_code_look_up_cache()-&gt;GetCacheEntry(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code = entry-&gt;code;</div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(code);</div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>  <span class="comment">// For protected instructions we usually do not emit a safepoint because the</span></div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>  <span class="comment">// frame will be unwound anyway. The exception is debugging code, where the</span></div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span>  <span class="comment">// frame might be inspected if &quot;pause on exception&quot; is set.</span></div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>  <span class="comment">// For those instructions, we thus need to explicitly return an empty</span></div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>  <span class="comment">// safepoint; using any previously registered safepoint can lead to crashes</span></div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>  <span class="comment">// when we try to visit spill slots that do not hold tagged values at this</span></div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>  <span class="comment">// point.</span></div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>  <span class="comment">// Evaluate this condition only on demand (the fast path does not need it).</span></div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>  <span class="keyword">auto</span> expect_safepoint = [<a class="code hl_variable" href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">code</a>, <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>]() {</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_protected_instruction = code-&gt;IsProtectedInstruction(</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>        <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a> - WasmFrameConstants::kProtectedInstructionReturnAddressOffset);</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>    <span class="keywordflow">return</span> !is_protected_instruction || code-&gt;for_debugging();</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>  };</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>  <span class="keywordflow">if</span> (!entry-&gt;safepoint_entry.is_initialized() &amp;&amp; expect_safepoint()) {</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>    entry-&gt;safepoint_entry = <a class="code hl_class" href="classv8_1_1internal_1_1SafepointTable.html">SafepointTable</a>{code}.<a class="code hl_function" href="classv8_1_1internal_1_1SafepointTable.html#a079bbd9de5aee144ba660eb2ba3ab070">TryFindEntry</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(entry-&gt;safepoint_entry.is_initialized());</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (expect_safepoint()) {</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(entry-&gt;safepoint_entry, <a class="code hl_class" href="classv8_1_1internal_1_1SafepointTable.html">SafepointTable</a>{code}.<a class="code hl_function" href="classv8_1_1internal_1_1SafepointTable.html#a079bbd9de5aee144ba660eb2ba3ab070">TryFindEntry</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>));</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!entry-&gt;safepoint_entry.is_initialized());</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>  }</div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>  <span class="keywordflow">return</span> std::make_pair(code, entry-&gt;safepoint_entry);</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>}</div>
</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span> </div>
<div class="foldopen" id="foldopen02956" data-start="{" data-end="}">
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aa5c5ecc61ab174d77400fa3082e73537"> 2956</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aa5c5ecc61ab174d77400fa3082e73537">WasmCodeManager::FlushCodeLookupCache</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate) {</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>  <span class="keywordflow">return</span> isolate-&gt;wasm_code_look_up_cache()-&gt;Flush();</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>}</div>
</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span> </div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span><span class="keyword">thread_local</span> <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a>* current_code_refs_scope = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span> </div>
<div class="foldopen" id="foldopen02964" data-start="{" data-end="}">
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#ab3bc479100dcf0b03b840a2151a736e1"> 2964</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#ab3bc479100dcf0b03b840a2151a736e1">WasmCodeRefScope::WasmCodeRefScope</a>()</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>    : previous_scope_(current_code_refs_scope) {</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>  current_code_refs_scope = <span class="keyword">this</span>;</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>}</div>
</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span> </div>
<div class="foldopen" id="foldopen02969" data-start="{" data-end="}">
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#af76812fa3508419520afef1ec8b67a7a"> 2969</a></span><a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#af76812fa3508419520afef1ec8b67a7a">WasmCodeRefScope::~WasmCodeRefScope</a>() {</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(<span class="keyword">this</span>, current_code_refs_scope);</div>
<div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>  current_code_refs_scope = previous_scope_;</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>  <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aabc336382e10df3a5f7c37ba95d15799">WasmCode::DecrementRefCount</a>(<a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">base::VectorOf</a>(code_ptrs_));</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>}</div>
</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span> </div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span><span class="comment">// static</span></div>
<div class="foldopen" id="foldopen02976" data-start="{" data-end="}">
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c"> 2976</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">WasmCodeRefScope::AddRef</a>(<a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">WasmCode</a>* code) {</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(code);</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>  <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">WasmCodeRefScope</a>* current_scope = current_code_refs_scope;</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(current_scope);</div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>  current_scope-&gt;code_ptrs_.push_back(code);</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span>  code-&gt;IncRef();</div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>}</div>
</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span> </div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span><span class="keywordtype">void</span> WasmCodeLookupCache::Flush() {</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; kWasmCodeLookupCacheSize; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++)</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span>    cache_[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>.store(kNullAddress, std::memory_order_release);</div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>}</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span> </div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>WasmCodeLookupCache::CacheEntry* WasmCodeLookupCache::GetCacheEntry(</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">Address</a> <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>) {</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span>  <span class="keyword">static_assert</span>(<a class="code hl_function" href="namespacev8_1_1base_1_1bits.html#a4d06086712ebcd60838caae1a21fcfa3">base::bits::IsPowerOfTwo</a>(kWasmCodeLookupCacheSize));</div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a> != kNullAddress);</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>  uint32_t hash = <a class="code hl_function" href="namespacev8_1_1internal.html#afc0fca463c2a3badf70e62abe7b61771">ComputeAddressHash</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>  uint32_t <a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a> = hash &amp; (kWasmCodeLookupCacheSize - 1);</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>  CacheEntry* entry = &amp;cache_[<a class="code hl_variable" href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">index</a>];</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>  <span class="keywordflow">if</span> (entry-&gt;pc.load(std::memory_order_acquire) == <a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>) {</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>    <span class="comment">// Code can be deallocated at two points:</span></div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>    <span class="comment">// - when the NativeModule that references it is garbage-</span></div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>    <span class="comment">//   collected;</span></div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>    <span class="comment">// - when it is no longer referenced by its NativeModule, nor from</span></div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>    <span class="comment">//   any stack.</span></div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span>    <span class="comment">// The cache is cleared when a NativeModule is destroyed, and when</span></div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>    <span class="comment">// the isolate reports the set of code referenced from its stacks.</span></div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>    <span class="comment">// So, if the code is the cache, it is because it was live at some</span></div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>    <span class="comment">// point (when inserted in the cache), its native module is still</span></div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>    <span class="comment">// considered live, and it has not yet been reported as no longer</span></div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>    <span class="comment">// referenced from any stack. It thus cannot have been released</span></div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span>    <span class="comment">// yet.</span></div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>    <a class="code hl_class" href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">wasm::WasmCodeRefScope</a> code_ref_scope;</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(entry-&gt;code, <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">wasm::GetWasmCodeManager</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">LookupCode</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>));</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span>    <span class="comment">// For WebAssembly frames we perform a lookup in the handler table.</span></div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>    <span class="comment">// This code ref scope is here to avoid a check failure when looking up</span></div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>    <span class="comment">// the code. It&#39;s not actually necessary to keep the code alive as it&#39;s</span></div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>    <span class="comment">// currently being executed.</span></div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>    wasm::WasmCodeRefScope code_ref_scope;</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span>    entry-&gt;pc.store(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>, std::memory_order_release);</div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>    entry-&gt;code = <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">wasm::GetWasmCodeManager</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">LookupCode</a>(<a class="code hl_variable" href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a>);</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span>    entry-&gt;safepoint_entry.Reset();</div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>  }</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>  <span class="keywordflow">return</span> entry;</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>}</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span> </div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>}  <span class="comment">// namespace wasm</span></div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>}  <span class="comment">// namespace internal</span></div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>}  <span class="comment">// namespace v8</span></div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span><span class="preprocessor">#undef TRACE_HEAP</span></div>
<div class="ttc" id="aassembler-inl_8h_html"><div class="ttname"><a href="assembler-inl_8h.html">assembler-inl.h</a></div></div>
<div class="ttc" id="aatomicops_8h_html"><div class="ttname"><a href="atomicops_8h.html">atomicops.h</a></div></div>
<div class="ttc" id="abase_2platform_2platform_8h_html"><div class="ttname"><a href="base_2platform_2platform_8h.html">platform.h</a></div></div>
<div class="ttc" id="abuild__config_8h_html"><div class="ttname"><a href="build__config_8h.html">build_config.h</a></div></div>
<div class="ttc" id="abuiltins-inl_8h_html"><div class="ttname"><a href="builtins-inl_8h.html">builtins-inl.h</a></div></div>
<div class="ttc" id="abuiltins_8cc_html_adc156a864d6037c4df1b276073ae7277"><div class="ttname"><a href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a></div><div class="ttdeci">Builtins::Kind kind</div><div class="ttdef"><b>Definition</b> <a href="builtins_8cc_source.html#l00040">builtins.cc:40</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html">v8::base::AddressRegion</a></div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00016">address-region.h:16</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a13bbde71869b71658a03746941a13f69"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a13bbde71869b71658a03746941a13f69">v8::base::AddressRegion::end</a></div><div class="ttdeci">Address end() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00034">address-region.h:34</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a29afd92431f4eb737887d7c7ff9b9396"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a29afd92431f4eb737887d7c7ff9b9396">v8::base::AddressRegion::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00039">address-region.h:39</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a65b3baa673fc67d3dde9fec305ccdebc"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a65b3baa673fc67d3dde9fec305ccdebc">v8::base::AddressRegion::GetOverlap</a></div><div class="ttdeci">base::AddressRegion GetOverlap(AddressRegion region) const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00056">address-region.h:56</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a753daf867d9e52511d3483b211a9f0b2"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a753daf867d9e52511d3483b211a9f0b2">v8::base::AddressRegion::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00036">address-region.h:36</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_a94a15b5dca8bef88c66880c9b00281ea"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#a94a15b5dca8bef88c66880c9b00281ea">v8::base::AddressRegion::begin</a></div><div class="ttdeci">Address begin() const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00033">address-region.h:33</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1AddressRegion_html_ad799a0c1d53c9117b94f95e6bc742e66"><div class="ttname"><a href="classv8_1_1base_1_1AddressRegion.html#ad799a0c1d53c9117b94f95e6bc742e66">v8::base::AddressRegion::contains</a></div><div class="ttdeci">bool contains(Address address) const</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00041">address-region.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1FormattedString_html"><div class="ttname"><a href="classv8_1_1base_1_1FormattedString.html">v8::base::FormattedString</a></div><div class="ttdef"><b>Definition</b> <a href="string-format_8h_source.html#l00137">string-format.h:137</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1LockGuard_html"><div class="ttname"><a href="classv8_1_1base_1_1LockGuard.html">v8::base::LockGuard</a></div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00534">mutex.h:534</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html">v8::base::OwnedVector</a></div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00209">vector.h:209</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html_af39d85796ffd00480472cde62fb36012"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html#af39d85796ffd00480472cde62fb36012">v8::base::OwnedVector::as_vector</a></div><div class="ttdeci">Vector&lt; T &gt; as_vector() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00276">vector.h:276</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1RecursiveMutex_html_ae0ea6b948aced1c48228d751046356b2"><div class="ttname"><a href="classv8_1_1base_1_1RecursiveMutex.html#ae0ea6b948aced1c48228d751046356b2">v8::base::RecursiveMutex::AssertHeld</a></div><div class="ttdeci">V8_INLINE void AssertHeld() const</div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00402">mutex.h:402</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1SmallVector_html"><div class="ttname"><a href="classv8_1_1base_1_1SmallVector.html">v8::base::SmallVector</a></div><div class="ttdef"><b>Definition</b> <a href="small-vector_8h_source.html#l00022">small-vector.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1SmallVector_html_a11309184df55803b2e97eabdf1cd8aef"><div class="ttname"><a href="classv8_1_1base_1_1SmallVector.html#a11309184df55803b2e97eabdf1cd8aef">v8::base::SmallVector::begin</a></div><div class="ttdeci">T * begin()</div><div class="ttdef"><b>Definition</b> <a href="small-vector_8h_source.html#l00104">small-vector.h:104</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1SmallVector_html_a52ba6afaadfb2e894fff71b9a44c38db"><div class="ttname"><a href="classv8_1_1base_1_1SmallVector.html#a52ba6afaadfb2e894fff71b9a44c38db">v8::base::SmallVector::emplace_back</a></div><div class="ttdeci">void emplace_back(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> <a href="small-vector_8h_source.html#l00156">small-vector.h:156</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html">v8::base::Vector</a></div><div class="ttdef"><b>Definition</b> <a href="zone-list_8h_source.html#l00015">zone-list.h:15</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a1eb4ed5d322a219428bdb9f9a2cb6708"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">v8::base::Vector::length</a></div><div class="ttdeci">int length() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00064">vector.h:64</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a2a7f93a33a4938bd73b628789f214d3d"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a2a7f93a33a4938bd73b628789f214d3d">v8::base::Vector::SubVector</a></div><div class="ttdeci">Vector&lt; T &gt; SubVector(size_t from, size_t to) const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00041">vector.h:41</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a8073322d2a3a5ad755e74dbda482b18c"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a8073322d2a3a5ad755e74dbda482b18c">v8::base::Vector::empty</a></div><div class="ttdeci">constexpr bool empty() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00073">vector.h:73</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a8f91dff816409fb9bceaa94c6caeec32"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">v8::base::Vector::size</a></div><div class="ttdeci">constexpr size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00070">vector.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_ad0021e2947c974d78adbbc1d543d43a5"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">v8::base::Vector::begin</a></div><div class="ttdeci">constexpr T * begin() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00096">vector.h:96</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_adc40a57a246645ccf947f03f5c8dee62"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#adc40a57a246645ccf947f03f5c8dee62">v8::base::Vector::data</a></div><div class="ttdeci">constexpr T * data() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00100">vector.h:100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Builtins_html_a9272a472ad4885ecd59c1f55dcb16028"><div class="ttname"><a href="classv8_1_1internal_1_1Builtins.html#a9272a472ad4885ecd59c1f55dcb16028">v8::internal::Builtins::kAllBuiltinsAreIsolateIndependent</a></div><div class="ttdeci">static constexpr bool kAllBuiltinsAreIsolateIndependent</div><div class="ttdef"><b>Definition</b> <a href="builtins_8h_source.html#l00262">builtins.h:262</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html">v8::internal::CodeDesc</a></div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00030">code-desc.h:30</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_a0640b83e72c68ce482d00ce65b0732cf"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#a0640b83e72c68ce482d00ce65b0732cf">v8::internal::CodeDesc::buffer</a></div><div class="ttdeci">uint8_t * buffer</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00045">code-desc.h:45</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_a0ef1d82572dad59b3e6aedc82bf1247f"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#a0ef1d82572dad59b3e6aedc82bf1247f">v8::internal::CodeDesc::safepoint_table_size</a></div><div class="ttdeci">int safepoint_table_size</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00055">code-desc.h:55</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_a4ec6827a7510122e162e8849e387f33b"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#a4ec6827a7510122e162e8849e387f33b">v8::internal::CodeDesc::reloc_size</a></div><div class="ttdeci">int reloc_size</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00094">code-desc.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_a67a9dadee748e8f0ab644b5a3e282cd9"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#a67a9dadee748e8f0ab644b5a3e282cd9">v8::internal::CodeDesc::handler_table_offset</a></div><div class="ttdeci">int handler_table_offset</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00057">code-desc.h:57</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_a95ad53de51277b77af42d916e2565e24"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#a95ad53de51277b77af42d916e2565e24">v8::internal::CodeDesc::constant_pool_offset</a></div><div class="ttdeci">int constant_pool_offset</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00060">code-desc.h:60</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_ab886efa479651e14e7e6bc708a4be521"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#ab886efa479651e14e7e6bc708a4be521">v8::internal::CodeDesc::buffer_size</a></div><div class="ttdeci">int buffer_size</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00046">code-desc.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_ae607eb84e6b2870d1e80928c4e5e1cde"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#ae607eb84e6b2870d1e80928c4e5e1cde">v8::internal::CodeDesc::safepoint_table_offset</a></div><div class="ttdeci">int safepoint_table_offset</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00054">code-desc.h:54</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_af887603bc5c17ab365f80879c2660727"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#af887603bc5c17ab365f80879c2660727">v8::internal::CodeDesc::instr_size</a></div><div class="ttdeci">int instr_size</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00050">code-desc.h:50</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeDesc_html_afd7aefc249b9a1db13e3d00f95f94e09"><div class="ttname"><a href="classv8_1_1internal_1_1CodeDesc.html#afd7aefc249b9a1db13e3d00f95f94e09">v8::internal::CodeDesc::code_comments_offset</a></div><div class="ttdeci">int code_comments_offset</div><div class="ttdef"><b>Definition</b> <a href="code-desc_8h_source.html#l00063">code-desc.h:63</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1CodeReference_html"><div class="ttname"><a href="classv8_1_1internal_1_1CodeReference.html">v8::internal::CodeReference</a></div><div class="ttdef"><b>Definition</b> <a href="code-reference_8h_source.html#l00023">code-reference.h:23</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Counters_html"><div class="ttname"><a href="classv8_1_1internal_1_1Counters.html">v8::internal::Counters</a></div><div class="ttdef"><b>Definition</b> <a href="counters_8h_source.html#l00502">counters.h:502</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Deoptimizer_html_a2baf047b2ee590dddae72e66e1386983"><div class="ttname"><a href="classv8_1_1internal_1_1Deoptimizer.html#a2baf047b2ee590dddae72e66e1386983">v8::internal::Deoptimizer::kEagerDeoptExitSize</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE const int kEagerDeoptExitSize</div><div class="ttdef"><b>Definition</b> <a href="deoptimizer_8h_source.html#l00164">deoptimizer.h:164</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html">v8::internal::DirectHandle</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00643">handles.h:652</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Disassembler_html_a3dbcf578257496f2a1b1f3db8966f119"><div class="ttname"><a href="classv8_1_1internal_1_1Disassembler.html#a3dbcf578257496f2a1b1f3db8966f119">v8::internal::Disassembler::Decode</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE int Decode(Isolate *isolate, std::ostream &amp;os, uint8_t *begin, uint8_t *end, CodeReference code={}, Address current_pc=kNullAddress, size_t range_limit=0)</div><div class="ttdef"><b>Definition</b> <a href="disassembler_8cc_source.html#l00510">disassembler.cc:510</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1EmbeddedData_html_a5f046101e1ed7d746979f87acbcb60e5"><div class="ttname"><a href="classv8_1_1internal_1_1EmbeddedData.html#a5f046101e1ed7d746979f87acbcb60e5">v8::internal::EmbeddedData::FromBlob</a></div><div class="ttdeci">static EmbeddedData FromBlob()</div><div class="ttdef"><b>Definition</b> <a href="embedded-data_8h_source.html#l00062">embedded-data.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HandleScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1HandleScope.html">v8::internal::HandleScope</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00258">handles.h:258</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HandlerTable_html"><div class="ttname"><a href="classv8_1_1internal_1_1HandlerTable.html">v8::internal::HandlerTable</a></div><div class="ttdef"><b>Definition</b> <a href="handler-table_8h_source.html#l00037">handler-table.h:37</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a163e8ada76f0d7319bf51a7fefc33074"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a163e8ada76f0d7319bf51a7fefc33074">v8::internal::Heap::GetCodeRangeReservedAreaSize</a></div><div class="ttdeci">static size_t GetCodeRangeReservedAreaSize()</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l03047">heap.cc:3047</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Histogram_html"><div class="ttname"><a href="classv8_1_1internal_1_1Histogram.html">v8::internal::Histogram</a></div><div class="ttdef"><b>Definition</b> <a href="counters_8h_source.html#l00156">counters.h:156</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Histogram_html_a1fa018dc2756acdc3a1bb4fdbe97ae86"><div class="ttname"><a href="classv8_1_1internal_1_1Histogram.html#a1fa018dc2756acdc3a1bb4fdbe97ae86">v8::internal::Histogram::AddSample</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void AddSample(int sample)</div><div class="ttdef"><b>Definition</b> <a href="counters_8cc_source.html#l00050">counters.cc:50</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Histogram_html_a8c6f22e6b5446dfc455a8af4e97eb21b"><div class="ttname"><a href="classv8_1_1internal_1_1Histogram.html#a8c6f22e6b5446dfc455a8af4e97eb21b">v8::internal::Histogram::Enabled</a></div><div class="ttdeci">bool Enabled()</div><div class="ttdef"><b>Definition</b> <a href="counters_8h_source.html#l00162">counters.h:162</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1InstructionStream_html_a16ed052d97bcdbbcc973bd4e6061d64a"><div class="ttname"><a href="classv8_1_1internal_1_1InstructionStream.html#a16ed052d97bcdbbcc973bd4e6061d64a">v8::internal::InstructionStream::kOnHeapBodyIsContiguous</a></div><div class="ttdeci">static NEVER_READ_ONLY_SPACE constexpr bool kOnHeapBodyIsContiguous</div><div class="ttdef"><b>Definition</b> <a href="instruction-stream_8h_source.html#l00063">instruction-stream.h:63</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00575">isolate.h:575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PerThreadAssertScopeEmpty_html"><div class="ttname"><a href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">v8::internal::PerThreadAssertScopeEmpty&lt; kAllow, kTypes... &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a3674f1738fbd7b36d670397d0fbd363e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a3674f1738fbd7b36d670397d0fbd363e">v8::internal::RelocInfo::kApplyMask</a></div><div class="ttdeci">static const int kApplyMask</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00369">reloc-info.h:369</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a4532875f67c1658431b317da15aaa1b9"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a4532875f67c1658431b317da15aaa1b9">v8::internal::RelocInfo::wasm_call_tag</a></div><div class="ttdeci">uint32_t wasm_call_tag() const</div><div class="ttdef"><b>Definition</b> <a href="assembler-riscv_8cc_source.html#l00202">assembler-riscv.cc:202</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a4bb9ca8ff590a4b9a46751997f9f9c5e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a4bb9ca8ff590a4b9a46751997f9f9c5e">v8::internal::RelocInfo::ModeMask</a></div><div class="ttdeci">static constexpr int ModeMask(Mode mode)</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00272">reloc-info.h:272</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a7ced4909c9b4b70bf6b682825d75b25e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a7ced4909c9b4b70bf6b682825d75b25e">v8::internal::RelocInfo::IsWasmCall</a></div><div class="ttdeci">static constexpr bool IsWasmCall(Mode mode)</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00213">reloc-info.h:213</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_a9b6cc7beedb93c75dda2852cb6af822e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#a9b6cc7beedb93c75dda2852cb6af822e">v8::internal::RelocInfo::IsWasmStubCall</a></div><div class="ttdeci">static constexpr bool IsWasmStubCall(Mode mode)</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00214">reloc-info.h:214</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ace9340a0c27b322249d990c3b6351cea"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ace9340a0c27b322249d990c3b6351cea">v8::internal::RelocInfo::IsWasmCodePointerTableEntry</a></div><div class="ttdeci">static constexpr bool IsWasmCodePointerTableEntry(Mode mode)</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00220">reloc-info.h:220</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8e"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8e">v8::internal::RelocInfo::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00106">reloc-info.h:106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8ea1cc6db35064ce98174704bf423847a61"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea1cc6db35064ce98174704bf423847a61">v8::internal::RelocInfo::WASM_CODE_POINTER_TABLE_ENTRY</a></div><div class="ttdeci">@ WASM_CODE_POINTER_TABLE_ENTRY</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00120">reloc-info.h:120</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8ea39bd1ffa884c00f07773f11ee5ea8f48"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea39bd1ffa884c00f07773f11ee5ea8f48">v8::internal::RelocInfo::WASM_CALL</a></div><div class="ttdeci">@ WASM_CALL</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00118">reloc-info.h:118</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8ea3b7f4cf84436d1c2c76bf8e06c2e53bd"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea3b7f4cf84436d1c2c76bf8e06c2e53bd">v8::internal::RelocInfo::INTERNAL_REFERENCE_ENCODED</a></div><div class="ttdeci">@ INTERNAL_REFERENCE_ENCODED</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00128">reloc-info.h:128</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8ea4749f69effc3746c91e2472a2e73d718"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea4749f69effc3746c91e2472a2e73d718">v8::internal::RelocInfo::EXTERNAL_REFERENCE</a></div><div class="ttdeci">@ EXTERNAL_REFERENCE</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00123">reloc-info.h:123</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8ea5f7b01771fa839eba1164bdc0061a291"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea5f7b01771fa839eba1164bdc0061a291">v8::internal::RelocInfo::VENEER_POOL</a></div><div class="ttdeci">@ VENEER_POOL</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00144">reloc-info.h:144</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8ea723a8870ed824d0646f87123220c709c"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea723a8870ed824d0646f87123220c709c">v8::internal::RelocInfo::INTERNAL_REFERENCE</a></div><div class="ttdeci">@ INTERNAL_REFERENCE</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00124">reloc-info.h:124</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8ea98c891fef4fdd3db6140ef54e117d01f"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8ea98c891fef4fdd3db6140ef54e117d01f">v8::internal::RelocInfo::WASM_CANONICAL_SIG_ID</a></div><div class="ttdeci">@ WASM_CANONICAL_SIG_ID</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00121">reloc-info.h:121</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8eac9e0110e19d8df8e93d56ae136b543e4"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8eac9e0110e19d8df8e93d56ae136b543e4">v8::internal::RelocInfo::CONST_POOL</a></div><div class="ttdeci">@ CONST_POOL</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00143">reloc-info.h:143</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocInfo_html_ad2e613bbaf7c7a82f0db322c069cad8eaf44d1f5521a36a56293dd55fa8e269c6"><div class="ttname"><a href="classv8_1_1internal_1_1RelocInfo.html#ad2e613bbaf7c7a82f0db322c069cad8eaf44d1f5521a36a56293dd55fa8e269c6">v8::internal::RelocInfo::WASM_STUB_CALL</a></div><div class="ttdeci">@ WASM_STUB_CALL</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00119">reloc-info.h:119</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocIteratorBase_html_a4e36ec3860d142b680388b2280014ea0"><div class="ttname"><a href="classv8_1_1internal_1_1RelocIteratorBase.html#a4e36ec3860d142b680388b2280014ea0">v8::internal::RelocIteratorBase::done</a></div><div class="ttdeci">bool done() const</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00512">reloc-info.h:512</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocIteratorBase_html_a571153ba88b558f4994e7ef8b6b6d71f"><div class="ttname"><a href="classv8_1_1internal_1_1RelocIteratorBase.html#a571153ba88b558f4994e7ef8b6b6d71f">v8::internal::RelocIteratorBase::next</a></div><div class="ttdeci">void next()</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8cc_source.html#l00130">reloc-info.cc:130</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocIteratorBase_html_aececb928d612751179eb8a5d61e81922"><div class="ttname"><a href="classv8_1_1internal_1_1RelocIteratorBase.html#aececb928d612751179eb8a5d61e81922">v8::internal::RelocIteratorBase::rinfo</a></div><div class="ttdeci">RelocInfoT * rinfo()</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00516">reloc-info.h:516</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RelocIterator_html"><div class="ttname"><a href="classv8_1_1internal_1_1RelocIterator.html">v8::internal::RelocIterator</a></div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00558">reloc-info.h:558</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RwxMemoryWriteScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1RwxMemoryWriteScope.html">v8::internal::RwxMemoryWriteScope</a></div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8h_source.html#l00090">code-memory-access.h:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1RwxMemoryWriteScope_html_a9771bab10900e92154b51ae8884ebd47"><div class="ttname"><a href="classv8_1_1internal_1_1RwxMemoryWriteScope.html#a9771bab10900e92154b51ae8884ebd47">v8::internal::RwxMemoryWriteScope::IsSupported</a></div><div class="ttdeci">static V8_INLINE bool IsSupported()</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access-inl_8h_source.html#l00371">code-memory-access-inl.h:371</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SafepointTable_html"><div class="ttname"><a href="classv8_1_1internal_1_1SafepointTable.html">v8::internal::SafepointTable</a></div><div class="ttdef"><b>Definition</b> <a href="safepoint-table_8h_source.html#l00062">safepoint-table.h:62</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SafepointTable_html_a079bbd9de5aee144ba660eb2ba3ab070"><div class="ttname"><a href="classv8_1_1internal_1_1SafepointTable.html#a079bbd9de5aee144ba660eb2ba3ab070">v8::internal::SafepointTable::TryFindEntry</a></div><div class="ttdeci">SafepointEntry TryFindEntry(Address pc) const</div><div class="ttdef"><b>Definition</b> <a href="safepoint-table_8cc_source.html#l00063">safepoint-table.cc:63</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Signature_html"><div class="ttname"><a href="classv8_1_1internal_1_1Signature.html">v8::internal::Signature</a></div><div class="ttdef"><b>Definition</b> <a href="shared-function-info_8h_source.html#l00039">shared-function-info.h:39</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SourcePositionTableIterator_html"><div class="ttname"><a href="classv8_1_1internal_1_1SourcePositionTableIterator.html">v8::internal::SourcePositionTableIterator</a></div><div class="ttdef"><b>Definition</b> <a href="source-position-table_8h_source.html#l00073">source-position-table.h:73</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SourcePositionTableIterator_html_a0845f40c6af62abe649e2a543efc057d"><div class="ttname"><a href="classv8_1_1internal_1_1SourcePositionTableIterator.html#a0845f40c6af62abe649e2a543efc057d">v8::internal::SourcePositionTableIterator::done</a></div><div class="ttdeci">bool done() const</div><div class="ttdef"><b>Definition</b> <a href="source-position-table_8h_source.html#l00133">source-position-table.h:133</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SourcePosition_html"><div class="ttname"><a href="classv8_1_1internal_1_1SourcePosition.html">v8::internal::SourcePosition</a></div><div class="ttdef"><b>Definition</b> <a href="source-position_8h_source.html#l00045">source-position.h:45</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1SourcePosition_html_a303c0c4fa47bd9368489bdd75b5931ec"><div class="ttname"><a href="classv8_1_1internal_1_1SourcePosition.html#a303c0c4fa47bd9368489bdd75b5931ec">v8::internal::SourcePosition::ScriptOffset</a></div><div class="ttdeci">int ScriptOffset() const</div><div class="ttdef"><b>Definition</b> <a href="source-position_8h_source.html#l00091">source-position.h:91</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StdoutStream_html"><div class="ttname"><a href="classv8_1_1internal_1_1StdoutStream.html">v8::internal::StdoutStream</a></div><div class="ttdef"><b>Definition</b> <a href="ostreams_8h_source.html#l00091">ostreams.h:91</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition</b> <a href="waiter-queue-node_8h_source.html#l00022">waiter-queue-node.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a42ebfac4aa3bcade2327daf0cf5efb7f"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a42ebfac4aa3bcade2327daf0cf5efb7f">v8::internal::ThreadIsolation::Enabled</a></div><div class="ttdeci">static bool Enabled()</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00049">code-memory-access.cc:49</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a647c86b788456e7ec80f0bc1d365561a"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a647c86b788456e7ec80f0bc1d365561a">v8::internal::ThreadIsolation::RegisterJitAllocations</a></div><div class="ttdeci">static void RegisterJitAllocations(Address start, const std::vector&lt; size_t &gt; &amp;sizes, JitAllocationType type)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00497">code-memory-access.cc:497</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a6a523c13e4e0f1cd5dc4a57a754a616a"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a6a523c13e4e0f1cd5dc4a57a754a616a">v8::internal::ThreadIsolation::UnregisterJitPage</a></div><div class="ttdeci">static void UnregisterJitPage(Address address, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00416">code-memory-access.cc:416</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_a9fff9d0a2fb22b0853a69400bea0f618"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#a9fff9d0a2fb22b0853a69400bea0f618">v8::internal::ThreadIsolation::RegisterJitPage</a></div><div class="ttdeci">static void RegisterJitPage(Address address, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00406">code-memory-access.cc:406</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_ad005e4948f48131f0f8727020bd52b68"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#ad005e4948f48131f0f8727020bd52b68">v8::internal::ThreadIsolation::LookupJitAllocation</a></div><div class="ttdeci">static WritableJitAllocation LookupJitAllocation(Address addr, size_t size, JitAllocationType type, bool enforce_write_api=false)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00489">code-memory-access.cc:489</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_ad690ad6c8189d648d7cc8ec987d882c1"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#ad690ad6c8189d648d7cc8ec987d882c1">v8::internal::ThreadIsolation::MakeExecutable</a></div><div class="ttdeci">static V8_NODISCARD bool MakeExecutable(Address address, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00460">code-memory-access.cc:460</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_ae13414c0ae7d8ac16347aa93bf7b5771"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#ae13414c0ae7d8ac16347aa93bf7b5771">v8::internal::ThreadIsolation::UnregisterWasmAllocation</a></div><div class="ttdeci">static void UnregisterWasmAllocation(Address addr, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00530">code-memory-access.cc:530</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_ae2e342788fbcd47076ccce4a1996c464"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#ae2e342788fbcd47076ccce4a1996c464">v8::internal::ThreadIsolation::RegisterJitAllocation</a></div><div class="ttdeci">static WritableJitAllocation RegisterJitAllocation(Address addr, size_t size, JitAllocationType type, bool enforce_write_api=false)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8cc_source.html#l00474">code-memory-access.cc:474</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_affba95694ddfc3cdf2e345f8ed110b0e"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0e">v8::internal::ThreadIsolation::JitAllocationType</a></div><div class="ttdeci">JitAllocationType</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8h_source.html#l00147">code-memory-access.h:147</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_affba95694ddfc3cdf2e345f8ed110b0ea3d2a650902eeb3540a581b2abbb17bb8"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0ea3d2a650902eeb3540a581b2abbb17bb8">v8::internal::ThreadIsolation::JitAllocationType::kWasmCode</a></div><div class="ttdeci">@ kWasmCode</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_affba95694ddfc3cdf2e345f8ed110b0ea91a8fed74b604f7e84b3036af763ee8b"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0ea91a8fed74b604f7e84b3036af763ee8b">v8::internal::ThreadIsolation::JitAllocationType::kWasmJumpTable</a></div><div class="ttdeci">@ kWasmJumpTable</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_affba95694ddfc3cdf2e345f8ed110b0eac2316abd3338b7d2e92c44dfde6164c5"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0eac2316abd3338b7d2e92c44dfde6164c5">v8::internal::ThreadIsolation::JitAllocationType::kWasmFarJumpTable</a></div><div class="ttdeci">@ kWasmFarJumpTable</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ThreadIsolation_html_affba95694ddfc3cdf2e345f8ed110b0eadae8f9a2ade7ec362cbf97c727cb233c"><div class="ttname"><a href="classv8_1_1internal_1_1ThreadIsolation.html#affba95694ddfc3cdf2e345f8ed110b0eadae8f9a2ade7ec362cbf97c727cb233c">v8::internal::ThreadIsolation::JitAllocationType::kWasmLazyCompileTable</a></div><div class="ttdeci">@ kWasmLazyCompileTable</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1V8_html_a977b087d4ee58955efe72b33136a4e94"><div class="ttname"><a href="classv8_1_1internal_1_1V8.html#a977b087d4ee58955efe72b33136a4e94">v8::internal::V8::FatalProcessOutOfMemory</a></div><div class="ttdeci">static V8_EXPORT_PRIVATE void FatalProcessOutOfMemory(Isolate *isolate, const char *location, const OOMDetails &amp;details=kNoOOMDetails)</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemory_html"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemory.html">v8::internal::VirtualMemory</a></div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00193">allocation.h:193</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemory_html_a4e314fe91c3c610bb8495aa6435cba9f"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemory.html#a4e314fe91c3c610bb8495aa6435cba9f">v8::internal::VirtualMemory::IsReserved</a></div><div class="ttdeci">bool IsReserved() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00236">allocation.h:236</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemory_html_acaf3913c1e6e1568fa8fa50f2c74b736"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemory.html#acaf3913c1e6e1568fa8fa50f2c74b736">v8::internal::VirtualMemory::region</a></div><div class="ttdeci">const base::AddressRegion &amp; region() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00243">allocation.h:243</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1VirtualMemory_html_ae9a440f195e1f00ff57e360c163d9b33"><div class="ttname"><a href="classv8_1_1internal_1_1VirtualMemory.html#ae9a440f195e1f00ff57e360c163d9b33">v8::internal::VirtualMemory::address</a></div><div class="ttdeci">Address address() const</div><div class="ttdef"><b>Definition</b> <a href="allocation_8h_source.html#l00249">allocation.h:249</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCodePointer_html"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCodePointer.html">v8::internal::WasmCodePointer</a></div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02798">globals.h:2798</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableJitAllocation_html"><div class="ttname"><a href="classv8_1_1internal_1_1WritableJitAllocation.html">v8::internal::WritableJitAllocation</a></div><div class="ttdef"><b>Definition</b> <a href="code-memory-access_8h_source.html#l00392">code-memory-access.h:392</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableJitAllocation_html_a5214a39ff535864c1f6ae1968547208d"><div class="ttname"><a href="classv8_1_1internal_1_1WritableJitAllocation.html#a5214a39ff535864c1f6ae1968547208d">v8::internal::WritableJitAllocation::CopyCode</a></div><div class="ttdeci">V8_INLINE void CopyCode(size_t dst_offset, const uint8_t *src, size_t num_bytes)</div><div class="ttdef"><b>Definition</b> <a href="code-memory-access-inl_8h_source.html#l00243">code-memory-access-inl.h:243</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WritableRelocIterator_html"><div class="ttname"><a href="classv8_1_1internal_1_1WritableRelocIterator.html">v8::internal::WritableRelocIterator</a></div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00584">reloc-info.h:585</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1BuiltinLookup_html_a282118f97cf3fce4133b63c1c15906bc"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a282118f97cf3fce4133b63c1c15906bc">v8::internal::wasm::BuiltinLookup::JumptableIndexForBuiltin</a></div><div class="ttdeci">static constexpr int JumptableIndexForBuiltin(Builtin builtin)</div><div class="ttdef"><b>Definition</b> <a href="wasm-builtin-list_8h_source.html#l00181">wasm-builtin-list.h:181</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1BuiltinLookup_html_a67dcedf7516507a705bc79ffd2e0a089"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a67dcedf7516507a705bc79ffd2e0a089">v8::internal::wasm::BuiltinLookup::BuiltinForJumptableIndex</a></div><div class="ttdeci">static constexpr Builtin BuiltinForJumptableIndex(int index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-builtin-list_8h_source.html#l00187">wasm-builtin-list.h:187</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1BuiltinLookup_html_a934b529bc9c9104095b6c98ffaba9697"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1BuiltinLookup.html#a934b529bc9c9104095b6c98ffaba9697">v8::internal::wasm::BuiltinLookup::BuiltinCount</a></div><div class="ttdeci">static constexpr int BuiltinCount()</div><div class="ttdef"><b>Definition</b> <a href="wasm-builtin-list_8h_source.html#l00193">wasm-builtin-list.h:193</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompileTimeImports_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html">v8::internal::wasm::CompileTimeImports</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-features_8h_source.html#l00146">wasm-features.h:146</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1CompileTimeImports_html_a9c6aade0e5919e30ceb5a765ae2ff5de"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1CompileTimeImports.html#a9c6aade0e5919e30ceb5a765ae2ff5de">v8::internal::wasm::CompileTimeImports::constants_module</a></div><div class="ttdeci">std::string &amp; constants_module()</div><div class="ttdef"><b>Definition</b> <a href="wasm-features_8h_source.html#l00187">wasm-features.h:187</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DebugInfo_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html">v8::internal::wasm::DebugInfo</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-debug_8h_source.html#l00174">wasm-debug.h:174</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DebugInfo_html_a67a17d959961e67bc426f9aaa7ba2198"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html#a67a17d959961e67bc426f9aaa7ba2198">v8::internal::wasm::DebugInfo::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-debug_8cc_source.html#l00880">wasm-debug.cc:880</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DebugInfo_html_abd6a863dc47b07d34f5b383c79ee3e20"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html#abd6a863dc47b07d34f5b383c79ee3e20">v8::internal::wasm::DebugInfo::GetDebugSideTableIfExists</a></div><div class="ttdeci">DebugSideTable * GetDebugSideTableIfExists(const WasmCode *) const</div><div class="ttdef"><b>Definition</b> <a href="wasm-debug_8cc_source.html#l00871">wasm-debug.cc:871</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DebugInfo_html_ad68da127ead8c18497a9a92b11f3f4d9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DebugInfo.html#ad68da127ead8c18497a9a92b11f3f4d9">v8::internal::wasm::DebugInfo::RemoveDebugSideTables</a></div><div class="ttdeci">void RemoveDebugSideTables(base::Vector&lt; WasmCode *const &gt;)</div><div class="ttdef"><b>Definition</b> <a href="wasm-debug_8cc_source.html#l00867">wasm-debug.cc:867</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html">v8::internal::wasm::DisjointAllocationPool</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00060">wasm-code-manager.h:60</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_html_a5a78c9832c8962fdc94b954e5b0adb65"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#a5a78c9832c8962fdc94b954e5b0adb65">v8::internal::wasm::DisjointAllocationPool::Allocate</a></div><div class="ttdeci">base::AddressRegion Allocate(size_t size)</div><div class="ttdef"><b>Definition</b> <a href="#l00136">wasm-code-manager.cc:136</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_html_aaae1e5e18b6363b94f228abe6521dd3b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aaae1e5e18b6363b94f228abe6521dd3b">v8::internal::wasm::DisjointAllocationPool::AllocateInRegion</a></div><div class="ttdeci">base::AddressRegion AllocateInRegion(size_t size, base::AddressRegion)</div><div class="ttdef"><b>Definition</b> <a href="#l00141">wasm-code-manager.cc:141</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_html_aba736b32e415de8aefbb55c44e0ba04d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#aba736b32e415de8aefbb55c44e0ba04d">v8::internal::wasm::DisjointAllocationPool::regions</a></div><div class="ttdeci">const auto &amp; regions() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00081">wasm-code-manager.h:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_html_ae1c8c42c6b46181491ce58c3680e04a3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#ae1c8c42c6b46181491ce58c3680e04a3">v8::internal::wasm::DisjointAllocationPool::IsEmpty</a></div><div class="ttdeci">bool IsEmpty() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00079">wasm-code-manager.h:79</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1DisjointAllocationPool_html_afcf7458ff374176005a20707ab0fa556"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1DisjointAllocationPool.html#afcf7458ff374176005a20707ab0fa556">v8::internal::wasm::DisjointAllocationPool::Merge</a></div><div class="ttdeci">base::AddressRegion Merge(base::AddressRegion)</div><div class="ttdef"><b>Definition</b> <a href="#l00081">wasm-code-manager.cc:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a01dc0a56e4bad49ae441513379eabe4d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a01dc0a56e4bad49ae441513379eabe4d">v8::internal::wasm::JumpTableAssembler::FarJumpSlotOffsetToIndex</a></div><div class="ttdeci">static uint32_t FarJumpSlotOffsetToIndex(uint32_t offset)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00092">jump-table-assembler.h:92</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a0cabb404f2bfe1a9ef3ea35fe63f7cf3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a0cabb404f2bfe1a9ef3ea35fe63f7cf3">v8::internal::wasm::JumpTableAssembler::PatchJumpTableSlot</a></div><div class="ttdeci">static void PatchJumpTableSlot(WritableJumpTablePair &amp;jump_table_pair, Address jump_table_slot, Address far_jump_table_slot, Address target)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00147">jump-table-assembler.h:147</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a4e616135983a522caacfc5b4bf44bcd3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a4e616135983a522caacfc5b4bf44bcd3">v8::internal::wasm::JumpTableAssembler::FarJumpSlotIndexToOffset</a></div><div class="ttdeci">static uint32_t FarJumpSlotIndexToOffset(uint32_t slot_index)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00087">jump-table-assembler.h:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a52670982950dc90851cb4a1de6e97781"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a52670982950dc90851cb4a1de6e97781">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfLazyFunctions</a></div><div class="ttdeci">static constexpr uint32_t SizeForNumberOfLazyFunctions(uint32_t slot_count)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00111">jump-table-assembler.h:111</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a5515cdbbc42cf3c78581ea13768f74bb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a5515cdbbc42cf3c78581ea13768f74bb">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfSlots</a></div><div class="ttdeci">static constexpr uint32_t SizeForNumberOfSlots(uint32_t slot_count)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00080">jump-table-assembler.h:80</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a75af4ab220bf462ded5d5cc62d9da9da"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a75af4ab220bf462ded5d5cc62d9da9da">v8::internal::wasm::JumpTableAssembler::JumpSlotIndexToOffset</a></div><div class="ttdeci">static uint32_t JumpSlotIndexToOffset(uint32_t slot_index)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00072">jump-table-assembler.h:72</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a87add92ae969554c1b14d8ff3e8d7cd2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a87add92ae969554c1b14d8ff3e8d7cd2">v8::internal::wasm::JumpTableAssembler::SizeForNumberOfFarJumpSlots</a></div><div class="ttdeci">static constexpr uint32_t SizeForNumberOfFarJumpSlots(int num_runtime_slots, int num_function_slots)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00099">jump-table-assembler.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a8d1850fd6a11a830c0b62ccfe4906baf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a8d1850fd6a11a830c0b62ccfe4906baf">v8::internal::wasm::JumpTableAssembler::InitializeJumpsToLazyCompileTable</a></div><div class="ttdeci">static void InitializeJumpsToLazyCompileTable(Address base, uint32_t num_slots, Address lazy_compile_table_start)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8cc_source.html#l00033">jump-table-assembler.cc:33</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_a9429626ba78f937f1bdd773af25dda77"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#a9429626ba78f937f1bdd773af25dda77">v8::internal::wasm::JumpTableAssembler::GenerateFarJumpTable</a></div><div class="ttdeci">static void GenerateFarJumpTable(WritableJitAllocation &amp;jit_allocation, Address base, Address *stub_targets, int num_runtime_slots, int num_function_slots)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00124">jump-table-assembler.h:124</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_ab9d14294753cfc3099f3612018a8d6e6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#ab9d14294753cfc3099f3612018a8d6e6">v8::internal::wasm::JumpTableAssembler::LazyCompileSlotIndexToOffset</a></div><div class="ttdeci">static uint32_t LazyCompileSlotIndexToOffset(uint32_t slot_index)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00106">jump-table-assembler.h:106</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_ada6cc7624595bb4befe6288661dc75ba"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#ada6cc7624595bb4befe6288661dc75ba">v8::internal::wasm::JumpTableAssembler::SlotOffsetToIndex</a></div><div class="ttdeci">static uint32_t SlotOffsetToIndex(uint32_t slot_offset)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8h_source.html#l00063">jump-table-assembler.h:63</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1JumpTableAssembler_html_ae71b16baa415877eb767aeb926b938e5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1JumpTableAssembler.html#ae71b16baa415877eb767aeb926b938e5">v8::internal::wasm::JumpTableAssembler::GenerateLazyCompileTable</a></div><div class="ttdeci">static void GenerateLazyCompileTable(Address base, uint32_t num_slots, uint32_t num_imported_functions, Address wasm_compile_lazy_target)</div><div class="ttdef"><b>Definition</b> <a href="jump-table-assembler_8cc_source.html#l00015">jump-table-assembler.cc:15</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NamesProvider_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NamesProvider.html">v8::internal::wasm::NamesProvider</a></div><div class="ttdef"><b>Definition</b> <a href="names-provider_8h_source.html#l00025">names-provider.h:25</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html">v8::internal::wasm::NativeModule</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00548">wasm-code-manager.h:548</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a02cf7c113ae0ade3b2943210fa4bd02a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a02cf7c113ae0ade3b2943210fa4bd02a">v8::internal::wasm::NativeModule::UpdateWellKnownImports</a></div><div class="ttdeci">void UpdateWellKnownImports(base::Vector&lt; WellKnownImport &gt; entries)</div><div class="ttdef"><b>Definition</b> <a href="#l01409">wasm-code-manager.cc:1409</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a0ec92359918c6ef6fe010cafb580eb86"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a0ec92359918c6ef6fe010cafb580eb86">v8::internal::wasm::NativeModule::WasmCode</a></div><div class="ttdeci">friend class WasmCode</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00892">wasm-code-manager.h:892</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a119487efc92641da665eb0252dcc9a18"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a119487efc92641da665eb0252dcc9a18">v8::internal::wasm::NativeModule::GetBuiltinInJumptableSlot</a></div><div class="ttdeci">Builtin GetBuiltinInJumptableSlot(Address target) const</div><div class="ttdef"><b>Definition</b> <a href="#l02069">wasm-code-manager.cc:2069</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a16196a1962694773b11f2434c5d7becf"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a16196a1962694773b11f2434c5d7becf">v8::internal::wasm::NativeModule::NativeModule</a></div><div class="ttdeci">NativeModule(const NativeModule &amp;)=delete</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a169fd10581fcc34645b802baca380789"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a169fd10581fcc34645b802baca380789">v8::internal::wasm::NativeModule::FreeCode</a></div><div class="ttdeci">void FreeCode(base::Vector&lt; WasmCode *const &gt;)</div><div class="ttdef"><b>Definition</b> <a href="#l02755">wasm-code-manager.cc:2755</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a1c0e38351c07fa1377db0a30e94ac8c0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c0e38351c07fa1377db0a30e94ac8c0">v8::internal::wasm::NativeModule::GetNearCallTargetForFunction</a></div><div class="ttdeci">Address GetNearCallTargetForFunction(uint32_t func_index, const JumpTablesRef &amp;) const</div><div class="ttdef"><b>Definition</b> <a href="#l02027">wasm-code-manager.cc:2027</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a1c38ae4d35483f2b9c6e5634c7bf4bd6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a1c38ae4d35483f2b9c6e5634c7bf4bd6">v8::internal::wasm::NativeModule::kNeedsFarJumpsBetweenCodeSpaces</a></div><div class="ttdeci">static constexpr bool kNeedsFarJumpsBetweenCodeSpaces</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00556">wasm-code-manager.h:556</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a21586b2fdaae541148e2d8bdb100bf8b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a21586b2fdaae541148e2d8bdb100bf8b">v8::internal::wasm::NativeModule::SumLiftoffCodeSizeForTesting</a></div><div class="ttdeci">size_t SumLiftoffCodeSizeForTesting() const</div><div class="ttdef"><b>Definition</b> <a href="#l02742">wasm-code-manager.cc:2742</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a26241881bc9c29ebcbfe2109c4a64cf7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a26241881bc9c29ebcbfe2109c4a64cf7">v8::internal::wasm::NativeModule::SnapshotAllOwnedCode</a></div><div class="ttdeci">std::vector&lt; WasmCode * &gt; SnapshotAllOwnedCode() const</div><div class="ttdef"><b>Definition</b> <a href="#l01631">wasm-code-manager.cc:1631</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a2b2e70f05aba4cbb41820e840e79ab3a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a2b2e70f05aba4cbb41820e840e79ab3a">v8::internal::wasm::NativeModule::PrintCurrentMemoryConsumptionEstimate</a></div><div class="ttdeci">void PrintCurrentMemoryConsumptionEstimate() const</div><div class="ttdef"><b>Definition</b> <a href="#l02859">wasm-code-manager.cc:2859</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a32aeb7786fe56d49f56d6da667f940ca"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a32aeb7786fe56d49f56d6da667f940ca">v8::internal::wasm::NativeModule::HasDebugInfo</a></div><div class="ttdeci">bool HasDebugInfo() const</div><div class="ttdef"><b>Definition</b> <a href="#l02777">wasm-code-manager.cc:2777</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a37a8384fb8317a24c3d58cf66ff64123"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a37a8384fb8317a24c3d58cf66ff64123">v8::internal::wasm::NativeModule::GetCode</a></div><div class="ttdeci">WasmCode * GetCode(uint32_t index) const</div><div class="ttdef"><b>Definition</b> <a href="#l01642">wasm-code-manager.cc:1642</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a4210dcf60ee0c22b95de93af93f17f86"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a4210dcf60ee0c22b95de93af93f17f86">v8::internal::wasm::NativeModule::num_functions</a></div><div class="ttdeci">uint32_t num_functions() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00683">wasm-code-manager.h:683</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a42240b9985270350c5a898e36da4dcf8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a42240b9985270350c5a898e36da4dcf8">v8::internal::wasm::NativeModule::SnapshotCodeTable</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; WasmCode * &gt;, std::vector&lt; WellKnownImport &gt; &gt; SnapshotCodeTable() const</div><div class="ttdef"><b>Definition</b> <a href="#l01617">wasm-code-manager.cc:1617</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a443a4c6a0f2bedcc6e0ac7f03ece629e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a443a4c6a0f2bedcc6e0ac7f03ece629e">v8::internal::wasm::NativeModule::module</a></div><div class="ttdeci">const WasmModule * module() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00694">wasm-code-manager.h:694</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a460c056c89d554e3a4a8dfcb8ffc22b4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a460c056c89d554e3a4a8dfcb8ffc22b4">v8::internal::wasm::NativeModule::AllocateForDeserializedCode</a></div><div class="ttdeci">std::pair&lt; base::Vector&lt; uint8_t &gt;, JumpTablesRef &gt; AllocateForDeserializedCode(size_t total_code_size)</div><div class="ttdef"><b>Definition</b> <a href="#l01569">wasm-code-manager.cc:1569</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a46fa56beff1669a8eb218e9aec9fd8d2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a46fa56beff1669a8eb218e9aec9fd8d2">v8::internal::wasm::NativeModule::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition</b> <a href="#l02798">wasm-code-manager.cc:2798</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a53bed2d056d03e227cb3fd50df82a114"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a53bed2d056d03e227cb3fd50df82a114">v8::internal::wasm::NativeModule::HasWireBytes</a></div><div class="ttdeci">bool HasWireBytes() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00744">wasm-code-manager.h:744</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a58ee010c88ea49154c8528518931dbc2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a58ee010c88ea49154c8528518931dbc2">v8::internal::wasm::NativeModule::FreeCodePointerTableHandles</a></div><div class="ttdeci">void FreeCodePointerTableHandles()</div><div class="ttdef"><b>Definition</b> <a href="#l01246">wasm-code-manager.cc:1246</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a5a7bb5fd0dd2615fbbb6b608df1fdd68"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5a7bb5fd0dd2615fbbb6b608df1fdd68">v8::internal::wasm::NativeModule::wire_bytes</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; wire_bytes() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00691">wasm-code-manager.h:691</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a5cff149410fcd416933af17dab385ba0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5cff149410fcd416933af17dab385ba0">v8::internal::wasm::NativeModule::Lookup</a></div><div class="ttdeci">WasmCode * Lookup(Address) const</div><div class="ttdef"><b>Definition</b> <a href="#l01972">wasm-code-manager.cc:1972</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a5dcbc5c21a8a83b7787033a13b7c48ad"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a5dcbc5c21a8a83b7787033a13b7c48ad">v8::internal::wasm::NativeModule::LogWasmCodes</a></div><div class="ttdeci">void LogWasmCodes(Isolate *, Tagged&lt; Script &gt;)</div><div class="ttdef"><b>Definition</b> <a href="#l01017">wasm-code-manager.cc:1017</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a61b6504416cddebca8e11c5635d5c203"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a61b6504416cddebca8e11c5635d5c203">v8::internal::wasm::NativeModule::SetWireBytes</a></div><div class="ttdeci">void SetWireBytes(base::OwnedVector&lt; const uint8_t &gt; wire_bytes)</div><div class="ttdef"><b>Definition</b> <a href="#l01923">wasm-code-manager.cc:1923</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a63657aff1b54d8355c88d671645a62fd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a63657aff1b54d8355c88d671645a62fd">v8::internal::wasm::NativeModule::GetCodePointerHandle</a></div><div class="ttdeci">WasmCodePointer GetCodePointerHandle(int index) const</div><div class="ttdef"><b>Definition</b> <a href="#l02090">wasm-code-manager.cc:2090</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a681d9765150a305cb980bee8c01044a2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a681d9765150a305cb980bee8c01044a2">v8::internal::wasm::NativeModule::ReserveCodeTableForTesting</a></div><div class="ttdeci">void ReserveCodeTableForTesting(uint32_t max_functions)</div><div class="ttdef"><b>Definition</b> <a href="#l00984">wasm-code-manager.cc:984</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a74d82ac97a7bb02ac5781d209ffe2bc5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a74d82ac97a7bb02ac5781d209ffe2bc5">v8::internal::wasm::NativeModule::HasCodeWithTier</a></div><div class="ttdeci">bool HasCodeWithTier(uint32_t index, ExecutionTier tier) const</div><div class="ttdef"><b>Definition</b> <a href="#l01654">wasm-code-manager.cc:1654</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a773f6a9db3d5a181ca810d7a92e19da6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a773f6a9db3d5a181ca810d7a92e19da6">v8::internal::wasm::NativeModule::GetDebugInfo</a></div><div class="ttdeci">DebugInfo * GetDebugInfo()</div><div class="ttdef"><b>Definition</b> <a href="#l02782">wasm-code-manager.cc:2782</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a7a50cdbc0772ef702c1401259707e93e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7a50cdbc0772ef702c1401259707e93e">v8::internal::wasm::NativeModule::HasCode</a></div><div class="ttdeci">bool HasCode(uint32_t index) const</div><div class="ttdef"><b>Definition</b> <a href="#l01649">wasm-code-manager.cc:1649</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a7eebb8a25711eac01dfad476ab555f66"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a7eebb8a25711eac01dfad476ab555f66">v8::internal::wasm::NativeModule::InitializeJumpTableForLazyCompilation</a></div><div class="ttdeci">void InitializeJumpTableForLazyCompilation(uint32_t num_wasm_functions)</div><div class="ttdef"><b>Definition</b> <a href="#l01146">wasm-code-manager.cc:1146</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a8125eaffd4b01d09e3e172cab5f94d12"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12">v8::internal::wasm::NativeModule::JumpTableType</a></div><div class="ttdeci">JumpTableType</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00834">wasm-code-manager.h:834</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a8125eaffd4b01d09e3e172cab5f94d12a0aeb6cda2e68c213e2a6670941658d8b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a0aeb6cda2e68c213e2a6670941658d8b">v8::internal::wasm::NativeModule::JumpTableType::kLazyCompileTable</a></div><div class="ttdeci">@ kLazyCompileTable</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a8125eaffd4b01d09e3e172cab5f94d12a4237d3e837c403339afce6a8387246cb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a4237d3e837c403339afce6a8387246cb">v8::internal::wasm::NativeModule::JumpTableType::kJumpTable</a></div><div class="ttdeci">@ kJumpTable</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a8125eaffd4b01d09e3e172cab5f94d12a693267f9d764c2f577d25c2afc461a10"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8125eaffd4b01d09e3e172cab5f94d12a693267f9d764c2f577d25c2afc461a10">v8::internal::wasm::NativeModule::JumpTableType::kFarJumpTable</a></div><div class="ttdeci">@ kFarJumpTable</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a813274940c91bd21cf6c10bcfd3b7c40"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a813274940c91bd21cf6c10bcfd3b7c40">v8::internal::wasm::NativeModule::ReinstallDebugCode</a></div><div class="ttdeci">void ReinstallDebugCode(WasmCode *)</div><div class="ttdef"><b>Definition</b> <a href="#l01542">wasm-code-manager.cc:1542</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a8697f83af39e72a0327a6d299e1e23b7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8697f83af39e72a0327a6d299e1e23b7">v8::internal::wasm::NativeModule::GetJumpTableEntryForBuiltin</a></div><div class="ttdeci">Address GetJumpTableEntryForBuiltin(Builtin builtin, const JumpTablesRef &amp;) const</div><div class="ttdef"><b>Definition</b> <a href="#l02034">wasm-code-manager.cc:2034</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a8eaf4313bd088d6cb36ba7f444621d1c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a8eaf4313bd088d6cb36ba7f444621d1c">v8::internal::wasm::NativeModule::RemoveCompiledCode</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; RemoveCompiledCode(RemoveFilter filter)</div><div class="ttdef"><b>Definition</b> <a href="#l02711">wasm-code-manager.cc:2711</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a913dccd53bf2f36bdd2847c236912de6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a913dccd53bf2f36bdd2847c236912de6">v8::internal::wasm::NativeModule::AddDeserializedCode</a></div><div class="ttdeci">std::unique_ptr&lt; WasmCode &gt; AddDeserializedCode(int index, base::Vector&lt; uint8_t &gt; instructions, int stack_slots, int ool_spills, uint32_t tagged_parameter_slots, int safepoint_table_offset, int handler_table_offset, int constant_pool_offset, int code_comments_offset, int unpadded_binary_size, base::Vector&lt; const uint8_t &gt; protected_instructions_data, base::Vector&lt; const uint8_t &gt; reloc_info, base::Vector&lt; const uint8_t &gt; source_position_table, base::Vector&lt; const uint8_t &gt; inlining_positions, base::Vector&lt; const uint8_t &gt; deopt_data, WasmCode::Kind kind, ExecutionTier tier)</div><div class="ttdef"><b>Definition</b> <a href="#l01578">wasm-code-manager.cc:1578</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a91db58c0a3ed6efdba8d82e23a659fa7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91db58c0a3ed6efdba8d82e23a659fa7">v8::internal::wasm::NativeModule::PublishCode</a></div><div class="ttdeci">WasmCode * PublishCode(UnpublishedWasmCode)</div><div class="ttdef"><b>Definition</b> <a href="#l01380">wasm-code-manager.cc:1380</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a91fa3ea02a42f6eb12f120ac558a8ec7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a91fa3ea02a42f6eb12f120ac558a8ec7">v8::internal::wasm::NativeModule::CallIndirectTargetMap</a></div><div class="ttdeci">absl::flat_hash_map&lt; WasmCodePointer, uint32_t &gt; CallIndirectTargetMap</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00667">wasm-code-manager.h:667</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a969ac2536a1c63951c940e7f1552c323"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a969ac2536a1c63951c940e7f1552c323">v8::internal::wasm::NativeModule::~NativeModule</a></div><div class="ttdeci">~NativeModule()</div><div class="ttdef"><b>Definition</b> <a href="#l02100">wasm-code-manager.cc:2100</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_a9a1111455be88abe59c4e98636c15314"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#a9a1111455be88abe59c4e98636c15314">v8::internal::wasm::NativeModule::AddLazyCompilationTimeSample</a></div><div class="ttdeci">void AddLazyCompilationTimeSample(int64_t sample)</div><div class="ttdef"><b>Definition</b> <a href="#l01934">wasm-code-manager.cc:1934</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_aafa35dbd8dcc12821a84cb56594ee2df"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#aafa35dbd8dcc12821a84cb56594ee2df">v8::internal::wasm::NativeModule::UseLazyStubLocked</a></div><div class="ttdeci">void UseLazyStubLocked(uint32_t func_index)</div><div class="ttdef"><b>Definition</b> <a href="#l01191">wasm-code-manager.cc:1191</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ab37173d38eb0a6e707f8636ea5519a8d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ab37173d38eb0a6e707f8636ea5519a8d">v8::internal::wasm::NativeModule::AddCode</a></div><div class="ttdeci">std::unique_ptr&lt; WasmCode &gt; AddCode(int index, const CodeDesc &amp;desc, int stack_slots, int ool_spill_count, uint32_t tagged_parameter_slots, base::Vector&lt; const uint8_t &gt; protected_instructions, base::Vector&lt; const uint8_t &gt; source_position_table, base::Vector&lt; const uint8_t &gt; inlining_positions, base::Vector&lt; const uint8_t &gt; deopt_data, WasmCode::Kind kind, ExecutionTier tier, ForDebugging for_debugging)</div><div class="ttdef"><b>Definition</b> <a href="#l01217">wasm-code-manager.cc:1217</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_abc4f3edf1e0fcd8adc53f38952345aed"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abc4f3edf1e0fcd8adc53f38952345aed">v8::internal::wasm::NativeModule::AddCompiledCode</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT UnpublishedWasmCode AddCompiledCode(WasmCompilationResult &amp;)</div><div class="ttdef"><b>Definition</b> <a href="#l02569">wasm-code-manager.cc:2569</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_abdeee50fefaf3f7666243cff1a13b3da"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#abdeee50fefaf3f7666243cff1a13b3da">v8::internal::wasm::NativeModule::AddCodeForTesting</a></div><div class="ttdeci">WasmCode * AddCodeForTesting(DirectHandle&lt; Code &gt; code, uint64_t signature_hash)</div><div class="ttdef"><b>Definition</b> <a href="#l01038">wasm-code-manager.cc:1038</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ac075badc36b3fdb58a4f15b9a3dd12c9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac075badc36b3fdb58a4f15b9a3dd12c9">v8::internal::wasm::NativeModule::CreateIndirectCallTargetToFunctionIndexMap</a></div><div class="ttdeci">CallIndirectTargetMap CreateIndirectCallTargetToFunctionIndexMap() const</div><div class="ttdef"><b>Definition</b> <a href="#l02060">wasm-code-manager.cc:2060</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ac3706216da596aa8cf7337b8182d5e75"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac3706216da596aa8cf7337b8182d5e75">v8::internal::wasm::NativeModule::GetNumberOfCodeSpacesForTesting</a></div><div class="ttdeci">size_t GetNumberOfCodeSpacesForTesting() const</div><div class="ttdef"><b>Definition</b> <a href="#l02772">wasm-code-manager.cc:2772</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ac7e788f315225a2a75db5ecdba7f1da8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ac7e788f315225a2a75db5ecdba7f1da8">v8::internal::wasm::NativeModule::InitializeCodePointerTableHandles</a></div><div class="ttdeci">void InitializeCodePointerTableHandles(uint32_t num_wasm_functions)</div><div class="ttdef"><b>Definition</b> <a href="#l01257">wasm-code-manager.cc:1257</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ad3b78decf5b6f968e1e563f3759515b5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ad3b78decf5b6f968e1e563f3759515b5">v8::internal::wasm::NativeModule::SetDebugState</a></div><div class="ttdeci">void SetDebugState(DebugState)</div><div class="ttdef"><b>Definition</b> <a href="#l02681">wasm-code-manager.cc:2681</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_adda8e2ac30083dec687f18bca0ab5364"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#adda8e2ac30083dec687f18bca0ab5364">v8::internal::wasm::NativeModule::GetFunctionIndexFromJumpTableSlot</a></div><div class="ttdeci">uint32_t GetFunctionIndexFromJumpTableSlot(Address slot_address) const</div><div class="ttdef"><b>Definition</b> <a href="#l02043">wasm-code-manager.cc:2043</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599c">v8::internal::wasm::NativeModule::RemoveFilter</a></div><div class="ttdeci">RemoveFilter</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00781">wasm-code-manager.h:781</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca33cfac0f2f3fcd4f110550ece8698472">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveDebugCode</a></div><div class="ttdeci">@ kRemoveDebugCode</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599ca69b3b2c8ba3f6cffe3967b55e0cb44fe"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599ca69b3b2c8ba3f6cffe3967b55e0cb44fe">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveTurbofanCode</a></div><div class="ttdeci">@ kRemoveTurbofanCode</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599cada482a20b84332aff73499e6174e6436">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveLiftoffCode</a></div><div class="ttdeci">@ kRemoveLiftoffCode</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#addb6002d53e166907484bf3715ff599caeb1f31c38f14cfa2fb295e63efdbdfbd">v8::internal::wasm::NativeModule::RemoveFilter::kRemoveNonDebugCode</a></div><div class="ttdeci">@ kRemoveNonDebugCode</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_adfb76e34f35dc0075dfa6458491ebc59"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#adfb76e34f35dc0075dfa6458491ebc59">v8::internal::wasm::NativeModule::GetWasmSourceMap</a></div><div class="ttdeci">WasmModuleSourceMap * GetWasmSourceMap() const</div><div class="ttdef"><b>Definition</b> <a href="#l01665">wasm-code-manager.cc:1665</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ae66433eec52661194dacaa6ded13bf6d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ae66433eec52661194dacaa6ded13bf6d">v8::internal::wasm::NativeModule::SampleCodeSize</a></div><div class="ttdeci">void SampleCodeSize(Counters *) const</div><div class="ttdef"><b>Definition</b> <a href="#l02521">wasm-code-manager.cc:2521</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_ae9941bdd4ef6ffa3b896d196231cf8c5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#ae9941bdd4ef6ffa3b896d196231cf8c5">v8::internal::wasm::NativeModule::GetNamesProvider</a></div><div class="ttdeci">NamesProvider * GetNamesProvider()</div><div class="ttdef"><b>Definition</b> <a href="#l02788">wasm-code-manager.cc:2788</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_af7f35e6098885c81d9915c96d6b7cf9d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af7f35e6098885c81d9915c96d6b7cf9d">v8::internal::wasm::NativeModule::SetWasmSourceMap</a></div><div class="ttdeci">void SetWasmSourceMap(std::unique_ptr&lt; WasmModuleSourceMap &gt; source_map)</div><div class="ttdef"><b>Definition</b> <a href="#l01660">wasm-code-manager.cc:1660</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1NativeModule_html_af886dc3d493824b7a1ae1e1f5ae02e42"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1NativeModule.html#af886dc3d493824b7a1ae1e1f5ae02e42">v8::internal::wasm::NativeModule::num_imported_functions</a></div><div class="ttdeci">uint32_t num_imported_functions() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00686">wasm-code-manager.h:686</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1TypeCanonicalizer_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1TypeCanonicalizer.html">v8::internal::wasm::TypeCanonicalizer</a></div><div class="ttdef"><b>Definition</b> <a href="canonical-types_8h_source.html#l00053">canonical-types.h:53</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_a1aa6c58339ee0dc3f42716472fc79fc8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a1aa6c58339ee0dc3f42716472fc79fc8">v8::internal::wasm::WasmCodeAllocator::AllocateForCode</a></div><div class="ttdeci">base::Vector&lt; uint8_t &gt; AllocateForCode(NativeModule *, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="#l00792">wasm-code-manager.cc:792</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_a24e7306c031d78f7744ca33ba091e0d9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a24e7306c031d78f7744ca33ba091e0d9">v8::internal::wasm::WasmCodeAllocator::AllocateForCodeInRegion</a></div><div class="ttdeci">base::Vector&lt; uint8_t &gt; AllocateForCodeInRegion(NativeModule *, size_t size, base::AddressRegion)</div><div class="ttdef"><b>Definition</b> <a href="#l00802">wasm-code-manager.cc:802</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_a3a969b7f9241a75ec3b51dd31aacf3ad"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a3a969b7f9241a75ec3b51dd31aacf3ad">v8::internal::wasm::WasmCodeAllocator::freed_code_size</a></div><div class="ttdeci">size_t freed_code_size() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00499">wasm-code-manager.h:499</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_a5d094d325d0686a0da62db1dd40c2688"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a5d094d325d0686a0da62db1dd40c2688">v8::internal::wasm::WasmCodeAllocator::GetNumCodeSpaces</a></div><div class="ttdeci">size_t GetNumCodeSpaces() const</div><div class="ttdef"><b>Definition</b> <a href="#l00924">wasm-code-manager.cc:924</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_a9abc070754afe49eaea6f0d31a55da49"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a9abc070754afe49eaea6f0d31a55da49">v8::internal::wasm::WasmCodeAllocator::~WasmCodeAllocator</a></div><div class="ttdeci">~WasmCodeAllocator()</div><div class="ttdef"><b>Definition</b> <a href="#l00642">wasm-code-manager.cc:642</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_a9f5f12643315075f0a553f61c992fdb1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#a9f5f12643315075f0a553f61c992fdb1">v8::internal::wasm::WasmCodeAllocator::committed_code_space</a></div><div class="ttdeci">size_t committed_code_space() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00493">wasm-code-manager.h:493</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_aa289065d9ae1bb0c582cbbc494d37bdb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#aa289065d9ae1bb0c582cbbc494d37bdb">v8::internal::wasm::WasmCodeAllocator::WasmCodeAllocator</a></div><div class="ttdeci">WasmCodeAllocator(std::shared_ptr&lt; Counters &gt; async_counters)</div><div class="ttdef"><b>Definition</b> <a href="#l00637">wasm-code-manager.cc:637</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_aac5c374b4b033bd08bb50481fda354db"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#aac5c374b4b033bd08bb50481fda354db">v8::internal::wasm::WasmCodeAllocator::Init</a></div><div class="ttdeci">void Init(VirtualMemory code_space)</div><div class="ttdef"><b>Definition</b> <a href="#l00647">wasm-code-manager.cc:647</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_ac228b5f49cf9bad916c9226c6e48e5a2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ac228b5f49cf9bad916c9226c6e48e5a2">v8::internal::wasm::WasmCodeAllocator::generated_code_size</a></div><div class="ttdeci">size_t generated_code_size() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00496">wasm-code-manager.h:496</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_ae4803a09e4d6892714a7fd22fe31446e"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ae4803a09e4d6892714a7fd22fe31446e">v8::internal::wasm::WasmCodeAllocator::AllocateForWrapper</a></div><div class="ttdeci">base::Vector&lt; uint8_t &gt; AllocateForWrapper(size_t size)</div><div class="ttdef"><b>Definition</b> <a href="#l00797">wasm-code-manager.cc:797</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_ae6d33802bb8ba17667cb1ae5b32e1aae"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#ae6d33802bb8ba17667cb1ae5b32e1aae">v8::internal::wasm::WasmCodeAllocator::FreeCode</a></div><div class="ttdeci">void FreeCode(base::Vector&lt; WasmCode *const &gt;)</div><div class="ttdef"><b>Definition</b> <a href="#l00882">wasm-code-manager.cc:882</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeAllocator_html_af2b5295be5ab5f4b6371ab8dce603009"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeAllocator.html#af2b5295be5ab5f4b6371ab8dce603009">v8::internal::wasm::WasmCodeAllocator::InitializeCodeRange</a></div><div class="ttdeci">void InitializeCodeRange(NativeModule *native_module, base::AddressRegion region)</div><div class="ttdef"><b>Definition</b> <a href="#l00772">wasm-code-manager.cc:772</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a08c0531d703317ba61ae16c19a505f7a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a08c0531d703317ba61ae16c19a505f7a">v8::internal::wasm::WasmCodeManager::WasmCodeManager</a></div><div class="ttdeci">WasmCodeManager()</div><div class="ttdef"><b>Definition</b> <a href="#l02125">wasm-code-manager.cc:2125</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a0fcb42a940eb11201694e507b09fa04c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a0fcb42a940eb11201694e507b09fa04c">v8::internal::wasm::WasmCodeManager::EstimateLiftoffCodeSize</a></div><div class="ttdeci">static size_t EstimateLiftoffCodeSize(int body_size)</div><div class="ttdef"><b>Definition</b> <a href="#l02327">wasm-code-manager.cc:2327</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a2241851e1074b022606031a831966b17"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a2241851e1074b022606031a831966b17">v8::internal::wasm::WasmCodeManager::MemoryProtectionKeyWritable</a></div><div class="ttdeci">static bool MemoryProtectionKeyWritable()</div><div class="ttdef"><b>Definition</b> <a href="#l02425">wasm-code-manager.cc:2425</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a3efdc870dd21f075b3c408101c23feeb"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a3efdc870dd21f075b3c408101c23feeb">v8::internal::wasm::WasmCodeManager::HasMemoryProtectionKeySupport</a></div><div class="ttdeci">static bool HasMemoryProtectionKeySupport()</div><div class="ttdef"><b>Definition</b> <a href="#l02411">wasm-code-manager.cc:2411</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a589a55d2b33354d07415b1a22cb00d89"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a589a55d2b33354d07415b1a22cb00d89">v8::internal::wasm::WasmCodeManager::LookupCodeAndSafepoint</a></div><div class="ttdeci">std::pair&lt; WasmCode *, SafepointEntry &gt; LookupCodeAndSafepoint(Isolate *isolate, Address pc)</div><div class="ttdef"><b>Definition</b> <a href="#l02927">wasm-code-manager.cc:2927</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a65237f5b80dae7a92d86f131b6df4461"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a65237f5b80dae7a92d86f131b6df4461">v8::internal::wasm::WasmCodeManager::LookupNativeModule</a></div><div class="ttdeci">NativeModule * LookupNativeModule(Address pc) const</div><div class="ttdef"><b>Definition</b> <a href="#l02892">wasm-code-manager.cc:2892</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a791a00c5dc50aed58b0d0a5908753675"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a791a00c5dc50aed58b0d0a5908753675">v8::internal::wasm::WasmCodeManager::EstimateNativeModuleMetaDataSize</a></div><div class="ttdeci">static size_t EstimateNativeModuleMetaDataSize(const WasmModule *module)</div><div class="ttdef"><b>Definition</b> <a href="#l02387">wasm-code-manager.cc:2387</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a8b17776c8a4fe19718f2b1931544253f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a8b17776c8a4fe19718f2b1931544253f">v8::internal::wasm::WasmCodeManager::LookupCode</a></div><div class="ttdeci">WasmCode * LookupCode(Isolate *isolate, Address pc) const</div><div class="ttdef"><b>Definition</b> <a href="#l02913">wasm-code-manager.cc:2913</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_a930893209d531231682fce4cbef728ed"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#a930893209d531231682fce4cbef728ed">v8::internal::wasm::WasmCodeManager::MemoryProtectionKeysEnabled</a></div><div class="ttdeci">static bool MemoryProtectionKeysEnabled()</div><div class="ttdef"><b>Definition</b> <a href="#l02420">wasm-code-manager.cc:2420</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_aa5c5ecc61ab174d77400fa3082e73537"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#aa5c5ecc61ab174d77400fa3082e73537">v8::internal::wasm::WasmCodeManager::FlushCodeLookupCache</a></div><div class="ttdeci">void FlushCodeLookupCache(Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="#l02956">wasm-code-manager.cc:2956</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_ab90b2371ac3c63fcc039e3189203dbb3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#ab90b2371ac3c63fcc039e3189203dbb3">v8::internal::wasm::WasmCodeManager::EstimateNativeModuleCodeSize</a></div><div class="ttdeci">static size_t EstimateNativeModuleCodeSize(const WasmModule *module, bool include_liftoff, DynamicTiering dynamic_tiering)</div><div class="ttdef"><b>Definition</b> <a href="#l02333">wasm-code-manager.cc:2333</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeManager_html_af407c29783d5ce7ad5d29928a54adca5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeManager.html#af407c29783d5ce7ad5d29928a54adca5">v8::internal::wasm::WasmCodeManager::~WasmCodeManager</a></div><div class="ttdeci">~WasmCodeManager()</div><div class="ttdef"><b>Definition</b> <a href="#l02136">wasm-code-manager.cc:2136</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html">v8::internal::wasm::WasmCodePointerTable</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-code-pointer-table_8h_source.html#l00065">wasm-code-pointer-table.h:67</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_a65f15597b54747d33d9d892912b1c5f4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#a65f15597b54747d33d9d892912b1c5f4">v8::internal::wasm::WasmCodePointerTable::FreeEntry</a></div><div class="ttdeci">void FreeEntry(WasmCodePointer index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-pointer-table-inl_8h_source.html#l00188">wasm-code-pointer-table-inl.h:188</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_ab4376a858eb1237ab620dca61294d690"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ab4376a858eb1237ab620dca61294d690">v8::internal::wasm::WasmCodePointerTable::SetEntrypointWithWriteScope</a></div><div class="ttdeci">void SetEntrypointWithWriteScope(WasmCodePointer index, Address value, uint64_t signature_hash, WriteScope &amp;write_scope)</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-pointer-table-inl_8h_source.html#l00081">wasm-code-pointer-table-inl.h:81</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_ad5e11c7f8d574045296d9d8c07f928f8"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ad5e11c7f8d574045296d9d8c07f928f8">v8::internal::wasm::WasmCodePointerTable::AllocateUninitializedEntry</a></div><div class="ttdeci">WasmCodePointer AllocateUninitializedEntry()</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-pointer-table-inl_8h_source.html#l00107">wasm-code-pointer-table-inl.h:107</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodePointerTable_html_ae052cc798b9dd1e4970a6cdbcb2adb05"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodePointerTable.html#ae052cc798b9dd1e4970a6cdbcb2adb05">v8::internal::wasm::WasmCodePointerTable::SetEntrypointAndSignature</a></div><div class="ttdeci">void SetEntrypointAndSignature(WasmCodePointer index, Address value, uint64_t signature_hash)</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-pointer-table-inl_8h_source.html#l00074">wasm-code-pointer-table-inl.h:74</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeRefScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html">v8::internal::wasm::WasmCodeRefScope</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l01206">wasm-code-manager.h:1206</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeRefScope_html_a9148e3cdeac9e7f3d97d518fa66f722c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#a9148e3cdeac9e7f3d97d518fa66f722c">v8::internal::wasm::WasmCodeRefScope::AddRef</a></div><div class="ttdeci">static void AddRef(WasmCode *)</div><div class="ttdef"><b>Definition</b> <a href="#l02976">wasm-code-manager.cc:2976</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeRefScope_html_ab3bc479100dcf0b03b840a2151a736e1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#ab3bc479100dcf0b03b840a2151a736e1">v8::internal::wasm::WasmCodeRefScope::WasmCodeRefScope</a></div><div class="ttdeci">WasmCodeRefScope()</div><div class="ttdef"><b>Definition</b> <a href="#l02964">wasm-code-manager.cc:2964</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCodeRefScope_html_af76812fa3508419520afef1ec8b67a7a"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCodeRefScope.html#af76812fa3508419520afef1ec8b67a7a">v8::internal::wasm::WasmCodeRefScope::~WasmCodeRefScope</a></div><div class="ttdeci">~WasmCodeRefScope()</div><div class="ttdef"><b>Definition</b> <a href="#l02969">wasm-code-manager.cc:2969</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html">v8::internal::wasm::WasmCode</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00090">wasm-code-manager.h:90</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a00c5b3d34913272e9ce1cacfe05d4d33"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a00c5b3d34913272e9ce1cacfe05d4d33">v8::internal::wasm::WasmCode::handler_table</a></div><div class="ttdeci">Address handler_table() const</div><div class="ttdef"><b>Definition</b> <a href="#l00183">wasm-code-manager.cc:183</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a0665c8539d19ce1d73de15e50a308ed0"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0665c8539d19ce1d73de15e50a308ed0">v8::internal::wasm::WasmCode::GetInliningPosition</a></div><div class="ttdeci">std::tuple&lt; int, bool, SourcePosition &gt; GetInliningPosition(int inlining_id) const</div><div class="ttdef"><b>Definition</b> <a href="#l00612">wasm-code-manager.cc:612</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a0d55fcf378e16413e74e88d7d102ee15"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0d55fcf378e16413e74e88d7d102ee15">v8::internal::wasm::WasmCode::instruction_start</a></div><div class="ttdeci">Address instruction_start() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00174">wasm-code-manager.h:174</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a0f94a461ae1a32a2931d6cec086860e2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0f94a461ae1a32a2931d6cec086860e2">v8::internal::wasm::WasmCode::MaybePrint</a></div><div class="ttdeci">void MaybePrint() const</div><div class="ttdef"><b>Definition</b> <a href="#l00407">wasm-code-manager.cc:407</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a0fd2c078c0b8a5e5d2dfa2c253c58676"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a0fd2c078c0b8a5e5d2dfa2c253c58676">v8::internal::wasm::WasmCode::Print</a></div><div class="ttdeci">void Print(const char *name=nullptr) const</div><div class="ttdef"><b>Definition</b> <a href="#l00421">wasm-code-manager.cc:421</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a135625ac865b7b381136e919e5e7c2bd"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a135625ac865b7b381136e919e5e7c2bd">v8::internal::wasm::WasmCode::tier</a></div><div class="ttdeci">ExecutionTier tier() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00200">wasm-code-manager.h:200</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a1951335f26c2a59efcd6997ad28b6157"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a1951335f26c2a59efcd6997ad28b6157">v8::internal::wasm::WasmCode::IsProtectedInstruction</a></div><div class="ttdeci">bool IsProtectedInstruction(Address pc)</div><div class="ttdef"><b>Definition</b> <a href="#l00326">wasm-code-manager.cc:326</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a236d413616e672cc2cda31bb7a4fc04d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04d">v8::internal::wasm::WasmCode::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00092">wasm-code-manager.h:92</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da45f1a70311368f7019a39332304561b1">v8::internal::wasm::WasmCode::kWasmFunction</a></div><div class="ttdeci">@ kWasmFunction</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00093">wasm-code-manager.h:93</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a236d413616e672cc2cda31bb7a4fc04da806ef6ecaaea44fafa40934e34fceef5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da806ef6ecaaea44fafa40934e34fceef5">v8::internal::wasm::WasmCode::kWasmToCapiWrapper</a></div><div class="ttdeci">@ kWasmToCapiWrapper</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00094">wasm-code-manager.h:94</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04da95ce5c1324b114f4905ca3eb8e68c730">v8::internal::wasm::WasmCode::kJumpTable</a></div><div class="ttdeci">@ kJumpTable</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00100">wasm-code-manager.h:99</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a236d413616e672cc2cda31bb7a4fc04daef214dac33aaad4bde9322f48d8cc3e4">v8::internal::wasm::WasmCode::kWasmToJsWrapper</a></div><div class="ttdeci">@ kWasmToJsWrapper</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00095">wasm-code-manager.h:95</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a309bc6c5680169670f74f25abc9ad0e2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a309bc6c5680169670f74f25abc9ad0e2">v8::internal::wasm::WasmCode::DebugName</a></div><div class="ttdeci">std::string DebugName() const</div><div class="ttdef"><b>Definition</b> <a href="#l00242">wasm-code-manager.cc:242</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a35a765c275210d7f0ca8ec68502120a9"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a35a765c275210d7f0ca8ec68502120a9">v8::internal::wasm::WasmCode::instructions</a></div><div class="ttdeci">base::Vector&lt; uint8_t &gt; instructions() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00170">wasm-code-manager.h:170</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a41fcec1a1b74c208fe92d705c51f2a81"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a41fcec1a1b74c208fe92d705c51f2a81">v8::internal::wasm::WasmCode::index</a></div><div class="ttdeci">int index() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00195">wasm-code-manager.h:195</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a42a79bd135c2fe3f5aec43a4a39d2cb1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a42a79bd135c2fe3f5aec43a4a39d2cb1">v8::internal::wasm::WasmCode::~WasmCode</a></div><div class="ttdeci">~WasmCode()</div><div class="ttdef"><b>Definition</b> <a href="#l00555">wasm-code-manager.cc:555</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a5a78bb078a03d73444b991c277dd6194"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a78bb078a03d73444b991c277dd6194">v8::internal::wasm::WasmCode::handler_table_size</a></div><div class="ttdeci">int handler_table_size() const</div><div class="ttdef"><b>Definition</b> <a href="#l00187">wasm-code-manager.cc:187</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a5a90b2d5047637c5c548dfdb68727529"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a5a90b2d5047637c5c548dfdb68727529">v8::internal::wasm::WasmCode::protected_instructions</a></div><div class="ttdeci">base::Vector&lt; const trap_handler::ProtectedInstructionData &gt; protected_instructions() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00243">wasm-code-manager.h:243</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a62907f7d086c7c661973f20709860049"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a62907f7d086c7c661973f20709860049">v8::internal::wasm::WasmCode::source_positions</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; source_positions() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00184">wasm-code-manager.h:184</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a67fc73055bd53a21c7fd76f8c9bb93c3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a67fc73055bd53a21c7fd76f8c9bb93c3">v8::internal::wasm::WasmCode::Disassemble</a></div><div class="ttdeci">void Disassemble(const char *name, std::ostream &amp;os, Address current_pc=kNullAddress) const</div><div class="ttdef"><b>Definition</b> <a href="#l00434">wasm-code-manager.cc:434</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a6fb7953d0c7eff21f73f8004030ad2a1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a6fb7953d0c7eff21f73f8004030ad2a1">v8::internal::wasm::WasmCode::deopt_data</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; deopt_data() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00191">wasm-code-manager.h:191</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a7505326ebe9aab3ab86719afe8a9a612"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7505326ebe9aab3ab86719afe8a9a612">v8::internal::wasm::WasmCode::native_module</a></div><div class="ttdeci">NativeModule * native_module() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00199">wasm-code-manager.h:199</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a7ce5e9c4ac84834ffd253b89c0f35d71"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a7ce5e9c4ac84834ffd253b89c0f35d71">v8::internal::wasm::WasmCode::reloc_info</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; reloc_info() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00180">wasm-code-manager.h:180</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a8457a62709deef003163c655a448f756"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8457a62709deef003163c655a448f756">v8::internal::wasm::WasmCode::Validate</a></div><div class="ttdeci">void Validate() const</div><div class="ttdef"><b>Definition</b> <a href="#l00335">wasm-code-manager.cc:335</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a86612599c4a49e5ff328d3fd108ed267"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a86612599c4a49e5ff328d3fd108ed267">v8::internal::wasm::WasmCode::contains</a></div><div class="ttdeci">bool contains(Address pc) const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00228">wasm-code-manager.h:228</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a8812eaf47c0af7737451c411dd2f15f1"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8812eaf47c0af7737451c411dd2f15f1">v8::internal::wasm::WasmCode::LogCode</a></div><div class="ttdeci">void LogCode(Isolate *isolate, const char *source_url, int script_id) const</div><div class="ttdef"><b>Definition</b> <a href="#l00276">wasm-code-manager.cc:276</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a8bd3de600f8533f15759f5770993cb34"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a8bd3de600f8533f15759f5770993cb34">v8::internal::wasm::WasmCode::is_liftoff</a></div><div class="ttdeci">bool is_liftoff() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00224">wasm-code-manager.h:224</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_a9e613d2e2b4efb89259f7e209d0911c2"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#a9e613d2e2b4efb89259f7e209d0911c2">v8::internal::wasm::WasmCode::IsAnonymous</a></div><div class="ttdeci">bool IsAnonymous() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00197">wasm-code-manager.h:197</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_aa28996c5cbe5173fdf91835423281487"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aa28996c5cbe5173fdf91835423281487">v8::internal::wasm::WasmCode::GetSourcePositionBefore</a></div><div class="ttdeci">SourcePosition GetSourcePositionBefore(int code_offset)</div><div class="ttdef"><b>Definition</b> <a href="#l00598">wasm-code-manager.cc:598</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_aa5871171b9acb176f06c4a76532af6d6"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aa5871171b9acb176f06c4a76532af6d6">v8::internal::wasm::WasmCode::inlining_positions</a></div><div class="ttdeci">base::Vector&lt; const uint8_t &gt; inlining_positions() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00187">wasm-code-manager.h:187</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_aabc336382e10df3a5f7c37ba95d15799"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aabc336382e10df3a5f7c37ba95d15799">v8::internal::wasm::WasmCode::DecrementRefCount</a></div><div class="ttdeci">static void DecrementRefCount(base::Vector&lt; WasmCode *const &gt;)</div><div class="ttdef"><b>Definition</b> <a href="#l00578">wasm-code-manager.cc:578</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_aac733a220bc5ba8a401b7898cd2a911d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aac733a220bc5ba8a401b7898cd2a911d">v8::internal::wasm::WasmCode::DecRefOnDeadCode</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT bool DecRefOnDeadCode()</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00295">wasm-code-manager.h:295</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_ac2265f4016946fd6cebc80a33de464e3"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ac2265f4016946fd6cebc80a33de464e3">v8::internal::wasm::WasmCode::WasmCode</a></div><div class="ttdeci">WasmCode(const WasmCode &amp;)=delete</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_ac92fbbfae3b4073dd57a49cd6a3d7c85"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ac92fbbfae3b4073dd57a49cd6a3d7c85">v8::internal::wasm::WasmCode::for_debugging</a></div><div class="ttdeci">ForDebugging for_debugging() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00320">wasm-code-manager.h:320</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_acb261693fa04ffc206a9289658201454"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acb261693fa04ffc206a9289658201454">v8::internal::wasm::WasmCode::ShouldBeLogged</a></div><div class="ttdeci">static bool ShouldBeLogged(Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="#l00235">wasm-code-manager.cc:235</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_acbb10aa1640d3e9bfaeac3d22a4d15f7"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acbb10aa1640d3e9bfaeac3d22a4d15f7">v8::internal::wasm::WasmCode::EstimateCurrentMemoryConsumption</a></div><div class="ttdeci">size_t EstimateCurrentMemoryConsumption() const</div><div class="ttdef"><b>Definition</b> <a href="#l00627">wasm-code-manager.cc:627</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_acd35922706de8e53f6636e2ffee15c47"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#acd35922706de8e53f6636e2ffee15c47">v8::internal::wasm::WasmCode::GetSourceOffsetBefore</a></div><div class="ttdeci">int GetSourceOffsetBefore(int code_offset)</div><div class="ttdef"><b>Definition</b> <a href="#l00608">wasm-code-manager.cc:608</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_ad8a26bf968040e704a34b3d572ba7d3f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8a26bf968040e704a34b3d572ba7d3f">v8::internal::wasm::WasmCode::kind</a></div><div class="ttdeci">Kind kind() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00198">wasm-code-manager.h:198</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_ad8fe73eecc8f962c5a2d2172c9c54454"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ad8fe73eecc8f962c5a2d2172c9c54454">v8::internal::wasm::WasmCode::code_comments</a></div><div class="ttdeci">Address code_comments() const</div><div class="ttdef"><b>Definition</b> <a href="#l00192">wasm-code-manager.cc:192</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_ae626a585fa560ca29921df489d63f35f"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#ae626a585fa560ca29921df489d63f35f">v8::internal::wasm::WasmCode::code_comments_size</a></div><div class="ttdeci">int code_comments_size() const</div><div class="ttdef"><b>Definition</b> <a href="#l00196">wasm-code-manager.cc:196</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmCode_html_aec3d947bda334f5e27cf71c49674b10d"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmCode.html#aec3d947bda334f5e27cf71c49674b10d">v8::internal::wasm::WasmCode::constant_pool</a></div><div class="ttdeci">Address constant_pool() const</div><div class="ttdef"><b>Definition</b> <a href="#l00174">wasm-code-manager.cc:174</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmDeoptView_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmDeoptView.html">v8::internal::wasm::WasmDeoptView</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-deopt-data_8h_source.html#l00046">wasm-deopt-data.h:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmDeoptView_html_a47c97d84e8183f29fdd51be5b63c392b"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmDeoptView.html#a47c97d84e8183f29fdd51be5b63c392b">v8::internal::wasm::WasmDeoptView::GetDeoptEntry</a></div><div class="ttdeci">WasmDeoptEntry GetDeoptEntry(uint32_t deopt_index) const</div><div class="ttdef"><b>Definition</b> <a href="wasm-deopt-data_8h_source.html#l00070">wasm-deopt-data.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmDeoptView_html_af1fcf3edd7783d8c6779b9615a792b94"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmDeoptView.html#af1fcf3edd7783d8c6779b9615a792b94">v8::internal::wasm::WasmDeoptView::GetDeoptData</a></div><div class="ttdeci">const WasmDeoptData &amp; GetDeoptData() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-deopt-data_8h_source.html#l00059">wasm-deopt-data.h:59</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmDetectedFeatures.html">v8::internal::wasm::WasmDetectedFeatures</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-features_8h_source.html#l00087">wasm-features.h:87</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEnabledFeatures.html">v8::internal::wasm::WasmEnabledFeatures</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-features_8h_source.html#l00054">wasm-features.h:54</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a32e34a8169c3a723824780c6ac126654"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a32e34a8169c3a723824780c6ac126654">v8::internal::wasm::WasmEngine::PrintCurrentMemoryConsumptionEstimate</a></div><div class="ttdeci">void PrintCurrentMemoryConsumptionEstimate() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l02053">wasm-engine.cc:2053</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_a7205b4150830ce82a81d687f9f0765af"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#a7205b4150830ce82a81d687f9f0765af">v8::internal::wasm::WasmEngine::FreeDeadCode</a></div><div class="ttdeci">void FreeDeadCode(const DeadCodeMap &amp;, std::vector&lt; WasmCode * &gt; &amp;)</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l01860">wasm-engine.cc:1860</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aaf9cd2000af17e8d1f3ebbb9d4cd7c09"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aaf9cd2000af17e8d1f3ebbb9d4cd7c09">v8::internal::wasm::WasmEngine::FreeNativeModule</a></div><div class="ttdeci">void FreeNativeModule(NativeModule *)</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l01686">wasm-engine.cc:1686</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_aeb5f29b3650d0c661e7693d367034939"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#aeb5f29b3650d0c661e7693d367034939">v8::internal::wasm::WasmEngine::DeadCodeMap</a></div><div class="ttdeci">std::unordered_map&lt; NativeModule *, std::vector&lt; WasmCode * &gt; &gt; DeadCodeMap</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8h_source.html#l00378">wasm-engine.h:378</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmEngine_html_afb84cc1eff65c2e2c597b932ca80696c"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmEngine.html#afb84cc1eff65c2e2c597b932ca80696c">v8::internal::wasm::WasmEngine::FlushLiftoffCode</a></div><div class="ttdeci">std::pair&lt; size_t, size_t &gt; FlushLiftoffCode()</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l01076">wasm-engine.cc:1076</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache_html_a14ee1f266c89689eb799afe5f843dc41"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmImportWrapperCache.html#a14ee1f266c89689eb799afe5f843dc41">v8::internal::wasm::WasmImportWrapperCache::Lookup</a></div><div class="ttdeci">WasmCode * Lookup(Address pc) const</div><div class="ttdef"><b>Definition</b> <a href="wasm-import-wrapper-cache_8cc_source.html#l00233">wasm-import-wrapper-cache.cc:233</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WasmModuleSourceMap_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WasmModuleSourceMap.html">v8::internal::wasm::WasmModuleSourceMap</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module-sourcemap_8h_source.html#l00038">wasm-module-sourcemap.h:38</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WellKnownImportsList_html_ad1d42dd019b4556bceb6911f5314d6e5"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WellKnownImportsList.html#ad1d42dd019b4556bceb6911f5314d6e5">v8::internal::wasm::WellKnownImportsList::UpdateResult</a></div><div class="ttdeci">UpdateResult</div><div class="ttdef"><b>Definition</b> <a href="well-known-imports_8h_source.html#l00122">well-known-imports.h:122</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WellKnownImportsList_html_ad1d42dd019b4556bceb6911f5314d6e5a645a35f6c5fc6147785da45d7e871648"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WellKnownImportsList.html#ad1d42dd019b4556bceb6911f5314d6e5a645a35f6c5fc6147785da45d7e871648">v8::internal::wasm::WellKnownImportsList::UpdateResult::kFoundIncompatibility</a></div><div class="ttdeci">@ kFoundIncompatibility</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1wasm_1_1WireBytesRef_html"><div class="ttname"><a href="classv8_1_1internal_1_1wasm_1_1WireBytesRef.html">v8::internal::wasm::WireBytesRef</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00057">wasm-module.h:57</a></div></div>
<div class="ttc" id="acode-events_8h_html_ad6ec92ea4475dc9e407f0963df52df64"><div class="ttname"><a href="code-events_8h.html#ad6ec92ea4475dc9e407f0963df52df64">PROFILE</a></div><div class="ttdeci">#define PROFILE(the_isolate, Call)</div><div class="ttdef"><b>Definition</b> <a href="code-events_8h_source.html#l00059">code-events.h:59</a></div></div>
<div class="ttc" id="acode-memory-access_8h_html"><div class="ttname"><a href="code-memory-access_8h.html">code-memory-access.h</a></div></div>
<div class="ttc" id="acode-space-access_8h_html"><div class="ttname"><a href="code-space-access_8h.html">code-space-access.h</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html"><div class="ttname"><a href="common_2globals_8h.html">globals.h</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html_a66ec6fa51a5427d80ac1b27a3b4f38d2"><div class="ttname"><a href="common_2globals_8h.html#a66ec6fa51a5427d80ac1b27a3b4f38d2">V8_EMBEDDED_CONSTANT_POOL_BOOL</a></div><div class="ttdeci">#define V8_EMBEDDED_CONSTANT_POOL_BOOL</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00081">globals.h:81</a></div></div>
<div class="ttc" id="acompilation-environment_8h_html"><div class="ttname"><a href="compilation-environment_8h.html">compilation-environment.h</a></div></div>
<div class="ttc" id="acounters_8h_html"><div class="ttname"><a href="counters_8h.html">counters.h</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_a37722a150250e2a5a98e5e0d11e53449"><div class="ttname"><a href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a></div><div class="ttdeci">int start</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00595">debug-coverage.cc:595</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_abce9f5dc9c83f2639b72024fdee5d388"><div class="ttname"><a href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a></div><div class="ttdeci">int end</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00596">debug-coverage.cc:596</a></div></div>
<div class="ttc" id="adeoptimizer_8h_html"><div class="ttname"><a href="deoptimizer_8h.html">deoptimizer.h</a></div></div>
<div class="ttc" id="adisassembler_8h_html"><div class="ttname"><a href="disassembler_8h.html">disassembler.h</a></div></div>
<div class="ttc" id="aembedded-data-inl_8h_html"><div class="ttname"><a href="embedded-data-inl_8h.html">embedded-data-inl.h</a></div></div>
<div class="ttc" id="aexperimental-interpreter_8cc_html_ac8c81e61335635fa4709d82412b31f06"><div class="ttname"><a href="experimental-interpreter_8cc.html#ac8c81e61335635fa4709d82412b31f06">pc</a></div><div class="ttdeci">int pc</div><div class="ttdef"><b>Definition</b> <a href="experimental-interpreter_8cc_source.html#l00554">experimental-interpreter.cc:554</a></div></div>
<div class="ttc" id="afunction-compiler_8h_html"><div class="ttname"><a href="function-compiler_8h.html">function-compiler.h</a></div></div>
<div class="ttc" id="agraph-builder_8cc_html_a9990dda08de44f6aee0aaf44c50da7d9"><div class="ttname"><a href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a></div><div class="ttdeci">Isolate * isolate</div><div class="ttdef"><b>Definition</b> <a href="graph-builder_8cc_source.html#l00058">graph-builder.cc:58</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a115c48491bb37004f5ac67eb46ac2c23"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a115c48491bb37004f5ac67eb46ac2c23">base</a></div><div class="ttdeci">turboshaft::OpIndex base</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00070">instruction-selector-ia32.cc:70</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a97bd6c077f3c7769f575b82988b9b668"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a></div><div class="ttdeci">int32_t offset</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00072">instruction-selector-ia32.cc:72</a></div></div>
<div class="ttc" id="aiterator_8h_html"><div class="ttname"><a href="iterator_8h.html">iterator.h</a></div></div>
<div class="ttc" id="ajump-table-assembler_8h_html"><div class="ttname"><a href="jump-table-assembler_8h.html">jump-table-assembler.h</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a41f8c58d2c01bf65b8ee199c3f87fc80"><div class="ttname"><a href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a></div><div class="ttdeci">ZoneVector&lt; RpoNumber &gt; &amp; result</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00021">jump-threading.cc:21</a></div></div>
<div class="ttc" id="aliftoff-compiler_8cc_html_ab8d3010479e75420093f37bb28df0db7"><div class="ttname"><a href="liftoff-compiler_8cc.html#ab8d3010479e75420093f37bb28df0db7">entries</a></div><div class="ttdeci">ZoneVector&lt; Entry &gt; entries</div><div class="ttdef"><b>Definition</b> <a href="liftoff-compiler_8cc_source.html#l00515">liftoff-compiler.cc:515</a></div></div>
<div class="ttc" id="aliftoff-compiler_8cc_html_ac8403346601a16f8902bbe271ff3c261"><div class="ttname"><a href="liftoff-compiler_8cc.html#ac8403346601a16f8902bbe271ff3c261">pc_offset</a></div><div class="ttdeci">int pc_offset</div><div class="ttdef"><b>Definition</b> <a href="liftoff-compiler_8cc_source.html#l09351">liftoff-compiler.cc:9351</a></div></div>
<div class="ttc" id="aliveedit_8cc_html_a401e942526aac47cef94f478182486e7"><div class="ttname"><a href="liveedit_8cc.html#a401e942526aac47cef94f478182486e7">position</a></div><div class="ttdeci">int position</div><div class="ttdef"><b>Definition</b> <a href="liveedit_8cc_source.html#l00290">liveedit.cc:290</a></div></div>
<div class="ttc" id="alog_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="alog_8h_html_a2136964700ae2b6a19ce954e7848210b"><div class="ttname"><a href="log_8h.html#a2136964700ae2b6a19ce954e7848210b">LOG_CODE_EVENT</a></div><div class="ttdeci">#define LOG_CODE_EVENT(isolate, Call)</div><div class="ttdef"><b>Definition</b> <a href="log_8h_source.html#l00083">log.h:83</a></div></div>
<div class="ttc" id="alogging_8h_html_a0d093cb749cfc7ab5993726392df681f"><div class="ttname"><a href="logging_8h.html#a0d093cb749cfc7ab5993726392df681f">FATAL</a></div><div class="ttdeci">#define FATAL(...)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00047">logging.h:47</a></div></div>
<div class="ttc" id="alogging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00490">logging.h:490</a></div></div>
<div class="ttc" id="alogging_8h_html_a1c7c9b7f14b9a33ea69cbe4578016a19"><div class="ttname"><a href="logging_8h.html#a1c7c9b7f14b9a33ea69cbe4578016a19">CHECK_GE</a></div><div class="ttdeci">#define CHECK_GE(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_a2209830df6b59d1ec1fdf66b9352924f"><div class="ttname"><a href="logging_8h.html#a2209830df6b59d1ec1fdf66b9352924f">DCHECK_NULL</a></div><div class="ttdeci">#define DCHECK_NULL(val)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00491">logging.h:491</a></div></div>
<div class="ttc" id="alogging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="alogging_8h_html_a56e883b55c80205b4d1727679c68b2bd"><div class="ttname"><a href="logging_8h.html#a56e883b55c80205b4d1727679c68b2bd">CHECK_LE</a></div><div class="ttdeci">#define CHECK_LE(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_a7b9f9517fedacc2a1a56c2bbb9d03688"><div class="ttname"><a href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a></div><div class="ttdeci">#define DCHECK_NOT_NULL(val)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00492">logging.h:492</a></div></div>
<div class="ttc" id="alogging_8h_html_a9154b181227e4b02e465befe50219158"><div class="ttname"><a href="logging_8h.html#a9154b181227e4b02e465befe50219158">CHECK_NOT_NULL</a></div><div class="ttdeci">#define CHECK_NOT_NULL(val)</div></div>
<div class="ttc" id="alogging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00493">logging.h:493</a></div></div>
<div class="ttc" id="alogging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="alogging_8h_html_aabec5c3b7a8628298a25f044dcf89c25"><div class="ttname"><a href="logging_8h.html#aabec5c3b7a8628298a25f044dcf89c25">DCHECK_GE</a></div><div class="ttdeci">#define DCHECK_GE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00488">logging.h:488</a></div></div>
<div class="ttc" id="alogging_8h_html_aca32614b4d2aea7dd9abdeb222bf02f3"><div class="ttname"><a href="logging_8h.html#aca32614b4d2aea7dd9abdeb222bf02f3">CHECK_EQ</a></div><div class="ttdeci">#define CHECK_EQ(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00482">logging.h:482</a></div></div>
<div class="ttc" id="alogging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="alogging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="alogging_8h_html_afd957f297df7e9ee36c46185e961485f"><div class="ttname"><a href="logging_8h.html#afd957f297df7e9ee36c46185e961485f">DCHECK_GT</a></div><div class="ttdeci">#define DCHECK_GT(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00487">logging.h:487</a></div></div>
<div class="ttc" id="amacro-assembler-inl_8h_html"><div class="ttname"><a href="macro-assembler-inl_8h.html">macro-assembler-inl.h</a></div></div>
<div class="ttc" id="amacro-assembler_8h_html"><div class="ttname"><a href="macro-assembler_8h.html">macro-assembler.h</a></div></div>
<div class="ttc" id="amacros_8h_html"><div class="ttname"><a href="macros_8h.html">macros.h</a></div></div>
<div class="ttc" id="amacros_8h_html_a5113f5db9eec9c30ecea57b8d4175f2d"><div class="ttname"><a href="macros_8h.html#a5113f5db9eec9c30ecea57b8d4175f2d">RoundUp</a></div><div class="ttdeci">constexpr T RoundUp(T x, intptr_t m)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00375">macros.h:375</a></div></div>
<div class="ttc" id="amacros_8h_html_aa0de4a420e74c8df8076fc2aaf4af27a"><div class="ttname"><a href="macros_8h.html#aa0de4a420e74c8df8076fc2aaf4af27a">RoundDown</a></div><div class="ttdeci">constexpr T RoundDown(T x, intptr_t m)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00359">macros.h:359</a></div></div>
<div class="ttc" id="amacros_8h_html_ab7a19c1f785f31f2b190afc19875368a"><div class="ttname"><a href="macros_8h.html#ab7a19c1f785f31f2b190afc19875368a">IsAligned</a></div><div class="ttdeci">constexpr bool IsAligned(T value, U alignment)</div><div class="ttdef"><b>Definition</b> <a href="macros_8h_source.html#l00391">macros.h:391</a></div></div>
<div class="ttc" id="amaglev-code-generator_8cc_html_ab2db56d89ae9e1f5d8022a39e2c19a84"><div class="ttname"><a href="maglev-code-generator_8cc.html#ab2db56d89ae9e1f5d8022a39e2c19a84">stack_slots</a></div><div class="ttdeci">base::SmallVector&lt; int32_t, 1 &gt; stack_slots</div><div class="ttdef"><b>Definition</b> <a href="maglev-code-generator_8cc_source.html#l00166">maglev-code-generator.cc:166</a></div></div>
<div class="ttc" id="amodule-compiler_8h_html"><div class="ttname"><a href="module-compiler_8h.html">module-compiler.h</a></div></div>
<div class="ttc" id="anames-provider_8h_html"><div class="ttname"><a href="names-provider_8h.html">names-provider.h</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition</b> <a href="hashing_8h_source.html#l00364">hashing.h:364</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_1_1bits_html_a4d06086712ebcd60838caae1a21fcfa3"><div class="ttname"><a href="namespacev8_1_1base_1_1bits.html#a4d06086712ebcd60838caae1a21fcfa3">v8::base::bits::IsPowerOfTwo</a></div><div class="ttdeci">constexpr bool IsPowerOfTwo(T value)</div><div class="ttdef"><b>Definition</b> <a href="bits_8h_source.html#l00187">bits.h:187</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a3279492e34e391eefba807ff6a59576e"><div class="ttname"><a href="namespacev8_1_1base.html#a3279492e34e391eefba807ff6a59576e">v8::base::SpinningMutexGuard</a></div><div class="ttdeci">LockGuard&lt; SpinningMutex &gt; SpinningMutexGuard</div><div class="ttdef"><b>Definition</b> <a href="mutex_8h_source.html#l00562">mutex.h:562</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a576345f40485ddc3e105508023924217"><div class="ttname"><a href="namespacev8_1_1base.html#a576345f40485ddc3e105508023924217">v8::base::AddressRegionOf</a></div><div class="ttdeci">AddressRegion AddressRegionOf(T *ptr, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="address-region_8h_source.html#l00079">address-region.h:79</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a7364bf7dcb822d07f7380aeff8d2a77b"><div class="ttname"><a href="namespacev8_1_1base.html#a7364bf7dcb822d07f7380aeff8d2a77b">v8::base::Reversed</a></div><div class="ttdeci">auto Reversed(T &amp;t)</div><div class="ttdef"><b>Definition</b> <a href="iterator_8h_source.html#l00105">iterator.h:105</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a8a96976677371a5201af88b56be08915"><div class="ttname"><a href="namespacev8_1_1base.html#a8a96976677371a5201af88b56be08915">v8::base::FormattedString</a></div><div class="ttdeci">FormattedString() -&gt; FormattedString&lt;&gt;</div><div class="ttdef"><b>Definition</b> <a href="string-format_8h_source.html#l00176">string-format.h:176</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ab277246c6caecad159bbc8755cf6bb54"><div class="ttname"><a href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">v8::base::VectorOf</a></div><div class="ttdeci">constexpr Vector&lt; T &gt; VectorOf(T *start, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00360">vector.h:360</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_abc1a5cbcd5118aa93d683e4875fa029c"><div class="ttname"><a href="namespacev8_1_1base.html#abc1a5cbcd5118aa93d683e4875fa029c">v8::base::OwnedCopyOf</a></div><div class="ttdeci">OwnedVector&lt; T &gt; OwnedCopyOf(const T *data, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00383">vector.h:383</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ae714b233e65334e0104cda752fc559c5"><div class="ttname"><a href="namespacev8_1_1base.html#ae714b233e65334e0104cda752fc559c5">v8::base::kNullAddress</a></div><div class="ttdeci">constexpr Address kNullAddress</div><div class="ttdef"><b>Definition</b> <a href="virtual-address-space_8h_source.html#l00018">virtual-address-space.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1trap__handler_html_a6212dc14540b8761e5f9d7d46ac445ec"><div class="ttname"><a href="namespacev8_1_1internal_1_1trap__handler.html#a6212dc14540b8761e5f9d7d46ac445ec">v8::internal::trap_handler::ReleaseHandlerData</a></div><div class="ttdeci">void ReleaseHandlerData(int index)</div><div class="ttdef"><b>Definition</b> <a href="handler-outside_8cc_source.html#l00207">handler-outside.cc:207</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a0a36931b3d2bbcdfcbb253b229838952"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a0a36931b3d2bbcdfcbb253b229838952">v8::internal::wasm::GetProcessWideWasmCodePointerTable</a></div><div class="ttdeci">V8_EXPORT_PRIVATE WasmCodePointerTable * GetProcessWideWasmCodePointerTable()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a11df36d2f23b22c6772f3a5f08731b5b"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5b">v8::internal::wasm::ForDebugging</a></div><div class="ttdeci">ForDebugging</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00046">wasm-tier.h:46</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba1874820c42ab45140e0e50e44f8e96d5">v8::internal::wasm::kNotForDebugging</a></div><div class="ttdeci">@ kNotForDebugging</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00047">wasm-tier.h:47</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a11df36d2f23b22c6772f3a5f08731b5ba43d94925083957d680eef3a3987e0de0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5ba43d94925083957d680eef3a3987e0de0">v8::internal::wasm::kForDebugging</a></div><div class="ttdeci">@ kForDebugging</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00048">wasm-tier.h:48</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a11df36d2f23b22c6772f3a5f08731b5badca2ce91f5a20ba7013f50c59576421e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5badca2ce91f5a20ba7013f50c59576421e">v8::internal::wasm::kForStepping</a></div><div class="ttdeci">@ kForStepping</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00051">wasm-tier.h:50</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a11df36d2f23b22c6772f3a5f08731b5bafb5f23c032f3e99631bbc881807faac5"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a11df36d2f23b22c6772f3a5f08731b5bafb5f23c032f3e99631bbc881807faac5">v8::internal::wasm::kWithBreakpoints</a></div><div class="ttdeci">@ kWithBreakpoints</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00049">wasm-tier.h:49</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a1bb1a5429ae3d1ec380de1b5da81238f"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a1bb1a5429ae3d1ec380de1b5da81238f">v8::internal::wasm::kAnonymousFuncIndex</a></div><div class="ttdeci">constexpr int kAnonymousFuncIndex</div><div class="ttdef"><b>Definition</b> <a href="wasm-constants_8h_source.html#l00172">wasm-constants.h:172</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a25f59e94501ad0ce6680be236623cc3c"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3c">v8::internal::wasm::DebugState</a></div><div class="ttdeci">DebugState</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00053">wasm-tier.h:53</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a25f59e94501ad0ce6680be236623cc3ca53bd2a5ccb174a582cc08c5894ad825d">v8::internal::wasm::kDebugging</a></div><div class="ttdeci">@ kDebugging</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00053">wasm-tier.h:53</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a36345041662f17bb39d27709c1cb78ac"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a36345041662f17bb39d27709c1cb78ac">v8::internal::wasm::GetWasmImportWrapperCache</a></div><div class="ttdeci">WasmImportWrapperCache * GetWasmImportWrapperCache()</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l02124">wasm-engine.cc:2124</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a3adc957d22d860687fc2579215adeb80ad75c39b2587910e64fbca44ad513c9e0">v8::internal::wasm::kWasmOrigin</a></div><div class="ttdeci">@ kWasmOrigin</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00121">wasm-module.h:121</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a55a717894f5d005ae86062dd4647a3b2"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a55a717894f5d005ae86062dd4647a3b2">v8::internal::wasm::GetWasmCodeManager</a></div><div class="ttdeci">WasmCodeManager * GetWasmCodeManager()</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l02119">wasm-engine.cc:2119</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6a8744656191d24bad76f9c6562d9fdb"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6a8744656191d24bad76f9c6562d9fdb">v8::internal::wasm::JumpTableOffset</a></div><div class="ttdeci">int JumpTableOffset(const WasmModule *module, int func_index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8cc_source.html#l00804">wasm-module.cc:804</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a6feb413448e84daf9201bd8a2381a718"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a6feb413448e84daf9201bd8a2381a718">v8::internal::wasm::GetTypeCanonicalizer</a></div><div class="ttdeci">TypeCanonicalizer * GetTypeCanonicalizer()</div><div class="ttdef"><b>Definition</b> <a href="canonical-types_8cc_source.html#l00019">canonical-types.cc:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9">v8::internal::wasm::ExecutionTier</a></div><div class="ttdeci">ExecutionTier</div><div class="ttdef"><b>Definition</b> <a href="wasm-tier_8h_source.html#l00019">wasm-tier.h:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a35c3ace1970663a16e5c65baa5941b13">v8::internal::wasm::ExecutionTier::kNone</a></div><div class="ttdeci">@ kNone</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a3a4891ee13d971db79eeae3a6d61d151">v8::internal::wasm::ExecutionTier::kLiftoff</a></div><div class="ttdeci">@ kLiftoff</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a74094ea879a0bfb89fbc40b97dd862b9a6065beb5ecfe687530b3359a2b39ec31">v8::internal::wasm::ExecutionTier::kTurbofan</a></div><div class="ttdeci">@ kTurbofan</div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a7d41c6d12091165e18a14f58ae8b1b91"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a7d41c6d12091165e18a14f58ae8b1b91">v8::internal::wasm::kInvalidWasmCodePointer</a></div><div class="ttdeci">constexpr WasmCodePointer kInvalidWasmCodePointer</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00087">wasm-code-manager.h:87</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a7d4fcae80d23d6a3fd336b7ed70eee1e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a7d4fcae80d23d6a3fd336b7ed70eee1e">v8::internal::wasm::GetWasmCodeKindAsString</a></div><div class="ttdeci">const char * GetWasmCodeKindAsString(WasmCode::Kind kind)</div><div class="ttdef"><b>Definition</b> <a href="#l00537">wasm-code-manager.cc:537</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_aa122591443234c1d0b597dadc9d55c5e"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#aa122591443234c1d0b597dadc9d55c5e">v8::internal::wasm::ContentSize</a></div><div class="ttdeci">size_t ContentSize(const std::vector&lt; T &gt; &amp;vector)</div><div class="ttdef"><b>Definition</b> <a href="std-object-sizes_8h_source.html#l00027">std-object-sizes.h:27</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ab2ab774cdc5dfa0fea419719c89815f6"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ab2ab774cdc5dfa0fea419719c89815f6">v8::internal::wasm::DumpProfileToFile</a></div><div class="ttdeci">void DumpProfileToFile(const WasmModule *module, base::Vector&lt; const uint8_t &gt; wire_bytes, std::atomic&lt; uint32_t &gt; *tiering_budget_array)</div><div class="ttdef"><b>Definition</b> <a href="pgo_8cc_source.html#l00195">pgo.cc:195</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abc12fc3b25ebfb54c20b8479642acb94"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abc12fc3b25ebfb54c20b8479642acb94">v8::internal::wasm::GetWasmEngine</a></div><div class="ttdeci">WasmEngine * GetWasmEngine()</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l02114">wasm-engine.cc:2114</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_abd9cf6cdda997dfabf862a6048202195"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#abd9cf6cdda997dfabf862a6048202195">v8::internal::wasm::declared_function_index</a></div><div class="ttdeci">int declared_function_index(const WasmModule *module, int func_index)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l01070">wasm-module.h:1070</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ac5c325f4f80fa26ae7e7bd8fa6caed93"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ac5c325f4f80fa26ae7e7bd8fa6caed93">v8::internal::wasm::GetCodeKind</a></div><div class="ttdeci">WasmCode::Kind GetCodeKind(const WasmCompilationResult &amp;result)</div><div class="ttdef"><b>Definition</b> <a href="#l01422">wasm-code-manager.cc:1422</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_ae73da17de18352a106bb4e622f610d85"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#ae73da17de18352a106bb4e622f610d85">v8::internal::wasm::DynamicTiering</a></div><div class="ttdeci">DynamicTiering</div><div class="ttdef"><b>Definition</b> <a href="compilation-environment_8h_source.html#l00037">compilation-environment.h:37</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_af945328e16ca1b7c2a5d2baf50ca445c"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#af945328e16ca1b7c2a5d2baf50ca445c">v8::internal::wasm::kV8MaxWasmFunctionParams</a></div><div class="ttdeci">constexpr size_t kV8MaxWasmFunctionParams</div><div class="ttdef"><b>Definition</b> <a href="wasm-limits_8h_source.html#l00053">wasm-limits.h:53</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a2409db5c20b55125a1f38d2eecf2341b"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2409db5c20b55125a1f38d2eecf2341b">v8::internal::win64_unwindinfo::RegisterNonABICompliantCodeRange</a></div><div class="ttdeci">void RegisterNonABICompliantCodeRange(void *start, size_t size_in_bytes)</div><div class="ttdef"><b>Definition</b> <a href="unwinding-info-win64_8cc_source.html#l00525">unwinding-info-win64.cc:525</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a2af86e498cb6c3f31bc898c6b40d287e"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a2af86e498cb6c3f31bc898c6b40d287e">v8::internal::win64_unwindinfo::CanRegisterUnwindInfoForNonABICompliantCodeRange</a></div><div class="ttdeci">bool CanRegisterUnwindInfoForNonABICompliantCodeRange()</div><div class="ttdef"><b>Definition</b> <a href="unwinding-info-win64_8cc_source.html#l00030">unwinding-info-win64.cc:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1win64__unwindinfo_html_a70f996f40a6b9c963c47bb920970d841"><div class="ttname"><a href="namespacev8_1_1internal_1_1win64__unwindinfo.html#a70f996f40a6b9c963c47bb920970d841">v8::internal::win64_unwindinfo::UnregisterNonABICompliantCodeRange</a></div><div class="ttdeci">void UnregisterNonABICompliantCodeRange(void *start)</div><div class="ttdef"><b>Definition</b> <a href="unwinding-info-win64_8cc_source.html#l00575">unwinding-info-win64.cc:575</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00018">api-arguments-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a08e1140ec7d96bfd4d6b21a808ccd654"><div class="ttname"><a href="namespacev8_1_1internal.html#a08e1140ec7d96bfd4d6b21a808ccd654">v8::internal::MB</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed Starts incremental marking with kUserVisible priority threshold for starting incremental marking immediately in percent of available minor GC task trigger in percent of the current heap limit use a separate phase for stack scanning in scavenge max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage * MB</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l02095">flags.cc:2095</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0b20b06fc0f215d9b9eac890977a53e7"><div class="ttname"><a href="namespacev8_1_1internal.html#a0b20b06fc0f215d9b9eac890977a53e7">v8::internal::SetPermissions</a></div><div class="ttdeci">bool SetPermissions(v8::PageAllocator *page_allocator, void *address, size_t size, PageAllocator::Permission access)</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00198">allocation.cc:198</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a0cfab207d565dcf62ebf50f3987e05de"><div class="ttname"><a href="namespacev8_1_1internal.html#a0cfab207d565dcf62ebf50f3987e05de">v8::internal::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition</b> <a href="heap-snapshot-generator_8cc_source.html#l01584">heap-snapshot-generator.cc:1584</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a1b38d6a01927e639b91b6a039899ac1a"><div class="ttname"><a href="namespacev8_1_1internal.html#a1b38d6a01927e639b91b6a039899ac1a">v8::internal::GetPlatformPageAllocator</a></div><div class="ttdeci">v8::PageAllocator * GetPlatformPageAllocator()</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00066">allocation.cc:66</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309"><div class="ttname"><a href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a30661f3a2dec8d729f69a1f576fd0309">v8::internal::above</a></div><div class="ttdeci">@ above</div><div class="ttdef"><b>Definition</b> <a href="assembler-ia32_8h_source.html#l00066">assembler-ia32.h:66</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c"><div class="ttname"><a href="namespacev8_1_1internal.html#a271f8ea99b7c0bbd771df015d4e4cf21a38474d965f18ce81888bd0d4c904ee6c">v8::internal::below</a></div><div class="ttdeci">@ below</div><div class="ttdef"><b>Definition</b> <a href="assembler-ia32_8h_source.html#l00061">assembler-ia32.h:61</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3430752cde9f29d73e97ceed1bce0856"><div class="ttname"><a href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="utils_2utils_8cc_source.html#l00039">utils.cc:39</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3537741c9c2331491d22d53de5115350"><div class="ttname"><a href="namespacev8_1_1internal.html#a3537741c9c2331491d22d53de5115350">v8::internal::tier</a></div><div class="ttdeci">force emit tier up logic from all non turbofan even if it is the top enabled tier make OptimizeFunctionOnNextCall optimize to maglev instead of turbofan enable loop peeling in the maglev optimizing compiler max loop size for loop peeling in the maglev optimizing compiler Generate deopt data on background thread maglev_deopt_data_on_background Inline CallApiCallback builtin into generated code use high priority compiler threads for concurrent Maglev max depth of functions that Maglev will incl small functions maximum cumulative size of bytecode considered for inlining excl small functions minimum frequency for inlining reuse stack slots in the maglev optimizing compiler enable phi untagging to hoist untagging of osr values filter for maglev s tracing printing options print feedback vector for maglev compiled code trace maglev print verbose deopt info trace maglev phi untagging print Maglev statistics in machine readable format skip generating a migration check when some maps of polymorpic property access are migration targets Use const tracking on dictionary properties Use heap numbers in script contexts Use compilation dependency to avoid dynamic checks for non empty context extensions Set the maximal optimisation tier</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l00716">flags.cc:715</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4ae783a89fc65122f5edc866f1209176"><div class="ttname"><a href="namespacev8_1_1internal.html#a4ae783a89fc65122f5edc866f1209176">v8::internal::FlushInstructionCache</a></div><div class="ttdeci">void FlushInstructionCache(void *start, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="flush-instruction-cache_8cc_source.html#l00014">flush-instruction-cache.cc:14</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a52434390901f205f6bdb0402a183aef3"><div class="ttname"><a href="namespacev8_1_1internal.html#a52434390901f205f6bdb0402a183aef3">v8::internal::kCodeAlignment</a></div><div class="ttdeci">constexpr intptr_t kCodeAlignment</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00955">globals.h:955</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a55676947d895fd4cdd273e53dff16694"><div class="ttname"><a href="namespacev8_1_1internal.html#a55676947d895fd4cdd273e53dff16694">v8::internal::kDefaultMaxWasmCodeSpaceSizeMb</a></div><div class="ttdeci">constexpr uint32_t kDefaultMaxWasmCodeSpaceSizeMb</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00444">globals.h:444</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a604a6dd52477843a9531577e32877ca5"><div class="ttname"><a href="namespacev8_1_1internal.html#a604a6dd52477843a9531577e32877ca5">v8::internal::GetRandomMmapAddr</a></div><div class="ttdeci">void * GetRandomMmapAddr()</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00160">allocation.cc:160</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6a5f128ae031000011e13ca7534dfc91"><div class="ttname"><a href="namespacev8_1_1internal.html#a6a5f128ae031000011e13ca7534dfc91">v8::internal::CommitPageSize</a></div><div class="ttdeci">size_t CommitPageSize()</div><div class="ttdef"><b>Definition</b> <a href="utils_2allocation_8cc_source.html#l00158">allocation.cc:158</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a782acb70e9eabcd3faaccfb6a3bde48e"><div class="ttname"><a href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">v8::internal::Address</a></div><div class="ttdeci">Address</div><div class="ttdef"><b>Definition</b> <a href="api-callbacks-inl_8h_source.html#l00034">api-callbacks-inl.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a85b33c0aa285b5a6b0c9963edf565da7"><div class="ttname"><a href="namespacev8_1_1internal.html#a85b33c0aa285b5a6b0c9963edf565da7">v8::internal::code</a></div><div class="ttdeci">force emit tier up logic from all non turbofan code</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l00515">flags.cc:515</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab368fe5f67cc93158861582746107fec"><div class="ttname"><a href="namespacev8_1_1internal.html#ab368fe5f67cc93158861582746107fec">v8::internal::KB</a></div><div class="ttdeci">refactor address components for immediate indexing filter for tracing turbofan compilation trace turbo cfg trace TurboFan s graph trimmer trace TurboFan s control equivalence trace TurboFan s register allocator trace stack load store counters for optimized code in run fuzzing &amp;&amp;concurrent_recompilation trace_turbo trace_turbo_scheduled trace_turbo_stack_accesses verify TurboFan machine graph of code stubs enable FixedArray bounds checks print TurboFan statistics of wasm compilations maximum cumulative size of bytecode considered for inlining scale factor of bytecode size used to calculate the inlining budget * KB</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l01294">flags.cc:1294</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_abef7e063903876c844c905764b46b438acb3ba39651f2444a7fff95297d974390"><div class="ttname"><a href="namespacev8_1_1internal.html#abef7e063903876c844c905764b46b438acb3ba39651f2444a7fff95297d974390">v8::internal::SKIP_ICACHE_FLUSH</a></div><div class="ttdeci">@ SKIP_ICACHE_FLUSH</div><div class="ttdef"><b>Definition</b> <a href="reloc-info_8h_source.html#l00025">reloc-info.h:25</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acc2e164143496f18b5ec68f8ab70af52"><div class="ttname"><a href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52">v8::internal::Builtin</a></div><div class="ttdeci">Builtin</div><div class="ttdef"><b>Definition</b> <a href="builtins_8h_source.html#l00048">builtins.h:48</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acc2e164143496f18b5ec68f8ab70af52a04022b3cd6b405230761e1a685db3b88"><div class="ttname"><a href="namespacev8_1_1internal.html#acc2e164143496f18b5ec68f8ab70af52a04022b3cd6b405230761e1a685db3b88">v8::internal::Builtin::kNoBuiltinId</a></div><div class="ttdeci">@ kNoBuiltinId</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_acdec713c25068019f935e35976f5b666"><div class="ttname"><a href="namespacev8_1_1internal.html#acdec713c25068019f935e35976f5b666">v8::internal::UNREACHABLE</a></div><div class="ttdeci">UNREACHABLE()</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afc0fca463c2a3badf70e62abe7b61771"><div class="ttname"><a href="namespacev8_1_1internal.html#afc0fca463c2a3badf70e62abe7b61771">v8::internal::ComputeAddressHash</a></div><div class="ttdeci">uint32_t ComputeAddressHash(Address address)</div><div class="ttdef"><b>Definition</b> <a href="utils_2utils_8h_source.html#l00306">utils.h:306</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff82af2c2f7b200915e30bcfedca6f85"><div class="ttname"><a href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">v8::internal::Cast</a></div><div class="ttdeci">Tagged&lt; To &gt; Cast(Tagged&lt; From &gt; value, const v8::SourceLocation &amp;loc=INIT_SOURCE_LOCATION_IN_DEBUG)</div><div class="ttdef"><b>Definition</b> <a href="casting_8h_source.html#l00148">casting.h:148</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00017">api-arguments-inl.h:17</a></div></div>
<div class="ttc" id="anamespacewasm_html"><div class="ttname"><a href="namespacewasm.html">wasm</a></div><div class="ttdef"><b>Definition</b> <a href="c-api_8cc_source.html#l00090">c-api.cc:90</a></div></div>
<div class="ttc" id="aobjects-inl_8h_html"><div class="ttname"><a href="objects-inl_8h.html">objects-inl.h</a></div></div>
<div class="ttc" id="aostreams_8h_html"><div class="ttname"><a href="ostreams_8h.html">ostreams.h</a></div></div>
<div class="ttc" id="apgo_8h_html"><div class="ttname"><a href="pgo_8h.html">pgo.h</a></div></div>
<div class="ttc" id="asetup-heap-internal_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> <a href="setup-heap-internal_8cc_source.html#l00126">setup-heap-internal.cc:126</a></div></div>
<div class="ttc" id="asmall-vector_8h_html"><div class="ttname"><a href="small-vector_8h.html">small-vector.h</a></div></div>
<div class="ttc" id="astd-object-sizes_8h_html"><div class="ttname"><a href="std-object-sizes_8h.html">std-object-sizes.h</a></div></div>
<div class="ttc" id="astd-object-sizes_8h_html_a56caa02a4280c4f0c82adab429400770"><div class="ttname"><a href="std-object-sizes_8h.html#a56caa02a4280c4f0c82adab429400770">UPDATE_WHEN_CLASS_CHANGES</a></div><div class="ttdeci">#define UPDATE_WHEN_CLASS_CHANGES(classname, size)</div><div class="ttdef"><b>Definition</b> <a href="std-object-sizes_8h_source.html#l00073">std-object-sizes.h:73</a></div></div>
<div class="ttc" id="astring-format_8h_html"><div class="ttname"><a href="string-format_8h.html">string-format.h</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData_html"><div class="ttname"><a href="structv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData.html">v8::internal::trap_handler::ProtectedInstructionData</a></div><div class="ttdef"><b>Definition</b> <a href="trap-handler_8h_source.html#l00095">trap-handler.h:95</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData_html_ad53ed09d9db529dc778705518be5967f"><div class="ttname"><a href="structv8_1_1internal_1_1trap__handler_1_1ProtectedInstructionData.html#ad53ed09d9db529dc778705518be5967f">v8::internal::trap_handler::ProtectedInstructionData::instr_offset</a></div><div class="ttdeci">uint32_t instr_offset</div><div class="ttdef"><b>Definition</b> <a href="trap-handler_8h_source.html#l00098">trap-handler.h:98</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html">v8::internal::wasm::ModuleWireBytes</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00986">wasm-module.h:986</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1ModuleWireBytes_html_aad25d74a24c1f21b337f94460ecc662c"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1ModuleWireBytes.html#aad25d74a24c1f21b337f94460ecc662c">v8::internal::wasm::ModuleWireBytes::GetNameOrNull</a></div><div class="ttdeci">WasmName GetNameOrNull(WireBytesRef ref) const</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8cc_source.html#l00188">wasm-module.cc:188</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html">v8::internal::wasm::NativeModule::JumpTablesRef</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00594">wasm-code-manager.h:594</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef_html_a50f3e825d91e66fe4c340debaf6fc31a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#a50f3e825d91e66fe4c340debaf6fc31a">v8::internal::wasm::NativeModule::JumpTablesRef::jump_table_start</a></div><div class="ttdeci">Address jump_table_start</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00595">wasm-code-manager.h:595</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef_html_a863fbb343af1151884091489dcb5b191"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#a863fbb343af1151884091489dcb5b191">v8::internal::wasm::NativeModule::JumpTablesRef::far_jump_table_start</a></div><div class="ttdeci">Address far_jump_table_start</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00596">wasm-code-manager.h:596</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef_html_af7c96722e3f88e952d116c817305c7bb"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1NativeModule_1_1JumpTablesRef.html#af7c96722e3f88e952d116c817305c7bb">v8::internal::wasm::NativeModule::JumpTablesRef::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00598">wasm-code-manager.h:598</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html">v8::internal::wasm::UnpublishedWasmCode</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00473">wasm-code-manager.h:473</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode_html_a4c0e64721e6f0d179c1b2151a97bbc4a"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html#a4c0e64721e6f0d179c1b2151a97bbc4a">v8::internal::wasm::UnpublishedWasmCode::kNoAssumptions</a></div><div class="ttdeci">static constexpr AssumptionsJournal * kNoAssumptions</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00477">wasm-code-manager.h:477</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode_html_a72e7efdeb49dc77769f6b99e9e904aca"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html#a72e7efdeb49dc77769f6b99e9e904aca">v8::internal::wasm::UnpublishedWasmCode::assumptions</a></div><div class="ttdeci">std::unique_ptr&lt; AssumptionsJournal &gt; assumptions</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00475">wasm-code-manager.h:475</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode_html_ad4eb73b61221a3f4358b84c8cece9809"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1UnpublishedWasmCode.html#ad4eb73b61221a3f4358b84c8cece9809">v8::internal::wasm::UnpublishedWasmCode::code</a></div><div class="ttdeci">std::unique_ptr&lt; WasmCode &gt; code</div><div class="ttdef"><b>Definition</b> <a href="wasm-code-manager_8h_source.html#l00474">wasm-code-manager.h:474</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationResult_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html">v8::internal::wasm::WasmCompilationResult</a></div><div class="ttdef"><b>Definition</b> <a href="function-compiler_8h_source.html#l00062">function-compiler.h:62</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationResult_html_a22182bebf65051a0260cbd4e9d7eccbca5bef4caf3c8a2a4189717b0fedf37d74"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html#a22182bebf65051a0260cbd4e9d7eccbca5bef4caf3c8a2a4189717b0fedf37d74">v8::internal::wasm::WasmCompilationResult::kWasmToJsWrapper</a></div><div class="ttdeci">@ kWasmToJsWrapper</div><div class="ttdef"><b>Definition</b> <a href="function-compiler_8h_source.html#l00068">function-compiler.h:68</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmCompilationResult_html_a22182bebf65051a0260cbd4e9d7eccbcababc9138086c84aecbc35644fa4e15f4"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmCompilationResult.html#a22182bebf65051a0260cbd4e9d7eccbcababc9138086c84aecbc35644fa4e15f4">v8::internal::wasm::WasmCompilationResult::kFunction</a></div><div class="ttdeci">@ kFunction</div><div class="ttdef"><b>Definition</b> <a href="function-compiler_8h_source.html#l00067">function-compiler.h:67</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDebugSymbols_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDebugSymbols.html">v8::internal::wasm::WasmDebugSymbols</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00505">wasm-module.h:505</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDebugSymbols_html_a8532d4e68c0d024103622db816fcf401ac4d77198cabac1171ccc6b233df6243f"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDebugSymbols.html#a8532d4e68c0d024103622db816fcf401ac4d77198cabac1171ccc6b233df6243f">v8::internal::wasm::WasmDebugSymbols::SourceMap</a></div><div class="ttdeci">@ SourceMap</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00507">wasm-module.h:507</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDeoptData_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDeoptData.html">v8::internal::wasm::WasmDeoptData</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-deopt-data_8h_source.html#l00024">wasm-deopt-data.h:24</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDeoptEntry_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry.html">v8::internal::wasm::WasmDeoptEntry</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-deopt-data_8h_source.html#l00035">wasm-deopt-data.h:35</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDeoptEntry_html_a54f2c5c587bb8d6ca3c718bf143aa2f4"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry.html#a54f2c5c587bb8d6ca3c718bf143aa2f4">v8::internal::wasm::WasmDeoptEntry::translation_index</a></div><div class="ttdeci">int translation_index</div><div class="ttdef"><b>Definition</b> <a href="wasm-deopt-data_8h_source.html#l00041">wasm-deopt-data.h:41</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmDeoptEntry_html_a6d04a31802433fcc5d96dee5d14242dc"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmDeoptEntry.html#a6d04a31802433fcc5d96dee5d14242dc">v8::internal::wasm::WasmDeoptEntry::bytecode_offset</a></div><div class="ttdeci">BytecodeOffset bytecode_offset</div><div class="ttdef"><b>Definition</b> <a href="wasm-deopt-data_8h_source.html#l00038">wasm-deopt-data.h:38</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html">v8::internal::wasm::WasmModule</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00686">wasm-module.h:686</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a5a60fa14372f7bc06d7d6f51d23b0bee"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a5a60fa14372f7bc06d7d6f51d23b0bee">v8::internal::wasm::WasmModule::num_declared_functions</a></div><div class="ttdeci">uint32_t num_declared_functions</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00704">wasm-module.h:704</a></div></div>
<div class="ttc" id="astructv8_1_1internal_1_1wasm_1_1WasmModule_html_a79b743888793de4a17ae53dd93988de6"><div class="ttname"><a href="structv8_1_1internal_1_1wasm_1_1WasmModule.html#a79b743888793de4a17ae53dd93988de6">v8::internal::wasm::WasmModule::functions</a></div><div class="ttdeci">std::vector&lt; WasmFunction &gt; functions</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8h_source.html#l00730">wasm-module.h:730</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a3feabb76c0ac2918798bc11ab55c6a79"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a3feabb76c0ac2918798bc11ab55c6a79">TRACE_EVENT0</a></div><div class="ttdeci">#define TRACE_EVENT0(category_group, name)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00032">trace-event-no-perfetto.h:32</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_a97689377430b094caec680dd7dd230fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#a97689377430b094caec680dd7dd230fe">TRACE_DISABLED_BY_DEFAULT</a></div><div class="ttdeci">#define TRACE_DISABLED_BY_DEFAULT(name)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00025">trace-event-no-perfetto.h:25</a></div></div>
<div class="ttc" id="atrace-event-no-perfetto_8h_html_ac437f27e15925a9bd53c69692a6c85fe"><div class="ttname"><a href="trace-event-no-perfetto_8h.html#ac437f27e15925a9bd53c69692a6c85fe">TRACE_EVENT1</a></div><div class="ttdeci">#define TRACE_EVENT1(category_group, name, arg1_name, arg1_val)</div><div class="ttdef"><b>Definition</b> <a href="trace-event-no-perfetto_8h_source.html#l00037">trace-event-no-perfetto.h:37</a></div></div>
<div class="ttc" id="aunwinding-info-win64_8h_html"><div class="ttname"><a href="unwinding-info-win64_8h.html">unwinding-info-win64.h</a></div></div>
<div class="ttc" id="avector_8h_html"><div class="ttname"><a href="vector_8h.html">vector.h</a></div></div>
<div class="ttc" id="awasm-builtin-list_8h_html"><div class="ttname"><a href="wasm-builtin-list_8h.html">wasm-builtin-list.h</a></div></div>
<div class="ttc" id="awasm-code-manager_8cc_html_a999acc4125a715214037c81dd456611d"><div class="ttname"><a href="wasm-code-manager_8cc.html#a999acc4125a715214037c81dd456611d">TRACE_HEAP</a></div><div class="ttdeci">#define TRACE_HEAP(...)</div><div class="ttdef"><b>Definition</b> <a href="#l00062">wasm-code-manager.cc:62</a></div></div>
<div class="ttc" id="awasm-code-manager_8h_html"><div class="ttname"><a href="wasm-code-manager_8h.html">wasm-code-manager.h</a></div></div>
<div class="ttc" id="awasm-code-pointer-table-inl_8h_html"><div class="ttname"><a href="wasm-code-pointer-table-inl_8h.html">wasm-code-pointer-table-inl.h</a></div></div>
<div class="ttc" id="awasm-debug_8h_html"><div class="ttname"><a href="wasm-debug_8h.html">wasm-debug.h</a></div></div>
<div class="ttc" id="awasm-deopt-data_8h_html"><div class="ttname"><a href="wasm-deopt-data_8h.html">wasm-deopt-data.h</a></div></div>
<div class="ttc" id="awasm-engine_8cc_html_a7edd6d7cb36a3ca555668ff04ed90737"><div class="ttname"><a href="wasm-engine_8cc.html#a7edd6d7cb36a3ca555668ff04ed90737">code_manager</a></div><div class="ttdeci">WasmCodeManager code_manager</div><div class="ttdef"><b>Definition</b> <a href="wasm-engine_8cc_source.html#l02074">wasm-engine.cc:2074</a></div></div>
<div class="ttc" id="awasm-engine_8h_html"><div class="ttname"><a href="wasm-engine_8h.html">wasm-engine.h</a></div></div>
<div class="ttc" id="awasm-import-wrapper-cache_8h_html"><div class="ttname"><a href="wasm-import-wrapper-cache_8h.html">wasm-import-wrapper-cache.h</a></div></div>
<div class="ttc" id="awasm-interpreter-runtime_8h_html"><div class="ttname"><a href="wasm-interpreter-runtime_8h.html">wasm-interpreter-runtime.h</a></div></div>
<div class="ttc" id="awasm-module-sourcemap_8h_html"><div class="ttname"><a href="wasm-module-sourcemap_8h.html">wasm-module-sourcemap.h</a></div></div>
<div class="ttc" id="awasm-module_8h_html"><div class="ttname"><a href="wasm-module_8h.html">wasm-module.h</a></div></div>
<div class="ttc" id="awasm-objects-inl_8h_html"><div class="ttname"><a href="wasm-objects-inl_8h.html">wasm-objects-inl.h</a></div></div>
<div class="ttc" id="awasm-objects_8h_html"><div class="ttname"><a href="wasm-objects_8h.html">wasm-objects.h</a></div></div>
<div class="ttc" id="awell-known-imports_8h_html"><div class="ttname"><a href="well-known-imports_8h.html">well-known-imports.h</a></div></div>
<div class="ttc" id="awrappers_8h_html"><div class="ttname"><a href="wrappers_8h.html">wrappers.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2b581e8501b9ee14adb2dc81ebf46f49.html">wasm</a></li><li class="navelem"><a class="el" href="wasm-code-manager_8cc.html">wasm-code-manager.cc</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
