<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>v8: src/debug/debug-scopes.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="v8.svg"/></td>
  <td id="projectalign">
   <div id="projectname">v8
   </div>
   <div id="projectbrief">V8 is Googleâ€™s open source high-performance JavaScript and WebAssembly engine, written in C++. It is used in Chrome and in Node.js, among others. It implements ECMAScript and WebAssembly, and runs on Windows, macOS, and Linux systems that use x64, IA-32, or ARM processors. V8 can be embedded into any C++ application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('debug-scopes_8cc_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">debug-scopes.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="debug-scopes_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2015 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="debug-scopes_8h.html">src/debug/debug-scopes.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="ast_2ast_8h.html">src/ast/ast.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;<a class="code" href="scopes_8h.html">src/ast/scopes.h</a>&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="common_2globals_8h.html">src/common/globals.h</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">src/debug/debug.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="frames-inl_8h.html">src/execution/frames-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="js-generator-inl_8h.html">src/objects/js-generator-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="source-text-module_8h.html">src/objects/source-text-module.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="string-set_8h.html">src/objects/string-set.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="parse-info_8h.html">src/parsing/parse-info.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="parsing_8h.html">src/parsing/parsing.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="ostreams_8h.html">src/utils/ostreams.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacev8.html">v8</a> {</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="keyword">namespace </span><a class="code hl_variable" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> {</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="foldopen" id="foldopen00024" data-start="{" data-end="}">
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#aaf7f7a0ba0261c9f5e6ecfca26534fa4">   24</a></span><a class="code hl_function" href="classv8_1_1internal_1_1ScopeIterator.html#aaf7f7a0ba0261c9f5e6ecfca26534fa4">ScopeIterator::ScopeIterator</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1FrameInspector.html">FrameInspector</a>* frame_inspector,</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>                             <a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93">ReparseStrategy</a> strategy)</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    : isolate_(isolate),</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>      frame_inspector_(frame_inspector),</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>      function_(frame_inspector_-&gt;GetFunction()),</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>      script_(frame_inspector_-&gt;GetScript()),</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>      locals_(<a class="code hl_class" href="classv8_1_1internal_1_1StringSet.html">StringSet</a>::New(isolate)) {</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>  <span class="keywordflow">if</span> (!IsContext(*frame_inspector-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1FrameInspector.html#af1a0a03aed11e26d0f38775c535d3f47">GetContext</a>())) {</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="comment">// Optimized frame, context or function cannot be materialized. Give up.</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    return;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>  }</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>  context_ = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Context&gt;</a>(frame_inspector-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1FrameInspector.html#af1a0a03aed11e26d0f38775c535d3f47">GetContext</a>());</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>#<span class="keywordflow">if</span> V8_ENABLE_WEBASSEMBLY</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>  <span class="comment">// We should not instantiate a ScopeIterator for wasm frames.</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>  <a class="code hl_define" href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a>(Script::Type::kWasm, frame_inspector-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1FrameInspector.html#adb54fdb812082599cc9445a1da0f3028">GetScript</a>()-&gt;type());</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>#endif  <span class="comment">// V8_ENABLE_WEBASSEMBLY</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  TryParseAndRetrieveScopes(strategy);</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>}</div>
</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><a class="code hl_function" href="classv8_1_1internal_1_1ScopeIterator.html#a3c78ace26407f6258f68b1a735ffa125">ScopeIterator::~ScopeIterator</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="foldopen" id="foldopen00047" data-start="{" data-end="}">
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a0834abbe5bc848c2a0471454fc933196">   47</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Object&gt;</a> <a class="code hl_function" href="classv8_1_1internal_1_1ScopeIterator.html#a0834abbe5bc848c2a0471454fc933196">ScopeIterator::GetFunctionDebugName</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  <span class="keywordflow">if</span> (!function_.is_null()) <span class="keywordflow">return</span> <a class="code hl_function" href="classv8_1_1internal_1_1JSFunction.html#a3b988f501486ef2d8d553bcbff31b6ca">JSFunction::GetDebugName</a>(function_);</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  <span class="keywordflow">if</span> (!IsNativeContext(*context_)) {</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <a class="code hl_class" href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">DisallowGarbageCollection</a> no_gc;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">Tagged&lt;ScopeInfo&gt;</a> closure_info = context_-&gt;closure_context()-&gt;scope_info();</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;String&gt;</a> debug_name(closure_info-&gt;FunctionDebugName(), isolate_);</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="keywordflow">if</span> (debug_name-&gt;length() &gt; 0) <span class="keywordflow">return</span> debug_name;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>  }</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  <span class="keywordflow">return</span> isolate_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#ab7dd326c7e0e0d5d2cba90947b2ef48b">factory</a>()-&gt;undefined_value();</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>}</div>
</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="foldopen" id="foldopen00059" data-start="{" data-end="}">
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a33e8dca5625bb6ccee688e56c35d4e2b">   59</a></span><a class="code hl_function" href="classv8_1_1internal_1_1ScopeIterator.html#aaf7f7a0ba0261c9f5e6ecfca26534fa4">ScopeIterator::ScopeIterator</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>                             <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> function)</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    : isolate_(isolate),</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>      context_(function-&gt;<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>(), isolate),</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>      locals_(<a class="code hl_class" href="classv8_1_1internal_1_1StringSet.html">StringSet</a>::New(isolate)) {</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <span class="keywordflow">if</span> (!function-&gt;shared()-&gt;IsSubjectToDebugging()) {</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    context_ = Handle&lt;Context&gt;();</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    return;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>  }</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  script_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Script&gt;</a>(function-&gt;shared()-&gt;script()), isolate);</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>  UnwrapEvaluationContext();</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>}</div>
</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="foldopen" id="foldopen00072" data-start="{" data-end="}">
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#aa907674d0b32aa78a7629387d252bd9d">   72</a></span><a class="code hl_function" href="classv8_1_1internal_1_1ScopeIterator.html#aaf7f7a0ba0261c9f5e6ecfca26534fa4">ScopeIterator::ScopeIterator</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">Isolate</a>* isolate,</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>                             <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;JSGeneratorObject&gt;</a> generator)</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    : isolate_(isolate),</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>      generator_(generator),</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>      function_(generator-&gt;function(), isolate),</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>      context_(generator-&gt;<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>(), isolate),</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>      script_(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast</a>&lt;<a class="code hl_class" href="classv8_1_1internal_1_1Script.html">Script</a>&gt;(function_-&gt;shared()-&gt;script()), isolate),</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>      locals_(<a class="code hl_class" href="classv8_1_1internal_1_1StringSet.html">StringSet</a>::New(isolate)) {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(function_-&gt;shared()-&gt;IsSubjectToDebugging());</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  TryParseAndRetrieveScopes(<a class="code hl_enumvalue" href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93a0c248763ed3cd57e6b5d431d558e9e19">ReparseStrategy::kFunctionLiteral</a>);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>}</div>
</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="foldopen" id="foldopen00084" data-start="{" data-end="}">
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#af25c584be732d14796c40dbe1a85c171">   84</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classv8_1_1internal_1_1ScopeIterator.html#af25c584be732d14796c40dbe1a85c171">ScopeIterator::Restart</a>() {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(frame_inspector_);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  function_ = frame_inspector_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1FrameInspector.html#a6f06811920232e42b76622b9bd4bf184">GetFunction</a>();</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  context_ = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Context&gt;</a>(frame_inspector_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1FrameInspector.html#af1a0a03aed11e26d0f38775c535d3f47">GetContext</a>());</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  current_scope_ = start_scope_;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(current_scope_);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  UnwrapEvaluationContext();</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  seen_script_scope_ = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  calculate_blocklists_ = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>}</div>
</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">// Takes the scope of a parsed script, a function and a break location</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">// inside the function. The result is the innermost lexical scope around</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">// the break point, which serves as the starting point of the ScopeIterator.</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">// And the scope of the function that was passed in (called closure scope).</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">//</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment">// The start scope is guaranteed to be either the closure scope itself,</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment">// or a child of the closure scope.</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="keyword">class </span>ScopeChainRetriever {</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  ScopeChainRetriever(<a class="code hl_class" href="classv8_1_1internal_1_1DeclarationScope.html">DeclarationScope</a>* scope,</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>                      <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSFunction&gt;</a> function, <span class="keywordtype">int</span> <a class="code hl_variable" href="liveedit_8cc.html#a401e942526aac47cef94f478182486e7">position</a>)</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>      : scope_(scope),</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        break_scope_start_(function-&gt;shared()-&gt;StartPosition()),</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        break_scope_end_(function-&gt;shared()-&gt;EndPosition()),</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        break_scope_type_(function-&gt;shared()-&gt;scope_info()-&gt;scope_type()),</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        position_(<a class="code hl_variable" href="liveedit_8cc.html#a401e942526aac47cef94f478182486e7">position</a>) {</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(scope);</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    RetrieveScopes();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>  DeclarationScope* ClosureScope() { <span class="keywordflow">return</span> closure_scope_; }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>  Scope* StartScope() { <span class="keywordflow">return</span> start_scope_; }</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  DeclarationScope* scope_;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> break_scope_start_;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> break_scope_end_;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  <span class="keyword">const</span> <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850">ScopeType</a> break_scope_type_;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> position_;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>  DeclarationScope* closure_scope_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  Scope* start_scope_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  <span class="keywordtype">void</span> RetrieveScopes() {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="comment">// 1. Find the closure scope with a DFS.</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    RetrieveClosureScope(scope_);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(closure_scope_);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// 2. Starting from the closure scope search inwards. Given that V8&#39;s scope</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="comment">//    tree doesn&#39;t guarantee that siblings don&#39;t overlap, we look at all</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="comment">//    scopes and pick the one with the tightest bounds around `position_`.</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    start_scope_ = closure_scope_;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    RetrieveStartScope(closure_scope_);</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(start_scope_);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="keywordtype">bool</span> RetrieveClosureScope(Scope* scope) {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="comment">// The closure scope is the scope that matches exactly the function we</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="comment">// paused in.</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="comment">// Note that comparing the position alone is not enough and we also need to</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="comment">// match the scope type. E.g. class member initializer have the exact same</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">// scope positions as their class scope.</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="keywordflow">if</span> (break_scope_type_ == scope-&gt;scope_type() &amp;&amp;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        break_scope_start_ == scope-&gt;start_position() &amp;&amp;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        break_scope_end_ == scope-&gt;end_position()) {</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>      closure_scope_ = scope-&gt;AsDeclarationScope();</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="keywordflow">for</span> (Scope* inner_scope = scope-&gt;inner_scope(); inner_scope != <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>         inner_scope = inner_scope-&gt;sibling()) {</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>      <span class="keywordflow">if</span> (RetrieveClosureScope(inner_scope)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    }</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>  }</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>  <span class="keywordtype">void</span> RetrieveStartScope(Scope* scope) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = scope-&gt;start_position();</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> = scope-&gt;end_position();</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="comment">// Update start_scope_ if scope contains `position_` and scope is a tighter</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="comment">// fit than the currently set start_scope_.</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="comment">// Generators have the same source position so we also check for equality.</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="keywordflow">if</span> (ContainsPosition(scope) &amp;&amp; <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> &gt;= start_scope_-&gt;start_position() &amp;&amp;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end &lt;= start_scope_-&gt;</a>end_position()) {</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>      start_scope_ = scope;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    }</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordflow">for</span> (Scope* inner_scope = scope-&gt;inner_scope(); inner_scope != <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>         inner_scope = inner_scope-&gt;sibling()) {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>      RetrieveStartScope(inner_scope);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  <span class="keywordtype">bool</span> ContainsPosition(Scope* scope) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> = scope-&gt;start_position();</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> = scope-&gt;end_position();</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="comment">// In case the closure_scope_ hasn&#39;t been found yet, we are less strict</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="comment">// about recursing downwards. This might be the case for nested arrow</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="comment">// functions that have the same end position.</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> position_fits_end =</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        closure_scope_ ? position_ &lt; <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a> : position_ &lt;= <a class="code hl_variable" href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="comment">// While we&#39;re evaluating a class, the calling function will have a class</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="comment">// context on the stack with a range that starts at Token::kClass, and the</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="comment">// source position will also point to Token::kClass.  To identify the</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// matching scope we include start in the accepted range for class scopes.</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="comment">// Similarly &quot;with&quot; scopes can already have bytecodes where the source</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="comment">// position points to the closing parenthesis with the &quot;with&quot; context</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="comment">// already pushed.</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> position_fits_start =</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        scope-&gt;is_class_scope() || scope-&gt;is_with_scope() ? <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> &lt;= position_</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>                                                          : <a class="code hl_variable" href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a> &lt; position_;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <span class="keywordflow">return</span> position_fits_start &amp;&amp; position_fits_end;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  }</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>};</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment">// Walks a ScopeInfo outwards until it finds a EVAL scope.</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>MaybeHandle&lt;ScopeInfo&gt; FindEvalScope(Isolate* isolate,</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>                                     <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;ScopeInfo&gt;</a> start_scope) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">Tagged&lt;ScopeInfo&gt;</a> scope = start_scope;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  <span class="keywordflow">while</span> (scope-&gt;scope_type() != <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a48625ba91413781664475508a89a23c4">ScopeType::EVAL_SCOPE</a> &amp;&amp;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>         scope-&gt;HasOuterScopeInfo()) {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    scope = scope-&gt;OuterScopeInfo();</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>  }</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  <span class="keywordflow">return</span> scope-&gt;scope_type() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a48625ba91413781664475508a89a23c4">ScopeType::EVAL_SCOPE</a></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>             ? MaybeHandle&lt;ScopeInfo&gt;(scope, isolate)</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>             : <a class="code hl_variable" href="namespacev8_1_1internal.html#a12bba79f0b2c466b43e23e173e34465d">kNullMaybeHandle</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>}</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="keywordtype">void</span> ScopeIterator::TryParseAndRetrieveScopes(ReparseStrategy strategy) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  <span class="comment">// Catch the case when the debugger stops in an internal function.</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  DirectHandle&lt;SharedFunctionInfo&gt; shared_info(function_-&gt;shared(), isolate_);</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  DirectHandle&lt;ScopeInfo&gt; scope_info(shared_info-&gt;scope_info(), isolate_);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="keywordflow">if</span> (IsUndefined(shared_info-&gt;script(), isolate_)) {</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    current_scope_ = closure_scope_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    context_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(function_-&gt;context(), isolate_);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    function_ = Handle&lt;JSFunction&gt;();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  }</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  <span class="keywordtype">bool</span> ignore_nested_scopes = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  <span class="keywordflow">if</span> (shared_info-&gt;HasBreakInfo(isolate_) &amp;&amp; frame_inspector_ != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <span class="comment">// The source position at return is always the end of the function,</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    <span class="comment">// which is not consistent with the current scope chain. Therefore all</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="comment">// nested with, catch and block contexts are skipped, and we can only</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <span class="comment">// inspect the function scope.</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <span class="comment">// This can only happen if we set a break point inside right before the</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <span class="comment">// return, which requires a debug info to be available.</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    Handle&lt;DebugInfo&gt; debug_info(shared_info-&gt;GetDebugInfo(isolate_), isolate_);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <span class="comment">// Find the break point where execution has stopped.</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    BreakLocation location = <a class="code hl_function" href="classv8_1_1internal_1_1BreakLocation.html#ae044ee54e8b28e0325c040be247a3c7d">BreakLocation::FromFrame</a>(debug_info, GetFrame());</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    ignore_nested_scopes = location.IsReturn();</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span> </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  <span class="keywordflow">if</span> (strategy == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93a4f28e520880eb866c33c3e0afcb42c31">ReparseStrategy::kScriptIfNeeded</a>) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">Tagged&lt;Object&gt;</a> maybe_block_list =</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        isolate_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#ae01a862c4a250dfb81b055ffd631f4b7">LocalsBlockListCacheGet</a>(scope_info);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    calculate_blocklists_ = IsTheHole(maybe_block_list);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    strategy = calculate_blocklists_ ? <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93a4f28e520880eb866c33c3e0afcb42c31">ReparseStrategy::kScriptIfNeeded</a></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                                     : <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93a0c248763ed3cd57e6b5d431d558e9e19">ReparseStrategy::kFunctionLiteral</a>;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>  <span class="comment">// Reparse the code and analyze the scopes.</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>  <span class="comment">// Depending on the choosen strategy, the whole script or just</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  <span class="comment">// the closure is re-parsed for function scopes.</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>  DirectHandle&lt;Script&gt; <a class="code hl_variable" href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">script</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">Cast&lt;Script&gt;</a>(shared_info-&gt;script()), isolate_);</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <span class="comment">// Pick between flags for a single function compilation, or an eager</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  <span class="comment">// compilation of the whole script.</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  UnoptimizedCompileFlags <a class="code hl_variable" href="namespacev8_1_1internal.html#a62f9ba01cabe0363e57940200d641ea5">flags</a> =</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>      (scope_info-&gt;scope_type() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a01dbdbdc814f90f2abce96c42cf80b97">FUNCTION_SCOPE</a> &amp;&amp;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>       strategy == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93a0c248763ed3cd57e6b5d431d558e9e19">ReparseStrategy::kFunctionLiteral</a>)</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>          ? <a class="code hl_function" href="classv8_1_1internal_1_1UnoptimizedCompileFlags.html#a3cb3b587fdfdd6ccefbbbaad67211fda">UnoptimizedCompileFlags::ForFunctionCompile</a>(isolate_, *shared_info)</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>          : UnoptimizedCompileFlags::ForScriptCompile(isolate_, *script)</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                .set_is_eager(true);</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a62f9ba01cabe0363e57940200d641ea5">flags</a>.set_is_reparse(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span> </div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  MaybeDirectHandle&lt;ScopeInfo&gt; maybe_outer_scope;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#a62f9ba01cabe0363e57940200d641ea5">flags</a>.is_toplevel() &amp;&amp;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>      script-&gt;compilation_type() == <a class="code hl_enumvalue" href="classv8_1_1internal_1_1Script.html#ad5ba2ef0105d489f8e29013ad262f584af235d200c1777ea71eaa75068ce89b3d">Script::CompilationType::kEval</a>) {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">// Re-parsing a full eval script requires us to correctly set the outer</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="comment">// language mode and potentially an outer scope info.</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="comment">// We walk the runtime scope chain and look for an EVAL scope. If we don&#39;t</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="comment">// find one, we assume sloppy mode and no outer scope info.</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    DCHECK(flags.is_eval());</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    DirectHandle&lt;ScopeInfo&gt; eval_scope;</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    if (FindEvalScope(isolate_, *scope_info).ToHandle(&amp;eval_scope)) {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>      flags.set_outer_language_mode(eval_scope-&gt;language_mode());</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>      if (eval_scope-&gt;HasOuterScopeInfo()) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        maybe_outer_scope =</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>            direct_handle(eval_scope-&gt;OuterScopeInfo(), isolate_);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>      }</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>      DCHECK_EQ(flags.outer_language_mode(), LanguageMode::kSloppy);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>      DCHECK(maybe_outer_scope.is_null());</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    }</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scope_info-&gt;scope_type() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a48625ba91413781664475508a89a23c4">EVAL_SCOPE</a> || script-&gt;is_wrapped()) {</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    flags.set_is_eval(true);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    if (!IsNativeContext(*context_)) {</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>      maybe_outer_scope = direct_handle(context_-&gt;scope_info(), isolate_);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="comment">// Language mode may be inherited from the eval caller.</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="comment">// Retrieve it from shared function info.</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <a class="code hl_variable" href="namespacev8_1_1internal.html#a62f9ba01cabe0363e57940200d641ea5">flags</a>.set_outer_language_mode(shared_info-&gt;language_mode());</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scope_info-&gt;scope_type() == MODULE_SCOPE) {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    DCHECK(script-&gt;origin_options().IsModule());</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    DCHECK(flags.is_module());</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    DCHECK(scope_info-&gt;is_script_scope() ||</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>           scope_info-&gt;scope_type() == FUNCTION_SCOPE);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>  }</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>  UnoptimizedCompileState compile_state;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  reusable_compile_state_ =</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>      std::make_unique&lt;ReusableUnoptimizedCompileState&gt;(isolate_);</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  info_ = std::make_unique&lt;ParseInfo&gt;(isolate_, <a class="code hl_function" href="flag-definitions_8h.html#af0832cf93cb1767d6e6e287bb7dcdf72">flags</a>, &amp;compile_state,</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                                      reusable_compile_state_.get());</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> parse_result =</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>      <a class="code hl_function" href="flag-definitions_8h.html#af0832cf93cb1767d6e6e287bb7dcdf72">flags</a>.is_toplevel()</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>          ? parsing::ParseProgram(info_.get(), script, maybe_outer_scope,</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                                  isolate_, parsing::ReportStatisticsMode::kNo)</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>          : parsing::ParseFunction(info_.get(), shared_info, isolate_,</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                                   parsing::ReportStatisticsMode::kNo);</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  if (parse_result) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    DeclarationScope* literal_scope = info_-&gt;literal()-&gt;scope();</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    ScopeChainRetriever scope_chain_retriever(literal_scope, function_,</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>                                              <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a89b347b3e67ac1ee47f64bc98acb37b0">GetSourcePosition</a>());</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    start_scope_ = scope_chain_retriever.StartScope();</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    current_scope_ = start_scope_;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="comment">// In case of a FUNCTION_SCOPE, the ScopeIterator expects</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="comment">// {closure_scope_} to be set to the scope of the function.</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    closure_scope_ = scope_info-&gt;scope_type() == <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a01dbdbdc814f90f2abce96c42cf80b97">FUNCTION_SCOPE</a></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                         ? scope_chain_retriever.ClosureScope()</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                         : literal_scope;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keywordflow">if</span> (ignore_nested_scopes) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>      current_scope_ = closure_scope_;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>      start_scope_ = current_scope_;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>      <span class="comment">// ignore_nested_scopes is only used for the return-position breakpoint,</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>      <span class="comment">// so we can safely assume that the closure context for the current</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>      <span class="comment">// function exists if it needs one.</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>      <span class="keywordflow">if</span> (closure_scope_-&gt;NeedsContext()) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        context_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(context_-&gt;closure_context(), isolate_);</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>      }</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span> </div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    MaybeCollectAndStoreLocalBlocklists();</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    UnwrapEvaluationContext();</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="comment">// A failed reparse indicates that the preparser has diverged from the</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="comment">// parser, that the preparse data given to the initial parse was faulty, or</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="comment">// a stack overflow.</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="comment">// TODO(leszeks): This error is pretty unexpected, so we could report the</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="comment">// error in debug mode. Better to not fail in release though, in case it&#39;s</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="comment">// just a stack overflow.</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span> </div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="comment">// Silently fail by presenting an empty context chain.</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    context_ = Handle&lt;Context&gt;();</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>  }</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>}</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="keywordtype">void</span> ScopeIterator::UnwrapEvaluationContext() {</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>  <span class="keywordflow">if</span> (!context_-&gt;IsDebugEvaluateContext()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>  Tagged&lt;Context&gt; current = *context_;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    Tagged&lt;Object&gt; wrapped = current-&gt;get(Context::WRAPPED_CONTEXT_INDEX);</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keywordflow">if</span> (IsContext(wrapped)) {</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>      current = Cast&lt;Context&gt;(wrapped);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!current-&gt;previous().is_null());</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>      current = current-&gt;previous();</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>  } <span class="keywordflow">while</span> (current-&gt;IsDebugEvaluateContext());</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>  context_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(current, isolate_);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>}</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span> </div>
<div class="foldopen" id="foldopen00377" data-start="{" data-end="}">
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a0121c161a7e866f462cc8ca5e14acfdc">  377</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;JSObject&gt;</a> ScopeIterator::MaterializeScopeDetails() {</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>  <span class="comment">// Calculate the size of the result.</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;FixedArray&gt;</a> details =</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>      isolate_-&gt;factory()-&gt;NewFixedArray(kScopeDetailsSize);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>  <span class="comment">// Fill in scope details.</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>  details-&gt;set(kScopeDetailsTypeIndex, Smi::FromInt(<a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>()));</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;JSObject&gt;</a> scope_object = ScopeObject(Mode::ALL);</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>  details-&gt;set(kScopeDetailsObjectIndex, *scope_object);</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>() == ScopeTypeGlobal || <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>() == ScopeTypeScript) {</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keywordflow">return</span> isolate_-&gt;factory()-&gt;NewJSArrayWithElements(details);</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HasContext()) {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> closure_name = GetFunctionDebugName();</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    details-&gt;set(kScopeDetailsNameIndex, *closure_name);</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    details-&gt;set(kScopeDetailsStartPositionIndex,</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>                 Smi::FromInt(start_position()));</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    details-&gt;set(kScopeDetailsEndPositionIndex, Smi::FromInt(end_position()));</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="keywordflow">if</span> (InInnerScope()) {</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>      details-&gt;set(kScopeDetailsFunctionIndex, *function_);</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    }</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>  }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>  <span class="keywordflow">return</span> isolate_-&gt;factory()-&gt;NewJSArrayWithElements(details);</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>}</div>
</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="foldopen" id="foldopen00400" data-start="{" data-end="}">
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a3d866a445735e979e6afa50b35a17f40">  400</a></span><span class="keywordtype">bool</span> ScopeIterator::HasPositionInfo() {</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>  <span class="keywordflow">return</span> InInnerScope() || !IsNativeContext(*context_);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>}</div>
</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="foldopen" id="foldopen00404" data-start="{" data-end="}">
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a012a2c82fb92603af9193ac11c2e69bd">  404</a></span><span class="keywordtype">int</span> ScopeIterator::start_position() {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>  <span class="keywordflow">if</span> (InInnerScope()) <span class="keywordflow">return</span> current_scope_-&gt;start_position();</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>  <span class="keywordflow">if</span> (IsNativeContext(*context_)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>  <span class="keywordflow">return</span> context_-&gt;closure_context()-&gt;scope_info()-&gt;StartPosition();</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>}</div>
</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="foldopen" id="foldopen00410" data-start="{" data-end="}">
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a2f0266a6ecdc8d96ce680b01933e8c1c">  410</a></span><span class="keywordtype">int</span> ScopeIterator::end_position() {</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  <span class="keywordflow">if</span> (InInnerScope()) <span class="keywordflow">return</span> current_scope_-&gt;end_position();</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  <span class="keywordflow">if</span> (IsNativeContext(*context_)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>  <span class="keywordflow">return</span> context_-&gt;closure_context()-&gt;scope_info()-&gt;EndPosition();</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>}</div>
</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="foldopen" id="foldopen00416" data-start="{" data-end="}">
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a057a1669d94e05d85b396db58fac86d2">  416</a></span><span class="keywordtype">bool</span> ScopeIterator::DeclaresLocals(<a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#a7bb5a41d9fc691a5e09db08f7592d19b">Mode</a> mode)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>  <a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#aa4aa3e4d41cb6ce47ec9df9a056fc49b">ScopeType</a> type = <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>();</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span> </div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>  <span class="keywordflow">if</span> (type == ScopeTypeWith) <span class="keywordflow">return</span> mode == Mode::ALL;</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>  <span class="keywordflow">if</span> (type == ScopeTypeGlobal) <span class="keywordflow">return</span> mode == Mode::ALL;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>  <span class="keywordtype">bool</span> declares_local = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>  <span class="keyword">auto</span> visitor = [&amp;](<a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;String&gt;</a> <a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>, <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code hl_variable" href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a>,</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>                     <a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#aa4aa3e4d41cb6ce47ec9df9a056fc49b">ScopeType</a> scope_type) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    declares_local = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>  };</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>  VisitScope(visitor, mode);</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>  <span class="keywordflow">return</span> declares_local;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>}</div>
</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span> </div>
<div class="foldopen" id="foldopen00432" data-start="{" data-end="}">
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a6fd52d262ef52b8984eae35b865e825d">  432</a></span><span class="keywordtype">bool</span> ScopeIterator::HasContext()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>  <span class="keywordflow">return</span> !InInnerScope() || <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>();</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>}</div>
</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span> </div>
<div class="foldopen" id="foldopen00436" data-start="{" data-end="}">
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a471b1432bb2395f853cf1c2ab3f32b8e">  436</a></span><span class="keywordtype">bool</span> ScopeIterator::NeedsContext()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> needs_context = current_scope_-&gt;NeedsContext();</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  <span class="comment">// We try very hard to ensure that a function&#39;s context is already</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>  <span class="comment">// available when we pause right at the beginning of that function.</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>  <span class="comment">// This can be tricky when we pause via stack check or via</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <span class="comment">// `BreakOnNextFunctionCall`, which happens normally in the middle of frame</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>  <span class="comment">// construction and we have to &quot;step into&quot; the function first.</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>  <span class="comment">//</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>  <span class="comment">// We check this by ensuring that the current context is not the closure</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  <span class="comment">// context should the function need one. In that case the function has already</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  <span class="comment">// pushed the context and we are good.</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>  <a class="code hl_define" href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(needs_context &amp;&amp; current_scope_ == closure_scope_ &amp;&amp;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                    current_scope_-&gt;is_function_scope() &amp;&amp; !function_.is_null(),</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                function_-&gt;context() != *context_);</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span> </div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>  <span class="keywordflow">return</span> needs_context;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>}</div>
</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span><span class="keywordtype">bool</span> ScopeIterator::AdvanceOneScope() {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keywordflow">if</span> (!current_scope_ || !current_scope_-&gt;outer_scope()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span> </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>  current_scope_ = current_scope_-&gt;outer_scope();</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>  CollectLocalsFromCurrentScope();</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>}</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span><span class="keywordtype">void</span> ScopeIterator::AdvanceOneContext() {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsNativeContext(*context_));</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!context_-&gt;previous().is_null());</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>  context_ = handle(context_-&gt;previous(), isolate_);</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>  <span class="comment">// The locals blocklist is always associated with a context. So when we</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>  <span class="comment">// move one context up, we also reset the locals_ blocklist.</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>  locals_ = StringSet::New(isolate_);</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>}</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span> </div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span><span class="keywordtype">void</span> ScopeIterator::AdvanceScope() {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(InInnerScope());</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span> </div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="keywordflow">if</span> (NeedsContext()) {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>      <span class="comment">// current_scope_ needs a context so moving one scope up requires us to</span></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>      <span class="comment">// also move up one context.</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>      AdvanceOneContext();</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(AdvanceOneScope());</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  } <span class="keywordflow">while</span> (current_scope_-&gt;is_hidden());</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>}</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span><span class="keywordtype">void</span> ScopeIterator::AdvanceContext() {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>  AdvanceOneContext();</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>  <span class="comment">// While advancing one context, we need to advance at least one</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>  <span class="comment">// scope, but until we hit the next scope that actually requires</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>  <span class="comment">// a context. All the locals collected along the way build the</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>  <span class="comment">// blocklist for debug-evaluate for this context.</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>  <span class="keywordflow">while</span> (AdvanceOneScope() &amp;&amp; !<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>()) {</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>  }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>}</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span> </div>
<div class="foldopen" id="foldopen00498" data-start="{" data-end="}">
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a6f0a4ba9b811b41b1ced4133686a89b5">  498</a></span><span class="keywordtype">void</span> ScopeIterator::Next() {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!Done());</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>  <a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#aa4aa3e4d41cb6ce47ec9df9a056fc49b">ScopeType</a> scope_type = <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>();</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>  <span class="keywordflow">if</span> (scope_type == ScopeTypeGlobal) {</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <span class="comment">// The global scope is always the last in the chain.</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsNativeContext(*context_));</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    context_ = <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;Context&gt;</a>();</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(Done());</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>  }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>  <span class="keywordtype">bool</span> leaving_closure = current_scope_ == closure_scope_;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>  <span class="keywordflow">if</span> (scope_type == ScopeTypeScript) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(InInnerScope() &amp;&amp; !leaving_closure,</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>                   current_scope_-&gt;is_script_scope());</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    seen_script_scope_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordflow">if</span> (context_-&gt;IsScriptContext()) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>      context_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(context_-&gt;previous(), isolate_);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    }</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!InInnerScope()) {</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    AdvanceContext();</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <a class="code hl_define" href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a>(current_scope_);</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    AdvanceScope();</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="keywordflow">if</span> (leaving_closure) {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(current_scope_ != closure_scope_);</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>      <span class="comment">// If the current_scope_ doesn&#39;t need a context, we advance the scopes</span></div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>      <span class="comment">// and collect the blocklist along the way until we find the scope</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>      <span class="comment">// that should match `context_`.</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>      <span class="comment">// But only do this if we have complete scope information.</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>      <span class="keywordflow">while</span> (!<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>() &amp;&amp; AdvanceOneScope()) {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>      }</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    }</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>  }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>  MaybeCollectAndStoreLocalBlocklists();</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>  UnwrapEvaluationContext();</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  <span class="keywordflow">if</span> (leaving_closure) function_ = <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;JSFunction&gt;</a>();</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>}</div>
</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span> </div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span><span class="comment">// Return the type of the current scope.</span></div>
<div class="foldopen" id="foldopen00544" data-start="{" data-end="}">
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a51e0c1201f011191ac3a5ad1ed2fd59b">  544</a></span><a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#aa4aa3e4d41cb6ce47ec9df9a056fc49b">ScopeIterator::ScopeType</a> ScopeIterator::Type()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!Done());</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>  <span class="keywordflow">if</span> (InInnerScope()) {</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keywordflow">switch</span> (current_scope_-&gt;scope_type()) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a01dbdbdc814f90f2abce96c42cf80b97">FUNCTION_SCOPE</a>:</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>(), context_-&gt;IsFunctionContext() ||</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>                                           context_-&gt;IsDebugEvaluateContext());</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        <span class="keywordflow">return</span> ScopeTypeLocal;</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a62f6317b08d0d6c179c985998226c669">MODULE_SCOPE</a>:</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>(), context_-&gt;IsModuleContext());</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        <span class="keywordflow">return</span> ScopeTypeModule;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850aeca1dc44304ca2fbbeeb1b11170c3504">SCRIPT_SCOPE</a>:</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a1a3a40723f13aae390bec0a88db3aed1">REPL_MODE_SCOPE</a>:</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>(), context_-&gt;IsScriptContext() ||</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>                                           IsNativeContext(*context_));</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        <span class="keywordflow">return</span> ScopeTypeScript;</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850ae1109491a5aa875d1cc5c3806f9b7ab3">WITH_SCOPE</a>:</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>(), context_-&gt;IsWithContext());</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <span class="keywordflow">return</span> ScopeTypeWith;</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850aa1dc2a583fc19c3636a1c599cda82622">CATCH_SCOPE</a>:</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(context_-&gt;IsCatchContext());</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <span class="keywordflow">return</span> ScopeTypeCatch;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850ae893dcd5397cf8fcb11a338ce04fa20c">BLOCK_SCOPE</a>:</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a455641193d5c4107e97b27e6b13bdd44">CLASS_SCOPE</a>:</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>(), context_-&gt;IsBlockContext());</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="keywordflow">return</span> ScopeTypeBlock;</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a48625ba91413781664475508a89a23c4">EVAL_SCOPE</a>:</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>(), context_-&gt;IsEvalContext());</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        <span class="keywordflow">return</span> ScopeTypeEval;</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>      <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a5df1961722ddf2189cc3dedc749c1ec9">SHADOW_REALM_SCOPE</a>:</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>        <a class="code hl_define" href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a>(<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>(), IsNativeContext(*context_));</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>        <span class="comment">// TODO(v8:11989): New ScopeType for ShadowRealms?</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        <span class="keywordflow">return</span> ScopeTypeScript;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    }</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>  }</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>  <span class="keywordflow">if</span> (IsNativeContext(*context_)) {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsJSGlobalObject(context_-&gt;global_object()));</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <span class="comment">// If we are at the native context and have not yet seen script scope,</span></div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    <span class="comment">// fake it.</span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="keywordflow">return</span> seen_script_scope_ ? ScopeTypeGlobal : ScopeTypeScript;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>  <span class="keywordflow">if</span> (context_-&gt;IsFunctionContext() || context_-&gt;IsEvalContext() ||</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>      context_-&gt;IsDebugEvaluateContext()) {</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="keywordflow">return</span> ScopeTypeClosure;</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>  }</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  <span class="keywordflow">if</span> (context_-&gt;IsCatchContext()) {</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <span class="keywordflow">return</span> ScopeTypeCatch;</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>  }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  <span class="keywordflow">if</span> (context_-&gt;IsBlockContext()) {</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    <span class="keywordflow">return</span> ScopeTypeBlock;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>  }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>  <span class="keywordflow">if</span> (context_-&gt;IsModuleContext()) {</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="keywordflow">return</span> ScopeTypeModule;</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>  }</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>  <span class="keywordflow">if</span> (context_-&gt;IsScriptContext()) {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    <span class="keywordflow">return</span> ScopeTypeScript;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>  }</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(context_-&gt;IsWithContext());</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>  <span class="keywordflow">return</span> ScopeTypeWith;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>}</div>
</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="foldopen" id="foldopen00606" data-start="{" data-end="}">
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a07d266a915b7450709f23c56c5e8a05b">  606</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;JSObject&gt;</a> ScopeIterator::ScopeObject(<a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#a7bb5a41d9fc691a5e09db08f7592d19b">Mode</a> mode) {</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!Done());</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span> </div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  <a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#aa4aa3e4d41cb6ce47ec9df9a056fc49b">ScopeType</a> type = <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>();</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>  <span class="keywordflow">if</span> (type == ScopeTypeGlobal) {</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(Mode::ALL, mode);</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(context_-&gt;global_proxy(), isolate_);</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>  }</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>  <span class="keywordflow">if</span> (type == ScopeTypeWith) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(Mode::ALL, mode);</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="keywordflow">return</span> WithContextExtension();</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>  }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;JSObject&gt;</a> scope = isolate_-&gt;factory()-&gt;NewSlowJSObjectWithNullProto();</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>  <span class="keyword">auto</span> visitor = [=, <span class="keyword">this</span>](<a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;String&gt;</a> <a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>,</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>                           <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> <a class="code hl_variable" href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a>, <a class="code hl_enumeration" href="classv8_1_1internal_1_1ScopeIterator.html#aa4aa3e4d41cb6ce47ec9df9a056fc49b">ScopeType</a> scope_type) {</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="keywordflow">if</span> (IsOptimizedOut(*value, isolate_)) {</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>      JSObject::SetAccessor(</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>          scope, name, isolate_-&gt;factory()-&gt;value_unavailable_accessor(), <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370">NONE</a>)</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>          .Check();</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsTheHole(*value, isolate_)) {</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> is_overriden_repl_let =</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>          scope_type == ScopeTypeScript &amp;&amp;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>          JSReceiver::HasOwnProperty(isolate_, scope, name).FromMaybe(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>      <span class="keywordflow">if</span> (!is_overriden_repl_let) {</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        <span class="comment">// We also use the hole to represent overridden let-declarations via</span></div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        <span class="comment">// REPL mode in a script context. Don&#39;t install the unavailable accessor</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        <span class="comment">// in that case.</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        JSObject::SetAccessor(scope, name,</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                              isolate_-&gt;factory()-&gt;value_unavailable_accessor(),</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>                              <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370">NONE</a>)</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>            .Check();</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>      }</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>      <span class="comment">// Overwrite properties. Sometimes names in the same scope can collide,</span></div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>      <span class="comment">// e.g. with extension objects introduced via local eval.</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>      Object::SetPropertyOrElement(isolate_, scope, name, value,</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>                                   Just(ShouldThrow::kDontThrow))</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>          .Check();</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    }</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>  };</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span> </div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>  VisitScope(visitor, mode);</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>  <span class="keywordflow">return</span> scope;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>}</div>
</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span><span class="keywordtype">void</span> ScopeIterator::VisitScope(<span class="keyword">const</span> Visitor&amp; visitor, Mode mode)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>  <span class="keywordflow">switch</span> (<a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>()) {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <span class="keywordflow">case</span> ScopeTypeLocal:</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <span class="keywordflow">case</span> ScopeTypeClosure:</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <span class="keywordflow">case</span> ScopeTypeCatch:</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <span class="keywordflow">case</span> ScopeTypeBlock:</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    <span class="keywordflow">case</span> ScopeTypeEval:</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>      <span class="keywordflow">return</span> VisitLocalScope(visitor, mode, <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>());</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    <span class="keywordflow">case</span> ScopeTypeModule:</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>      <span class="keywordflow">if</span> (InInnerScope()) {</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>        <span class="keywordflow">return</span> VisitLocalScope(visitor, mode, <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>());</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>      }</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(Mode::ALL, mode);</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>      <span class="keywordflow">return</span> VisitModuleScope(visitor);</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <span class="keywordflow">case</span> ScopeTypeScript:</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>      <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(Mode::ALL, mode);</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>      <span class="keywordflow">return</span> VisitScriptScope(visitor);</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <span class="keywordflow">case</span> ScopeTypeWith:</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="keywordflow">case</span> ScopeTypeGlobal:</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>  }</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>}</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span> </div>
<div class="foldopen" id="foldopen00676" data-start="{" data-end="}">
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a289635eb19031da4eb7e9eaf82e7e518">  676</a></span><span class="keywordtype">bool</span> ScopeIterator::SetVariableValue(<a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">Handle&lt;String&gt;</a> name,</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                                     <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">DirectHandle&lt;Object&gt;</a> value) {</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!Done());</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>  name = isolate_-&gt;factory()-&gt;InternalizeString(name);</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>  <span class="keywordflow">switch</span> (<a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>()) {</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="keywordflow">case</span> ScopeTypeGlobal:</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">case</span> ScopeTypeWith:</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span> </div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <span class="keywordflow">case</span> ScopeTypeEval:</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <span class="keywordflow">case</span> ScopeTypeBlock:</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    <span class="keywordflow">case</span> ScopeTypeCatch:</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <span class="keywordflow">case</span> ScopeTypeModule:</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>      <span class="keywordflow">if</span> (InInnerScope()) <span class="keywordflow">return</span> SetLocalVariableValue(name, value);</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>() == ScopeTypeModule &amp;&amp; SetModuleVariableValue(name, value)) {</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>      }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>      <span class="keywordflow">return</span> SetContextVariableValue(name, value);</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span> </div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <span class="keywordflow">case</span> ScopeTypeLocal:</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <span class="keywordflow">case</span> ScopeTypeClosure:</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>      <span class="keywordflow">if</span> (InInnerScope()) {</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>        <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(ScopeTypeLocal, <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>());</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>        <span class="keywordflow">if</span> (SetLocalVariableValue(name, value)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        <span class="comment">// There may not be an associated context since we&#39;re InInnerScope().</span></div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        <span class="keywordflow">if</span> (!<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(ScopeTypeClosure, <a class="code hl_class" href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">Type</a>());</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>        <span class="keywordflow">if</span> (SetContextVariableValue(name, value)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>      }</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>      <span class="comment">// The above functions only set variables statically declared in the</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>      <span class="comment">// function. There may be eval-introduced variables. Check them in</span></div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>      <span class="comment">// SetContextExtensionValue.</span></div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>      <span class="keywordflow">return</span> SetContextExtensionValue(name, value);</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span> </div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    <span class="keywordflow">case</span> ScopeTypeScript:</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>      <span class="keywordflow">return</span> SetScriptVariableValue(name, value);</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>  }</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>}</div>
</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span> </div>
<div class="foldopen" id="foldopen00717" data-start="{" data-end="}">
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno"><a class="line" href="classv8_1_1internal_1_1ScopeIterator.html#a9457269f27fc66472bcc3bb4ca6ef1b1">  717</a></span><span class="keywordtype">bool</span> ScopeIterator::ClosureScopeHasThisReference()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>  <span class="comment">// closure_scope_ can be nullptr if parsing failed. See the TODO in</span></div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>  <span class="comment">// TryParseAndRetrieveScopes.</span></div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>  <span class="keywordflow">return</span> closure_scope_ &amp;&amp; !closure_scope_-&gt;has_this_declaration() &amp;&amp;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>         closure_scope_-&gt;HasThisReference();</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>}</div>
</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span><span class="keywordtype">void</span> ScopeIterator::CollectLocalsFromCurrentScope() {</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsStringSet(*locals_));</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>  <span class="keywordflow">for</span> (<a class="code hl_class" href="classv8_1_1internal_1_1Variable.html">Variable</a>* var : *current_scope_-&gt;locals()) {</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="keywordflow">if</span> (var-&gt;location() == VariableLocation::PARAMETER ||</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>        var-&gt;location() == VariableLocation::LOCAL) {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>      locals_ = StringSet::Add(isolate_, locals_, var-&gt;name());</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    }</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>  }</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>}</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span> </div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span><span class="comment">// Debug print of the content of the current scope.</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span><span class="keywordtype">void</span> ScopeIterator::DebugPrint() {</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>  StdoutStream os;</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!Done());</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>  <span class="keywordflow">switch</span> (Type()) {</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    <span class="keywordflow">case</span> ScopeIterator::ScopeTypeGlobal:</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>      os &lt;&lt; <span class="stringliteral">&quot;Global:\n&quot;</span>;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>      Print(*context_, os);</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="keywordflow">case</span> ScopeIterator::ScopeTypeLocal: {</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>      os &lt;&lt; <span class="stringliteral">&quot;Local:\n&quot;</span>;</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>      <span class="keywordflow">if</span> (<a class="code hl_enumeration" href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">NeedsContext</a>()) {</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>        Print(*context_, os);</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>        <span class="keywordflow">if</span> (context_-&gt;has_extension()) {</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>          DirectHandle&lt;HeapObject&gt; <a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>(context_-&gt;extension(), isolate_);</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsJSContextExtensionObject(*<a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>));</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>          Print(*<a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>, os);</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        }</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>      }</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>    }</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span> </div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>    <span class="keywordflow">case</span> ScopeIterator::ScopeTypeWith:</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>      os &lt;&lt; <span class="stringliteral">&quot;With:\n&quot;</span>;</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>      Print(context_-&gt;extension(), os);</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span> </div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    <span class="keywordflow">case</span> ScopeIterator::ScopeTypeCatch:</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>      os &lt;&lt; <span class="stringliteral">&quot;Catch:\n&quot;</span>;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>      Print(context_-&gt;extension(), os);</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>      Print(context_-&gt;get(Context::THROWN_OBJECT_INDEX), os);</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span> </div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    <span class="keywordflow">case</span> ScopeIterator::ScopeTypeClosure:</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>      os &lt;&lt; <span class="stringliteral">&quot;Closure:\n&quot;</span>;</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>      Print(*context_, os);</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>      <span class="keywordflow">if</span> (context_-&gt;has_extension()) {</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>        DirectHandle&lt;HeapObject&gt; <a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>(context_-&gt;extension(), isolate_);</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsJSContextExtensionObject(*<a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>));</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>        Print(*<a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>, os);</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>      }</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    <span class="keywordflow">case</span> ScopeIterator::ScopeTypeScript:</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>      os &lt;&lt; <span class="stringliteral">&quot;Script:\n&quot;</span>;</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>      Print(context_-&gt;native_context()-&gt;script_context_table(), os);</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span> </div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>  }</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">PrintF</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>}</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span><span class="keywordtype">int</span> ScopeIterator::GetSourcePosition()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>  <span class="keywordflow">if</span> (frame_inspector_) {</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <span class="keywordflow">return</span> frame_inspector_-&gt;GetSourcePosition();</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!generator_.is_null());</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    SharedFunctionInfo::EnsureSourcePositionsAvailable(</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        isolate_, <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(generator_-&gt;function()-&gt;shared(), isolate_));</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    <span class="keywordflow">return</span> generator_-&gt;source_position();</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>  }</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>}</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span> </div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span><span class="keywordtype">void</span> ScopeIterator::VisitScriptScope(<span class="keyword">const</span> Visitor&amp; visitor)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>  DirectHandle&lt;ScriptContextTable&gt; script_contexts(</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>      context_-&gt;native_context()-&gt;script_context_table(), isolate_);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span> </div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>  <span class="comment">// Skip the first script since that just declares &#39;this&#39;.</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 1; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; script_contexts-&gt;<a class="code hl_class" href="classlength.html">length</a>(kAcquireLoad); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    DirectHandle&lt;Context&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>(script_contexts-&gt;get(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>), isolate_);</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    Handle&lt;ScopeInfo&gt; scope_info(<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>-&gt;scope_info(), isolate_);</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <span class="keywordflow">if</span> (VisitContextLocals(visitor, scope_info, <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>, ScopeTypeScript)) {</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    }</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>  }</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>}</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span><span class="keywordtype">void</span> ScopeIterator::VisitModuleScope(<span class="keyword">const</span> Visitor&amp; visitor)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(context_-&gt;IsModuleContext());</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span> </div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>  Handle&lt;ScopeInfo&gt; scope_info(context_-&gt;scope_info(), isolate_);</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>  <span class="keywordflow">if</span> (VisitContextLocals(visitor, scope_info, context_, ScopeTypeModule)) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>  }</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span> </div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>  <span class="keywordtype">int</span> module_variable_count = scope_info-&gt;ModuleVariableCount();</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span> </div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>  DirectHandle&lt;SourceTextModule&gt; module(context_-&gt;module(), isolate_);</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span> </div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; module_variable_count; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    Handle&lt;String&gt; <a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>;</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>    {</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>      Tagged&lt;String&gt; raw_name;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>      scope_info-&gt;ModuleVariable(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, &amp;raw_name, &amp;<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>      <span class="keywordflow">if</span> (ScopeInfo::VariableIsSynthetic(raw_name)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>      name = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(raw_name, isolate_);</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    }</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    Handle&lt;Object&gt; value =</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        SourceTextModule::LoadVariable(isolate_, module, <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span> </div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    <span class="keywordflow">if</span> (visitor(name, value, ScopeTypeModule)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>  }</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>}</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span> </div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span><span class="keywordtype">bool</span> ScopeIterator::VisitContextLocals(<span class="keyword">const</span> Visitor&amp; visitor,</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>                                       Handle&lt;ScopeInfo&gt; scope_info,</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>                                       DirectHandle&lt;Context&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>,</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>                                       ScopeType scope_type)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>  <span class="comment">// Fill all context locals to the context extension.</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : ScopeInfo::IterateLocalNames(scope_info)) {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    Handle&lt;String&gt; <a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>(it-&gt;name(), isolate_);</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <span class="keywordflow">if</span> (ScopeInfo::VariableIsSynthetic(*name)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    <span class="keywordtype">int</span> context_index = scope_info-&gt;ContextHeaderLength() + it-&gt;index();</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    Handle&lt;Object&gt; <a class="code hl_variable" href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a>(<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>-&gt;get(context_index), isolate_);</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <span class="keywordflow">if</span> (visitor(name, value, scope_type)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>  }</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>}</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span> </div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span><span class="keywordtype">bool</span> ScopeIterator::VisitLocals(<span class="keyword">const</span> Visitor&amp; visitor, Mode mode,</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>                                ScopeType scope_type)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>  <span class="keywordflow">if</span> (mode == Mode::STACK &amp;&amp; current_scope_-&gt;is_declaration_scope() &amp;&amp;</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>      current_scope_-&gt;AsDeclarationScope()-&gt;has_this_declaration()) {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    <span class="comment">// TODO(bmeurer): We should refactor the general variable lookup</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    <span class="comment">// around &quot;this&quot;, since the current way is rather hacky when the</span></div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    <span class="comment">// receiver is context-allocated.</span></div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <span class="keyword">auto</span> this_var = current_scope_-&gt;AsDeclarationScope()-&gt;receiver();</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    Handle&lt;Object&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a8aab47cc18f1dda0f6b8034f5c64d43d">receiver</a> =</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>        this_var-&gt;location() == VariableLocation::CONTEXT</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>            ? <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(context_-&gt;get(this_var-&gt;index()), isolate_)</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>        : frame_inspector_ == nullptr ? <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(generator_-&gt;<a class="code hl_variable" href="js-call-reducer_8cc.html#a8aab47cc18f1dda0f6b8034f5c64d43d">receiver</a>(), isolate_)</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>                                      : frame_inspector_-&gt;GetReceiver();</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    <span class="keywordflow">if</span> (visitor(isolate_-&gt;factory()-&gt;this_string(), <a class="code hl_variable" href="js-call-reducer_8cc.html#a8aab47cc18f1dda0f6b8034f5c64d43d">receiver</a>, scope_type))</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>  }</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span> </div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>  <span class="keywordflow">if</span> (current_scope_-&gt;is_function_scope()) {</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <a class="code hl_typedef" href="namespacev8_1_1internal_1_1compiler_1_1turboshaft.html#a89c4bb799509cb17ac917d0e166dbbf9">Variable</a>* function_var =</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        current_scope_-&gt;AsDeclarationScope()-&gt;function_var();</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>    <span class="keywordflow">if</span> (function_var != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>      Handle&lt;JSFunction&gt; function = frame_inspector_ == <span class="keyword">nullptr</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>                                        ? function_</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>                                        : frame_inspector_-&gt;GetFunction();</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>      Handle&lt;String&gt; name = function_var-&gt;name();</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>      <span class="keywordflow">if</span> (visitor(name, function, scope_type)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    }</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>  }</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span> </div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>  <span class="keywordflow">for</span> (Variable* var : *current_scope_-&gt;locals()) {</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>    <span class="keywordflow">if</span> (ScopeInfo::VariableIsSynthetic(*var-&gt;name())) {</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>      <span class="comment">// We want to materialize &quot;new.target&quot; for debug-evaluate.</span></div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>      <span class="keywordflow">if</span> (mode != Mode::STACK ||</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>          !var-&gt;name()-&gt;Equals(*isolate_-&gt;factory()-&gt;dot_new_target_string())) {</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>      }</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>    }</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = var-&gt;index();</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    Handle&lt;Object&gt; <a class="code hl_variable" href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a>;</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="keywordflow">switch</span> (var-&gt;location()) {</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>      <span class="keywordflow">case</span> VariableLocation::LOOKUP:</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>      <span class="keywordflow">case</span> VariableLocation::REPL_GLOBAL:</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        <span class="comment">// REPL declared variables are ignored for now.</span></div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>      <span class="keywordflow">case</span> VariableLocation::UNALLOCATED:</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>      <span class="keywordflow">case</span> VariableLocation::PARAMETER: {</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>        <span class="keywordflow">if</span> (frame_inspector_ == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>          <span class="comment">// Get the variable from the suspended generator.</span></div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!generator_.is_null());</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>          Tagged&lt;FixedArray&gt; parameters_and_registers =</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>              generator_-&gt;parameters_and_registers();</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>          <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, parameters_and_registers-&gt;length());</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>          value = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(parameters_and_registers-&gt;get(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>), isolate_);</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (var-&gt;IsReceiver()) {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>          value = frame_inspector_-&gt;GetReceiver();</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>          value = frame_inspector_-&gt;GetParameter(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        }</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>      }</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>      <span class="keywordflow">case</span> VariableLocation::LOCAL:</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        <span class="keywordflow">if</span> (frame_inspector_ == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>          <span class="comment">// Get the variable from the suspended generator.</span></div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!generator_.is_null());</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>          Tagged&lt;FixedArray&gt; parameters_and_registers =</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>              generator_-&gt;parameters_and_registers();</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>          <span class="keywordtype">int</span> <a class="code hl_variable" href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a> =</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>              function_-&gt;shared()-&gt;scope_info()-&gt;ParameterCount();</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>          <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> += <a class="code hl_variable" href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a>;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>          <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, parameters_and_registers-&gt;length());</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>          value = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(parameters_and_registers-&gt;get(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>), isolate_);</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>          value = frame_inspector_-&gt;GetExpression(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>);</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>          <span class="keywordflow">if</span> (IsOptimizedOut(*value, isolate_)) {</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>            <span class="comment">// We&#39;ll rematerialize this later.</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>            <span class="keywordflow">if</span> (current_scope_-&gt;is_declaration_scope() &amp;&amp;</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                current_scope_-&gt;AsDeclarationScope()-&gt;arguments() == var) {</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>              <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>            }</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal.html#a2dcc8fdad115890143437f76839010c3">IsLexicalVariableMode</a>(var-&gt;mode()) &amp;&amp;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>                     IsUndefined(*value, isolate_) &amp;&amp;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>                     <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a89b347b3e67ac1ee47f64bc98acb37b0">GetSourcePosition</a>() != kNoSourcePosition &amp;&amp;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>                     <a class="code hl_function" href="namespacev8_1_1internal_1_1wasm.html#a89b347b3e67ac1ee47f64bc98acb37b0">GetSourcePosition</a>() &lt;= var-&gt;initializer_position()) {</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>            <span class="comment">// Variables that are `undefined` could also mean an elided hole</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            <span class="comment">// write. We explicitly check the static scope information if we</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            <span class="comment">// are currently stopped before the variable is actually initialized</span></div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>            <span class="comment">// which means we are in the middle of that var&#39;s TDZ.</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>            value = isolate_-&gt;factory()-&gt;the_hole_value();</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>          }</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>        }</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span> </div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>      <span class="keywordflow">case</span> VariableLocation::CONTEXT:</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <span class="keywordflow">if</span> (mode == Mode::STACK) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(var-&gt;IsContextSlot());</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span> </div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        <span class="comment">// We know of at least one open bug where the context and scope chain</span></div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>        <span class="comment">// don&#39;t match (https://crbug.com/753338).</span></div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        <span class="comment">// Return `undefined` if the context&#39;s ScopeInfo doesn&#39;t know anything</span></div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        <span class="comment">// about this variable.</span></div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        <span class="keywordflow">if</span> (context_-&gt;scope_info()-&gt;ContextSlotIndex(var-&gt;name()) != <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) {</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>          value = isolate_-&gt;factory()-&gt;undefined_value();</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>          value = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(context_-&gt;get(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>), isolate_);</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>        }</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span> </div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>      <span class="keywordflow">case</span> VariableLocation::MODULE: {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>        <span class="keywordflow">if</span> (mode == Mode::STACK) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>        <span class="comment">// if (var-&gt;IsExport()) continue;</span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        DirectHandle&lt;SourceTextModule&gt; module(context_-&gt;module(), isolate_);</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>        value = SourceTextModule::LoadVariable(isolate_, module, var-&gt;index());</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>      }</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    }</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span> </div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    <span class="keywordflow">if</span> (visitor(var-&gt;name(), value, scope_type)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>  }</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>}</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span> </div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span><span class="comment">// Retrieve the with-context extension object. If the extension object is</span></div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span><span class="comment">// a proxy, return an empty object.</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>Handle&lt;JSObject&gt; ScopeIterator::WithContextExtension() {</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(context_-&gt;IsWithContext());</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>  <span class="keywordflow">if</span> (!IsJSObject(context_-&gt;extension_receiver())) {</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsJSProxy(context_-&gt;extension_receiver()) ||</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>           <a class="code hl_function" href="namespacev8_1_1internal.html#ab3dfefb1973f869ae10be183def78652">IsWasmObject</a>(context_-&gt;extension_receiver()));</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <span class="keywordflow">return</span> isolate_-&gt;factory()-&gt;NewSlowJSObjectWithNullProto();</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>  }</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(Cast&lt;JSObject&gt;(context_-&gt;extension_receiver()), isolate_);</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>}</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span> </div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span><span class="comment">// Create a plain JSObject which materializes the block scope for the specified</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span><span class="comment">// block context.</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span><span class="keywordtype">void</span> ScopeIterator::VisitLocalScope(<span class="keyword">const</span> Visitor&amp; visitor, Mode mode,</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                                    ScopeType scope_type)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>  <span class="keywordflow">if</span> (InInnerScope()) {</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <span class="keywordflow">if</span> (VisitLocals(visitor, mode, scope_type)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>    <span class="keywordflow">if</span> (mode == Mode::STACK &amp;&amp; Type() == ScopeTypeLocal) {</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>      <span class="comment">// Hide |this| in arrow functions that may be embedded in other functions</span></div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>      <span class="comment">// but don&#39;t force |this| to be context-allocated. Otherwise we&#39;d find the</span></div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>      <span class="comment">// wrong |this| value.</span></div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>      <span class="keywordflow">if</span> (!closure_scope_-&gt;has_this_declaration() &amp;&amp;</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>          !closure_scope_-&gt;HasThisReference()) {</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>        <span class="keywordflow">if</span> (visitor(isolate_-&gt;factory()-&gt;this_string(),</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>                    isolate_-&gt;factory()-&gt;undefined_value(), scope_type))</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>      }</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>      <span class="comment">// Add |arguments| to the function scope even if it wasn&#39;t used.</span></div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>      <span class="comment">// Currently we don&#39;t yet support materializing the arguments object of</span></div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>      <span class="comment">// suspended generators. We&#39;d need to read the arguments out from the</span></div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>      <span class="comment">// suspended generator rather than from an activation as</span></div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>      <span class="comment">// FunctionGetArguments does.</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>      <span class="keywordflow">if</span> (frame_inspector_ != <span class="keyword">nullptr</span> &amp;&amp; !closure_scope_-&gt;is_arrow_scope() &amp;&amp;</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>          (closure_scope_-&gt;arguments() == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>           IsOptimizedOut(*frame_inspector_-&gt;GetExpression(</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>                              closure_scope_-&gt;arguments()-&gt;index()),</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>                          isolate_))) {</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>        JavaScriptFrame* frame = GetFrame();</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        Handle&lt;JSObject&gt; arguments = Accessors::FunctionGetArguments(</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>            frame, frame_inspector_-&gt;inlined_frame_index());</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>        <span class="keywordflow">if</span> (visitor(isolate_-&gt;factory()-&gt;arguments_string(), arguments,</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>                    scope_type))</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>      }</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    }</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>    <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(Mode::ALL, mode);</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    Handle&lt;ScopeInfo&gt; scope_info(context_-&gt;scope_info(), isolate_);</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    <span class="keywordflow">if</span> (VisitContextLocals(visitor, scope_info, context_, scope_type)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>  }</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span> </div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>  <span class="keywordflow">if</span> (mode == Mode::ALL &amp;&amp; HasContext()) {</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!context_-&gt;IsScriptContext());</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!IsNativeContext(*context_));</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!context_-&gt;IsWithContext());</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <span class="keywordflow">if</span> (!context_-&gt;scope_info()-&gt;SloppyEvalCanExtendVars()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    <span class="keywordflow">if</span> (context_-&gt;extension_object().is_null()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>    DirectHandle&lt;JSObject&gt; <a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>(context_-&gt;extension_object(), isolate_);</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>    DirectHandle&lt;FixedArray&gt; keys =</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        KeyAccumulator::GetKeys(isolate_, <a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>,</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>                                KeyCollectionMode::kOwnOnly, ENUMERABLE_STRINGS)</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>            .ToHandleChecked();</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span> </div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; keys-&gt;<a class="code hl_class" href="classlength.html">length</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>      <span class="comment">// Names of variables introduced by eval are strings.</span></div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsString(keys-&gt;get(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>      Handle&lt;String&gt; <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>(Cast&lt;String&gt;(keys-&gt;get(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)), isolate_);</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>      Handle&lt;Object&gt; value =</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>          JSReceiver::GetDataProperty(isolate_, <a class="code hl_variable" href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a>, <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>);</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>      <span class="keywordflow">if</span> (visitor(<a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>, value, scope_type)) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>    }</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>  }</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>}</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span> </div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span><span class="keywordtype">bool</span> ScopeIterator::SetLocalVariableValue(DirectHandle&lt;String&gt; variable_name,</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>                                          DirectHandle&lt;Object&gt; new_value) {</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>  <span class="comment">// TODO(verwaest): Walk parameters backwards, not forwards.</span></div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>  <span class="comment">// TODO(verwaest): Use VariableMap rather than locals() list for lookup.</span></div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>  <span class="keywordflow">for</span> (Variable* var : *current_scope_-&gt;locals()) {</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    <span class="keywordflow">if</span> (String::Equals(isolate_, var-&gt;name(), variable_name)) {</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>      <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> = var-&gt;index();</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>      <span class="keywordflow">switch</span> (var-&gt;location()) {</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>        <span class="keywordflow">case</span> VariableLocation::LOOKUP:</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>        <span class="keywordflow">case</span> VariableLocation::UNALLOCATED:</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>          <span class="comment">// Drop assignments to unallocated locals.</span></div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(var-&gt;is_this() ||</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>                 *variable_name == ReadOnlyRoots(isolate_).arguments_string());</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span> </div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        <span class="keywordflow">case</span> VariableLocation::REPL_GLOBAL:</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>          <span class="comment">// Assignments to REPL declared variables are ignored for now.</span></div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span> </div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        <span class="keywordflow">case</span> VariableLocation::PARAMETER: {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>          <span class="keywordflow">if</span> (var-&gt;is_this()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>          <span class="keywordflow">if</span> (frame_inspector_ == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>            <span class="comment">// Set the variable in the suspended generator.</span></div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!generator_.is_null());</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>            DirectHandle&lt;FixedArray&gt; parameters_and_registers(</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>                generator_-&gt;parameters_and_registers(), isolate_);</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>            <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, parameters_and_registers-&gt;length());</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            parameters_and_registers-&gt;set(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, *new_value);</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>            JavaScriptFrame* frame = GetFrame();</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            <span class="keywordflow">if</span> (!frame-&gt;is_unoptimized()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span> </div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>            frame-&gt;SetParameterValue(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, *new_value);</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>          }</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        }</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span> </div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>        <span class="keywordflow">case</span> VariableLocation::LOCAL:</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>          <span class="keywordflow">if</span> (frame_inspector_ == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>            <span class="comment">// Set the variable in the suspended generator.</span></div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>            <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!generator_.is_null());</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>            <span class="keywordtype">int</span> <a class="code hl_variable" href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a> =</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                function_-&gt;shared()-&gt;scope_info()-&gt;ParameterCount();</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>            <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> += <a class="code hl_variable" href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a>;</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>            DirectHandle&lt;FixedArray&gt; parameters_and_registers(</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                generator_-&gt;parameters_and_registers(), isolate_);</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>            <a class="code hl_define" href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, parameters_and_registers-&gt;length());</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>            parameters_and_registers-&gt;set(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, *new_value);</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>            <span class="comment">// Set the variable on the stack.</span></div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>            JavaScriptFrame* frame = GetFrame();</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            <span class="keywordflow">if</span> (!frame-&gt;is_unoptimized()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span> </div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            frame-&gt;SetExpression(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, *new_value);</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>          }</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span> </div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>        <span class="keywordflow">case</span> VariableLocation::CONTEXT:</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>          <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(var-&gt;IsContextSlot());</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span> </div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>          <span class="comment">// We know of at least one open bug where the context and scope chain</span></div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>          <span class="comment">// don&#39;t match (https://crbug.com/753338).</span></div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>          <span class="comment">// Skip the write if the context&#39;s ScopeInfo doesn&#39;t know anything</span></div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>          <span class="comment">// about this variable.</span></div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>          <span class="keywordflow">if</span> (context_-&gt;scope_info()-&gt;ContextSlotIndex(variable_name) !=</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>              <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) {</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>          }</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>          context_-&gt;set(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, *new_value);</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span> </div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>        <span class="keywordflow">case</span> VariableLocation::MODULE:</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>          <span class="keywordflow">if</span> (!var-&gt;IsExport()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>          DirectHandle&lt;SourceTextModule&gt; module(context_-&gt;module(), isolate_);</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>          SourceTextModule::StoreVariable(module, var-&gt;index(), new_value);</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>      }</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    }</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>  }</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span> </div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>}</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span> </div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span><span class="keywordtype">bool</span> ScopeIterator::SetContextExtensionValue(DirectHandle&lt;String&gt; variable_name,</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>                                             DirectHandle&lt;Object&gt; new_value) {</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>  <span class="keywordflow">if</span> (!context_-&gt;has_extension()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span> </div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsJSContextExtensionObject(context_-&gt;extension_object()));</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>  DirectHandle&lt;JSObject&gt; ext(context_-&gt;extension_object(), isolate_);</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>  LookupIterator it(isolate_, ext, variable_name, LookupIterator::OWN);</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>  Maybe&lt;bool&gt; maybe = JSReceiver::HasProperty(&amp;it);</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(maybe.IsJust());</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>  <span class="keywordflow">if</span> (!maybe.FromJust()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span> </div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(Object::SetDataProperty(&amp;it, new_value).ToChecked());</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>}</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span> </div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span><span class="keywordtype">bool</span> ScopeIterator::SetContextVariableValue(DirectHandle&lt;String&gt; variable_name,</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>                                            DirectHandle&lt;Object&gt; new_value) {</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>  <span class="keywordtype">int</span> slot_index = context_-&gt;scope_info()-&gt;ContextSlotIndex(variable_name);</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>  <span class="keywordflow">if</span> (slot_index &lt; 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>  context_-&gt;set(slot_index, *new_value);</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>}</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span> </div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span><span class="keywordtype">bool</span> ScopeIterator::SetModuleVariableValue(DirectHandle&lt;String&gt; variable_name,</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>                                           DirectHandle&lt;Object&gt; new_value) {</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>  <a class="code hl_typedef" href="namespacev8_1_1internal.html#a20971f8a9770697fdde08004c19035a3">DisallowGarbageCollection</a> no_gc;</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>  <span class="keywordtype">int</span> cell_index;</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a485f6a11285b43e34688e316b858e6e7">VariableMode</a> <a class="code hl_function" href="flag-definitions_8h.html#a2af95be39f78db328a2ca5b4322e1696">mode</a>;</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a124a2203c5d93e50971ddc72694d0452">InitializationFlag</a> init_flag;</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a482c9a1d9c9bab12bfbaaae1bba724f1">MaybeAssignedFlag</a> maybe_assigned_flag;</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>  cell_index = context_-&gt;scope_info()-&gt;ModuleIndex(</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>      *variable_name, &amp;mode, &amp;init_flag, &amp;maybe_assigned_flag);</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span> </div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>  <span class="comment">// Setting imports is currently not supported.</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>  <span class="keywordflow">if</span> (SourceTextModuleDescriptor::GetCellIndexKind(cell_index) !=</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>      SourceTextModuleDescriptor::kExport) {</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>  }</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span> </div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>  DirectHandle&lt;SourceTextModule&gt; module(context_-&gt;module(), isolate_);</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>  SourceTextModule::StoreVariable(module, cell_index, new_value);</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>}</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span> </div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span><span class="keywordtype">bool</span> ScopeIterator::SetScriptVariableValue(DirectHandle&lt;String&gt; variable_name,</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>                                           DirectHandle&lt;Object&gt; new_value) {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>  DirectHandle&lt;ScriptContextTable&gt; script_contexts(</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>      context_-&gt;native_context()-&gt;script_context_table(), isolate_);</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>  VariableLookupResult lookup_result;</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>  <span class="keywordflow">if</span> (script_contexts-&gt;Lookup(variable_name, &amp;lookup_result)) {</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    DirectHandle&lt;Context&gt; script_context(</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>        script_contexts-&gt;get(lookup_result.context_index), isolate_);</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>    script_context-&gt;set(lookup_result.slot_index, *new_value);</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>  }</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span> </div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>}</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span> </div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span> </div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span><span class="comment">// Given the scope and context of a paused function, this class calculates</span></div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span><span class="comment">// all the necessary block lists on the scope chain and stores them in the</span></div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span><span class="comment">// global LocalsBlockListCache ephemeron table.</span></div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span><span class="comment">//</span></div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span><span class="comment">// Doc: bit.ly/chrome-devtools-debug-evaluate-design.</span></div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span><span class="comment">//</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span><span class="comment">// The algorithm works in a single walk of the scope chain from the</span></div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span><span class="comment">// paused function scope outwards to the script scope.</span></div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span><span class="comment">//</span></div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span><span class="comment">// When we step from scope &quot;a&quot; to its outer scope &quot;b&quot;, we do:</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span><span class="comment">//</span></div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span><span class="comment">//   1. Add all stack-allocated variables from &quot;b&quot; to the blocklists.</span></div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span><span class="comment">//   2. Does &quot;b&quot; need a context? If yes:</span></div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span><span class="comment">//        - Store all current blocklists in the global table</span></div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span><span class="comment">//        - Start a new blocklist for scope &quot;b&quot;</span></div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span><span class="comment">//   3. Is &quot;b&quot; a function scope without a context? If yes:</span></div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span><span class="comment">//        - Start a new blocklist for scope &quot;b&quot;</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span><span class="comment">//</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span><span class="keyword">class </span>LocalBlocklistsCollector {</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  LocalBlocklistsCollector(Isolate* isolate, Handle&lt;Script&gt; script,</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>                           Handle&lt;Context&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>,</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>                           DeclarationScope* closure_scope);</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>  <span class="keywordtype">void</span> CollectAndStore();</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span> </div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>  <span class="keywordtype">void</span> InitializeWithClosureScope();</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>  <span class="keywordtype">void</span> AdvanceToNextNonHiddenScope();</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>  <span class="keywordtype">void</span> CollectCurrentLocalsIntoBlocklists();</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  Handle&lt;ScopeInfo&gt; FindScopeInfoForScope(Scope* scope) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>  <span class="keywordtype">void</span> StoreFunctionBlocklists(DirectHandle&lt;ScopeInfo&gt; outer_scope_info);</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span> </div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>  Isolate* isolate_;</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>  Handle&lt;Script&gt; script_;</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>  Handle&lt;Context&gt; context_;</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>  Scope* scope_;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>  DeclarationScope* closure_scope_;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span> </div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>  Handle&lt;StringSet&gt; context_blocklist_;</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>  std::map&lt;Scope*, IndirectHandle&lt;StringSet&gt;&gt; function_blocklists_;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>};</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span> </div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>LocalBlocklistsCollector::LocalBlocklistsCollector(</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>    Isolate* isolate, Handle&lt;Script&gt; script, Handle&lt;Context&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>,</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    DeclarationScope* closure_scope)</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    : isolate_(isolate),</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>      script_(script),</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>      context_(<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>),</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>      scope_(closure_scope),</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>      closure_scope_(closure_scope) {}</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span> </div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span><span class="keywordtype">void</span> LocalBlocklistsCollector::InitializeWithClosureScope() {</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>  <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(scope_-&gt;is_declaration_scope());</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>  function_blocklists_.emplace(scope_, StringSet::New(isolate_));</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>  <span class="keywordflow">if</span> (scope_-&gt;NeedsContext()) context_blocklist_ = StringSet::New(isolate_);</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>}</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span> </div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span><span class="keywordtype">void</span> LocalBlocklistsCollector::AdvanceToNextNonHiddenScope() {</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(scope_ &amp;&amp; scope_-&gt;outer_scope());</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    scope_ = scope_-&gt;outer_scope();</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(scope_);</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>  } <span class="keywordflow">while</span> (scope_-&gt;is_hidden());</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>}</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span> </div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span><span class="keywordtype">void</span> LocalBlocklistsCollector::CollectCurrentLocalsIntoBlocklists() {</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>  <span class="keywordflow">for</span> (Variable* var : *scope_-&gt;locals()) {</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <span class="keywordflow">if</span> (var-&gt;location() == VariableLocation::PARAMETER ||</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>        var-&gt;location() == VariableLocation::LOCAL) {</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>      <span class="keywordflow">if</span> (!context_blocklist_.is_null()) {</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>        context_blocklist_ =</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>            StringSet::Add(isolate_, context_blocklist_, var-&gt;name());</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>      }</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; pair : function_blocklists_) {</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>        pair.second = StringSet::Add(isolate_, pair.second, var-&gt;name());</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>      }</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>    }</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>  }</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>}</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span> </div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>Handle&lt;ScopeInfo&gt; LocalBlocklistsCollector::FindScopeInfoForScope(</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    Scope* scope)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>  <a class="code hl_typedef" href="namespacev8_1_1internal.html#a20971f8a9770697fdde08004c19035a3">DisallowGarbageCollection</a> no_gc;</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>  SharedFunctionInfo::ScriptIterator iterator(isolate_, *script_);</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>  <span class="keywordflow">for</span> (Tagged&lt;SharedFunctionInfo&gt; info = iterator.Next(); !info.is_null();</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>       info = iterator.Next()) {</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    Tagged&lt;ScopeInfo&gt; scope_info = info-&gt;scope_info();</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <span class="keywordflow">if</span> (info-&gt;is_compiled() &amp;&amp; !scope_info.is_null() &amp;&amp;</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>        scope-&gt;start_position() == info-&gt;StartPosition() &amp;&amp;</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>        scope-&gt;end_position() == info-&gt;EndPosition() &amp;&amp;</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        scope-&gt;scope_type() == scope_info-&gt;scope_type()) {</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(scope_info, isolate_);</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    }</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>  }</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>  <span class="keywordflow">return</span> Handle&lt;ScopeInfo&gt;();</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>}</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span> </div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span><span class="keywordtype">void</span> LocalBlocklistsCollector::StoreFunctionBlocklists(</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    DirectHandle&lt;ScopeInfo&gt; outer_scope_info) {</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pair : function_blocklists_) {</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>    DirectHandle&lt;ScopeInfo&gt; scope_info = FindScopeInfoForScope(pair.first);</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="comment">// If we don&#39;t find a ScopeInfo it&#39;s not tragic. It means we&#39;ll do</span></div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    <span class="comment">// a full-reparse in case we pause in that function in the future.</span></div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    <span class="comment">// The only ScopeInfo that MUST be found is for the closure_scope_.</span></div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <a class="code hl_define" href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a>(pair.first == closure_scope_, !scope_info.is_null());</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>    <span class="keywordflow">if</span> (scope_info.is_null()) <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    isolate_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#ab2c3831be74a1d031a3584869af79587">LocalsBlockListCacheSet</a>(scope_info, outer_scope_info,</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>                                      pair.second);</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>  }</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>}</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span> </div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span><span class="keywordtype">void</span> LocalBlocklistsCollector::CollectAndStore() {</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>  InitializeWithClosureScope();</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span> </div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>  <span class="keywordflow">while</span> (scope_-&gt;outer_scope() &amp;&amp; !IsNativeContext(*context_)) {</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    AdvanceToNextNonHiddenScope();</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>    <span class="comment">// 1. Add all stack-allocated variables of `scope_` to the various lists.</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>    CollectCurrentLocalsIntoBlocklists();</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span> </div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    <span class="comment">// 2. If the current scope requires a context then all the blocklists &quot;stop&quot;</span></div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    <span class="comment">//    here and we store them.  Next, advance the current context so</span></div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>    <span class="comment">//    `context_` and `scope_` match again.</span></div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>    <span class="keywordflow">if</span> (scope_-&gt;NeedsContext()) {</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>      <span class="keywordflow">if</span> (!context_blocklist_.is_null()) {</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>        <span class="comment">// Only store the block list and advance the context if the</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>        <span class="comment">// context_blocklist is set. This handles the case when we start on</span></div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>        <span class="comment">// a closure scope that doesn&#39;t require a context. In that case</span></div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>        <span class="comment">// `context_` is already the right context for `scope_` so we don&#39;t</span></div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        <span class="comment">// need to advance `context_`.</span></div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>        isolate_-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#ab2c3831be74a1d031a3584869af79587">LocalsBlockListCacheSet</a>(</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>            <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(context_-&gt;scope_info(), isolate_),</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>            <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(context_-&gt;previous()-&gt;scope_info(), isolate_),</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>            context_blocklist_);</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>        context_ = <a class="code hl_function" href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">handle</a>(context_-&gt;previous(), isolate_);</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>      }</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span> </div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>      StoreFunctionBlocklists(<a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(context_-&gt;scope_info(), isolate_));</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span> </div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>      context_blocklist_ = StringSet::New(isolate_);</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>      function_blocklists_.clear();</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scope_-&gt;is_function_scope()) {</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>      <span class="comment">// 3. If `scope` is a function scope with an SFI, start recording</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>      <span class="comment">//    locals for its ScopeInfo.</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>      <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(!scope_-&gt;NeedsContext());</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>      function_blocklists_.emplace(scope_, StringSet::New(isolate_));</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>    }</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>  }</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span> </div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>  <span class="comment">// In case we don&#39;t have any outer scopes we still need to record the empty</span></div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>  <span class="comment">// block list for the paused function to prevent future re-parses.</span></div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>  StoreFunctionBlocklists(<a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(context_-&gt;scope_info(), isolate_));</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>}</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span> </div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span> </div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span><span class="keywordtype">void</span> ScopeIterator::MaybeCollectAndStoreLocalBlocklists()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>  <span class="keywordflow">if</span> (!calculate_blocklists_ || current_scope_ != closure_scope_ ||</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>      Type() == ScopeTypeScript) {</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>  }</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span> </div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsTheHole(isolate_-&gt;LocalsBlockListCacheGet(</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(function_-&gt;shared()-&gt;scope_info(), isolate_))));</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>  LocalBlocklistsCollector collector(isolate_, script_, context_,</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>                                     closure_scope_);</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>  collector.CollectAndStore();</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>}</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span> </div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>}  <span class="comment">// namespace internal</span></div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>}  <span class="comment">// namespace v8</span></div>
<div class="ttc" id="aapi_8cc_html_a0b79990e09c5971befdb526ccfb8deed"><div class="ttname"><a href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a></div><div class="ttdeci">i::DirectHandle&lt; i::String &gt; name</div><div class="ttdef"><b>Definition</b> <a href="api_8cc_source.html#l07178">api.cc:7178</a></div></div>
<div class="ttc" id="aast_2ast_8h_html"><div class="ttname"><a href="ast_2ast_8h.html">ast.h</a></div></div>
<div class="ttc" id="abuiltins_8cc_html_a34a6b28885d79bbc20d4110313cb28be"><div class="ttname"><a href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a></div><div class="ttdeci">int16_t parameter_count</div><div class="ttdef"><b>Definition</b> <a href="builtins_8cc_source.html#l00067">builtins.cc:67</a></div></div>
<div class="ttc" id="aclasslength_html"><div class="ttname"><a href="classlength.html">length</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1BreakLocation_html_ae044ee54e8b28e0325c040be247a3c7d"><div class="ttname"><a href="classv8_1_1internal_1_1BreakLocation.html#ae044ee54e8b28e0325c040be247a3c7d">v8::internal::BreakLocation::FromFrame</a></div><div class="ttdeci">static BreakLocation FromFrame(Handle&lt; DebugInfo &gt; debug_info, JavaScriptFrame *frame)</div><div class="ttdef"><b>Definition</b> <a href="debug_8cc_source.html#l00187">debug.cc:187</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DeclarationScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1DeclarationScope.html">v8::internal::DeclarationScope</a></div><div class="ttdef"><b>Definition</b> <a href="scopes_8h_source.html#l00852">scopes.h:852</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html">v8::internal::DirectHandle</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00643">handles.h:652</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FrameInspector_html"><div class="ttname"><a href="classv8_1_1internal_1_1FrameInspector.html">v8::internal::FrameInspector</a></div><div class="ttdef"><b>Definition</b> <a href="debug-frames_8h_source.html#l00022">debug-frames.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FrameInspector_html_a6f06811920232e42b76622b9bd4bf184"><div class="ttname"><a href="classv8_1_1internal_1_1FrameInspector.html#a6f06811920232e42b76622b9bd4bf184">v8::internal::FrameInspector::GetFunction</a></div><div class="ttdeci">Handle&lt; JSFunction &gt; GetFunction() const</div><div class="ttdef"><b>Definition</b> <a href="debug-frames_8h_source.html#l00030">debug-frames.h:30</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FrameInspector_html_adb54fdb812082599cc9445a1da0f3028"><div class="ttname"><a href="classv8_1_1internal_1_1FrameInspector.html#adb54fdb812082599cc9445a1da0f3028">v8::internal::FrameInspector::GetScript</a></div><div class="ttdeci">Handle&lt; Script &gt; GetScript()</div><div class="ttdef"><b>Definition</b> <a href="debug-frames_8h_source.html#l00031">debug-frames.h:31</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1FrameInspector_html_af1a0a03aed11e26d0f38775c535d3f47"><div class="ttname"><a href="classv8_1_1internal_1_1FrameInspector.html#af1a0a03aed11e26d0f38775c535d3f47">v8::internal::FrameInspector::GetContext</a></div><div class="ttdeci">Handle&lt; Object &gt; GetContext()</div><div class="ttdef"><b>Definition</b> <a href="debug-frames_8cc_source.html#l00072">debug-frames.cc:72</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Handle_html"><div class="ttname"><a href="classv8_1_1internal_1_1Handle.html">v8::internal::Handle</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00145">handles.h:145</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00575">isolate.h:575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ab2c3831be74a1d031a3584869af79587"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ab2c3831be74a1d031a3584869af79587">v8::internal::Isolate::LocalsBlockListCacheSet</a></div><div class="ttdeci">void LocalsBlockListCacheSet(DirectHandle&lt; ScopeInfo &gt; scope_info, DirectHandle&lt; ScopeInfo &gt; outer_scope_info, DirectHandle&lt; StringSet &gt; locals_blocklist)</div><div class="ttdef"><b>Definition</b> <a href="isolate_8cc_source.html#l07511">isolate.cc:7511</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ab7dd326c7e0e0d5d2cba90947b2ef48b"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ab7dd326c7e0e0d5d2cba90947b2ef48b">v8::internal::Isolate::factory</a></div><div class="ttdeci">v8::internal::Factory * factory()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01517">isolate.h:1517</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ae01a862c4a250dfb81b055ffd631f4b7"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ae01a862c4a250dfb81b055ffd631f4b7">v8::internal::Isolate::LocalsBlockListCacheGet</a></div><div class="ttdeci">Tagged&lt; Object &gt; LocalsBlockListCacheGet(DirectHandle&lt; ScopeInfo &gt; scope_info)</div><div class="ttdef"><b>Definition</b> <a href="isolate_8cc_source.html#l07539">isolate.cc:7539</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1JSFunction_html_a3b988f501486ef2d8d553bcbff31b6ca"><div class="ttname"><a href="classv8_1_1internal_1_1JSFunction.html#a3b988f501486ef2d8d553bcbff31b6ca">v8::internal::JSFunction::GetDebugName</a></div><div class="ttdeci">static Handle&lt; String &gt; GetDebugName(DirectHandle&lt; JSFunction &gt; function)</div><div class="ttdef"><b>Definition</b> <a href="js-function_8cc_source.html#l01325">js-function.cc:1325</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PerThreadAssertScopeEmpty_html"><div class="ttname"><a href="classv8_1_1internal_1_1PerThreadAssertScopeEmpty.html">v8::internal::PerThreadAssertScopeEmpty&lt; kAllow, kTypes... &gt;</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_a0834abbe5bc848c2a0471454fc933196"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#a0834abbe5bc848c2a0471454fc933196">v8::internal::ScopeIterator::GetFunctionDebugName</a></div><div class="ttdeci">Handle&lt; Object &gt; GetFunctionDebugName() const</div><div class="ttdef"><b>Definition</b> <a href="#l00047">debug-scopes.cc:47</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_a3c78ace26407f6258f68b1a735ffa125"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#a3c78ace26407f6258f68b1a735ffa125">v8::internal::ScopeIterator::~ScopeIterator</a></div><div class="ttdeci">~ScopeIterator()</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_a7026c6cef6f2a7c47c8bec84b0c19e93"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93">v8::internal::ScopeIterator::ReparseStrategy</a></div><div class="ttdeci">ReparseStrategy</div><div class="ttdef"><b>Definition</b> <a href="debug-scopes_8h_source.html#l00043">debug-scopes.h:43</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_a7026c6cef6f2a7c47c8bec84b0c19e93a0c248763ed3cd57e6b5d431d558e9e19"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93a0c248763ed3cd57e6b5d431d558e9e19">v8::internal::ScopeIterator::ReparseStrategy::kFunctionLiteral</a></div><div class="ttdeci">@ kFunctionLiteral</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_a7026c6cef6f2a7c47c8bec84b0c19e93a4f28e520880eb866c33c3e0afcb42c31"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#a7026c6cef6f2a7c47c8bec84b0c19e93a4f28e520880eb866c33c3e0afcb42c31">v8::internal::ScopeIterator::ReparseStrategy::kScriptIfNeeded</a></div><div class="ttdeci">@ kScriptIfNeeded</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_a7bb5a41d9fc691a5e09db08f7592d19b"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#a7bb5a41d9fc691a5e09db08f7592d19b">v8::internal::ScopeIterator::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdef"><b>Definition</b> <a href="debug-scopes_8h_source.html#l00074">debug-scopes.h:74</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_aa4aa3e4d41cb6ce47ec9df9a056fc49b"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#aa4aa3e4d41cb6ce47ec9df9a056fc49b">v8::internal::ScopeIterator::ScopeType</a></div><div class="ttdeci">ScopeType</div><div class="ttdef"><b>Definition</b> <a href="debug-scopes_8h_source.html#l00023">debug-scopes.h:23</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_aaf7f7a0ba0261c9f5e6ecfca26534fa4"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#aaf7f7a0ba0261c9f5e6ecfca26534fa4">v8::internal::ScopeIterator::ScopeIterator</a></div><div class="ttdeci">ScopeIterator(Isolate *isolate, FrameInspector *frame_inspector, ReparseStrategy strategy)</div><div class="ttdef"><b>Definition</b> <a href="#l00024">debug-scopes.cc:24</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1ScopeIterator_html_af25c584be732d14796c40dbe1a85c171"><div class="ttname"><a href="classv8_1_1internal_1_1ScopeIterator.html#af25c584be732d14796c40dbe1a85c171">v8::internal::ScopeIterator::Restart</a></div><div class="ttdeci">void Restart()</div><div class="ttdef"><b>Definition</b> <a href="#l00084">debug-scopes.cc:84</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Script_html"><div class="ttname"><a href="classv8_1_1internal_1_1Script.html">v8::internal::Script</a></div><div class="ttdef"><b>Definition</b> <a href="script_8h_source.html#l00038">script.h:38</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Script_html_ad5ba2ef0105d489f8e29013ad262f584af235d200c1777ea71eaa75068ce89b3d"><div class="ttname"><a href="classv8_1_1internal_1_1Script.html#ad5ba2ef0105d489f8e29013ad262f584af235d200c1777ea71eaa75068ce89b3d">v8::internal::Script::CompilationType::kEval</a></div><div class="ttdeci">@ kEval</div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StringSet_html"><div class="ttname"><a href="classv8_1_1internal_1_1StringSet.html">v8::internal::StringSet</a></div><div class="ttdef"><b>Definition</b> <a href="string-set_8h_source.html#l00030">string-set.h:30</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition</b> <a href="waiter-queue-node_8h_source.html#l00022">waiter-queue-node.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1UnoptimizedCompileFlags_html_a3cb3b587fdfdd6ccefbbbaad67211fda"><div class="ttname"><a href="classv8_1_1internal_1_1UnoptimizedCompileFlags.html#a3cb3b587fdfdd6ccefbbbaad67211fda">v8::internal::UnoptimizedCompileFlags::ForFunctionCompile</a></div><div class="ttdeci">static UnoptimizedCompileFlags ForFunctionCompile(Isolate *isolate, Tagged&lt; SharedFunctionInfo &gt; shared)</div><div class="ttdef"><b>Definition</b> <a href="parse-info_8cc_source.html#l00046">parse-info.cc:46</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Variable_html"><div class="ttname"><a href="classv8_1_1internal_1_1Variable.html">v8::internal::Variable</a></div><div class="ttdef"><b>Definition</b> <a href="variables_8h_source.html#l00021">variables.h:21</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type_html"><div class="ttname"><a href="classv8_1_1internal_1_1compiler_1_1turboshaft_1_1Type.html">v8::internal::compiler::turboshaft::Type</a></div><div class="ttdef"><b>Definition</b> <a href="compiler_2turboshaft_2types_8h_source.html#l00174">types.h:174</a></div></div>
<div class="ttc" id="acommon_2globals_8h_html"><div class="ttname"><a href="common_2globals_8h.html">globals.h</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_a37722a150250e2a5a98e5e0d11e53449"><div class="ttname"><a href="debug-coverage_8cc.html#a37722a150250e2a5a98e5e0d11e53449">start</a></div><div class="ttdeci">int start</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00595">debug-coverage.cc:595</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_abce9f5dc9c83f2639b72024fdee5d388"><div class="ttname"><a href="debug-coverage_8cc.html#abce9f5dc9c83f2639b72024fdee5d388">end</a></div><div class="ttdeci">int end</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00596">debug-coverage.cc:596</a></div></div>
<div class="ttc" id="adebug-scopes_8h_html"><div class="ttname"><a href="debug-scopes_8h.html">debug-scopes.h</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a2af95be39f78db328a2ca5b4322e1696"><div class="ttname"><a href="flag-definitions_8h.html#a2af95be39f78db328a2ca5b4322e1696">mode</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed Starts incremental marking with kUserVisible priority threshold for starting incremental marking immediately in percent of available minor GC task trigger in percent of the current heap limit use a separate phase for stack scanning in scavenge max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage report a tick only when allocated zone memory changes by this amount TracingFlags::gc_stats TracingFlags::gc_stats track native contexts that are expected to be garbage collected verify heap pointers before and after GC use memory reducer for small heaps External memory limits are computed as part of global limits in v8 Heap specifies heap growing factor Perform compaction on full GCs based on V8 s default heuristics Perform compaction on every full GC Perform code space compaction when finalizing a full GC with stack Stress GC compaction to flush out Stress GC compaction by selecting random percent of pages as evacuation candidates Overrides stress_compaction flush of bytecode when it has not been executed recently Flush code when tab goes into the background Use per context worklist for marking force incremental marking for small heaps and run it more often force marking at random points between and force scavenge at random points between and reclaim otherwise unreachable unmodified wrapper objects when possible Delay before memory reducer start virtual randomize memory reservations by ignoring any hints passed when allocating pages use incremental marking for CppHeap cppheap_concurrent_marking c value for membalancer A special constant to balance between memory and space tradeoff The smaller the more memory it uses enable use of SSE4 instructions if available enable use of AVX VNNI instructions if available enable use of POPCNT instruction if available force all emitted branches to be in long mode(MIPS/PPC only)&quot;) DEFINE_BOOL(partial_constant_pool</div></div>
<div class="ttc" id="aflag-definitions_8h_html_af0832cf93cb1767d6e6e287bb7dcdf72"><div class="ttname"><a href="flag-definitions_8h.html#af0832cf93cb1767d6e6e287bb7dcdf72">flags</a></div><div class="ttdeci">other heap size flags(e.g. initial_heap_size) take precedence&quot;) DEFINE_SIZE_T( max_shared_heap_size</div></div>
<div class="ttc" id="aframes-inl_8h_html"><div class="ttname"><a href="frames-inl_8h.html">frames-inl.h</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_ae55190dbead0a94298bdfa37911694e3"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a></div><div class="ttdeci">turboshaft::OptionalOpIndex index</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00071">instruction-selector-ia32.cc:71</a></div></div>
<div class="ttc" id="aintl-objects_8cc_html_a110d0f63b1860324c40bae0391908f88"><div class="ttname"><a href="intl-objects_8cc.html#a110d0f63b1860324c40bae0391908f88">extension</a></div><div class="ttdeci">std::string extension</div><div class="ttdef"><b>Definition</b> <a href="intl-objects_8cc_source.html#l01883">intl-objects.cc:1883</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_a0835767fe473cead88c1afdf3175bce8"><div class="ttname"><a href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a></div><div class="ttdeci">TNode&lt; Context &gt; context</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01496">js-call-reducer.cc:1496</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_a8aab47cc18f1dda0f6b8034f5c64d43d"><div class="ttname"><a href="js-call-reducer_8cc.html#a8aab47cc18f1dda0f6b8034f5c64d43d">receiver</a></div><div class="ttdeci">TNode&lt; Object &gt; receiver</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01499">js-call-reducer.cc:1499</a></div></div>
<div class="ttc" id="ajs-generator-inl_8h_html"><div class="ttname"><a href="js-generator-inl_8h.html">js-generator-inl.h</a></div></div>
<div class="ttc" id="aliveedit_8cc_html_a401e942526aac47cef94f478182486e7"><div class="ttname"><a href="liveedit_8cc.html#a401e942526aac47cef94f478182486e7">position</a></div><div class="ttdeci">int position</div><div class="ttdef"><b>Definition</b> <a href="liveedit_8cc_source.html#l00290">liveedit.cc:290</a></div></div>
<div class="ttc" id="alogging_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00067">logging.h:67</a></div></div>
<div class="ttc" id="alogging_8h_html_a2c0c4cea27d0690467662bb05131b2af"><div class="ttname"><a href="logging_8h.html#a2c0c4cea27d0690467662bb05131b2af">CHECK_IMPLIES</a></div><div class="ttdeci">#define CHECK_IMPLIES(lhs, rhs)</div></div>
<div class="ttc" id="alogging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="alogging_8h_html_a7b9f9517fedacc2a1a56c2bbb9d03688"><div class="ttname"><a href="logging_8h.html#a7b9f9517fedacc2a1a56c2bbb9d03688">DCHECK_NOT_NULL</a></div><div class="ttdeci">#define DCHECK_NOT_NULL(val)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00492">logging.h:492</a></div></div>
<div class="ttc" id="alogging_8h_html_a96a75539aa82216cdde2250a11126ea0"><div class="ttname"><a href="logging_8h.html#a96a75539aa82216cdde2250a11126ea0">DCHECK_IMPLIES</a></div><div class="ttdeci">#define DCHECK_IMPLIES(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00493">logging.h:493</a></div></div>
<div class="ttc" id="alogging_8h_html_a986dc8f4ec6dcd0644efe205c13f8eb7"><div class="ttname"><a href="logging_8h.html#a986dc8f4ec6dcd0644efe205c13f8eb7">DCHECK_NE</a></div><div class="ttdeci">#define DCHECK_NE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00486">logging.h:486</a></div></div>
<div class="ttc" id="alogging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00482">logging.h:482</a></div></div>
<div class="ttc" id="alogging_8h_html_af1a711c8d5520dff78858ddefd2ad668"><div class="ttname"><a href="logging_8h.html#af1a711c8d5520dff78858ddefd2ad668">DCHECK_LT</a></div><div class="ttdeci">#define DCHECK_LT(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00489">logging.h:489</a></div></div>
<div class="ttc" id="alogging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1compiler_1_1turboshaft_html_a89c4bb799509cb17ac917d0e166dbbf9"><div class="ttname"><a href="namespacev8_1_1internal_1_1compiler_1_1turboshaft.html#a89c4bb799509cb17ac917d0e166dbbf9">v8::internal::compiler::turboshaft::Variable</a></div><div class="ttdeci">SnapshotTable&lt; OpIndex, VariableData &gt;::Key Variable</div><div class="ttdef"><b>Definition</b> <a href="operations_8h_source.html#l00082">operations.h:82</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_1_1wasm_html_a89b347b3e67ac1ee47f64bc98acb37b0"><div class="ttname"><a href="namespacev8_1_1internal_1_1wasm.html#a89b347b3e67ac1ee47f64bc98acb37b0">v8::internal::wasm::GetSourcePosition</a></div><div class="ttdeci">int GetSourcePosition(const WasmModule *module, uint32_t func_index, uint32_t byte_offset, bool is_at_number_conversion)</div><div class="ttdef"><b>Definition</b> <a href="wasm-module_8cc_source.html#l00667">wasm-module.cc:667</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00018">api-arguments-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a124a2203c5d93e50971ddc72694d0452"><div class="ttname"><a href="namespacev8_1_1internal.html#a124a2203c5d93e50971ddc72694d0452">v8::internal::InitializationFlag</a></div><div class="ttdeci">InitializationFlag</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02152">globals.h:2152</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a12bba79f0b2c466b43e23e173e34465d"><div class="ttname"><a href="namespacev8_1_1internal.html#a12bba79f0b2c466b43e23e173e34465d">v8::internal::kNullMaybeHandle</a></div><div class="ttdeci">constexpr NullMaybeHandleType kNullMaybeHandle</div><div class="ttdef"><b>Definition</b> <a href="maybe-handles_8h_source.html#l00017">maybe-handles.h:17</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a20971f8a9770697fdde08004c19035a3"><div class="ttname"><a href="namespacev8_1_1internal.html#a20971f8a9770697fdde08004c19035a3">v8::internal::DisallowGarbageCollection</a></div><div class="ttdeci">PerThreadAssertScopeDebugOnly&lt; false, SAFEPOINTS_ASSERT, HEAP_ALLOCATION_ASSERT &gt; DisallowGarbageCollection</div><div class="ttdef"><b>Definition</b> <a href="assert-scope_8h_source.html#l00236">assert-scope.h:236</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a2dcc8fdad115890143437f76839010c3"><div class="ttname"><a href="namespacev8_1_1internal.html#a2dcc8fdad115890143437f76839010c3">v8::internal::IsLexicalVariableMode</a></div><div class="ttdeci">bool IsLexicalVariableMode(VariableMode mode)</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02082">globals.h:2082</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3430752cde9f29d73e97ceed1bce0856"><div class="ttname"><a href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="utils_2utils_8cc_source.html#l00039">utils.cc:39</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370"><div class="ttname"><a href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370">v8::internal::NONE</a></div><div class="ttdeci">@ NONE</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00019">property-details.h:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a36733ae1a3ac277c3ab0a61d1eafbe7c"><div class="ttname"><a href="namespacev8_1_1internal.html#a36733ae1a3ac277c3ab0a61d1eafbe7c">v8::internal::NeedsContext</a></div><div class="ttdeci">NeedsContext</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02689">globals.h:2689</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850">v8::internal::ScopeType</a></div><div class="ttdeci">ScopeType</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01876">globals.h:1876</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850a01dbdbdc814f90f2abce96c42cf80b97"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a01dbdbdc814f90f2abce96c42cf80b97">v8::internal::FUNCTION_SCOPE</a></div><div class="ttdeci">@ FUNCTION_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01881">globals.h:1881</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850a1a3a40723f13aae390bec0a88db3aed1"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a1a3a40723f13aae390bec0a88db3aed1">v8::internal::REPL_MODE_SCOPE</a></div><div class="ttdeci">@ REPL_MODE_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01878">globals.h:1878</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850a455641193d5c4107e97b27e6b13bdd44"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a455641193d5c4107e97b27e6b13bdd44">v8::internal::CLASS_SCOPE</a></div><div class="ttdeci">@ CLASS_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01879">globals.h:1879</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850a48625ba91413781664475508a89a23c4"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a48625ba91413781664475508a89a23c4">v8::internal::EVAL_SCOPE</a></div><div class="ttdeci">@ EVAL_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01880">globals.h:1880</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850a5df1961722ddf2189cc3dedc749c1ec9"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a5df1961722ddf2189cc3dedc749c1ec9">v8::internal::SHADOW_REALM_SCOPE</a></div><div class="ttdeci">@ SHADOW_REALM_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01886">globals.h:1886</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850a62f6317b08d0d6c179c985998226c669"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850a62f6317b08d0d6c179c985998226c669">v8::internal::MODULE_SCOPE</a></div><div class="ttdeci">@ MODULE_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01882">globals.h:1882</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850aa1dc2a583fc19c3636a1c599cda82622"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850aa1dc2a583fc19c3636a1c599cda82622">v8::internal::CATCH_SCOPE</a></div><div class="ttdeci">@ CATCH_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01883">globals.h:1883</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850ae1109491a5aa875d1cc5c3806f9b7ab3"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850ae1109491a5aa875d1cc5c3806f9b7ab3">v8::internal::WITH_SCOPE</a></div><div class="ttdeci">@ WITH_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01885">globals.h:1885</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850ae893dcd5397cf8fcb11a338ce04fa20c"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850ae893dcd5397cf8fcb11a338ce04fa20c">v8::internal::BLOCK_SCOPE</a></div><div class="ttdeci">@ BLOCK_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01884">globals.h:1884</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a434c900ce7c0bf1e00e51ac751092850aeca1dc44304ca2fbbeeb1b11170c3504"><div class="ttname"><a href="namespacev8_1_1internal.html#a434c900ce7c0bf1e00e51ac751092850aeca1dc44304ca2fbbeeb1b11170c3504">v8::internal::SCRIPT_SCOPE</a></div><div class="ttdeci">@ SCRIPT_SCOPE</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01877">globals.h:1877</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4382c244e839ce16a4beafabd1c6bd1d"><div class="ttname"><a href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">v8::internal::Tagged</a></div><div class="ttdeci">Tagged(T object) -&gt; Tagged&lt; T &gt;</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a482c9a1d9c9bab12bfbaaae1bba724f1"><div class="ttname"><a href="namespacev8_1_1internal.html#a482c9a1d9c9bab12bfbaaae1bba724f1">v8::internal::MaybeAssignedFlag</a></div><div class="ttdeci">MaybeAssignedFlag</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02158">globals.h:2158</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a485f6a11285b43e34688e316b858e6e7"><div class="ttname"><a href="namespacev8_1_1internal.html#a485f6a11285b43e34688e316b858e6e7">v8::internal::VariableMode</a></div><div class="ttdeci">VariableMode</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l01948">globals.h:1948</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition</b> <a href="wasm-objects-inl_8h_source.html#l00457">wasm-objects-inl.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5297fd2c72981b2220e6b9a831570fb3"><div class="ttname"><a href="namespacev8_1_1internal.html#a5297fd2c72981b2220e6b9a831570fb3">v8::internal::Tagged&lt; Object &gt;</a></div><div class="ttdeci">Tagged&lt; Object &gt;</div><div class="ttdef"><b>Definition</b> <a href="allocation-site-inl_8h_source.html#l00029">allocation-site-inl.h:30</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a60f13a8c00d0433f9336368824ac21a1"><div class="ttname"><a href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">v8::internal::direct_handle</a></div><div class="ttdeci">V8_INLINE DirectHandle&lt; T &gt; direct_handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="handles-inl_8h_source.html#l00141">handles-inl.h:141</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a62f9ba01cabe0363e57940200d641ea5"><div class="ttname"><a href="namespacev8_1_1internal.html#a62f9ba01cabe0363e57940200d641ea5">v8::internal::flags</a></div><div class="ttdeci">Flag flags[]</div><div class="ttdef"><b>Definition</b> <a href="flags_8cc_source.html#l03697">flags.cc:3697</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab3dfefb1973f869ae10be183def78652"><div class="ttname"><a href="namespacev8_1_1internal.html#ab3dfefb1973f869ae10be183def78652">v8::internal::IsWasmObject</a></div><div class="ttdeci">V8_INLINE bool IsWasmObject(T obj, Isolate *=nullptr)</div><div class="ttdef"><b>Definition</b> <a href="objects_8h_source.html#l00715">objects.h:715</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ab9df0bf289155b5ae1d6da682adf1d6f"><div class="ttname"><a href="namespacev8_1_1internal.html#ab9df0bf289155b5ae1d6da682adf1d6f">v8::internal::handle</a></div><div class="ttdeci">V8_INLINE Handle&lt; T &gt; handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="handles-inl_8h_source.html#l00070">handles-inl.h:70</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_afb7e5cd394b9632dddc2e7807b11b2ab"><div class="ttname"><a href="namespacev8_1_1internal.html#afb7e5cd394b9632dddc2e7807b11b2ab">v8::internal::script</a></div><div class="ttdeci">kInterpreterTrampolineOffset script</div><div class="ttdef"><b>Definition</b> <a href="shared-function-info-inl_8h_source.html#l00116">shared-function-info-inl.h:116</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff82af2c2f7b200915e30bcfedca6f85"><div class="ttname"><a href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">v8::internal::Cast</a></div><div class="ttdeci">Tagged&lt; To &gt; Cast(Tagged&lt; From &gt; value, const v8::SourceLocation &amp;loc=INIT_SOURCE_LOCATION_IN_DEBUG)</div><div class="ttdef"><b>Definition</b> <a href="casting_8h_source.html#l00148">casting.h:148</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00017">api-arguments-inl.h:17</a></div></div>
<div class="ttc" id="aostreams_8h_html"><div class="ttname"><a href="ostreams_8h.html">ostreams.h</a></div></div>
<div class="ttc" id="aparse-info_8h_html"><div class="ttname"><a href="parse-info_8h.html">parse-info.h</a></div></div>
<div class="ttc" id="aparsing_8h_html"><div class="ttname"><a href="parsing_8h.html">parsing.h</a></div></div>
<div class="ttc" id="ascopes_8h_html"><div class="ttname"><a href="scopes_8h.html">scopes.h</a></div></div>
<div class="ttc" id="asource-text-module_8h_html"><div class="ttname"><a href="source-text-module_8h.html">source-text-module.h</a></div></div>
<div class="ttc" id="astring-set_8h_html"><div class="ttname"><a href="string-set_8h.html">string-set.h</a></div></div>
<div class="ttc" id="avalue-mirror_8cc_html_a1ca88ee8dc0e8e51d60cf01ab8e8702a"><div class="ttname"><a href="value-mirror_8cc.html#a1ca88ee8dc0e8e51d60cf01ab8e8702a">value</a></div><div class="ttdeci">std::unique_ptr&lt; ValueMirror &gt; value</div><div class="ttdef"><b>Definition</b> <a href="value-mirror_8cc_source.html#l00950">value-mirror.cc:950</a></div></div>
<div class="ttc" id="avalue-mirror_8cc_html_af6b78a5a5b7a4e51ea415c001e9eb58b"><div class="ttname"><a href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a></div><div class="ttdeci">std::unique_ptr&lt; ValueMirror &gt; key</div><div class="ttdef"><b>Definition</b> <a href="value-mirror_8cc_source.html#l00949">value-mirror.cc:949</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_44d5bc2300862405dbe586a8cb303c4f.html">debug</a></li><li class="navelem"><a class="el" href="debug-scopes_8cc.html">debug-scopes.cc</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
