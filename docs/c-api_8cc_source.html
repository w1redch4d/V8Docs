<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>v8: /home/w1redch4d/Documents/browser-exploitation/v8/v8/src/wasm/c-api.cc Source File</title>
<link rel="icon" href="v8.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="v8.svg"/></td>
  <td id="projectalign">
   <div id="projectname">v8
   </div>
   <div id="projectbrief">V8 is Googleâ€™s open source high-performance JavaScript and WebAssembly engine, written in C++. It is used in Chrome and in Node.js, among others. It implements ECMAScript and WebAssembly, and runs on Windows, macOS, and Linux systems that use x64, IA-32, or ARM processors. V8 can be embedded into any C++ application.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2b581e8501b9ee14adb2dc81ebf46f49.html">wasm</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">c-api.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="c-api_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2019 the V8 project authors. All rights reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Use of this source code is governed by a BSD-style license that can be</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// This implementation is originally from</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// https://github.com/WebAssembly/wasm-c-api/:</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// Copyright 2019 Andreas Rossberg</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">//</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">//</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">//</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">// limitations under the License.</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="c-api_8h.html">src/wasm/c-api.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;include/libplatform/libplatform.h&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;include/v8-initialization.h&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="api-inl_8h.html">src/api/api-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="builtins_8h.html">src/builtins/builtins.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-compiler_8h.html">src/compiler/wasm-compiler.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="flags_2flags_8h.html">src/flags/flags.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="call-site-info-inl_8h.html">src/objects/call-site-info-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="js-collection-inl_8h.html">src/objects/js-collection-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="managed-inl_8h.html">src/objects/managed-inl.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="leb-helper_8h.html">src/wasm/leb-helper.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="module-instantiate_8h.html">src/wasm/module-instantiate.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="signature-hashing_8h.html">src/wasm/signature-hashing.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-arguments_8h.html">src/wasm/wasm-arguments.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-constants_8h.html">src/wasm/wasm-constants.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-engine_8h.html">src/wasm/wasm-engine.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-objects_8h.html">src/wasm/wasm-objects.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-result_8h.html">src/wasm/wasm-result.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="wasm-serialization_8h.html">src/wasm/wasm-serialization.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;third_party/wasm-api/wasm.h&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#ifdef V8_OS_WIN</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="comment">// Setup for Windows DLL export/import. When building the V8 DLL the</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="comment">// BUILDING_V8_SHARED needs to be defined. When building a program which uses</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="comment">// the V8 DLL USING_V8_SHARED needs to be defined. When either building the V8</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="comment">// static library or building a program which uses the V8 static library neither</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">// BUILDING_V8_SHARED nor USING_V8_SHARED should be defined.</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#if !defined(LIBWASM_STATIC) &amp;&amp; defined(USING_V8_SHARED)</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#define WASM_EXPORT __declspec(dllimport)</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#elif !defined(LIBWASM_STATIC)</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#define WASM_EXPORT __declspec(dllexport)</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#define WASM_EXPORT</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#endif  </span><span class="comment">// BUILDING_V8_SHARED</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="preprocessor">#else  </span><span class="comment">// V8_OS_WIN</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="comment">// Setup for Linux shared library export.</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="preprocessor">#if V8_HAS_ATTRIBUTE_VISIBILITY</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="preprocessor">#ifdef BUILDING_V8_SHARED</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="preprocessor">#define WASM_EXPORT __attribute__((visibility(&quot;default&quot;)))</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="preprocessor">#define WASM_EXPORT</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">   73</a></span><span class="preprocessor">#define WASM_EXPORT</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="preprocessor">#endif  </span><span class="comment">// V8_OS_WIN</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="preprocessor">#ifdef ENABLE_VTUNE_JIT_INTERFACE</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#include &quot;third_party/vtune/v8-vtune.h&quot;</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#ifdef WASM_API_DEBUG</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="preprocessor">#error &quot;WASM_API_DEBUG is unsupported&quot;</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="comment">// If you want counters support (what --dump-counters does for the d8 shell),</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="comment">// then set this to 1 (in here, or via -DDUMP_COUNTERS=1 compiler argument).</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ad15a1eb2e5088bcf1fe6f24ba7e7377d">   88</a></span><span class="preprocessor">#define DUMP_COUNTERS 0</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="foldopen" id="foldopen00090" data-start="{" data-end="}">
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="namespacewasm.html">   90</a></span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacewasm.html">wasm</a> {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="comment">// Multi-cage pointer compression mode related note.</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment">// Wasm C-Api is allowed to be used from a thread that&#39;s not bound to any</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment">// Isolate. As a result, in a multi-cage pointer compression mode it&#39;s not</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">// guaranteed that current pointer compression cage base value is initialized</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">// for current thread (see V8HeapCompressionScheme::base_) which makes it</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">// impossible to read compressed pointers from V8 heap objects.</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">// This scope ensures that the pointer compression base value is set according</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">// to respective Wasm C-Api object.</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment">// For all other configurations this scope is a no-op.</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="keyword">using </span>PtrComprCageAccessScope = <a class="code hl_class" href="classv8_1_1internal_1_1PtrComprCageAccessScope.html">i::PtrComprCageAccessScope</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="keyword">auto</span> ReadLebU64(<span class="keyword">const</span> byte_t** <a class="code hl_variable" href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a>) -&gt; uint64_t {</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  uint64_t n = 0;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  uint64_t shift = 0;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  byte_t b;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    b = **<a class="code hl_variable" href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    (*pos)++;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    n += (b &amp; 0x7f) &lt;&lt; shift;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    shift += 7;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>  } <span class="keywordflow">while</span> ((b &amp; 0x80) != 0);</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="mul-fft_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>}</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>ValKind V8ValueTypeToWasm(T v8_valtype)</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  <span class="keyword">requires</span>(std::is_same_v&lt;T, i::wasm::ValueType&gt; ||</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>           std::is_same_v&lt;T, i::wasm::CanonicalValueType&gt;)</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>{</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  <span class="keywordflow">switch</span> (v8_valtype.kind()) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="keywordflow">case</span> i::wasm::kI32:</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>      <span class="keywordflow">return</span> ValKind::I32;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordflow">case</span> i::wasm::kI64:</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>      <span class="keywordflow">return</span> ValKind::I64;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordflow">case</span> i::wasm::kF32:</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>      <span class="keywordflow">return</span> ValKind::F32;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordflow">case</span> i::wasm::kF64:</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>      <span class="keywordflow">return</span> ValKind::F64;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">case</span> i::wasm::kRef:</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordflow">case</span> i::wasm::kRefNull:</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>      <span class="keywordflow">switch</span> (v8_valtype.heap_representation()) {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="keywordflow">case</span> i::wasm::HeapType::kFunc:</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>          <span class="keywordflow">return</span> ValKind::FUNCREF;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <span class="keywordflow">case</span> i::wasm::HeapType::kExtern:</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>          <span class="keywordflow">return</span> ValKind::EXTERNREF;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>          <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>      }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  }</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>}</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>i::wasm::ValueType WasmValKindToV8(ValKind kind) {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <span class="keywordflow">switch</span> (kind) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="keywordflow">case</span> ValKind::I32:</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>      <span class="keywordflow">return</span> i::wasm::kWasmI32;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keywordflow">case</span> ValKind::I64:</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>      <span class="keywordflow">return</span> i::wasm::kWasmI64;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="keywordflow">case</span> ValKind::F32:</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>      <span class="keywordflow">return</span> i::wasm::kWasmF32;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordflow">case</span> ValKind::F64:</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>      <span class="keywordflow">return</span> i::wasm::kWasmF64;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordflow">case</span> ValKind::FUNCREF:</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>      <span class="keywordflow">return</span> i::wasm::kWasmFuncRef;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="keywordflow">case</span> ValKind::EXTERNREF:</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>      <span class="keywordflow">return</span> i::wasm::kWasmExternRef;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>      <span class="comment">// TODO(wasm+): support new value types</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>}</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>Name GetNameFromWireBytes(<span class="keyword">const</span> i::wasm::WireBytesRef&amp; ref,</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>                          <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">v8::base::Vector&lt;const uint8_t&gt;</a> wire_bytes) {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(ref.offset(), wire_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">length</a>());</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  <a class="code hl_define" href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a>(ref.end_offset(), wire_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">length</a>());</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  <span class="keywordflow">if</span> (ref.length() == 0) <span class="keywordflow">return</span> Name::make();</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>  Name name = Name::make_uninitialized(ref.length());</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>  std::memcpy(name.get(), wire_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>() + ref.offset(), ref.length());</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>own&lt;FuncType&gt; FunctionSigToFuncType(<span class="keyword">const</span> i::wasm::FunctionSig* sig) {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  <span class="keywordtype">size_t</span> param_count = sig-&gt;parameter_count();</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  ownvec&lt;ValType&gt; params = ownvec&lt;ValType&gt;::make_uninitialized(param_count);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; param_count; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    params[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = ValType::make(V8ValueTypeToWasm(sig-&gt;GetParam(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  }</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="keywordtype">size_t</span> return_count = sig-&gt;return_count();</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  ownvec&lt;ValType&gt; results = ownvec&lt;ValType&gt;::make_uninitialized(return_count);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; return_count; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = ValType::make(V8ValueTypeToWasm(sig-&gt;GetReturn(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  }</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  <span class="keywordflow">return</span> FuncType::make(std::move(params), std::move(results));</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>}</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>own&lt;ExternType&gt; GetImportExportType(<span class="keyword">const</span> i::wasm::WasmModule* module,</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                                    <span class="keyword">const</span> i::wasm::ImportExportKindCode kind,</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>                                    <span class="keyword">const</span> uint32_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) {</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  <span class="keywordflow">switch</span> (kind) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="keywordflow">case</span> i::wasm::kExternalFunction: {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>      <span class="keywordflow">return</span> FunctionSigToFuncType(module-&gt;functions[<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>].sig);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <span class="keywordflow">case</span> i::wasm::kExternalTable: {</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>      <span class="keyword">const</span> i::wasm::WasmTable&amp; table = <span class="keyword">module</span>-&gt;tables[index];</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>      own&lt;ValType&gt; elem = ValType::make(V8ValueTypeToWasm(table.type));</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>      Limits limits(table.initial_size,</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>                    table.has_maximum_size</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>                        ? v8::base::checked_cast&lt;int32_t&gt;(table.maximum_size)</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>                        : -1);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>      <span class="keywordflow">return</span> TableType::make(std::move(elem), limits);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    }</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="keywordflow">case</span> i::wasm::kExternalMemory: {</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>      <span class="keyword">const</span> i::wasm::WasmMemory&amp; memory = <span class="keyword">module</span>-&gt;memories[index];</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>      Limits limits(memory.initial_pages,</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                    memory.has_maximum_pages</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                        ? v8::base::checked_cast&lt;int32_t&gt;(memory.maximum_pages)</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                        : -1);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>      <span class="keywordflow">return</span> MemoryType::make(limits);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    }</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="keywordflow">case</span> i::wasm::kExternalGlobal: {</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>      <span class="keyword">const</span> i::wasm::WasmGlobal&amp; global = <span class="keyword">module</span>-&gt;globals[index];</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>      own&lt;ValType&gt; content = ValType::make(V8ValueTypeToWasm(global.type));</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>      Mutability mutability =</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>          global.mutability ? Mutability::VAR : Mutability::CONST;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>      <span class="keywordflow">return</span> GlobalType::make(std::move(content), mutability);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    }</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    <span class="keywordflow">case</span> i::wasm::kExternalTag:</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  }</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>}</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="comment">// Auxiliaries</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="foldopen" id="foldopen00234" data-start="{" data-end="}">
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="namespacewasm.html#a998acd0d8e6f311f2be77c1c802f0f23">  234</a></span>[[noreturn]] <span class="keywordtype">void</span> <a class="code hl_function" href="namespacewasm.html#a998acd0d8e6f311f2be77c1c802f0f23">WASM_UNIMPLEMENTED</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* s) {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  std::cerr &lt;&lt; <span class="stringliteral">&quot;Wasm API: &quot;</span> &lt;&lt; s &lt;&lt; <span class="stringliteral">&quot; not supported yet!\n&quot;</span>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  exit(1);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>}</div>
</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno"><a class="line" href="namespacewasm.html#a1159abdb217149e8db975f0037d4bfe7">  240</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacewasm.html#a1159abdb217149e8db975f0037d4bfe7">ignore</a>(T) {}</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> C&gt;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="structwasm_1_1implement.html">  243</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> C&gt;</div>
<div class="foldopen" id="foldopen00246" data-start="{" data-end="}">
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">  246</a></span><span class="keyword">auto</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(C* <a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) -&gt; <span class="keyword">typename</span> <a class="code hl_struct" href="structwasm_1_1implement.html">implement&lt;C&gt;::type</a>* {</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>typename <a class="code hl_struct" href="structwasm_1_1implement.html">implement&lt;C&gt;::type</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>}</div>
</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> C&gt;</div>
<div class="foldopen" id="foldopen00251" data-start="{" data-end="}">
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="namespacewasm.html#ae02eec776e049a9a10878736daaf1911">  251</a></span><span class="keyword">auto</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">const</span> C* <a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) -&gt; <span class="keyword">const</span> <span class="keyword">typename</span> <a class="code hl_struct" href="structwasm_1_1implement.html">implement&lt;C&gt;::type</a>* {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>typename <a class="code hl_struct" href="structwasm_1_1implement.html">implement&lt;C&gt;::type</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>}</div>
</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> C&gt;</div>
<div class="foldopen" id="foldopen00256" data-start="{" data-end="}">
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">  256</a></span><span class="keyword">auto</span> <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal</a>(<span class="keyword">typename</span> <a class="code hl_struct" href="structwasm_1_1implement.html">implement&lt;C&gt;::type</a>* <a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) -&gt; C* {</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>C*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>}</div>
</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> C&gt;</div>
<div class="foldopen" id="foldopen00261" data-start="{" data-end="}">
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno"><a class="line" href="namespacewasm.html#ab3daa9421a8a7dbb23de89b7abdcb9b3">  261</a></span><span class="keyword">auto</span> <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal</a>(<span class="keyword">const</span> <span class="keyword">typename</span> <a class="code hl_struct" href="structwasm_1_1implement.html">implement&lt;C&gt;::type</a>* <a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) -&gt; <span class="keyword">const</span> C* {</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>C*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>}</div>
</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span><span class="comment">// Runtime Environment</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span><span class="comment">// Configuration</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span> </div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno"><a class="line" href="structwasm_1_1ConfigImpl.html">  270</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1ConfigImpl.html">ConfigImpl</a> {};</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00273" data-start="{" data-end="};">
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Config_01_4.html">  273</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Config&gt; {</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Config_01_4.html#a2d621eefc8ad0217c80ac7df4f2a206d">  274</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1ConfigImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1ConfigImpl.html">ConfigImpl</a>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>};</div>
</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Config::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Config::make() -&gt; own&lt;Config&gt; {</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  <span class="keywordflow">return</span> own&lt;Config&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;Config&gt;</a>(<span class="keyword">new</span> (std::nothrow) ConfigImpl()));</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>}</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="comment">// Engine</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="preprocessor">#if DUMP_COUNTERS</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="keyword">class </span>Counter {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxNameSize = 64;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a>* Bind(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">bool</span> is_histogram) {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <span class="keywordflow">for</span> (<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; kMaxNameSize - 1 &amp;&amp; name[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>      <a class="code hl_variable" href="machine-graph-verifier_8cc.html#a7dac8366c11fbcad2f49d85fe8fc4fbe">name_</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(name[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    }</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <a class="code hl_variable" href="machine-graph-verifier_8cc.html#a7dac8366c11fbcad2f49d85fe8fc4fbe">name_</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    is_histogram_ = is_histogram;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="keywordflow">return</span> ptr();</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>  }</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a>* ptr() { <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a6b06728795e8f208c0755874665b3a51">count_</a>; }</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a> <a class="code hl_variable" href="debug-coverage_8cc.html#a86988a65e0d3ece7990c032c159786d6">count</a>() { <span class="keywordflow">return</span> <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a6b06728795e8f208c0755874665b3a51">count_</a>; }</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a> sample_total() { <span class="keywordflow">return</span> sample_total_; }</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>  <span class="keywordtype">bool</span> is_histogram() { <span class="keywordflow">return</span> is_histogram_; }</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>  <span class="keywordtype">void</span> AddSample(int32_t sample) {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a6b06728795e8f208c0755874665b3a51">count_</a>++;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    sample_total_ += sample;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  }</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>  <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a> <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#a6b06728795e8f208c0755874665b3a51">count_</a>;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>  <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a> sample_total_;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  <span class="keywordtype">bool</span> is_histogram_;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  uint8_t <a class="code hl_variable" href="machine-graph-verifier_8cc.html#a7dac8366c11fbcad2f49d85fe8fc4fbe">name_</a>[kMaxNameSize];</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>};</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span> </div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span><span class="keyword">class </span>CounterCollection {</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>  CounterCollection() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  Counter* GetNextCounter() {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <span class="keywordflow">if</span> (counters_in_use_ == kMaxCounters) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="module-compiler_8cc.html#aba33ee421effa5ecbb3fadcbf73dc7e1">counters_</a>[counters_in_use_++];</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>  }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> kMaxCounters = 512;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>  uint32_t counters_in_use_{0};</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>  Counter <a class="code hl_variable" href="module-compiler_8cc.html#aba33ee421effa5ecbb3fadcbf73dc7e1">counters_</a>[kMaxCounters];</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>};</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span><span class="keyword">using </span><a class="code hl_typedef" href="namespacev8.html#a2b8b10281c06598f463ba4b7e4779516">CounterMap</a> = std::unordered_map&lt;std::string, Counter*&gt;;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="foldopen" id="foldopen00332" data-start="{" data-end="};">
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno"><a class="line" href="structwasm_1_1EngineImpl.html">  332</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1EngineImpl.html">EngineImpl</a> {</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno"><a class="line" href="structwasm_1_1EngineImpl.html#a56c4676956f05c2d1e2e7e79e1b485af">  333</a></span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="structwasm_1_1EngineImpl.html#a56c4676956f05c2d1e2e7e79e1b485af">created</a>;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span> </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno"><a class="line" href="structwasm_1_1EngineImpl.html#a92569b281f921a43644ab4eaf7bdda83">  335</a></span>  std::unique_ptr&lt;v8::Platform&gt; <a class="code hl_variable" href="structwasm_1_1EngineImpl.html#a92569b281f921a43644ab4eaf7bdda83">platform</a>;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="preprocessor">#if DUMP_COUNTERS</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>  <span class="keyword">static</span> CounterCollection <a class="code hl_variable" href="module-compiler_8cc.html#aba33ee421effa5ecbb3fadcbf73dc7e1">counters_</a>;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>  <span class="keyword">static</span> CounterMap* counter_map_;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  <span class="keyword">static</span> Counter* GetCounter(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">bool</span> is_histogram) {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="keyword">auto</span> map_entry = counter_map_-&gt;find(name);</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    Counter* counter =</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        map_entry != counter_map_-&gt;end() ? map_entry-&gt;second : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="keywordflow">if</span> (counter == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>      counter = <a class="code hl_variable" href="module-compiler_8cc.html#aba33ee421effa5ecbb3fadcbf73dc7e1">counters_</a>.GetNextCounter();</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>      <span class="keywordflow">if</span> (counter != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        (*counter_map_)[<a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>] = counter;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        counter-&gt;Bind(name, is_histogram);</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>      }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(counter-&gt;is_histogram() == is_histogram);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="keywordflow">return</span> counter;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>  }</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>  <span class="keyword">static</span> <span class="keywordtype">int</span>* LookupCounter(<span class="keyword">const</span> <span class="keywordtype">char</span>* name) {</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    Counter* counter = GetCounter(name, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="keywordflow">if</span> (counter != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>      <span class="keywordflow">return</span> counter-&gt;ptr();</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    }</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>  }</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>  <span class="keyword">static</span> <span class="keywordtype">void</span>* CreateHistogram(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">int</span> min, <span class="keywordtype">int</span> max,</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>                               <span class="keywordtype">size_t</span> buckets) {</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="keywordflow">return</span> GetCounter(name, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>  }</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span> </div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> AddHistogramSample(<span class="keywordtype">void</span>* histogram, <span class="keywordtype">int</span> sample) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    Counter* counter = <span class="keyword">reinterpret_cast&lt;</span>Counter*<span class="keyword">&gt;</span>(histogram);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    counter-&gt;AddSample(sample);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>  }</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="foldopen" id="foldopen00379" data-start="{" data-end="}">
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno"><a class="line" href="structwasm_1_1EngineImpl.html#a5e02592ffd28f600d998406946a1d39d">  379</a></span>  <a class="code hl_function" href="structwasm_1_1EngineImpl.html#a5e02592ffd28f600d998406946a1d39d">EngineImpl</a>() {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    assert(!<a class="code hl_variable" href="structwasm_1_1EngineImpl.html#a56c4676956f05c2d1e2e7e79e1b485af">created</a>);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <a class="code hl_variable" href="structwasm_1_1EngineImpl.html#a56c4676956f05c2d1e2e7e79e1b485af">created</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span><span class="preprocessor">#if DUMP_COUNTERS</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    counter_map_ = <span class="keyword">new</span> CounterMap();</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  }</div>
</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="foldopen" id="foldopen00387" data-start="{" data-end="}">
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno"><a class="line" href="structwasm_1_1EngineImpl.html#aacf7793b7b283807b27f537224347d8b">  387</a></span>  <a class="code hl_function" href="structwasm_1_1EngineImpl.html#aacf7793b7b283807b27f537224347d8b">~EngineImpl</a>() {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span><span class="preprocessor">#if DUMP_COUNTERS</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    std::vector&lt;std::pair&lt;std::string, Counter*&gt;&gt; counters(</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        counter_map_-&gt;begin(), counter_map_-&gt;end());</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    std::sort(counters.begin(), counters.end());</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="comment">// Dump counters in formatted boxes.</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kNameBoxSize = 64;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kValueBoxSize = 13;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;+&quot;</span> &lt;&lt; std::string(kNameBoxSize, <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;+&quot;</span></div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>              &lt;&lt; std::string(kValueBoxSize, <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;+\n&quot;</span>;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;| Name&quot;</span> &lt;&lt; std::string(kNameBoxSize - 5, <span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="stringliteral">&quot;| Value&quot;</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>              &lt;&lt; std::string(kValueBoxSize - 6, <span class="charliteral">&#39; &#39;</span>) &lt;&lt; <span class="stringliteral">&quot;|\n&quot;</span>;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;+&quot;</span> &lt;&lt; std::string(kNameBoxSize, <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;+&quot;</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>              &lt;&lt; std::string(kValueBoxSize, <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;+\n&quot;</span>;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pair : counters) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>      std::string <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a> = pair.first;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>      Counter* counter = pair.second;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>      <span class="keywordflow">if</span> (counter-&gt;is_histogram()) {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;| c:&quot;</span> &lt;&lt; std::setw(kNameBoxSize - 4) &lt;&lt; std::left &lt;&lt; <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>                  &lt;&lt; <span class="stringliteral">&quot; | &quot;</span> &lt;&lt; std::setw(kValueBoxSize - 2) &lt;&lt; std::right</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>                  &lt;&lt; counter-&gt;count() &lt;&lt; <span class="stringliteral">&quot; |\n&quot;</span>;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;| t:&quot;</span> &lt;&lt; std::setw(kNameBoxSize - 4) &lt;&lt; std::left &lt;&lt; <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>                  &lt;&lt; <span class="stringliteral">&quot; | &quot;</span> &lt;&lt; std::setw(kValueBoxSize - 2) &lt;&lt; std::right</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>                  &lt;&lt; counter-&gt;sample_total() &lt;&lt; <span class="stringliteral">&quot; |\n&quot;</span>;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;| &quot;</span> &lt;&lt; std::setw(kNameBoxSize - 2) &lt;&lt; std::left &lt;&lt; <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>                  &lt;&lt; <span class="stringliteral">&quot; | &quot;</span> &lt;&lt; std::setw(kValueBoxSize - 2) &lt;&lt; std::right</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>                  &lt;&lt; counter-&gt;count() &lt;&lt; <span class="stringliteral">&quot; |\n&quot;</span>;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>      }</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    }</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;+&quot;</span> &lt;&lt; std::string(kNameBoxSize, <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;+&quot;</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>              &lt;&lt; std::string(kValueBoxSize, <span class="charliteral">&#39;-&#39;</span>) &lt;&lt; <span class="stringliteral">&quot;+\n&quot;</span>;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <span class="keyword">delete</span> counter_map_;</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    v8::V8::Dispose();</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    v8::V8::DisposePlatform();</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>  }</div>
</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>};</div>
</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span><span class="keywordtype">bool</span> <a class="code hl_variable" href="structwasm_1_1EngineImpl.html#a56c4676956f05c2d1e2e7e79e1b485af">EngineImpl::created</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span><span class="preprocessor">#if DUMP_COUNTERS</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>CounterCollection EngineImpl::counters_;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>CounterMap* EngineImpl::counter_map_;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00434" data-start="{" data-end="};">
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Engine_01_4.html">  434</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Engine&gt; {</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Engine_01_4.html#a399454492ba7fd64488b2f2130f28303">  435</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1EngineImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1EngineImpl.html">EngineImpl</a>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>};</div>
</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Engine::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span> </div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Engine::make(own&lt;Config&gt;&amp;&amp; config) -&gt; own&lt;Engine&gt; {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>  <span class="keyword">auto</span> engine = <span class="keyword">new</span> (std::nothrow) EngineImpl;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <span class="keywordflow">if</span> (!engine) <span class="keywordflow">return</span> own&lt;Engine&gt;();</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>  engine-&gt;platform = <a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">i::v8_flags</a>.single_threaded</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                         ? <a class="code hl_function" href="namespacev8_1_1platform.html#a42d6286e8db8514d460bc28b1b52f56b">v8::platform::NewSingleThreadedDefaultPlatform</a>()</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                         : <a class="code hl_namespace" href="namespacev8.html">v8</a>::platform::NewDefaultPlatform(</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                               <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>::v8_flags.wasm_capi_thread_pool_size);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  v8::V8::InitializePlatform(engine-&gt;platform.get());</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>  v8::V8::Initialize();</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">i::v8_flags</a>.prof) {</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <a class="code hl_function" href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">i::PrintF</a>(</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        <span class="stringliteral">&quot;--prof is currently unreliable for V8&#39;s Wasm-C-API due to &quot;</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        <span class="stringliteral">&quot;fast-c-calls.\n&quot;</span>);</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  }</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keywordflow">return</span> make_own(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;Engine&gt;</a>(engine));</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>}</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span> </div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span><span class="comment">// This should be called somewhat regularly, especially on potentially hot</span></div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span><span class="comment">// sections of pure C++ execution. To achieve that, we call it on API entry</span></div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span><span class="comment">// points that heap-allocate but don&#39;t call into generated code.</span></div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span><span class="comment">// For example, finalization of incremental marking is relying on it.</span></div>
<div class="foldopen" id="foldopen00463" data-start="{" data-end="}">
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno"><a class="line" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">  463</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate) {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  <a class="code hl_class" href="classv8_1_1internal_1_1StackLimitCheck.html">i::StackLimitCheck</a> check(isolate);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>  <span class="keywordflow">if</span> (check.InterruptRequested()) {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    isolate-&gt;stack_guard()-&gt;HandleInterrupts();</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>  }</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>}</div>
</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span><span class="comment">// Stores</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno"><a class="line" href="classwasm_1_1StoreImpl.html#a165eb6bfe781de6418966113fc7b0461">  472</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a165eb6bfe781de6418966113fc7b0461">StoreImpl::destroy</a>() { <span class="keyword">delete</span> <span class="keyword">this</span>; }</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="foldopen" id="foldopen00474" data-start="{" data-end="}">
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno"><a class="line" href="classwasm_1_1StoreImpl.html#ae465c5562e7d96be7ef210160de00221">  474</a></span><a class="code hl_function" href="classwasm_1_1StoreImpl.html#ae465c5562e7d96be7ef210160de00221">StoreImpl::~StoreImpl</a>() {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>  {</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    v8::Isolate::Scope isolate_scope(<a class="code hl_variable" href="classwasm_1_1StoreImpl.html#af473de2fa4ff5146b090a418f4c918f0">isolate_</a>);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="classwasm_1_1StoreImpl.html#af473de2fa4ff5146b090a418f4c918f0">isolate_</a>);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    PtrComprCageAccessScope ptr_compr_cage_access_scope(<a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>);</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a8f158e28d6a29d8bf8459c45ba5e40c2">heap</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Heap.html#a136b1df73e0d77879104b2125d06bfbb">PreciseCollectAllGarbage</a>(</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        i::GCFlag::kForced, i::GarbageCollectionReason::kTesting,</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>        v8::kNoGCCallbackFlags);</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <a class="code hl_function" href="classwasm_1_1StoreImpl.html#ab76235239536dca3130c32b56cffb9a6">context</a>()-&gt;Exit();</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>  }</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>  <a class="code hl_variable" href="classwasm_1_1StoreImpl.html#af473de2fa4ff5146b090a418f4c918f0">isolate_</a>-&gt;Dispose();</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>  <span class="keyword">delete</span> <a class="code hl_variable" href="classwasm_1_1StoreImpl.html#a84bf50f8a3929a948de71177683a3b7f">create_params_</a>.array_buffer_allocator;</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>}</div>
</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="foldopen" id="foldopen00490" data-start="{" data-end="};">
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno"><a class="line" href="structwasm_1_1ManagedData.html">  490</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1ManagedData.html">ManagedData</a> {</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno"><a class="line" href="structwasm_1_1ManagedData.html#a84967c63529eaaad8a2ecdafcd3cc10e">  491</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> i::ExternalPointerTag <a class="code hl_variable" href="structwasm_1_1ManagedData.html#a84967c63529eaaad8a2ecdafcd3cc10e">kManagedTag</a> = i::kWasmManagedDataTag;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="foldopen" id="foldopen00493" data-start="{" data-end="}">
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno"><a class="line" href="structwasm_1_1ManagedData.html#ae2b197ddf6cfc54f63efcefb7afe17de">  493</a></span>  <a class="code hl_function" href="structwasm_1_1ManagedData.html#ae2b197ddf6cfc54f63efcefb7afe17de">ManagedData</a>(<span class="keywordtype">void</span>* info, <span class="keywordtype">void</span> (*<a class="code hl_variable" href="structwasm_1_1ManagedData.html#a2a591fe3cf559ccc476d65f04d5c9731">finalizer</a>)(<span class="keywordtype">void</span>*))</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>      : info(info), <a class="code hl_variable" href="structwasm_1_1ManagedData.html#a2a591fe3cf559ccc476d65f04d5c9731">finalizer</a>(<a class="code hl_variable" href="structwasm_1_1ManagedData.html#a2a591fe3cf559ccc476d65f04d5c9731">finalizer</a>) {}</div>
</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="foldopen" id="foldopen00496" data-start="{" data-end="}">
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno"><a class="line" href="structwasm_1_1ManagedData.html#add880dba132f93fd9a27a26b88a5eb2d">  496</a></span>  <a class="code hl_function" href="structwasm_1_1ManagedData.html#add880dba132f93fd9a27a26b88a5eb2d">~ManagedData</a>() {</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structwasm_1_1ManagedData.html#a2a591fe3cf559ccc476d65f04d5c9731">finalizer</a>) (*finalizer)(<a class="code hl_variable" href="structwasm_1_1ManagedData.html#a4b19d357014fe0cc4b46ebebde7f8a5e">info</a>);</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>  }</div>
</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno"><a class="line" href="structwasm_1_1ManagedData.html#a4b19d357014fe0cc4b46ebebde7f8a5e">  500</a></span>  <span class="keywordtype">void</span>* <a class="code hl_variable" href="structwasm_1_1ManagedData.html#a4b19d357014fe0cc4b46ebebde7f8a5e">info</a>;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno"><a class="line" href="structwasm_1_1ManagedData.html#a2a591fe3cf559ccc476d65f04d5c9731">  501</a></span>  void (*<a class="code hl_variable" href="structwasm_1_1ManagedData.html#a2a591fe3cf559ccc476d65f04d5c9731">finalizer</a>)(<span class="keywordtype">void</span>*);</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>};</div>
</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="foldopen" id="foldopen00504" data-start="{" data-end="}">
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno"><a class="line" href="classwasm_1_1StoreImpl.html#a868257d7622722a140453d7aa86875c3">  504</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a868257d7622722a140453d7aa86875c3">StoreImpl::SetHostInfo</a>(<a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Object&gt;</a> <span class="keywordtype">object</span>, <span class="keywordtype">void</span>* info,</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                            <span class="keywordtype">void</span> (*finalizer)(<span class="keywordtype">void</span>*)) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>  v8::Isolate::Scope isolate_scope(<a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7ce0593afac6404151276f6bd64fdb45">isolate</a>());</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(<a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>());</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>  <span class="comment">// Ideally we would specify the total size kept alive by {info} here,</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>  <span class="comment">// but all we get from the embedder is a {void*}, so our best estimate</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>  <span class="comment">// is the size of the metadata.</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>  <span class="keywordtype">size_t</span> estimated_size = <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structwasm_1_1ManagedData.html">ManagedData</a>);</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Object&gt;</a> wrapper = <a class="code hl_class" href="classv8_1_1internal_1_1Managed.html">i::Managed&lt;ManagedData&gt;::From</a>(</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>      <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>(), estimated_size,</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>      std::make_shared&lt;ManagedData&gt;(info, finalizer));</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>  int32_t hash = i::Object::GetOrCreateHash(*<span class="keywordtype">object</span>, <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>()).value();</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>  i::JSWeakCollection::Set(<a class="code hl_variable" href="classwasm_1_1StoreImpl.html#a12725f4e6cb1a6964313d17ee8cc833f">host_info_map_</a>, <span class="keywordtype">object</span>, wrapper, hash);</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>}</div>
</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="foldopen" id="foldopen00519" data-start="{" data-end="}">
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno"><a class="line" href="classwasm_1_1StoreImpl.html#a89be332b7ee7f6d5dc38f2b28784abe8">  519</a></span><span class="keywordtype">void</span>* <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a89be332b7ee7f6d5dc38f2b28784abe8">StoreImpl::GetHostInfo</a>(<a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Object&gt;</a> <a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>) {</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(<a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>());</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::Object&gt;</a> raw =</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::EphemeronHashTable&gt;</a>(<a class="code hl_variable" href="classwasm_1_1StoreImpl.html#a12725f4e6cb1a6964313d17ee8cc833f">host_info_map_</a>-&gt;table())-&gt;Lookup(<a class="code hl_variable" href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a>);</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>  <span class="keywordflow">if</span> (IsTheHole(raw, <a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>())) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::Managed&lt;ManagedData&gt;</a>&gt;(raw)-&gt;raw()-&gt;info;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>}</div>
</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span> </div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00528" data-start="{" data-end="};">
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Store_01_4.html">  528</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Store&gt; {</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Store_01_4.html#aeedc0bb7c41119d449efc4903aa9ab26">  529</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1StoreImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1StoreImpl.html">StoreImpl</a>;</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>};</div>
</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span> </div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Store::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span> </div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Store::make(Engine*) -&gt; own&lt;Store&gt; {</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>  <span class="keyword">auto</span> store = make_own(<span class="keyword">new</span> (std::nothrow) StoreImpl());</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>  <span class="keywordflow">if</span> (!store) <span class="keywordflow">return</span> own&lt;Store&gt;();</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>  <span class="comment">// Create isolate.</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>  store-&gt;create_params_.array_buffer_allocator =</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>      v8::ArrayBuffer::Allocator::NewDefaultAllocator();</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span><span class="preprocessor">#ifdef ENABLE_VTUNE_JIT_INTERFACE</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>  store-&gt;create_params_.code_event_handler = vTune::GetVtuneCodeEventHandler();</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span><span class="preprocessor">#if DUMP_COUNTERS</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>  store-&gt;create_params_.counter_lookup_callback = EngineImpl::LookupCounter;</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>  store-&gt;create_params_.create_histogram_callback = EngineImpl::CreateHistogram;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>  store-&gt;create_params_.add_histogram_sample_callback =</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>      EngineImpl::AddHistogramSample;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>  v8::Isolate* isolate = v8::Isolate::New(store-&gt;create_params_);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>  <span class="keywordflow">if</span> (!isolate) <span class="keywordflow">return</span> own&lt;Store&gt;();</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  store-&gt;isolate_ = <a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>  isolate-&gt;SetData(0, store.get());</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>  <span class="comment">// We intentionally do not call isolate-&gt;Enter() here, because that would</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>  <span class="comment">// prevent embedders from using stores with overlapping but non-nested</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>  <span class="comment">// lifetimes. The consequence is that Isolate::Current() is dysfunctional</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>  <span class="comment">// and hence must not be called by anything reachable via this file.</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>  {</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    v8::Isolate::Scope isolate_scope(isolate);</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    v8::HandleScope handle_scope(isolate);</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <span class="comment">// Create context.</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    v8::Local&lt;v8::Context&gt; <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a> = v8::Context::New(isolate);</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>.IsEmpty()) <span class="keywordflow">return</span> own&lt;Store&gt;();</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>-&gt;Enter();  <span class="comment">// The Exit() call is in ~StoreImpl.</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    store-&gt;context_ = v8::Eternal&lt;v8::Context&gt;(isolate, <a class="code hl_variable" href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a>);</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    <span class="comment">// Create weak map for Refs with host info.</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* i_isolate = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>);</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    store-&gt;host_info_map_ = i_isolate-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#a0567c99c2a3ff016df9e7abb30688075">global_handles</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1GlobalHandles.html#a486c475da54faf1fe78e4752ed20e23c">Create</a>(</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        *i_isolate-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Isolate.html#ab7dd326c7e0e0d5d2cba90947b2ef48b">factory</a>()-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a23a89e88ffc74afa093c7167f1e986a8">NewJSWeakMap</a>());</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>  }</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>  <span class="comment">// We want stack traces for traps.</span></div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>  <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kStackLimit = 10;</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>  isolate-&gt;SetCaptureStackTraceForUncaughtExceptions(<span class="keyword">true</span>, kStackLimit,</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>                                                     v8::StackTrace::kOverview);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span> </div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>  <span class="keywordflow">return</span> make_own(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;Store&gt;</a>(store.release()));</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>}</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span><span class="comment">// Type Representations</span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span> </div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span><span class="comment">// Value Types</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="foldopen" id="foldopen00587" data-start="{" data-end="};">
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno"><a class="line" href="structwasm_1_1ValTypeImpl.html">  587</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a> {</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno"><a class="line" href="structwasm_1_1ValTypeImpl.html#a0bfbe257148f76ecefae63b882183e8c">  588</a></span>  ValKind <a class="code hl_variable" href="structwasm_1_1ValTypeImpl.html#a0bfbe257148f76ecefae63b882183e8c">kind</a>;</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno"><a class="line" href="structwasm_1_1ValTypeImpl.html#a2c62d0241f1442a7f41129a24d88275d">  590</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="structwasm_1_1ValTypeImpl.html#a2c62d0241f1442a7f41129a24d88275d">ValTypeImpl</a>(ValKind kind) : kind(kind) {}</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>};</div>
</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00594" data-start="{" data-end="};">
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ValType_01_4.html">  594</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;ValType&gt; {</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ValType_01_4.html#ac66bc1223a981a6bce397366ee65da62">  595</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>};</div>
</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno"><a class="line" href="namespacewasm.html#a256444304fb2b0eed6c5c7ad4dd77552">  598</a></span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>* <a class="code hl_variable" href="namespacewasm.html#a256444304fb2b0eed6c5c7ad4dd77552">valtype_i32</a> = <span class="keyword">new</span> <a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>(ValKind::I32);</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno"><a class="line" href="namespacewasm.html#a524e65cedc161b57cda09a566cab3ea0">  599</a></span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>* <a class="code hl_variable" href="namespacewasm.html#a524e65cedc161b57cda09a566cab3ea0">valtype_i64</a> = <span class="keyword">new</span> <a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>(ValKind::I64);</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno"><a class="line" href="namespacewasm.html#af06a962038e038786edf30ca797afb7c">  600</a></span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>* <a class="code hl_variable" href="namespacewasm.html#af06a962038e038786edf30ca797afb7c">valtype_f32</a> = <span class="keyword">new</span> <a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>(ValKind::F32);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno"><a class="line" href="namespacewasm.html#ae9bbb6dc7d63a16ac76362624cf908fe">  601</a></span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>* <a class="code hl_variable" href="namespacewasm.html#ae9bbb6dc7d63a16ac76362624cf908fe">valtype_f64</a> = <span class="keyword">new</span> <a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>(ValKind::F64);</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno"><a class="line" href="namespacewasm.html#abfdc2fcaa6322a069c657b3f677e476d">  602</a></span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>* <a class="code hl_variable" href="namespacewasm.html#abfdc2fcaa6322a069c657b3f677e476d">valtype_externref</a> = <span class="keyword">new</span> <a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>(ValKind::EXTERNREF);</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno"><a class="line" href="namespacewasm.html#a00337c6393ff82f59efe7d26e99af172">  603</a></span><a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>* <a class="code hl_variable" href="namespacewasm.html#a00337c6393ff82f59efe7d26e99af172">valtype_funcref</a> = <span class="keyword">new</span> <a class="code hl_struct" href="structwasm_1_1ValTypeImpl.html">ValTypeImpl</a>(ValKind::FUNCREF);</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span> </div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> ValType::destroy() { this-&gt;~ValType(); }</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> own&lt;ValType&gt; ValType::make(ValKind k) {</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>  ValTypeImpl* valtype;</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  <span class="keywordflow">switch</span> (k) {</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="keywordflow">case</span> ValKind::I32:</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>      valtype = <a class="code hl_variable" href="namespacewasm.html#a256444304fb2b0eed6c5c7ad4dd77552">valtype_i32</a>;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    <span class="keywordflow">case</span> ValKind::I64:</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>      valtype = <a class="code hl_variable" href="namespacewasm.html#a524e65cedc161b57cda09a566cab3ea0">valtype_i64</a>;</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="keywordflow">case</span> ValKind::F32:</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>      valtype = <a class="code hl_variable" href="namespacewasm.html#af06a962038e038786edf30ca797afb7c">valtype_f32</a>;</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="keywordflow">case</span> ValKind::F64:</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>      valtype = <a class="code hl_variable" href="namespacewasm.html#ae9bbb6dc7d63a16ac76362624cf908fe">valtype_f64</a>;</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="keywordflow">case</span> ValKind::EXTERNREF:</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>      valtype = <a class="code hl_variable" href="namespacewasm.html#abfdc2fcaa6322a069c657b3f677e476d">valtype_externref</a>;</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keywordflow">case</span> ValKind::FUNCREF:</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>      valtype = <a class="code hl_variable" href="namespacewasm.html#a00337c6393ff82f59efe7d26e99af172">valtype_funcref</a>;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>      <span class="comment">// TODO(wasm+): support new value types</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>  }</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>  <span class="keywordflow">return</span> own&lt;ValType&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;ValType&gt;</a>(valtype));</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>}</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ValType::copy() const -&gt; own&lt;ValType&gt; { <span class="keywordflow">return</span> make(<a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>()); }</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span> </div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ValType::kind() const -&gt; ValKind { <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;kind; }</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span><span class="comment">// Extern Types</span></div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="foldopen" id="foldopen00641" data-start="{" data-end="};">
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno"><a class="line" href="structwasm_1_1ExternTypeImpl.html">  641</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a> {</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno"><a class="line" href="structwasm_1_1ExternTypeImpl.html#ace6854b72e8d7da6500a2befde86c273">  642</a></span>  ExternKind <a class="code hl_variable" href="structwasm_1_1ExternTypeImpl.html#ace6854b72e8d7da6500a2befde86c273">kind</a>;</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno"><a class="line" href="structwasm_1_1ExternTypeImpl.html#a256037f0ce1146ef79a93aa0217d750f">  644</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="structwasm_1_1ExternTypeImpl.html#a256037f0ce1146ef79a93aa0217d750f">ExternTypeImpl</a>(ExternKind kind) : kind(kind) {}</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno"><a class="line" href="structwasm_1_1ExternTypeImpl.html#a13c0730e11b41e9a45ca4be9aafc470c">  645</a></span>  <span class="keyword">virtual</span> <a class="code hl_function" href="structwasm_1_1ExternTypeImpl.html#a13c0730e11b41e9a45ca4be9aafc470c">~ExternTypeImpl</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>};</div>
</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00649" data-start="{" data-end="};">
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ExternType_01_4.html">  649</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;ExternType&gt; {</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ExternType_01_4.html#a1abafde880eaeaf4f54f6b3f429e06d3">  650</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a>;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>};</div>
</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> ExternType::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span> </div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::copy() const -&gt; own&lt;ExternType&gt; {</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>  <span class="keywordflow">switch</span> (<a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>()) {</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <span class="keywordflow">case</span> ExternKind::FUNC:</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>      <span class="keywordflow">return</span> func()-&gt;copy();</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    <span class="keywordflow">case</span> ExternKind::GLOBAL:</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>      <span class="keywordflow">return</span> global()-&gt;copy();</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    <span class="keywordflow">case</span> ExternKind::TABLE:</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>      <span class="keywordflow">return</span> table()-&gt;copy();</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <span class="keywordflow">case</span> ExternKind::MEMORY:</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>      <span class="keywordflow">return</span> memory()-&gt;copy();</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>  }</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>}</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span> </div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::kind() const -&gt; ExternKind {</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;kind;</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>}</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span> </div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span><span class="comment">// Function Types</span></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span> </div>
<div class="foldopen" id="foldopen00674" data-start="{" data-end="};">
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncTypeImpl.html">  674</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1FuncTypeImpl.html">FuncTypeImpl</a> : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a> {</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncTypeImpl.html#a2b8cba7227bb90db581e9e41eaa4f039">  675</a></span>  ownvec&lt;ValType&gt; <a class="code hl_variable" href="structwasm_1_1FuncTypeImpl.html#a2b8cba7227bb90db581e9e41eaa4f039">params</a>;</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncTypeImpl.html#a8fbd0f69026482c3bf4a290b44084651">  676</a></span>  ownvec&lt;ValType&gt; <a class="code hl_variable" href="structwasm_1_1FuncTypeImpl.html#a8fbd0f69026482c3bf4a290b44084651">results</a>;</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span> </div>
<div class="foldopen" id="foldopen00678" data-start="{" data-end="}">
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncTypeImpl.html#a2a2531a53c5a1a0a011aad71a48064d8">  678</a></span>  <a class="code hl_function" href="structwasm_1_1FuncTypeImpl.html#a2a2531a53c5a1a0a011aad71a48064d8">FuncTypeImpl</a>(ownvec&lt;ValType&gt;&amp; params, ownvec&lt;ValType&gt;&amp; <a class="code hl_variable" href="structwasm_1_1FuncTypeImpl.html#a8fbd0f69026482c3bf4a290b44084651">results</a>)</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>      : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a>(ExternKind::FUNC),</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        params(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(params)),</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        <a class="code hl_variable" href="structwasm_1_1FuncTypeImpl.html#a8fbd0f69026482c3bf4a290b44084651">results</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(<a class="code hl_variable" href="structwasm_1_1FuncTypeImpl.html#a8fbd0f69026482c3bf4a290b44084651">results</a>)) {}</div>
</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>};</div>
</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00685" data-start="{" data-end="};">
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01FuncType_01_4.html">  685</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;FuncType&gt; {</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01FuncType_01_4.html#afa880057cc1752e6a37c5717b7edc285">  686</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1FuncTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1FuncTypeImpl.html">FuncTypeImpl</a>;</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>};</div>
</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span> </div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> FuncType::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span> </div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> FuncType::make(ownvec&lt;ValType&gt;&amp;&amp; params,</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>                                ownvec&lt;ValType&gt;&amp;&amp; results) -&gt; own&lt;FuncType&gt; {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>  <span class="keywordflow">return</span> params &amp;&amp; results</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>             ? own&lt;FuncType&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;FuncType&gt;</a>(<span class="keyword">new</span> (std::nothrow)</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>                                                FuncTypeImpl(params, results)))</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>             : own&lt;FuncType&gt;();</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>}</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span> </div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> FuncType::copy() const -&gt; own&lt;FuncType&gt; {</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>  <span class="keywordflow">return</span> make(params().deep_copy(), results().deep_copy());</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>}</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span> </div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> FuncType::params() const -&gt; const ownvec&lt;ValType&gt;&amp; {</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;params;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>}</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span> </div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> FuncType::results() const -&gt; const ownvec&lt;ValType&gt;&amp; {</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;results;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>}</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span> </div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::func() -&gt; FuncType* {</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::FUNC</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;FuncType&gt;</a>(<span class="keyword">static_cast&lt;</span>FuncTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>             : nullptr;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>}</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span> </div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::func() const -&gt; const FuncType* {</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::FUNC</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;FuncType&gt;</a>(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>FuncTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>             : nullptr;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>}</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span> </div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span><span class="comment">// Global Types</span></div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span> </div>
<div class="foldopen" id="foldopen00725" data-start="{" data-end="};">
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno"><a class="line" href="structwasm_1_1GlobalTypeImpl.html">  725</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1GlobalTypeImpl.html">GlobalTypeImpl</a> : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a> {</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno"><a class="line" href="structwasm_1_1GlobalTypeImpl.html#af01470fcef74964cb6864e745beab7d9">  726</a></span>  own&lt;ValType&gt; <a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#af01470fcef74964cb6864e745beab7d9">content</a>;</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno"><a class="line" href="structwasm_1_1GlobalTypeImpl.html#a6babd80a98c67c5d106be040576b6680">  727</a></span>  Mutability <a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#a6babd80a98c67c5d106be040576b6680">mutability</a>;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="foldopen" id="foldopen00729" data-start="{" data-end="}">
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno"><a class="line" href="structwasm_1_1GlobalTypeImpl.html#abc4ed6aa388102aeb56eac0da8b416d5">  729</a></span>  <a class="code hl_function" href="structwasm_1_1GlobalTypeImpl.html#abc4ed6aa388102aeb56eac0da8b416d5">GlobalTypeImpl</a>(own&lt;ValType&gt;&amp; <a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#af01470fcef74964cb6864e745beab7d9">content</a>, Mutability <a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#a6babd80a98c67c5d106be040576b6680">mutability</a>)</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>      : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a>(ExternKind::GLOBAL),</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        <a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#af01470fcef74964cb6864e745beab7d9">content</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(<a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#af01470fcef74964cb6864e745beab7d9">content</a>)),</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>        <a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#a6babd80a98c67c5d106be040576b6680">mutability</a>(<a class="code hl_variable" href="structwasm_1_1GlobalTypeImpl.html#a6babd80a98c67c5d106be040576b6680">mutability</a>) {}</div>
</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span> </div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno"><a class="line" href="structwasm_1_1GlobalTypeImpl.html#a5e8be6a4a0fa129a497ddeb20969611e">  734</a></span>  <a class="code hl_function" href="structwasm_1_1GlobalTypeImpl.html#a5e8be6a4a0fa129a497ddeb20969611e">~GlobalTypeImpl</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>};</div>
</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span> </div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00738" data-start="{" data-end="};">
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01GlobalType_01_4.html">  738</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;GlobalType&gt; {</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01GlobalType_01_4.html#a9107213ce29cbdeba14543e55d5ff8fd">  739</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1GlobalTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1GlobalTypeImpl.html">GlobalTypeImpl</a>;</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>};</div>
</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span> </div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span><span class="keywordtype">void</span> GlobalType::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span> </div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span><span class="keyword">auto</span> GlobalType::make(own&lt;ValType&gt;&amp;&amp; content, Mutability mutability)</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    -&gt; own&lt;GlobalType&gt; {</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>  <span class="keywordflow">return</span> content ? own&lt;GlobalType&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;GlobalType&gt;</a>(</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>                       <span class="keyword">new</span> (std::nothrow) GlobalTypeImpl(content, mutability)))</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                 : own&lt;GlobalType&gt;();</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>}</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span><span class="keyword">auto</span> GlobalType::copy() const -&gt; own&lt;GlobalType&gt; {</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>  <span class="keywordflow">return</span> make(content()-&gt;copy(), mutability());</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>}</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span> </div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span><span class="keyword">auto</span> GlobalType::content() const -&gt; const ValType* {</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;content.get();</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>}</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span> </div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span><span class="keyword">auto</span> GlobalType::mutability() const -&gt; Mutability {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;mutability;</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>}</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span> </div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span><span class="keyword">auto</span> ExternType::global() -&gt; GlobalType* {</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::GLOBAL</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;GlobalType&gt;</a>(<span class="keyword">static_cast&lt;</span>GlobalTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>             : nullptr;</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>}</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span> </div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span><span class="keyword">auto</span> ExternType::global() const -&gt; const GlobalType* {</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::GLOBAL</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;GlobalType&gt;</a>(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>GlobalTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>             : nullptr;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>}</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span> </div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span><span class="comment">// Table Types</span></div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span> </div>
<div class="foldopen" id="foldopen00777" data-start="{" data-end="};">
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno"><a class="line" href="structwasm_1_1TableTypeImpl.html">  777</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1TableTypeImpl.html">TableTypeImpl</a> : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a> {</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno"><a class="line" href="structwasm_1_1TableTypeImpl.html#a2166fa555e1498739abe5d6227f11325">  778</a></span>  own&lt;ValType&gt; <a class="code hl_variable" href="structwasm_1_1TableTypeImpl.html#a2166fa555e1498739abe5d6227f11325">element</a>;</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno"><a class="line" href="structwasm_1_1TableTypeImpl.html#aa15187ad2e3ce0711cfce5e8ad9ea88e">  779</a></span>  Limits <a class="code hl_variable" href="structwasm_1_1TableTypeImpl.html#aa15187ad2e3ce0711cfce5e8ad9ea88e">limits</a>;</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span> </div>
<div class="foldopen" id="foldopen00781" data-start="{" data-end="}">
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno"><a class="line" href="structwasm_1_1TableTypeImpl.html#aa08dc08265289e9032d307b7a9d0ef33">  781</a></span>  <a class="code hl_function" href="structwasm_1_1TableTypeImpl.html#aa08dc08265289e9032d307b7a9d0ef33">TableTypeImpl</a>(own&lt;ValType&gt;&amp; <a class="code hl_variable" href="structwasm_1_1TableTypeImpl.html#a2166fa555e1498739abe5d6227f11325">element</a>, Limits limits)</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>      : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a>(ExternKind::TABLE),</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        <a class="code hl_variable" href="structwasm_1_1TableTypeImpl.html#a2166fa555e1498739abe5d6227f11325">element</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(<a class="code hl_variable" href="structwasm_1_1TableTypeImpl.html#a2166fa555e1498739abe5d6227f11325">element</a>)),</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        limits(limits) {}</div>
</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno"><a class="line" href="structwasm_1_1TableTypeImpl.html#a53bfde6f480d88b26366ee64e47edc5e">  786</a></span>  <a class="code hl_function" href="structwasm_1_1TableTypeImpl.html#a53bfde6f480d88b26366ee64e47edc5e">~TableTypeImpl</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>};</div>
</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span> </div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00790" data-start="{" data-end="};">
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01TableType_01_4.html">  790</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;TableType&gt; {</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01TableType_01_4.html#a322b1298186c59b1a75a1bef2053a998">  791</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1TableTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1TableTypeImpl.html">TableTypeImpl</a>;</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>};</div>
</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span> </div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> TableType::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span> </div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> TableType::make(own&lt;ValType&gt;&amp;&amp; element, Limits limits)</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    -&gt; own&lt;TableType&gt; {</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>  <span class="keywordflow">return</span> element ? own&lt;TableType&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;TableType&gt;</a>(</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>                       <span class="keyword">new</span> (std::nothrow) TableTypeImpl(element, limits)))</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>                 : own&lt;TableType&gt;();</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>}</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span> </div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> TableType::copy() const -&gt; own&lt;TableType&gt; {</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>  <span class="keywordflow">return</span> make(element()-&gt;copy(), limits());</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>}</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span> </div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> TableType::element() const -&gt; const ValType* {</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;element.get();</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>}</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span> </div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> TableType::limits() const -&gt; const Limits&amp; {</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;limits;</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>}</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span> </div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::table() -&gt; TableType* {</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::TABLE</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;TableType&gt;</a>(<span class="keyword">static_cast&lt;</span>TableTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>             : nullptr;</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>}</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span> </div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::table() const -&gt; const TableType* {</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::TABLE</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;TableType&gt;</a>(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>TableTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>             : nullptr;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>}</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span> </div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span><span class="comment">// Memory Types</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span> </div>
<div class="foldopen" id="foldopen00829" data-start="{" data-end="};">
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno"><a class="line" href="structwasm_1_1MemoryTypeImpl.html">  829</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1MemoryTypeImpl.html">MemoryTypeImpl</a> : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a> {</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno"><a class="line" href="structwasm_1_1MemoryTypeImpl.html#a700b7778d6589db74f2c1cd28c77553e">  830</a></span>  Limits <a class="code hl_variable" href="structwasm_1_1MemoryTypeImpl.html#a700b7778d6589db74f2c1cd28c77553e">limits</a>;</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span> </div>
<div class="foldopen" id="foldopen00832" data-start="{" data-end="}">
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno"><a class="line" href="structwasm_1_1MemoryTypeImpl.html#a38eec6dab18901f9dd8c4fa1f84223e5">  832</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="structwasm_1_1MemoryTypeImpl.html#a38eec6dab18901f9dd8c4fa1f84223e5">MemoryTypeImpl</a>(Limits limits)</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>      : <a class="code hl_struct" href="structwasm_1_1ExternTypeImpl.html">ExternTypeImpl</a>(ExternKind::MEMORY), limits(limits) {}</div>
</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span> </div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno"><a class="line" href="structwasm_1_1MemoryTypeImpl.html#abf2f1e08007ce360a07776cd194b102a">  835</a></span>  <a class="code hl_function" href="structwasm_1_1MemoryTypeImpl.html#abf2f1e08007ce360a07776cd194b102a">~MemoryTypeImpl</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>};</div>
</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span> </div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00839" data-start="{" data-end="};">
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01MemoryType_01_4.html">  839</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;MemoryType&gt; {</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01MemoryType_01_4.html#aa76528adefc0507b594494aa2db7760a">  840</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1MemoryTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1MemoryTypeImpl.html">MemoryTypeImpl</a>;</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>};</div>
</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span> </div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> MemoryType::make(Limits limits) -&gt; own&lt;MemoryType&gt; {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>  <span class="keywordflow">return</span> own&lt;MemoryType&gt;(</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>      <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;MemoryType&gt;</a>(<span class="keyword">new</span> (std::nothrow) <a class="code hl_struct" href="structwasm_1_1MemoryTypeImpl.html">MemoryTypeImpl</a>(limits)));</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>}</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span><span class="keywordtype">void</span> MemoryType::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span> </div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> MemoryType::copy() const -&gt; own&lt;MemoryType&gt; {</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>  <span class="keywordflow">return</span> MemoryType::make(limits());</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>}</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span> </div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> MemoryType::limits() const -&gt; const Limits&amp; {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;limits;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>}</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span> </div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::memory() -&gt; MemoryType* {</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::MEMORY</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;MemoryType&gt;</a>(<span class="keyword">static_cast&lt;</span>MemoryTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>             : nullptr;</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>}</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span> </div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExternType::memory() const -&gt; const MemoryType* {</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::MEMORY</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>             ? <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;MemoryType&gt;</a>(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>MemoryTypeImpl*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)))</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>             : nullptr;</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>}</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span> </div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span><span class="comment">// Import Types</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span> </div>
<div class="foldopen" id="foldopen00872" data-start="{" data-end="};">
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno"><a class="line" href="structwasm_1_1ImportTypeImpl.html">  872</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1ImportTypeImpl.html">ImportTypeImpl</a> {</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno"><a class="line" href="structwasm_1_1ImportTypeImpl.html#af2eaa9838d45779f5b6fa52a2d940d59">  873</a></span>  Name <a class="code hl_variable" href="structwasm_1_1ImportTypeImpl.html#af2eaa9838d45779f5b6fa52a2d940d59">module</a>;</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno"><a class="line" href="structwasm_1_1ImportTypeImpl.html#ab51dd4bd7712a4cb7151d226b51e2d45">  874</a></span>  Name <a class="code hl_variable" href="structwasm_1_1ImportTypeImpl.html#ab51dd4bd7712a4cb7151d226b51e2d45">name</a>;</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno"><a class="line" href="structwasm_1_1ImportTypeImpl.html#a7e9076199f3ba5f150595578d5764d36">  875</a></span>  own&lt;ExternType&gt; <a class="code hl_variable" href="structwasm_1_1ImportTypeImpl.html#a7e9076199f3ba5f150595578d5764d36">type</a>;</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span> </div>
<div class="foldopen" id="foldopen00877" data-start="{" data-end="}">
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno"><a class="line" href="structwasm_1_1ImportTypeImpl.html#a62c6ae0843efc661e32bc42550bad33b">  877</a></span>  <a class="code hl_function" href="structwasm_1_1ImportTypeImpl.html#a62c6ae0843efc661e32bc42550bad33b">ImportTypeImpl</a>(Name&amp; <a class="code hl_variable" href="structwasm_1_1ImportTypeImpl.html#af2eaa9838d45779f5b6fa52a2d940d59">module</a>, Name&amp; name, own&lt;ExternType&gt;&amp; type)</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>      : <a class="code hl_variable" href="structwasm_1_1ImportTypeImpl.html#af2eaa9838d45779f5b6fa52a2d940d59">module</a>(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(<a class="code hl_variable" href="structwasm_1_1ImportTypeImpl.html#af2eaa9838d45779f5b6fa52a2d940d59">module</a>)),</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        name(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(name)),</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        type(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(type)) {}</div>
</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>};</div>
</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span> </div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00884" data-start="{" data-end="};">
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ImportType_01_4.html">  884</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;ImportType&gt; {</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ImportType_01_4.html#a91cfe4a37a7d219b2c66ba2ef52c3e4e">  885</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1ImportTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1ImportTypeImpl.html">ImportTypeImpl</a>;</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>};</div>
</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span> </div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> ImportType::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span> </div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ImportType::make(Name&amp;&amp; module, Name&amp;&amp; name,</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>                                  own&lt;ExternType&gt;&amp;&amp; type) -&gt; own&lt;ImportType&gt; {</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>  <span class="keywordflow">return</span> <span class="keyword">module</span> &amp;&amp; name &amp;&amp; type</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>             ? own&lt;ImportType&gt;(seal&lt;ImportType&gt;(</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>                   new (std::nothrow) ImportTypeImpl(module, name, type)))</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>             : own&lt;ImportType&gt;();</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>}</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span> </div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ImportType::copy() const -&gt; own&lt;ImportType&gt; {</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>  <span class="keywordflow">return</span> make(module().copy(), <a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>().copy(), <a class="code hl_variable" href="wasm-inlining-into-js_8cc.html#a66874a4e937e4192b2b42e57f55251e8">type</a>()-&gt;copy());</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>}</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ImportType::module() const -&gt; const Name&amp; {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;module;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>}</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span> </div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ImportType::name() const -&gt; const Name&amp; {</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;name;</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>}</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span> </div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ImportType::type() const -&gt; const ExternType* {</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;type.get();</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>}</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span> </div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span><span class="comment">// Export Types</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span> </div>
<div class="foldopen" id="foldopen00916" data-start="{" data-end="};">
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno"><a class="line" href="structwasm_1_1ExportTypeImpl.html">  916</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1ExportTypeImpl.html">ExportTypeImpl</a> {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno"><a class="line" href="structwasm_1_1ExportTypeImpl.html#afe9d56d26373cf31f5ae00ea16cccbba">  917</a></span>  Name <a class="code hl_variable" href="structwasm_1_1ExportTypeImpl.html#afe9d56d26373cf31f5ae00ea16cccbba">name</a>;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno"><a class="line" href="structwasm_1_1ExportTypeImpl.html#a63bf551182d97763047c3582872a81a9">  918</a></span>  own&lt;ExternType&gt; <a class="code hl_variable" href="structwasm_1_1ExportTypeImpl.html#a63bf551182d97763047c3582872a81a9">type</a>;</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span> </div>
<div class="foldopen" id="foldopen00920" data-start="{" data-end="}">
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno"><a class="line" href="structwasm_1_1ExportTypeImpl.html#a5dd774047b879db0e906186171747938">  920</a></span>  <a class="code hl_function" href="structwasm_1_1ExportTypeImpl.html#a5dd774047b879db0e906186171747938">ExportTypeImpl</a>(Name&amp; name, own&lt;ExternType&gt;&amp; type)</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>      : name(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(name)), type(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(type)) {}</div>
</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>};</div>
</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00925" data-start="{" data-end="};">
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ExportType_01_4.html">  925</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;ExportType&gt; {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01ExportType_01_4.html#a727ab00566a3744afcdc0f8c31fb8933">  926</a></span>  <span class="keyword">using </span><a class="code hl_struct" href="structwasm_1_1ExportTypeImpl.html">type</a> = <a class="code hl_struct" href="structwasm_1_1ExportTypeImpl.html">ExportTypeImpl</a>;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>};</div>
</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span> </div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> ExportType::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span> </div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExportType::make(Name&amp;&amp; name, own&lt;ExternType&gt;&amp;&amp; type)</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>    -&gt; own&lt;ExportType&gt; {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>  <span class="keywordflow">return</span> name &amp;&amp; type ? own&lt;ExportType&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;ExportType&gt;</a>(</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                            <span class="keyword">new</span> (std::nothrow) ExportTypeImpl(name, type)))</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                      : own&lt;ExportType&gt;();</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>}</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span> </div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExportType::copy() const -&gt; own&lt;ExportType&gt; {</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>  <span class="keywordflow">return</span> make(<a class="code hl_variable" href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a>().copy(), <a class="code hl_variable" href="wasm-inlining-into-js_8cc.html#a66874a4e937e4192b2b42e57f55251e8">type</a>()-&gt;copy());</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>}</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span> </div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExportType::name() const -&gt; const Name&amp; {</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;name;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>}</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span> </div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> ExportType::type() const -&gt; const ExternType* {</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;type.get();</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>}</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span> </div>
<div class="foldopen" id="foldopen00950" data-start="{" data-end="}">
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno"><a class="line" href="namespacewasm.html#aacbef3fe5bcf9124421156872f7c20eb">  950</a></span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::String&gt;</a> <a class="code hl_function" href="namespacewasm.html#aacbef3fe5bcf9124421156872f7c20eb">VecToString</a>(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate,</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>                                 <span class="keyword">const</span> vec&lt;byte_t&gt;&amp; chars) {</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>  <span class="keywordtype">size_t</span> length = chars.size();</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>  <span class="comment">// Some, but not all, {chars} vectors we get here are null-terminated,</span></div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>  <span class="comment">// so let&#39;s be robust to that.</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>  <span class="keywordflow">if</span> (length &gt; 0 &amp;&amp; chars[length - 1] == 0) length--;</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>  <span class="keywordflow">return</span> isolate-&gt;factory()</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>      -&gt;NewStringFromUtf8({chars.get(), length})</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>      .ToHandleChecked();</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>}</div>
</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span> </div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span><span class="comment">// References</span></div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span> </div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> Ref, <span class="keyword">class</span> JSType&gt;</div>
<div class="foldopen" id="foldopen00964" data-start="{" data-end="};">
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html">  964</a></span><span class="keyword">class </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl</a> {</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span> <span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00966" data-start="{" data-end="}">
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">  966</a></span>  <span class="keyword">static</span> own&lt;Ref&gt; <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">make</a>(<a class="code hl_class" href="classwasm_1_1StoreImpl.html">StoreImpl</a>* store, <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;JSType&gt;</a> obj) {</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>    <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl</a>* self = <span class="keyword">new</span> (std::nothrow) <a class="code hl_function" href="classwasm_1_1RefImpl.html#a177c1c84bc4dd0ba6b9aa9589718fd54">RefImpl</a>();</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>    <span class="keywordflow">if</span> (!self) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>    self-&gt;<a class="code hl_variable" href="classwasm_1_1RefImpl.html#a2dd84fffb16c2c76be3c3f4a52527cc4">store_</a> = <a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    self-&gt;<a class="code hl_variable" href="classwasm_1_1RefImpl.html#aa5b37df9cc1cea2870d82eab4e1a1a09">val_</a> = store-&gt;i_isolate()-&gt;global_handles()-&gt;Create(*obj);</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="keywordflow">return</span> make_own(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;Ref&gt;</a>(self));</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>  }</div>
</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span> </div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a3b3dd34d28a1907de30fcb6ddb268df9">  975</a></span>  <a class="code hl_function" href="classwasm_1_1RefImpl.html#a3b3dd34d28a1907de30fcb6ddb268df9">~RefImpl</a>() { i::GlobalHandles::Destroy(<a class="code hl_function" href="classwasm_1_1RefImpl.html#ac93f05555350ceaa8bd7be458a001dac">location</a>()); }</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span> </div>
<div class="foldopen" id="foldopen00977" data-start="{" data-end="}">
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a98b1028a88b4e8dce130a2bfae063fd7">  977</a></span>  own&lt;Ref&gt; <a class="code hl_function" href="classwasm_1_1RefImpl.html#a98b1028a88b4e8dce130a2bfae063fd7">copy</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    v8::Isolate::Scope isolate_scope(<a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>()-&gt;<a class="code hl_function" href="classwasm_1_1RefImpl.html#a319283af92d10eb7bba3e44ebad9d9c2">isolate</a>());</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">make</a>(<a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>(), <a class="code hl_function" href="classwasm_1_1RefImpl.html#aa4fc43e9bd0b9b7b867c6af59072f73c">v8_object</a>());</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>  }</div>
</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span> </div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">  982</a></span>  <a class="code hl_class" href="classwasm_1_1StoreImpl.html">StoreImpl</a>* <a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classwasm_1_1RefImpl.html#a2dd84fffb16c2c76be3c3f4a52527cc4">store_</a>; }</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span> </div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a319283af92d10eb7bba3e44ebad9d9c2">  984</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* <a class="code hl_function" href="classwasm_1_1RefImpl.html#a319283af92d10eb7bba3e44ebad9d9c2">isolate</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>()-&gt;<a class="code hl_function" href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">i_isolate</a>(); }</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span> </div>
<div class="foldopen" id="foldopen00986" data-start="{" data-end="}">
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#aa4fc43e9bd0b9b7b867c6af59072f73c">  986</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;JSType&gt;</a> <a class="code hl_function" href="classwasm_1_1RefImpl.html#aa4fc43e9bd0b9b7b867c6af59072f73c">v8_object</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span><span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    PtrComprCageAccessScope ptr_compr_cage_access_scope(<a class="code hl_function" href="classwasm_1_1RefImpl.html#a319283af92d10eb7bba3e44ebad9d9c2">isolate</a>());</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span><span class="preprocessor">#endif  </span><span class="comment">// DEBUG</span></div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;JSType&gt;</a>(<a class="code hl_variable" href="classwasm_1_1RefImpl.html#aa5b37df9cc1cea2870d82eab4e1a1a09">val_</a>);</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>  }</div>
</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span> </div>
<div class="foldopen" id="foldopen00993" data-start="{" data-end="}">
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a0b0243bd24f5c7329edca604dc590802">  993</a></span>  <span class="keywordtype">void</span>* <a class="code hl_function" href="classwasm_1_1RefImpl.html#a0b0243bd24f5c7329edca604dc590802">get_host_info</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>    v8::Isolate::Scope isolate_scope(<a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>()-&gt;<a class="code hl_function" href="classwasm_1_1RefImpl.html#a319283af92d10eb7bba3e44ebad9d9c2">isolate</a>());</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>()-&gt;<a class="code hl_function" href="classwasm_1_1StoreImpl.html#a89be332b7ee7f6d5dc38f2b28784abe8">GetHostInfo</a>(<a class="code hl_function" href="classwasm_1_1RefImpl.html#aa4fc43e9bd0b9b7b867c6af59072f73c">v8_object</a>());</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>  }</div>
</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span> </div>
<div class="foldopen" id="foldopen00998" data-start="{" data-end="}">
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a022d2c439ab02cac93707697994a7c27">  998</a></span>  <span class="keywordtype">void</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a022d2c439ab02cac93707697994a7c27">set_host_info</a>(<span class="keywordtype">void</span>* info, <span class="keywordtype">void</span> (*finalizer)(<span class="keywordtype">void</span>*)) {</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    v8::Isolate::Scope isolate_scope(<a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>()-&gt;<a class="code hl_function" href="classwasm_1_1RefImpl.html#a319283af92d10eb7bba3e44ebad9d9c2">isolate</a>());</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    <a class="code hl_function" href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">store</a>()-&gt;<a class="code hl_function" href="classwasm_1_1StoreImpl.html#a868257d7622722a140453d7aa86875c3">SetHostInfo</a>(<a class="code hl_function" href="classwasm_1_1RefImpl.html#aa4fc43e9bd0b9b7b867c6af59072f73c">v8_object</a>(), info, finalizer);</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>  }</div>
</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span> </div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a177c1c84bc4dd0ba6b9aa9589718fd54"> 1004</a></span>  <a class="code hl_function" href="classwasm_1_1RefImpl.html#a177c1c84bc4dd0ba6b9aa9589718fd54">RefImpl</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span> </div>
<div class="foldopen" id="foldopen01006" data-start="{" data-end="}">
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#ac93f05555350ceaa8bd7be458a001dac"> 1006</a></span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a>* <a class="code hl_function" href="classwasm_1_1RefImpl.html#ac93f05555350ceaa8bd7be458a001dac">location</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="classwasm_1_1RefImpl.html#aa5b37df9cc1cea2870d82eab4e1a1a09">val_</a>.address());</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>  }</div>
</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span> </div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#aa5b37df9cc1cea2870d82eab4e1a1a09"> 1010</a></span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::JSReceiver&gt;</a> <a class="code hl_variable" href="classwasm_1_1RefImpl.html#aa5b37df9cc1cea2870d82eab4e1a1a09">val_</a>;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"><a class="line" href="classwasm_1_1RefImpl.html#a2dd84fffb16c2c76be3c3f4a52527cc4"> 1011</a></span>  <a class="code hl_class" href="classwasm_1_1StoreImpl.html">StoreImpl</a>* <a class="code hl_variable" href="classwasm_1_1RefImpl.html#a2dd84fffb16c2c76be3c3f4a52527cc4">store_</a>;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>};</div>
</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span> </div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01015" data-start="{" data-end="};">
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Ref_01_4.html"> 1015</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Ref&gt; {</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Ref_01_4.html#aadc9aa10180f67f6059056e8198b7658"> 1016</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Ref, i::JSReceiver&gt;</a>;</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>};</div>
</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Ref::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span> </div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Ref::copy() const -&gt; own&lt;Ref&gt; { <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy(); }</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span> </div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Ref::same(<span class="keyword">const</span> Ref* that) <span class="keyword">const</span> -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>  <span class="keywordflow">return</span> i::Object::SameValue(*<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object(),</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>                              *<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(that)-&gt;v8_object());</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>}</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span> </div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Ref::get_host_info() const -&gt; <span class="keywordtype">void</span>* {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;get_host_info();</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>}</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span> </div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Ref::set_host_info(<span class="keywordtype">void</span>* info, <span class="keywordtype">void</span> (*finalizer)(<span class="keywordtype">void</span>*)) {</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>  <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;set_host_info(info, finalizer);</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>}</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span> </div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span><span class="comment">// Runtime Objects</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span> </div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span><span class="comment">// Frames</span></div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span> </div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span> </div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span><span class="keyword">struct </span>FrameImpl {</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>  FrameImpl(own&lt;Instance&gt;&amp;&amp; instance, uint32_t func_index, <span class="keywordtype">size_t</span> func_offset,</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>            <span class="keywordtype">size_t</span> module_offset)</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>      : instance(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(instance)),</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>        func_index(func_index),</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>        func_offset(func_offset),</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        module_offset(module_offset) {}</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span> </div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>  own&lt;Instance&gt; instance;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>  uint32_t func_index;</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>  <span class="keywordtype">size_t</span> func_offset;</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>  <span class="keywordtype">size_t</span> module_offset;</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>};</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span> </div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span> </div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01063" data-start="{" data-end="};">
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Frame_01_4.html"> 1063</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Frame&gt; {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Frame_01_4.html#a07796ae516ba558982361153381d53f1"> 1064</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="structwasm_1_1implement_3_01Frame_01_4.html#a07796ae516ba558982361153381d53f1">type</a> = FrameImpl;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>};</div>
</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span> </div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Frame::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span> </div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> own&lt;Frame&gt; Frame::copy()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>  <span class="keyword">auto</span> self = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>  <span class="keywordflow">return</span> own&lt;Frame&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;Frame&gt;</a>(</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>      <span class="keyword">new</span> (std::nothrow) FrameImpl(self-&gt;instance-&gt;copy(), self-&gt;func_index,</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>                                   self-&gt;func_offset, self-&gt;module_offset)));</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>}</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span> </div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> Instance* Frame::instance()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;instance.get();</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>}</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span> </div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> uint32_t Frame::func_index()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;func_index;</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>}</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span> </div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">size_t</span> Frame::func_offset()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;func_offset;</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>}</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span> </div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">size_t</span> Frame::module_offset()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;module_offset;</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>}</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span> </div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span><span class="comment">// Traps</span></div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span> </div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01095" data-start="{" data-end="};">
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Trap_01_4.html"> 1095</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Trap&gt; {</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Trap_01_4.html#acc9d897f0afa793c17ae4be2f01483f7"> 1096</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Trap, i::JSReceiver&gt;</a>;</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>};</div>
</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span> </div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Trap::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span> </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Trap::copy() const -&gt; own&lt;Trap&gt; { <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy(); }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span> </div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Trap::make(Store* store_abs, <span class="keyword">const</span> Message&amp; message)</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>    -&gt; own&lt;Trap&gt; {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>  <span class="keyword">auto</span> store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::String&gt;</a> <span class="keywordtype">string</span> = <a class="code hl_function" href="namespacewasm.html#aacbef3fe5bcf9124421156872f7c20eb">VecToString</a>(isolate, message);</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::JSObject&gt;</a> exception =</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>      isolate-&gt;factory()-&gt;NewError(isolate-&gt;error_function(), <span class="keywordtype">string</span>);</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>  i::JSObject::AddProperty(isolate, exception,</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>                           isolate-&gt;factory()-&gt;wasm_uncatchable_symbol(),</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                           isolate-&gt;factory()-&gt;true_value(), <a class="code hl_enumvalue" href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370">i::NONE</a>);</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Trap&gt;::type::make</a>(store, exception);</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>}</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span> </div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Trap::message() const -&gt; Message {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>  <span class="keyword">auto</span> isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;isolate();</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span> </div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSMessageObject&gt;</a> message =</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>      isolate-&gt;CreateMessage(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object(), <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::String&gt;</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = i::MessageHandler::GetMessage(isolate, message);</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>  <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = i::String::Flatten(isolate, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>);  <span class="comment">// For performance.</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>  <span class="keywordtype">size_t</span> length = 0;</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>  std::unique_ptr&lt;char[]&gt; utf8 = <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>-&gt;ToCString(&amp;length);</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>  <span class="keywordflow">return</span> vec&lt;byte_t&gt;::adopt(length, utf8.release());</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>}</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span> </div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span> </div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>own&lt;Instance&gt; GetInstance(StoreImpl* store,</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>                          <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmInstanceObject&gt;</a> instance);</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span> </div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>own&lt;Frame&gt; CreateFrameFromInternal(<a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::FixedArray&gt;</a> frames,</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>                                   <span class="keywordtype">int</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate,</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>                                   StoreImpl* store) {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::CallSiteInfo&gt;</a> frame(</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::CallSiteInfo&gt;</a>(frames-&gt;get(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>)), isolate);</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmInstanceObject&gt;</a> instance(frame-&gt;GetWasmInstance(), isolate);</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>  uint32_t func_index = frame-&gt;GetWasmFunctionIndex();</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>  <span class="keywordtype">size_t</span> module_offset = i::CallSiteInfo::GetSourcePosition(frame);</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>  <span class="keywordtype">size_t</span> func_offset = module_offset - i::wasm::GetWasmFunctionOffset(</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                                           instance-&gt;module(), func_index);</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>  <span class="keywordflow">return</span> own&lt;Frame&gt;(<a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;Frame&gt;</a>(<span class="keyword">new</span> (std::nothrow) FrameImpl(</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>      GetInstance(store, instance), func_index, func_offset, module_offset)));</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>}</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span> </div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span> </div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>own&lt;Frame&gt; Trap::origin()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>());</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span> </div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::FixedArray&gt;</a> frames =</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>      isolate-&gt;GetSimpleStackTrace(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object());</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>  <span class="keywordflow">if</span> (frames-&gt;length() == 0) {</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>    <span class="keywordflow">return</span> own&lt;Frame&gt;();</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>  }</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>  <span class="keywordflow">return</span> CreateFrameFromInternal(frames, 0, isolate, <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="flag-definitions_8h.html#a5a70311d99b5e08c265b90f73f12c945">store</a>());</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>}</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span> </div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>ownvec&lt;Frame&gt; Trap::trace()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::FixedArray&gt;</a> frames =</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>      isolate-&gt;GetSimpleStackTrace(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object());</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>  <span class="keywordtype">int</span> num_frames = frames-&gt;length();</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>  <span class="comment">// {num_frames} can be 0; the code below can handle that case.</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>  ownvec&lt;Frame&gt; <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = ownvec&lt;Frame&gt;::make_uninitialized(num_frames);</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_frames; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] =</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>        CreateFrameFromInternal(frames, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, isolate, <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="flag-definitions_8h.html#a5a70311d99b5e08c265b90f73f12c945">store</a>());</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>  }</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>;</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>}</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span> </div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span><span class="comment">// Foreign Objects</span></div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span> </div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01189" data-start="{" data-end="};">
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Foreign_01_4.html"> 1189</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Foreign&gt; {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Foreign_01_4.html#a4fae3be00085918325ca45e451408d59"> 1190</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Foreign, i::JSReceiver&gt;</a>;</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>};</div>
</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span> </div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Foreign::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span> </div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Foreign::copy() const -&gt; own&lt;Foreign&gt; {</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy();</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>}</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Foreign::make(Store* store_abs) -&gt; own&lt;Foreign&gt; {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>  StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span> </div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::JSObject&gt;</a> obj =</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>      isolate-&gt;factory()-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Foreign&gt;::type::make</a>(store, obj);</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>}</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span> </div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span><span class="comment">// Modules</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span> </div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01213" data-start="{" data-end="};">
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Module_01_4.html"> 1213</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Module&gt; {</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Module_01_4.html#a2130567151fc069f4042dcc5a7638eaf"> 1214</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Module, i::WasmModuleObject&gt;</a>;</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>};</div>
</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span> </div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Module::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span> </div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::copy() const -&gt; own&lt;Module&gt; {</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy();</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>}</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span> </div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::validate(Store* store_abs, <span class="keyword">const</span> vec&lt;byte_t&gt;&amp; binary)</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs)-&gt;i_isolate();</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(isolate);</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">v8::base::Vector&lt;const uint8_t&gt;</a> bytes = <a class="code hl_function" href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">v8::base::VectorOf</a>(</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>      <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(binary.get()), binary.size());</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>  i::wasm::WasmEnabledFeatures features =</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>      i::wasm::WasmEnabledFeatures::FromIsolate(isolate);</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>  i::wasm::CompileTimeImports imports;</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  <span class="keywordflow">return</span> i::wasm::GetWasmEngine()-&gt;SyncValidate(isolate, features,</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>                                                std::move(imports), bytes);</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>}</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span> </div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::make(Store* store_abs, <span class="keyword">const</span> vec&lt;byte_t&gt;&amp; binary)</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    -&gt; own&lt;Module&gt; {</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>  StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(isolate);</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>  <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(isolate);</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>  <a class="code hl_class" href="classv8_1_1base_1_1OwnedVector.html">v8::base::OwnedVector&lt;const uint8_t&gt;</a> bytes = <a class="code hl_function" href="namespacev8_1_1base.html#abc1a5cbcd5118aa93d683e4875fa029c">v8::base::OwnedCopyOf</a>(</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>      <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(binary.get()), binary.size());</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>  i::wasm::WasmEnabledFeatures features =</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>      i::wasm::WasmEnabledFeatures::FromIsolate(isolate);</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>  i::wasm::CompileTimeImports imports;</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>  i::wasm::ErrorThrower thrower(isolate, <span class="stringliteral">&quot;ignored&quot;</span>);</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmModuleObject&gt;</a> module;</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>  <span class="keywordflow">if</span> (!i::wasm::GetWasmEngine()</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>           -&gt;SyncCompile(isolate, features, std::move(imports), &amp;thrower,</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>                         std::move(bytes))</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>           .ToHandle(&amp;module)) {</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    thrower.Reset();  <span class="comment">// The API provides no way to expose the error.</span></div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>  }</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Module&gt;::type::make</a>(store, module);</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>}</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span> </div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::imports() const -&gt; ownvec&lt;ImportType&gt; {</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>  <span class="keyword">const</span> i::wasm::NativeModule* native_module =</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>      <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object()-&gt;native_module();</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>  <span class="keyword">const</span> i::wasm::WasmModule* module = native_module-&gt;module();</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>  <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">v8::base::Vector&lt;const uint8_t&gt;</a> wire_bytes =</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>      native_module-&gt;wire_bytes();</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>  <span class="keyword">const</span> std::vector&lt;i::wasm::WasmImport&gt;&amp; import_table = <span class="keyword">module</span>-&gt;import_table;</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>  <span class="keywordtype">size_t</span> size = import_table.size();</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>  ownvec&lt;ImportType&gt; imports = ownvec&lt;ImportType&gt;::make_uninitialized(size);</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>    <span class="keyword">const</span> i::wasm::WasmImport&amp; imp = import_table[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>    Name module_name = GetNameFromWireBytes(imp.module_name, wire_bytes);</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>    Name name = GetNameFromWireBytes(imp.field_name, wire_bytes);</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    own&lt;ExternType&gt; type = GetImportExportType(module, imp.kind, imp.index);</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>    imports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = ImportType::make(std::move(module_name), std::move(name),</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>                                  std::move(type));</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>  }</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>  <span class="keywordflow">return</span> imports;</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>}</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span> </div>
<div class="foldopen" id="foldopen01282" data-start="{" data-end="}">
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"><a class="line" href="namespacewasm.html#a20ebafc5faa7947c1b0c1ad0e34bd77a"> 1282</a></span>ownvec&lt;ExportType&gt; <a class="code hl_function" href="namespacewasm.html#a20ebafc5faa7947c1b0c1ad0e34bd77a">ExportsImpl</a>(</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmModuleObject&gt;</a> module_obj) {</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>  <span class="keyword">const</span> i::wasm::NativeModule* native_module = module_obj-&gt;native_module();</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>  <span class="keyword">const</span> i::wasm::WasmModule* module = native_module-&gt;module();</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>  <span class="keyword">const</span> <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">v8::base::Vector&lt;const uint8_t&gt;</a> wire_bytes =</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>      native_module-&gt;wire_bytes();</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>  <span class="keyword">const</span> std::vector&lt;i::wasm::WasmExport&gt;&amp; export_table = <span class="keyword">module</span>-&gt;export_table;</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>  <span class="keywordtype">size_t</span> size = export_table.size();</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>  ownvec&lt;ExportType&gt; exports = ownvec&lt;ExportType&gt;::make_uninitialized(size);</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>  <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>    <span class="keyword">const</span> i::wasm::WasmExport&amp; exp = export_table[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>];</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    Name name = GetNameFromWireBytes(exp.name, wire_bytes);</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    own&lt;ExternType&gt; type = GetImportExportType(module, exp.kind, exp.index);</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    exports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = ExportType::make(std::move(name), std::move(type));</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>  }</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>  <span class="keywordflow">return</span> exports;</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>}</div>
</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span> </div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::exports() const -&gt; ownvec&lt;ExportType&gt; {</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#a20ebafc5faa7947c1b0c1ad0e34bd77a">ExportsImpl</a>(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object());</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>}</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span> </div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span><span class="comment">// We tier up all functions to TurboFan, and then serialize all TurboFan code.</span></div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span><span class="comment">// If no TurboFan code existed before calling this function, then the call to</span></div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span><span class="comment">// {serialize} may take a long time.</span></div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::serialize() const -&gt; vec&lt;byte_t&gt; {</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>  i::wasm::NativeModule* native_module =</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>      <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object()-&gt;native_module();</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>  native_module-&gt;compilation_state()-&gt;TierUpAllFunctions();</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>  <a class="code hl_class" href="classv8_1_1base_1_1Vector.html">v8::base::Vector&lt;const uint8_t&gt;</a> wire_bytes = native_module-&gt;wire_bytes();</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>  <span class="keywordtype">size_t</span> binary_size = wire_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">size</a>();</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>  i::wasm::WasmSerializer serializer(native_module);</div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>  <span class="keywordtype">size_t</span> serial_size = serializer.GetSerializedNativeModuleSize();</div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>  <span class="keywordtype">size_t</span> size_size = i::wasm::LEBHelper::sizeof_u64v(binary_size);</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>  vec&lt;byte_t&gt; buffer =</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>      vec&lt;byte_t&gt;::make_uninitialized(size_size + binary_size + serial_size);</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>  byte_t* ptr = buffer.get();</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>  i::wasm::LEBHelper::write_u64v(<span class="keyword">reinterpret_cast&lt;</span>uint8_t**<span class="keyword">&gt;</span>(&amp;ptr),</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>                                 binary_size);</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>  std::memcpy(ptr, wire_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>(), binary_size);</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>  ptr += binary_size;</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>  <span class="keywordflow">if</span> (!serializer.SerializeNativeModule(</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>          {reinterpret_cast&lt;uint8_t*&gt;(ptr), serial_size})) {</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <span class="comment">// Serialization fails if no TurboFan code is present. This may happen</span></div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>    <span class="comment">// because the module does not have any functions, or because another thread</span></div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    <span class="comment">// modifies the {NativeModule} concurrently. In this case, the serialized</span></div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <span class="comment">// module just contains the wire bytes.</span></div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    buffer = vec&lt;byte_t&gt;::make_uninitialized(size_size + binary_size);</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    byte_t* pointer = buffer.get();</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>    i::wasm::LEBHelper::write_u64v(<span class="keyword">reinterpret_cast&lt;</span>uint8_t**<span class="keyword">&gt;</span>(&amp;pointer),</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>                                   binary_size);</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    std::memcpy(pointer, wire_bytes.<a class="code hl_function" href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">begin</a>(), binary_size);</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>  }</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>  <span class="keywordflow">return</span> buffer;</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>}</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span> </div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::deserialize(Store* store_abs,</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>                                     <span class="keyword">const</span> vec&lt;byte_t&gt;&amp; serialized)</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>    -&gt; own&lt;Module&gt; {</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>  StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>  <span class="keyword">const</span> byte_t* ptr = serialized.get();</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>  uint64_t binary_size = ReadLebU64(&amp;ptr);</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>  ptrdiff_t size_size = ptr - serialized.get();</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>  <span class="keywordtype">size_t</span> serial_size = serialized.size() - size_size - binary_size;</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmModuleObject&gt;</a> module_obj;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>  <span class="keywordflow">if</span> (serial_size &gt; 0) {</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>    <span class="keywordtype">size_t</span> data_size = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(binary_size);</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>    i::wasm::CompileTimeImports compile_imports{};</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>    <span class="keywordflow">if</span> (!i::wasm::DeserializeNativeModule(</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>             isolate,</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>             {<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(ptr + data_size), serial_size},</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>             {<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>uint8_t*<span class="keyword">&gt;</span>(ptr), data_size},</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>             compile_imports, {})</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>             .ToHandle(&amp;module_obj)) {</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>      <span class="comment">// We were given a serialized module, but failed to deserialize. Report</span></div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>      <span class="comment">// this as an error.</span></div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>    }</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    <span class="comment">// No serialized module was given. This is fine, just create a module from</span></div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>    <span class="comment">// scratch.</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>    vec&lt;byte_t&gt; binary = vec&lt;byte_t&gt;::make_uninitialized(binary_size);</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>    std::memcpy(binary.get(), ptr, binary_size);</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    <span class="keywordflow">return</span> make(store_abs, binary);</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>  }</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Module&gt;::type::make</a>(store, module_obj);</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>}</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span> </div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span><span class="comment">// TODO(v8): do better when V8 can do better.</span></div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01381" data-start="{" data-end="};">
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Shared_3_01Module_01_4_01_4.html"> 1381</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Shared&lt;Module&gt;&gt; {</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Shared_3_01Module_01_4_01_4.html#a3790165c4b4d46eb63da97a3588de0f5"> 1382</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="structwasm_1_1implement_3_01Shared_3_01Module_01_4_01_4.html#a3790165c4b4d46eb63da97a3588de0f5">type</a> = vec&lt;byte_t&gt;;</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>};</div>
</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span> </div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Shared&lt;Module&gt;::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span> </div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::share() const -&gt; own&lt;Shared&lt;Module&gt;&gt; {</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>  <span class="keyword">auto</span> shared = <a class="code hl_function" href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">seal&lt;Shared&lt;Module&gt;</a>&gt;(<span class="keyword">new</span> vec&lt;byte_t&gt;(serialize()));</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>  <span class="keywordflow">return</span> make_own(shared);</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>}</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span> </div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Module::obtain(Store* store, <span class="keyword">const</span> Shared&lt;Module&gt;* shared)</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>    -&gt; own&lt;Module&gt; {</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>  <span class="keywordflow">return</span> Module::deserialize(store, *<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(shared));</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>}</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span> </div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span><span class="comment">// Externals</span></div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span> </div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01400" data-start="{" data-end="};">
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Extern_01_4.html"> 1400</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Extern&gt; {</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Extern_01_4.html#ae7e0a899ac974722d25eccafd9d346f8"> 1401</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Extern, i::JSReceiver&gt;</a>;</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>};</div>
</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span> </div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Extern::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span> </div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::copy() const -&gt; own&lt;Extern&gt; {</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy();</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>}</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span> </div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::kind() const -&gt; ExternKind {</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span> </div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSReceiver&gt;</a> obj = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>  <span class="keywordflow">if</span> (i::WasmExternalFunction::IsWasmExternalFunction(*obj)) {</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>    <span class="keywordflow">return</span> wasm::ExternKind::FUNC;</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>  }</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>  <span class="keywordflow">if</span> (IsWasmGlobalObject(*obj)) <span class="keywordflow">return</span> wasm::ExternKind::GLOBAL;</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>  <span class="keywordflow">if</span> (IsWasmTableObject(*obj)) <span class="keywordflow">return</span> wasm::ExternKind::TABLE;</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>  <span class="keywordflow">if</span> (IsWasmMemoryObject(*obj)) <span class="keywordflow">return</span> wasm::ExternKind::MEMORY;</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>  <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>}</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span> </div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::type() const -&gt; own&lt;ExternType&gt; {</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>  <span class="keywordflow">switch</span> (<a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>()) {</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>    <span class="keywordflow">case</span> ExternKind::FUNC:</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>      <span class="keywordflow">return</span> func()-&gt;type();</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>    <span class="keywordflow">case</span> ExternKind::GLOBAL:</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>      <span class="keywordflow">return</span> global()-&gt;type();</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>    <span class="keywordflow">case</span> ExternKind::TABLE:</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>      <span class="keywordflow">return</span> table()-&gt;type();</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>    <span class="keywordflow">case</span> ExternKind::MEMORY:</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>      <span class="keywordflow">return</span> memory()-&gt;type();</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>  }</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>}</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span> </div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::func() -&gt; Func* {</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::FUNC ? <span class="keyword">static_cast&lt;</span>Func*<span class="keyword">&gt;</span>(<span class="keyword">this</span>) : nullptr;</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>}</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span> </div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::global() -&gt; Global* {</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::GLOBAL ? <span class="keyword">static_cast&lt;</span>Global*<span class="keyword">&gt;</span>(<span class="keyword">this</span>) : nullptr;</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>}</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span> </div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::table() -&gt; Table* {</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::TABLE ? <span class="keyword">static_cast&lt;</span>Table*<span class="keyword">&gt;</span>(<span class="keyword">this</span>) : nullptr;</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>}</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span> </div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::memory() -&gt; Memory* {</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::MEMORY ? <span class="keyword">static_cast&lt;</span>Memory*<span class="keyword">&gt;</span>(<span class="keyword">this</span>) : nullptr;</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>}</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span> </div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::func() const -&gt; const Func* {</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::FUNC ? <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>Func*<span class="keyword">&gt;</span>(<span class="keyword">this</span>) : nullptr;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>}</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span> </div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::global() const -&gt; const Global* {</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::GLOBAL ? <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>Global*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>                                      : nullptr;</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>}</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span> </div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::table() const -&gt; const Table* {</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::TABLE ? <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>Table*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>                                     : nullptr;</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>}</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span> </div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Extern::memory() const -&gt; const Memory* {</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>() == ExternKind::MEMORY ? <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>Memory*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>                                      : nullptr;</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>}</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span> </div>
<div class="foldopen" id="foldopen01473" data-start="{" data-end="}">
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"><a class="line" href="namespacewasm.html#a66f288acbcb1a51aa8e21984eadd7a49"> 1473</a></span><span class="keyword">auto</span> <a class="code hl_function" href="namespacewasm.html#a66f288acbcb1a51aa8e21984eadd7a49">extern_to_v8</a>(<span class="keyword">const</span> Extern* ex) -&gt; <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::JSReceiver&gt;</a> {</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(ex)-&gt;v8_object();</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>}</div>
</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span> </div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span><span class="comment">// Function Instances</span></div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span> </div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01480" data-start="{" data-end="};">
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Func_01_4.html"> 1480</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Func&gt; {</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Func_01_4.html#a100c4066364257ed1c41a96ec227b000"> 1481</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Func, i::JSFunction&gt;</a>;</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>};</div>
</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span> </div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Func::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span> </div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Func::copy() const -&gt; own&lt;Func&gt; { <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy(); }</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span> </div>
<div class="foldopen" id="foldopen01488" data-start="{" data-end="};">
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html"> 1488</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1FuncData.html">FuncData</a> {</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#afb914921de73ba6f4ff4b07e01aa0cd6"> 1489</a></span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> i::ExternalPointerTag <a class="code hl_variable" href="structwasm_1_1FuncData.html#afb914921de73ba6f4ff4b07e01aa0cd6">kManagedTag</a> = i::kWasmFuncDataTag;</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span> </div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a19f4c656f85eaa29eddf64fd41f28d3c"> 1491</a></span>  Store* <a class="code hl_variable" href="structwasm_1_1FuncData.html#a19f4c656f85eaa29eddf64fd41f28d3c">store</a>;</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#acbc2cacd8ac30af35568fe81621b4e89"> 1492</a></span>  own&lt;FuncType&gt; <a class="code hl_variable" href="structwasm_1_1FuncData.html#acbc2cacd8ac30af35568fe81621b4e89">type</a>;</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295aa25acf2e0ceaeac80fa7823ecbe8168f"> 1493</a></span>  <span class="keyword">enum</span> <a class="code hl_enumeration" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295">Kind</a> { <a class="code hl_enumvalue" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295aa25acf2e0ceaeac80fa7823ecbe8168f">kCallback</a>, <a class="code hl_enumvalue" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295ab3715f827b6fede0c2294f5b91ef33b1">kCallbackWithEnv</a> } <a class="code hl_variable" href="structwasm_1_1FuncData.html#a4eed45f6c060d14a341442e093d37e42">kind</a>;</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>  <span class="keyword">union </span>{</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a4aed3fd6ccb29643bcf1a4a5be708d36"> 1495</a></span>    Func::callback <a class="code hl_variable" href="structwasm_1_1FuncData.html#a4aed3fd6ccb29643bcf1a4a5be708d36">callback</a>;</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a68b72129bd2ac9d73d8913346ea0fdc1"> 1496</a></span>    Func::callback_with_env <a class="code hl_variable" href="structwasm_1_1FuncData.html#a68b72129bd2ac9d73d8913346ea0fdc1">callback_with_env</a>;</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>  };</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#afff395fc4bd7f3f24e721665b22d3483"> 1498</a></span>  void (*<a class="code hl_variable" href="structwasm_1_1FuncData.html#afff395fc4bd7f3f24e721665b22d3483">finalizer</a>)(<span class="keywordtype">void</span>*);</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a186f7a8955380e53eb8cca026975cdc3"> 1499</a></span>  <span class="keywordtype">void</span>* <a class="code hl_variable" href="structwasm_1_1FuncData.html#a186f7a8955380e53eb8cca026975cdc3">env</a>;</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span> </div>
<div class="foldopen" id="foldopen01501" data-start="{" data-end="}">
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a17d4d331a433849800f64fdfad1303ce"> 1501</a></span>  <a class="code hl_function" href="structwasm_1_1FuncData.html#a17d4d331a433849800f64fdfad1303ce">FuncData</a>(Store* store, <span class="keyword">const</span> FuncType* type, <a class="code hl_enumeration" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295">Kind</a> kind)</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>      : store(store),</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>        type(type-&gt;copy()),</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>        kind(kind),</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>        <a class="code hl_variable" href="structwasm_1_1FuncData.html#afff395fc4bd7f3f24e721665b22d3483">finalizer</a>(nullptr),</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>        <a class="code hl_variable" href="structwasm_1_1FuncData.html#a186f7a8955380e53eb8cca026975cdc3">env</a>(nullptr) {}</div>
</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span> </div>
<div class="foldopen" id="foldopen01508" data-start="{" data-end="}">
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a4df8d86bbbeedf05cc9ef5180ddc31ea"> 1508</a></span>  <a class="code hl_function" href="structwasm_1_1FuncData.html#a4df8d86bbbeedf05cc9ef5180ddc31ea">~FuncData</a>() {</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="structwasm_1_1FuncData.html#afff395fc4bd7f3f24e721665b22d3483">finalizer</a>) (*finalizer)(<a class="code hl_variable" href="structwasm_1_1FuncData.html#a186f7a8955380e53eb8cca026975cdc3">env</a>);</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>  }</div>
</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span> </div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>  <span class="keyword">static</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> <a class="code hl_function" href="structwasm_1_1FuncData.html#a0acf40b8aa8eaa7d5ce26af9e90b4d59">v8_callback</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> host_data_foreign, <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> argv);</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>};</div>
</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span> </div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span> </div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span><span class="keyword">class </span>SignatureHelper : <span class="keyword">public</span> <a class="code hl_class" href="classv8_1_1internal_1_1AllStatic.html">i::AllStatic</a> {</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>  <span class="keyword">static</span> <span class="keyword">const</span> i::wasm::CanonicalTypeIndex Canonicalize(FuncType* type) {</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>    std::vector&lt;i::wasm::ValueType&gt; types;</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>    types.reserve(type-&gt;results().size() + type-&gt;params().size());</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span> </div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>    <span class="comment">// TODO(jkummerow): Consider making vec&lt;&gt; range-based for-iterable.</span></div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; type-&gt;results().<a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>      types.push_back(WasmValKindToV8(type-&gt;results()[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;kind()));</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>    }</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; type-&gt;<a class="code hl_class" href="classparams.html">params</a>().<a class="code hl_variable" href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>      types.push_back(WasmValKindToV8(type-&gt;params()[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;kind()));</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>    }</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span> </div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>    i::wasm::FunctionSig non_canonical_sig{type-&gt;results().size(),</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>                                           type-&gt;params().size(), types.data()};</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>    <span class="keywordflow">return</span> i::wasm::GetTypeCanonicalizer()-&gt;AddRecursiveGroup(</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>        &amp;non_canonical_sig);</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>  }</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span> </div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>  <span class="keyword">static</span> own&lt;FuncType&gt; FromV8Sig(<span class="keyword">const</span> i::wasm::CanonicalSig* sig) {</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>    <span class="keywordtype">int</span> result_arity = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count());</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>    <span class="keywordtype">int</span> param_arity = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count());</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>    ownvec&lt;ValType&gt; results = ownvec&lt;ValType&gt;::make_uninitialized(result_arity);</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>    ownvec&lt;ValType&gt; params = ownvec&lt;ValType&gt;::make_uninitialized(param_arity);</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span> </div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; result_arity; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>      results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = ValType::make(V8ValueTypeToWasm(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>    }</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; param_arity; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>      params[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = ValType::make(V8ValueTypeToWasm(<a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)));</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>    }</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>    <span class="keywordflow">return</span> FuncType::make(std::move(params), std::move(results));</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>  }</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span> </div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>  <span class="keyword">static</span> <span class="keyword">const</span> i::wasm::CanonicalSig* GetSig(</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>      <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSFunction&gt;</a> function) {</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmCapiFunction&gt;</a>(*function)-&gt;sig();</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>  }</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span> </div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span><span class="preprocessor">#if V8_ENABLE_SANDBOX</span></div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>  <span class="comment">// Wraps {FuncType} so it has the same interface as {v8::internal::Signature}.</span></div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>  <span class="keyword">struct </span>FuncTypeAdapter {</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>    <span class="keyword">const</span> FuncType* type = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> type-&gt;params().size(); }</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>    <span class="keywordtype">size_t</span> return_count()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> type-&gt;results().size(); }</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    i::wasm::ValueType GetParam(<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>      <span class="keywordflow">return</span> WasmValKindToV8(type-&gt;params()[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;kind());</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>    }</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    i::wasm::ValueType GetReturn(<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>      <span class="keywordflow">return</span> WasmValKindToV8(type-&gt;results()[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;kind());</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>    }</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>  };</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>  <span class="keyword">static</span> uint64_t Hash(FuncType* type) {</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>    FuncTypeAdapter adapter{type};</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>    <span class="keywordflow">return</span> i::wasm::SignatureHasher::Hash(&amp;adapter);</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>  }</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>};</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span> </div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span><span class="keyword">auto</span> make_func(Store* store_abs, std::shared_ptr&lt;FuncData&gt; data) -&gt; own&lt;Func&gt; {</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>  <span class="keyword">auto</span> store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>  <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(isolate);</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Managed&lt;FuncData&gt;</a>&gt; embedder_data =</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Managed.html">i::Managed&lt;FuncData&gt;::From</a>(isolate, <span class="keyword">sizeof</span>(FuncData), data);</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>  i::wasm::CanonicalTypeIndex sig_index =</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>      SignatureHelper::Canonicalize(data-&gt;type.get());</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>  <span class="keyword">const</span> i::wasm::CanonicalSig* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> =</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>      i::wasm::GetTypeCanonicalizer()-&gt;LookupFunctionSignature(sig_index);</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmCapiFunction&gt;</a> function = i::WasmCapiFunction::New(</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>      isolate, <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a><span class="keyword">&gt;</span>(&amp;<a class="code hl_function" href="structwasm_1_1FuncData.html#a0acf40b8aa8eaa7d5ce26af9e90b4d59">FuncData::v8_callback</a>),</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>      embedder_data, sig_index, sig);</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>  <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmImportData&gt;</a>(</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>      function-&gt;shared()-&gt;wasm_capi_function_data()-&gt;internal()-&gt;implicit_arg())</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>      -&gt;set_callable(*function);</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>  <span class="keyword">auto</span> func = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Func&gt;::type::make</a>(store, function);</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>  <span class="keywordflow">return</span> func;</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>}</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span> </div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span> </div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Func::make(Store* store, <span class="keyword">const</span> FuncType* type,</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>                            Func::callback <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>) -&gt; own&lt;Func&gt; {</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>  <span class="keyword">auto</span> data = std::make_shared&lt;FuncData&gt;(store, type, <a class="code hl_enumvalue" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295aa25acf2e0ceaeac80fa7823ecbe8168f">FuncData::kCallback</a>);</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>  data-&gt;callback = <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>;</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>  <span class="keywordflow">return</span> make_func(store, data);</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>}</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span> </div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Func::make(Store* store, <span class="keyword">const</span> FuncType* type,</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>                            callback_with_env <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>, <span class="keywordtype">void</span>* env,</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>                            <span class="keywordtype">void</span> (*finalizer)(<span class="keywordtype">void</span>*)) -&gt; own&lt;Func&gt; {</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>  <span class="keyword">auto</span> data =</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>      std::make_shared&lt;FuncData&gt;(store, type, <a class="code hl_enumvalue" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295ab3715f827b6fede0c2294f5b91ef33b1">FuncData::kCallbackWithEnv</a>);</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>  data-&gt;callback_with_env = <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>;</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>  data-&gt;env = env;</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>  data-&gt;finalizer = finalizer;</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>  <span class="keywordflow">return</span> make_func(store, data);</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>}</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span> </div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Func::type() const -&gt; own&lt;FuncType&gt; {</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSFunction&gt;</a> func = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>  <span class="keywordflow">if</span> (i::WasmCapiFunction::IsWasmCapiFunction(*func)) {</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>    <span class="keywordflow">return</span> SignatureHelper::FromV8Sig(SignatureHelper::GetSig(func));</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>  }</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(i::WasmExportedFunction::IsWasmExportedFunction(*func));</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>  <span class="keyword">auto</span> function = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmExportedFunction&gt;</a>(func);</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>  <span class="keyword">auto</span> data = function-&gt;shared()-&gt;wasm_exported_function_data();</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>  <span class="keywordflow">return</span> FunctionSigToFuncType(</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>      data-&gt;instance_data()-&gt;module()-&gt;functions[data-&gt;function_index()].sig);</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>}</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span> </div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Func::param_arity() const -&gt; <span class="keywordtype">size_t</span> {</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSFunction&gt;</a> func = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>  <span class="keywordflow">if</span> (i::WasmCapiFunction::IsWasmCapiFunction(*func)) {</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>    <span class="keywordflow">return</span> SignatureHelper::GetSig(func)-&gt;parameter_count();</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>  }</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(i::WasmExportedFunction::IsWasmExportedFunction(*func));</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>  <span class="keyword">auto</span> function = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmExportedFunction&gt;</a>(func);</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>  <span class="keyword">auto</span> data = function-&gt;shared()-&gt;wasm_exported_function_data();</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>  <span class="keyword">const</span> i::wasm::FunctionSig* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> =</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>      data-&gt;instance_data()-&gt;module()-&gt;functions[data-&gt;function_index()].sig;</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count();</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>}</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span> </div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Func::result_arity() const -&gt; <span class="keywordtype">size_t</span> {</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSFunction&gt;</a> func = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>  <span class="keywordflow">if</span> (i::WasmCapiFunction::IsWasmCapiFunction(*func)) {</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>    <span class="keywordflow">return</span> SignatureHelper::GetSig(func)-&gt;return_count();</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>  }</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(i::WasmExportedFunction::IsWasmExportedFunction(*func));</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>  <span class="keyword">auto</span> function = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmExportedFunction&gt;</a>(func);</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>  <span class="keyword">auto</span> data = function-&gt;shared()-&gt;wasm_exported_function_data();</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>  <span class="keyword">const</span> i::wasm::FunctionSig* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> =</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>      data-&gt;instance_data()-&gt;module()-&gt;functions[data-&gt;function_index()].sig;</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count();</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>}</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span> </div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span> </div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>own&lt;Ref&gt; V8RefValueToWasm(StoreImpl* store, <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> value) {</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacev8_1_1internal.html#aea9d736830d86242c4e1cb59a371d3a6">IsNull</a>(*value, store-&gt;i_isolate())) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Ref&gt;::type::make</a>(store, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::JSReceiver&gt;</a>(value));</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>}</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span> </div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> WasmRefToV8(<a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate, <span class="keyword">const</span> Ref* ref) {</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>  <span class="keywordflow">if</span> (ref == <span class="keyword">nullptr</span>) <span class="keywordflow">return</span> isolate-&gt;factory()-&gt;null_value();</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(ref)-&gt;v8_object();</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>}</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span> </div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span><span class="keywordtype">void</span> PrepareFunctionData(</div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate,</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmExportedFunctionData&gt;</a> function_data,</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>    <span class="keyword">const</span> i::wasm::CanonicalSig* sig) {</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>  <span class="comment">// If the data is already populated, return immediately.</span></div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>  <span class="comment">// TODO(saelo): We need to use full pointer comparison here while not all Code</span></div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>  <span class="comment">// objects have migrated into trusted space.</span></div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>  <span class="keyword">static_assert</span>(!i::kAllCodeObjectsLiveInTrustedSpace);</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>  <span class="keywordflow">if</span> (!function_data-&gt;c_wrapper_code(isolate).SafeEquals(</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>          *<a class="code hl_define" href="builtins_8h.html#af33bd0f259d8e6a511fd018115e0d62c">BUILTIN_CODE</a>(isolate, Illegal))) {</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>  }</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>  <span class="comment">// Compile wrapper code.</span></div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Code&gt;</a> wrapper_code =</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>      i::compiler::CompileCWasmEntry(isolate, sig);</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>  function_data-&gt;set_c_wrapper_code(*wrapper_code);</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>  <span class="comment">// Compute packed args size.</span></div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>  function_data-&gt;set_packed_args_size(</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>      i::wasm::CWasmArgumentsPacker::TotalSize(sig));</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>}</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span> </div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span><span class="keywordtype">void</span> PushArgs(<span class="keyword">const</span> i::wasm::CanonicalSig* sig, <span class="keyword">const</span> vec&lt;Val&gt;&amp; <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>,</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>              i::wasm::CWasmArgumentsPacker* packer, StoreImpl* store) {</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;parameter_count(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>    i::wasm::CanonicalValueType type = <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetParam(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    <span class="keywordflow">switch</span> (type.kind()) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>      <span class="keywordflow">case</span> i::wasm::kI32:</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>        packer-&gt;Push(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].i32());</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>      <span class="keywordflow">case</span> i::wasm::kI64:</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>        packer-&gt;Push(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].i64());</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>      <span class="keywordflow">case</span> i::wasm::kF32:</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>        packer-&gt;Push(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].f32());</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>      <span class="keywordflow">case</span> i::wasm::kF64:</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>        packer-&gt;Push(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].f64());</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>      <span class="keywordflow">case</span> i::wasm::kRef:</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>      <span class="keywordflow">case</span> i::wasm::kRefNull:</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>        <span class="comment">// TODO(14034): Make sure this works for all heap types.</span></div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>        packer-&gt;Push((*WasmRefToV8(store-&gt;i_isolate(), <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].ref())).ptr());</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>      <span class="keywordflow">case</span> i::wasm::kS128:</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>        <span class="comment">// TODO(14034): Implement.</span></div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>        <a class="code hl_define" href="logging_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>      <span class="keywordflow">case</span> i::wasm::kRtt:</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>      <span class="keywordflow">case</span> i::wasm::kI8:</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>      <span class="keywordflow">case</span> i::wasm::kI16:</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>      <span class="keywordflow">case</span> i::wasm::kF16:</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>      <span class="keywordflow">case</span> i::wasm::kVoid:</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>      <span class="keywordflow">case</span> i::wasm::kTop:</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>      <span class="keywordflow">case</span> i::wasm::kBottom:</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>        <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>    }</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>  }</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>}</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span> </div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span><span class="keywordtype">void</span> PopArgs(<span class="keyword">const</span> i::wasm::CanonicalSig* sig, vec&lt;Val&gt;&amp; results,</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>             i::wasm::CWasmArgumentsPacker* packer, StoreImpl* store) {</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>  packer-&gt;Reset();</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;return_count(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>    i::wasm::CanonicalValueType type = <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a>-&gt;GetReturn(<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>);</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>    <span class="keywordflow">switch</span> (type.kind()) {</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>      <span class="keywordflow">case</span> i::wasm::kI32:</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>        results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(packer-&gt;Pop&lt;int32_t&gt;());</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>      <span class="keywordflow">case</span> i::wasm::kI64:</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(packer-&gt;Pop&lt;int64_t&gt;());</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>      <span class="keywordflow">case</span> i::wasm::kF32:</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>        results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(packer-&gt;Pop&lt;<span class="keywordtype">float</span>&gt;());</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>      <span class="keywordflow">case</span> i::wasm::kF64:</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>        results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(packer-&gt;Pop&lt;<span class="keywordtype">double</span>&gt;());</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>      <span class="keywordflow">case</span> i::wasm::kRef:</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>      <span class="keywordflow">case</span> i::wasm::kRefNull: {</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>        <span class="comment">// TODO(14034): Make sure this works for all heap types.</span></div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> raw = packer-&gt;Pop&lt;<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a>&gt;();</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>        <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> obj(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::Object&gt;</a>(raw), store-&gt;i_isolate());</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>        results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(V8RefValueToWasm(store, obj));</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>      }</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>      <span class="keywordflow">case</span> i::wasm::kS128:</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>        <span class="comment">// TODO(14034): Implement.</span></div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>        <a class="code hl_define" href="logging_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>      <span class="keywordflow">case</span> i::wasm::kRtt:</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>      <span class="keywordflow">case</span> i::wasm::kI8:</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>      <span class="keywordflow">case</span> i::wasm::kI16:</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>      <span class="keywordflow">case</span> i::wasm::kF16:</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>      <span class="keywordflow">case</span> i::wasm::kVoid:</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>      <span class="keywordflow">case</span> i::wasm::kTop:</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>      <span class="keywordflow">case</span> i::wasm::kBottom:</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>        <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    }</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>  }</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>}</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span> </div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>own&lt;Trap&gt; CallWasmCapiFunction(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::WasmCapiFunctionData&gt;</a> data,</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>                               <span class="keyword">const</span> vec&lt;Val&gt;&amp; <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>, vec&lt;Val&gt;&amp; results) {</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>  FuncData* func_data =</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::Managed&lt;FuncData&gt;</a>&gt;(data-&gt;embedder_data())-&gt;raw();</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>  <span class="keywordflow">if</span> (func_data-&gt;kind == <a class="code hl_enumvalue" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295aa25acf2e0ceaeac80fa7823ecbe8168f">FuncData::kCallback</a>) {</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>    <span class="keywordflow">return</span> (func_data-&gt;callback)(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>, results);</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>  }</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(func_data-&gt;kind == <a class="code hl_enumvalue" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295ab3715f827b6fede0c2294f5b91ef33b1">FuncData::kCallbackWithEnv</a>);</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>  <span class="keywordflow">return</span> (func_data-&gt;callback_with_env)(func_data-&gt;env, <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>, results);</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>}</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span> </div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span><a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::JSReceiver&gt;</a> GetProperException(</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate, <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> maybe_exception) {</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>  <span class="keywordflow">if</span> (IsJSReceiver(*maybe_exception)) {</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::JSReceiver&gt;</a>(maybe_exception);</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>  }</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>  <span class="keywordflow">if</span> (v8::internal::IsTerminationException(*maybe_exception)) {</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::String&gt;</a> <span class="keywordtype">string</span> =</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>        isolate-&gt;factory()-&gt;NewStringFromAsciiChecked(<span class="stringliteral">&quot;TerminationException&quot;</span>);</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>    <span class="keywordflow">return</span> isolate-&gt;factory()-&gt;NewError(isolate-&gt;error_function(), <span class="keywordtype">string</span>);</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>  }</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MaybeDirectHandle.html">i::MaybeDirectHandle&lt;i::String&gt;</a> maybe_string =</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>      i::Object::ToString(isolate, maybe_exception);</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::String&gt;</a> <span class="keywordtype">string</span> = isolate-&gt;factory()-&gt;empty_string();</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>  <span class="keywordflow">if</span> (!maybe_string.<a class="code hl_function" href="classv8_1_1internal_1_1MaybeDirectHandle.html#a76857e813e1bdb19bbb3cbbfad729f1c">ToHandle</a>(&amp;<span class="keywordtype">string</span>)) {</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>    <span class="comment">// If converting the {maybe_exception} to string threw another exception,</span></div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>    <span class="comment">// just give up and leave {string} as the empty string.</span></div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>    isolate-&gt;clear_exception();</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>  }</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>  <span class="comment">// {NewError} cannot fail when its input is a plain String, so we always</span></div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>  <span class="comment">// get an Error object here.</span></div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::JSReceiver&gt;</a>(</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>      isolate-&gt;factory()-&gt;NewError(isolate-&gt;error_function(), <span class="keywordtype">string</span>));</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>}</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span> </div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span> </div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Func::call(<span class="keyword">const</span> vec&lt;Val&gt;&amp; <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>, vec&lt;Val&gt;&amp; results) <span class="keyword">const</span></div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>    -&gt; own&lt;Trap&gt; {</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>  <span class="keyword">auto</span> func = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>  <span class="keyword">auto</span> store = func-&gt;store();</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>  <span class="keyword">auto</span> isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::Object&gt;</a> raw_function_data =</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>      func-&gt;v8_object()-&gt;shared()-&gt;GetTrustedData(isolate);</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span> </div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>  <span class="comment">// WasmCapiFunctions can be called directly.</span></div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>  <span class="keywordflow">if</span> (IsWasmCapiFunctionData(raw_function_data)) {</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>    <span class="keywordflow">return</span> CallWasmCapiFunction(</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmCapiFunctionData&gt;</a>(raw_function_data), <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>, results);</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>  }</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span> </div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>  <a class="code hl_define" href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a>(IsWasmExportedFunctionData(raw_function_data));</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmExportedFunctionData&gt;</a> function_data{</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmExportedFunctionData&gt;</a>(raw_function_data), isolate};</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmTrustedInstanceData&gt;</a> <a class="code hl_variable" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>{</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>      function_data-&gt;instance_data(), isolate};</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>  <span class="keywordtype">int</span> function_index = function_data-&gt;function_index();</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>  <span class="keyword">const</span> i::wasm::WasmModule* module = <a class="code hl_variable" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;module();</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>  <span class="comment">// Caching {sig} would reduce overhead substantially.</span></div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>  <span class="keyword">const</span> i::wasm::CanonicalSig* <a class="code hl_variable" href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">sig</a> =</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>      i::wasm::GetTypeCanonicalizer()-&gt;LookupFunctionSignature(</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>          module-&gt;canonical_sig_id(</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>              module-&gt;functions[function_index].sig_index));</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>  PrepareFunctionData(isolate, function_data, sig);</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Code&gt;</a> wrapper_code(function_data-&gt;c_wrapper_code(isolate),</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>                                        isolate);</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>  <a class="code hl_class" href="classv8_1_1internal_1_1WasmCodePointer.html">i::WasmCodePointer</a> call_target = function_data-&gt;internal()-&gt;call_target();</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span> </div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>  i::wasm::CWasmArgumentsPacker packer(function_data-&gt;packed_args_size());</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>  PushArgs(sig, <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>, &amp;packer, store);</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span> </div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Object&gt;</a> object_ref;</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>  <span class="keywordflow">if</span> (function_index &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(module-&gt;num_imported_functions)) {</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>    object_ref = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">i::direct_handle</a>(</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;dispatch_table_for_imports()-&gt;implicit_arg(</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>            function_index),</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>        isolate);</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>    <span class="keywordflow">if</span> (IsWasmImportData(*object_ref)) {</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::JSFunction&gt;</a> jsfunc = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::JSFunction&gt;</a>(</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>          <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmImportData&gt;</a>(*object_ref)-&gt;callable());</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::Object&gt;</a> data = jsfunc-&gt;shared()-&gt;GetTrustedData(isolate);</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>      <span class="keywordflow">if</span> (IsWasmCapiFunctionData(data)) {</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>        <span class="keywordflow">return</span> CallWasmCapiFunction(<a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmCapiFunctionData&gt;</a>(data),</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>                                    <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>, results);</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>      }</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>      <span class="comment">// TODO(jkummerow): Imported and then re-exported JavaScript functions</span></div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>      <span class="comment">// are not supported yet. If we support C-API + JavaScript, we&#39;ll need</span></div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>      <span class="comment">// to call those here.</span></div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>      <a class="code hl_define" href="logging_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>      <span class="comment">// A WasmFunction from another module.</span></div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(IsWasmInstanceObject(*object_ref));</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>    }</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>    <span class="comment">// TODO(42204563): Avoid crashing if the instance object is not available.</span></div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>    <a class="code hl_define" href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;has_instance_object());</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>    object_ref = <a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">direct_handle</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">instance_data</a>-&gt;instance_object(), isolate);</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>  }</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span> </div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>  i::Execution::CallWasm(isolate, wrapper_code, call_target, object_ref,</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>                         packer.argv());</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span> </div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>  <span class="keywordflow">if</span> (isolate-&gt;has_exception()) {</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> <a class="code hl_variable" href="graph-builder-interface_8cc.html#a79d661617f46aabd0c6a79666870cbf5">exception</a>(isolate-&gt;exception(), isolate);</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>    isolate-&gt;clear_exception();</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Trap&gt;::type::make</a>(store,</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>                                       GetProperException(isolate, exception));</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>  }</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span> </div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>  PopArgs(sig, results, &amp;packer, store);</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>}</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span> </div>
<div class="foldopen" id="foldopen01892" data-start="{" data-end="}">
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"><a class="line" href="structwasm_1_1FuncData.html#a0acf40b8aa8eaa7d5ce26af9e90b4d59"> 1892</a></span><a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> <a class="code hl_function" href="structwasm_1_1FuncData.html#a0acf40b8aa8eaa7d5ce26af9e90b4d59">FuncData::v8_callback</a>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> host_data_foreign,</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>                                 <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> argv) {</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>  <a class="code hl_struct" href="structwasm_1_1FuncData.html">FuncData</a>* self =</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>      <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::Managed&lt;FuncData&gt;</a>&gt;(<a class="code hl_function" href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">i::Tagged&lt;i::Object&gt;</a>(host_data_foreign))</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>          -&gt;raw();</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>  <a class="code hl_class" href="classwasm_1_1StoreImpl.html">StoreImpl</a>* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(self-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#a19f4c656f85eaa29eddf64fd41f28d3c">store</a>);</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(isolate);</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span> </div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>  isolate-&gt;set_context(*<a class="code hl_function" href="classv8_1_1Utils.html#a5bbbf1336cd2ac62f7ab5014210ecf2e">v8::Utils::OpenDirectHandle</a>(*store-&gt;context()));</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span> </div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>  <span class="keyword">const</span> ownvec&lt;ValType&gt;&amp; param_types = self-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#acbc2cacd8ac30af35568fe81621b4e89">type</a>-&gt;params();</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>  <span class="keyword">const</span> ownvec&lt;ValType&gt;&amp; result_types = self-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#acbc2cacd8ac30af35568fe81621b4e89">type</a>-&gt;results();</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span> </div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>  <span class="keywordtype">int</span> num_param_types = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(param_types.size());</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>  <span class="keywordtype">int</span> num_result_types = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(result_types.size());</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span> </div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>  <span class="keyword">auto</span> params = vec&lt;Val&gt;::make_uninitialized(num_param_types);</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>  <span class="keyword">auto</span> results = vec&lt;Val&gt;::make_uninitialized(num_result_types);</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>  <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> p = argv;</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_param_types; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span>    <span class="keywordflow">switch</span> (param_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#a4eed45f6c060d14a341442e093d37e42">kind</a>()) {</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>      <span class="keywordflow">case</span> ValKind::I32:</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>        params[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(<a class="code hl_function" href="namespacev8_1_1base.html#a0b04f46ee47c13e48f05a4c0031b94c3">v8::base::ReadUnalignedValue&lt;int32_t&gt;</a>(p));</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>        p += 4;</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>      <span class="keywordflow">case</span> ValKind::I64:</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>        params[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(<a class="code hl_function" href="namespacev8_1_1base.html#a0b04f46ee47c13e48f05a4c0031b94c3">v8::base::ReadUnalignedValue&lt;int64_t&gt;</a>(p));</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>        p += 8;</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>      <span class="keywordflow">case</span> ValKind::F32:</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>        params[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(<a class="code hl_function" href="namespacev8_1_1base.html#a0b04f46ee47c13e48f05a4c0031b94c3">v8::base::ReadUnalignedValue&lt;float32_t&gt;</a>(p));</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>        p += 4;</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>      <span class="keywordflow">case</span> ValKind::F64:</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>        params[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(<a class="code hl_function" href="namespacev8_1_1base.html#a0b04f46ee47c13e48f05a4c0031b94c3">v8::base::ReadUnalignedValue&lt;float64_t&gt;</a>(p));</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>        p += 8;</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>      <span class="keywordflow">case</span> ValKind::EXTERNREF:</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>      <span class="keywordflow">case</span> ValKind::FUNCREF: {</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>        <a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a> raw = <a class="code hl_function" href="namespacev8_1_1base.html#a0b04f46ee47c13e48f05a4c0031b94c3">v8::base::ReadUnalignedValue&lt;i::Address&gt;</a>(p);</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>        p += <span class="keyword">sizeof</span>(raw);</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>        <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> obj(<a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::Object&gt;</a>(raw), isolate);</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>        params[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = Val(V8RefValueToWasm(store, obj));</div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>      }</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>    }</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>  }</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span> </div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>  own&lt;Trap&gt; trap;</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>  <span class="keywordflow">if</span> (self-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#a4eed45f6c060d14a341442e093d37e42">kind</a> == <a class="code hl_enumvalue" href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295ab3715f827b6fede0c2294f5b91ef33b1">kCallbackWithEnv</a>) {</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    trap = self-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#a68b72129bd2ac9d73d8913346ea0fdc1">callback_with_env</a>(self-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#a186f7a8955380e53eb8cca026975cdc3">env</a>, params, results);</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    trap = self-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#a4aed3fd6ccb29643bcf1a4a5be708d36">callback</a>(params, results);</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>  }</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span> </div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>  <span class="keywordflow">if</span> (trap) {</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>    isolate-&gt;Throw(*<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(trap.get())-&gt;v8_object());</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Tagged.html">i::Tagged&lt;i::Object&gt;</a> ex = isolate-&gt;exception();</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>    isolate-&gt;clear_exception();</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>    <span class="keywordflow">return</span> ex.<a class="code hl_function" href="classv8_1_1internal_1_1TaggedImpl.html#a04c1b715ba67f397a5a6607d054d9c4c">ptr</a>();</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>  }</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span> </div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>  p = argv;</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; num_result_types; ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>    <span class="keywordflow">switch</span> (result_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;<a class="code hl_variable" href="structwasm_1_1FuncData.html#a4eed45f6c060d14a341442e093d37e42">kind</a>()) {</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>      <span class="keywordflow">case</span> ValKind::I32:</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>        <a class="code hl_function" href="namespacev8_1_1base.html#ab6a16e677d6f7a037918c8e80a2756e3">v8::base::WriteUnalignedValue</a>(p, results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].i32());</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>        p += 4;</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>      <span class="keywordflow">case</span> ValKind::I64:</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>        <a class="code hl_function" href="namespacev8_1_1base.html#ab6a16e677d6f7a037918c8e80a2756e3">v8::base::WriteUnalignedValue</a>(p, results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].i64());</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>        p += 8;</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>      <span class="keywordflow">case</span> ValKind::F32:</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>        <a class="code hl_function" href="namespacev8_1_1base.html#ab6a16e677d6f7a037918c8e80a2756e3">v8::base::WriteUnalignedValue</a>(p, results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].f32());</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>        p += 4;</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>      <span class="keywordflow">case</span> ValKind::F64:</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>        <a class="code hl_function" href="namespacev8_1_1base.html#ab6a16e677d6f7a037918c8e80a2756e3">v8::base::WriteUnalignedValue</a>(p, results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].f64());</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>        p += 8;</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>      <span class="keywordflow">case</span> ValKind::EXTERNREF:</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>      <span class="keywordflow">case</span> ValKind::FUNCREF: {</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>        <a class="code hl_function" href="namespacev8_1_1base.html#ab6a16e677d6f7a037918c8e80a2756e3">v8::base::WriteUnalignedValue</a>(</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>            p, (*WasmRefToV8(isolate, results[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].ref())).ptr());</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>        p += <span class="keyword">sizeof</span>(<a class="code hl_variable" href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">i::Address</a>);</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>      }</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>    }</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>  }</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>  <span class="keywordflow">return</span> i::kNullAddress;</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>}</div>
</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span> </div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span><span class="comment">// Global Instances</span></div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span> </div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen01990" data-start="{" data-end="};">
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Global_01_4.html"> 1990</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Global&gt; {</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Global_01_4.html#a4b86dddc8a38d37f0e444d33df1abaec"> 1991</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Global, i::WasmGlobalObject&gt;</a>;</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>};</div>
</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span> </div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Global::destroy() { <span class="keyword">delete</span> (<span class="keyword">this</span>); }</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span> </div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Global::copy() const -&gt; own&lt;Global&gt; {</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classwasm_1_1RefImpl.html#a98b1028a88b4e8dce130a2bfae063fd7">copy</a>();</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>}</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span> </div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Global::make(Store* store_abs, <span class="keyword">const</span> GlobalType* type,</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>                              <span class="keyword">const</span> Val&amp; val) -&gt; own&lt;Global&gt; {</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>  StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>  <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(isolate);</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span> </div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(type-&gt;content()-&gt;kind(), val.kind());</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span> </div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>  i::wasm::ValueType i_type = WasmValKindToV8(type-&gt;content()-&gt;kind());</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>  <span class="keywordtype">bool</span> is_mutable = (type-&gt;mutability() == Mutability::VAR);</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a> = 0;</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmGlobalObject&gt;</a> obj =</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>      i::WasmGlobalObject::New(</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>          isolate, <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmTrustedInstanceData&gt;</a>(),</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>          <a class="code hl_class" href="classv8_1_1internal_1_1MaybeDirectHandle.html">i::MaybeDirectHandle&lt;i::JSArrayBuffer&gt;</a>(),</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>          <a class="code hl_class" href="classv8_1_1internal_1_1MaybeDirectHandle.html">i::MaybeDirectHandle&lt;i::FixedArray&gt;</a>(), i_type, <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a>, is_mutable)</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>          .ToHandleChecked();</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span> </div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>  <span class="keyword">auto</span> global = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Global&gt;::type::make</a>(store, obj);</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>  assert(global);</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>  global-&gt;set(val);</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>  <span class="keywordflow">return</span> global;</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>}</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span> </div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Global::type() const -&gt; own&lt;GlobalType&gt; {</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmGlobalObject&gt;</a> v8_global = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>  ValKind kind = V8ValueTypeToWasm(v8_global-&gt;type());</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>  Mutability mutability =</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>      v8_global-&gt;is_mutable() ? Mutability::VAR : Mutability::CONST;</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>  <span class="keywordflow">return</span> GlobalType::make(ValType::make(kind), mutability);</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>}</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span> </div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Global::get() const -&gt; Val {</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmGlobalObject&gt;</a> v8_global = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>  <span class="keywordflow">switch</span> (v8_global-&gt;type().kind()) {</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>    <span class="keywordflow">case</span> i::wasm::kI32:</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>      <span class="keywordflow">return</span> Val(v8_global-&gt;GetI32());</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>    <span class="keywordflow">case</span> i::wasm::kI64:</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>      <span class="keywordflow">return</span> Val(v8_global-&gt;GetI64());</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>    <span class="keywordflow">case</span> i::wasm::kF32:</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>      <span class="keywordflow">return</span> Val(v8_global-&gt;GetF32());</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>    <span class="keywordflow">case</span> i::wasm::kF64:</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>      <span class="keywordflow">return</span> Val(v8_global-&gt;GetF64());</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>    <span class="keywordflow">case</span> i::wasm::kRef:</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>    <span class="keywordflow">case</span> i::wasm::kRefNull: {</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>      <span class="comment">// TODO(14034): Handle types other than funcref and externref if needed.</span></div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>      StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;store();</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>      <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(store-&gt;i_isolate());</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = v8_global-&gt;GetRef();</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>      <span class="keywordflow">if</span> (IsWasmFuncRef(*<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>)) {</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>        <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = i::WasmInternalFunction::GetOrCreateExternal(<a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">i::direct_handle</a>(</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>            <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmFuncRef&gt;</a>(*result)-&gt;internal(store-&gt;i_isolate()),</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>            store-&gt;i_isolate()));</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>      }</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>      <span class="keywordflow">if</span> (IsWasmNull(*<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>)) {</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>        <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = v8_global-&gt;GetIsolate()-&gt;factory()-&gt;null_value();</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>      }</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>      <span class="keywordflow">return</span> Val(V8RefValueToWasm(store, <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>));</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>    }</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>    <span class="keywordflow">case</span> i::wasm::kS128:</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>      <span class="comment">// TODO(14034): Implement these.</span></div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>      <a class="code hl_define" href="logging_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>    <span class="keywordflow">case</span> i::wasm::kRtt:</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>    <span class="keywordflow">case</span> i::wasm::kI8:</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>    <span class="keywordflow">case</span> i::wasm::kI16:</div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>    <span class="keywordflow">case</span> i::wasm::kF16:</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>    <span class="keywordflow">case</span> i::wasm::kVoid:</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>    <span class="keywordflow">case</span> i::wasm::kTop:</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    <span class="keywordflow">case</span> i::wasm::kBottom:</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>  }</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>}</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span> </div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Global::set(<span class="keyword">const</span> Val&amp; val) {</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>  v8::Isolate::Scope isolate_scope(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="flag-definitions_8h.html#a5a70311d99b5e08c265b90f73f12c945">store</a>()-&gt;<a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>());</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmGlobalObject&gt;</a> v8_global = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>  <span class="keywordflow">switch</span> (val.kind()) {</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>    <span class="keywordflow">case</span> ValKind::I32:</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>      <span class="keywordflow">return</span> v8_global-&gt;SetI32(val.i32());</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>    <span class="keywordflow">case</span> ValKind::I64:</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>      <span class="keywordflow">return</span> v8_global-&gt;SetI64(val.i64());</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>    <span class="keywordflow">case</span> ValKind::F32:</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>      <span class="keywordflow">return</span> v8_global-&gt;SetF32(val.f32());</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>    <span class="keywordflow">case</span> ValKind::F64:</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>      <span class="keywordflow">return</span> v8_global-&gt;SetF64(val.f64());</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>    <span class="keywordflow">case</span> ValKind::EXTERNREF:</div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>      <span class="keywordflow">return</span> v8_global-&gt;SetRef(</div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>          WasmRefToV8(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="flag-definitions_8h.html#a5a70311d99b5e08c265b90f73f12c945">store</a>()-&gt;i_isolate(), val.ref()));</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>    <span class="keywordflow">case</span> ValKind::FUNCREF: {</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;store()-&gt;i_isolate();</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>      <span class="keyword">auto</span> external = WasmRefToV8(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="flag-definitions_8h.html#a5a70311d99b5e08c265b90f73f12c945">store</a>()-&gt;i_isolate(), val.ref());</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>      <span class="keyword">const</span> <span class="keywordtype">char</span>* error_message;</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>      <span class="keyword">auto</span> <a class="code hl_variable" href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">internal</a> = i::wasm::JSToWasmObject(isolate, <span class="keyword">nullptr</span>, external,</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>                                              v8_global-&gt;type(), &amp;error_message)</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>                          .ToHandleChecked();</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>      v8_global-&gt;SetRef(internal);</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span>    }</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>      <span class="comment">// TODO(wasm+): support new value types</span></div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>  }</div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>}</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span> </div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span><span class="comment">// Table Instances</span></div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span> </div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen02112" data-start="{" data-end="};">
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Table_01_4.html"> 2112</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Table&gt; {</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Table_01_4.html#aaa0fbff05be66f17bb733fe35c655bf2"> 2113</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Table, i::WasmTableObject&gt;</a>;</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>};</div>
</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span> </div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Table::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span> </div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Table::copy() const -&gt; own&lt;Table&gt; {</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy();</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span>}</div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span> </div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Table::make(Store* store_abs, <span class="keyword">const</span> TableType* type,</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>                             <span class="keyword">const</span> Ref* ref) -&gt; own&lt;Table&gt; {</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>  StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(isolate);</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>  <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(isolate);</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span> </div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>  <span class="comment">// Get &quot;element&quot;.</span></div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>  i::wasm::ValueType i_type;</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>  i::wasm::CanonicalValueType canonical_type;</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>  <span class="keywordflow">switch</span> (type-&gt;element()-&gt;kind()) {</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>    <span class="keywordflow">case</span> ValKind::FUNCREF:</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>      i_type = i::wasm::kWasmFuncRef;</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>      canonical_type = i::wasm::kCanonicalFuncRef;</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>    <span class="keywordflow">case</span> ValKind::EXTERNREF:</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>      <span class="comment">// See Engine::make().</span></div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>      i_type = i::wasm::kWasmExternRef;</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>      canonical_type = i::wasm::kCanonicalExternRef;</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>  }</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span> </div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>  <span class="keyword">const</span> Limits&amp; limits = type-&gt;limits();</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>  uint32_t minimum = limits.min;</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>  <span class="keywordflow">if</span> (minimum &gt; i::wasm::max_table_init_entries()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>  uint32_t maximum = limits.max;</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>  <span class="keywordtype">bool</span> has_maximum = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>  <span class="keywordflow">if</span> (maximum != Limits(0).max) {</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>    has_maximum = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>    <span class="keywordflow">if</span> (maximum &lt; minimum) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>    <span class="keywordflow">if</span> (maximum &gt; i::wasm::max_table_init_entries()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>  }</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span> </div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmTableObject&gt;</a> table_obj = i::WasmTableObject::New(</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>      isolate, <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmTrustedInstanceData&gt;</a>(), i_type,</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>      canonical_type, minimum, has_maximum, maximum,</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>      isolate-&gt;factory()-&gt;null_value(), i::wasm::AddressType::kI32);</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span> </div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>  <span class="keywordflow">if</span> (ref) {</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSReceiver&gt;</a> init = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(ref)-&gt;v8_object();</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    <span class="keywordflow">for</span> (uint32_t <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; minimum; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>      table_obj-&gt;Set(isolate, table_obj, <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>, init);</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>    }</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>  }</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Table&gt;::type::make</a>(store, table_obj);</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>}</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span> </div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Table::type() const -&gt; own&lt;TableType&gt; {</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmTableObject&gt;</a> table = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>  uint32_t min = table-&gt;current_length();</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>  <span class="comment">// Note: The C-API is not updated for memory64 yet; limits use uint32_t. Thus</span></div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>  <span class="comment">// truncate the actual declared maximum to kMaxUint32.</span></div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>  uint32_t max = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(std::min&lt;uint64_t&gt;(</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>      <a class="code hl_variable" href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">i::kMaxUInt32</a>, table-&gt;maximum_length_u64().value_or(<a class="code hl_variable" href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">i::kMaxUInt32</a>)));</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>  ValKind <a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>;</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>  <span class="keywordflow">switch</span> (table-&gt;unsafe_type().heap_representation()) {</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>    <span class="keywordflow">case</span> i::wasm::HeapType::kFunc:</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>      kind = ValKind::FUNCREF;</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>    <span class="keywordflow">case</span> i::wasm::HeapType::kExtern:</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>      kind = ValKind::EXTERNREF;</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>  }</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>  <span class="keywordflow">return</span> TableType::make(ValType::make(kind), Limits(min, max));</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>}</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span> </div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span><span class="comment">// TODO(14034): Handle types other than funcref and externref if needed.</span></div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Table::get(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) <span class="keyword">const</span> -&gt; own&lt;Ref&gt; {</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmTableObject&gt;</a> table = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(table-&gt;current_length())) <span class="keywordflow">return</span> own&lt;Ref&gt;();</div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> =</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>      i::WasmTableObject::Get(isolate, table, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>));</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>  <span class="keywordflow">if</span> (IsWasmFuncRef(*<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>)) {</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = i::WasmInternalFunction::GetOrCreateExternal(<a class="code hl_function" href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">i::direct_handle</a>(</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>        <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmFuncRef&gt;</a>(*result)-&gt;internal(isolate), isolate));</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>  }</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>  <span class="keywordflow">if</span> (IsWasmNull(*<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>)) {</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>    <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = isolate-&gt;factory()-&gt;null_value();</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>  }</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(<a class="code hl_function" href="namespacev8_1_1internal.html#aea9d736830d86242c4e1cb59a371d3a6">IsNull</a>(*<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>, isolate) || IsJSReceiver(*<a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>));</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>  <span class="keywordflow">return</span> V8RefValueToWasm(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="flag-definitions_8h.html#a5a70311d99b5e08c265b90f73f12c945">store</a>(), <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a>);</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>}</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span> </div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Table::set(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, <span class="keyword">const</span> Ref* ref) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmTableObject&gt;</a> table = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a> &gt;= <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(table-&gt;current_length())) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> obj = WasmRefToV8(isolate, ref);</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* error_message;</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>  <span class="comment">// We can use `table-&gt;unsafe_type()` and `module == nullptr` here as long</span></div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>  <span class="comment">// as the C-API doesn&#39;t support indexed types.</span></div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!table-&gt;unsafe_type().has_index());</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Object&gt;</a> obj_as_wasm =</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>      i::wasm::JSToWasmObject(isolate, <span class="keyword">nullptr</span>, obj, table-&gt;unsafe_type(),</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>                              &amp;error_message)</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>          .ToHandleChecked();</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>  i::WasmTableObject::Set(isolate, table, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>),</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>                          obj_as_wasm);</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>}</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span> </div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span><span class="comment">// TODO(jkummerow): Having Table::size_t shadowing &quot;std&quot; size_t is ugly.</span></div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Table::size() const -&gt; <span class="keywordtype">size_t</span> {</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object()-&gt;current_length();</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>}</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span> </div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Table::grow(<span class="keywordtype">size_t</span> delta, <span class="keyword">const</span> Ref* ref) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmTableObject&gt;</a> table = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(isolate);</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> obj = WasmRefToV8(isolate, ref);</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* error_message;</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>  <span class="comment">// We can use `table-&gt;unsafe_type()` and `module == nullptr` here as long</span></div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>  <span class="comment">// as the C-API doesn&#39;t support indexed types.</span></div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>  <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!table-&gt;unsafe_type().has_index());</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::Object&gt;</a> obj_as_wasm =</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>      i::wasm::JSToWasmObject(isolate, <span class="keyword">nullptr</span>, obj, table-&gt;unsafe_type(),</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>                              &amp;error_message)</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>          .ToHandleChecked();</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> = i::WasmTableObject::Grow(</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>      isolate, table, <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(delta), obj_as_wasm);</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a> &gt;= 0;</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>}</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span> </div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span><span class="comment">// Memory Instances</span></div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span> </div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen02264" data-start="{" data-end="};">
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Memory_01_4.html"> 2264</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Memory&gt; {</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Memory_01_4.html#a21b34f91a92faa7ae58cbb0567cfe8b9"> 2265</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Memory, i::WasmMemoryObject&gt;</a>;</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>};</div>
</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span> </div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Memory::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span> </div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Memory::copy() const -&gt; own&lt;Memory&gt; {</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy();</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>}</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span> </div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Memory::make(Store* store_abs, <span class="keyword">const</span> MemoryType* type)</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>    -&gt; own&lt;Memory&gt; {</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>  StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> scope(isolate);</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>  <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(isolate);</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span> </div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>  <span class="keyword">const</span> Limits&amp; limits = type-&gt;limits();</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>  uint32_t minimum = limits.min;</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>  <span class="comment">// The max_mem_pages limit is only spec&#39;ed for JS embeddings, so we&#39;ll</span></div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>  <span class="comment">// directly use the maximum pages limit here.</span></div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>  <span class="keywordflow">if</span> (minimum &gt; i::wasm::kSpecMaxMemory32Pages) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>  uint32_t maximum = limits.max;</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>  <span class="keywordflow">if</span> (maximum != Limits(0).max) {</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>    <span class="keywordflow">if</span> (maximum &lt; minimum) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>    <span class="keywordflow">if</span> (maximum &gt; i::wasm::kSpecMaxMemory32Pages) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>  }</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>  <span class="comment">// TODO(wasm+): Support shared memory and memory64.</span></div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>  <a class="code hl_enumeration" href="namespacev8_1_1internal.html#a680ace1d3e86dae2df93867132a3c160">i::SharedFlag</a> shared = i::SharedFlag::kNotShared;</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>  i::wasm::AddressType address_type = i::wasm::AddressType::kI32;</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmMemoryObject&gt;</a> memory_obj;</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>  <span class="keywordflow">if</span> (!i::WasmMemoryObject::New(isolate, minimum, maximum, shared, address_type)</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>           .ToHandle(&amp;memory_obj)) {</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>    <span class="keywordflow">return</span> own&lt;Memory&gt;();</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>  }</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Memory&gt;::type::make</a>(store, memory_obj);</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>}</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span> </div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Memory::type() const -&gt; own&lt;MemoryType&gt; {</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(<a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_variable" href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a>());</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmMemoryObject&gt;</a> memory = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>  uint32_t min = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(memory-&gt;array_buffer()-&gt;byte_length() /</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>                                       i::wasm::kWasmPageSize);</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>  uint32_t max =</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>      memory-&gt;has_maximum_pages() ? memory-&gt;maximum_pages() : 0xFFFFFFFFu;</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>  <span class="keywordflow">return</span> MemoryType::make(Limits(min, max));</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>}</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span> </div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Memory::data() const -&gt; byte_t* {</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>byte_t*<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>      <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object()-&gt;array_buffer()-&gt;backing_store());</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>}</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span> </div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Memory::data_size() const -&gt; <span class="keywordtype">size_t</span> {</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object()-&gt;array_buffer()-&gt;byte_length();</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>}</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span> </div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Memory::size() const -&gt; pages_t {</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>  PtrComprCageAccessScope ptr_compr_cage_access_scope(isolate);</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>pages_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>      <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object()-&gt;array_buffer()-&gt;byte_length() /</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>      i::wasm::kWasmPageSize);</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>}</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span> </div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Memory::grow(pages_t delta) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;<a class="code hl_function" href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">isolate</a>();</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>  v8::Isolate::Scope isolate_scope(<span class="keyword">reinterpret_cast&lt;</span>v8::Isolate*<span class="keyword">&gt;</span>(isolate));</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmMemoryObject&gt;</a> memory = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;v8_object();</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>  <a class="code hl_typedef" href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">int32_t</a> old = i::WasmMemoryObject::Grow(isolate, memory, delta);</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>  <span class="keywordflow">return</span> old != -1;</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>}</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span> </div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span><span class="comment">// Module Instances</span></div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span> </div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen02349" data-start="{" data-end="};">
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Instance_01_4.html"> 2349</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm_1_1implement.html">implement</a>&lt;Instance&gt; {</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"><a class="line" href="structwasm_1_1implement_3_01Instance_01_4.html#a9548d0774276853e3f3ee267ac5636bd"> 2350</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classwasm_1_1RefImpl.html">type</a> = <a class="code hl_class" href="classwasm_1_1RefImpl.html">RefImpl&lt;Instance, i::WasmInstanceObject&gt;</a>;</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>};</div>
</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span> </div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keywordtype">void</span> Instance::destroy() { <span class="keyword">delete</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>); }</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Instance::copy() const -&gt; own&lt;Instance&gt; {</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>)-&gt;copy();</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>}</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span> </div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> own&lt;Instance&gt; Instance::make(Store* store_abs,</div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>                                         <span class="keyword">const</span> Module* module_abs,</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>                                         <span class="keyword">const</span> vec&lt;Extern*&gt;&amp; imports,</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>                                         own&lt;Trap&gt;* trap) {</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>  StoreImpl* store = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(store_abs);</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="structwasm_1_1implement_3_01Module_01_4.html#a2130567151fc069f4042dcc5a7638eaf">implement&lt;Module&gt;::type</a>* module = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(module_abs);</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>  <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(isolate);</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span> </div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>  <a class="code hl_define" href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a>(module-&gt;v8_object()-&gt;GetIsolate(), isolate);</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span> </div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>  <span class="keywordflow">if</span> (trap) *trap = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>  ownvec&lt;ImportType&gt; import_types = module_abs-&gt;imports();</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::JSObject&gt;</a> imports_obj =</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>      isolate-&gt;factory()-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; import_types.<a class="code hl_class" href="classsize.html">size</a>(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    ImportType* type = import_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>].get();</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::String&gt;</a> module_str =</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>        <a class="code hl_function" href="namespacewasm.html#aacbef3fe5bcf9124421156872f7c20eb">VecToString</a>(isolate, type-&gt;module());</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::String&gt;</a> name_str = <a class="code hl_function" href="namespacewasm.html#aacbef3fe5bcf9124421156872f7c20eb">VecToString</a>(isolate, type-&gt;name());</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span> </div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSObject&gt;</a> module_obj;</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>    <a class="code hl_class" href="classv8_1_1internal_1_1LookupIterator.html">i::LookupIterator</a> module_it(isolate, imports_obj, module_str,</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>                                i::LookupIterator::OWN_SKIP_INTERCEPTOR);</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>    <span class="keywordflow">if</span> (i::JSObject::HasProperty(&amp;module_it).ToChecked()) {</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>      module_obj = <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::JSObject&gt;</a>(</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>          i::Object::GetProperty(&amp;module_it).ToHandleChecked());</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>      module_obj = isolate-&gt;factory()-&gt;NewJSObject(isolate-&gt;object_function());</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>      <a class="code hl_function" href="namespacewasm.html#a1159abdb217149e8db975f0037d4bfe7">ignore</a>(</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>          i::Object::SetProperty(isolate, imports_obj, module_str, module_obj));</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>    }</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>    <a class="code hl_function" href="namespacewasm.html#a1159abdb217149e8db975f0037d4bfe7">ignore</a>(i::Object::SetProperty(isolate, module_obj, name_str,</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>                                  <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(imports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>])-&gt;v8_object()));</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>  }</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>  i::wasm::ErrorThrower thrower(isolate, <span class="stringliteral">&quot;instantiation&quot;</span>);</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>  <a class="code hl_class" href="classv8_1_1internal_1_1MaybeHandle.html">i::MaybeHandle&lt;i::WasmInstanceObject&gt;</a> instance_obj =</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>      i::wasm::GetWasmEngine()-&gt;SyncInstantiate(</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>          isolate, &amp;thrower, module-&gt;v8_object(), imports_obj,</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>          <a class="code hl_class" href="classv8_1_1internal_1_1MaybeHandle.html">i::MaybeHandle&lt;i::JSArrayBuffer&gt;</a>());</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>  <span class="keywordflow">if</span> (trap) {</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>    <span class="keywordflow">if</span> (thrower.error()) {</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>      *trap = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Trap&gt;::type::make</a>(</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>          store, GetProperException(isolate, thrower.Reify()));</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!thrower.error());           <span class="comment">// Reify() called Reset().</span></div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>      <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(!isolate-&gt;has_exception());  <span class="comment">// Hasn&#39;t been thrown yet.</span></div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>      <span class="keywordflow">return</span> own&lt;Instance&gt;();</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isolate-&gt;has_exception()) {</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>      <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> maybe_exception(isolate-&gt;exception(), isolate);</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>      *trap = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Trap&gt;::type::make</a>(</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>          store, GetProperException(isolate, maybe_exception));</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>      isolate-&gt;clear_exception();</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>      <span class="keywordflow">return</span> own&lt;Instance&gt;();</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>    }</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instance_obj.<a class="code hl_function" href="classv8_1_1internal_1_1MaybeHandle.html#a76d0200bf11d6f7628c7119d730efa44">is_null</a>()) {</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>    <span class="comment">// If no {trap} output is specified, silently swallow all errors.</span></div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>    thrower.Reset();</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>    isolate-&gt;clear_exception();</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>    <span class="keywordflow">return</span> own&lt;Instance&gt;();</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>  }</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Instance&gt;::type::make</a>(store, instance_obj.<a class="code hl_function" href="classv8_1_1internal_1_1MaybeHandle.html#a159acedd790dff56dbcc03792674e232">ToHandleChecked</a>());</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>}</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span> </div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span> </div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>own&lt;Instance&gt; GetInstance(StoreImpl* store,</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>                          <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::WasmInstanceObject&gt;</a> instance) {</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Instance&gt;::type::make</a>(store, instance);</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>}</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span> </div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span> </div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span><a class="code hl_define" href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a> <span class="keyword">auto</span> Instance::exports() const -&gt; ownvec&lt;Extern&gt; {</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="structwasm_1_1implement_3_01Instance_01_4.html#a9548d0774276853e3f3ee267ac5636bd">implement&lt;Instance&gt;::type</a>* instance = <a class="code hl_function" href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">impl</a>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>  StoreImpl* store = instance-&gt;store();</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>  <a class="code hl_class" href="classv8_1_1internal_1_1Isolate.html">i::Isolate</a>* isolate = store-&gt;i_isolate();</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>  v8::Isolate::Scope isolate_scope(store-&gt;isolate());</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>  <a class="code hl_class" href="classv8_1_1internal_1_1HandleScope.html">i::HandleScope</a> handle_scope(isolate);</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>  <a class="code hl_function" href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">CheckAndHandleInterrupts</a>(isolate);</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmInstanceObject&gt;</a> instance_obj = instance-&gt;v8_object();</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::WasmModuleObject&gt;</a> module_obj(instance_obj-&gt;module_object(),</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>                                                  isolate);</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>  <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::JSObject&gt;</a> exports_obj(instance_obj-&gt;exports_object(),</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>                                           isolate);</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span> </div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>  ownvec&lt;ExportType&gt; export_types = <a class="code hl_function" href="namespacewasm.html#a20ebafc5faa7947c1b0c1ad0e34bd77a">ExportsImpl</a>(module_obj);</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>  ownvec&lt;Extern&gt; exports =</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>      ownvec&lt;Extern&gt;::make_uninitialized(export_types.size());</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>  <span class="keywordflow">if</span> (!exports) <span class="keywordflow">return</span> ownvec&lt;Extern&gt;::invalid();</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span> </div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; export_types.<a class="code hl_class" href="classsize.html">size</a>(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>    <span class="keyword">auto</span>&amp; name = export_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;name();</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>    <a class="code hl_class" href="classv8_1_1internal_1_1DirectHandle.html">i::DirectHandle&lt;i::String&gt;</a> name_str = <a class="code hl_function" href="namespacewasm.html#aacbef3fe5bcf9124421156872f7c20eb">VecToString</a>(isolate, name);</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>    <a class="code hl_class" href="classv8_1_1internal_1_1Handle.html">i::Handle&lt;i::Object&gt;</a> obj =</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>        i::Object::GetProperty(isolate, exports_obj, name_str)</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>            .ToHandleChecked();</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span> </div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>    <span class="keyword">const</span> ExternType* type = export_types[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]-&gt;type();</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>    <span class="keywordflow">switch</span> (type-&gt;kind()) {</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>      <span class="keywordflow">case</span> ExternKind::FUNC: {</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>        <a class="code hl_define" href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a>(i::WasmExternalFunction::IsWasmExternalFunction(*obj));</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>        exports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Func&gt;::type::make</a>(</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>            store, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmExternalFunction&gt;</a>(obj));</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>      } <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>      <span class="keywordflow">case</span> ExternKind::GLOBAL: {</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>        exports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Global&gt;::type::make</a>(</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>            store, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmGlobalObject&gt;</a>(obj));</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>      } <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>      <span class="keywordflow">case</span> ExternKind::TABLE: {</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>        exports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Table&gt;::type::make</a>(</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>            store, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmTableObject&gt;</a>(obj));</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>      } <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>      <span class="keywordflow">case</span> ExternKind::MEMORY: {</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>        exports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <a class="code hl_function" href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">implement&lt;Memory&gt;::type::make</a>(</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>            store, <a class="code hl_function" href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">i::Cast&lt;i::WasmMemoryObject&gt;</a>(obj));</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>      } <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>    }</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>  }</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span> </div>
<div class="line"><a id="l02479" name="l02479"></a><span class="lineno"> 2479</span>  <span class="keywordflow">return</span> exports;</div>
<div class="line"><a id="l02480" name="l02480"></a><span class="lineno"> 2480</span>}</div>
<div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span> </div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span> </div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>}  <span class="comment">// namespace wasm</span></div>
</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span> </div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span><span class="comment">// BEGIN FILE wasm-c.cc</span></div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span> </div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span> </div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span><span class="comment">// Auxiliaries</span></div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span> </div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span><span class="comment">// Backing implementation</span></div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span> </div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> {</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span> </div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="foldopen" id="foldopen02498" data-start="{" data-end="};">
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"><a class="line" href="structborrowed__vec.html"> 2498</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structborrowed__vec.html">borrowed_vec</a> {</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"><a class="line" href="structborrowed__vec.html#a1afa391ad7a390d905e4e674e6b3741f"> 2499</a></span>  wasm::vec&lt;T&gt; <a class="code hl_variable" href="structborrowed__vec.html#a1afa391ad7a390d905e4e674e6b3741f">it</a>;</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"><a class="line" href="structborrowed__vec.html#acaec8de0c377205737a6d6c97cd99acc"> 2500</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="structborrowed__vec.html#acaec8de0c377205737a6d6c97cd99acc">borrowed_vec</a>(wasm::vec&lt;T&gt;&amp;&amp; v) : it(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(v)) {}</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"><a class="line" href="structborrowed__vec.html#a25b86be37e621500c045e1ccf5f20523"> 2501</a></span>  <a class="code hl_function" href="structborrowed__vec.html#a25b86be37e621500c045e1ccf5f20523">borrowed_vec</a>(<a class="code hl_struct" href="structborrowed__vec.html">borrowed_vec&lt;T&gt;</a>&amp;&amp; that) : it(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(that.it)) {}</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"><a class="line" href="structborrowed__vec.html#ae9fd0f07531f565dc2540962d27260c8"> 2502</a></span>  <a class="code hl_function" href="structborrowed__vec.html#ae9fd0f07531f565dc2540962d27260c8">~borrowed_vec</a>() { it.release(); }</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>};</div>
</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span> </div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>}  <span class="comment">// extern &quot;C++&quot;</span></div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span> </div>
<div class="foldopen" id="foldopen02507" data-start="" data-end="">
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ade5babc8f2c61877aae1e7ba3f6fb152"> 2507</a></span><span class="preprocessor">#define WASM_DEFINE_OWN(name, Name)                                            \</span></div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span><span class="preprocessor">  struct wasm_##name##_t : Name {};                                            \</span></div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span><span class="preprocessor">                                                                               \</span></div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span><span class="preprocessor">  void wasm_##name##_delete(wasm_##name##_t* x) { delete x; }                  \</span></div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span><span class="preprocessor">                                                                               \</span></div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span><span class="preprocessor">  extern &quot;C++&quot; inline auto hide_##name(Name* x)-&gt;wasm_##name##_t* {            \</span></div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span><span class="preprocessor">    return static_cast&lt;wasm_##name##_t*&gt;(x);                                   \</span></div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span><span class="preprocessor">  extern &quot;C++&quot; inline auto hide_##name(const Name* x)                          \</span></div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span><span class="preprocessor">      -&gt;const wasm_##name##_t* {                                               \</span></div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span><span class="preprocessor">    return static_cast&lt;const wasm_##name##_t*&gt;(x);                             \</span></div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span><span class="preprocessor">  extern &quot;C++&quot; inline auto reveal_##name(wasm_##name##_t* x)-&gt;Name* {          \</span></div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span><span class="preprocessor">    return x;                                                                  \</span></div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span><span class="preprocessor">  extern &quot;C++&quot; inline auto reveal_##name(const wasm_##name##_t* x)             \</span></div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span><span class="preprocessor">      -&gt;const Name* {                                                          \</span></div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span><span class="preprocessor">    return x;                                                                  \</span></div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span><span class="preprocessor">  extern &quot;C++&quot; inline auto get_##name(wasm::own&lt;Name&gt;&amp; x)-&gt;wasm_##name##_t* {  \</span></div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span><span class="preprocessor">    return hide_##name(x.get());                                               \</span></div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span><span class="preprocessor">  extern &quot;C++&quot; inline auto get_##name(const wasm::own&lt;Name&gt;&amp; x)                \</span></div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span><span class="preprocessor">      -&gt;const wasm_##name##_t* {                                               \</span></div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span><span class="preprocessor">    return hide_##name(x.get());                                               \</span></div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span><span class="preprocessor">  extern &quot;C++&quot; inline auto release_##name(wasm::own&lt;Name&gt;&amp;&amp; x)                 \</span></div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span><span class="preprocessor">      -&gt;wasm_##name##_t* {                                                     \</span></div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span><span class="preprocessor">    return hide_##name(x.release());                                           \</span></div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span><span class="preprocessor">  extern &quot;C++&quot; inline auto adopt_##name(wasm_##name##_t* x)-&gt;wasm::own&lt;Name&gt; { \</span></div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span><span class="preprocessor">    return make_own(x);                                                        \</span></div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span><span class="preprocessor">  }</span></div>
</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span> </div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span><span class="comment">// Vectors</span></div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span> </div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span><span class="preprocessor">#ifdef V8_GC_MOLE</span></div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span><span class="preprocessor">#define ASSERT_VEC_BASE_SIZE(name, Name, vec, ptr_or_none)</span></div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span> </div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span><span class="preprocessor">#else</span></div>
<div class="foldopen" id="foldopen02547" data-start="" data-end="">
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a2d2fbfc36e552cac1c34a07b63059b69"> 2547</a></span><span class="preprocessor">#define ASSERT_VEC_BASE_SIZE(name, Name, vec, ptr_or_none)                 \</span></div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span><span class="preprocessor">  static_assert(sizeof(wasm_##name##_vec_t) == sizeof(vec&lt;Name&gt;),          \</span></div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span><span class="preprocessor">                &quot;C/C++ incompatibility&quot;);                                  \</span></div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span><span class="preprocessor">  static_assert(                                                           \</span></div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span><span class="preprocessor">      sizeof(wasm_##name##_t ptr_or_none) == sizeof(vec&lt;Name&gt;::elem_type), \</span></div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span><span class="preprocessor">      &quot;C/C++ incompatibility&quot;);</span></div>
</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span> </div>
<div class="foldopen" id="foldopen02555" data-start="" data-end="">
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a38f94e392184623edd41eb7b96a91417"> 2555</a></span><span class="preprocessor">#define WASM_DEFINE_VEC_BASE(name, Name, vec, ptr_or_none)                     \</span></div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span><span class="preprocessor">  ASSERT_VEC_BASE_SIZE(name, Name, vec, ptr_or_none)                           \</span></div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span><span class="preprocessor">  extern &quot;C++&quot; inline auto hide_##name##_vec(vec&lt;Name&gt;&amp; v)                     \</span></div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span><span class="preprocessor">      -&gt;wasm_##name##_vec_t* {                                                 \</span></div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span><span class="preprocessor">    return reinterpret_cast&lt;wasm_##name##_vec_t*&gt;(&amp;v);                         \</span></div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span><span class="preprocessor">  extern &quot;C++&quot; inline auto hide_##name##_vec(const vec&lt;Name&gt;&amp; v)               \</span></div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span><span class="preprocessor">      -&gt;const wasm_##name##_vec_t* {                                           \</span></div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span><span class="preprocessor">    return reinterpret_cast&lt;const wasm_##name##_vec_t*&gt;(&amp;v);                   \</span></div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span><span class="preprocessor">  extern &quot;C++&quot; inline auto hide_##name##_vec(vec&lt;Name&gt;::elem_type* v)          \</span></div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span><span class="preprocessor">      -&gt;wasm_##name##_t ptr_or_none* {                                         \</span></div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span><span class="preprocessor">    return reinterpret_cast&lt;wasm_##name##_t ptr_or_none*&gt;(v);                  \</span></div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span><span class="preprocessor">  extern &quot;C++&quot; inline auto hide_##name##_vec(const vec&lt;Name&gt;::elem_type* v)    \</span></div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span><span class="preprocessor">      -&gt;wasm_##name##_t ptr_or_none const* {                                   \</span></div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span><span class="preprocessor">    return reinterpret_cast&lt;wasm_##name##_t ptr_or_none const*&gt;(v);            \</span></div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span><span class="preprocessor">  extern &quot;C++&quot; inline auto reveal_##name##_vec(wasm_##name##_t ptr_or_none* v) \</span></div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span><span class="preprocessor">      -&gt;vec&lt;Name&gt;::elem_type* {                                                \</span></div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span><span class="preprocessor">    return reinterpret_cast&lt;vec&lt;Name&gt;::elem_type*&gt;(v);                         \</span></div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span><span class="preprocessor">  extern &quot;C++&quot; inline auto reveal_##name##_vec(                                \</span></div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span><span class="preprocessor">      wasm_##name##_t ptr_or_none const* v)                                    \</span></div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span><span class="preprocessor">      -&gt;const vec&lt;Name&gt;::elem_type* {                                          \</span></div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span><span class="preprocessor">    return reinterpret_cast&lt;const vec&lt;Name&gt;::elem_type*&gt;(v);                   \</span></div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span><span class="preprocessor">  extern &quot;C++&quot; inline auto get_##name##_vec(vec&lt;Name&gt;&amp; v)                      \</span></div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span><span class="preprocessor">      -&gt;wasm_##name##_vec_t {                                                  \</span></div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span><span class="preprocessor">    wasm_##name##_vec_t v2 = {v.size(), hide_##name##_vec(v.get())};           \</span></div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span><span class="preprocessor">    return v2;                                                                 \</span></div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span><span class="preprocessor">  extern &quot;C++&quot; inline auto get_##name##_vec(const vec&lt;Name&gt;&amp; v)                \</span></div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span><span class="preprocessor">      -&gt;const wasm_##name##_vec_t {                                            \</span></div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span><span class="preprocessor">    wasm_##name##_vec_t v2 = {                                                 \</span></div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span><span class="preprocessor">        v.size(),                                                              \</span></div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span><span class="preprocessor">        const_cast&lt;wasm_##name##_t ptr_or_none*&gt;(hide_##name##_vec(v.get()))}; \</span></div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span><span class="preprocessor">    return v2;                                                                 \</span></div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span><span class="preprocessor">  extern &quot;C++&quot; inline auto release_##name##_vec(vec&lt;Name&gt;&amp;&amp; v)                 \</span></div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span><span class="preprocessor">      -&gt;wasm_##name##_vec_t {                                                  \</span></div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span><span class="preprocessor">    wasm_##name##_vec_t v2 = {v.size(), hide_##name##_vec(v.release())};       \</span></div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span><span class="preprocessor">    return v2;                                                                 \</span></div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span><span class="preprocessor">  extern &quot;C++&quot; inline auto adopt_##name##_vec(wasm_##name##_vec_t* v)          \</span></div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span><span class="preprocessor">      -&gt;vec&lt;Name&gt; {                                                            \</span></div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span><span class="preprocessor">    return vec&lt;Name&gt;::adopt(v-&gt;size, reveal_##name##_vec(v-&gt;data));            \</span></div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span><span class="preprocessor">  extern &quot;C++&quot; inline auto adopt_##name##_vec(const wasm_##name##_vec_t* v)    \</span></div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span><span class="preprocessor">      -&gt;const vec&lt;Name&gt; {                                                      \</span></div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span><span class="preprocessor">    return vec&lt;Name&gt;::adopt(v-&gt;size, reveal_##name##_vec(v-&gt;data));            \</span></div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span><span class="preprocessor">  extern &quot;C++&quot; inline auto borrow_##name##_vec(const wasm_##name##_vec_t* v)   \</span></div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span><span class="preprocessor">      -&gt;borrowed_vec&lt;vec&lt;Name&gt;::elem_type&gt; {                                   \</span></div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span><span class="preprocessor">    return borrowed_vec&lt;vec&lt;Name&gt;::elem_type&gt;(                                 \</span></div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span><span class="preprocessor">        vec&lt;Name&gt;::adopt(v-&gt;size, reveal_##name##_vec(v-&gt;data)));              \</span></div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span><span class="preprocessor">                                                                               \</span></div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span><span class="preprocessor">  void wasm_##name##_vec_new_uninitialized(wasm_##name##_vec_t* out,           \</span></div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span><span class="preprocessor">                                           size_t size) {                      \</span></div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span><span class="preprocessor">    *out = release_##name##_vec(vec&lt;Name&gt;::make_uninitialized(size));          \</span></div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span><span class="preprocessor">  void wasm_##name##_vec_new_empty(wasm_##name##_vec_t* out) {                 \</span></div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span><span class="preprocessor">    wasm_##name##_vec_new_uninitialized(out, 0);                               \</span></div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span><span class="preprocessor">  }                                                                            \</span></div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span><span class="preprocessor">                                                                               \</span></div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span><span class="preprocessor">  void wasm_##name##_vec_delete(wasm_##name##_vec_t* v) {                      \</span></div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span><span class="preprocessor">    adopt_##name##_vec(v);                                                     \</span></div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span><span class="preprocessor">  }</span></div>
</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span> </div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span><span class="comment">// Vectors with no ownership management of elements</span></div>
<div class="foldopen" id="foldopen02626" data-start="" data-end="">
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a1d52b0c575a1a6a6ae92251a7d29e755"> 2626</a></span><span class="preprocessor">#define WASM_DEFINE_VEC_PLAIN(name, Name)                                     \</span></div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span><span class="preprocessor">  WASM_DEFINE_VEC_BASE(name, Name,                                            \</span></div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span><span class="preprocessor">                       wasm::vec, ) </span><span class="comment">/* NOLINT(whitespace/parens) */</span><span class="preprocessor">           \</span></div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span><span class="preprocessor">                                                                              \</span></div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span><span class="preprocessor">  void wasm_##name##_vec_new(wasm_##name##_vec_t* out, size_t size,           \</span></div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span><span class="preprocessor">                             const wasm_##name##_t data[]) {                  \</span></div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span><span class="preprocessor">    auto v2 = wasm::vec&lt;Name&gt;::make_uninitialized(size);                      \</span></div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span><span class="preprocessor">    if (v2.size() != 0) {                                                     \</span></div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span><span class="preprocessor">      memcpy(v2.get(), data, size * sizeof(wasm_##name##_t));                 \</span></div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span><span class="preprocessor">    }                                                                         \</span></div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span><span class="preprocessor">    *out = release_##name##_vec(std::move(v2));                               \</span></div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span><span class="preprocessor">  }                                                                           \</span></div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span><span class="preprocessor">                                                                              \</span></div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span><span class="preprocessor">  WASM_API_EXTERN void wasm_##name##_vec_copy(wasm_##name##_vec_t* out,       \</span></div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span><span class="preprocessor">                                              const wasm_##name##_vec_t* v) { \</span></div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span><span class="preprocessor">    wasm_##name##_vec_new(out, v-&gt;size, v-&gt;data);                             \</span></div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span><span class="preprocessor">  }</span></div>
</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span> </div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span><span class="comment">// Vectors that own their elements</span></div>
<div class="foldopen" id="foldopen02645" data-start="" data-end="">
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a5f58be229336ab32eeec2acd3a894c26"> 2645</a></span><span class="preprocessor">#define WASM_DEFINE_VEC_OWN(name, Name)                                       \</span></div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span><span class="preprocessor">  WASM_DEFINE_VEC_BASE(name, Name, wasm::ownvec, *)                           \</span></div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span><span class="preprocessor">                                                                              \</span></div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span><span class="preprocessor">  void wasm_##name##_vec_new(wasm_##name##_vec_t* out, size_t size,           \</span></div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span><span class="preprocessor">                             wasm_##name##_t* const data[]) {                 \</span></div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span><span class="preprocessor">    auto v2 = wasm::ownvec&lt;Name&gt;::make_uninitialized(size);                   \</span></div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span><span class="preprocessor">    for (size_t i = 0; i &lt; v2.size(); ++i) {                                  \</span></div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span><span class="preprocessor">      v2[i] = adopt_##name(data[i]);                                          \</span></div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span><span class="preprocessor">    }                                                                         \</span></div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span><span class="preprocessor">    *out = release_##name##_vec(std::move(v2));                               \</span></div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span><span class="preprocessor">  }                                                                           \</span></div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span><span class="preprocessor">                                                                              \</span></div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span><span class="preprocessor">  WASM_API_EXTERN void wasm_##name##_vec_copy(wasm_##name##_vec_t* out,       \</span></div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span><span class="preprocessor">                                              const wasm_##name##_vec_t* v) { \</span></div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span><span class="preprocessor">    auto v2 = wasm::ownvec&lt;Name&gt;::make_uninitialized(v-&gt;size);                \</span></div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span><span class="preprocessor">    for (size_t i = 0; i &lt; v2.size(); ++i) {                                  \</span></div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span><span class="preprocessor">      v2[i] = adopt_##name(wasm_##name##_copy(v-&gt;data[i]));                   \</span></div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span><span class="preprocessor">    }                                                                         \</span></div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span><span class="preprocessor">    *out = release_##name##_vec(std::move(v2));                               \</span></div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span><span class="preprocessor">  }</span></div>
</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span> </div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> {</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="foldopen" id="foldopen02668" data-start="{" data-end="}">
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a579949871f64bfd64a3d4fde7d8841eb"> 2668</a></span><span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#aaa27c43c14d3f7d475899d57651dfe09">is_empty</a>(T* p) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>  <span class="keywordflow">return</span> !p;</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>}</div>
</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>}</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span> </div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span><span class="comment">// Byte vectors</span></div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span> </div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span><a class="code hl_define" href="c-api_8cc.html#a1d52b0c575a1a6a6ae92251a7d29e755">WASM_DEFINE_VEC_PLAIN</a>(<span class="keywordtype">byte</span>, byte_t)</div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span> </div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span> </div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span><span class="comment">// Runtime Environment</span></div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span> </div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span><span class="comment">// Configuration</span></div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span> </div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span><a class="code hl_define" href="c-api_8cc.html#ade5babc8f2c61877aae1e7ba3f6fb152">WASM_DEFINE_OWN</a>(config, wasm::Config)</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span> </div>
<div class="foldopen" id="foldopen02684" data-start="{" data-end="}">
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"><a class="line" href="c-api_8cc.html#abbe587923ab70a1b70e543231dd83cc1"> 2684</a></span>wasm_config_t* <a class="code hl_function" href="c-api_8cc.html#abbe587923ab70a1b70e543231dd83cc1">wasm_config_new</a>() {</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>  <span class="keywordflow">return</span> release_config(wasm::Config::make());</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>}</div>
</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span> </div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span><span class="comment">// Engine</span></div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span> </div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span><a class="code hl_define" href="c-api_8cc.html#ade5babc8f2c61877aae1e7ba3f6fb152">WASM_DEFINE_OWN</a>(engine, wasm::Engine)</div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span> </div>
<div class="foldopen" id="foldopen02692" data-start="{" data-end="}">
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a626e08dc009811e6d80a3643a809e492"> 2692</a></span>wasm_engine_t* <a class="code hl_function" href="c-api_8cc.html#a626e08dc009811e6d80a3643a809e492">wasm_engine_new</a>() {</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>  <span class="keywordflow">return</span> release_engine(wasm::Engine::make());</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>}</div>
</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span> </div>
<div class="foldopen" id="foldopen02696" data-start="{" data-end="}">
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a9704f40000e2b525bb5a2a386ae21cd9"> 2696</a></span>wasm_engine_t* <a class="code hl_function" href="c-api_8cc.html#a9704f40000e2b525bb5a2a386ae21cd9">wasm_engine_new_with_config</a>(wasm_config_t* config) {</div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>  <span class="keywordflow">return</span> release_engine(wasm::Engine::make(adopt_config(config)));</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>}</div>
</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span> </div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span><span class="comment">// Stores</span></div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span> </div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span><a class="code hl_define" href="c-api_8cc.html#ade5babc8f2c61877aae1e7ba3f6fb152">WASM_DEFINE_OWN</a>(store, wasm::Store)</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span> </div>
<div class="foldopen" id="foldopen02704" data-start="{" data-end="}">
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a40cdd52c5b200a981a41f03d7149fa05"> 2704</a></span>wasm_store_t* <a class="code hl_function" href="c-api_8cc.html#a40cdd52c5b200a981a41f03d7149fa05">wasm_store_new</a>(wasm_engine_t* engine) {</div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>  <span class="keywordflow">return</span> release_store(wasm::Store::make(engine));</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>}</div>
</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span> </div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span><span class="comment">// Type Representations</span></div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span> </div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span><span class="comment">// Type attributes</span></div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span> </div>
<div class="foldopen" id="foldopen02713" data-start="{" data-end="}">
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"><a class="line" href="c-api_8cc.html#aec744ea9ac3c538bdbdcf76f23a56653"> 2713</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#aec744ea9ac3c538bdbdcf76f23a56653">hide_mutability</a>(wasm::Mutability mutability)</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>    -&gt; wasm_mutability_t {</div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>wasm_mutability_t<span class="keyword">&gt;</span>(mutability);</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>}</div>
</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span> </div>
<div class="foldopen" id="foldopen02718" data-start="{" data-end="}">
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a4b34b183aeeaa0c7ecca62520211b1ed"> 2718</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a4b34b183aeeaa0c7ecca62520211b1ed">reveal_mutability</a>(wasm_mutability_t mutability)</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>    -&gt; wasm::Mutability {</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>wasm::Mutability<span class="keyword">&gt;</span>(mutability);</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>}</div>
</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span> </div>
<div class="foldopen" id="foldopen02723" data-start="{" data-end="}">
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ade982c0b7a9217b00ca8d0a032f66619"> 2723</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#ade982c0b7a9217b00ca8d0a032f66619">hide_limits</a>(<span class="keyword">const</span> wasm::Limits&amp; limits)</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>    -&gt; <span class="keyword">const</span> wasm_limits_t* {</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>wasm_limits_t*<span class="keyword">&gt;</span>(&amp;limits);</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>}</div>
</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span> </div>
<div class="foldopen" id="foldopen02728" data-start="{" data-end="}">
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a47ffa7ea68c385bcbeaf03b62a181c50"> 2728</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a47ffa7ea68c385bcbeaf03b62a181c50">reveal_limits</a>(wasm_limits_t limits) -&gt; wasm::Limits {</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>  <span class="keywordflow">return</span> wasm::Limits(limits.min, limits.max);</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>}</div>
</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span> </div>
<div class="foldopen" id="foldopen02732" data-start="{" data-end="}">
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a1a5c15f204f306f8ce492ae8cfa5d168"> 2732</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a1a5c15f204f306f8ce492ae8cfa5d168">hide_valkind</a>(wasm::ValKind kind) -&gt; wasm_valkind_t {</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>wasm_valkind_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>);</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span>}</div>
</div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span> </div>
<div class="foldopen" id="foldopen02736" data-start="{" data-end="}">
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61"> 2736</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a>(wasm_valkind_t kind) -&gt; wasm::ValKind {</div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>wasm::ValKind<span class="keyword">&gt;</span>(<a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>);</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>}</div>
</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span> </div>
<div class="foldopen" id="foldopen02740" data-start="{" data-end="}">
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"><a class="line" href="c-api_8cc.html#adc5fc5dcdf2245f204fdeb8d45ce506c"> 2740</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#adc5fc5dcdf2245f204fdeb8d45ce506c">hide_externkind</a>(wasm::ExternKind kind)</div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>    -&gt; wasm_externkind_t {</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>wasm_externkind_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>);</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>}</div>
</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span> </div>
<div class="foldopen" id="foldopen02745" data-start="{" data-end="}">
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a85c5d13c31f6803a828f8f432db8f8a9"> 2745</a></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a85c5d13c31f6803a828f8f432db8f8a9">reveal_externkind</a>(wasm_externkind_t kind)</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>    -&gt; wasm::ExternKind {</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>wasm::ExternKind<span class="keyword">&gt;</span>(<a class="code hl_variable" href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a>);</div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>}</div>
</div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span> </div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span><span class="comment">// Generic</span></div>
<div class="line"><a id="l02751" name="l02751"></a><span class="lineno"> 2751</span> </div>
<div class="foldopen" id="foldopen02752" data-start="" data-end="">
<div class="line"><a id="l02752" name="l02752"></a><span class="lineno"><a class="line" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b"> 2752</a></span><span class="preprocessor">#define WASM_DEFINE_TYPE(name, Name)                   \</span></div>
<div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span><span class="preprocessor">  WASM_DEFINE_OWN(name, Name)                          \</span></div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span><span class="preprocessor">  WASM_DEFINE_VEC_OWN(name, Name)                      \</span></div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span><span class="preprocessor">                                                       \</span></div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span><span class="preprocessor">  WASM_API_EXTERN wasm_##name##_t* wasm_##name##_copy( \</span></div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span><span class="preprocessor">      const wasm_##name##_t* t) {                      \</span></div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span><span class="preprocessor">    return release_##name(t-&gt;copy());                  \</span></div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span><span class="preprocessor">  }</span></div>
</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span> </div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span><span class="comment">// Value Types</span></div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span> </div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(valtype, wasm::ValType)</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span> </div>
<div class="foldopen" id="foldopen02765" data-start="{" data-end="}">
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a59f74ca105cb5eeee03ab1fc9e6003df"> 2765</a></span>wasm_valtype_t* <a class="code hl_function" href="c-api_8cc.html#a59f74ca105cb5eeee03ab1fc9e6003df">wasm_valtype_new</a>(wasm_valkind_t k) {</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>  <span class="keywordflow">return</span> release_valtype(wasm::ValType::make(<a class="code hl_function" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a>(k)));</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>}</div>
</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span> </div>
<div class="foldopen" id="foldopen02769" data-start="{" data-end="}">
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"><a class="line" href="c-api_8cc.html#adb4baa18c6ec4996dd37034a906734e2"> 2769</a></span>wasm_valkind_t <a class="code hl_function" href="c-api_8cc.html#adb4baa18c6ec4996dd37034a906734e2">wasm_valtype_kind</a>(<span class="keyword">const</span> wasm_valtype_t* t) {</div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="c-api_8cc.html#a1a5c15f204f306f8ce492ae8cfa5d168">hide_valkind</a>(t-&gt;kind());</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>}</div>
</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span> </div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span><span class="comment">// Function Types</span></div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span> </div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(functype, wasm::FuncType)</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span> </div>
<div class="foldopen" id="foldopen02777" data-start="{" data-end="}">
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ac1896fb3b18052f41e518d693f7e695e"> 2777</a></span>wasm_functype_t* <a class="code hl_function" href="c-api_8cc.html#ac1896fb3b18052f41e518d693f7e695e">wasm_functype_new</a>(wasm_valtype_vec_t* params,</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>                                   wasm_valtype_vec_t* results) {</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>  <span class="keywordflow">return</span> release_functype(wasm::FuncType::make(adopt_valtype_vec(params),</div>
<div class="line"><a id="l02780" name="l02780"></a><span class="lineno"> 2780</span>                                               adopt_valtype_vec(results)));</div>
<div class="line"><a id="l02781" name="l02781"></a><span class="lineno"> 2781</span>}</div>
</div>
<div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span> </div>
<div class="foldopen" id="foldopen02783" data-start="{" data-end="}">
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a5b3cdb8630394ccd9cdfd631e4d22a4a"> 2783</a></span><span class="keyword">const</span> wasm_valtype_vec_t* <a class="code hl_function" href="c-api_8cc.html#a5b3cdb8630394ccd9cdfd631e4d22a4a">wasm_functype_params</a>(<span class="keyword">const</span> wasm_functype_t* ft) {</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>  <span class="keywordflow">return</span> hide_valtype_vec(ft-&gt;params());</div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>}</div>
</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span> </div>
<div class="foldopen" id="foldopen02787" data-start="{" data-end="}">
<div class="line"><a id="l02787" name="l02787"></a><span class="lineno"><a class="line" href="c-api_8cc.html#af5a640d33201ac2756a8d934a42d6454"> 2787</a></span><span class="keyword">const</span> wasm_valtype_vec_t* <a class="code hl_function" href="c-api_8cc.html#af5a640d33201ac2756a8d934a42d6454">wasm_functype_results</a>(<span class="keyword">const</span> wasm_functype_t* ft) {</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>  <span class="keywordflow">return</span> hide_valtype_vec(ft-&gt;results());</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>}</div>
</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span> </div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span><span class="comment">// Global Types</span></div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span> </div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(globaltype, wasm::GlobalType)</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span> </div>
<div class="foldopen" id="foldopen02795" data-start="{" data-end="}">
<div class="line"><a id="l02795" name="l02795"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ac04e1565fa85f13dc5ae082f4e9d0c6c"> 2795</a></span>wasm_globaltype_t* <a class="code hl_function" href="c-api_8cc.html#ac04e1565fa85f13dc5ae082f4e9d0c6c">wasm_globaltype_new</a>(wasm_valtype_t* content,</div>
<div class="line"><a id="l02796" name="l02796"></a><span class="lineno"> 2796</span>                                       wasm_mutability_t mutability) {</div>
<div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>  <span class="keywordflow">return</span> release_globaltype(wasm::GlobalType::make(</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>      adopt_valtype(content), <a class="code hl_function" href="c-api_8cc.html#a4b34b183aeeaa0c7ecca62520211b1ed">reveal_mutability</a>(mutability)));</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>}</div>
</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span> </div>
<div class="foldopen" id="foldopen02801" data-start="{" data-end="}">
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a36f764aada6e010444131f9b8186c993"> 2801</a></span><span class="keyword">const</span> wasm_valtype_t* <a class="code hl_function" href="c-api_8cc.html#a36f764aada6e010444131f9b8186c993">wasm_globaltype_content</a>(<span class="keyword">const</span> wasm_globaltype_t* gt) {</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>  <span class="keywordflow">return</span> hide_valtype(gt-&gt;content());</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>}</div>
</div>
<div class="line"><a id="l02804" name="l02804"></a><span class="lineno"> 2804</span> </div>
<div class="foldopen" id="foldopen02805" data-start="{" data-end="}">
<div class="line"><a id="l02805" name="l02805"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a4514eb32a98f6667fd72bd9dd83891a9"> 2805</a></span>wasm_mutability_t <a class="code hl_function" href="c-api_8cc.html#a4514eb32a98f6667fd72bd9dd83891a9">wasm_globaltype_mutability</a>(<span class="keyword">const</span> wasm_globaltype_t* gt) {</div>
<div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="c-api_8cc.html#aec744ea9ac3c538bdbdcf76f23a56653">hide_mutability</a>(gt-&gt;mutability());</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>}</div>
</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span> </div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span><span class="comment">// Table Types</span></div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span> </div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(tabletype, wasm::TableType)</div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span> </div>
<div class="foldopen" id="foldopen02813" data-start="{" data-end="}">
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ad49689a4bf2209df074c62eab10647c7"> 2813</a></span>wasm_tabletype_t* <a class="code hl_function" href="c-api_8cc.html#ad49689a4bf2209df074c62eab10647c7">wasm_tabletype_new</a>(wasm_valtype_t* element,</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>                                     const wasm_limits_t* limits) {</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>  <span class="keywordflow">return</span> release_tabletype(</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>      wasm::TableType::make(adopt_valtype(element), <a class="code hl_function" href="c-api_8cc.html#a47ffa7ea68c385bcbeaf03b62a181c50">reveal_limits</a>(*limits)));</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>}</div>
</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span> </div>
<div class="foldopen" id="foldopen02819" data-start="{" data-end="}">
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"><a class="line" href="c-api_8cc.html#abca246cf75f7feec9dcabfc341d1f3ad"> 2819</a></span><span class="keyword">const</span> wasm_valtype_t* <a class="code hl_function" href="c-api_8cc.html#abca246cf75f7feec9dcabfc341d1f3ad">wasm_tabletype_element</a>(<span class="keyword">const</span> wasm_tabletype_t* tt) {</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>  <span class="keywordflow">return</span> hide_valtype(tt-&gt;element());</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>}</div>
</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span> </div>
<div class="foldopen" id="foldopen02823" data-start="{" data-end="}">
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"><a class="line" href="c-api_8cc.html#adb168c641275034d540c585e2d714a88"> 2823</a></span><span class="keyword">const</span> wasm_limits_t* <a class="code hl_function" href="c-api_8cc.html#adb168c641275034d540c585e2d714a88">wasm_tabletype_limits</a>(<span class="keyword">const</span> wasm_tabletype_t* tt) {</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="c-api_8cc.html#ade982c0b7a9217b00ca8d0a032f66619">hide_limits</a>(tt-&gt;limits());</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>}</div>
</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span> </div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span><span class="comment">// Memory Types</span></div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span> </div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(memorytype, wasm::MemoryType)</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span> </div>
<div class="foldopen" id="foldopen02831" data-start="{" data-end="}">
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"><a class="line" href="c-api_8cc.html#abf85f8537d03797e69ee704548db8237"> 2831</a></span>wasm_memorytype_t* <a class="code hl_function" href="c-api_8cc.html#abf85f8537d03797e69ee704548db8237">wasm_memorytype_new</a>(const wasm_limits_t* limits) {</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>  <span class="keywordflow">return</span> release_memorytype(wasm::MemoryType::make(<a class="code hl_function" href="c-api_8cc.html#a47ffa7ea68c385bcbeaf03b62a181c50">reveal_limits</a>(*limits)));</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>}</div>
</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span> </div>
<div class="foldopen" id="foldopen02835" data-start="{" data-end="}">
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a0095569a931c19b223dd10e7f568fb41"> 2835</a></span><span class="keyword">const</span> wasm_limits_t* <a class="code hl_function" href="c-api_8cc.html#a0095569a931c19b223dd10e7f568fb41">wasm_memorytype_limits</a>(<span class="keyword">const</span> wasm_memorytype_t* <a class="code hl_variable" href="code-stub-assembler_8cc.html#a74a5ef43b6619793ef8d0fe626bd816a">mt</a>) {</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="c-api_8cc.html#ade982c0b7a9217b00ca8d0a032f66619">hide_limits</a>(<a class="code hl_variable" href="code-stub-assembler_8cc.html#a74a5ef43b6619793ef8d0fe626bd816a">mt</a>-&gt;limits());</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>}</div>
</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span> </div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span><span class="comment">// Extern Types</span></div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span> </div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(externtype, wasm::ExternType)</div>
<div class="line"><a id="l02842" name="l02842"></a><span class="lineno"> 2842</span> </div>
<div class="foldopen" id="foldopen02843" data-start="{" data-end="}">
<div class="line"><a id="l02843" name="l02843"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a17583c47b46167800fe59ddf5dd27c87"> 2843</a></span>wasm_externkind_t <a class="code hl_function" href="c-api_8cc.html#a17583c47b46167800fe59ddf5dd27c87">wasm_externtype_kind</a>(const wasm_externtype_t* et) {</div>
<div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="c-api_8cc.html#adc5fc5dcdf2245f204fdeb8d45ce506c">hide_externkind</a>(et-&gt;kind());</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>}</div>
</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span> </div>
<div class="foldopen" id="foldopen02847" data-start="{" data-end="}">
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a44ba0718555559086e7e3e8b1f7f8b85"> 2847</a></span>wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a44ba0718555559086e7e3e8b1f7f8b85">wasm_functype_as_externtype</a>(wasm_functype_t* ft) {</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span>wasm::ExternType*<span class="keyword">&gt;</span>(ft));</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>}</div>
</div>
<div class="foldopen" id="foldopen02850" data-start="{" data-end="}">
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a81a7c77e254bfe4b3a448c0d210ccaad"> 2850</a></span>wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a81a7c77e254bfe4b3a448c0d210ccaad">wasm_globaltype_as_externtype</a>(wasm_globaltype_t* gt) {</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span>wasm::ExternType*<span class="keyword">&gt;</span>(gt));</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>}</div>
</div>
<div class="foldopen" id="foldopen02853" data-start="{" data-end="}">
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a5665b704dd9d78bcf21463e294ef8bf5"> 2853</a></span>wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a5665b704dd9d78bcf21463e294ef8bf5">wasm_tabletype_as_externtype</a>(wasm_tabletype_t* tt) {</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span>wasm::ExternType*<span class="keyword">&gt;</span>(tt));</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>}</div>
</div>
<div class="foldopen" id="foldopen02856" data-start="{" data-end="}">
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"><a class="line" href="c-api_8cc.html#af8648884e53216dbfbdc800097b3f870"> 2856</a></span>wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#af8648884e53216dbfbdc800097b3f870">wasm_memorytype_as_externtype</a>(wasm_memorytype_t* <a class="code hl_variable" href="code-stub-assembler_8cc.html#a74a5ef43b6619793ef8d0fe626bd816a">mt</a>) {</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span>wasm::ExternType*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="code-stub-assembler_8cc.html#a74a5ef43b6619793ef8d0fe626bd816a">mt</a>));</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>}</div>
</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span> </div>
<div class="foldopen" id="foldopen02860" data-start="{" data-end="}">
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a172899852cece3318aeb9d268c75a3d5"> 2860</a></span><span class="keyword">const</span> wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a172899852cece3318aeb9d268c75a3d5">wasm_functype_as_externtype_const</a>(</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>    <span class="keyword">const</span> wasm_functype_t* ft) {</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::ExternType*<span class="keyword">&gt;</span>(ft));</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>}</div>
</div>
<div class="foldopen" id="foldopen02864" data-start="{" data-end="}">
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a4ba7c7b6baf96e59f73acc3f4841b8b4"> 2864</a></span><span class="keyword">const</span> wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a4ba7c7b6baf96e59f73acc3f4841b8b4">wasm_globaltype_as_externtype_const</a>(</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>    <span class="keyword">const</span> wasm_globaltype_t* gt) {</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::ExternType*<span class="keyword">&gt;</span>(gt));</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>}</div>
</div>
<div class="foldopen" id="foldopen02868" data-start="{" data-end="}">
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a0d6ee1d77594083b3d7c36aef2e47f57"> 2868</a></span><span class="keyword">const</span> wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a0d6ee1d77594083b3d7c36aef2e47f57">wasm_tabletype_as_externtype_const</a>(</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>    <span class="keyword">const</span> wasm_tabletype_t* tt) {</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::ExternType*<span class="keyword">&gt;</span>(tt));</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>}</div>
</div>
<div class="foldopen" id="foldopen02872" data-start="{" data-end="}">
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a2658605611dcedb3783c1bfc3ad19425"> 2872</a></span><span class="keyword">const</span> wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a2658605611dcedb3783c1bfc3ad19425">wasm_memorytype_as_externtype_const</a>(</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>    <span class="keyword">const</span> wasm_memorytype_t* <a class="code hl_variable" href="code-stub-assembler_8cc.html#a74a5ef43b6619793ef8d0fe626bd816a">mt</a>) {</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>  <span class="keywordflow">return</span> hide_externtype(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::ExternType*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="code-stub-assembler_8cc.html#a74a5ef43b6619793ef8d0fe626bd816a">mt</a>));</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>}</div>
</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span> </div>
<div class="foldopen" id="foldopen02877" data-start="{" data-end="}">
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a767afd952d63720fe30ce02b075ffd0f"> 2877</a></span>wasm_functype_t* <a class="code hl_function" href="c-api_8cc.html#a767afd952d63720fe30ce02b075ffd0f">wasm_externtype_as_functype</a>(wasm_externtype_t* et) {</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::FUNC</div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>             ? hide_functype(</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>                   <span class="keyword">static_cast&lt;</span>wasm::FuncType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>}</div>
</div>
<div class="foldopen" id="foldopen02883" data-start="{" data-end="}">
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a943fb2df1d6e013352d3026073f0a3c7"> 2883</a></span>wasm_globaltype_t* <a class="code hl_function" href="c-api_8cc.html#a943fb2df1d6e013352d3026073f0a3c7">wasm_externtype_as_globaltype</a>(wasm_externtype_t* et) {</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::GLOBAL</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>             ? hide_globaltype(</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>                   <span class="keyword">static_cast&lt;</span>wasm::GlobalType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>}</div>
</div>
<div class="foldopen" id="foldopen02889" data-start="{" data-end="}">
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a3874c6749d8a8b691fb500573ab73861"> 2889</a></span>wasm_tabletype_t* <a class="code hl_function" href="c-api_8cc.html#a3874c6749d8a8b691fb500573ab73861">wasm_externtype_as_tabletype</a>(wasm_externtype_t* et) {</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::TABLE</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>             ? hide_tabletype(</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>                   <span class="keyword">static_cast&lt;</span>wasm::TableType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>}</div>
</div>
<div class="foldopen" id="foldopen02895" data-start="{" data-end="}">
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"><a class="line" href="c-api_8cc.html#aa34e708f8370e17fd98c4a0aef282bb3"> 2895</a></span>wasm_memorytype_t* <a class="code hl_function" href="c-api_8cc.html#aa34e708f8370e17fd98c4a0aef282bb3">wasm_externtype_as_memorytype</a>(wasm_externtype_t* et) {</div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::MEMORY</div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>             ? hide_memorytype(</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>                   <span class="keyword">static_cast&lt;</span>wasm::MemoryType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>}</div>
</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span> </div>
<div class="foldopen" id="foldopen02902" data-start="{" data-end="}">
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a31e4a81a3bdbd766c4e9d5bafe0aafa6"> 2902</a></span><span class="keyword">const</span> wasm_functype_t* <a class="code hl_function" href="c-api_8cc.html#a31e4a81a3bdbd766c4e9d5bafe0aafa6">wasm_externtype_as_functype_const</a>(</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>    <span class="keyword">const</span> wasm_externtype_t* et) {</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::FUNC</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>             ? hide_functype(</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>                   <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::FuncType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>}</div>
</div>
<div class="foldopen" id="foldopen02909" data-start="{" data-end="}">
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"><a class="line" href="c-api_8cc.html#abc8096f5abfbbbc66f96bf31066dab6c"> 2909</a></span><span class="keyword">const</span> wasm_globaltype_t* <a class="code hl_function" href="c-api_8cc.html#abc8096f5abfbbbc66f96bf31066dab6c">wasm_externtype_as_globaltype_const</a>(</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>    <span class="keyword">const</span> wasm_externtype_t* et) {</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::GLOBAL</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>             ? hide_globaltype(</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>                   <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::GlobalType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>}</div>
</div>
<div class="foldopen" id="foldopen02916" data-start="{" data-end="}">
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a0921fb93e7bcada5e9fdd316c70ebcfd"> 2916</a></span><span class="keyword">const</span> wasm_tabletype_t* <a class="code hl_function" href="c-api_8cc.html#a0921fb93e7bcada5e9fdd316c70ebcfd">wasm_externtype_as_tabletype_const</a>(</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>    <span class="keyword">const</span> wasm_externtype_t* et) {</div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::TABLE</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>             ? hide_tabletype(</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>                   <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::TableType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>}</div>
</div>
<div class="foldopen" id="foldopen02923" data-start="{" data-end="}">
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ad29b1c53c6535050cf59a8cae8fddb2a"> 2923</a></span><span class="keyword">const</span> wasm_memorytype_t* <a class="code hl_function" href="c-api_8cc.html#ad29b1c53c6535050cf59a8cae8fddb2a">wasm_externtype_as_memorytype_const</a>(</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>    <span class="keyword">const</span> wasm_externtype_t* et) {</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>  <span class="keywordflow">return</span> et-&gt;kind() == wasm::ExternKind::MEMORY</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>             ? hide_memorytype(</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>                   <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::MemoryType*<span class="keyword">&gt;</span>(reveal_externtype(et)))</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>             : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>}</div>
</div>
<div class="line"><a id="l02930" name="l02930"></a><span class="lineno"> 2930</span> </div>
<div class="line"><a id="l02931" name="l02931"></a><span class="lineno"> 2931</span><span class="comment">// Import Types</span></div>
<div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span> </div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(importtype, wasm::ImportType)</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span> </div>
<div class="foldopen" id="foldopen02935" data-start="{" data-end="}">
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"><a class="line" href="c-api_8cc.html#acba2a1056e406ae0ef9289ad1bb51ffe"> 2935</a></span>wasm_importtype_t* <a class="code hl_function" href="c-api_8cc.html#acba2a1056e406ae0ef9289ad1bb51ffe">wasm_importtype_new</a>(wasm_name_t* module, wasm_name_t* name,</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>                                       wasm_externtype_t* type) {</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>  <span class="keywordflow">return</span> release_importtype(wasm::ImportType::make(</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span>      adopt_byte_vec(module), adopt_byte_vec(name), adopt_externtype(type)));</div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>}</div>
</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span> </div>
<div class="foldopen" id="foldopen02941" data-start="{" data-end="}">
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a3a2586c5cb100b41709e880d1f10a8b8"> 2941</a></span><span class="keyword">const</span> wasm_name_t* <a class="code hl_function" href="c-api_8cc.html#a3a2586c5cb100b41709e880d1f10a8b8">wasm_importtype_module</a>(<span class="keyword">const</span> wasm_importtype_t* it) {</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>  <span class="keywordflow">return</span> hide_byte_vec(it-&gt;module());</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>}</div>
</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span> </div>
<div class="foldopen" id="foldopen02945" data-start="{" data-end="}">
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a92d4c802b88736a79a084405eeae02b8"> 2945</a></span><span class="keyword">const</span> wasm_name_t* <a class="code hl_function" href="c-api_8cc.html#a92d4c802b88736a79a084405eeae02b8">wasm_importtype_name</a>(<span class="keyword">const</span> wasm_importtype_t* it) {</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>  <span class="keywordflow">return</span> hide_byte_vec(it-&gt;name());</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>}</div>
</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span> </div>
<div class="foldopen" id="foldopen02949" data-start="{" data-end="}">
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a33aba3be11b80eb082f4b9a21ac1d3b7"> 2949</a></span><span class="keyword">const</span> wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#a33aba3be11b80eb082f4b9a21ac1d3b7">wasm_importtype_type</a>(<span class="keyword">const</span> wasm_importtype_t* it) {</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span>  <span class="keywordflow">return</span> hide_externtype(it-&gt;type());</div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>}</div>
</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span> </div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span><span class="comment">// Export Types</span></div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span> </div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span><a class="code hl_define" href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a>(exporttype, wasm::ExportType)</div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span> </div>
<div class="foldopen" id="foldopen02957" data-start="{" data-end="}">
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a939104250ac0b71453e289e949bfae99"> 2957</a></span>wasm_exporttype_t* <a class="code hl_function" href="c-api_8cc.html#a939104250ac0b71453e289e949bfae99">wasm_exporttype_new</a>(wasm_name_t* name,</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>                                       wasm_externtype_t* type) {</div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>  <span class="keywordflow">return</span> release_exporttype(</div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>      wasm::ExportType::make(adopt_byte_vec(name), adopt_externtype(type)));</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>}</div>
</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span> </div>
<div class="foldopen" id="foldopen02963" data-start="{" data-end="}">
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ae1a599d49b3c2766fb5420776357b503"> 2963</a></span><span class="keyword">const</span> wasm_name_t* <a class="code hl_function" href="c-api_8cc.html#ae1a599d49b3c2766fb5420776357b503">wasm_exporttype_name</a>(<span class="keyword">const</span> wasm_exporttype_t* et) {</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>  <span class="keywordflow">return</span> hide_byte_vec(et-&gt;name());</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>}</div>
</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span> </div>
<div class="foldopen" id="foldopen02967" data-start="{" data-end="}">
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ab5a09dedbe905ff35a562323f9b40ab9"> 2967</a></span><span class="keyword">const</span> wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#ab5a09dedbe905ff35a562323f9b40ab9">wasm_exporttype_type</a>(<span class="keyword">const</span> wasm_exporttype_t* et) {</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>  <span class="keywordflow">return</span> hide_externtype(et-&gt;type());</div>
<div class="line"><a id="l02969" name="l02969"></a><span class="lineno"> 2969</span>}</div>
</div>
<div class="line"><a id="l02970" name="l02970"></a><span class="lineno"> 2970</span> </div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span><span class="comment">// Runtime Values</span></div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span> </div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span><span class="comment">// References</span></div>
<div class="line"><a id="l02975" name="l02975"></a><span class="lineno"> 2975</span> </div>
<div class="foldopen" id="foldopen02976" data-start="" data-end="">
<div class="line"><a id="l02976" name="l02976"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a6b944e4b4185070464bb9c4aaa0fc9fd"> 2976</a></span><span class="preprocessor">#define WASM_DEFINE_REF_BASE(name, Name)                             \</span></div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span><span class="preprocessor">  WASM_DEFINE_OWN(name, Name)                                        \</span></div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span><span class="preprocessor">                                                                     \</span></div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span><span class="preprocessor">  wasm_##name##_t* wasm_##name##_copy(const wasm_##name##_t* t) {    \</span></div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span><span class="preprocessor">    return release_##name(t-&gt;copy());                                \</span></div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span><span class="preprocessor">  }                                                                  \</span></div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span><span class="preprocessor">                                                                     \</span></div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span><span class="preprocessor">  bool wasm_##name##_same(const wasm_##name##_t* t1,                 \</span></div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span><span class="preprocessor">                          const wasm_##name##_t* t2) {               \</span></div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span><span class="preprocessor">    return t1-&gt;same(t2);                                             \</span></div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span><span class="preprocessor">  }                                                                  \</span></div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span><span class="preprocessor">                                                                     \</span></div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span><span class="preprocessor">  void* wasm_##name##_get_host_info(const wasm_##name##_t* r) {      \</span></div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span><span class="preprocessor">    return r-&gt;get_host_info();                                       \</span></div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span><span class="preprocessor">  }                                                                  \</span></div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span><span class="preprocessor">  void wasm_##name##_set_host_info(wasm_##name##_t* r, void* info) { \</span></div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span><span class="preprocessor">    r-&gt;set_host_info(info);                                          \</span></div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span><span class="preprocessor">  }                                                                  \</span></div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span><span class="preprocessor">  void wasm_##name##_set_host_info_with_finalizer(                   \</span></div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span><span class="preprocessor">      wasm_##name##_t* r, void* info, void (*finalizer)(void*)) {    \</span></div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span><span class="preprocessor">    r-&gt;set_host_info(info, finalizer);                               \</span></div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span><span class="preprocessor">  }</span></div>
</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span> </div>
<div class="foldopen" id="foldopen02999" data-start="" data-end="">
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9"> 2999</a></span><span class="preprocessor">#define WASM_DEFINE_REF(name, Name)                                        \</span></div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span><span class="preprocessor">  WASM_DEFINE_REF_BASE(name, Name)                                         \</span></div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span><span class="preprocessor">                                                                           \</span></div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span><span class="preprocessor">  wasm_ref_t* wasm_##name##_as_ref(wasm_##name##_t* r) {                   \</span></div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span><span class="preprocessor">    return hide_ref(static_cast&lt;wasm::Ref*&gt;(reveal_##name(r)));            \</span></div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span><span class="preprocessor">  }                                                                        \</span></div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span><span class="preprocessor">  wasm_##name##_t* wasm_ref_as_##name(wasm_ref_t* r) {                     \</span></div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span><span class="preprocessor">    return hide_##name(static_cast&lt;Name*&gt;(reveal_ref(r)));                 \</span></div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span><span class="preprocessor">  }                                                                        \</span></div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span><span class="preprocessor">                                                                           \</span></div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span><span class="preprocessor">  const wasm_ref_t* wasm_##name##_as_ref_const(const wasm_##name##_t* r) { \</span></div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span><span class="preprocessor">    return hide_ref(static_cast&lt;const wasm::Ref*&gt;(reveal_##name(r)));      \</span></div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span><span class="preprocessor">  }                                                                        \</span></div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span><span class="preprocessor">  const wasm_##name##_t* wasm_ref_as_##name##_const(const wasm_ref_t* r) { \</span></div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span><span class="preprocessor">    return hide_##name(static_cast&lt;const Name*&gt;(reveal_ref(r)));           \</span></div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span><span class="preprocessor">  }</span></div>
</div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span> </div>
<div class="foldopen" id="foldopen03016" data-start="" data-end="">
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a688d650744191f2f8898a46517a1fe8a"> 3016</a></span><span class="preprocessor">#define WASM_DEFINE_SHARABLE_REF(name, Name) \</span></div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span><span class="preprocessor">  WASM_DEFINE_REF(name, Name)                \</span></div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span><span class="preprocessor">  WASM_DEFINE_OWN(shared_##name, wasm::Shared&lt;Name&gt;)</span></div>
</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span> </div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span><a class="code hl_define" href="c-api_8cc.html#a6b944e4b4185070464bb9c4aaa0fc9fd">WASM_DEFINE_REF_BASE</a>(ref, wasm::Ref)</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span> </div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span><span class="comment">// Values</span></div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span> </div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> {</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span> </div>
<div class="foldopen" id="foldopen03026" data-start="{" data-end="}">
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a3ad9c88c4fd2e5273cf3ebf453162011"> 3026</a></span><span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_variable" href="cppgc_2sweeper_8cc.html#aaa27c43c14d3f7d475899d57651dfe09">is_empty</a>(wasm_val_t v) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>  <span class="keywordflow">return</span> !is_ref(<a class="code hl_function" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a>(v.kind)) || !v.of.ref;</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>}</div>
</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span> </div>
<div class="foldopen" id="foldopen03030" data-start="{" data-end="}">
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a199f5508a4aa12a8be2258b5cf3ff55a"> 3030</a></span><span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a199f5508a4aa12a8be2258b5cf3ff55a">hide_val</a>(wasm::Val v) -&gt; wasm_val_t {</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>  wasm_val_t v2 = {<a class="code hl_function" href="c-api_8cc.html#a1a5c15f204f306f8ce492ae8cfa5d168">hide_valkind</a>(v.kind()), {}};</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>  <span class="keywordflow">switch</span> (v.kind()) {</div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>    <span class="keywordflow">case</span> wasm::ValKind::I32:</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span>      v2.of.i32 = v.i32();</div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>    <span class="keywordflow">case</span> wasm::ValKind::I64:</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>      v2.of.i64 = v.i64();</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>    <span class="keywordflow">case</span> wasm::ValKind::F32:</div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span>      v2.of.f32 = v.f32();</div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>    <span class="keywordflow">case</span> wasm::ValKind::F64:</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>      v2.of.f64 = v.f64();</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03045" name="l03045"></a><span class="lineno"> 3045</span>    <span class="keywordflow">case</span> wasm::ValKind::EXTERNREF:</div>
<div class="line"><a id="l03046" name="l03046"></a><span class="lineno"> 3046</span>    <span class="keywordflow">case</span> wasm::ValKind::FUNCREF:</div>
<div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>      v2.of.ref = hide_ref(v.ref());</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>  }</div>
<div class="line"><a id="l03052" name="l03052"></a><span class="lineno"> 3052</span>  <span class="keywordflow">return</span> v2;</div>
<div class="line"><a id="l03053" name="l03053"></a><span class="lineno"> 3053</span>}</div>
</div>
<div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span> </div>
<div class="foldopen" id="foldopen03055" data-start="{" data-end="}">
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ad0e282438565266f0df1197e03f258ac"> 3055</a></span><span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#ad0e282438565266f0df1197e03f258ac">release_val</a>(wasm::Val v) -&gt; wasm_val_t {</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>  wasm_val_t v2 = {<a class="code hl_function" href="c-api_8cc.html#a1a5c15f204f306f8ce492ae8cfa5d168">hide_valkind</a>(v.kind()), {}};</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>  <span class="keywordflow">switch</span> (v.kind()) {</div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>    <span class="keywordflow">case</span> wasm::ValKind::I32:</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>      v2.of.i32 = v.i32();</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>    <span class="keywordflow">case</span> wasm::ValKind::I64:</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>      v2.of.i64 = v.i64();</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>    <span class="keywordflow">case</span> wasm::ValKind::F32:</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>      v2.of.f32 = v.f32();</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>    <span class="keywordflow">case</span> wasm::ValKind::F64:</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>      v2.of.f64 = v.f64();</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03070" name="l03070"></a><span class="lineno"> 3070</span>    <span class="keywordflow">case</span> wasm::ValKind::EXTERNREF:</div>
<div class="line"><a id="l03071" name="l03071"></a><span class="lineno"> 3071</span>    <span class="keywordflow">case</span> wasm::ValKind::FUNCREF:</div>
<div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>      v2.of.ref = release_ref(v.release_ref());</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>  }</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>  <span class="keywordflow">return</span> v2;</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>}</div>
</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span> </div>
<div class="foldopen" id="foldopen03080" data-start="{" data-end="}">
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a4a2370c194ea0e018d8493337fcb7ee9"> 3080</a></span><span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a4a2370c194ea0e018d8493337fcb7ee9">adopt_val</a>(wasm_val_t v) -&gt; wasm::Val {</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>  <span class="keywordflow">switch</span> (<a class="code hl_function" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a>(v.kind)) {</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>    <span class="keywordflow">case</span> wasm::ValKind::I32:</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>      <span class="keywordflow">return</span> wasm::Val(v.of.i32);</div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>    <span class="keywordflow">case</span> wasm::ValKind::I64:</div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>      <span class="keywordflow">return</span> wasm::Val(v.of.i64);</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>    <span class="keywordflow">case</span> wasm::ValKind::F32:</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>      <span class="keywordflow">return</span> wasm::Val(v.of.f32);</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>    <span class="keywordflow">case</span> wasm::ValKind::F64:</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>      <span class="keywordflow">return</span> wasm::Val(v.of.f64);</div>
<div class="line"><a id="l03090" name="l03090"></a><span class="lineno"> 3090</span>    <span class="keywordflow">case</span> wasm::ValKind::EXTERNREF:</div>
<div class="line"><a id="l03091" name="l03091"></a><span class="lineno"> 3091</span>    <span class="keywordflow">case</span> wasm::ValKind::FUNCREF:</div>
<div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>      <span class="keywordflow">return</span> wasm::Val(adopt_ref(v.of.ref));</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>  }</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>}</div>
</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span> </div>
<div class="foldopen" id="foldopen03098" data-start="{" data-end="};">
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"><a class="line" href="structborrowed__val.html"> 3098</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structborrowed__val.html">borrowed_val</a> {</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"><a class="line" href="structborrowed__val.html#aebcb575f3a9129a1104f8ef9949fdfb8"> 3099</a></span>  wasm::Val <a class="code hl_variable" href="structborrowed__val.html#aebcb575f3a9129a1104f8ef9949fdfb8">it</a>;</div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"><a class="line" href="structborrowed__val.html#af98f5dcdd5419302ad68b98c55392481"> 3100</a></span>  <span class="keyword">explicit</span> <a class="code hl_function" href="structborrowed__val.html#af98f5dcdd5419302ad68b98c55392481">borrowed_val</a>(wasm::Val&amp;&amp; v) : it(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(v)) {}</div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"><a class="line" href="structborrowed__val.html#a8b99920820ef9488c8f042f1f793448b"> 3101</a></span>  <a class="code hl_function" href="structborrowed__val.html#a8b99920820ef9488c8f042f1f793448b">borrowed_val</a>(<a class="code hl_struct" href="structborrowed__val.html">borrowed_val</a>&amp;&amp; that) : it(<a class="code hl_namespace" href="namespacestd.html">std</a>::move(that.it)) {}</div>
<div class="foldopen" id="foldopen03102" data-start="{" data-end="}">
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"><a class="line" href="structborrowed__val.html#a757a8d164cf2f20bd98f592135ce8a75"> 3102</a></span>  <a class="code hl_function" href="structborrowed__val.html#a757a8d164cf2f20bd98f592135ce8a75">~borrowed_val</a>() {</div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>    <span class="keywordflow">if</span> (it.is_ref()) it.release_ref().release();</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>  }</div>
</div>
<div class="line"><a id="l03105" name="l03105"></a><span class="lineno"> 3105</span>};</div>
</div>
<div class="line"><a id="l03106" name="l03106"></a><span class="lineno"> 3106</span> </div>
<div class="foldopen" id="foldopen03107" data-start="{" data-end="}">
<div class="line"><a id="l03107" name="l03107"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a200ea443d56d397ff1a61c49cb0ba869"> 3107</a></span><span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#a200ea443d56d397ff1a61c49cb0ba869">borrow_val</a>(<span class="keyword">const</span> wasm_val_t* v) -&gt; <a class="code hl_struct" href="structborrowed__val.html">borrowed_val</a> {</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>  wasm::Val v2;</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>  <span class="keywordflow">switch</span> (<a class="code hl_function" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a>(v-&gt;kind)) {</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>    <span class="keywordflow">case</span> wasm::ValKind::I32:</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>      v2 = wasm::Val(v-&gt;of.i32);</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>    <span class="keywordflow">case</span> wasm::ValKind::I64:</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>      v2 = wasm::Val(v-&gt;of.i64);</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>    <span class="keywordflow">case</span> wasm::ValKind::F32:</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>      v2 = wasm::Val(v-&gt;of.f32);</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>    <span class="keywordflow">case</span> wasm::ValKind::F64:</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>      v2 = wasm::Val(v-&gt;of.f64);</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>    <span class="keywordflow">case</span> wasm::ValKind::EXTERNREF:</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>    <span class="keywordflow">case</span> wasm::ValKind::FUNCREF:</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>      v2 = wasm::Val(adopt_ref(v-&gt;of.ref));</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>      <a class="code hl_define" href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();</div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>  }</div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>  <span class="keywordflow">return</span> <a class="code hl_struct" href="structborrowed__val.html">borrowed_val</a>(std::move(v2));</div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>}</div>
</div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span> </div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>}  <span class="comment">// extern &quot;C++&quot;</span></div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span> </div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span><a class="code hl_define" href="c-api_8cc.html#a38f94e392184623edd41eb7b96a91417">WASM_DEFINE_VEC_BASE</a>(val, wasm::Val, wasm::vec, )</div>
<div class="line"><a id="l03135" name="l03135"></a><span class="lineno"> 3135</span> </div>
<div class="foldopen" id="foldopen03136" data-start="{" data-end="}">
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a3cc49972031e18f2a44c49cf3dea39e9"> 3136</a></span>void <a class="code hl_function" href="c-api_8cc.html#a3cc49972031e18f2a44c49cf3dea39e9">wasm_val_vec_new</a>(wasm_val_vec_t* out, <span class="keywordtype">size_t</span> size,</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>                      wasm_val_t const data[]) {</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>  <span class="keyword">auto</span> v2 = wasm::vec&lt;wasm::Val&gt;::make_uninitialized(size);</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; v2.<a class="code hl_class" href="classsize.html">size</a>(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>    v2[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <a class="code hl_function" href="c-api_8cc.html#a4a2370c194ea0e018d8493337fcb7ee9">adopt_val</a>(data[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]);</div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>  }</div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>  *out = release_val_vec(std::move(v2));</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>}</div>
</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span> </div>
<div class="foldopen" id="foldopen03145" data-start="{" data-end="}">
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a658bc3525db7e8e62c179549bbedffad"> 3145</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#a658bc3525db7e8e62c179549bbedffad">wasm_val_vec_copy</a>(wasm_val_vec_t* out, <span class="keyword">const</span> wasm_val_vec_t* v) {</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>  <span class="keyword">auto</span> v2 = wasm::vec&lt;wasm::Val&gt;::make_uninitialized(v-&gt;size);</div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; v2.<a class="code hl_class" href="classsize.html">size</a>(); ++<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>) {</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>    wasm_val_t val;</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span>    <a class="code hl_function" href="c-api_8cc.html#a73e2d8669836c58843f288d6e2d492da">wasm_val_copy</a>(&amp;v-&gt;data[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>], &amp;val);</div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>    v2[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = <a class="code hl_function" href="c-api_8cc.html#a4a2370c194ea0e018d8493337fcb7ee9">adopt_val</a>(val);</div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>  }</div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>  *out = release_val_vec(std::move(v2));</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>}</div>
</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span> </div>
<div class="foldopen" id="foldopen03155" data-start="{" data-end="}">
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ac8be4f9b28bfd3762c27c8a345eea71b"> 3155</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#ac8be4f9b28bfd3762c27c8a345eea71b">wasm_val_delete</a>(wasm_val_t* v) {</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>  <span class="keywordflow">if</span> (is_ref(<a class="code hl_function" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a>(v-&gt;kind))) {</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>    adopt_ref(v-&gt;of.ref);</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>  }</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>}</div>
</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span> </div>
<div class="foldopen" id="foldopen03161" data-start="{" data-end="}">
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a73e2d8669836c58843f288d6e2d492da"> 3161</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#a73e2d8669836c58843f288d6e2d492da">wasm_val_copy</a>(wasm_val_t* out, <span class="keyword">const</span> wasm_val_t* v) {</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>  *out = *v;</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>  <span class="keywordflow">if</span> (is_ref(<a class="code hl_function" href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a>(v-&gt;kind))) {</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>    out-&gt;of.ref = v-&gt;of.ref ? release_ref(v-&gt;of.ref-&gt;copy()) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>  }</div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>}</div>
</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span> </div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span><span class="comment">// Runtime Objects</span></div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span> </div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span><span class="comment">// Frames</span></div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span> </div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span><a class="code hl_define" href="c-api_8cc.html#ade5babc8f2c61877aae1e7ba3f6fb152">WASM_DEFINE_OWN</a>(frame, wasm::Frame)</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span><a class="code hl_define" href="c-api_8cc.html#a5f58be229336ab32eeec2acd3a894c26">WASM_DEFINE_VEC_OWN</a>(frame, wasm::Frame)</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span> </div>
<div class="foldopen" id="foldopen03176" data-start="{" data-end="}">
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"><a class="line" href="c-api_8cc.html#afccc93165ba1134660e8d5adf2c8bafa"> 3176</a></span>wasm_frame_t* <a class="code hl_function" href="c-api_8cc.html#afccc93165ba1134660e8d5adf2c8bafa">wasm_frame_copy</a>(const wasm_frame_t* frame) {</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>  <span class="keywordflow">return</span> release_frame(frame-&gt;copy());</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span>}</div>
</div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span> </div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>wasm_instance_t* <a class="code hl_function" href="c-api_8cc.html#ae3a80d791b78ec7236fc93d7901f9a15">wasm_frame_instance</a>(<span class="keyword">const</span> wasm_frame_t* frame);</div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span><span class="comment">// Defined below along with wasm_instance_t.</span></div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span> </div>
<div class="foldopen" id="foldopen03183" data-start="{" data-end="}">
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a021e36cad8b6791231abd5e43a9f18fc"> 3183</a></span>uint32_t <a class="code hl_function" href="c-api_8cc.html#a021e36cad8b6791231abd5e43a9f18fc">wasm_frame_func_index</a>(<span class="keyword">const</span> wasm_frame_t* frame) {</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span>  <span class="keywordflow">return</span> reveal_frame(frame)-&gt;func_index();</div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>}</div>
</div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span> </div>
<div class="foldopen" id="foldopen03187" data-start="{" data-end="}">
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ae9920ec9c1c6cf74c9cd67517eaecd51"> 3187</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="c-api_8cc.html#ae9920ec9c1c6cf74c9cd67517eaecd51">wasm_frame_func_offset</a>(<span class="keyword">const</span> wasm_frame_t* frame) {</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>  <span class="keywordflow">return</span> reveal_frame(frame)-&gt;func_offset();</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>}</div>
</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span> </div>
<div class="foldopen" id="foldopen03191" data-start="{" data-end="}">
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"><a class="line" href="c-api_8cc.html#afbcffd5875e2e765341d7107f0275b5c"> 3191</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="c-api_8cc.html#afbcffd5875e2e765341d7107f0275b5c">wasm_frame_module_offset</a>(<span class="keyword">const</span> wasm_frame_t* frame) {</div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>  <span class="keywordflow">return</span> reveal_frame(frame)-&gt;module_offset();</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>}</div>
</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span> </div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span><span class="comment">// Traps</span></div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span> </div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(trap, wasm::Trap)</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span> </div>
<div class="foldopen" id="foldopen03199" data-start="{" data-end="}">
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ad7182f1e0910c6f821082e72d5d8200c"> 3199</a></span>wasm_trap_t* <a class="code hl_function" href="c-api_8cc.html#ad7182f1e0910c6f821082e72d5d8200c">wasm_trap_new</a>(wasm_store_t* store, const wasm_message_t* message) {</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>  <span class="keyword">auto</span> message_ = borrow_byte_vec(message);</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>  <span class="keywordflow">return</span> release_trap(wasm::Trap::make(store, message_.it));</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span>}</div>
</div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span> </div>
<div class="foldopen" id="foldopen03204" data-start="{" data-end="}">
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a2789215bc73d86c91f2f7bfdd2087f9a"> 3204</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#a2789215bc73d86c91f2f7bfdd2087f9a">wasm_trap_message</a>(<span class="keyword">const</span> wasm_trap_t* trap, wasm_message_t* out) {</div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>  *out = release_byte_vec(reveal_trap(trap)-&gt;message());</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span>}</div>
</div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span> </div>
<div class="foldopen" id="foldopen03208" data-start="{" data-end="}">
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ae6cfcc5a077be11c23c87eb49374ed53"> 3208</a></span>wasm_frame_t* <a class="code hl_function" href="c-api_8cc.html#ae6cfcc5a077be11c23c87eb49374ed53">wasm_trap_origin</a>(<span class="keyword">const</span> wasm_trap_t* trap) {</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>  <span class="keywordflow">return</span> release_frame(reveal_trap(trap)-&gt;origin());</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>}</div>
</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span> </div>
<div class="foldopen" id="foldopen03212" data-start="{" data-end="}">
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"><a class="line" href="c-api_8cc.html#af852a706221a390100b31da9b54d1ea2"> 3212</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#af852a706221a390100b31da9b54d1ea2">wasm_trap_trace</a>(<span class="keyword">const</span> wasm_trap_t* trap, wasm_frame_vec_t* out) {</div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>  *out = release_frame_vec(reveal_trap(trap)-&gt;trace());</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>}</div>
</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span> </div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span><span class="comment">// Foreign Objects</span></div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span> </div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(foreign, wasm::Foreign)</div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span> </div>
<div class="foldopen" id="foldopen03220" data-start="{" data-end="}">
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ab0893cd64af83f565c0aa67da7aa4565"> 3220</a></span>wasm_foreign_t* <a class="code hl_function" href="c-api_8cc.html#ab0893cd64af83f565c0aa67da7aa4565">wasm_foreign_new</a>(wasm_store_t* store) {</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>  <span class="keywordflow">return</span> release_foreign(wasm::Foreign::make(store));</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>}</div>
</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span> </div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span><span class="comment">// Modules</span></div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span> </div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span><a class="code hl_define" href="c-api_8cc.html#a688d650744191f2f8898a46517a1fe8a">WASM_DEFINE_SHARABLE_REF</a>(module, wasm::Module)</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span> </div>
<div class="foldopen" id="foldopen03228" data-start="{" data-end="}">
<div class="line"><a id="l03228" name="l03228"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a1d764bfdb8c69ee6aff0dd46b70de1b4"> 3228</a></span>bool <a class="code hl_function" href="c-api_8cc.html#a1d764bfdb8c69ee6aff0dd46b70de1b4">wasm_module_validate</a>(wasm_store_t* store, const wasm_byte_vec_t* binary) {</div>
<div class="line"><a id="l03229" name="l03229"></a><span class="lineno"> 3229</span>  <span class="keyword">auto</span> binary_ = borrow_byte_vec(binary);</div>
<div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>  <span class="keywordflow">return</span> wasm::Module::validate(store, binary_.it);</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>}</div>
</div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span> </div>
<div class="foldopen" id="foldopen03233" data-start="{" data-end="}">
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"><a class="line" href="c-api_8cc.html#aae13dc42332a97000608066af22d63e1"> 3233</a></span>wasm_module_t* <a class="code hl_function" href="c-api_8cc.html#aae13dc42332a97000608066af22d63e1">wasm_module_new</a>(wasm_store_t* store,</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>                               <span class="keyword">const</span> wasm_byte_vec_t* binary) {</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>  <span class="keyword">auto</span> binary_ = borrow_byte_vec(binary);</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>  <span class="keywordflow">return</span> release_module(wasm::Module::make(store, binary_.it));</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>}</div>
</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span> </div>
<div class="foldopen" id="foldopen03239" data-start="{" data-end="}">
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a1f9565c1948f00f9f2cd415dbccb4a72"> 3239</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#a1f9565c1948f00f9f2cd415dbccb4a72">wasm_module_imports</a>(<span class="keyword">const</span> wasm_module_t* module,</div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>                         wasm_importtype_vec_t* out) {</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>  *out = release_importtype_vec(reveal_module(module)-&gt;imports());</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>}</div>
</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span> </div>
<div class="foldopen" id="foldopen03244" data-start="{" data-end="}">
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"><a class="line" href="c-api_8cc.html#aa842bff3c7cfc4d2c7a1880a0a76d0e2"> 3244</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#aa842bff3c7cfc4d2c7a1880a0a76d0e2">wasm_module_exports</a>(<span class="keyword">const</span> wasm_module_t* module,</div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span>                         wasm_exporttype_vec_t* out) {</div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span>  *out = release_exporttype_vec(reveal_module(module)-&gt;exports());</div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>}</div>
</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span> </div>
<div class="foldopen" id="foldopen03249" data-start="{" data-end="}">
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ac5d292a3675a7dcb0633e9544bbcf721"> 3249</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#ac5d292a3675a7dcb0633e9544bbcf721">wasm_module_serialize</a>(<span class="keyword">const</span> wasm_module_t* module, wasm_byte_vec_t* out) {</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>  *out = release_byte_vec(reveal_module(module)-&gt;serialize());</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>}</div>
</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span> </div>
<div class="foldopen" id="foldopen03253" data-start="{" data-end="}">
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"><a class="line" href="c-api_8cc.html#afd2700dd29447e2b36d804e32ca75c63"> 3253</a></span>wasm_module_t* <a class="code hl_function" href="c-api_8cc.html#afd2700dd29447e2b36d804e32ca75c63">wasm_module_deserialize</a>(wasm_store_t* store,</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>                                       <span class="keyword">const</span> wasm_byte_vec_t* binary) {</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>  <span class="keyword">auto</span> binary_ = borrow_byte_vec(binary);</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>  <span class="keywordflow">return</span> release_module(wasm::Module::deserialize(store, binary_.it));</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span>}</div>
</div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span> </div>
<div class="foldopen" id="foldopen03259" data-start="{" data-end="}">
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a84aa9320d74d517aa684d5c0afb498c3"> 3259</a></span>wasm_shared_module_t* <a class="code hl_function" href="c-api_8cc.html#a84aa9320d74d517aa684d5c0afb498c3">wasm_module_share</a>(<span class="keyword">const</span> wasm_module_t* module) {</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>  <span class="keywordflow">return</span> release_shared_module(reveal_module(module)-&gt;share());</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span>}</div>
</div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span> </div>
<div class="foldopen" id="foldopen03263" data-start="{" data-end="}">
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a358a0a2c82c987d939ec8c1fa084326c"> 3263</a></span>wasm_module_t* <a class="code hl_function" href="c-api_8cc.html#a358a0a2c82c987d939ec8c1fa084326c">wasm_module_obtain</a>(wasm_store_t* store,</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>                                  <span class="keyword">const</span> wasm_shared_module_t* shared) {</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>  <span class="keywordflow">return</span> release_module(wasm::Module::obtain(store, shared));</div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>}</div>
</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span> </div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span><span class="comment">// Function Instances</span></div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span> </div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(func, wasm::Func)</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span> </div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C++&quot;</span> {</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span> </div>
<div class="foldopen" id="foldopen03274" data-start="{" data-end="}">
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"><a class="line" href="c-api_8cc.html#aa3fc45d6ba67d1e451e5e5e72c23e9c2"> 3274</a></span><span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#aa3fc45d6ba67d1e451e5e5e72c23e9c2">wasm_callback</a>(<span class="keywordtype">void</span>* env, <span class="keyword">const</span> wasm::vec&lt;wasm::Val&gt;&amp; <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>,</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>                   wasm::vec&lt;wasm::Val&gt;&amp; results) -&gt; wasm::own&lt;wasm::Trap&gt; {</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>  <span class="keyword">auto</span> f = <span class="keyword">reinterpret_cast&lt;</span>wasm_func_callback_t<span class="keyword">&gt;</span>(env);</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>  <span class="keywordflow">return</span> adopt_trap(f(hide_val_vec(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>), hide_val_vec(results)));</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>}</div>
</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span> </div>
<div class="foldopen" id="foldopen03280" data-start="{" data-end="};">
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"><a class="line" href="structwasm__callback__env__t.html"> 3280</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structwasm__callback__env__t.html">wasm_callback_env_t</a> {</div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"><a class="line" href="structwasm__callback__env__t.html#aee9e5e84edaa9b87819f18024615a3a2"> 3281</a></span>  wasm_func_callback_with_env_t <a class="code hl_variable" href="structwasm__callback__env__t.html#aee9e5e84edaa9b87819f18024615a3a2">callback</a>;</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"><a class="line" href="structwasm__callback__env__t.html#a8f355dd616ed324f9983884aeda9a0c2"> 3282</a></span>  <span class="keywordtype">void</span>* <a class="code hl_variable" href="structwasm__callback__env__t.html#a8f355dd616ed324f9983884aeda9a0c2">env</a>;</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"><a class="line" href="structwasm__callback__env__t.html#a43cc2ffacbce02de47e5a89c94a3a8ab"> 3283</a></span>  void (*<a class="code hl_variable" href="structwasm__callback__env__t.html#a43cc2ffacbce02de47e5a89c94a3a8ab">finalizer</a>)(<span class="keywordtype">void</span>*);</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>};</div>
</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span> </div>
<div class="foldopen" id="foldopen03286" data-start="{" data-end="}">
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"><a class="line" href="c-api_8cc.html#af22bb2e74019dcb85af859ccc8f50d94"> 3286</a></span><span class="keyword">auto</span> <a class="code hl_function" href="c-api_8cc.html#af22bb2e74019dcb85af859ccc8f50d94">wasm_callback_with_env</a>(<span class="keywordtype">void</span>* env, <span class="keyword">const</span> wasm::vec&lt;wasm::Val&gt;&amp; <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>,</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>                            wasm::vec&lt;wasm::Val&gt;&amp; results)</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>    -&gt; wasm::own&lt;wasm::Trap&gt; {</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>  <span class="keyword">auto</span> t = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="structwasm__callback__env__t.html">wasm_callback_env_t</a>*<span class="keyword">&gt;</span>(env);</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>  <span class="keywordflow">return</span> adopt_trap(</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>      t-&gt;callback(t-&gt;env, hide_val_vec(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>), hide_val_vec(results)));</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>}</div>
</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span> </div>
<div class="foldopen" id="foldopen03294" data-start="{" data-end="}">
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a60278ee39cb12039bdd52560f224ae33"> 3294</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#a60278ee39cb12039bdd52560f224ae33">wasm_callback_env_finalizer</a>(<span class="keywordtype">void</span>* env) {</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>  <span class="keyword">auto</span> t = <span class="keyword">static_cast&lt;</span><a class="code hl_struct" href="structwasm__callback__env__t.html">wasm_callback_env_t</a>*<span class="keyword">&gt;</span>(env);</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>  <span class="keywordflow">if</span> (t-&gt;finalizer) t-&gt;<a class="code hl_variable" href="structwasm__callback__env__t.html#a43cc2ffacbce02de47e5a89c94a3a8ab">finalizer</a>(t-&gt;env);</div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>  <span class="keyword">delete</span> t;</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>}</div>
</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span> </div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>}  <span class="comment">// extern &quot;C++&quot;</span></div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span> </div>
<div class="foldopen" id="foldopen03302" data-start="{" data-end="}">
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ad2780fbe34f0de4ddbb5e1d2da53f7a3"> 3302</a></span>wasm_func_t* <a class="code hl_function" href="c-api_8cc.html#ad2780fbe34f0de4ddbb5e1d2da53f7a3">wasm_func_new</a>(wasm_store_t* store, <span class="keyword">const</span> wasm_functype_t* type,</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>                           wasm_func_callback_t <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>) {</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>  <span class="keywordflow">return</span> release_func(wasm::Func::make(store, type, <a class="code hl_function" href="c-api_8cc.html#aa3fc45d6ba67d1e451e5e5e72c23e9c2">wasm_callback</a>,</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>                                       <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>)));</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>}</div>
</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span> </div>
<div class="foldopen" id="foldopen03308" data-start="{" data-end="}">
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a5cc1c669b5446ad51cdfbec9157b5cd5"> 3308</a></span>wasm_func_t* <a class="code hl_function" href="c-api_8cc.html#a5cc1c669b5446ad51cdfbec9157b5cd5">wasm_func_new_with_env</a>(wasm_store_t* store,</div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>                                    <span class="keyword">const</span> wasm_functype_t* type,</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>                                    wasm_func_callback_with_env_t <a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>,</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>                                    <span class="keywordtype">void</span>* env, <span class="keywordtype">void</span> (*finalizer)(<span class="keywordtype">void</span>*)) {</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>  <span class="keyword">auto</span> env2 = <span class="keyword">new</span> <a class="code hl_struct" href="structwasm__callback__env__t.html">wasm_callback_env_t</a>{<a class="code hl_variable" href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a>, env, finalizer};</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>  <span class="keywordflow">return</span> release_func(wasm::Func::make(store, type, <a class="code hl_function" href="c-api_8cc.html#af22bb2e74019dcb85af859ccc8f50d94">wasm_callback_with_env</a>,</div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>                                       env2, <a class="code hl_function" href="c-api_8cc.html#a60278ee39cb12039bdd52560f224ae33">wasm_callback_env_finalizer</a>));</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>}</div>
</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span> </div>
<div class="foldopen" id="foldopen03317" data-start="{" data-end="}">
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a7cc462eef23d2a1d549c911abd6addc7"> 3317</a></span>wasm_functype_t* <a class="code hl_function" href="c-api_8cc.html#a7cc462eef23d2a1d549c911abd6addc7">wasm_func_type</a>(<span class="keyword">const</span> wasm_func_t* func) {</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>  <span class="keywordflow">return</span> release_functype(func-&gt;type());</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>}</div>
</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span> </div>
<div class="foldopen" id="foldopen03321" data-start="{" data-end="}">
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a738cec7dc8e791a29eb9cdf91de370ec"> 3321</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="c-api_8cc.html#a738cec7dc8e791a29eb9cdf91de370ec">wasm_func_param_arity</a>(<span class="keyword">const</span> wasm_func_t* func) {</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>  <span class="keywordflow">return</span> func-&gt;param_arity();</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>}</div>
</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span> </div>
<div class="foldopen" id="foldopen03325" data-start="{" data-end="}">
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a7295123a8a9fa0dcd4f0211f59990965"> 3325</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="c-api_8cc.html#a7295123a8a9fa0dcd4f0211f59990965">wasm_func_result_arity</a>(<span class="keyword">const</span> wasm_func_t* func) {</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>  <span class="keywordflow">return</span> func-&gt;result_arity();</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>}</div>
</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span> </div>
<div class="foldopen" id="foldopen03329" data-start="{" data-end="}">
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a4ca264916e170d2601fbd68172de4dab"> 3329</a></span>WASM_API_EXTERN wasm_trap_t* <a class="code hl_function" href="c-api_8cc.html#a4ca264916e170d2601fbd68172de4dab">wasm_func_call</a>(<span class="keyword">const</span> wasm_func_t* func,</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>                                            <span class="keyword">const</span> wasm_val_vec_t* <a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>,</div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>                                            wasm_val_vec_t* results) {</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>  <span class="keyword">auto</span> v8_results = adopt_val_vec(results);</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>  <span class="keywordflow">return</span> release_trap(func-&gt;call(adopt_val_vec(<a class="code hl_variable" href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a>), v8_results));</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>}</div>
</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span> </div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span><span class="comment">// Global Instances</span></div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span> </div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(global, wasm::Global)</div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span> </div>
<div class="foldopen" id="foldopen03340" data-start="{" data-end="}">
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a7e99ab12f0b03016ee0eda543f72be95"> 3340</a></span>wasm_global_t* <a class="code hl_function" href="c-api_8cc.html#a7e99ab12f0b03016ee0eda543f72be95">wasm_global_new</a>(wasm_store_t* store,</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>                               const wasm_globaltype_t* type,</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>                               const wasm_val_t* val) {</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>  <span class="keyword">auto</span> val_ = <a class="code hl_function" href="c-api_8cc.html#a200ea443d56d397ff1a61c49cb0ba869">borrow_val</a>(val);</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>  <span class="keywordflow">return</span> release_global(wasm::Global::make(store, type, val_.it));</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>}</div>
</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span> </div>
<div class="foldopen" id="foldopen03347" data-start="{" data-end="}">
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a9461f8c3fffb7b6a6ff5facfcb5d2379"> 3347</a></span>wasm_globaltype_t* <a class="code hl_function" href="c-api_8cc.html#a9461f8c3fffb7b6a6ff5facfcb5d2379">wasm_global_type</a>(<span class="keyword">const</span> wasm_global_t* global) {</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>  <span class="keywordflow">return</span> release_globaltype(global-&gt;type());</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>}</div>
</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span> </div>
<div class="foldopen" id="foldopen03351" data-start="{" data-end="}">
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"><a class="line" href="c-api_8cc.html#aae984d80135eda7ce4a03a12e70adf0c"> 3351</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#aae984d80135eda7ce4a03a12e70adf0c">wasm_global_get</a>(<span class="keyword">const</span> wasm_global_t* global, wasm_val_t* out) {</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span>  *out = <a class="code hl_function" href="c-api_8cc.html#ad0e282438565266f0df1197e03f258ac">release_val</a>(global-&gt;get());</div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>}</div>
</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span> </div>
<div class="foldopen" id="foldopen03355" data-start="{" data-end="}">
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a8dae1caf5613751c386e118a72e83dd3"> 3355</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#a8dae1caf5613751c386e118a72e83dd3">wasm_global_set</a>(wasm_global_t* global, <span class="keyword">const</span> wasm_val_t* val) {</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>  <span class="keyword">auto</span> val_ = <a class="code hl_function" href="c-api_8cc.html#a200ea443d56d397ff1a61c49cb0ba869">borrow_val</a>(val);</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>  global-&gt;set(val_.it);</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span>}</div>
</div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span> </div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span><span class="comment">// Table Instances</span></div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span> </div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(table, wasm::Table)</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span> </div>
<div class="foldopen" id="foldopen03364" data-start="{" data-end="}">
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a23dc001ac8e8ff1ccb17ee5bcb08cf8a"> 3364</a></span>wasm_table_t* <a class="code hl_function" href="c-api_8cc.html#a23dc001ac8e8ff1ccb17ee5bcb08cf8a">wasm_table_new</a>(wasm_store_t* store, const wasm_tabletype_t* type,</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>                             wasm_ref_t* ref) {</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>  <span class="keywordflow">return</span> release_table(wasm::Table::make(store, type, ref));</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>}</div>
</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span> </div>
<div class="foldopen" id="foldopen03369" data-start="{" data-end="}">
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a458f9f7b30f556662b099eb603deede8"> 3369</a></span>wasm_tabletype_t* <a class="code hl_function" href="c-api_8cc.html#a458f9f7b30f556662b099eb603deede8">wasm_table_type</a>(<span class="keyword">const</span> wasm_table_t* table) {</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>  <span class="keywordflow">return</span> release_tabletype(table-&gt;type());</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>}</div>
</div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span> </div>
<div class="foldopen" id="foldopen03373" data-start="{" data-end="}">
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a065bb9acd63ffc2f0769ef872a021a66"> 3373</a></span>wasm_ref_t* <a class="code hl_function" href="c-api_8cc.html#a065bb9acd63ffc2f0769ef872a021a66">wasm_table_get</a>(<span class="keyword">const</span> wasm_table_t* table, wasm_table_size_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>) {</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>  <span class="keywordflow">return</span> release_ref(table-&gt;get(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>));</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>}</div>
</div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span> </div>
<div class="foldopen" id="foldopen03377" data-start="{" data-end="}">
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ab1e601f8682a6cdcf084456a11268eb2"> 3377</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="c-api_8cc.html#ab1e601f8682a6cdcf084456a11268eb2">wasm_table_set</a>(wasm_table_t* table, wasm_table_size_t <a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>,</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>                    wasm_ref_t* ref) {</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>  <span class="keywordflow">return</span> table-&gt;set(<a class="code hl_variable" href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a>, ref);</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>}</div>
</div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span> </div>
<div class="foldopen" id="foldopen03382" data-start="{" data-end="}">
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"><a class="line" href="c-api_8cc.html#aa1b6825e30497a94b1b576ef7848b42e"> 3382</a></span>wasm_table_size_t <a class="code hl_function" href="c-api_8cc.html#aa1b6825e30497a94b1b576ef7848b42e">wasm_table_size</a>(<span class="keyword">const</span> wasm_table_t* table) {</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>  <span class="keywordflow">return</span> table-&gt;size();</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>}</div>
</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span> </div>
<div class="foldopen" id="foldopen03386" data-start="{" data-end="}">
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"><a class="line" href="c-api_8cc.html#abba5db612bb7add8bef26792904aa0e0"> 3386</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="c-api_8cc.html#abba5db612bb7add8bef26792904aa0e0">wasm_table_grow</a>(wasm_table_t* table, wasm_table_size_t delta,</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>                     wasm_ref_t* ref) {</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span>  <span class="keywordflow">return</span> table-&gt;grow(delta, ref);</div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>}</div>
</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span> </div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span><span class="comment">// Memory Instances</span></div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span> </div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(memory, wasm::Memory)</div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span> </div>
<div class="foldopen" id="foldopen03395" data-start="{" data-end="}">
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a0e7fc4aa033e22b8ddb2cdc0a93eed2f"> 3395</a></span>wasm_memory_t* <a class="code hl_function" href="c-api_8cc.html#a0e7fc4aa033e22b8ddb2cdc0a93eed2f">wasm_memory_new</a>(wasm_store_t* store,</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span>                               const wasm_memorytype_t* type) {</div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>  <span class="keywordflow">return</span> release_memory(wasm::Memory::make(store, type));</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>}</div>
</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span> </div>
<div class="foldopen" id="foldopen03400" data-start="{" data-end="}">
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ada4dbe9e681f8774cc4c4650f0a5b8a5"> 3400</a></span>wasm_memorytype_t* <a class="code hl_function" href="c-api_8cc.html#ada4dbe9e681f8774cc4c4650f0a5b8a5">wasm_memory_type</a>(<span class="keyword">const</span> wasm_memory_t* memory) {</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>  <span class="keywordflow">return</span> release_memorytype(memory-&gt;type());</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>}</div>
</div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span> </div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a11e6b98d98aa984de063d726dd74cf6f"> 3404</a></span>wasm_byte_t* <a class="code hl_function" href="c-api_8cc.html#a11e6b98d98aa984de063d726dd74cf6f">wasm_memory_data</a>(wasm_memory_t* memory) { <span class="keywordflow">return</span> memory-&gt;data(); }</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span> </div>
<div class="foldopen" id="foldopen03406" data-start="{" data-end="}">
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a6816347bc4b96e4225e595479acbb1e0"> 3406</a></span><span class="keywordtype">size_t</span> <a class="code hl_function" href="c-api_8cc.html#a6816347bc4b96e4225e595479acbb1e0">wasm_memory_data_size</a>(<span class="keyword">const</span> wasm_memory_t* memory) {</div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span>  <span class="keywordflow">return</span> memory-&gt;data_size();</div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>}</div>
</div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span> </div>
<div class="foldopen" id="foldopen03410" data-start="{" data-end="}">
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a36771e822650ab4c7eb36aa29c96e1cb"> 3410</a></span>wasm_memory_pages_t <a class="code hl_function" href="c-api_8cc.html#a36771e822650ab4c7eb36aa29c96e1cb">wasm_memory_size</a>(<span class="keyword">const</span> wasm_memory_t* memory) {</div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>  <span class="keywordflow">return</span> memory-&gt;size();</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>}</div>
</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span> </div>
<div class="foldopen" id="foldopen03414" data-start="{" data-end="}">
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a9d5ef81cf5add9aa575b8428fafcb2dd"> 3414</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="c-api_8cc.html#a9d5ef81cf5add9aa575b8428fafcb2dd">wasm_memory_grow</a>(wasm_memory_t* memory, wasm_memory_pages_t delta) {</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>  <span class="keywordflow">return</span> memory-&gt;grow(delta);</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>}</div>
</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span> </div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span><span class="comment">// Externals</span></div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span> </div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(<span class="keyword">extern</span>, wasm::Extern)</div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span><a class="code hl_define" href="c-api_8cc.html#a5f58be229336ab32eeec2acd3a894c26">WASM_DEFINE_VEC_OWN</a>(<span class="keyword">extern</span>, wasm::Extern)</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span> </div>
<div class="foldopen" id="foldopen03423" data-start="{" data-end="}">
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a30a7f49b76839bf43c6ee8b149176314"> 3423</a></span>wasm_externkind_t <a class="code hl_function" href="c-api_8cc.html#a30a7f49b76839bf43c6ee8b149176314">wasm_extern_kind</a>(const wasm_extern_t* external) {</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="c-api_8cc.html#adc5fc5dcdf2245f204fdeb8d45ce506c">hide_externkind</a>(external-&gt;kind());</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>}</div>
</div>
<div class="foldopen" id="foldopen03426" data-start="{" data-end="}">
<div class="line"><a id="l03426" name="l03426"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ac94f0ab4a90ba63326d134a3d66d0a1c"> 3426</a></span>wasm_externtype_t* <a class="code hl_function" href="c-api_8cc.html#ac94f0ab4a90ba63326d134a3d66d0a1c">wasm_extern_type</a>(<span class="keyword">const</span> wasm_extern_t* external) {</div>
<div class="line"><a id="l03427" name="l03427"></a><span class="lineno"> 3427</span>  <span class="keywordflow">return</span> release_externtype(external-&gt;type());</div>
<div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>}</div>
</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span> </div>
<div class="foldopen" id="foldopen03430" data-start="{" data-end="}">
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ac87988a958e7fe827044dbfe5ae35c8e"> 3430</a></span>wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#ac87988a958e7fe827044dbfe5ae35c8e">wasm_func_as_extern</a>(wasm_func_t* func) {</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_func(func)));</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>}</div>
</div>
<div class="foldopen" id="foldopen03433" data-start="{" data-end="}">
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a98d60a3a970782a8bea2731292c686b3"> 3433</a></span>wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#a98d60a3a970782a8bea2731292c686b3">wasm_global_as_extern</a>(wasm_global_t* global) {</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_global(global)));</div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>}</div>
</div>
<div class="foldopen" id="foldopen03436" data-start="{" data-end="}">
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a6b52d895a129de565886aa9ff438e27a"> 3436</a></span>wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#a6b52d895a129de565886aa9ff438e27a">wasm_table_as_extern</a>(wasm_table_t* table) {</div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_table(table)));</div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>}</div>
</div>
<div class="foldopen" id="foldopen03439" data-start="{" data-end="}">
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a7cadf2e710da2b52d1362712f0dc73d8"> 3439</a></span>wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#a7cadf2e710da2b52d1362712f0dc73d8">wasm_memory_as_extern</a>(wasm_memory_t* memory) {</div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_memory(memory)));</div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>}</div>
</div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span> </div>
<div class="foldopen" id="foldopen03443" data-start="{" data-end="}">
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a9cea472878006df68b513e27db767ae0"> 3443</a></span><span class="keyword">const</span> wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#a9cea472878006df68b513e27db767ae0">wasm_func_as_extern_const</a>(<span class="keyword">const</span> wasm_func_t* func) {</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_func(func)));</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>}</div>
</div>
<div class="foldopen" id="foldopen03446" data-start="{" data-end="}">
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a47bd4d58d25dc72ec65c8bf4e354b199"> 3446</a></span><span class="keyword">const</span> wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#a47bd4d58d25dc72ec65c8bf4e354b199">wasm_global_as_extern_const</a>(<span class="keyword">const</span> wasm_global_t* global) {</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_global(global)));</div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>}</div>
</div>
<div class="foldopen" id="foldopen03449" data-start="{" data-end="}">
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"><a class="line" href="c-api_8cc.html#afc266285cffcc4e093100c3536b17819"> 3449</a></span><span class="keyword">const</span> wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#afc266285cffcc4e093100c3536b17819">wasm_table_as_extern_const</a>(<span class="keyword">const</span> wasm_table_t* table) {</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_table(table)));</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>}</div>
</div>
<div class="foldopen" id="foldopen03452" data-start="{" data-end="}">
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a5e049541c6e325d07e9364a25af4b8bc"> 3452</a></span><span class="keyword">const</span> wasm_extern_t* <a class="code hl_function" href="c-api_8cc.html#a5e049541c6e325d07e9364a25af4b8bc">wasm_memory_as_extern_const</a>(<span class="keyword">const</span> wasm_memory_t* memory) {</div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>  <span class="keywordflow">return</span> hide_extern(<span class="keyword">static_cast&lt;</span><span class="keyword">const </span>wasm::Extern*<span class="keyword">&gt;</span>(reveal_memory(memory)));</div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span>}</div>
</div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span> </div>
<div class="foldopen" id="foldopen03456" data-start="{" data-end="}">
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a7d2e15271d321398254efd1cc03535f6"> 3456</a></span>wasm_func_t* <a class="code hl_function" href="c-api_8cc.html#a7d2e15271d321398254efd1cc03535f6">wasm_extern_as_func</a>(wasm_extern_t* external) {</div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span>  <span class="keywordflow">return</span> hide_func(external-&gt;func());</div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span>}</div>
</div>
<div class="foldopen" id="foldopen03459" data-start="{" data-end="}">
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a1eb921638873e945dc00d004aa190320"> 3459</a></span>wasm_global_t* <a class="code hl_function" href="c-api_8cc.html#a1eb921638873e945dc00d004aa190320">wasm_extern_as_global</a>(wasm_extern_t* external) {</div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>  <span class="keywordflow">return</span> hide_global(external-&gt;global());</div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span>}</div>
</div>
<div class="foldopen" id="foldopen03462" data-start="{" data-end="}">
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a942277a64879d1c0ec6abbaef58cb0b7"> 3462</a></span>wasm_table_t* <a class="code hl_function" href="c-api_8cc.html#a942277a64879d1c0ec6abbaef58cb0b7">wasm_extern_as_table</a>(wasm_extern_t* external) {</div>
<div class="line"><a id="l03463" name="l03463"></a><span class="lineno"> 3463</span>  <span class="keywordflow">return</span> hide_table(external-&gt;table());</div>
<div class="line"><a id="l03464" name="l03464"></a><span class="lineno"> 3464</span>}</div>
</div>
<div class="foldopen" id="foldopen03465" data-start="{" data-end="}">
<div class="line"><a id="l03465" name="l03465"></a><span class="lineno"><a class="line" href="c-api_8cc.html#acee384096f46ae596b693669bba109bc"> 3465</a></span>wasm_memory_t* <a class="code hl_function" href="c-api_8cc.html#acee384096f46ae596b693669bba109bc">wasm_extern_as_memory</a>(wasm_extern_t* external) {</div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>  <span class="keywordflow">return</span> hide_memory(external-&gt;memory());</div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>}</div>
</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span> </div>
<div class="foldopen" id="foldopen03469" data-start="{" data-end="}">
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a1135793a57e19e9655f2e73bed089480"> 3469</a></span><span class="keyword">const</span> wasm_func_t* <a class="code hl_function" href="c-api_8cc.html#a1135793a57e19e9655f2e73bed089480">wasm_extern_as_func_const</a>(<span class="keyword">const</span> wasm_extern_t* external) {</div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>  <span class="keywordflow">return</span> hide_func(external-&gt;func());</div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>}</div>
</div>
<div class="foldopen" id="foldopen03472" data-start="{" data-end="}">
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"><a class="line" href="c-api_8cc.html#af9b60e0ed44bf5a12f638281012c29ee"> 3472</a></span><span class="keyword">const</span> wasm_global_t* <a class="code hl_function" href="c-api_8cc.html#af9b60e0ed44bf5a12f638281012c29ee">wasm_extern_as_global_const</a>(</div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>    <span class="keyword">const</span> wasm_extern_t* external) {</div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>  <span class="keywordflow">return</span> hide_global(external-&gt;global());</div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>}</div>
</div>
<div class="foldopen" id="foldopen03476" data-start="{" data-end="}">
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ad19539609721c28046cbd0ea288064cf"> 3476</a></span><span class="keyword">const</span> wasm_table_t* <a class="code hl_function" href="c-api_8cc.html#ad19539609721c28046cbd0ea288064cf">wasm_extern_as_table_const</a>(<span class="keyword">const</span> wasm_extern_t* external) {</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>  <span class="keywordflow">return</span> hide_table(external-&gt;table());</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span>}</div>
</div>
<div class="foldopen" id="foldopen03479" data-start="{" data-end="}">
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a15039852997f62ecd20db24929cb4087"> 3479</a></span><span class="keyword">const</span> wasm_memory_t* <a class="code hl_function" href="c-api_8cc.html#a15039852997f62ecd20db24929cb4087">wasm_extern_as_memory_const</a>(</div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>    <span class="keyword">const</span> wasm_extern_t* external) {</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span>  <span class="keywordflow">return</span> hide_memory(external-&gt;memory());</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span>}</div>
</div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span> </div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span><span class="comment">// Module Instances</span></div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span> </div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span><a class="code hl_define" href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a>(instance, wasm::Instance)</div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span> </div>
<div class="foldopen" id="foldopen03488" data-start="{" data-end="}">
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ac4e7226de6f20b88baa2d861de68561d"> 3488</a></span>WASM_API_EXTERN wasm_instance_t* <a class="code hl_function" href="c-api_8cc.html#ac4e7226de6f20b88baa2d861de68561d">wasm_instance_new</a>(</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>    wasm_store_t* store, const wasm_module_t* module,</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>    const wasm_extern_vec_t* imports, wasm_trap_t** trap) {</div>
<div class="line"><a id="l03491" name="l03491"></a><span class="lineno"> 3491</span>  wasm::own&lt;wasm::Trap&gt; error;</div>
<div class="line"><a id="l03492" name="l03492"></a><span class="lineno"> 3492</span> </div>
<div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>  <span class="keywordtype">size_t</span> size = 0;</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>  <span class="keywordflow">if</span> (imports-&gt;data &amp;&amp; imports-&gt;size &gt; 0) {</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>    size = imports-&gt;size;</div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>  }</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span> </div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>  <span class="keyword">auto</span> v8_imports = wasm::vec&lt;wasm::Extern*&gt;::make_uninitialized(size);</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span> </div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>  for (<span class="keywordtype">size_t</span> <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> = 0; <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a> &lt; v8_imports.<a class="code hl_class" href="classsize.html">size</a>(); <a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>++) {</div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>    v8_imports[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>] = reveal_extern(imports-&gt;data[<a class="code hl_namespace" href="namespacev8_1_1internal.html">i</a>]);</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>  }</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span> </div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>  wasm_instance_t* instance =</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>      release_instance(wasm::Instance::make(store, module, v8_imports, &amp;error));</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>  <span class="keywordflow">if</span> (trap) *trap = hide_trap(error.release());</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>  <span class="keywordflow">return</span> instance;</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>}</div>
</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span> </div>
<div class="foldopen" id="foldopen03510" data-start="{" data-end="}">
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"><a class="line" href="c-api_8cc.html#a928e211baa4828b457786878250c9c2c"> 3510</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="c-api_8cc.html#a928e211baa4828b457786878250c9c2c">wasm_instance_exports</a>(<span class="keyword">const</span> wasm_instance_t* instance,</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>                           wasm_extern_vec_t* out) {</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span>  *out = release_extern_vec(instance-&gt;exports());</div>
<div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>}</div>
</div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span> </div>
<div class="foldopen" id="foldopen03515" data-start="{" data-end="}">
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"><a class="line" href="c-api_8cc.html#ae3a80d791b78ec7236fc93d7901f9a15"> 3515</a></span>wasm_instance_t* <a class="code hl_function" href="c-api_8cc.html#ae3a80d791b78ec7236fc93d7901f9a15">wasm_frame_instance</a>(<span class="keyword">const</span> wasm_frame_t* frame) {</div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>  <span class="keywordflow">return</span> hide_instance(reveal_frame(frame)-&gt;instance());</div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>}</div>
</div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span> </div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span><span class="preprocessor">#undef WASM_DEFINE_OWN</span></div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span><span class="preprocessor">#undef WASM_DEFINE_VEC_BASE</span></div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span><span class="preprocessor">#undef WASM_DEFINE_VEC_PLAIN</span></div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span><span class="preprocessor">#undef WASM_DEFINE_VEC_OWN</span></div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span><span class="preprocessor">#undef WASM_DEFINE_TYPE</span></div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span><span class="preprocessor">#undef WASM_DEFINE_REF_BASE</span></div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span><span class="preprocessor">#undef WASM_DEFINE_REF</span></div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span><span class="preprocessor">#undef WASM_DEFINE_SHARABLE_REF</span></div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span> </div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>}  <span class="comment">// extern &quot;C&quot;</span></div>
<div class="ttc" id="aapi-inl_8h_html"><div class="ttname"><a href="api-inl_8h.html">api-inl.h</a></div></div>
<div class="ttc" id="aapi_8cc_html_a0b79990e09c5971befdb526ccfb8deed"><div class="ttname"><a href="api_8cc.html#a0b79990e09c5971befdb526ccfb8deed">name</a></div><div class="ttdeci">i::DirectHandle&lt; i::String &gt; name</div><div class="ttdef"><b>Definition</b> <a href="api_8cc_source.html#l07178">api.cc:7178</a></div></div>
<div class="ttc" id="abuiltins_8cc_html_a34a6b28885d79bbc20d4110313cb28be"><div class="ttname"><a href="builtins_8cc.html#a34a6b28885d79bbc20d4110313cb28be">parameter_count</a></div><div class="ttdeci">int16_t parameter_count</div><div class="ttdef"><b>Definition</b> <a href="builtins_8cc_source.html#l00067">builtins.cc:67</a></div></div>
<div class="ttc" id="abuiltins_8cc_html_adc156a864d6037c4df1b276073ae7277"><div class="ttname"><a href="builtins_8cc.html#adc156a864d6037c4df1b276073ae7277">kind</a></div><div class="ttdeci">Builtins::Kind kind</div><div class="ttdef"><b>Definition</b> <a href="builtins_8cc_source.html#l00040">builtins.cc:40</a></div></div>
<div class="ttc" id="abuiltins_8h_html"><div class="ttname"><a href="builtins_8h.html">builtins.h</a></div></div>
<div class="ttc" id="abuiltins_8h_html_af33bd0f259d8e6a511fd018115e0d62c"><div class="ttname"><a href="builtins_8h.html#af33bd0f259d8e6a511fd018115e0d62c">BUILTIN_CODE</a></div><div class="ttdeci">#define BUILTIN_CODE(isolate, name)</div><div class="ttdef"><b>Definition</b> <a href="builtins_8h_source.html#l00045">builtins.h:45</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a0095569a931c19b223dd10e7f568fb41"><div class="ttname"><a href="c-api_8cc.html#a0095569a931c19b223dd10e7f568fb41">wasm_memorytype_limits</a></div><div class="ttdeci">const wasm_limits_t * wasm_memorytype_limits(const wasm_memorytype_t *mt)</div><div class="ttdef"><b>Definition</b> <a href="#l02835">c-api.cc:2835</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a021e36cad8b6791231abd5e43a9f18fc"><div class="ttname"><a href="c-api_8cc.html#a021e36cad8b6791231abd5e43a9f18fc">wasm_frame_func_index</a></div><div class="ttdeci">uint32_t wasm_frame_func_index(const wasm_frame_t *frame)</div><div class="ttdef"><b>Definition</b> <a href="#l03183">c-api.cc:3183</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a065bb9acd63ffc2f0769ef872a021a66"><div class="ttname"><a href="c-api_8cc.html#a065bb9acd63ffc2f0769ef872a021a66">wasm_table_get</a></div><div class="ttdeci">wasm_ref_t * wasm_table_get(const wasm_table_t *table, wasm_table_size_t index)</div><div class="ttdef"><b>Definition</b> <a href="#l03373">c-api.cc:3373</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a0899cf4ea0ec1706f76bd734debc9dd9"><div class="ttname"><a href="c-api_8cc.html#a0899cf4ea0ec1706f76bd734debc9dd9">WASM_DEFINE_REF</a></div><div class="ttdeci">#define WASM_DEFINE_REF(name, Name)</div><div class="ttdef"><b>Definition</b> <a href="#l02999">c-api.cc:2999</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a0921fb93e7bcada5e9fdd316c70ebcfd"><div class="ttname"><a href="c-api_8cc.html#a0921fb93e7bcada5e9fdd316c70ebcfd">wasm_externtype_as_tabletype_const</a></div><div class="ttdeci">const wasm_tabletype_t * wasm_externtype_as_tabletype_const(const wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02916">c-api.cc:2916</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a0d6ee1d77594083b3d7c36aef2e47f57"><div class="ttname"><a href="c-api_8cc.html#a0d6ee1d77594083b3d7c36aef2e47f57">wasm_tabletype_as_externtype_const</a></div><div class="ttdeci">const wasm_externtype_t * wasm_tabletype_as_externtype_const(const wasm_tabletype_t *tt)</div><div class="ttdef"><b>Definition</b> <a href="#l02868">c-api.cc:2868</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a0e7fc4aa033e22b8ddb2cdc0a93eed2f"><div class="ttname"><a href="c-api_8cc.html#a0e7fc4aa033e22b8ddb2cdc0a93eed2f">wasm_memory_new</a></div><div class="ttdeci">wasm_memory_t * wasm_memory_new(wasm_store_t *store, const wasm_memorytype_t *type)</div><div class="ttdef"><b>Definition</b> <a href="#l03395">c-api.cc:3395</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a1135793a57e19e9655f2e73bed089480"><div class="ttname"><a href="c-api_8cc.html#a1135793a57e19e9655f2e73bed089480">wasm_extern_as_func_const</a></div><div class="ttdeci">const wasm_func_t * wasm_extern_as_func_const(const wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03469">c-api.cc:3469</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a11e6b98d98aa984de063d726dd74cf6f"><div class="ttname"><a href="c-api_8cc.html#a11e6b98d98aa984de063d726dd74cf6f">wasm_memory_data</a></div><div class="ttdeci">wasm_byte_t * wasm_memory_data(wasm_memory_t *memory)</div><div class="ttdef"><b>Definition</b> <a href="#l03404">c-api.cc:3404</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a15039852997f62ecd20db24929cb4087"><div class="ttname"><a href="c-api_8cc.html#a15039852997f62ecd20db24929cb4087">wasm_extern_as_memory_const</a></div><div class="ttdeci">const wasm_memory_t * wasm_extern_as_memory_const(const wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03479">c-api.cc:3479</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a172899852cece3318aeb9d268c75a3d5"><div class="ttname"><a href="c-api_8cc.html#a172899852cece3318aeb9d268c75a3d5">wasm_functype_as_externtype_const</a></div><div class="ttdeci">const wasm_externtype_t * wasm_functype_as_externtype_const(const wasm_functype_t *ft)</div><div class="ttdef"><b>Definition</b> <a href="#l02860">c-api.cc:2860</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a17583c47b46167800fe59ddf5dd27c87"><div class="ttname"><a href="c-api_8cc.html#a17583c47b46167800fe59ddf5dd27c87">wasm_externtype_kind</a></div><div class="ttdeci">wasm_externkind_t wasm_externtype_kind(const wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02843">c-api.cc:2843</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a199f5508a4aa12a8be2258b5cf3ff55a"><div class="ttname"><a href="c-api_8cc.html#a199f5508a4aa12a8be2258b5cf3ff55a">hide_val</a></div><div class="ttdeci">auto hide_val(wasm::Val v) -&gt; wasm_val_t</div><div class="ttdef"><b>Definition</b> <a href="#l03030">c-api.cc:3030</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a1a5c15f204f306f8ce492ae8cfa5d168"><div class="ttname"><a href="c-api_8cc.html#a1a5c15f204f306f8ce492ae8cfa5d168">hide_valkind</a></div><div class="ttdeci">auto hide_valkind(wasm::ValKind kind) -&gt; wasm_valkind_t</div><div class="ttdef"><b>Definition</b> <a href="#l02732">c-api.cc:2732</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a1d52b0c575a1a6a6ae92251a7d29e755"><div class="ttname"><a href="c-api_8cc.html#a1d52b0c575a1a6a6ae92251a7d29e755">WASM_DEFINE_VEC_PLAIN</a></div><div class="ttdeci">#define WASM_DEFINE_VEC_PLAIN(name, Name)</div><div class="ttdef"><b>Definition</b> <a href="#l02626">c-api.cc:2626</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a1d764bfdb8c69ee6aff0dd46b70de1b4"><div class="ttname"><a href="c-api_8cc.html#a1d764bfdb8c69ee6aff0dd46b70de1b4">wasm_module_validate</a></div><div class="ttdeci">bool wasm_module_validate(wasm_store_t *store, const wasm_byte_vec_t *binary)</div><div class="ttdef"><b>Definition</b> <a href="#l03228">c-api.cc:3228</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a1eb921638873e945dc00d004aa190320"><div class="ttname"><a href="c-api_8cc.html#a1eb921638873e945dc00d004aa190320">wasm_extern_as_global</a></div><div class="ttdeci">wasm_global_t * wasm_extern_as_global(wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03459">c-api.cc:3459</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a1f9565c1948f00f9f2cd415dbccb4a72"><div class="ttname"><a href="c-api_8cc.html#a1f9565c1948f00f9f2cd415dbccb4a72">wasm_module_imports</a></div><div class="ttdeci">void wasm_module_imports(const wasm_module_t *module, wasm_importtype_vec_t *out)</div><div class="ttdef"><b>Definition</b> <a href="#l03239">c-api.cc:3239</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a200ea443d56d397ff1a61c49cb0ba869"><div class="ttname"><a href="c-api_8cc.html#a200ea443d56d397ff1a61c49cb0ba869">borrow_val</a></div><div class="ttdeci">auto borrow_val(const wasm_val_t *v) -&gt; borrowed_val</div><div class="ttdef"><b>Definition</b> <a href="#l03107">c-api.cc:3107</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a23dc001ac8e8ff1ccb17ee5bcb08cf8a"><div class="ttname"><a href="c-api_8cc.html#a23dc001ac8e8ff1ccb17ee5bcb08cf8a">wasm_table_new</a></div><div class="ttdeci">wasm_table_t * wasm_table_new(wasm_store_t *store, const wasm_tabletype_t *type, wasm_ref_t *ref)</div><div class="ttdef"><b>Definition</b> <a href="#l03364">c-api.cc:3364</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a2658605611dcedb3783c1bfc3ad19425"><div class="ttname"><a href="c-api_8cc.html#a2658605611dcedb3783c1bfc3ad19425">wasm_memorytype_as_externtype_const</a></div><div class="ttdeci">const wasm_externtype_t * wasm_memorytype_as_externtype_const(const wasm_memorytype_t *mt)</div><div class="ttdef"><b>Definition</b> <a href="#l02872">c-api.cc:2872</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a2789215bc73d86c91f2f7bfdd2087f9a"><div class="ttname"><a href="c-api_8cc.html#a2789215bc73d86c91f2f7bfdd2087f9a">wasm_trap_message</a></div><div class="ttdeci">void wasm_trap_message(const wasm_trap_t *trap, wasm_message_t *out)</div><div class="ttdef"><b>Definition</b> <a href="#l03204">c-api.cc:3204</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a30a7f49b76839bf43c6ee8b149176314"><div class="ttname"><a href="c-api_8cc.html#a30a7f49b76839bf43c6ee8b149176314">wasm_extern_kind</a></div><div class="ttdeci">wasm_externkind_t wasm_extern_kind(const wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03423">c-api.cc:3423</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a31e4a81a3bdbd766c4e9d5bafe0aafa6"><div class="ttname"><a href="c-api_8cc.html#a31e4a81a3bdbd766c4e9d5bafe0aafa6">wasm_externtype_as_functype_const</a></div><div class="ttdeci">const wasm_functype_t * wasm_externtype_as_functype_const(const wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02902">c-api.cc:2902</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a33aba3be11b80eb082f4b9a21ac1d3b7"><div class="ttname"><a href="c-api_8cc.html#a33aba3be11b80eb082f4b9a21ac1d3b7">wasm_importtype_type</a></div><div class="ttdeci">const wasm_externtype_t * wasm_importtype_type(const wasm_importtype_t *it)</div><div class="ttdef"><b>Definition</b> <a href="#l02949">c-api.cc:2949</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a358a0a2c82c987d939ec8c1fa084326c"><div class="ttname"><a href="c-api_8cc.html#a358a0a2c82c987d939ec8c1fa084326c">wasm_module_obtain</a></div><div class="ttdeci">wasm_module_t * wasm_module_obtain(wasm_store_t *store, const wasm_shared_module_t *shared)</div><div class="ttdef"><b>Definition</b> <a href="#l03263">c-api.cc:3263</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a36771e822650ab4c7eb36aa29c96e1cb"><div class="ttname"><a href="c-api_8cc.html#a36771e822650ab4c7eb36aa29c96e1cb">wasm_memory_size</a></div><div class="ttdeci">wasm_memory_pages_t wasm_memory_size(const wasm_memory_t *memory)</div><div class="ttdef"><b>Definition</b> <a href="#l03410">c-api.cc:3410</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a36f764aada6e010444131f9b8186c993"><div class="ttname"><a href="c-api_8cc.html#a36f764aada6e010444131f9b8186c993">wasm_globaltype_content</a></div><div class="ttdeci">const wasm_valtype_t * wasm_globaltype_content(const wasm_globaltype_t *gt)</div><div class="ttdef"><b>Definition</b> <a href="#l02801">c-api.cc:2801</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a3874c6749d8a8b691fb500573ab73861"><div class="ttname"><a href="c-api_8cc.html#a3874c6749d8a8b691fb500573ab73861">wasm_externtype_as_tabletype</a></div><div class="ttdeci">wasm_tabletype_t * wasm_externtype_as_tabletype(wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02889">c-api.cc:2889</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a38f94e392184623edd41eb7b96a91417"><div class="ttname"><a href="c-api_8cc.html#a38f94e392184623edd41eb7b96a91417">WASM_DEFINE_VEC_BASE</a></div><div class="ttdeci">#define WASM_DEFINE_VEC_BASE(name, Name, vec, ptr_or_none)</div><div class="ttdef"><b>Definition</b> <a href="#l02555">c-api.cc:2555</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a3a2586c5cb100b41709e880d1f10a8b8"><div class="ttname"><a href="c-api_8cc.html#a3a2586c5cb100b41709e880d1f10a8b8">wasm_importtype_module</a></div><div class="ttdeci">const wasm_name_t * wasm_importtype_module(const wasm_importtype_t *it)</div><div class="ttdef"><b>Definition</b> <a href="#l02941">c-api.cc:2941</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a3cc49972031e18f2a44c49cf3dea39e9"><div class="ttname"><a href="c-api_8cc.html#a3cc49972031e18f2a44c49cf3dea39e9">wasm_val_vec_new</a></div><div class="ttdeci">void wasm_val_vec_new(wasm_val_vec_t *out, size_t size, wasm_val_t const data[])</div><div class="ttdef"><b>Definition</b> <a href="#l03136">c-api.cc:3136</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a40cdd52c5b200a981a41f03d7149fa05"><div class="ttname"><a href="c-api_8cc.html#a40cdd52c5b200a981a41f03d7149fa05">wasm_store_new</a></div><div class="ttdeci">wasm_store_t * wasm_store_new(wasm_engine_t *engine)</div><div class="ttdef"><b>Definition</b> <a href="#l02704">c-api.cc:2704</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a44ba0718555559086e7e3e8b1f7f8b85"><div class="ttname"><a href="c-api_8cc.html#a44ba0718555559086e7e3e8b1f7f8b85">wasm_functype_as_externtype</a></div><div class="ttdeci">wasm_externtype_t * wasm_functype_as_externtype(wasm_functype_t *ft)</div><div class="ttdef"><b>Definition</b> <a href="#l02847">c-api.cc:2847</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a4514eb32a98f6667fd72bd9dd83891a9"><div class="ttname"><a href="c-api_8cc.html#a4514eb32a98f6667fd72bd9dd83891a9">wasm_globaltype_mutability</a></div><div class="ttdeci">wasm_mutability_t wasm_globaltype_mutability(const wasm_globaltype_t *gt)</div><div class="ttdef"><b>Definition</b> <a href="#l02805">c-api.cc:2805</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a458f9f7b30f556662b099eb603deede8"><div class="ttname"><a href="c-api_8cc.html#a458f9f7b30f556662b099eb603deede8">wasm_table_type</a></div><div class="ttdeci">wasm_tabletype_t * wasm_table_type(const wasm_table_t *table)</div><div class="ttdef"><b>Definition</b> <a href="#l03369">c-api.cc:3369</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a47bd4d58d25dc72ec65c8bf4e354b199"><div class="ttname"><a href="c-api_8cc.html#a47bd4d58d25dc72ec65c8bf4e354b199">wasm_global_as_extern_const</a></div><div class="ttdeci">const wasm_extern_t * wasm_global_as_extern_const(const wasm_global_t *global)</div><div class="ttdef"><b>Definition</b> <a href="#l03446">c-api.cc:3446</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a47ffa7ea68c385bcbeaf03b62a181c50"><div class="ttname"><a href="c-api_8cc.html#a47ffa7ea68c385bcbeaf03b62a181c50">reveal_limits</a></div><div class="ttdeci">auto reveal_limits(wasm_limits_t limits) -&gt; wasm::Limits</div><div class="ttdef"><b>Definition</b> <a href="#l02728">c-api.cc:2728</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a4a2370c194ea0e018d8493337fcb7ee9"><div class="ttname"><a href="c-api_8cc.html#a4a2370c194ea0e018d8493337fcb7ee9">adopt_val</a></div><div class="ttdeci">auto adopt_val(wasm_val_t v) -&gt; wasm::Val</div><div class="ttdef"><b>Definition</b> <a href="#l03080">c-api.cc:3080</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a4b34b183aeeaa0c7ecca62520211b1ed"><div class="ttname"><a href="c-api_8cc.html#a4b34b183aeeaa0c7ecca62520211b1ed">reveal_mutability</a></div><div class="ttdeci">auto reveal_mutability(wasm_mutability_t mutability) -&gt; wasm::Mutability</div><div class="ttdef"><b>Definition</b> <a href="#l02718">c-api.cc:2718</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a4ba7c7b6baf96e59f73acc3f4841b8b4"><div class="ttname"><a href="c-api_8cc.html#a4ba7c7b6baf96e59f73acc3f4841b8b4">wasm_globaltype_as_externtype_const</a></div><div class="ttdeci">const wasm_externtype_t * wasm_globaltype_as_externtype_const(const wasm_globaltype_t *gt)</div><div class="ttdef"><b>Definition</b> <a href="#l02864">c-api.cc:2864</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a4ca264916e170d2601fbd68172de4dab"><div class="ttname"><a href="c-api_8cc.html#a4ca264916e170d2601fbd68172de4dab">wasm_func_call</a></div><div class="ttdeci">WASM_API_EXTERN wasm_trap_t * wasm_func_call(const wasm_func_t *func, const wasm_val_vec_t *args, wasm_val_vec_t *results)</div><div class="ttdef"><b>Definition</b> <a href="#l03329">c-api.cc:3329</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a5665b704dd9d78bcf21463e294ef8bf5"><div class="ttname"><a href="c-api_8cc.html#a5665b704dd9d78bcf21463e294ef8bf5">wasm_tabletype_as_externtype</a></div><div class="ttdeci">wasm_externtype_t * wasm_tabletype_as_externtype(wasm_tabletype_t *tt)</div><div class="ttdef"><b>Definition</b> <a href="#l02853">c-api.cc:2853</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a59f74ca105cb5eeee03ab1fc9e6003df"><div class="ttname"><a href="c-api_8cc.html#a59f74ca105cb5eeee03ab1fc9e6003df">wasm_valtype_new</a></div><div class="ttdeci">wasm_valtype_t * wasm_valtype_new(wasm_valkind_t k)</div><div class="ttdef"><b>Definition</b> <a href="#l02765">c-api.cc:2765</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a5b3cdb8630394ccd9cdfd631e4d22a4a"><div class="ttname"><a href="c-api_8cc.html#a5b3cdb8630394ccd9cdfd631e4d22a4a">wasm_functype_params</a></div><div class="ttdeci">const wasm_valtype_vec_t * wasm_functype_params(const wasm_functype_t *ft)</div><div class="ttdef"><b>Definition</b> <a href="#l02783">c-api.cc:2783</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a5cc1c669b5446ad51cdfbec9157b5cd5"><div class="ttname"><a href="c-api_8cc.html#a5cc1c669b5446ad51cdfbec9157b5cd5">wasm_func_new_with_env</a></div><div class="ttdeci">wasm_func_t * wasm_func_new_with_env(wasm_store_t *store, const wasm_functype_t *type, wasm_func_callback_with_env_t callback, void *env, void(*finalizer)(void *))</div><div class="ttdef"><b>Definition</b> <a href="#l03308">c-api.cc:3308</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a5e049541c6e325d07e9364a25af4b8bc"><div class="ttname"><a href="c-api_8cc.html#a5e049541c6e325d07e9364a25af4b8bc">wasm_memory_as_extern_const</a></div><div class="ttdeci">const wasm_extern_t * wasm_memory_as_extern_const(const wasm_memory_t *memory)</div><div class="ttdef"><b>Definition</b> <a href="#l03452">c-api.cc:3452</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a5f58be229336ab32eeec2acd3a894c26"><div class="ttname"><a href="c-api_8cc.html#a5f58be229336ab32eeec2acd3a894c26">WASM_DEFINE_VEC_OWN</a></div><div class="ttdeci">#define WASM_DEFINE_VEC_OWN(name, Name)</div><div class="ttdef"><b>Definition</b> <a href="#l02645">c-api.cc:2645</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a60278ee39cb12039bdd52560f224ae33"><div class="ttname"><a href="c-api_8cc.html#a60278ee39cb12039bdd52560f224ae33">wasm_callback_env_finalizer</a></div><div class="ttdeci">void wasm_callback_env_finalizer(void *env)</div><div class="ttdef"><b>Definition</b> <a href="#l03294">c-api.cc:3294</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a626e08dc009811e6d80a3643a809e492"><div class="ttname"><a href="c-api_8cc.html#a626e08dc009811e6d80a3643a809e492">wasm_engine_new</a></div><div class="ttdeci">wasm_engine_t * wasm_engine_new()</div><div class="ttdef"><b>Definition</b> <a href="#l02692">c-api.cc:2692</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a658bc3525db7e8e62c179549bbedffad"><div class="ttname"><a href="c-api_8cc.html#a658bc3525db7e8e62c179549bbedffad">wasm_val_vec_copy</a></div><div class="ttdeci">void wasm_val_vec_copy(wasm_val_vec_t *out, const wasm_val_vec_t *v)</div><div class="ttdef"><b>Definition</b> <a href="#l03145">c-api.cc:3145</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a6816347bc4b96e4225e595479acbb1e0"><div class="ttname"><a href="c-api_8cc.html#a6816347bc4b96e4225e595479acbb1e0">wasm_memory_data_size</a></div><div class="ttdeci">size_t wasm_memory_data_size(const wasm_memory_t *memory)</div><div class="ttdef"><b>Definition</b> <a href="#l03406">c-api.cc:3406</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a688d650744191f2f8898a46517a1fe8a"><div class="ttname"><a href="c-api_8cc.html#a688d650744191f2f8898a46517a1fe8a">WASM_DEFINE_SHARABLE_REF</a></div><div class="ttdeci">#define WASM_DEFINE_SHARABLE_REF(name, Name)</div><div class="ttdef"><b>Definition</b> <a href="#l03016">c-api.cc:3016</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a6b52d895a129de565886aa9ff438e27a"><div class="ttname"><a href="c-api_8cc.html#a6b52d895a129de565886aa9ff438e27a">wasm_table_as_extern</a></div><div class="ttdeci">wasm_extern_t * wasm_table_as_extern(wasm_table_t *table)</div><div class="ttdef"><b>Definition</b> <a href="#l03436">c-api.cc:3436</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a6b944e4b4185070464bb9c4aaa0fc9fd"><div class="ttname"><a href="c-api_8cc.html#a6b944e4b4185070464bb9c4aaa0fc9fd">WASM_DEFINE_REF_BASE</a></div><div class="ttdeci">#define WASM_DEFINE_REF_BASE(name, Name)</div><div class="ttdef"><b>Definition</b> <a href="#l02976">c-api.cc:2976</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a6de2a875a6615bd03a532265abc80c61"><div class="ttname"><a href="c-api_8cc.html#a6de2a875a6615bd03a532265abc80c61">reveal_valkind</a></div><div class="ttdeci">auto reveal_valkind(wasm_valkind_t kind) -&gt; wasm::ValKind</div><div class="ttdef"><b>Definition</b> <a href="#l02736">c-api.cc:2736</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a7295123a8a9fa0dcd4f0211f59990965"><div class="ttname"><a href="c-api_8cc.html#a7295123a8a9fa0dcd4f0211f59990965">wasm_func_result_arity</a></div><div class="ttdeci">size_t wasm_func_result_arity(const wasm_func_t *func)</div><div class="ttdef"><b>Definition</b> <a href="#l03325">c-api.cc:3325</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a738cec7dc8e791a29eb9cdf91de370ec"><div class="ttname"><a href="c-api_8cc.html#a738cec7dc8e791a29eb9cdf91de370ec">wasm_func_param_arity</a></div><div class="ttdeci">size_t wasm_func_param_arity(const wasm_func_t *func)</div><div class="ttdef"><b>Definition</b> <a href="#l03321">c-api.cc:3321</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a73e2d8669836c58843f288d6e2d492da"><div class="ttname"><a href="c-api_8cc.html#a73e2d8669836c58843f288d6e2d492da">wasm_val_copy</a></div><div class="ttdeci">void wasm_val_copy(wasm_val_t *out, const wasm_val_t *v)</div><div class="ttdef"><b>Definition</b> <a href="#l03161">c-api.cc:3161</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a767afd952d63720fe30ce02b075ffd0f"><div class="ttname"><a href="c-api_8cc.html#a767afd952d63720fe30ce02b075ffd0f">wasm_externtype_as_functype</a></div><div class="ttdeci">wasm_functype_t * wasm_externtype_as_functype(wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02877">c-api.cc:2877</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a7cadf2e710da2b52d1362712f0dc73d8"><div class="ttname"><a href="c-api_8cc.html#a7cadf2e710da2b52d1362712f0dc73d8">wasm_memory_as_extern</a></div><div class="ttdeci">wasm_extern_t * wasm_memory_as_extern(wasm_memory_t *memory)</div><div class="ttdef"><b>Definition</b> <a href="#l03439">c-api.cc:3439</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a7cc462eef23d2a1d549c911abd6addc7"><div class="ttname"><a href="c-api_8cc.html#a7cc462eef23d2a1d549c911abd6addc7">wasm_func_type</a></div><div class="ttdeci">wasm_functype_t * wasm_func_type(const wasm_func_t *func)</div><div class="ttdef"><b>Definition</b> <a href="#l03317">c-api.cc:3317</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a7d2e15271d321398254efd1cc03535f6"><div class="ttname"><a href="c-api_8cc.html#a7d2e15271d321398254efd1cc03535f6">wasm_extern_as_func</a></div><div class="ttdeci">wasm_func_t * wasm_extern_as_func(wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03456">c-api.cc:3456</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a7e99ab12f0b03016ee0eda543f72be95"><div class="ttname"><a href="c-api_8cc.html#a7e99ab12f0b03016ee0eda543f72be95">wasm_global_new</a></div><div class="ttdeci">wasm_global_t * wasm_global_new(wasm_store_t *store, const wasm_globaltype_t *type, const wasm_val_t *val)</div><div class="ttdef"><b>Definition</b> <a href="#l03340">c-api.cc:3340</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a81a7c77e254bfe4b3a448c0d210ccaad"><div class="ttname"><a href="c-api_8cc.html#a81a7c77e254bfe4b3a448c0d210ccaad">wasm_globaltype_as_externtype</a></div><div class="ttdeci">wasm_externtype_t * wasm_globaltype_as_externtype(wasm_globaltype_t *gt)</div><div class="ttdef"><b>Definition</b> <a href="#l02850">c-api.cc:2850</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a84aa9320d74d517aa684d5c0afb498c3"><div class="ttname"><a href="c-api_8cc.html#a84aa9320d74d517aa684d5c0afb498c3">wasm_module_share</a></div><div class="ttdeci">wasm_shared_module_t * wasm_module_share(const wasm_module_t *module)</div><div class="ttdef"><b>Definition</b> <a href="#l03259">c-api.cc:3259</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a85c5d13c31f6803a828f8f432db8f8a9"><div class="ttname"><a href="c-api_8cc.html#a85c5d13c31f6803a828f8f432db8f8a9">reveal_externkind</a></div><div class="ttdeci">auto reveal_externkind(wasm_externkind_t kind) -&gt; wasm::ExternKind</div><div class="ttdef"><b>Definition</b> <a href="#l02745">c-api.cc:2745</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a8dae1caf5613751c386e118a72e83dd3"><div class="ttname"><a href="c-api_8cc.html#a8dae1caf5613751c386e118a72e83dd3">wasm_global_set</a></div><div class="ttdeci">void wasm_global_set(wasm_global_t *global, const wasm_val_t *val)</div><div class="ttdef"><b>Definition</b> <a href="#l03355">c-api.cc:3355</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a928e211baa4828b457786878250c9c2c"><div class="ttname"><a href="c-api_8cc.html#a928e211baa4828b457786878250c9c2c">wasm_instance_exports</a></div><div class="ttdeci">void wasm_instance_exports(const wasm_instance_t *instance, wasm_extern_vec_t *out)</div><div class="ttdef"><b>Definition</b> <a href="#l03510">c-api.cc:3510</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a92d4c802b88736a79a084405eeae02b8"><div class="ttname"><a href="c-api_8cc.html#a92d4c802b88736a79a084405eeae02b8">wasm_importtype_name</a></div><div class="ttdeci">const wasm_name_t * wasm_importtype_name(const wasm_importtype_t *it)</div><div class="ttdef"><b>Definition</b> <a href="#l02945">c-api.cc:2945</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a939104250ac0b71453e289e949bfae99"><div class="ttname"><a href="c-api_8cc.html#a939104250ac0b71453e289e949bfae99">wasm_exporttype_new</a></div><div class="ttdeci">wasm_exporttype_t * wasm_exporttype_new(wasm_name_t *name, wasm_externtype_t *type)</div><div class="ttdef"><b>Definition</b> <a href="#l02957">c-api.cc:2957</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a942277a64879d1c0ec6abbaef58cb0b7"><div class="ttname"><a href="c-api_8cc.html#a942277a64879d1c0ec6abbaef58cb0b7">wasm_extern_as_table</a></div><div class="ttdeci">wasm_table_t * wasm_extern_as_table(wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03462">c-api.cc:3462</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a943fb2df1d6e013352d3026073f0a3c7"><div class="ttname"><a href="c-api_8cc.html#a943fb2df1d6e013352d3026073f0a3c7">wasm_externtype_as_globaltype</a></div><div class="ttdeci">wasm_globaltype_t * wasm_externtype_as_globaltype(wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02883">c-api.cc:2883</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a9461f8c3fffb7b6a6ff5facfcb5d2379"><div class="ttname"><a href="c-api_8cc.html#a9461f8c3fffb7b6a6ff5facfcb5d2379">wasm_global_type</a></div><div class="ttdeci">wasm_globaltype_t * wasm_global_type(const wasm_global_t *global)</div><div class="ttdef"><b>Definition</b> <a href="#l03347">c-api.cc:3347</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a9704f40000e2b525bb5a2a386ae21cd9"><div class="ttname"><a href="c-api_8cc.html#a9704f40000e2b525bb5a2a386ae21cd9">wasm_engine_new_with_config</a></div><div class="ttdeci">wasm_engine_t * wasm_engine_new_with_config(wasm_config_t *config)</div><div class="ttdef"><b>Definition</b> <a href="#l02696">c-api.cc:2696</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a98d60a3a970782a8bea2731292c686b3"><div class="ttname"><a href="c-api_8cc.html#a98d60a3a970782a8bea2731292c686b3">wasm_global_as_extern</a></div><div class="ttdeci">wasm_extern_t * wasm_global_as_extern(wasm_global_t *global)</div><div class="ttdef"><b>Definition</b> <a href="#l03433">c-api.cc:3433</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a9cea472878006df68b513e27db767ae0"><div class="ttname"><a href="c-api_8cc.html#a9cea472878006df68b513e27db767ae0">wasm_func_as_extern_const</a></div><div class="ttdeci">const wasm_extern_t * wasm_func_as_extern_const(const wasm_func_t *func)</div><div class="ttdef"><b>Definition</b> <a href="#l03443">c-api.cc:3443</a></div></div>
<div class="ttc" id="ac-api_8cc_html_a9d5ef81cf5add9aa575b8428fafcb2dd"><div class="ttname"><a href="c-api_8cc.html#a9d5ef81cf5add9aa575b8428fafcb2dd">wasm_memory_grow</a></div><div class="ttdeci">bool wasm_memory_grow(wasm_memory_t *memory, wasm_memory_pages_t delta)</div><div class="ttdef"><b>Definition</b> <a href="#l03414">c-api.cc:3414</a></div></div>
<div class="ttc" id="ac-api_8cc_html_aa1b6825e30497a94b1b576ef7848b42e"><div class="ttname"><a href="c-api_8cc.html#aa1b6825e30497a94b1b576ef7848b42e">wasm_table_size</a></div><div class="ttdeci">wasm_table_size_t wasm_table_size(const wasm_table_t *table)</div><div class="ttdef"><b>Definition</b> <a href="#l03382">c-api.cc:3382</a></div></div>
<div class="ttc" id="ac-api_8cc_html_aa34e708f8370e17fd98c4a0aef282bb3"><div class="ttname"><a href="c-api_8cc.html#aa34e708f8370e17fd98c4a0aef282bb3">wasm_externtype_as_memorytype</a></div><div class="ttdeci">wasm_memorytype_t * wasm_externtype_as_memorytype(wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02895">c-api.cc:2895</a></div></div>
<div class="ttc" id="ac-api_8cc_html_aa3fc45d6ba67d1e451e5e5e72c23e9c2"><div class="ttname"><a href="c-api_8cc.html#aa3fc45d6ba67d1e451e5e5e72c23e9c2">wasm_callback</a></div><div class="ttdeci">auto wasm_callback(void *env, const wasm::vec&lt; wasm::Val &gt; &amp;args, wasm::vec&lt; wasm::Val &gt; &amp;results) -&gt; wasm::own&lt; wasm::Trap &gt;</div><div class="ttdef"><b>Definition</b> <a href="#l03274">c-api.cc:3274</a></div></div>
<div class="ttc" id="ac-api_8cc_html_aa842bff3c7cfc4d2c7a1880a0a76d0e2"><div class="ttname"><a href="c-api_8cc.html#aa842bff3c7cfc4d2c7a1880a0a76d0e2">wasm_module_exports</a></div><div class="ttdeci">void wasm_module_exports(const wasm_module_t *module, wasm_exporttype_vec_t *out)</div><div class="ttdef"><b>Definition</b> <a href="#l03244">c-api.cc:3244</a></div></div>
<div class="ttc" id="ac-api_8cc_html_aae13dc42332a97000608066af22d63e1"><div class="ttname"><a href="c-api_8cc.html#aae13dc42332a97000608066af22d63e1">wasm_module_new</a></div><div class="ttdeci">wasm_module_t * wasm_module_new(wasm_store_t *store, const wasm_byte_vec_t *binary)</div><div class="ttdef"><b>Definition</b> <a href="#l03233">c-api.cc:3233</a></div></div>
<div class="ttc" id="ac-api_8cc_html_aae984d80135eda7ce4a03a12e70adf0c"><div class="ttname"><a href="c-api_8cc.html#aae984d80135eda7ce4a03a12e70adf0c">wasm_global_get</a></div><div class="ttdeci">void wasm_global_get(const wasm_global_t *global, wasm_val_t *out)</div><div class="ttdef"><b>Definition</b> <a href="#l03351">c-api.cc:3351</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ab0893cd64af83f565c0aa67da7aa4565"><div class="ttname"><a href="c-api_8cc.html#ab0893cd64af83f565c0aa67da7aa4565">wasm_foreign_new</a></div><div class="ttdeci">wasm_foreign_t * wasm_foreign_new(wasm_store_t *store)</div><div class="ttdef"><b>Definition</b> <a href="#l03220">c-api.cc:3220</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ab1e601f8682a6cdcf084456a11268eb2"><div class="ttname"><a href="c-api_8cc.html#ab1e601f8682a6cdcf084456a11268eb2">wasm_table_set</a></div><div class="ttdeci">bool wasm_table_set(wasm_table_t *table, wasm_table_size_t index, wasm_ref_t *ref)</div><div class="ttdef"><b>Definition</b> <a href="#l03377">c-api.cc:3377</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ab5a09dedbe905ff35a562323f9b40ab9"><div class="ttname"><a href="c-api_8cc.html#ab5a09dedbe905ff35a562323f9b40ab9">wasm_exporttype_type</a></div><div class="ttdeci">const wasm_externtype_t * wasm_exporttype_type(const wasm_exporttype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02967">c-api.cc:2967</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ab80fa049e17f19d3051ba78bcccdbbc9"><div class="ttname"><a href="c-api_8cc.html#ab80fa049e17f19d3051ba78bcccdbbc9">WASM_EXPORT</a></div><div class="ttdeci">#define WASM_EXPORT</div><div class="ttdef"><b>Definition</b> <a href="#l00073">c-api.cc:73</a></div></div>
<div class="ttc" id="ac-api_8cc_html_abba5db612bb7add8bef26792904aa0e0"><div class="ttname"><a href="c-api_8cc.html#abba5db612bb7add8bef26792904aa0e0">wasm_table_grow</a></div><div class="ttdeci">bool wasm_table_grow(wasm_table_t *table, wasm_table_size_t delta, wasm_ref_t *ref)</div><div class="ttdef"><b>Definition</b> <a href="#l03386">c-api.cc:3386</a></div></div>
<div class="ttc" id="ac-api_8cc_html_abbe587923ab70a1b70e543231dd83cc1"><div class="ttname"><a href="c-api_8cc.html#abbe587923ab70a1b70e543231dd83cc1">wasm_config_new</a></div><div class="ttdeci">wasm_config_t * wasm_config_new()</div><div class="ttdef"><b>Definition</b> <a href="#l02684">c-api.cc:2684</a></div></div>
<div class="ttc" id="ac-api_8cc_html_abc8096f5abfbbbc66f96bf31066dab6c"><div class="ttname"><a href="c-api_8cc.html#abc8096f5abfbbbc66f96bf31066dab6c">wasm_externtype_as_globaltype_const</a></div><div class="ttdeci">const wasm_globaltype_t * wasm_externtype_as_globaltype_const(const wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02909">c-api.cc:2909</a></div></div>
<div class="ttc" id="ac-api_8cc_html_abca246cf75f7feec9dcabfc341d1f3ad"><div class="ttname"><a href="c-api_8cc.html#abca246cf75f7feec9dcabfc341d1f3ad">wasm_tabletype_element</a></div><div class="ttdeci">const wasm_valtype_t * wasm_tabletype_element(const wasm_tabletype_t *tt)</div><div class="ttdef"><b>Definition</b> <a href="#l02819">c-api.cc:2819</a></div></div>
<div class="ttc" id="ac-api_8cc_html_abf85f8537d03797e69ee704548db8237"><div class="ttname"><a href="c-api_8cc.html#abf85f8537d03797e69ee704548db8237">wasm_memorytype_new</a></div><div class="ttdeci">wasm_memorytype_t * wasm_memorytype_new(const wasm_limits_t *limits)</div><div class="ttdef"><b>Definition</b> <a href="#l02831">c-api.cc:2831</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ac04e1565fa85f13dc5ae082f4e9d0c6c"><div class="ttname"><a href="c-api_8cc.html#ac04e1565fa85f13dc5ae082f4e9d0c6c">wasm_globaltype_new</a></div><div class="ttdeci">wasm_globaltype_t * wasm_globaltype_new(wasm_valtype_t *content, wasm_mutability_t mutability)</div><div class="ttdef"><b>Definition</b> <a href="#l02795">c-api.cc:2795</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ac1896fb3b18052f41e518d693f7e695e"><div class="ttname"><a href="c-api_8cc.html#ac1896fb3b18052f41e518d693f7e695e">wasm_functype_new</a></div><div class="ttdeci">wasm_functype_t * wasm_functype_new(wasm_valtype_vec_t *params, wasm_valtype_vec_t *results)</div><div class="ttdef"><b>Definition</b> <a href="#l02777">c-api.cc:2777</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ac4e7226de6f20b88baa2d861de68561d"><div class="ttname"><a href="c-api_8cc.html#ac4e7226de6f20b88baa2d861de68561d">wasm_instance_new</a></div><div class="ttdeci">WASM_API_EXTERN wasm_instance_t * wasm_instance_new(wasm_store_t *store, const wasm_module_t *module, const wasm_extern_vec_t *imports, wasm_trap_t **trap)</div><div class="ttdef"><b>Definition</b> <a href="#l03488">c-api.cc:3488</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ac5d292a3675a7dcb0633e9544bbcf721"><div class="ttname"><a href="c-api_8cc.html#ac5d292a3675a7dcb0633e9544bbcf721">wasm_module_serialize</a></div><div class="ttdeci">void wasm_module_serialize(const wasm_module_t *module, wasm_byte_vec_t *out)</div><div class="ttdef"><b>Definition</b> <a href="#l03249">c-api.cc:3249</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ac87988a958e7fe827044dbfe5ae35c8e"><div class="ttname"><a href="c-api_8cc.html#ac87988a958e7fe827044dbfe5ae35c8e">wasm_func_as_extern</a></div><div class="ttdeci">wasm_extern_t * wasm_func_as_extern(wasm_func_t *func)</div><div class="ttdef"><b>Definition</b> <a href="#l03430">c-api.cc:3430</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ac8be4f9b28bfd3762c27c8a345eea71b"><div class="ttname"><a href="c-api_8cc.html#ac8be4f9b28bfd3762c27c8a345eea71b">wasm_val_delete</a></div><div class="ttdeci">void wasm_val_delete(wasm_val_t *v)</div><div class="ttdef"><b>Definition</b> <a href="#l03155">c-api.cc:3155</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ac94f0ab4a90ba63326d134a3d66d0a1c"><div class="ttname"><a href="c-api_8cc.html#ac94f0ab4a90ba63326d134a3d66d0a1c">wasm_extern_type</a></div><div class="ttdeci">wasm_externtype_t * wasm_extern_type(const wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03426">c-api.cc:3426</a></div></div>
<div class="ttc" id="ac-api_8cc_html_acba2a1056e406ae0ef9289ad1bb51ffe"><div class="ttname"><a href="c-api_8cc.html#acba2a1056e406ae0ef9289ad1bb51ffe">wasm_importtype_new</a></div><div class="ttdeci">wasm_importtype_t * wasm_importtype_new(wasm_name_t *module, wasm_name_t *name, wasm_externtype_t *type)</div><div class="ttdef"><b>Definition</b> <a href="#l02935">c-api.cc:2935</a></div></div>
<div class="ttc" id="ac-api_8cc_html_acee384096f46ae596b693669bba109bc"><div class="ttname"><a href="c-api_8cc.html#acee384096f46ae596b693669bba109bc">wasm_extern_as_memory</a></div><div class="ttdeci">wasm_memory_t * wasm_extern_as_memory(wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03465">c-api.cc:3465</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ad0e282438565266f0df1197e03f258ac"><div class="ttname"><a href="c-api_8cc.html#ad0e282438565266f0df1197e03f258ac">release_val</a></div><div class="ttdeci">auto release_val(wasm::Val v) -&gt; wasm_val_t</div><div class="ttdef"><b>Definition</b> <a href="#l03055">c-api.cc:3055</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ad19539609721c28046cbd0ea288064cf"><div class="ttname"><a href="c-api_8cc.html#ad19539609721c28046cbd0ea288064cf">wasm_extern_as_table_const</a></div><div class="ttdeci">const wasm_table_t * wasm_extern_as_table_const(const wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03476">c-api.cc:3476</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ad2780fbe34f0de4ddbb5e1d2da53f7a3"><div class="ttname"><a href="c-api_8cc.html#ad2780fbe34f0de4ddbb5e1d2da53f7a3">wasm_func_new</a></div><div class="ttdeci">wasm_func_t * wasm_func_new(wasm_store_t *store, const wasm_functype_t *type, wasm_func_callback_t callback)</div><div class="ttdef"><b>Definition</b> <a href="#l03302">c-api.cc:3302</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ad29b1c53c6535050cf59a8cae8fddb2a"><div class="ttname"><a href="c-api_8cc.html#ad29b1c53c6535050cf59a8cae8fddb2a">wasm_externtype_as_memorytype_const</a></div><div class="ttdeci">const wasm_memorytype_t * wasm_externtype_as_memorytype_const(const wasm_externtype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02923">c-api.cc:2923</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ad49689a4bf2209df074c62eab10647c7"><div class="ttname"><a href="c-api_8cc.html#ad49689a4bf2209df074c62eab10647c7">wasm_tabletype_new</a></div><div class="ttdeci">wasm_tabletype_t * wasm_tabletype_new(wasm_valtype_t *element, const wasm_limits_t *limits)</div><div class="ttdef"><b>Definition</b> <a href="#l02813">c-api.cc:2813</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ad7182f1e0910c6f821082e72d5d8200c"><div class="ttname"><a href="c-api_8cc.html#ad7182f1e0910c6f821082e72d5d8200c">wasm_trap_new</a></div><div class="ttdeci">wasm_trap_t * wasm_trap_new(wasm_store_t *store, const wasm_message_t *message)</div><div class="ttdef"><b>Definition</b> <a href="#l03199">c-api.cc:3199</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ada4dbe9e681f8774cc4c4650f0a5b8a5"><div class="ttname"><a href="c-api_8cc.html#ada4dbe9e681f8774cc4c4650f0a5b8a5">wasm_memory_type</a></div><div class="ttdeci">wasm_memorytype_t * wasm_memory_type(const wasm_memory_t *memory)</div><div class="ttdef"><b>Definition</b> <a href="#l03400">c-api.cc:3400</a></div></div>
<div class="ttc" id="ac-api_8cc_html_adb168c641275034d540c585e2d714a88"><div class="ttname"><a href="c-api_8cc.html#adb168c641275034d540c585e2d714a88">wasm_tabletype_limits</a></div><div class="ttdeci">const wasm_limits_t * wasm_tabletype_limits(const wasm_tabletype_t *tt)</div><div class="ttdef"><b>Definition</b> <a href="#l02823">c-api.cc:2823</a></div></div>
<div class="ttc" id="ac-api_8cc_html_adb4baa18c6ec4996dd37034a906734e2"><div class="ttname"><a href="c-api_8cc.html#adb4baa18c6ec4996dd37034a906734e2">wasm_valtype_kind</a></div><div class="ttdeci">wasm_valkind_t wasm_valtype_kind(const wasm_valtype_t *t)</div><div class="ttdef"><b>Definition</b> <a href="#l02769">c-api.cc:2769</a></div></div>
<div class="ttc" id="ac-api_8cc_html_adc5fc5dcdf2245f204fdeb8d45ce506c"><div class="ttname"><a href="c-api_8cc.html#adc5fc5dcdf2245f204fdeb8d45ce506c">hide_externkind</a></div><div class="ttdeci">auto hide_externkind(wasm::ExternKind kind) -&gt; wasm_externkind_t</div><div class="ttdef"><b>Definition</b> <a href="#l02740">c-api.cc:2740</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ade5babc8f2c61877aae1e7ba3f6fb152"><div class="ttname"><a href="c-api_8cc.html#ade5babc8f2c61877aae1e7ba3f6fb152">WASM_DEFINE_OWN</a></div><div class="ttdeci">#define WASM_DEFINE_OWN(name, Name)</div><div class="ttdef"><b>Definition</b> <a href="#l02507">c-api.cc:2507</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ade982c0b7a9217b00ca8d0a032f66619"><div class="ttname"><a href="c-api_8cc.html#ade982c0b7a9217b00ca8d0a032f66619">hide_limits</a></div><div class="ttdeci">auto hide_limits(const wasm::Limits &amp;limits) -&gt; const wasm_limits_t *</div><div class="ttdef"><b>Definition</b> <a href="#l02723">c-api.cc:2723</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ae1a599d49b3c2766fb5420776357b503"><div class="ttname"><a href="c-api_8cc.html#ae1a599d49b3c2766fb5420776357b503">wasm_exporttype_name</a></div><div class="ttdeci">const wasm_name_t * wasm_exporttype_name(const wasm_exporttype_t *et)</div><div class="ttdef"><b>Definition</b> <a href="#l02963">c-api.cc:2963</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ae3a80d791b78ec7236fc93d7901f9a15"><div class="ttname"><a href="c-api_8cc.html#ae3a80d791b78ec7236fc93d7901f9a15">wasm_frame_instance</a></div><div class="ttdeci">wasm_instance_t * wasm_frame_instance(const wasm_frame_t *frame)</div><div class="ttdef"><b>Definition</b> <a href="#l03515">c-api.cc:3515</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ae6cfcc5a077be11c23c87eb49374ed53"><div class="ttname"><a href="c-api_8cc.html#ae6cfcc5a077be11c23c87eb49374ed53">wasm_trap_origin</a></div><div class="ttdeci">wasm_frame_t * wasm_trap_origin(const wasm_trap_t *trap)</div><div class="ttdef"><b>Definition</b> <a href="#l03208">c-api.cc:3208</a></div></div>
<div class="ttc" id="ac-api_8cc_html_ae9920ec9c1c6cf74c9cd67517eaecd51"><div class="ttname"><a href="c-api_8cc.html#ae9920ec9c1c6cf74c9cd67517eaecd51">wasm_frame_func_offset</a></div><div class="ttdeci">size_t wasm_frame_func_offset(const wasm_frame_t *frame)</div><div class="ttdef"><b>Definition</b> <a href="#l03187">c-api.cc:3187</a></div></div>
<div class="ttc" id="ac-api_8cc_html_aec744ea9ac3c538bdbdcf76f23a56653"><div class="ttname"><a href="c-api_8cc.html#aec744ea9ac3c538bdbdcf76f23a56653">hide_mutability</a></div><div class="ttdeci">auto hide_mutability(wasm::Mutability mutability) -&gt; wasm_mutability_t</div><div class="ttdef"><b>Definition</b> <a href="#l02713">c-api.cc:2713</a></div></div>
<div class="ttc" id="ac-api_8cc_html_af01e6b7bb80985e6dfcda8fcd162782b"><div class="ttname"><a href="c-api_8cc.html#af01e6b7bb80985e6dfcda8fcd162782b">WASM_DEFINE_TYPE</a></div><div class="ttdeci">#define WASM_DEFINE_TYPE(name, Name)</div><div class="ttdef"><b>Definition</b> <a href="#l02752">c-api.cc:2752</a></div></div>
<div class="ttc" id="ac-api_8cc_html_af22bb2e74019dcb85af859ccc8f50d94"><div class="ttname"><a href="c-api_8cc.html#af22bb2e74019dcb85af859ccc8f50d94">wasm_callback_with_env</a></div><div class="ttdeci">auto wasm_callback_with_env(void *env, const wasm::vec&lt; wasm::Val &gt; &amp;args, wasm::vec&lt; wasm::Val &gt; &amp;results) -&gt; wasm::own&lt; wasm::Trap &gt;</div><div class="ttdef"><b>Definition</b> <a href="#l03286">c-api.cc:3286</a></div></div>
<div class="ttc" id="ac-api_8cc_html_af5a640d33201ac2756a8d934a42d6454"><div class="ttname"><a href="c-api_8cc.html#af5a640d33201ac2756a8d934a42d6454">wasm_functype_results</a></div><div class="ttdeci">const wasm_valtype_vec_t * wasm_functype_results(const wasm_functype_t *ft)</div><div class="ttdef"><b>Definition</b> <a href="#l02787">c-api.cc:2787</a></div></div>
<div class="ttc" id="ac-api_8cc_html_af852a706221a390100b31da9b54d1ea2"><div class="ttname"><a href="c-api_8cc.html#af852a706221a390100b31da9b54d1ea2">wasm_trap_trace</a></div><div class="ttdeci">void wasm_trap_trace(const wasm_trap_t *trap, wasm_frame_vec_t *out)</div><div class="ttdef"><b>Definition</b> <a href="#l03212">c-api.cc:3212</a></div></div>
<div class="ttc" id="ac-api_8cc_html_af8648884e53216dbfbdc800097b3f870"><div class="ttname"><a href="c-api_8cc.html#af8648884e53216dbfbdc800097b3f870">wasm_memorytype_as_externtype</a></div><div class="ttdeci">wasm_externtype_t * wasm_memorytype_as_externtype(wasm_memorytype_t *mt)</div><div class="ttdef"><b>Definition</b> <a href="#l02856">c-api.cc:2856</a></div></div>
<div class="ttc" id="ac-api_8cc_html_af9b60e0ed44bf5a12f638281012c29ee"><div class="ttname"><a href="c-api_8cc.html#af9b60e0ed44bf5a12f638281012c29ee">wasm_extern_as_global_const</a></div><div class="ttdeci">const wasm_global_t * wasm_extern_as_global_const(const wasm_extern_t *external)</div><div class="ttdef"><b>Definition</b> <a href="#l03472">c-api.cc:3472</a></div></div>
<div class="ttc" id="ac-api_8cc_html_afbcffd5875e2e765341d7107f0275b5c"><div class="ttname"><a href="c-api_8cc.html#afbcffd5875e2e765341d7107f0275b5c">wasm_frame_module_offset</a></div><div class="ttdeci">size_t wasm_frame_module_offset(const wasm_frame_t *frame)</div><div class="ttdef"><b>Definition</b> <a href="#l03191">c-api.cc:3191</a></div></div>
<div class="ttc" id="ac-api_8cc_html_afc266285cffcc4e093100c3536b17819"><div class="ttname"><a href="c-api_8cc.html#afc266285cffcc4e093100c3536b17819">wasm_table_as_extern_const</a></div><div class="ttdeci">const wasm_extern_t * wasm_table_as_extern_const(const wasm_table_t *table)</div><div class="ttdef"><b>Definition</b> <a href="#l03449">c-api.cc:3449</a></div></div>
<div class="ttc" id="ac-api_8cc_html_afccc93165ba1134660e8d5adf2c8bafa"><div class="ttname"><a href="c-api_8cc.html#afccc93165ba1134660e8d5adf2c8bafa">wasm_frame_copy</a></div><div class="ttdeci">wasm_frame_t * wasm_frame_copy(const wasm_frame_t *frame)</div><div class="ttdef"><b>Definition</b> <a href="#l03176">c-api.cc:3176</a></div></div>
<div class="ttc" id="ac-api_8cc_html_afd2700dd29447e2b36d804e32ca75c63"><div class="ttname"><a href="c-api_8cc.html#afd2700dd29447e2b36d804e32ca75c63">wasm_module_deserialize</a></div><div class="ttdeci">wasm_module_t * wasm_module_deserialize(wasm_store_t *store, const wasm_byte_vec_t *binary)</div><div class="ttdef"><b>Definition</b> <a href="#l03253">c-api.cc:3253</a></div></div>
<div class="ttc" id="ac-api_8h_html"><div class="ttname"><a href="c-api_8h.html">c-api.h</a></div></div>
<div class="ttc" id="acall-site-info-inl_8h_html"><div class="ttname"><a href="call-site-info-inl_8h.html">call-site-info-inl.h</a></div></div>
<div class="ttc" id="acheck_8h_html_aee78f6fbdf206be23e949191f9408e4b"><div class="ttname"><a href="check_8h.html#aee78f6fbdf206be23e949191f9408e4b">SBXCHECK</a></div><div class="ttdeci">#define SBXCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="check_8h_source.html#l00060">check.h:60</a></div></div>
<div class="ttc" id="aclass-debug-reader-generator_8cc_html_aede818ff693a0360e722300214ad6a52"><div class="ttname"><a href="class-debug-reader-generator_8cc.html#aede818ff693a0360e722300214ad6a52">pos</a></div><div class="ttdeci">SourcePosition pos</div><div class="ttdef"><b>Definition</b> <a href="class-debug-reader-generator_8cc_source.html#l00034">class-debug-reader-generator.cc:34</a></div></div>
<div class="ttc" id="aclassparams_html"><div class="ttname"><a href="classparams.html">params</a></div></div>
<div class="ttc" id="aclasssize_html"><div class="ttname"><a href="classsize.html">size</a></div></div>
<div class="ttc" id="aclassv8_1_1Utils_html_a5bbbf1336cd2ac62f7ab5014210ecf2e"><div class="ttname"><a href="classv8_1_1Utils.html#a5bbbf1336cd2ac62f7ab5014210ecf2e">v8::Utils::OpenDirectHandle</a></div><div class="ttdeci">static v8::internal::DirectHandle&lt; To &gt; OpenDirectHandle(v8::Local&lt; From &gt; handle)</div><div class="ttdef"><b>Definition</b> <a href="api_8h_source.html#l00279">api.h:279</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1OwnedVector_html"><div class="ttname"><a href="classv8_1_1base_1_1OwnedVector.html">v8::base::OwnedVector</a></div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00209">vector.h:209</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html">v8::base::Vector</a></div><div class="ttdef"><b>Definition</b> <a href="zone-list_8h_source.html#l00015">zone-list.h:15</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a1eb4ed5d322a219428bdb9f9a2cb6708"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a1eb4ed5d322a219428bdb9f9a2cb6708">v8::base::Vector::length</a></div><div class="ttdeci">int length() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00064">vector.h:64</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_a8f91dff816409fb9bceaa94c6caeec32"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#a8f91dff816409fb9bceaa94c6caeec32">v8::base::Vector::size</a></div><div class="ttdeci">constexpr size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00070">vector.h:70</a></div></div>
<div class="ttc" id="aclassv8_1_1base_1_1Vector_html_ad0021e2947c974d78adbbc1d543d43a5"><div class="ttname"><a href="classv8_1_1base_1_1Vector.html#ad0021e2947c974d78adbbc1d543d43a5">v8::base::Vector::begin</a></div><div class="ttdeci">constexpr T * begin() const</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00096">vector.h:96</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1AllStatic_html"><div class="ttname"><a href="classv8_1_1internal_1_1AllStatic.html">v8::internal::AllStatic</a></div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00356">globals.h:356</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1DirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1DirectHandle.html">v8::internal::DirectHandle</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00643">handles.h:652</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a19e8ee75966089abf438ee18a9b67381"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a19e8ee75966089abf438ee18a9b67381">v8::internal::Factory::isolate</a></div><div class="ttdeci">Isolate * isolate() const</div><div class="ttdef"><b>Definition</b> <a href="factory_8h_source.html#l01262">factory.h:1262</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Factory_html_a23a89e88ffc74afa093c7167f1e986a8"><div class="ttname"><a href="classv8_1_1internal_1_1Factory.html#a23a89e88ffc74afa093c7167f1e986a8">v8::internal::Factory::NewJSWeakMap</a></div><div class="ttdeci">Handle&lt; JSWeakMap &gt; NewJSWeakMap()</div><div class="ttdef"><b>Definition</b> <a href="factory_8cc_source.html#l03304">factory.cc:3304</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1GlobalHandles_html_a486c475da54faf1fe78e4752ed20e23c"><div class="ttname"><a href="classv8_1_1internal_1_1GlobalHandles.html#a486c475da54faf1fe78e4752ed20e23c">v8::internal::GlobalHandles::Create</a></div><div class="ttdeci">IndirectHandle&lt; Object &gt; Create(Tagged&lt; Object &gt; value)</div><div class="ttdef"><b>Definition</b> <a href="global-handles_8cc_source.html#l00624">global-handles.cc:624</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1HandleScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1HandleScope.html">v8::internal::HandleScope</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00258">handles.h:258</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Handle_html"><div class="ttname"><a href="classv8_1_1internal_1_1Handle.html">v8::internal::Handle</a></div><div class="ttdef"><b>Definition</b> <a href="handles_8h_source.html#l00145">handles.h:145</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Heap_html_a136b1df73e0d77879104b2125d06bfbb"><div class="ttname"><a href="classv8_1_1internal_1_1Heap.html#a136b1df73e0d77879104b2125d06bfbb">v8::internal::Heap::PreciseCollectAllGarbage</a></div><div class="ttdeci">V8_EXPORT_PRIVATE void PreciseCollectAllGarbage(GCFlags gc_flags, GarbageCollectionReason gc_reason, const GCCallbackFlags gc_callback_flags=kNoGCCallbackFlags)</div><div class="ttdef"><b>Definition</b> <a href="heap_8cc_source.html#l01418">heap.cc:1418</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html">v8::internal::Isolate</a></div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l00575">isolate.h:575</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a0567c99c2a3ff016df9e7abb30688075"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a0567c99c2a3ff016df9e7abb30688075">v8::internal::Isolate::global_handles</a></div><div class="ttdeci">GlobalHandles * global_handles() const</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01405">isolate.h:1405</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_a8f158e28d6a29d8bf8459c45ba5e40c2"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#a8f158e28d6a29d8bf8459c45ba5e40c2">v8::internal::Isolate::heap</a></div><div class="ttdeci">Heap * heap()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01188">isolate.h:1188</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Isolate_html_ab7dd326c7e0e0d5d2cba90947b2ef48b"><div class="ttname"><a href="classv8_1_1internal_1_1Isolate.html#ab7dd326c7e0e0d5d2cba90947b2ef48b">v8::internal::Isolate::factory</a></div><div class="ttdeci">v8::internal::Factory * factory()</div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l01517">isolate.h:1517</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1LookupIterator_html"><div class="ttname"><a href="classv8_1_1internal_1_1LookupIterator.html">v8::internal::LookupIterator</a></div><div class="ttdef"><b>Definition</b> <a href="lookup_8h_source.html#l00057">lookup.h:57</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Managed_html"><div class="ttname"><a href="classv8_1_1internal_1_1Managed.html">v8::internal::Managed</a></div><div class="ttdef"><b>Definition</b> <a href="wasm-objects_8h_source.html#l00067">wasm-objects.h:67</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html">v8::internal::MaybeDirectHandle</a></div><div class="ttdef"><b>Definition</b> <a href="maybe-handles_8h_source.html#l00239">maybe-handles.h:239</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeDirectHandle_html_a76857e813e1bdb19bbb3cbbfad729f1c"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeDirectHandle.html#a76857e813e1bdb19bbb3cbbfad729f1c">v8::internal::MaybeDirectHandle::ToHandle</a></div><div class="ttdeci">V8_WARN_UNUSED_RESULT V8_INLINE bool ToHandle(DirectHandle&lt; S &gt; *out) const</div><div class="ttdef"><b>Definition</b> <a href="maybe-handles_8h_source.html#l00275">maybe-handles.h:275</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeHandle_html"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeHandle.html">v8::internal::MaybeHandle</a></div><div class="ttdef"><b>Definition</b> <a href="maybe-handles_8h_source.html#l00028">maybe-handles.h:28</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeHandle_html_a159acedd790dff56dbcc03792674e232"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeHandle.html#a159acedd790dff56dbcc03792674e232">v8::internal::MaybeHandle::ToHandleChecked</a></div><div class="ttdeci">V8_INLINE Handle&lt; T &gt; ToHandleChecked() const</div><div class="ttdef"><b>Definition</b> <a href="maybe-handles_8h_source.html#l00055">maybe-handles.h:55</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1MaybeHandle_html_a76d0200bf11d6f7628c7119d730efa44"><div class="ttname"><a href="classv8_1_1internal_1_1MaybeHandle.html#a76d0200bf11d6f7628c7119d730efa44">v8::internal::MaybeHandle::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdef"><b>Definition</b> <a href="maybe-handles_8h_source.html#l00086">maybe-handles.h:86</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1PtrComprCageAccessScope_html"><div class="ttname"><a href="classv8_1_1internal_1_1PtrComprCageAccessScope.html">v8::internal::PtrComprCageAccessScope</a></div><div class="ttdef"><b>Definition</b> <a href="ptr-compr_8h_source.html#l00217">ptr-compr.h:217</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1StackLimitCheck_html"><div class="ttname"><a href="classv8_1_1internal_1_1StackLimitCheck.html">v8::internal::StackLimitCheck</a></div><div class="ttdef"><b>Definition</b> <a href="execution_2isolate_8h_source.html#l02954">isolate.h:2954</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1TaggedImpl_html_a04c1b715ba67f397a5a6607d054d9c4c"><div class="ttname"><a href="classv8_1_1internal_1_1TaggedImpl.html#a04c1b715ba67f397a5a6607d054d9c4c">v8::internal::TaggedImpl::ptr</a></div><div class="ttdeci">V8_INLINE constexpr StorageType ptr() const</div><div class="ttdef"><b>Definition</b> <a href="tagged-impl_8h_source.html#l00114">tagged-impl.h:114</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1Tagged_html"><div class="ttname"><a href="classv8_1_1internal_1_1Tagged.html">v8::internal::Tagged</a></div><div class="ttdef"><b>Definition</b> <a href="waiter-queue-node_8h_source.html#l00022">waiter-queue-node.h:22</a></div></div>
<div class="ttc" id="aclassv8_1_1internal_1_1WasmCodePointer_html"><div class="ttname"><a href="classv8_1_1internal_1_1WasmCodePointer.html">v8::internal::WasmCodePointer</a></div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l02798">globals.h:2798</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html"><div class="ttname"><a href="classwasm_1_1RefImpl.html">wasm::RefImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00964">c-api.cc:964</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a022d2c439ab02cac93707697994a7c27"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a022d2c439ab02cac93707697994a7c27">wasm::RefImpl::set_host_info</a></div><div class="ttdeci">void set_host_info(void *info, void(*finalizer)(void *))</div><div class="ttdef"><b>Definition</b> <a href="#l00998">c-api.cc:998</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a0b0243bd24f5c7329edca604dc590802"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a0b0243bd24f5c7329edca604dc590802">wasm::RefImpl::get_host_info</a></div><div class="ttdeci">void * get_host_info() const</div><div class="ttdef"><b>Definition</b> <a href="#l00993">c-api.cc:993</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a177c1c84bc4dd0ba6b9aa9589718fd54"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a177c1c84bc4dd0ba6b9aa9589718fd54">wasm::RefImpl::RefImpl</a></div><div class="ttdeci">RefImpl()=default</div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a2dd84fffb16c2c76be3c3f4a52527cc4"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a2dd84fffb16c2c76be3c3f4a52527cc4">wasm::RefImpl::store_</a></div><div class="ttdeci">StoreImpl * store_</div><div class="ttdef"><b>Definition</b> <a href="#l01011">c-api.cc:1011</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a319283af92d10eb7bba3e44ebad9d9c2"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a319283af92d10eb7bba3e44ebad9d9c2">wasm::RefImpl::isolate</a></div><div class="ttdeci">i::Isolate * isolate() const</div><div class="ttdef"><b>Definition</b> <a href="#l00984">c-api.cc:984</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a3b3dd34d28a1907de30fcb6ddb268df9"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a3b3dd34d28a1907de30fcb6ddb268df9">wasm::RefImpl::~RefImpl</a></div><div class="ttdeci">~RefImpl()</div><div class="ttdef"><b>Definition</b> <a href="#l00975">c-api.cc:975</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a657f01833705c1ebe44bcbae896870b6"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a657f01833705c1ebe44bcbae896870b6">wasm::RefImpl::make</a></div><div class="ttdeci">static own&lt; Ref &gt; make(StoreImpl *store, i::Handle&lt; JSType &gt; obj)</div><div class="ttdef"><b>Definition</b> <a href="#l00966">c-api.cc:966</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_a98b1028a88b4e8dce130a2bfae063fd7"><div class="ttname"><a href="classwasm_1_1RefImpl.html#a98b1028a88b4e8dce130a2bfae063fd7">wasm::RefImpl::copy</a></div><div class="ttdeci">own&lt; Ref &gt; copy() const</div><div class="ttdef"><b>Definition</b> <a href="#l00977">c-api.cc:977</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_aa4fc43e9bd0b9b7b867c6af59072f73c"><div class="ttname"><a href="classwasm_1_1RefImpl.html#aa4fc43e9bd0b9b7b867c6af59072f73c">wasm::RefImpl::v8_object</a></div><div class="ttdeci">i::Handle&lt; JSType &gt; v8_object() const</div><div class="ttdef"><b>Definition</b> <a href="#l00986">c-api.cc:986</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_aa5b37df9cc1cea2870d82eab4e1a1a09"><div class="ttname"><a href="classwasm_1_1RefImpl.html#aa5b37df9cc1cea2870d82eab4e1a1a09">wasm::RefImpl::val_</a></div><div class="ttdeci">i::Handle&lt; i::JSReceiver &gt; val_</div><div class="ttdef"><b>Definition</b> <a href="#l01010">c-api.cc:1010</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_ac93f05555350ceaa8bd7be458a001dac"><div class="ttname"><a href="classwasm_1_1RefImpl.html#ac93f05555350ceaa8bd7be458a001dac">wasm::RefImpl::location</a></div><div class="ttdeci">i::Address * location() const</div><div class="ttdef"><b>Definition</b> <a href="#l01006">c-api.cc:1006</a></div></div>
<div class="ttc" id="aclasswasm_1_1RefImpl_html_aef83ead7e30b4f8fad39b4fdb188b02b"><div class="ttname"><a href="classwasm_1_1RefImpl.html#aef83ead7e30b4f8fad39b4fdb188b02b">wasm::RefImpl::store</a></div><div class="ttdeci">StoreImpl * store() const</div><div class="ttdef"><b>Definition</b> <a href="#l00982">c-api.cc:982</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html"><div class="ttname"><a href="classwasm_1_1StoreImpl.html">wasm::StoreImpl</a></div><div class="ttdef"><b>Definition</b> <a href="c-api_8h_source.html#l00032">c-api.h:32</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_a12725f4e6cb1a6964313d17ee8cc833f"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#a12725f4e6cb1a6964313d17ee8cc833f">wasm::StoreImpl::host_info_map_</a></div><div class="ttdeci">i::Handle&lt; i::JSWeakMap &gt; host_info_map_</div><div class="ttdef"><b>Definition</b> <a href="c-api_8h_source.html#l00062">c-api.h:62</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_a165eb6bfe781de6418966113fc7b0461"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#a165eb6bfe781de6418966113fc7b0461">wasm::StoreImpl::destroy</a></div><div class="ttdeci">void destroy()</div><div class="ttdef"><b>Definition</b> <a href="#l00472">c-api.cc:472</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_a7ce0593afac6404151276f6bd64fdb45"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#a7ce0593afac6404151276f6bd64fdb45">wasm::StoreImpl::isolate</a></div><div class="ttdeci">v8::Isolate * isolate() const</div><div class="ttdef"><b>Definition</b> <a href="c-api_8h_source.html#l00038">c-api.h:38</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_a7f21c85889a83d35299a96b95e92cce5"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#a7f21c85889a83d35299a96b95e92cce5">wasm::StoreImpl::i_isolate</a></div><div class="ttdeci">i::Isolate * i_isolate() const</div><div class="ttdef"><b>Definition</b> <a href="c-api_8h_source.html#l00039">c-api.h:39</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_a84bf50f8a3929a948de71177683a3b7f"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#a84bf50f8a3929a948de71177683a3b7f">wasm::StoreImpl::create_params_</a></div><div class="ttdeci">v8::Isolate::CreateParams create_params_</div><div class="ttdef"><b>Definition</b> <a href="c-api_8h_source.html#l00059">c-api.h:59</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_a868257d7622722a140453d7aa86875c3"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#a868257d7622722a140453d7aa86875c3">wasm::StoreImpl::SetHostInfo</a></div><div class="ttdeci">void SetHostInfo(i::DirectHandle&lt; i::Object &gt; object, void *info, void(*finalizer)(void *))</div><div class="ttdef"><b>Definition</b> <a href="#l00504">c-api.cc:504</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_a89be332b7ee7f6d5dc38f2b28784abe8"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#a89be332b7ee7f6d5dc38f2b28784abe8">wasm::StoreImpl::GetHostInfo</a></div><div class="ttdeci">void * GetHostInfo(i::DirectHandle&lt; i::Object &gt; key)</div><div class="ttdef"><b>Definition</b> <a href="#l00519">c-api.cc:519</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_ab76235239536dca3130c32b56cffb9a6"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#ab76235239536dca3130c32b56cffb9a6">wasm::StoreImpl::context</a></div><div class="ttdeci">v8::Local&lt; v8::Context &gt; context() const</div><div class="ttdef"><b>Definition</b> <a href="c-api_8h_source.html#l00043">c-api.h:43</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_ae465c5562e7d96be7ef210160de00221"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#ae465c5562e7d96be7ef210160de00221">wasm::StoreImpl::~StoreImpl</a></div><div class="ttdeci">~StoreImpl()</div><div class="ttdef"><b>Definition</b> <a href="#l00474">c-api.cc:474</a></div></div>
<div class="ttc" id="aclasswasm_1_1StoreImpl_html_af473de2fa4ff5146b090a418f4c918f0"><div class="ttname"><a href="classwasm_1_1StoreImpl.html#af473de2fa4ff5146b090a418f4c918f0">wasm::StoreImpl::isolate_</a></div><div class="ttdeci">v8::Isolate * isolate_</div><div class="ttdef"><b>Definition</b> <a href="c-api_8h_source.html#l00060">c-api.h:60</a></div></div>
<div class="ttc" id="acode-stub-assembler_8cc_html_a74a5ef43b6619793ef8d0fe626bd816a"><div class="ttname"><a href="code-stub-assembler_8cc.html#a74a5ef43b6619793ef8d0fe626bd816a">mt</a></div><div class="ttdeci">MachineType mt</div><div class="ttdef"><b>Definition</b> <a href="code-stub-assembler_8cc_source.html#l17992">code-stub-assembler.cc:17992</a></div></div>
<div class="ttc" id="acppgc_2sweeper_8cc_html_a6b06728795e8f208c0755874665b3a51"><div class="ttname"><a href="cppgc_2sweeper_8cc.html#a6b06728795e8f208c0755874665b3a51">count_</a></div><div class="ttdeci">size_t count_</div><div class="ttdef"><b>Definition</b> <a href="cppgc_2sweeper_8cc_source.html#l00055">sweeper.cc:55</a></div></div>
<div class="ttc" id="acppgc_2sweeper_8cc_html_aaa27c43c14d3f7d475899d57651dfe09"><div class="ttname"><a href="cppgc_2sweeper_8cc.html#aaa27c43c14d3f7d475899d57651dfe09">is_empty</a></div><div class="ttdeci">bool is_empty</div><div class="ttdef"><b>Definition</b> <a href="cppgc_2sweeper_8cc_source.html#l00229">sweeper.cc:229</a></div></div>
<div class="ttc" id="adebug-coverage_8cc_html_a86988a65e0d3ece7990c032c159786d6"><div class="ttname"><a href="debug-coverage_8cc.html#a86988a65e0d3ece7990c032c159786d6">count</a></div><div class="ttdeci">uint32_t count</div><div class="ttdef"><b>Definition</b> <a href="debug-coverage_8cc_source.html#l00594">debug-coverage.cc:594</a></div></div>
<div class="ttc" id="aexecution_8cc_html_a1d8217e3925e66477879e51a11ceb4b7"><div class="ttname"><a href="execution_8cc.html#a1d8217e3925e66477879e51a11ceb4b7">args</a></div><div class="ttdeci">base::Vector&lt; const DirectHandle&lt; Object &gt; &gt; args</div><div class="ttdef"><b>Definition</b> <a href="execution_8cc_source.html#l00074">execution.cc:74</a></div></div>
<div class="ttc" id="aflag-definitions_8h_html_a5a70311d99b5e08c265b90f73f12c945"><div class="ttname"><a href="flag-definitions_8h.html#a5a70311d99b5e08c265b90f73f12c945">store</a></div><div class="ttdeci">too high values may cause the compiler to set high thresholds for inlining to as much as possible avoid inlined allocation of objects that cannot escape trace load stores from virtual maglev objects use TurboFan fast string builder analyze liveness of environment slots and zap dead values trace TurboFan load elimination emit data about basic block usage in builtins to this enable builtin reordering when run mksnapshot flag for emit warnings when applying builtin profile data verify register allocation in TurboFan randomly schedule instructions to stress dependency tracking enable store store elimination in TurboFan rewrite far to near simulate GC compiler thread race related to allow float parameters to be passed in simulator mode JS Wasm Run additional turbo_optimize_inlined_js_wasm_wrappers enable experimental feedback collection in generic lowering enable Turboshaft s WasmLoadElimination run instruction selection on Turboshaft IR directly enable Turboshaft s loop unrolling enable an additional Turboshaft phase that performs optimizations based on type information build the Turboshaft graph from Maglev trace emitted Turboshaft instructions profile guided optimization for empty feedback vector invocation count for maglev for functions which according to profile_guided_optimization are likely to deoptimize before reaching this invocation count Immediately re optimize code after some lazy deopts Enables the lazy new space shrinking strategy max size of a semi the new space consists of two semi spaces young and full garbage collection phases are not overlapping Collect garbage after keeps maps alive for&lt; n &gt; old space garbage collections print one detailed trace line in allocation gc speed Starts incremental marking with kUserVisible priority threshold for starting incremental marking immediately in percent of available minor GC task trigger in percent of the current heap limit use a separate phase for stack scanning in scavenge max worker number of concurrent for NumberOfWorkerThreads start background threads that allocate memory concurrent_array_buffer_sweeping use parallel threads to clear weak refs in the atomic pause trace progress of the incremental marking trace object counts and memory usage report a tick only when allocated zone memory changes by this amount TracingFlags::gc_stats store(v8::tracing::TracingCategoryObserver::ENABLED_BY_NATIVE)) DEFINE_GENERIC_IMPLICATION(trace_gc_object_stats</div></div>
<div class="ttc" id="aflags_2flags_8h_html"><div class="ttname"><a href="flags_2flags_8h.html">flags.h</a></div></div>
<div class="ttc" id="agraph-builder-interface_8cc_html_a79d661617f46aabd0c6a79666870cbf5"><div class="ttname"><a href="graph-builder-interface_8cc.html#a79d661617f46aabd0c6a79666870cbf5">exception</a></div><div class="ttdeci">TFNode * exception</div><div class="ttdef"><b>Definition</b> <a href="graph-builder-interface_8cc_source.html#l00133">graph-builder-interface.cc:133</a></div></div>
<div class="ttc" id="agraph-builder_8cc_html_a9990dda08de44f6aee0aaf44c50da7d9"><div class="ttname"><a href="graph-builder_8cc.html#a9990dda08de44f6aee0aaf44c50da7d9">isolate</a></div><div class="ttdeci">Isolate * isolate</div><div class="ttdef"><b>Definition</b> <a href="graph-builder_8cc_source.html#l00058">graph-builder.cc:58</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_a97bd6c077f3c7769f575b82988b9b668"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#a97bd6c077f3c7769f575b82988b9b668">offset</a></div><div class="ttdeci">int32_t offset</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00072">instruction-selector-ia32.cc:72</a></div></div>
<div class="ttc" id="ainstruction-selector-ia32_8cc_html_ae55190dbead0a94298bdfa37911694e3"><div class="ttname"><a href="instruction-selector-ia32_8cc.html#ae55190dbead0a94298bdfa37911694e3">index</a></div><div class="ttdeci">turboshaft::OptionalOpIndex index</div><div class="ttdef"><b>Definition</b> <a href="instruction-selector-ia32_8cc_source.html#l00071">instruction-selector-ia32.cc:71</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_a0835767fe473cead88c1afdf3175bce8"><div class="ttname"><a href="js-call-reducer_8cc.html#a0835767fe473cead88c1afdf3175bce8">context</a></div><div class="ttdeci">TNode&lt; Context &gt; context</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01496">js-call-reducer.cc:1496</a></div></div>
<div class="ttc" id="ajs-call-reducer_8cc_html_ad83e8682ed733ee0cf359fa4f48441b0"><div class="ttname"><a href="js-call-reducer_8cc.html#ad83e8682ed733ee0cf359fa4f48441b0">callback</a></div><div class="ttdeci">TNode&lt; Object &gt; callback</div><div class="ttdef"><b>Definition</b> <a href="js-call-reducer_8cc_source.html#l01500">js-call-reducer.cc:1500</a></div></div>
<div class="ttc" id="ajs-collection-inl_8h_html"><div class="ttname"><a href="js-collection-inl_8h.html">js-collection-inl.h</a></div></div>
<div class="ttc" id="ajump-threading_8cc_html_a41f8c58d2c01bf65b8ee199c3f87fc80"><div class="ttname"><a href="jump-threading_8cc.html#a41f8c58d2c01bf65b8ee199c3f87fc80">result</a></div><div class="ttdeci">ZoneVector&lt; RpoNumber &gt; &amp; result</div><div class="ttdef"><b>Definition</b> <a href="jump-threading_8cc_source.html#l00021">jump-threading.cc:21</a></div></div>
<div class="ttc" id="aleb-helper_8h_html"><div class="ttname"><a href="leb-helper_8h.html">leb-helper.h</a></div></div>
<div class="ttc" id="aliveedit-diff_8cc_html_a6150e0515f7202e2fb518f7206ed97dc"><div class="ttname"><a href="liveedit-diff_8cc.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition</b> <a href="liveedit-diff_8cc_source.html#l00060">liveedit-diff.cc:60</a></div></div>
<div class="ttc" id="alogging_8h_html_a0bc63b24b654ca433be7b97a3edde132"><div class="ttname"><a href="logging_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a></div><div class="ttdeci">#define UNREACHABLE()</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00067">logging.h:67</a></div></div>
<div class="ttc" id="alogging_8h_html_a16b382527f19b805fc8f856668f2270b"><div class="ttname"><a href="logging_8h.html#a16b382527f19b805fc8f856668f2270b">DCHECK_LE</a></div><div class="ttdeci">#define DCHECK_LE(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00490">logging.h:490</a></div></div>
<div class="ttc" id="alogging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00124">logging.h:124</a></div></div>
<div class="ttc" id="alogging_8h_html_add09d39ec888c2d7e12877586f29368d"><div class="ttname"><a href="logging_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a></div><div class="ttdeci">#define UNIMPLEMENTED()</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00066">logging.h:66</a></div></div>
<div class="ttc" id="alogging_8h_html_ae17f8119c108cf3070bad3449c7e0006"><div class="ttname"><a href="logging_8h.html#ae17f8119c108cf3070bad3449c7e0006">DCHECK</a></div><div class="ttdeci">#define DCHECK(condition)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00482">logging.h:482</a></div></div>
<div class="ttc" id="alogging_8h_html_af9c313d74155f7f201955a939e24c71f"><div class="ttname"><a href="logging_8h.html#af9c313d74155f7f201955a939e24c71f">DCHECK_EQ</a></div><div class="ttdeci">#define DCHECK_EQ(v1, v2)</div><div class="ttdef"><b>Definition</b> <a href="logging_8h_source.html#l00485">logging.h:485</a></div></div>
<div class="ttc" id="amachine-graph-verifier_8cc_html_a7dac8366c11fbcad2f49d85fe8fc4fbe"><div class="ttname"><a href="machine-graph-verifier_8cc.html#a7dac8366c11fbcad2f49d85fe8fc4fbe">name_</a></div><div class="ttdeci">const char * name_</div><div class="ttdef"><b>Definition</b> <a href="machine-graph-verifier_8cc_source.html#l01077">machine-graph-verifier.cc:1077</a></div></div>
<div class="ttc" id="amanaged-inl_8h_html"><div class="ttname"><a href="managed-inl_8h.html">managed-inl.h</a></div></div>
<div class="ttc" id="amodule-compiler_8cc_html_aba33ee421effa5ecbb3fadcbf73dc7e1"><div class="ttname"><a href="module-compiler_8cc.html#aba33ee421effa5ecbb3fadcbf73dc7e1">counters_</a></div><div class="ttdeci">Counters * counters_</div><div class="ttdef"><b>Definition</b> <a href="module-compiler_8cc_source.html#l01174">module-compiler.cc:1174</a></div></div>
<div class="ttc" id="amodule-instantiate_8h_html"><div class="ttname"><a href="module-instantiate_8h.html">module-instantiate.h</a></div></div>
<div class="ttc" id="amul-fft_8cc_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="mul-fft_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition</b> <a href="mul-fft_8cc_source.html#l00296">mul-fft.cc:296</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition</b> <a href="hashing_8h_source.html#l00364">hashing.h:364</a></div></div>
<div class="ttc" id="anamespaceunibrow_html_a67de744730c9fed24aa185ab5747772c"><div class="ttname"><a href="namespaceunibrow.html#a67de744730c9fed24aa185ab5747772c">unibrow::int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition</b> <a href="unicode_8cc_source.html#l00040">unicode.cc:40</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_a0b04f46ee47c13e48f05a4c0031b94c3"><div class="ttname"><a href="namespacev8_1_1base.html#a0b04f46ee47c13e48f05a4c0031b94c3">v8::base::ReadUnalignedValue</a></div><div class="ttdeci">static V ReadUnalignedValue(Address p)</div><div class="ttdef"><b>Definition</b> <a href="base_2memory_8h_source.html#l00028">memory.h:28</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ab277246c6caecad159bbc8755cf6bb54"><div class="ttname"><a href="namespacev8_1_1base.html#ab277246c6caecad159bbc8755cf6bb54">v8::base::VectorOf</a></div><div class="ttdeci">constexpr Vector&lt; T &gt; VectorOf(T *start, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00360">vector.h:360</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_ab6a16e677d6f7a037918c8e80a2756e3"><div class="ttname"><a href="namespacev8_1_1base.html#ab6a16e677d6f7a037918c8e80a2756e3">v8::base::WriteUnalignedValue</a></div><div class="ttdeci">static void WriteUnalignedValue(Address p, V value)</div><div class="ttdef"><b>Definition</b> <a href="base_2memory_8h_source.html#l00041">memory.h:41</a></div></div>
<div class="ttc" id="anamespacev8_1_1base_html_abc1a5cbcd5118aa93d683e4875fa029c"><div class="ttname"><a href="namespacev8_1_1base.html#abc1a5cbcd5118aa93d683e4875fa029c">v8::base::OwnedCopyOf</a></div><div class="ttdeci">OwnedVector&lt; T &gt; OwnedCopyOf(const T *data, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="vector_8h_source.html#l00383">vector.h:383</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html"><div class="ttname"><a href="namespacev8_1_1internal.html">v8::internal</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00018">api-arguments-inl.h:18</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a3430752cde9f29d73e97ceed1bce0856"><div class="ttname"><a href="namespacev8_1_1internal.html#a3430752cde9f29d73e97ceed1bce0856">v8::internal::PrintF</a></div><div class="ttdeci">void PrintF(const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="utils_2utils_8cc_source.html#l00039">utils.cc:39</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370"><div class="ttname"><a href="namespacev8_1_1internal.html#a352f65439007f2f1b85c997c1ba11436a0e9b4052bcf7e2475e8bbf8f436bf370">v8::internal::NONE</a></div><div class="ttdeci">@ NONE</div><div class="ttdef"><b>Definition</b> <a href="property-details_8h_source.html#l00019">property-details.h:19</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4382c244e839ce16a4beafabd1c6bd1d"><div class="ttname"><a href="namespacev8_1_1internal.html#a4382c244e839ce16a4beafabd1c6bd1d">v8::internal::Tagged</a></div><div class="ttdeci">Tagged(T object) -&gt; Tagged&lt; T &gt;</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a4bf21ee96580042a8262a8300dca514c"><div class="ttname"><a href="namespacev8_1_1internal.html#a4bf21ee96580042a8262a8300dca514c">v8::internal::instance_data</a></div><div class="ttdeci">kWasmInternalFunctionIndirectPointerTag instance_data</div><div class="ttdef"><b>Definition</b> <a href="wasm-objects-inl_8h_source.html#l00468">wasm-objects-inl.h:468</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a5031451934208565c827c86d9eb86c5a"><div class="ttname"><a href="namespacev8_1_1internal.html#a5031451934208565c827c86d9eb86c5a">v8::internal::internal</a></div><div class="ttdeci">internal</div><div class="ttdef"><b>Definition</b> <a href="wasm-objects-inl_8h_source.html#l00457">wasm-objects-inl.h:457</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a60f13a8c00d0433f9336368824ac21a1"><div class="ttname"><a href="namespacev8_1_1internal.html#a60f13a8c00d0433f9336368824ac21a1">v8::internal::direct_handle</a></div><div class="ttdeci">V8_INLINE DirectHandle&lt; T &gt; direct_handle(Tagged&lt; T &gt; object, Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="handles-inl_8h_source.html#l00141">handles-inl.h:141</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a6135f0ef57de8d381e3225f6659c617a"><div class="ttname"><a href="namespacev8_1_1internal.html#a6135f0ef57de8d381e3225f6659c617a">v8::internal::sig</a></div><div class="ttdeci">kWasmInternalFunctionIndirectPointerTag kProtectedInstanceDataOffset sig</div><div class="ttdef"><b>Definition</b> <a href="wasm-objects-inl_8h_source.html#l00475">wasm-objects-inl.h:475</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a680ace1d3e86dae2df93867132a3c160"><div class="ttname"><a href="namespacev8_1_1internal.html#a680ace1d3e86dae2df93867132a3c160">v8::internal::SharedFlag</a></div><div class="ttdeci">SharedFlag</div><div class="ttdef"><b>Definition</b> <a href="backing-store_8h_source.html#l00025">backing-store.h:25</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_a782acb70e9eabcd3faaccfb6a3bde48e"><div class="ttname"><a href="namespacev8_1_1internal.html#a782acb70e9eabcd3faaccfb6a3bde48e">v8::internal::Address</a></div><div class="ttdeci">Address</div><div class="ttdef"><b>Definition</b> <a href="api-callbacks-inl_8h_source.html#l00034">api-callbacks-inl.h:34</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aa9db791c05a0359859a321dcfec42e37"><div class="ttname"><a href="namespacev8_1_1internal.html#aa9db791c05a0359859a321dcfec42e37">v8::internal::v8_flags</a></div><div class="ttdeci">V8_EXPORT_PRIVATE FlagValues v8_flags</div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_ae9b3d70a0b2f7c3c669d187fd9a9dae2"><div class="ttname"><a href="namespacev8_1_1internal.html#ae9b3d70a0b2f7c3c669d187fd9a9dae2">v8::internal::kMaxUInt32</a></div><div class="ttdeci">constexpr uint32_t kMaxUInt32</div><div class="ttdef"><b>Definition</b> <a href="common_2globals_8h_source.html#l00379">globals.h:379</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aea9d736830d86242c4e1cb59a371d3a6"><div class="ttname"><a href="namespacev8_1_1internal.html#aea9d736830d86242c4e1cb59a371d3a6">v8::internal::IsNull</a></div><div class="ttdeci">kInstanceDescriptorsOffset kTransitionsOrPrototypeInfoOffset IsNull(value)||IsJSProxy(value)||IsWasmObject(value)||(IsJSObject(value) &amp;&amp;(HeapLayout</div><div class="ttdef"><b>Definition</b> <a href="map-inl_8h_source.html#l00063">map-inl.h:63</a></div></div>
<div class="ttc" id="anamespacev8_1_1internal_html_aff82af2c2f7b200915e30bcfedca6f85"><div class="ttname"><a href="namespacev8_1_1internal.html#aff82af2c2f7b200915e30bcfedca6f85">v8::internal::Cast</a></div><div class="ttdeci">Tagged&lt; To &gt; Cast(Tagged&lt; From &gt; value, const v8::SourceLocation &amp;loc=INIT_SOURCE_LOCATION_IN_DEBUG)</div><div class="ttdef"><b>Definition</b> <a href="casting_8h_source.html#l00148">casting.h:148</a></div></div>
<div class="ttc" id="anamespacev8_1_1platform_html_a42d6286e8db8514d460bc28b1b52f56b"><div class="ttname"><a href="namespacev8_1_1platform.html#a42d6286e8db8514d460bc28b1b52f56b">v8::platform::NewSingleThreadedDefaultPlatform</a></div><div class="ttdeci">std::unique_ptr&lt; v8::Platform &gt; NewSingleThreadedDefaultPlatform(IdleTaskSupport idle_task_support, InProcessStackDumping in_process_stack_dumping, std::unique_ptr&lt; v8::TracingController &gt; tracing_controller)</div><div class="ttdef"><b>Definition</b> <a href="default-platform_8cc_source.html#l00060">default-platform.cc:60</a></div></div>
<div class="ttc" id="anamespacev8_html"><div class="ttname"><a href="namespacev8.html">v8</a></div><div class="ttdef"><b>Definition</b> <a href="api-arguments-inl_8h_source.html#l00017">api-arguments-inl.h:17</a></div></div>
<div class="ttc" id="anamespacev8_html_a2b8b10281c06598f463ba4b7e4779516"><div class="ttname"><a href="namespacev8.html#a2b8b10281c06598f463ba4b7e4779516">v8::CounterMap</a></div><div class="ttdeci">std::unordered_map&lt; std::string, Counter * &gt; CounterMap</div><div class="ttdef"><b>Definition</b> <a href="d8_8h_source.html#l00086">d8.h:86</a></div></div>
<div class="ttc" id="anamespacewasm_html"><div class="ttname"><a href="namespacewasm.html">wasm</a></div><div class="ttdef"><b>Definition</b> <a href="#l00090">c-api.cc:90</a></div></div>
<div class="ttc" id="anamespacewasm_html_a00337c6393ff82f59efe7d26e99af172"><div class="ttname"><a href="namespacewasm.html#a00337c6393ff82f59efe7d26e99af172">wasm::valtype_funcref</a></div><div class="ttdeci">ValTypeImpl * valtype_funcref</div><div class="ttdef"><b>Definition</b> <a href="#l00603">c-api.cc:603</a></div></div>
<div class="ttc" id="anamespacewasm_html_a1159abdb217149e8db975f0037d4bfe7"><div class="ttname"><a href="namespacewasm.html#a1159abdb217149e8db975f0037d4bfe7">wasm::ignore</a></div><div class="ttdeci">void ignore(T)</div><div class="ttdef"><b>Definition</b> <a href="#l00240">c-api.cc:240</a></div></div>
<div class="ttc" id="anamespacewasm_html_a20ebafc5faa7947c1b0c1ad0e34bd77a"><div class="ttname"><a href="namespacewasm.html#a20ebafc5faa7947c1b0c1ad0e34bd77a">wasm::ExportsImpl</a></div><div class="ttdeci">ownvec&lt; ExportType &gt; ExportsImpl(i::DirectHandle&lt; i::WasmModuleObject &gt; module_obj)</div><div class="ttdef"><b>Definition</b> <a href="#l01282">c-api.cc:1282</a></div></div>
<div class="ttc" id="anamespacewasm_html_a256444304fb2b0eed6c5c7ad4dd77552"><div class="ttname"><a href="namespacewasm.html#a256444304fb2b0eed6c5c7ad4dd77552">wasm::valtype_i32</a></div><div class="ttdeci">ValTypeImpl * valtype_i32</div><div class="ttdef"><b>Definition</b> <a href="#l00598">c-api.cc:598</a></div></div>
<div class="ttc" id="anamespacewasm_html_a524e65cedc161b57cda09a566cab3ea0"><div class="ttname"><a href="namespacewasm.html#a524e65cedc161b57cda09a566cab3ea0">wasm::valtype_i64</a></div><div class="ttdeci">ValTypeImpl * valtype_i64</div><div class="ttdef"><b>Definition</b> <a href="#l00599">c-api.cc:599</a></div></div>
<div class="ttc" id="anamespacewasm_html_a66026c9701469570ed0ec29ad626d57b"><div class="ttname"><a href="namespacewasm.html#a66026c9701469570ed0ec29ad626d57b">wasm::CheckAndHandleInterrupts</a></div><div class="ttdeci">void CheckAndHandleInterrupts(i::Isolate *isolate)</div><div class="ttdef"><b>Definition</b> <a href="#l00463">c-api.cc:463</a></div></div>
<div class="ttc" id="anamespacewasm_html_a66f288acbcb1a51aa8e21984eadd7a49"><div class="ttname"><a href="namespacewasm.html#a66f288acbcb1a51aa8e21984eadd7a49">wasm::extern_to_v8</a></div><div class="ttdeci">auto extern_to_v8(const Extern *ex) -&gt; i::Handle&lt; i::JSReceiver &gt;</div><div class="ttdef"><b>Definition</b> <a href="#l01473">c-api.cc:1473</a></div></div>
<div class="ttc" id="anamespacewasm_html_a683ff883cad10c7fd73c4d6b015ae4f2"><div class="ttname"><a href="namespacewasm.html#a683ff883cad10c7fd73c4d6b015ae4f2">wasm::seal</a></div><div class="ttdeci">auto seal(typename implement&lt; C &gt;::type *x) -&gt; C *</div><div class="ttdef"><b>Definition</b> <a href="#l00256">c-api.cc:256</a></div></div>
<div class="ttc" id="anamespacewasm_html_a998acd0d8e6f311f2be77c1c802f0f23"><div class="ttname"><a href="namespacewasm.html#a998acd0d8e6f311f2be77c1c802f0f23">wasm::WASM_UNIMPLEMENTED</a></div><div class="ttdeci">void WASM_UNIMPLEMENTED(const char *s)</div><div class="ttdoc">BEGIN FILE wasm-v8.cc.</div><div class="ttdef"><b>Definition</b> <a href="#l00234">c-api.cc:234</a></div></div>
<div class="ttc" id="anamespacewasm_html_aacbef3fe5bcf9124421156872f7c20eb"><div class="ttname"><a href="namespacewasm.html#aacbef3fe5bcf9124421156872f7c20eb">wasm::VecToString</a></div><div class="ttdeci">i::Handle&lt; i::String &gt; VecToString(i::Isolate *isolate, const vec&lt; byte_t &gt; &amp;chars)</div><div class="ttdef"><b>Definition</b> <a href="#l00950">c-api.cc:950</a></div></div>
<div class="ttc" id="anamespacewasm_html_abfdc2fcaa6322a069c657b3f677e476d"><div class="ttname"><a href="namespacewasm.html#abfdc2fcaa6322a069c657b3f677e476d">wasm::valtype_externref</a></div><div class="ttdeci">ValTypeImpl * valtype_externref</div><div class="ttdef"><b>Definition</b> <a href="#l00602">c-api.cc:602</a></div></div>
<div class="ttc" id="anamespacewasm_html_aca75bd987d7d40b886a5efad94f4053c"><div class="ttname"><a href="namespacewasm.html#aca75bd987d7d40b886a5efad94f4053c">wasm::impl</a></div><div class="ttdeci">auto impl(C *x) -&gt; typename implement&lt; C &gt;::type *</div><div class="ttdef"><b>Definition</b> <a href="#l00246">c-api.cc:246</a></div></div>
<div class="ttc" id="anamespacewasm_html_ae9bbb6dc7d63a16ac76362624cf908fe"><div class="ttname"><a href="namespacewasm.html#ae9bbb6dc7d63a16ac76362624cf908fe">wasm::valtype_f64</a></div><div class="ttdeci">ValTypeImpl * valtype_f64</div><div class="ttdef"><b>Definition</b> <a href="#l00601">c-api.cc:601</a></div></div>
<div class="ttc" id="anamespacewasm_html_af06a962038e038786edf30ca797afb7c"><div class="ttname"><a href="namespacewasm.html#af06a962038e038786edf30ca797afb7c">wasm::valtype_f32</a></div><div class="ttdeci">ValTypeImpl * valtype_f32</div><div class="ttdef"><b>Definition</b> <a href="#l00600">c-api.cc:600</a></div></div>
<div class="ttc" id="asetup-heap-internal_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="setup-heap-internal_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> <a href="setup-heap-internal_8cc_source.html#l00126">setup-heap-internal.cc:126</a></div></div>
<div class="ttc" id="asignature-hashing_8h_html"><div class="ttname"><a href="signature-hashing_8h.html">signature-hashing.h</a></div></div>
<div class="ttc" id="astructborrowed__val_html"><div class="ttname"><a href="structborrowed__val.html">borrowed_val</a></div><div class="ttdef"><b>Definition</b> <a href="#l03098">c-api.cc:3098</a></div></div>
<div class="ttc" id="astructborrowed__val_html_a757a8d164cf2f20bd98f592135ce8a75"><div class="ttname"><a href="structborrowed__val.html#a757a8d164cf2f20bd98f592135ce8a75">borrowed_val::~borrowed_val</a></div><div class="ttdeci">~borrowed_val()</div><div class="ttdef"><b>Definition</b> <a href="#l03102">c-api.cc:3102</a></div></div>
<div class="ttc" id="astructborrowed__val_html_a8b99920820ef9488c8f042f1f793448b"><div class="ttname"><a href="structborrowed__val.html#a8b99920820ef9488c8f042f1f793448b">borrowed_val::borrowed_val</a></div><div class="ttdeci">borrowed_val(borrowed_val &amp;&amp;that)</div><div class="ttdef"><b>Definition</b> <a href="#l03101">c-api.cc:3101</a></div></div>
<div class="ttc" id="astructborrowed__val_html_aebcb575f3a9129a1104f8ef9949fdfb8"><div class="ttname"><a href="structborrowed__val.html#aebcb575f3a9129a1104f8ef9949fdfb8">borrowed_val::it</a></div><div class="ttdeci">wasm::Val it</div><div class="ttdef"><b>Definition</b> <a href="#l03099">c-api.cc:3099</a></div></div>
<div class="ttc" id="astructborrowed__val_html_af98f5dcdd5419302ad68b98c55392481"><div class="ttname"><a href="structborrowed__val.html#af98f5dcdd5419302ad68b98c55392481">borrowed_val::borrowed_val</a></div><div class="ttdeci">borrowed_val(wasm::Val &amp;&amp;v)</div><div class="ttdef"><b>Definition</b> <a href="#l03100">c-api.cc:3100</a></div></div>
<div class="ttc" id="astructborrowed__vec_html"><div class="ttname"><a href="structborrowed__vec.html">borrowed_vec</a></div><div class="ttdef"><b>Definition</b> <a href="#l02498">c-api.cc:2498</a></div></div>
<div class="ttc" id="astructborrowed__vec_html_a1afa391ad7a390d905e4e674e6b3741f"><div class="ttname"><a href="structborrowed__vec.html#a1afa391ad7a390d905e4e674e6b3741f">borrowed_vec::it</a></div><div class="ttdeci">wasm::vec&lt; T &gt; it</div><div class="ttdef"><b>Definition</b> <a href="#l02499">c-api.cc:2499</a></div></div>
<div class="ttc" id="astructborrowed__vec_html_a25b86be37e621500c045e1ccf5f20523"><div class="ttname"><a href="structborrowed__vec.html#a25b86be37e621500c045e1ccf5f20523">borrowed_vec::borrowed_vec</a></div><div class="ttdeci">borrowed_vec(borrowed_vec&lt; T &gt; &amp;&amp;that)</div><div class="ttdef"><b>Definition</b> <a href="#l02501">c-api.cc:2501</a></div></div>
<div class="ttc" id="astructborrowed__vec_html_acaec8de0c377205737a6d6c97cd99acc"><div class="ttname"><a href="structborrowed__vec.html#acaec8de0c377205737a6d6c97cd99acc">borrowed_vec::borrowed_vec</a></div><div class="ttdeci">borrowed_vec(wasm::vec&lt; T &gt; &amp;&amp;v)</div><div class="ttdef"><b>Definition</b> <a href="#l02500">c-api.cc:2500</a></div></div>
<div class="ttc" id="astructborrowed__vec_html_ae9fd0f07531f565dc2540962d27260c8"><div class="ttname"><a href="structborrowed__vec.html#ae9fd0f07531f565dc2540962d27260c8">borrowed_vec::~borrowed_vec</a></div><div class="ttdeci">~borrowed_vec()</div><div class="ttdef"><b>Definition</b> <a href="#l02502">c-api.cc:2502</a></div></div>
<div class="ttc" id="astructwasm_1_1ConfigImpl_html"><div class="ttname"><a href="structwasm_1_1ConfigImpl.html">wasm::ConfigImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00270">c-api.cc:270</a></div></div>
<div class="ttc" id="astructwasm_1_1EngineImpl_html"><div class="ttname"><a href="structwasm_1_1EngineImpl.html">wasm::EngineImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00332">c-api.cc:332</a></div></div>
<div class="ttc" id="astructwasm_1_1EngineImpl_html_a56c4676956f05c2d1e2e7e79e1b485af"><div class="ttname"><a href="structwasm_1_1EngineImpl.html#a56c4676956f05c2d1e2e7e79e1b485af">wasm::EngineImpl::created</a></div><div class="ttdeci">static bool created</div><div class="ttdef"><b>Definition</b> <a href="#l00333">c-api.cc:333</a></div></div>
<div class="ttc" id="astructwasm_1_1EngineImpl_html_a5e02592ffd28f600d998406946a1d39d"><div class="ttname"><a href="structwasm_1_1EngineImpl.html#a5e02592ffd28f600d998406946a1d39d">wasm::EngineImpl::EngineImpl</a></div><div class="ttdeci">EngineImpl()</div><div class="ttdef"><b>Definition</b> <a href="#l00379">c-api.cc:379</a></div></div>
<div class="ttc" id="astructwasm_1_1EngineImpl_html_a92569b281f921a43644ab4eaf7bdda83"><div class="ttname"><a href="structwasm_1_1EngineImpl.html#a92569b281f921a43644ab4eaf7bdda83">wasm::EngineImpl::platform</a></div><div class="ttdeci">std::unique_ptr&lt; v8::Platform &gt; platform</div><div class="ttdef"><b>Definition</b> <a href="#l00335">c-api.cc:335</a></div></div>
<div class="ttc" id="astructwasm_1_1EngineImpl_html_aacf7793b7b283807b27f537224347d8b"><div class="ttname"><a href="structwasm_1_1EngineImpl.html#aacf7793b7b283807b27f537224347d8b">wasm::EngineImpl::~EngineImpl</a></div><div class="ttdeci">~EngineImpl()</div><div class="ttdef"><b>Definition</b> <a href="#l00387">c-api.cc:387</a></div></div>
<div class="ttc" id="astructwasm_1_1ExportTypeImpl_html"><div class="ttname"><a href="structwasm_1_1ExportTypeImpl.html">wasm::ExportTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00916">c-api.cc:916</a></div></div>
<div class="ttc" id="astructwasm_1_1ExportTypeImpl_html_a5dd774047b879db0e906186171747938"><div class="ttname"><a href="structwasm_1_1ExportTypeImpl.html#a5dd774047b879db0e906186171747938">wasm::ExportTypeImpl::ExportTypeImpl</a></div><div class="ttdeci">ExportTypeImpl(Name &amp;name, own&lt; ExternType &gt; &amp;type)</div><div class="ttdef"><b>Definition</b> <a href="#l00920">c-api.cc:920</a></div></div>
<div class="ttc" id="astructwasm_1_1ExportTypeImpl_html_a63bf551182d97763047c3582872a81a9"><div class="ttname"><a href="structwasm_1_1ExportTypeImpl.html#a63bf551182d97763047c3582872a81a9">wasm::ExportTypeImpl::type</a></div><div class="ttdeci">own&lt; ExternType &gt; type</div><div class="ttdef"><b>Definition</b> <a href="#l00918">c-api.cc:918</a></div></div>
<div class="ttc" id="astructwasm_1_1ExportTypeImpl_html_afe9d56d26373cf31f5ae00ea16cccbba"><div class="ttname"><a href="structwasm_1_1ExportTypeImpl.html#afe9d56d26373cf31f5ae00ea16cccbba">wasm::ExportTypeImpl::name</a></div><div class="ttdeci">Name name</div><div class="ttdef"><b>Definition</b> <a href="#l00917">c-api.cc:917</a></div></div>
<div class="ttc" id="astructwasm_1_1ExternTypeImpl_html"><div class="ttname"><a href="structwasm_1_1ExternTypeImpl.html">wasm::ExternTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00641">c-api.cc:641</a></div></div>
<div class="ttc" id="astructwasm_1_1ExternTypeImpl_html_a13c0730e11b41e9a45ca4be9aafc470c"><div class="ttname"><a href="structwasm_1_1ExternTypeImpl.html#a13c0730e11b41e9a45ca4be9aafc470c">wasm::ExternTypeImpl::~ExternTypeImpl</a></div><div class="ttdeci">virtual ~ExternTypeImpl()=default</div></div>
<div class="ttc" id="astructwasm_1_1ExternTypeImpl_html_a256037f0ce1146ef79a93aa0217d750f"><div class="ttname"><a href="structwasm_1_1ExternTypeImpl.html#a256037f0ce1146ef79a93aa0217d750f">wasm::ExternTypeImpl::ExternTypeImpl</a></div><div class="ttdeci">ExternTypeImpl(ExternKind kind)</div><div class="ttdef"><b>Definition</b> <a href="#l00644">c-api.cc:644</a></div></div>
<div class="ttc" id="astructwasm_1_1ExternTypeImpl_html_ace6854b72e8d7da6500a2befde86c273"><div class="ttname"><a href="structwasm_1_1ExternTypeImpl.html#ace6854b72e8d7da6500a2befde86c273">wasm::ExternTypeImpl::kind</a></div><div class="ttdeci">ExternKind kind</div><div class="ttdef"><b>Definition</b> <a href="#l00642">c-api.cc:642</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html"><div class="ttname"><a href="structwasm_1_1FuncData.html">wasm::FuncData</a></div><div class="ttdef"><b>Definition</b> <a href="#l01488">c-api.cc:1488</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a0acf40b8aa8eaa7d5ce26af9e90b4d59"><div class="ttname"><a href="structwasm_1_1FuncData.html#a0acf40b8aa8eaa7d5ce26af9e90b4d59">wasm::FuncData::v8_callback</a></div><div class="ttdeci">static i::Address v8_callback(i::Address host_data_foreign, i::Address argv)</div><div class="ttdef"><b>Definition</b> <a href="#l01892">c-api.cc:1892</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a17d4d331a433849800f64fdfad1303ce"><div class="ttname"><a href="structwasm_1_1FuncData.html#a17d4d331a433849800f64fdfad1303ce">wasm::FuncData::FuncData</a></div><div class="ttdeci">FuncData(Store *store, const FuncType *type, Kind kind)</div><div class="ttdef"><b>Definition</b> <a href="#l01501">c-api.cc:1501</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a186f7a8955380e53eb8cca026975cdc3"><div class="ttname"><a href="structwasm_1_1FuncData.html#a186f7a8955380e53eb8cca026975cdc3">wasm::FuncData::env</a></div><div class="ttdeci">void * env</div><div class="ttdef"><b>Definition</b> <a href="#l01499">c-api.cc:1499</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a19f4c656f85eaa29eddf64fd41f28d3c"><div class="ttname"><a href="structwasm_1_1FuncData.html#a19f4c656f85eaa29eddf64fd41f28d3c">wasm::FuncData::store</a></div><div class="ttdeci">Store * store</div><div class="ttdef"><b>Definition</b> <a href="#l01491">c-api.cc:1491</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a483292c3ce5eb4e958d95fa90b2b2295"><div class="ttname"><a href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295">wasm::FuncData::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition</b> <a href="#l01493">c-api.cc:1493</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a483292c3ce5eb4e958d95fa90b2b2295aa25acf2e0ceaeac80fa7823ecbe8168f"><div class="ttname"><a href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295aa25acf2e0ceaeac80fa7823ecbe8168f">wasm::FuncData::kCallback</a></div><div class="ttdeci">@ kCallback</div><div class="ttdef"><b>Definition</b> <a href="#l01493">c-api.cc:1493</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a483292c3ce5eb4e958d95fa90b2b2295ab3715f827b6fede0c2294f5b91ef33b1"><div class="ttname"><a href="structwasm_1_1FuncData.html#a483292c3ce5eb4e958d95fa90b2b2295ab3715f827b6fede0c2294f5b91ef33b1">wasm::FuncData::kCallbackWithEnv</a></div><div class="ttdeci">@ kCallbackWithEnv</div><div class="ttdef"><b>Definition</b> <a href="#l01493">c-api.cc:1493</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a4aed3fd6ccb29643bcf1a4a5be708d36"><div class="ttname"><a href="structwasm_1_1FuncData.html#a4aed3fd6ccb29643bcf1a4a5be708d36">wasm::FuncData::callback</a></div><div class="ttdeci">Func::callback callback</div><div class="ttdef"><b>Definition</b> <a href="#l01495">c-api.cc:1495</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a4df8d86bbbeedf05cc9ef5180ddc31ea"><div class="ttname"><a href="structwasm_1_1FuncData.html#a4df8d86bbbeedf05cc9ef5180ddc31ea">wasm::FuncData::~FuncData</a></div><div class="ttdeci">~FuncData()</div><div class="ttdef"><b>Definition</b> <a href="#l01508">c-api.cc:1508</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a4eed45f6c060d14a341442e093d37e42"><div class="ttname"><a href="structwasm_1_1FuncData.html#a4eed45f6c060d14a341442e093d37e42">wasm::FuncData::kind</a></div><div class="ttdeci">enum wasm::FuncData::Kind kind</div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_a68b72129bd2ac9d73d8913346ea0fdc1"><div class="ttname"><a href="structwasm_1_1FuncData.html#a68b72129bd2ac9d73d8913346ea0fdc1">wasm::FuncData::callback_with_env</a></div><div class="ttdeci">Func::callback_with_env callback_with_env</div><div class="ttdef"><b>Definition</b> <a href="#l01496">c-api.cc:1496</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_acbc2cacd8ac30af35568fe81621b4e89"><div class="ttname"><a href="structwasm_1_1FuncData.html#acbc2cacd8ac30af35568fe81621b4e89">wasm::FuncData::type</a></div><div class="ttdeci">own&lt; FuncType &gt; type</div><div class="ttdef"><b>Definition</b> <a href="#l01492">c-api.cc:1492</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_afb914921de73ba6f4ff4b07e01aa0cd6"><div class="ttname"><a href="structwasm_1_1FuncData.html#afb914921de73ba6f4ff4b07e01aa0cd6">wasm::FuncData::kManagedTag</a></div><div class="ttdeci">static constexpr i::ExternalPointerTag kManagedTag</div><div class="ttdef"><b>Definition</b> <a href="#l01489">c-api.cc:1489</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncData_html_afff395fc4bd7f3f24e721665b22d3483"><div class="ttname"><a href="structwasm_1_1FuncData.html#afff395fc4bd7f3f24e721665b22d3483">wasm::FuncData::finalizer</a></div><div class="ttdeci">void(* finalizer)(void *)</div><div class="ttdef"><b>Definition</b> <a href="#l01498">c-api.cc:1498</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncTypeImpl_html"><div class="ttname"><a href="structwasm_1_1FuncTypeImpl.html">wasm::FuncTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00674">c-api.cc:674</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncTypeImpl_html_a2a2531a53c5a1a0a011aad71a48064d8"><div class="ttname"><a href="structwasm_1_1FuncTypeImpl.html#a2a2531a53c5a1a0a011aad71a48064d8">wasm::FuncTypeImpl::FuncTypeImpl</a></div><div class="ttdeci">FuncTypeImpl(ownvec&lt; ValType &gt; &amp;params, ownvec&lt; ValType &gt; &amp;results)</div><div class="ttdef"><b>Definition</b> <a href="#l00678">c-api.cc:678</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncTypeImpl_html_a2b8cba7227bb90db581e9e41eaa4f039"><div class="ttname"><a href="structwasm_1_1FuncTypeImpl.html#a2b8cba7227bb90db581e9e41eaa4f039">wasm::FuncTypeImpl::params</a></div><div class="ttdeci">ownvec&lt; ValType &gt; params</div><div class="ttdef"><b>Definition</b> <a href="#l00675">c-api.cc:675</a></div></div>
<div class="ttc" id="astructwasm_1_1FuncTypeImpl_html_a8fbd0f69026482c3bf4a290b44084651"><div class="ttname"><a href="structwasm_1_1FuncTypeImpl.html#a8fbd0f69026482c3bf4a290b44084651">wasm::FuncTypeImpl::results</a></div><div class="ttdeci">ownvec&lt; ValType &gt; results</div><div class="ttdef"><b>Definition</b> <a href="#l00676">c-api.cc:676</a></div></div>
<div class="ttc" id="astructwasm_1_1GlobalTypeImpl_html"><div class="ttname"><a href="structwasm_1_1GlobalTypeImpl.html">wasm::GlobalTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00725">c-api.cc:725</a></div></div>
<div class="ttc" id="astructwasm_1_1GlobalTypeImpl_html_a5e8be6a4a0fa129a497ddeb20969611e"><div class="ttname"><a href="structwasm_1_1GlobalTypeImpl.html#a5e8be6a4a0fa129a497ddeb20969611e">wasm::GlobalTypeImpl::~GlobalTypeImpl</a></div><div class="ttdeci">~GlobalTypeImpl() override=default</div></div>
<div class="ttc" id="astructwasm_1_1GlobalTypeImpl_html_a6babd80a98c67c5d106be040576b6680"><div class="ttname"><a href="structwasm_1_1GlobalTypeImpl.html#a6babd80a98c67c5d106be040576b6680">wasm::GlobalTypeImpl::mutability</a></div><div class="ttdeci">Mutability mutability</div><div class="ttdef"><b>Definition</b> <a href="#l00727">c-api.cc:727</a></div></div>
<div class="ttc" id="astructwasm_1_1GlobalTypeImpl_html_abc4ed6aa388102aeb56eac0da8b416d5"><div class="ttname"><a href="structwasm_1_1GlobalTypeImpl.html#abc4ed6aa388102aeb56eac0da8b416d5">wasm::GlobalTypeImpl::GlobalTypeImpl</a></div><div class="ttdeci">GlobalTypeImpl(own&lt; ValType &gt; &amp;content, Mutability mutability)</div><div class="ttdef"><b>Definition</b> <a href="#l00729">c-api.cc:729</a></div></div>
<div class="ttc" id="astructwasm_1_1GlobalTypeImpl_html_af01470fcef74964cb6864e745beab7d9"><div class="ttname"><a href="structwasm_1_1GlobalTypeImpl.html#af01470fcef74964cb6864e745beab7d9">wasm::GlobalTypeImpl::content</a></div><div class="ttdeci">own&lt; ValType &gt; content</div><div class="ttdef"><b>Definition</b> <a href="#l00726">c-api.cc:726</a></div></div>
<div class="ttc" id="astructwasm_1_1ImportTypeImpl_html"><div class="ttname"><a href="structwasm_1_1ImportTypeImpl.html">wasm::ImportTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00872">c-api.cc:872</a></div></div>
<div class="ttc" id="astructwasm_1_1ImportTypeImpl_html_a62c6ae0843efc661e32bc42550bad33b"><div class="ttname"><a href="structwasm_1_1ImportTypeImpl.html#a62c6ae0843efc661e32bc42550bad33b">wasm::ImportTypeImpl::ImportTypeImpl</a></div><div class="ttdeci">ImportTypeImpl(Name &amp;module, Name &amp;name, own&lt; ExternType &gt; &amp;type)</div><div class="ttdef"><b>Definition</b> <a href="#l00877">c-api.cc:877</a></div></div>
<div class="ttc" id="astructwasm_1_1ImportTypeImpl_html_a7e9076199f3ba5f150595578d5764d36"><div class="ttname"><a href="structwasm_1_1ImportTypeImpl.html#a7e9076199f3ba5f150595578d5764d36">wasm::ImportTypeImpl::type</a></div><div class="ttdeci">own&lt; ExternType &gt; type</div><div class="ttdef"><b>Definition</b> <a href="#l00875">c-api.cc:875</a></div></div>
<div class="ttc" id="astructwasm_1_1ImportTypeImpl_html_ab51dd4bd7712a4cb7151d226b51e2d45"><div class="ttname"><a href="structwasm_1_1ImportTypeImpl.html#ab51dd4bd7712a4cb7151d226b51e2d45">wasm::ImportTypeImpl::name</a></div><div class="ttdeci">Name name</div><div class="ttdef"><b>Definition</b> <a href="#l00874">c-api.cc:874</a></div></div>
<div class="ttc" id="astructwasm_1_1ImportTypeImpl_html_af2eaa9838d45779f5b6fa52a2d940d59"><div class="ttname"><a href="structwasm_1_1ImportTypeImpl.html#af2eaa9838d45779f5b6fa52a2d940d59">wasm::ImportTypeImpl::module</a></div><div class="ttdeci">Name module</div><div class="ttdef"><b>Definition</b> <a href="#l00873">c-api.cc:873</a></div></div>
<div class="ttc" id="astructwasm_1_1ManagedData_html"><div class="ttname"><a href="structwasm_1_1ManagedData.html">wasm::ManagedData</a></div><div class="ttdef"><b>Definition</b> <a href="#l00490">c-api.cc:490</a></div></div>
<div class="ttc" id="astructwasm_1_1ManagedData_html_a2a591fe3cf559ccc476d65f04d5c9731"><div class="ttname"><a href="structwasm_1_1ManagedData.html#a2a591fe3cf559ccc476d65f04d5c9731">wasm::ManagedData::finalizer</a></div><div class="ttdeci">void(* finalizer)(void *)</div><div class="ttdef"><b>Definition</b> <a href="#l00501">c-api.cc:501</a></div></div>
<div class="ttc" id="astructwasm_1_1ManagedData_html_a4b19d357014fe0cc4b46ebebde7f8a5e"><div class="ttname"><a href="structwasm_1_1ManagedData.html#a4b19d357014fe0cc4b46ebebde7f8a5e">wasm::ManagedData::info</a></div><div class="ttdeci">void * info</div><div class="ttdef"><b>Definition</b> <a href="#l00500">c-api.cc:500</a></div></div>
<div class="ttc" id="astructwasm_1_1ManagedData_html_a84967c63529eaaad8a2ecdafcd3cc10e"><div class="ttname"><a href="structwasm_1_1ManagedData.html#a84967c63529eaaad8a2ecdafcd3cc10e">wasm::ManagedData::kManagedTag</a></div><div class="ttdeci">static constexpr i::ExternalPointerTag kManagedTag</div><div class="ttdef"><b>Definition</b> <a href="#l00491">c-api.cc:491</a></div></div>
<div class="ttc" id="astructwasm_1_1ManagedData_html_add880dba132f93fd9a27a26b88a5eb2d"><div class="ttname"><a href="structwasm_1_1ManagedData.html#add880dba132f93fd9a27a26b88a5eb2d">wasm::ManagedData::~ManagedData</a></div><div class="ttdeci">~ManagedData()</div><div class="ttdef"><b>Definition</b> <a href="#l00496">c-api.cc:496</a></div></div>
<div class="ttc" id="astructwasm_1_1ManagedData_html_ae2b197ddf6cfc54f63efcefb7afe17de"><div class="ttname"><a href="structwasm_1_1ManagedData.html#ae2b197ddf6cfc54f63efcefb7afe17de">wasm::ManagedData::ManagedData</a></div><div class="ttdeci">ManagedData(void *info, void(*finalizer)(void *))</div><div class="ttdef"><b>Definition</b> <a href="#l00493">c-api.cc:493</a></div></div>
<div class="ttc" id="astructwasm_1_1MemoryTypeImpl_html"><div class="ttname"><a href="structwasm_1_1MemoryTypeImpl.html">wasm::MemoryTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00829">c-api.cc:829</a></div></div>
<div class="ttc" id="astructwasm_1_1MemoryTypeImpl_html_a38eec6dab18901f9dd8c4fa1f84223e5"><div class="ttname"><a href="structwasm_1_1MemoryTypeImpl.html#a38eec6dab18901f9dd8c4fa1f84223e5">wasm::MemoryTypeImpl::MemoryTypeImpl</a></div><div class="ttdeci">MemoryTypeImpl(Limits limits)</div><div class="ttdef"><b>Definition</b> <a href="#l00832">c-api.cc:832</a></div></div>
<div class="ttc" id="astructwasm_1_1MemoryTypeImpl_html_a700b7778d6589db74f2c1cd28c77553e"><div class="ttname"><a href="structwasm_1_1MemoryTypeImpl.html#a700b7778d6589db74f2c1cd28c77553e">wasm::MemoryTypeImpl::limits</a></div><div class="ttdeci">Limits limits</div><div class="ttdef"><b>Definition</b> <a href="#l00830">c-api.cc:830</a></div></div>
<div class="ttc" id="astructwasm_1_1MemoryTypeImpl_html_abf2f1e08007ce360a07776cd194b102a"><div class="ttname"><a href="structwasm_1_1MemoryTypeImpl.html#abf2f1e08007ce360a07776cd194b102a">wasm::MemoryTypeImpl::~MemoryTypeImpl</a></div><div class="ttdeci">~MemoryTypeImpl() override=default</div></div>
<div class="ttc" id="astructwasm_1_1TableTypeImpl_html"><div class="ttname"><a href="structwasm_1_1TableTypeImpl.html">wasm::TableTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00777">c-api.cc:777</a></div></div>
<div class="ttc" id="astructwasm_1_1TableTypeImpl_html_a2166fa555e1498739abe5d6227f11325"><div class="ttname"><a href="structwasm_1_1TableTypeImpl.html#a2166fa555e1498739abe5d6227f11325">wasm::TableTypeImpl::element</a></div><div class="ttdeci">own&lt; ValType &gt; element</div><div class="ttdef"><b>Definition</b> <a href="#l00778">c-api.cc:778</a></div></div>
<div class="ttc" id="astructwasm_1_1TableTypeImpl_html_a53bfde6f480d88b26366ee64e47edc5e"><div class="ttname"><a href="structwasm_1_1TableTypeImpl.html#a53bfde6f480d88b26366ee64e47edc5e">wasm::TableTypeImpl::~TableTypeImpl</a></div><div class="ttdeci">~TableTypeImpl() override=default</div></div>
<div class="ttc" id="astructwasm_1_1TableTypeImpl_html_aa08dc08265289e9032d307b7a9d0ef33"><div class="ttname"><a href="structwasm_1_1TableTypeImpl.html#aa08dc08265289e9032d307b7a9d0ef33">wasm::TableTypeImpl::TableTypeImpl</a></div><div class="ttdeci">TableTypeImpl(own&lt; ValType &gt; &amp;element, Limits limits)</div><div class="ttdef"><b>Definition</b> <a href="#l00781">c-api.cc:781</a></div></div>
<div class="ttc" id="astructwasm_1_1TableTypeImpl_html_aa15187ad2e3ce0711cfce5e8ad9ea88e"><div class="ttname"><a href="structwasm_1_1TableTypeImpl.html#aa15187ad2e3ce0711cfce5e8ad9ea88e">wasm::TableTypeImpl::limits</a></div><div class="ttdeci">Limits limits</div><div class="ttdef"><b>Definition</b> <a href="#l00779">c-api.cc:779</a></div></div>
<div class="ttc" id="astructwasm_1_1ValTypeImpl_html"><div class="ttname"><a href="structwasm_1_1ValTypeImpl.html">wasm::ValTypeImpl</a></div><div class="ttdef"><b>Definition</b> <a href="#l00587">c-api.cc:587</a></div></div>
<div class="ttc" id="astructwasm_1_1ValTypeImpl_html_a0bfbe257148f76ecefae63b882183e8c"><div class="ttname"><a href="structwasm_1_1ValTypeImpl.html#a0bfbe257148f76ecefae63b882183e8c">wasm::ValTypeImpl::kind</a></div><div class="ttdeci">ValKind kind</div><div class="ttdef"><b>Definition</b> <a href="#l00588">c-api.cc:588</a></div></div>
<div class="ttc" id="astructwasm_1_1ValTypeImpl_html_a2c62d0241f1442a7f41129a24d88275d"><div class="ttname"><a href="structwasm_1_1ValTypeImpl.html#a2c62d0241f1442a7f41129a24d88275d">wasm::ValTypeImpl::ValTypeImpl</a></div><div class="ttdeci">ValTypeImpl(ValKind kind)</div><div class="ttdef"><b>Definition</b> <a href="#l00590">c-api.cc:590</a></div></div>
<div class="ttc" id="astructwasm_1_1implement_3_01Frame_01_4_html_a07796ae516ba558982361153381d53f1"><div class="ttname"><a href="structwasm_1_1implement_3_01Frame_01_4.html#a07796ae516ba558982361153381d53f1">wasm::implement&lt; Frame &gt;::type</a></div><div class="ttdeci">FrameImpl type</div><div class="ttdef"><b>Definition</b> <a href="#l01064">c-api.cc:1064</a></div></div>
<div class="ttc" id="astructwasm_1_1implement_3_01Instance_01_4_html_a9548d0774276853e3f3ee267ac5636bd"><div class="ttname"><a href="structwasm_1_1implement_3_01Instance_01_4.html#a9548d0774276853e3f3ee267ac5636bd">wasm::implement&lt; Instance &gt;::type</a></div><div class="ttdeci">RefImpl&lt; Instance, i::WasmInstanceObject &gt; type</div><div class="ttdef"><b>Definition</b> <a href="#l02350">c-api.cc:2350</a></div></div>
<div class="ttc" id="astructwasm_1_1implement_3_01Module_01_4_html_a2130567151fc069f4042dcc5a7638eaf"><div class="ttname"><a href="structwasm_1_1implement_3_01Module_01_4.html#a2130567151fc069f4042dcc5a7638eaf">wasm::implement&lt; Module &gt;::type</a></div><div class="ttdeci">RefImpl&lt; Module, i::WasmModuleObject &gt; type</div><div class="ttdef"><b>Definition</b> <a href="#l01214">c-api.cc:1214</a></div></div>
<div class="ttc" id="astructwasm_1_1implement_3_01Shared_3_01Module_01_4_01_4_html_a3790165c4b4d46eb63da97a3588de0f5"><div class="ttname"><a href="structwasm_1_1implement_3_01Shared_3_01Module_01_4_01_4.html#a3790165c4b4d46eb63da97a3588de0f5">wasm::implement&lt; Shared&lt; Module &gt; &gt;::type</a></div><div class="ttdeci">vec&lt; byte_t &gt; type</div><div class="ttdef"><b>Definition</b> <a href="#l01382">c-api.cc:1382</a></div></div>
<div class="ttc" id="astructwasm_1_1implement_html"><div class="ttname"><a href="structwasm_1_1implement.html">wasm::implement</a></div><div class="ttdef"><b>Definition</b> <a href="#l00243">c-api.cc:243</a></div></div>
<div class="ttc" id="astructwasm__callback__env__t_html"><div class="ttname"><a href="structwasm__callback__env__t.html">wasm_callback_env_t</a></div><div class="ttdef"><b>Definition</b> <a href="#l03280">c-api.cc:3280</a></div></div>
<div class="ttc" id="astructwasm__callback__env__t_html_a43cc2ffacbce02de47e5a89c94a3a8ab"><div class="ttname"><a href="structwasm__callback__env__t.html#a43cc2ffacbce02de47e5a89c94a3a8ab">wasm_callback_env_t::finalizer</a></div><div class="ttdeci">void(* finalizer)(void *)</div><div class="ttdef"><b>Definition</b> <a href="#l03283">c-api.cc:3283</a></div></div>
<div class="ttc" id="astructwasm__callback__env__t_html_a8f355dd616ed324f9983884aeda9a0c2"><div class="ttname"><a href="structwasm__callback__env__t.html#a8f355dd616ed324f9983884aeda9a0c2">wasm_callback_env_t::env</a></div><div class="ttdeci">void * env</div><div class="ttdef"><b>Definition</b> <a href="#l03282">c-api.cc:3282</a></div></div>
<div class="ttc" id="astructwasm__callback__env__t_html_aee9e5e84edaa9b87819f18024615a3a2"><div class="ttname"><a href="structwasm__callback__env__t.html#aee9e5e84edaa9b87819f18024615a3a2">wasm_callback_env_t::callback</a></div><div class="ttdeci">wasm_func_callback_with_env_t callback</div><div class="ttdef"><b>Definition</b> <a href="#l03281">c-api.cc:3281</a></div></div>
<div class="ttc" id="avalue-mirror_8cc_html_af6b78a5a5b7a4e51ea415c001e9eb58b"><div class="ttname"><a href="value-mirror_8cc.html#af6b78a5a5b7a4e51ea415c001e9eb58b">key</a></div><div class="ttdeci">std::unique_ptr&lt; ValueMirror &gt; key</div><div class="ttdef"><b>Definition</b> <a href="value-mirror_8cc_source.html#l00949">value-mirror.cc:949</a></div></div>
<div class="ttc" id="awasm-arguments_8h_html"><div class="ttname"><a href="wasm-arguments_8h.html">wasm-arguments.h</a></div></div>
<div class="ttc" id="awasm-compiler_8h_html"><div class="ttname"><a href="wasm-compiler_8h.html">wasm-compiler.h</a></div></div>
<div class="ttc" id="awasm-constants_8h_html"><div class="ttname"><a href="wasm-constants_8h.html">wasm-constants.h</a></div></div>
<div class="ttc" id="awasm-engine_8h_html"><div class="ttname"><a href="wasm-engine_8h.html">wasm-engine.h</a></div></div>
<div class="ttc" id="awasm-inlining-into-js_8cc_html_a66874a4e937e4192b2b42e57f55251e8"><div class="ttname"><a href="wasm-inlining-into-js_8cc.html#a66874a4e937e4192b2b42e57f55251e8">type</a></div><div class="ttdeci">wasm::ValueType type</div><div class="ttdef"><b>Definition</b> <a href="wasm-inlining-into-js_8cc_source.html#l00028">wasm-inlining-into-js.cc:28</a></div></div>
<div class="ttc" id="awasm-objects_8h_html"><div class="ttname"><a href="wasm-objects_8h.html">wasm-objects.h</a></div></div>
<div class="ttc" id="awasm-result_8h_html"><div class="ttname"><a href="wasm-result_8h.html">wasm-result.h</a></div></div>
<div class="ttc" id="awasm-serialization_8h_html"><div class="ttname"><a href="wasm-serialization_8h.html">wasm-serialization.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 3 2025 08:20:03 for v8 by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
